(function(Pt,se){typeof exports=="object"&&typeof module<"u"?se(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],se):(Pt=typeof globalThis<"u"?globalThis:Pt||self,se(Pt.vue_vtk={},Pt.Vue))})(this,function(Pt,se){"use strict";var Ue=1e-6,gt=typeof Float32Array<"u"?Float32Array:Array,Rg=Math.PI/180;function Lg(t){return t*Rg}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function mu(){var t=new gt(9);return gt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function ta(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function kg(t){var e=new gt(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Fg(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function xu(t,e,a,n,r,i,s,u,c){var o=new gt(9);return o[0]=t,o[1]=e,o[2]=a,o[3]=n,o[4]=r,o[5]=i,o[6]=s,o[7]=u,o[8]=c,o}function Ag(t,e,a,n,r,i,s,u,c,o){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=i,t[5]=s,t[6]=u,t[7]=c,t[8]=o,t}function zt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function ei(t,e){if(t===e){var a=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=a,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function xr(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],s=e[4],u=e[5],c=e[6],o=e[7],f=e[8],l=f*s-u*o,h=-f*i+u*c,p=o*i-s*c,d=a*l+n*h+r*p;return d?(d=1/d,t[0]=l*d,t[1]=(-f*n+r*o)*d,t[2]=(u*n-r*s)*d,t[3]=h*d,t[4]=(f*a-r*c)*d,t[5]=(-u*a+r*i)*d,t[6]=p*d,t[7]=(-o*a+n*c)*d,t[8]=(s*a-n*i)*d,t):null}function Vg(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],s=e[4],u=e[5],c=e[6],o=e[7],f=e[8];return t[0]=s*f-u*o,t[1]=r*o-n*f,t[2]=n*u-r*s,t[3]=u*c-i*f,t[4]=a*f-r*c,t[5]=r*i-a*u,t[6]=i*o-s*c,t[7]=n*c-a*o,t[8]=a*s-n*i,t}function Bg(t){var e=t[0],a=t[1],n=t[2],r=t[3],i=t[4],s=t[5],u=t[6],c=t[7],o=t[8];return e*(o*i-s*c)+a*(-o*r+s*u)+n*(c*r-i*u)}function Sr(t,e,a){var n=e[0],r=e[1],i=e[2],s=e[3],u=e[4],c=e[5],o=e[6],f=e[7],l=e[8],h=a[0],p=a[1],d=a[2],y=a[3],m=a[4],S=a[5],v=a[6],g=a[7],x=a[8];return t[0]=h*n+p*s+d*o,t[1]=h*r+p*u+d*f,t[2]=h*i+p*c+d*l,t[3]=y*n+m*s+S*o,t[4]=y*r+m*u+S*f,t[5]=y*i+m*c+S*l,t[6]=v*n+g*s+x*o,t[7]=v*r+g*u+x*f,t[8]=v*i+g*c+x*l,t}function Ug(t,e,a){var n=e[0],r=e[1],i=e[2],s=e[3],u=e[4],c=e[5],o=e[6],f=e[7],l=e[8],h=a[0],p=a[1];return t[0]=n,t[1]=r,t[2]=i,t[3]=s,t[4]=u,t[5]=c,t[6]=h*n+p*s+o,t[7]=h*r+p*u+f,t[8]=h*i+p*c+l,t}function Gg(t,e,a){var n=e[0],r=e[1],i=e[2],s=e[3],u=e[4],c=e[5],o=e[6],f=e[7],l=e[8],h=Math.sin(a),p=Math.cos(a);return t[0]=p*n+h*s,t[1]=p*r+h*u,t[2]=p*i+h*c,t[3]=p*s-h*n,t[4]=p*u-h*r,t[5]=p*c-h*i,t[6]=o,t[7]=f,t[8]=l,t}function Ig(t,e,a){var n=a[0],r=a[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Pg(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function zg(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=0,t[3]=-a,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function jg(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Wg(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function $g(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],s=a+a,u=n+n,c=r+r,o=a*s,f=n*s,l=n*u,h=r*s,p=r*u,d=r*c,y=i*s,m=i*u,S=i*c;return t[0]=1-l-d,t[3]=f-S,t[6]=h+m,t[1]=f+S,t[4]=1-o-d,t[7]=p-y,t[2]=h-m,t[5]=p+y,t[8]=1-o-l,t}function Hg(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],s=e[4],u=e[5],c=e[6],o=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],y=e[13],m=e[14],S=e[15],v=a*u-n*s,g=a*c-r*s,x=a*o-i*s,C=n*c-r*u,T=n*o-i*u,w=r*o-i*c,_=f*y-l*d,E=f*m-h*d,D=f*S-p*d,b=l*m-h*y,N=l*S-p*y,R=h*S-p*m,M=v*R-g*N+x*b+C*D-T*E+w*_;return M?(M=1/M,t[0]=(u*R-c*N+o*b)*M,t[1]=(c*D-s*R-o*E)*M,t[2]=(s*N-u*D+o*_)*M,t[3]=(r*N-n*R-i*b)*M,t[4]=(a*R-r*D+i*E)*M,t[5]=(n*D-a*N-i*_)*M,t[6]=(y*w-m*T+S*C)*M,t[7]=(m*x-d*w-S*g)*M,t[8]=(d*T-y*x+S*v)*M,t):null}function Kg(t,e,a){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/a,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Xg(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function qg(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Yg(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t[6]=e[6]+a[6],t[7]=e[7]+a[7],t[8]=e[8]+a[8],t}function Su(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t[6]=e[6]-a[6],t[7]=e[7]-a[7],t[8]=e[8]-a[8],t}function Jg(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*a,t}function Zg(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t[4]=e[4]+a[4]*n,t[5]=e[5]+a[5]*n,t[6]=e[6]+a[6]*n,t[7]=e[7]+a[7]*n,t[8]=e[8]+a[8]*n,t}function Qg(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function ed(t,e){var a=t[0],n=t[1],r=t[2],i=t[3],s=t[4],u=t[5],c=t[6],o=t[7],f=t[8],l=e[0],h=e[1],p=e[2],d=e[3],y=e[4],m=e[5],S=e[6],v=e[7],g=e[8];return Math.abs(a-l)<=Ue*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(n-h)<=Ue*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-p)<=Ue*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-d)<=Ue*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(s-y)<=Ue*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(u-m)<=Ue*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-S)<=Ue*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(o-v)<=Ue*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(f-g)<=Ue*Math.max(1,Math.abs(f),Math.abs(g))}var td=Sr,nd=Su;const rd=Object.freeze(Object.defineProperty({__proto__:null,add:Yg,adjoint:Vg,clone:kg,copy:Fg,create:mu,determinant:Bg,equals:ed,exactEquals:Qg,frob:qg,fromMat2d:Wg,fromMat4:ta,fromQuat:$g,fromRotation:zg,fromScaling:jg,fromTranslation:Pg,fromValues:xu,identity:zt,invert:xr,mul:td,multiply:Sr,multiplyScalar:Jg,multiplyScalarAndAdd:Zg,normalFromMat4:Hg,projection:Kg,rotate:Gg,scale:Ig,set:Ag,str:Xg,sub:nd,subtract:Su,translate:Ug,transpose:ei},Symbol.toStringTag,{value:"Module"}));function Vo(){var t=new gt(16);return gt!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function ad(t){var e=new gt(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function dt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function id(t,e,a,n,r,i,s,u,c,o,f,l,h,p,d,y){var m=new gt(16);return m[0]=t,m[1]=e,m[2]=a,m[3]=n,m[4]=r,m[5]=i,m[6]=s,m[7]=u,m[8]=c,m[9]=o,m[10]=f,m[11]=l,m[12]=h,m[13]=p,m[14]=d,m[15]=y,m}function od(t,e,a,n,r,i,s,u,c,o,f,l,h,p,d,y,m){return t[0]=e,t[1]=a,t[2]=n,t[3]=r,t[4]=i,t[5]=s,t[6]=u,t[7]=c,t[8]=o,t[9]=f,t[10]=l,t[11]=h,t[12]=p,t[13]=d,t[14]=y,t[15]=m,t}function Se(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ze(t,e){if(t===e){var a=e[1],n=e[2],r=e[3],i=e[6],s=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=a,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=r,t[13]=s,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function Nt(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],s=e[4],u=e[5],c=e[6],o=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],y=e[13],m=e[14],S=e[15],v=a*u-n*s,g=a*c-r*s,x=a*o-i*s,C=n*c-r*u,T=n*o-i*u,w=r*o-i*c,_=f*y-l*d,E=f*m-h*d,D=f*S-p*d,b=l*m-h*y,N=l*S-p*y,R=h*S-p*m,M=v*R-g*N+x*b+C*D-T*E+w*_;return M?(M=1/M,t[0]=(u*R-c*N+o*b)*M,t[1]=(r*N-n*R-i*b)*M,t[2]=(y*w-m*T+S*C)*M,t[3]=(h*T-l*w-p*C)*M,t[4]=(c*D-s*R-o*E)*M,t[5]=(a*R-r*D+i*E)*M,t[6]=(m*x-d*w-S*g)*M,t[7]=(f*w-h*x+p*g)*M,t[8]=(s*N-u*D+o*_)*M,t[9]=(n*D-a*N-i*_)*M,t[10]=(d*T-y*x+S*v)*M,t[11]=(l*x-f*T-p*v)*M,t[12]=(u*E-s*b-c*_)*M,t[13]=(a*b-n*E+r*_)*M,t[14]=(y*g-d*C-m*v)*M,t[15]=(f*C-l*g+h*v)*M,t):null}function sd(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],s=e[4],u=e[5],c=e[6],o=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],y=e[13],m=e[14],S=e[15];return t[0]=u*(h*S-p*m)-l*(c*S-o*m)+y*(c*p-o*h),t[1]=-(n*(h*S-p*m)-l*(r*S-i*m)+y*(r*p-i*h)),t[2]=n*(c*S-o*m)-u*(r*S-i*m)+y*(r*o-i*c),t[3]=-(n*(c*p-o*h)-u*(r*p-i*h)+l*(r*o-i*c)),t[4]=-(s*(h*S-p*m)-f*(c*S-o*m)+d*(c*p-o*h)),t[5]=a*(h*S-p*m)-f*(r*S-i*m)+d*(r*p-i*h),t[6]=-(a*(c*S-o*m)-s*(r*S-i*m)+d*(r*o-i*c)),t[7]=a*(c*p-o*h)-s*(r*p-i*h)+f*(r*o-i*c),t[8]=s*(l*S-p*y)-f*(u*S-o*y)+d*(u*p-o*l),t[9]=-(a*(l*S-p*y)-f*(n*S-i*y)+d*(n*p-i*l)),t[10]=a*(u*S-o*y)-s*(n*S-i*y)+d*(n*o-i*u),t[11]=-(a*(u*p-o*l)-s*(n*p-i*l)+f*(n*o-i*u)),t[12]=-(s*(l*m-h*y)-f*(u*m-c*y)+d*(u*h-c*l)),t[13]=a*(l*m-h*y)-f*(n*m-r*y)+d*(n*h-r*l),t[14]=-(a*(u*m-c*y)-s*(n*m-r*y)+d*(n*c-r*u)),t[15]=a*(u*h-c*l)-s*(n*h-r*l)+f*(n*c-r*u),t}function ud(t){var e=t[0],a=t[1],n=t[2],r=t[3],i=t[4],s=t[5],u=t[6],c=t[7],o=t[8],f=t[9],l=t[10],h=t[11],p=t[12],d=t[13],y=t[14],m=t[15],S=e*s-a*i,v=e*u-n*i,g=e*c-r*i,x=a*u-n*s,C=a*c-r*s,T=n*c-r*u,w=o*d-f*p,_=o*y-l*p,E=o*m-h*p,D=f*y-l*d,b=f*m-h*d,N=l*m-h*y;return S*N-v*b+g*D+x*E-C*_+T*w}function Ge(t,e,a){var n=e[0],r=e[1],i=e[2],s=e[3],u=e[4],c=e[5],o=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],y=e[12],m=e[13],S=e[14],v=e[15],g=a[0],x=a[1],C=a[2],T=a[3];return t[0]=g*n+x*u+C*l+T*y,t[1]=g*r+x*c+C*h+T*m,t[2]=g*i+x*o+C*p+T*S,t[3]=g*s+x*f+C*d+T*v,g=a[4],x=a[5],C=a[6],T=a[7],t[4]=g*n+x*u+C*l+T*y,t[5]=g*r+x*c+C*h+T*m,t[6]=g*i+x*o+C*p+T*S,t[7]=g*s+x*f+C*d+T*v,g=a[8],x=a[9],C=a[10],T=a[11],t[8]=g*n+x*u+C*l+T*y,t[9]=g*r+x*c+C*h+T*m,t[10]=g*i+x*o+C*p+T*S,t[11]=g*s+x*f+C*d+T*v,g=a[12],x=a[13],C=a[14],T=a[15],t[12]=g*n+x*u+C*l+T*y,t[13]=g*r+x*c+C*h+T*m,t[14]=g*i+x*o+C*p+T*S,t[15]=g*s+x*f+C*d+T*v,t}function Ze(t,e,a){var n=a[0],r=a[1],i=a[2],s,u,c,o,f,l,h,p,d,y,m,S;return e===t?(t[12]=e[0]*n+e[4]*r+e[8]*i+e[12],t[13]=e[1]*n+e[5]*r+e[9]*i+e[13],t[14]=e[2]*n+e[6]*r+e[10]*i+e[14],t[15]=e[3]*n+e[7]*r+e[11]*i+e[15]):(s=e[0],u=e[1],c=e[2],o=e[3],f=e[4],l=e[5],h=e[6],p=e[7],d=e[8],y=e[9],m=e[10],S=e[11],t[0]=s,t[1]=u,t[2]=c,t[3]=o,t[4]=f,t[5]=l,t[6]=h,t[7]=p,t[8]=d,t[9]=y,t[10]=m,t[11]=S,t[12]=s*n+f*r+d*i+e[12],t[13]=u*n+l*r+y*i+e[13],t[14]=c*n+h*r+m*i+e[14],t[15]=o*n+p*r+S*i+e[15]),t}function Dn(t,e,a){var n=a[0],r=a[1],i=a[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function mt(t,e,a,n){var r=n[0],i=n[1],s=n[2],u=Math.hypot(r,i,s),c,o,f,l,h,p,d,y,m,S,v,g,x,C,T,w,_,E,D,b,N,R,M,A;return u<Ue?null:(u=1/u,r*=u,i*=u,s*=u,c=Math.sin(a),o=Math.cos(a),f=1-o,l=e[0],h=e[1],p=e[2],d=e[3],y=e[4],m=e[5],S=e[6],v=e[7],g=e[8],x=e[9],C=e[10],T=e[11],w=r*r*f+o,_=i*r*f+s*c,E=s*r*f-i*c,D=r*i*f-s*c,b=i*i*f+o,N=s*i*f+r*c,R=r*s*f+i*c,M=i*s*f-r*c,A=s*s*f+o,t[0]=l*w+y*_+g*E,t[1]=h*w+m*_+x*E,t[2]=p*w+S*_+C*E,t[3]=d*w+v*_+T*E,t[4]=l*D+y*b+g*N,t[5]=h*D+m*b+x*N,t[6]=p*D+S*b+C*N,t[7]=d*D+v*b+T*N,t[8]=l*R+y*M+g*A,t[9]=h*R+m*M+x*A,t[10]=p*R+S*M+C*A,t[11]=d*R+v*M+T*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ti(t,e,a){var n=Math.sin(a),r=Math.cos(a),i=e[4],s=e[5],u=e[6],c=e[7],o=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*r+o*n,t[5]=s*r+f*n,t[6]=u*r+l*n,t[7]=c*r+h*n,t[8]=o*r-i*n,t[9]=f*r-s*n,t[10]=l*r-u*n,t[11]=h*r-c*n,t}function na(t,e,a){var n=Math.sin(a),r=Math.cos(a),i=e[0],s=e[1],u=e[2],c=e[3],o=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r-o*n,t[1]=s*r-f*n,t[2]=u*r-l*n,t[3]=c*r-h*n,t[8]=i*n+o*r,t[9]=s*n+f*r,t[10]=u*n+l*r,t[11]=c*n+h*r,t}function ni(t,e,a){var n=Math.sin(a),r=Math.cos(a),i=e[0],s=e[1],u=e[2],c=e[3],o=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*r+o*n,t[1]=s*r+f*n,t[2]=u*r+l*n,t[3]=c*r+h*n,t[4]=o*r-i*n,t[5]=f*r-s*n,t[6]=l*r-u*n,t[7]=h*r-c*n,t}function Cu(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Bo(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Tu(t,e,a){var n=a[0],r=a[1],i=a[2],s=Math.hypot(n,r,i),u,c,o;return s<Ue?null:(s=1/s,n*=s,r*=s,i*=s,u=Math.sin(e),c=Math.cos(e),o=1-c,t[0]=n*n*o+c,t[1]=r*n*o+i*u,t[2]=i*n*o-r*u,t[3]=0,t[4]=n*r*o-i*u,t[5]=r*r*o+c,t[6]=i*r*o+n*u,t[7]=0,t[8]=n*i*o+r*u,t[9]=r*i*o-n*u,t[10]=i*i*o+c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function cd(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ld(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fd(t,e){var a=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function wu(t,e,a){var n=e[0],r=e[1],i=e[2],s=e[3],u=n+n,c=r+r,o=i+i,f=n*u,l=n*c,h=n*o,p=r*c,d=r*o,y=i*o,m=s*u,S=s*c,v=s*o;return t[0]=1-(p+y),t[1]=l+v,t[2]=h-S,t[3]=0,t[4]=l-v,t[5]=1-(f+y),t[6]=d+m,t[7]=0,t[8]=h+S,t[9]=d-m,t[10]=1-(f+p),t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function hd(t,e){var a=new gt(3),n=-e[0],r=-e[1],i=-e[2],s=e[3],u=e[4],c=e[5],o=e[6],f=e[7],l=n*n+r*r+i*i+s*s;return l>0?(a[0]=(u*s+f*n+c*i-o*r)*2/l,a[1]=(c*s+f*r+o*n-u*i)*2/l,a[2]=(o*s+f*i+u*r-c*n)*2/l):(a[0]=(u*s+f*n+c*i-o*r)*2,a[1]=(c*s+f*r+o*n-u*i)*2,a[2]=(o*s+f*i+u*r-c*n)*2),wu(t,e,a),t}function pd(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function _u(t,e){var a=e[0],n=e[1],r=e[2],i=e[4],s=e[5],u=e[6],c=e[8],o=e[9],f=e[10];return t[0]=Math.hypot(a,n,r),t[1]=Math.hypot(i,s,u),t[2]=Math.hypot(c,o,f),t}function Eu(t,e){var a=new gt(3);_u(a,e);var n=1/a[0],r=1/a[1],i=1/a[2],s=e[0]*n,u=e[1]*r,c=e[2]*i,o=e[4]*n,f=e[5]*r,l=e[6]*i,h=e[8]*n,p=e[9]*r,d=e[10]*i,y=s+f+d,m=0;return y>0?(m=Math.sqrt(y+1)*2,t[3]=.25*m,t[0]=(l-p)/m,t[1]=(h-c)/m,t[2]=(u-o)/m):s>f&&s>d?(m=Math.sqrt(1+s-f-d)*2,t[3]=(l-p)/m,t[0]=.25*m,t[1]=(u+o)/m,t[2]=(h+c)/m):f>d?(m=Math.sqrt(1+f-s-d)*2,t[3]=(h-c)/m,t[0]=(u+o)/m,t[1]=.25*m,t[2]=(l+p)/m):(m=Math.sqrt(1+d-s-f)*2,t[3]=(u-o)/m,t[0]=(h+c)/m,t[1]=(l+p)/m,t[2]=.25*m),t}function Du(t,e,a,n){var r=e[0],i=e[1],s=e[2],u=e[3],c=r+r,o=i+i,f=s+s,l=r*c,h=r*o,p=r*f,d=i*o,y=i*f,m=s*f,S=u*c,v=u*o,g=u*f,x=n[0],C=n[1],T=n[2];return t[0]=(1-(d+m))*x,t[1]=(h+g)*x,t[2]=(p-v)*x,t[3]=0,t[4]=(h-g)*C,t[5]=(1-(l+m))*C,t[6]=(y+S)*C,t[7]=0,t[8]=(p+v)*T,t[9]=(y-S)*T,t[10]=(1-(l+d))*T,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function gd(t,e,a,n,r){var i=e[0],s=e[1],u=e[2],c=e[3],o=i+i,f=s+s,l=u+u,h=i*o,p=i*f,d=i*l,y=s*f,m=s*l,S=u*l,v=c*o,g=c*f,x=c*l,C=n[0],T=n[1],w=n[2],_=r[0],E=r[1],D=r[2],b=(1-(y+S))*C,N=(p+x)*C,R=(d-g)*C,M=(p-x)*T,A=(1-(h+S))*T,I=(m+v)*T,$=(d+g)*w,U=(m-v)*w,B=(1-(h+y))*w;return t[0]=b,t[1]=N,t[2]=R,t[3]=0,t[4]=M,t[5]=A,t[6]=I,t[7]=0,t[8]=$,t[9]=U,t[10]=B,t[11]=0,t[12]=a[0]+_-(b*_+M*E+$*D),t[13]=a[1]+E-(N*_+A*E+U*D),t[14]=a[2]+D-(R*_+I*E+B*D),t[15]=1,t}function Uo(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],s=a+a,u=n+n,c=r+r,o=a*s,f=n*s,l=n*u,h=r*s,p=r*u,d=r*c,y=i*s,m=i*u,S=i*c;return t[0]=1-l-d,t[1]=f+S,t[2]=h-m,t[3]=0,t[4]=f-S,t[5]=1-o-d,t[6]=p+y,t[7]=0,t[8]=h+m,t[9]=p-y,t[10]=1-o-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dd(t,e,a,n,r,i,s){var u=1/(a-e),c=1/(r-n),o=1/(i-s);return t[0]=i*2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i*2*c,t[6]=0,t[7]=0,t[8]=(a+e)*u,t[9]=(r+n)*c,t[10]=(s+i)*o,t[11]=-1,t[12]=0,t[13]=0,t[14]=s*i*2*o,t[15]=0,t}function bu(t,e,a,n,r){var i=1/Math.tan(e/2),s;return t[0]=i/a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(s=1/(n-r),t[10]=(r+n)*s,t[14]=2*r*n*s):(t[10]=-1,t[14]=-2*n),t}var vd=bu;function yd(t,e,a,n,r){var i=1/Math.tan(e/2),s;return t[0]=i/a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(s=1/(n-r),t[10]=r*s,t[14]=r*n*s):(t[10]=-1,t[14]=-n),t}function md(t,e,a,n){var r=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),c=2/(s+u),o=2/(r+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=-((s-u)*c*.5),t[9]=(r-i)*o*.5,t[10]=n/(a-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*a/(a-n),t[15]=0,t}function Ou(t,e,a,n,r,i,s){var u=1/(e-a),c=1/(n-r),o=1/(i-s);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*o,t[11]=0,t[12]=(e+a)*u,t[13]=(r+n)*c,t[14]=(s+i)*o,t[15]=1,t}var Nu=Ou;function xd(t,e,a,n,r,i,s){var u=1/(e-a),c=1/(n-r),o=1/(i-s);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=o,t[11]=0,t[12]=(e+a)*u,t[13]=(r+n)*c,t[14]=i*o,t[15]=1,t}function Mu(t,e,a,n){var r,i,s,u,c,o,f,l,h,p,d=e[0],y=e[1],m=e[2],S=n[0],v=n[1],g=n[2],x=a[0],C=a[1],T=a[2];return Math.abs(d-x)<Ue&&Math.abs(y-C)<Ue&&Math.abs(m-T)<Ue?Se(t):(f=d-x,l=y-C,h=m-T,p=1/Math.hypot(f,l,h),f*=p,l*=p,h*=p,r=v*h-g*l,i=g*f-S*h,s=S*l-v*f,p=Math.hypot(r,i,s),p?(p=1/p,r*=p,i*=p,s*=p):(r=0,i=0,s=0),u=l*s-h*i,c=h*r-f*s,o=f*i-l*r,p=Math.hypot(u,c,o),p?(p=1/p,u*=p,c*=p,o*=p):(u=0,c=0,o=0),t[0]=r,t[1]=u,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=l,t[7]=0,t[8]=s,t[9]=o,t[10]=h,t[11]=0,t[12]=-(r*d+i*y+s*m),t[13]=-(u*d+c*y+o*m),t[14]=-(f*d+l*y+h*m),t[15]=1,t)}function Sd(t,e,a,n){var r=e[0],i=e[1],s=e[2],u=n[0],c=n[1],o=n[2],f=r-a[0],l=i-a[1],h=s-a[2],p=f*f+l*l+h*h;p>0&&(p=1/Math.sqrt(p),f*=p,l*=p,h*=p);var d=c*h-o*l,y=o*f-u*h,m=u*l-c*f;return p=d*d+y*y+m*m,p>0&&(p=1/Math.sqrt(p),d*=p,y*=p,m*=p),t[0]=d,t[1]=y,t[2]=m,t[3]=0,t[4]=l*m-h*y,t[5]=h*d-f*m,t[6]=f*y-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=r,t[13]=i,t[14]=s,t[15]=1,t}function Cd(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Td(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function wd(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t[3]=e[3]+a[3],t[4]=e[4]+a[4],t[5]=e[5]+a[5],t[6]=e[6]+a[6],t[7]=e[7]+a[7],t[8]=e[8]+a[8],t[9]=e[9]+a[9],t[10]=e[10]+a[10],t[11]=e[11]+a[11],t[12]=e[12]+a[12],t[13]=e[13]+a[13],t[14]=e[14]+a[14],t[15]=e[15]+a[15],t}function Ru(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t[3]=e[3]-a[3],t[4]=e[4]-a[4],t[5]=e[5]-a[5],t[6]=e[6]-a[6],t[7]=e[7]-a[7],t[8]=e[8]-a[8],t[9]=e[9]-a[9],t[10]=e[10]-a[10],t[11]=e[11]-a[11],t[12]=e[12]-a[12],t[13]=e[13]-a[13],t[14]=e[14]-a[14],t[15]=e[15]-a[15],t}function _d(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12]*a,t[13]=e[13]*a,t[14]=e[14]*a,t[15]=e[15]*a,t}function Ed(t,e,a,n){return t[0]=e[0]+a[0]*n,t[1]=e[1]+a[1]*n,t[2]=e[2]+a[2]*n,t[3]=e[3]+a[3]*n,t[4]=e[4]+a[4]*n,t[5]=e[5]+a[5]*n,t[6]=e[6]+a[6]*n,t[7]=e[7]+a[7]*n,t[8]=e[8]+a[8]*n,t[9]=e[9]+a[9]*n,t[10]=e[10]+a[10]*n,t[11]=e[11]+a[11]*n,t[12]=e[12]+a[12]*n,t[13]=e[13]+a[13]*n,t[14]=e[14]+a[14]*n,t[15]=e[15]+a[15]*n,t}function Dd(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function bd(t,e){var a=t[0],n=t[1],r=t[2],i=t[3],s=t[4],u=t[5],c=t[6],o=t[7],f=t[8],l=t[9],h=t[10],p=t[11],d=t[12],y=t[13],m=t[14],S=t[15],v=e[0],g=e[1],x=e[2],C=e[3],T=e[4],w=e[5],_=e[6],E=e[7],D=e[8],b=e[9],N=e[10],R=e[11],M=e[12],A=e[13],I=e[14],$=e[15];return Math.abs(a-v)<=Ue*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(n-g)<=Ue*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-x)<=Ue*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(i-C)<=Ue*Math.max(1,Math.abs(i),Math.abs(C))&&Math.abs(s-T)<=Ue*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(u-w)<=Ue*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-_)<=Ue*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(o-E)<=Ue*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(f-D)<=Ue*Math.max(1,Math.abs(f),Math.abs(D))&&Math.abs(l-b)<=Ue*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(h-N)<=Ue*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(p-R)<=Ue*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(d-M)<=Ue*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(y-A)<=Ue*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(m-I)<=Ue*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(S-$)<=Ue*Math.max(1,Math.abs(S),Math.abs($))}var Lu=Ge,Od=Ru;const ra=Object.freeze(Object.defineProperty({__proto__:null,add:wd,adjoint:sd,clone:ad,copy:dt,create:Vo,determinant:ud,equals:bd,exactEquals:Dd,frob:Td,fromQuat:Uo,fromQuat2:hd,fromRotation:Tu,fromRotationTranslation:wu,fromRotationTranslationScale:Du,fromRotationTranslationScaleOrigin:gd,fromScaling:Bo,fromTranslation:Cu,fromValues:id,fromXRotation:cd,fromYRotation:ld,fromZRotation:fd,frustum:dd,getRotation:Eu,getScaling:_u,getTranslation:pd,identity:Se,invert:Nt,lookAt:Mu,mul:Lu,multiply:Ge,multiplyScalar:_d,multiplyScalarAndAdd:Ed,ortho:Nu,orthoNO:Ou,orthoZO:xd,perspective:vd,perspectiveFromFieldOfView:md,perspectiveNO:bu,perspectiveZO:yd,rotate:mt,rotateX:ti,rotateY:na,rotateZ:ni,scale:Dn,set:od,str:Cd,sub:Od,subtract:Ru,targetTo:Sd,translate:Ze,transpose:ze},Symbol.toStringTag,{value:"Module"}));function ku(){var t=new gt(3);return gt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Cr(t){var e=t[0],a=t[1],n=t[2];return Math.hypot(e,a,n)}function Fu(t,e,a){var n=new gt(3);return n[0]=t,n[1]=e,n[2]=a,n}function Nd(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function He(t,e,a,n){return t[0]=e,t[1]=a,t[2]=n,t}function ri(t,e,a){return t[0]=e[0]+a[0],t[1]=e[1]+a[1],t[2]=e[2]+a[2],t}function bn(t,e,a){return t[0]=e[0]-a[0],t[1]=e[1]-a[1],t[2]=e[2]-a[2],t}function Md(t,e,a){return t[0]=e[0]/a[0],t[1]=e[1]/a[1],t[2]=e[2]/a[2],t}function On(t,e,a){return t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function Rd(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Au(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function jt(t,e){var a=e[0],n=e[1],r=e[2],i=a*a+n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function aa(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Tr(t,e,a){var n=e[0],r=e[1],i=e[2],s=a[0],u=a[1],c=a[2];return t[0]=r*c-i*u,t[1]=i*s-n*c,t[2]=n*u-r*s,t}function Te(t,e,a){var n=e[0],r=e[1],i=e[2],s=a[3]*n+a[7]*r+a[11]*i+a[15];return s=s||1,t[0]=(a[0]*n+a[4]*r+a[8]*i+a[12])/s,t[1]=(a[1]*n+a[5]*r+a[9]*i+a[13])/s,t[2]=(a[2]*n+a[6]*r+a[10]*i+a[14])/s,t}function ai(t,e,a){var n=e[0],r=e[1],i=e[2];return t[0]=n*a[0]+r*a[3]+i*a[6],t[1]=n*a[1]+r*a[4]+i*a[7],t[2]=n*a[2]+r*a[5]+i*a[8],t}function Ld(t){return t[0]=0,t[1]=0,t[2]=0,t}function ia(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Vu(t,e){var a=t[0],n=t[1],r=t[2],i=e[0],s=e[1],u=e[2];return Math.abs(a-i)<=Ue*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(n-s)<=Ue*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-u)<=Ue*Math.max(1,Math.abs(r),Math.abs(u))}var Bu=bn,kd=Cr;(function(){var t=ku();return function(e,a,n,r,i,s){var u,c;for(a||(a=3),n||(n=0),r?c=Math.min(r*a+n,e.length):c=e.length,u=n;u<c;u+=a)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],i(t,t,s),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}})();function Fd(){var t=new gt(4);return gt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ad(t,e,a,n){var r=new gt(4);return r[0]=t,r[1]=e,r[2]=a,r[3]=n,r}function Vd(t,e){var a=e[0],n=e[1],r=e[2],i=e[3],s=a*a+n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=a*s,t[1]=n*s,t[2]=r*s,t[3]=i*s,t}function ii(t,e,a){var n=e[0],r=e[1],i=e[2],s=e[3];return t[0]=a[0]*n+a[4]*r+a[8]*i+a[12]*s,t[1]=a[1]*n+a[5]*r+a[9]*i+a[13]*s,t[2]=a[2]*n+a[6]*r+a[10]*i+a[14]*s,t[3]=a[3]*n+a[7]*r+a[11]*i+a[15]*s,t}(function(){var t=Fd();return function(e,a,n,r,i,s){var u,c;for(a||(a=4),n||(n=0),r?c=Math.min(r*a+n,e.length):c=e.length,u=n;u<c;u+=a)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],i(t,t,s),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}})();function zn(){var t=new gt(4);return gt!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Go(t,e,a){a=a*.5;var n=Math.sin(a);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(a),t}function Bd(t,e){var a=Math.acos(e[3])*2,n=Math.sin(a/2);return n>Ue?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),a}function Uu(t,e,a){var n=e[0],r=e[1],i=e[2],s=e[3],u=a[0],c=a[1],o=a[2],f=a[3];return t[0]=n*f+s*u+r*o-i*c,t[1]=r*f+s*c+i*u-n*o,t[2]=i*f+s*o+n*c-r*u,t[3]=s*f-n*u-r*c-i*o,t}function oi(t,e,a,n){var r=e[0],i=e[1],s=e[2],u=e[3],c=a[0],o=a[1],f=a[2],l=a[3],h,p,d,y,m;return p=r*c+i*o+s*f+u*l,p<0&&(p=-p,c=-c,o=-o,f=-f,l=-l),1-p>Ue?(h=Math.acos(p),d=Math.sin(h),y=Math.sin((1-n)*h)/d,m=Math.sin(n*h)/d):(y=1-n,m=n),t[0]=y*r+m*c,t[1]=y*i+m*o,t[2]=y*s+m*f,t[3]=y*u+m*l,t}function Ud(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Gd(t,e){var a=e[0]+e[4]+e[8],n;if(a>0)n=Math.sqrt(a+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[r*3+r]&&(r=2);var i=(r+1)%3,s=(r+2)%3;n=Math.sqrt(e[r*3+r]-e[i*3+i]-e[s*3+s]+1),t[r]=.5*n,n=.5/n,t[3]=(e[i*3+s]-e[s*3+i])*n,t[i]=(e[i*3+r]+e[r*3+i])*n,t[s]=(e[s*3+r]+e[r*3+s])*n}return t}var Gu=Ad,Iu=Vd;(function(){var t=ku(),e=Fu(1,0,0),a=Fu(0,1,0);return function(n,r,i){var s=aa(r,i);return s<-.999999?(Tr(t,e,r),kd(t)<1e-6&&Tr(t,a,r),jt(t,t),Go(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Tr(t,r,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,Iu(n,n))}})(),function(){var t=zn(),e=zn();return function(a,n,r,i,s,u){return oi(t,n,s,u),oi(e,r,i,u),oi(a,t,e,2*u*(1-u)),a}}(),function(){var t=mu();return function(e,a,n,r){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-a[0],t[5]=-a[1],t[8]=-a[2],Iu(e,Gd(e,t))}}();var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Id(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var a=function n(){if(this instanceof n){var r=[null];r.push.apply(r,arguments);var i=Function.bind.apply(e,r);return new i}return e.apply(this,arguments)};a.prototype=e.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(a,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),a}var Pd=function t(e,a){if(e===a)return!0;if(e&&a&&typeof e=="object"&&typeof a=="object"){if(e.constructor!==a.constructor)return!1;var n,r,i;if(Array.isArray(e)){if(n=e.length,n!=a.length)return!1;for(r=n;r--!==0;)if(!t(e[r],a[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===a.toString();if(i=Object.keys(e),n=i.length,n!==Object.keys(a).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(a,i[r]))return!1;for(r=n;r--!==0;){var s=i[r];if(!t(e[s],a[s]))return!1}return!0}return e!==e&&a!==a},Pu=Object.prototype.toString,zu=function(e){var a=Pu.call(e),n=a==="[object Arguments]";return n||(n=a!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Pu.call(e.callee)==="[object Function]"),n},Io,ju;function zd(){if(ju)return Io;ju=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,a=Object.prototype.toString,n=zu,r=Object.prototype.propertyIsEnumerable,i=!r.call({toString:null},"toString"),s=r.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(h){var p=h.constructor;return p&&p.prototype===h},o={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!o["$"+h]&&e.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{c(window[h])}catch{return!0}}catch{return!0}return!1}(),l=function(h){if(typeof window>"u"||!f)return c(h);try{return c(h)}catch{return!1}};t=function(p){var d=p!==null&&typeof p=="object",y=a.call(p)==="[object Function]",m=n(p),S=d&&a.call(p)==="[object String]",v=[];if(!d&&!y&&!m)throw new TypeError("Object.keys called on a non-object");var g=s&&y;if(S&&p.length>0&&!e.call(p,0))for(var x=0;x<p.length;++x)v.push(String(x));if(m&&p.length>0)for(var C=0;C<p.length;++C)v.push(String(C));else for(var T in p)!(g&&T==="prototype")&&e.call(p,T)&&v.push(String(T));if(i)for(var w=l(p),_=0;_<u.length;++_)!(w&&u[_]==="constructor")&&e.call(p,u[_])&&v.push(u[_]);return v}}return Io=t,Io}var jd=Array.prototype.slice,Wd=zu,Wu=Object.keys,si=Wu?function(e){return Wu(e)}:zd(),$u=Object.keys;si.shim=function(){if(Object.keys){var e=function(){var a=Object.keys(arguments);return a&&a.length===arguments.length}(1,2);e||(Object.keys=function(n){return Wd(n)?$u(jd.call(n)):$u(n)})}else Object.keys=si;return Object.keys||si};var $d=si,Hd=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},a=Symbol("test"),n=Object(a);if(typeof a=="string"||Object.prototype.toString.call(a)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var r=42;e[a]=r;for(a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var i=Object.getOwnPropertySymbols(e);if(i.length!==1||i[0]!==a||!Object.prototype.propertyIsEnumerable.call(e,a))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,a);if(s.value!==r||s.enumerable!==!0)return!1}return!0},Hu=typeof Symbol<"u"&&Symbol,Kd=Hd,Xd=function(){return typeof Hu!="function"||typeof Symbol!="function"||typeof Hu("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Kd()},qd="Function.prototype.bind called on incompatible ",Po=Array.prototype.slice,Yd=Object.prototype.toString,Jd="[object Function]",Zd=function(e){var a=this;if(typeof a!="function"||Yd.call(a)!==Jd)throw new TypeError(qd+a);for(var n=Po.call(arguments,1),r,i=function(){if(this instanceof r){var f=a.apply(this,n.concat(Po.call(arguments)));return Object(f)===f?f:this}else return a.apply(e,n.concat(Po.call(arguments)))},s=Math.max(0,a.length-n.length),u=[],c=0;c<s;c++)u.push("$"+c);if(r=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(i),a.prototype){var o=function(){};o.prototype=a.prototype,r.prototype=new o,o.prototype=null}return r},Qd=Zd,Ku=Function.prototype.bind||Qd,e2=Ku,t2=e2.call(Function.call,Object.prototype.hasOwnProperty),Ae,wr=SyntaxError,Xu=Function,_r=TypeError,zo=function(t){try{return Xu('"use strict"; return ('+t+").constructor;")()}catch{}},jn=Object.getOwnPropertyDescriptor;if(jn)try{jn({},"")}catch{jn=null}var jo=function(){throw new _r},n2=jn?function(){try{return arguments.callee,jo}catch{try{return jn(arguments,"callee").get}catch{return jo}}}():jo,Er=Xd(),nn=Object.getPrototypeOf||function(t){return t.__proto__},Dr={},r2=typeof Uint8Array>"u"?Ae:nn(Uint8Array),Wn={"%AggregateError%":typeof AggregateError>"u"?Ae:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ae:ArrayBuffer,"%ArrayIteratorPrototype%":Er?nn([][Symbol.iterator]()):Ae,"%AsyncFromSyncIteratorPrototype%":Ae,"%AsyncFunction%":Dr,"%AsyncGenerator%":Dr,"%AsyncGeneratorFunction%":Dr,"%AsyncIteratorPrototype%":Dr,"%Atomics%":typeof Atomics>"u"?Ae:Atomics,"%BigInt%":typeof BigInt>"u"?Ae:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ae:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ae:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ae:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ae:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ae:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ae:FinalizationRegistry,"%Function%":Xu,"%GeneratorFunction%":Dr,"%Int8Array%":typeof Int8Array>"u"?Ae:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ae:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ae:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Er?nn(nn([][Symbol.iterator]())):Ae,"%JSON%":typeof JSON=="object"?JSON:Ae,"%Map%":typeof Map>"u"?Ae:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Er?Ae:nn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ae:Promise,"%Proxy%":typeof Proxy>"u"?Ae:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ae:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ae:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Er?Ae:nn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ae:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Er?nn(""[Symbol.iterator]()):Ae,"%Symbol%":Er?Symbol:Ae,"%SyntaxError%":wr,"%ThrowTypeError%":n2,"%TypedArray%":r2,"%TypeError%":_r,"%Uint8Array%":typeof Uint8Array>"u"?Ae:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ae:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ae:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ae:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ae:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ae:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ae:WeakSet};try{null.error}catch(t){var a2=nn(nn(t));Wn["%Error.prototype%"]=a2}var i2=function t(e){var a;if(e==="%AsyncFunction%")a=zo("async function () {}");else if(e==="%GeneratorFunction%")a=zo("function* () {}");else if(e==="%AsyncGeneratorFunction%")a=zo("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(a=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var r=t("%AsyncGenerator%");r&&(a=nn(r.prototype))}return Wn[e]=a,a},qu={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},oa=Ku,ui=t2,o2=oa.call(Function.call,Array.prototype.concat),s2=oa.call(Function.apply,Array.prototype.splice),Yu=oa.call(Function.call,String.prototype.replace),ci=oa.call(Function.call,String.prototype.slice),u2=oa.call(Function.call,RegExp.prototype.exec),c2=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,l2=/\\(\\)?/g,f2=function(e){var a=ci(e,0,1),n=ci(e,-1);if(a==="%"&&n!=="%")throw new wr("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&a!=="%")throw new wr("invalid intrinsic syntax, expected opening `%`");var r=[];return Yu(e,c2,function(i,s,u,c){r[r.length]=u?Yu(c,l2,"$1"):s||i}),r},h2=function(e,a){var n=e,r;if(ui(qu,n)&&(r=qu[n],n="%"+r[0]+"%"),ui(Wn,n)){var i=Wn[n];if(i===Dr&&(i=i2(n)),typeof i>"u"&&!a)throw new _r("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new wr("intrinsic "+e+" does not exist!")},p2=function(e,a){if(typeof e!="string"||e.length===0)throw new _r("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof a!="boolean")throw new _r('"allowMissing" argument must be a boolean');if(u2(/^%?[^%]*%?$/,e)===null)throw new wr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=f2(e),r=n.length>0?n[0]:"",i=h2("%"+r+"%",a),s=i.name,u=i.value,c=!1,o=i.alias;o&&(r=o[0],s2(n,o2([0,1],o)));for(var f=1,l=!0;f<n.length;f+=1){var h=n[f],p=ci(h,0,1),d=ci(h,-1);if((p==='"'||p==="'"||p==="`"||d==='"'||d==="'"||d==="`")&&p!==d)throw new wr("property names with quotes must have matching quotes");if((h==="constructor"||!l)&&(c=!0),r+="."+h,s="%"+r+"%",ui(Wn,s))u=Wn[s];else if(u!=null){if(!(h in u)){if(!a)throw new _r("base intrinsic for "+e+" exists, but the property is not available.");return}if(jn&&f+1>=n.length){var y=jn(u,h);l=!!y,l&&"get"in y&&!("originalValue"in y.get)?u=y.get:u=u[h]}else l=ui(u,h),u=u[h];l&&!c&&(Wn[s]=u)}}return u},g2=p2,Wo=g2("%Object.defineProperty%",!0),$o=function(){if(Wo)try{return Wo({},"a",{value:1}),!0}catch{return!1}return!1};$o.hasArrayLengthDefineBug=function(){if(!$o())return null;try{return Wo([],"length",{value:1}).length!==1}catch{return!0}};var d2=$o,v2=$d,y2=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",m2=Object.prototype.toString,x2=Array.prototype.concat,Ju=Object.defineProperty,S2=function(t){return typeof t=="function"&&m2.call(t)==="[object Function]"},C2=d2(),Zu=Ju&&C2,T2=function(t,e,a,n){if(e in t){if(n===!0){if(t[e]===a)return}else if(!S2(n)||!n())return}Zu?Ju(t,e,{configurable:!0,enumerable:!1,value:a,writable:!0}):t[e]=a},Qu=function(t,e){var a=arguments.length>2?arguments[2]:{},n=v2(e);y2&&(n=x2.call(n,Object.getOwnPropertySymbols(e)));for(var r=0;r<n.length;r+=1)T2(t,n[r],e[n[r]],a[n[r]])};Qu.supportsDescriptors=!!Zu;var ec=Qu,li={},Ho={get exports(){return li},set exports(t){li=t}};typeof self<"u"?Ho.exports=self:typeof window<"u"?Ho.exports=window:Ho.exports=Function("return this")();var w2=li,tc=function(){return typeof Rt!="object"||!Rt||Rt.Math!==Math||Rt.Array!==Array?w2:Rt},_2=ec,E2=tc,D2=function(){var e=E2();if(_2.supportsDescriptors){var a=Object.getOwnPropertyDescriptor(e,"globalThis");(!a||a.configurable&&(a.enumerable||!a.writable||globalThis!==e))&&Object.defineProperty(e,"globalThis",{configurable:!0,enumerable:!1,value:e,writable:!0})}else(typeof globalThis!="object"||globalThis!==e)&&(e.globalThis=e);return e},b2=ec,O2=li,nc=tc,N2=D2,M2=nc(),rc=function(){return M2};b2(rc,{getPolyfill:nc,implementation:O2,shim:N2});var R2=rc;const Wt=R2(),ac={vtkObject:()=>null};function xt(t){if(t==null||t.isA)return t;if(!t.vtkClass)return Wt.console&&Wt.console.error&&Wt.console.error("Invalid VTK object"),null;const e=ac[t.vtkClass];if(!e)return Wt.console&&Wt.console.error&&Wt.console.error(`No vtk class found for Object of type ${t.vtkClass}`),null;const a={...t};Object.keys(a).forEach(r=>{a[r]&&typeof a[r]=="object"&&a[r].vtkClass&&(a[r]=xt(a[r]))});const n=e(a);return n&&n.modified&&n.modified(),n}function L2(t,e){ac[t]=e}xt.register=L2;class Ko extends Array{push(){for(let e=0;e<arguments.length;e++)this.includes(arguments[e])||super.push(arguments[e]);return this.length}}let Xo=0;const ic=Symbol("void");function k2(){return Xo}const oc={};function $n(){}["log","debug","info","warn","error","time","timeEnd","group","groupEnd"].forEach(t=>{oc[t]=$n}),Wt.console=console.hasOwnProperty("log")?console:oc;const Nn={debug:$n,error:Wt.console.error||$n,info:Wt.console.info||$n,log:Wt.console.log||$n,warn:Wt.console.warn||$n};function sc(t,e){Nn[t]&&(Nn[t]=e||$n)}function uc(){Nn.log(...arguments)}function cc(){Nn.info(...arguments)}function fi(){Nn.debug(...arguments)}function Pe(){Nn.error(...arguments)}function qo(){Nn.warn(...arguments)}const lc={};function fc(t){lc[t]||(Nn.error(t),lc[t]=!0)}const St=Object.create(null);St.Float32Array=Float32Array,St.Float64Array=Float64Array,St.Uint8Array=Uint8Array,St.Int8Array=Int8Array,St.Uint16Array=Uint16Array,St.Int16Array=Int16Array,St.Uint32Array=Uint32Array,St.Int32Array=Int32Array,St.Uint8ClampedArray=Uint8ClampedArray;try{St.BigInt64Array=BigInt64Array,St.BigUint64Array=BigUint64Array}catch{}function Hn(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];return new(St[t]||Float64Array)(...a)}function hi(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];return(St[t]||Float64Array).from(...a)}function br(t){return t.charAt(0).toUpperCase()+t.slice(1)}function at(t){return br(t[0]==="_"?t.slice(1):t)}function hc(t){return t.charAt(0).toLowerCase()+t.slice(1)}function pc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e3;const n=["TB","GB","MB","KB"];let r=Number(t),i="B";for(;r>a;)r/=a,i=n.pop();return`${r.toFixed(e)} ${i}`}function gc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:" ";const a=[];let n=t;for(;n>1e3;)a.push(`000${n%1e3}`.slice(-3)),n=Math.floor(n/1e3);return n>0&&a.push(n),a.reverse(),a.join(e)}function dc(t){Object.keys(t).forEach(e=>{Array.isArray(t[e])&&(t[e]=[].concat(t[e]))})}function F2(t){return Object.values(St).some(e=>t instanceof e)}function A2(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(let a=0;a<t.length;a++)if(t[a]!==e[a])return!1;return!0}return!1}function V2(t,e){return Object.keys(t).find(a=>t[a]===e)}function vc(t){return t&&t.isA?t.getState():t}function Yo(t){setTimeout(t,0)}function yc(t,e){const a=performance.now();t.finally(()=>{const n=performance.now()-a;e(n)})}function ot(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dc(e);const a=[];if(Number.isInteger(e.mtime)||(e.mtime=++Xo),!("classHierarchy"in e))e.classHierarchy=new Ko("vtkObject");else if(!(e.classHierarchy instanceof Ko)){const i=new Ko;for(let s=0;s<e.classHierarchy.length;s++)i.push(e.classHierarchy[s]);e.classHierarchy=i}function n(i){a[i]=null}function r(i){function s(){n(i)}return Object.freeze({unsubscribe:s})}return t.isDeleted=()=>!!e.deleted,t.modified=i=>{if(e.deleted){Pe("instance deleted - cannot call any method");return}i&&i<t.getMTime()||(e.mtime=++Xo,a.forEach(s=>s&&s(t)))},t.onModified=i=>{if(e.deleted)return Pe("instance deleted - cannot call any method"),null;const s=a.length;return a.push(i),r(s)},t.getMTime=()=>e.mtime,t.isA=i=>{let s=e.classHierarchy.length;for(;s--;)if(e.classHierarchy[s]===i)return!0;return!1},t.getClassName=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.classHierarchy[e.classHierarchy.length-1-i]},t.set=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,c=!1;return Object.keys(i).forEach(o=>{const f=u?null:t[`set${br(o)}`];f&&Array.isArray(i[o])&&f.length>1?c=f(...i[o])||c:f?c=f(i[o])||c:(["mtime"].indexOf(o)===-1&&!s&&qo(`Warning: Set value to model directly ${o}, ${i[o]}`),c=e[o]!==i[o]||c,e[o]=i[o])}),c},t.get=function(){for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];if(!s.length)return e;const c={};return s.forEach(o=>{c[o]=e[o]}),c},t.getReferenceByName=i=>e[i],t.delete=()=>{Object.keys(e).forEach(i=>delete e[i]),a.forEach((i,s)=>n(s)),e.deleted=!0},t.getState=()=>{if(e.deleted)return null;const i={...e,vtkClass:t.getClassName()};Object.keys(i).forEach(u=>{i[u]===null||i[u]===void 0||u[0]==="_"?delete i[u]:i[u].isA?i[u]=i[u].getState():Array.isArray(i[u])?i[u]=i[u].map(vc):F2(i[u])&&(i[u]=Array.from(i[u]))});const s={};return Object.keys(i).sort().forEach(u=>{s[u]=i[u]}),s.mtime&&delete s.mtime,s},t.shallowCopy=function(i){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(i.getClassName()!==t.getClassName())throw new Error(`Cannot ShallowCopy ${i.getClassName()} into ${t.getClassName()}`);const u=i.get(),c=Object.keys(e).sort();Object.keys(u).sort().forEach(f=>{const l=c.indexOf(f);l===-1?s&&fi(`add ${f} in shallowCopy`):c.splice(l,1),e[f]=u[f]}),c.length&&s&&fi(`Untouched keys: ${c.join(", ")}`),t.modified()},t.toJSON=function(){return t.getState()},t}const B2={object(t,e,a){return function(){return{...e[a.name]}}}};function Lt(t,e,a){a.forEach(n=>{if(typeof n=="object"){const r=B2[n.type];r?t[`get${at(n.name)}`]=r(t,e,n):t[`get${at(n.name)}`]=()=>e[n.name]}else t[`get${at(n)}`]=()=>e[n]})}const U2={enum(t,e,a){const n=`_on${at(a.name)}Changed`;return r=>{var i;if(typeof r=="string"){if(a.enum[r]!==void 0)return e[a.name]!==a.enum[r]?(e[a.name]=a.enum[r],t.modified(),!0):!1;throw Pe(`Set Enum with invalid argument ${a}, ${r}`),new RangeError("Set Enum with invalid string argument")}if(typeof r=="number"){if(e[a.name]!==r){if(Object.keys(a.enum).map(s=>a.enum[s]).indexOf(r)!==-1){const s=e[a.name];return e[a.name]=r,(i=e[n])==null||i.call(e,t,e,r,s),t.modified(),!0}throw Pe(`Set Enum outside numeric range ${a}, ${r}`),new RangeError("Set Enum outside numeric range")}return!1}throw Pe(`Set Enum with invalid argument (String/Number) ${a}, ${r}`),new TypeError("Set Enum with invalid argument (String/Number)")}},object(t,e,a){const n=`_on${at(a.name)}Changed`;return r=>{var i;if(!Pd(e[a.name],r)){const s=e[a.name];return e[a.name]=r,(i=e[n])==null||i.call(e,t,e,r,s),t.modified(),!0}return!1}}};function mc(t){if(typeof t=="object"){const e=U2[t.type];if(e)return(a,n)=>e(a,n,t);throw Pe(`No setter for field ${t}`),new TypeError("No setter for field")}return function(a,n){const r=`_on${at(t)}Changed`;return function(s){var u;if(n.deleted)return Pe("instance deleted - cannot call any method"),!1;if(n[t]!==s){const c=n[t.name];return n[t]=s,(u=n[r])==null||u.call(n,a,n,s,c),a.modified(),!0}return!1}}}function sa(t,e,a){a.forEach(n=>{typeof n=="object"?t[`set${at(n.name)}`]=mc(n)(t,e):t[`set${at(n)}`]=mc(n)(t,e)})}function lt(t,e,a){Lt(t,e,a),sa(t,e,a)}function ua(t,e,a){a.forEach(n=>{t[`get${at(n)}`]=()=>e[n]?Array.from(e[n]):e[n],t[`get${at(n)}ByReference`]=()=>e[n]})}function Jo(t,e,a,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;a.forEach(i=>{if(e[i]&&n&&e[i].length!==n)throw new RangeError(`Invalid initial number of values for array (${i})`);const s=`_on${at(i)}Changed`;t[`set${at(i)}`]=function(){var p;if(e.deleted)return Pe("instance deleted - cannot call any method"),!1;for(var u=arguments.length,c=new Array(u),o=0;o<u;o++)c[o]=arguments[o];let f=c,l,h=!1;if(f.length===1&&(f[0]==null||f[0].length>=0)&&(f=f[0],h=!0),f==null)l=e[i]!==f;else{if(n&&f.length!==n)if(f.length<n&&r!==void 0)for(f=Array.from(f),h=!1;f.length<n;)f.push(r);else throw new RangeError(`Invalid number of values for array setter (${i})`);l=e[i]==null||e[i].length!==f.length;for(let d=0;!l&&d<f.length;++d)l=e[i][d]!==f[d];l&&h&&(f=Array.from(f))}if(l){const d=e[i.name];e[i]=f,(p=e[s])==null||p.call(e,t,e,f,d),t.modified()}return l},t[`set${at(i)}From`]=u=>{const c=e[i];u.forEach((o,f)=>{c[f]=o})}})}function pi(t,e,a,n){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0;ua(t,e,a),Jo(t,e,a,n,r)}function ca(t,e,a){for(let n=0;n<a.length;n++){const r=a[n];e[r]!==void 0&&(e[`_${r}`]=e[r],delete e[r])}}function Zo(t,e,a,n){e.inputData?e.inputData=e.inputData.map(xt):e.inputData=[],e.inputConnection?e.inputConnection=e.inputConnection.map(xt):e.inputConnection=[],e.output?e.output=e.output.map(xt):e.output=[],e.inputArrayToProcess?e.inputArrayToProcess=e.inputArrayToProcess.map(xt):e.inputArrayToProcess=[],e.numberOfInputs=a;function r(p){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Pe("instance deleted - cannot call any method");return}if(d>=e.numberOfInputs){Pe(`algorithm ${t.getClassName()} only has ${e.numberOfInputs} input ports. To add more input ports, use addInputData()`);return}(e.inputData[d]!==p||e.inputConnection[d])&&(e.inputData[d]=p,e.inputConnection[d]=null,t.modified&&t.modified())}function i(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[p]&&(e.inputData[p]=e.inputConnection[p]()),e.inputData[p]}function s(p){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(e.deleted){Pe("instance deleted - cannot call any method");return}if(d>=e.numberOfInputs){let y=`algorithm ${t.getClassName()} only has `;y+=`${e.numberOfInputs}`,y+=" input ports. To add more input ports, use addInputConnection()",Pe(y);return}e.inputData[d]=null,e.inputConnection[d]=p}function u(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.inputConnection[p]}function c(){let p=e.numberOfInputs;for(;p&&!e.inputData[p-1]&&!e.inputConnection[p-1];)p--;return p===e.numberOfInputs&&e.numberOfInputs++,p}function o(p){if(e.deleted){Pe("instance deleted - cannot call any method");return}s(p,c())}function f(p){if(e.deleted){Pe("instance deleted - cannot call any method");return}r(p,c())}function l(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.deleted?(Pe("instance deleted - cannot call any method"),null):(t.shouldUpdate()&&t.update(),e.output[p])}t.shouldUpdate=()=>{var m,S;const p=t.getMTime();let d=1/0,y=n;for(;y--;){if(!e.output[y]||e.output[y].isDeleted())return!0;const v=e.output[y].getMTime();if(v<p)return!0;v<d&&(d=v)}for(y=e.numberOfInputs;y--;)if((m=e.inputConnection[y])!=null&&m.filter.shouldUpdate()||((S=t.getInputData(y))==null?void 0:S.getMTime())>d)return!0;return!1};function h(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const d=()=>l(p);return d.filter=t,d}if(e.numberOfInputs){let p=e.numberOfInputs;for(;p--;)e.inputData.push(null),e.inputConnection.push(null);t.setInputData=r,t.setInputConnection=s,t.addInputData=f,t.addInputConnection=o,t.getInputData=i,t.getInputConnection=u}n&&(t.getOutputData=l,t.getOutputPort=h),t.update=()=>{const p=[];if(e.numberOfInputs){let d=0;for(;d<e.numberOfInputs;)p[d]=t.getInputData(d),d++}t.shouldUpdate()&&t.requestData&&t.requestData(p,e.output)},t.getNumberOfInputPorts=()=>e.numberOfInputs,t.getNumberOfOutputPorts=()=>n||e.output.length,t.getInputArrayToProcess=p=>{const d=e.inputArrayToProcess[p],y=e.inputData[p];return d&&y?y[`get${d.fieldAssociation}`]().getArray(d.arrayName):null},t.setInputArrayToProcess=function(p,d,y){let m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Scalars";for(;e.inputArrayToProcess.length<p;)e.inputArrayToProcess.push(null);e.inputArrayToProcess[p]={arrayName:d,fieldAssociation:y,attributeType:m}}}const Qo=Symbol("Event abort");function Or(t,e,a){const n=[],r=t.delete;let i=1;function s(o){for(let f=0;f<n.length;++f){const[l]=n[f];if(l===o){n.splice(f,1);return}}}function u(o){function f(){s(o)}return Object.freeze({unsubscribe:f})}function c(){if(e.deleted){Pe("instance deleted - cannot call any method");return}const o=n.slice();for(let f=0;f<o.length;++f){const[,l,h]=o[f];if(l){if(h<0)setTimeout(()=>l.apply(t,arguments),1-h);else if(l.apply(t,arguments)===Qo)break}}}t[`invoke${at(a)}`]=c,t[`on${at(a)}`]=function(o){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!o.apply)return console.error(`Invalid callback for event ${a}`),null;if(e.deleted)return Pe("instance deleted - cannot call any method"),null;const l=i++;return n.push([l,o,f]),n.sort((h,p)=>p[2]-h[2]),u(l)},t.delete=()=>{r(),n.forEach(o=>{let[f]=o;return s(f)})}}function Ke(t,e){const a=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},i={};return t(i,r,n),Object.freeze(i)};return e&&xt.register(e,a),a}function Nr(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.filter(s=>!!s).map(s=>s(...r))}}function es(t){return t&&t.isA&&t.isA("vtkObject")}function la(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[];if(es(t)){if(n.indexOf(t)>=0)return a;n.push(t);const r=e(t);r!==void 0&&a.push(r);const i=t.get();Object.keys(i).forEach(s=>{const u=i[s];Array.isArray(u)?u.forEach(c=>{la(c,e,a,n)}):la(u,e,a,n)})}return a}function ln(t,e,a){var n=this;let r;const i=function(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];const o=n,f=()=>{r=null,a||t.apply(o,u)},l=a&&!r;clearTimeout(r),r=setTimeout(f,e),l&&t.apply(o,u)};return i.cancel=()=>clearTimeout(r),i}function xc(t,e){let a=!1,n=null;function r(){a=!1,n!==null&&(i(...n),n=null)}function i(){for(var s=arguments.length,u=new Array(s),c=0;c<s;c++)u[c]=arguments[c];if(a){n=u;return}a=!0,t(...u),setTimeout(r,e)}return i}function ts(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e.keystore=Object.assign(e.keystore||{},a),t.setKey=(n,r)=>{e.keystore[n]=r},t.getKey=n=>e.keystore[n],t.getAllKeys=()=>Object.keys(e.keystore),t.deleteKey=n=>delete e.keystore[n],t.clearKeystore=()=>t.getAllKeys().forEach(n=>delete e.keystore[n])}let G2=1;const gi="__root__";function Sc(t,e){ts(t,e);const a=t.delete;e.proxyId=`${G2++}`,e.ui=JSON.parse(JSON.stringify(e.ui||[])),Lt(t,e,["proxyId","proxyGroup","proxyName"]),lt(t,e,["proxyManager"]);const n={},r={};function i(o,f){r[f]||(r[f]=[]);const l=r[f];for(let h=0;h<o.length;h++)l.push(o[h].name),n[o[h].name]=o[h],o[h].children&&o[h].children.length&&i(o[h].children,o[h].name)}i(e.ui,gi),t.updateUI=o=>{e.ui=JSON.parse(JSON.stringify(o||[])),Object.keys(n).forEach(f=>delete n[f]),Object.keys(r).forEach(f=>delete r[f]),i(e.ui,gi),t.modified()};function s(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gi;return r[o]}t.updateProxyProperty=(o,f)=>{const l=n[o];l?Object.assign(l,f):n[o]={...f}},t.activate=()=>{if(e.proxyManager){const o=`setActive${at(t.getProxyGroup().slice(0,-1))}`;e.proxyManager[o]&&e.proxyManager[o](t)}},e.propertyLinkSubscribers={},t.registerPropertyLinkForGC=(o,f)=>{f in e.propertyLinkSubscribers||(e.propertyLinkSubscribers[f]=[]),e.propertyLinkSubscribers[f].push(o)},t.gcPropertyLinks=o=>{const f=e.propertyLinkSubscribers[o]||[];for(;f.length;)f.pop().unbind(t)},e.propertyLinkMap={},t.getPropertyLink=function(o){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.propertyLinkMap[o])return e.propertyLinkMap[o];let l=null;const h=[];let p=0,d=!1;function y(x){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(d)return null;const T=[];let w=null;for(p=h.length;p--;){const E=h[p];E.instance===x?w=E:T.push(E)}if(!w)return null;const _=w.instance[`get${at(w.propertyName)}`]();if(!A2(_,l)||C){for(l=_,d=!0;T.length;){const E=T.pop();E.instance.set({[E.propertyName]:l})}d=!1}return e.propertyLinkMap[o].persistent&&(e.propertyLinkMap[o].value=_),_}function m(x,C){const T=[];for(p=h.length;p--;){const w=h[p];w.instance===x&&(w.propertyName===C||C===void 0)&&(w.subscription.unsubscribe(),T.push(p))}for(;T.length;)h.splice(T.pop(),1)}function S(x,C){let T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const w=x.onModified(y),_=h[0];return h.push({instance:x,propertyName:C,subscription:w}),T&&(e.propertyLinkMap[o].persistent&&e.propertyLinkMap[o].value!==void 0?x.set({[C]:e.propertyLinkMap[o].value}):_&&y(_.instance,!0)),{unsubscribe:()=>m(x,C)}}function v(){for(;h.length;)h.pop().subscription.unsubscribe()}const g={bind:S,unbind:m,unsubscribe:v,persistent:f};return e.propertyLinkMap[o]=g,g};function u(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gi;const f=[],l=e.proxyId,h=s(o)||[];for(let p=0;p<h.length;p++){const d=h[p],y=t[`get${at(d)}`],m=y?y():void 0,S={id:l,name:d,value:m},v=u(d);v.length&&(S.children=v),f.push(S)}return f}t.listPropertyNames=()=>u().map(o=>o.name),t.getPropertyByName=o=>u().find(f=>f.name===o),t.getPropertyDomainByName=o=>(n[o]||{}).domain,t.getProxySection=()=>({id:e.proxyId,name:e.proxyGroup,ui:e.ui,properties:u()}),t.delete=()=>{const o=Object.keys(e.propertyLinkMap);let f=o.length;for(;f--;)e.propertyLinkMap[o[f]].unsubscribe();Object.keys(e.propertyLinkSubscribers).forEach(t.gcPropertyLinks),a()},t.getState=()=>null;function c(){if(e.links)for(let o=0;o<e.links.length;o++){const{link:f,property:l,persistent:h,updateOnBind:p,type:d}=e.links[o];if(d==="application"){const y=e.proxyManager.getPropertyLink(f,h);t.registerPropertyLinkForGC(y,"application"),y.bind(t,l,p)}}}Yo(c)}function Cc(t,e,a){const n=t.delete,r=[],i=Object.keys(a);let s=i.length;for(;s--;){const u=i[s],{modelKey:c,property:o,modified:f=!0}=a[u],l=at(o),h=at(u);t[`get${h}`]=e[c][`get${l}`],t[`set${h}`]=e[c][`set${l}`],f&&r.push(e[c].onModified(t.modified))}t.delete=()=>{for(;r.length;)r.pop().unsubscribe();n()}}function Tc(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};e.this=t;function r(u){const c=Object.keys(u);let o=c.length;for(;o--;){const f=c[o];e[f].set(u[f])}}const i=Object.keys(n);let s=i.length;for(;s--;){const u=i[s];e[u]=n[u];const c=a[u];t[`set${at(u)}`]=o=>{if(o!==e[u]){e[u]=o;const f=c[o];r(f),t.modified()}}}i.length&&Lt(t,e,i)}const wc=10,_c=40,Ec=800;function Dc(t){let e=0,a=0,n=0,r=0;return"detail"in t&&(a=t.detail),"wheelDelta"in t&&(a=-t.wheelDelta/120),"wheelDeltaY"in t&&(a=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=a,a=0),n=e*wc,r=a*wc,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(n=t.deltaX),(n||r)&&t.deltaMode&&(t.deltaMode===1?(n*=_c,r*=_c):(n*=Ec,r*=Ec)),n&&!e&&(e=n<1?-1:1),r&&!a&&(a=r<1?-1:1),{spinX:e,spinY:a||e,pixelX:n,pixelY:r||n}}var k={algo:Zo,capitalize:br,chain:Nr,debounce:ln,enumToString:V2,event:Or,EVENT_ABORT:Qo,formatBytesToProperUnit:pc,formatNumbersWithThousandSeparator:gc,get:Lt,getArray:ua,getCurrentGlobalMTime:k2,getStateArrayMapFunc:vc,isVtkObject:es,keystore:ts,measurePromiseExecution:yc,moveToProtected:ca,newInstance:Ke,newTypedArray:Hn,newTypedArrayFrom:hi,normalizeWheel:Dc,obj:ot,proxy:Sc,proxyPropertyMapping:Cc,proxyPropertyState:Tc,safeArrays:dc,set:sa,setArray:Jo,setGet:lt,setGetArray:pi,setImmediate:Yo,setLoggerFunction:sc,throttle:xc,traverseInstanceTree:la,TYPED_ARRAYS:St,uncapitalize:hc,VOID:ic,vtkDebugMacro:fi,vtkErrorMacro:Pe,vtkInfoMacro:cc,vtkLogMacro:uc,vtkOnceErrorMacro:fc,vtkWarningMacro:qo},wt=Object.freeze({__proto__:null,VOID:ic,setLoggerFunction:sc,vtkLogMacro:uc,vtkInfoMacro:cc,vtkDebugMacro:fi,vtkErrorMacro:Pe,vtkWarningMacro:qo,vtkOnceErrorMacro:fc,TYPED_ARRAYS:St,newTypedArray:Hn,newTypedArrayFrom:hi,capitalize:br,_capitalize:at,uncapitalize:hc,formatBytesToProperUnit:pc,formatNumbersWithThousandSeparator:gc,setImmediateVTK:Yo,measurePromiseExecution:yc,obj:ot,get:Lt,set:sa,setGet:lt,getArray:ua,setArray:Jo,setGetArray:pi,moveToProtected:ca,algo:Zo,EVENT_ABORT:Qo,event:Or,newInstance:Ke,chain:Nr,isVtkObject:es,traverseInstanceTree:la,debounce:ln,throttle:xc,keystore:ts,proxy:Sc,proxyPropertyMapping:Cc,proxyPropertyState:Tc,normalizeWheel:Dc,default:k});const{vtkErrorMacro:I2}=k,P2=["Build","Render"];function z2(t,e){e.classHierarchy.push("vtkViewNode"),t.build=n=>{},t.render=n=>{},t.traverse=n=>{const r=n.getTraverseOperation(),i=t[r];if(i){i(n);return}t.apply(n,!0);for(let s=0;s<e.children.length;s++)e.children[s].traverse(n);t.apply(n,!1)},t.apply=(n,r)=>{const i=t[n.getOperation()];i&&i(r,n)},t.getViewNodeFor=n=>{if(e.renderable===n)return t;for(let r=0;r<e.children.length;++r){const s=e.children[r].getViewNodeFor(n);if(s)return s}},t.getFirstAncestorOfType=n=>e._parent?e._parent.isA(n)?e._parent:e._parent.getFirstAncestorOfType(n):null,t.addMissingNode=n=>{if(!n)return;const r=e._renderableChildMap.get(n);if(r!==void 0)r.setVisited(!0);else{const i=t.createViewNode(n);i&&(i.setParent(t),i.setVisited(!0),e._renderableChildMap.set(n,i),e.children.push(i))}},t.addMissingNodes=n=>{if(!(!n||!n.length))for(let r=0;r<n.length;++r){const i=n[r],s=e._renderableChildMap.get(i);if(s!==void 0)s.setVisited(!0);else{const u=t.createViewNode(i);u&&(u.setParent(t),u.setVisited(!0),e._renderableChildMap.set(i,u),e.children.push(u))}}},t.addMissingChildren=n=>{if(!(!n||!n.length))for(let r=0;r<n.length;++r){const i=n[r];e.children.indexOf(i)===-1&&(i.setParent(t),e.children.push(i)),i.setVisited(!0)}},t.prepareNodes=()=>{for(let n=0;n<e.children.length;++n)e.children[n].setVisited(!1)},t.setVisited=n=>{e.visited=n},t.removeUnusedNodes=()=>{let n=0;for(let r=0;r<e.children.length;++r){const i=e.children[r];if(i.getVisited())e.children[n++]=i,i.setVisited(!1);else{const u=i.getRenderable();u&&e._renderableChildMap.delete(u),i.delete()}}e.children.length=n},t.createViewNode=n=>{if(!e.myFactory)return I2("Cannot create view nodes without my own factory"),null;const r=e.myFactory.createNode(n);return r&&r.setRenderable(n),r};const a=t.delete;t.delete=()=>{for(let n=0;n<e.children.length;n++)e.children[n].delete();a()}}const j2={renderable:null,myFactory:null,children:[],visited:!1};function bc(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,j2,a),k.obj(t,e),k.event(t,e,"event"),e._renderableChildMap=new Map,k.get(t,e,["visited"]),k.setGet(t,e,["_parent","renderable","myFactory"]),k.getArray(t,e,["children"]),k.moveToProtected(t,e,["parent"]),z2(t,e)}var vt={newInstance:k.newInstance(bc,"vtkViewNode"),extend:bc,PASS_TYPES:P2};function W2(t,e){e.overrides||(e.overrides={}),e.classHierarchy.push("vtkViewNodeFactory"),t.createNode=a=>{if(a.isDeleted())return null;let n=0,r=a.getClassName(n++),i=!1;const s=Object.keys(e.overrides);for(;r&&!i;)s.indexOf(r)!==-1?i=!0:r=a.getClassName(n++);if(!i)return null;const u=e.overrides[r]();return u.setMyFactory(t),u},t.registerOverride=(a,n)=>{e.overrides[a]=n}}const $2={};function Oc(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$2,a),k.obj(t,e),W2(t,e)}var H2={newInstance:k.newInstance(Oc,"vtkViewNodeFactory"),extend:Oc};const Nc=Object.create(null);function st(t,e){Nc[t]=e}function K2(t,e){e.classHierarchy.push("vtkOpenGLViewNodeFactory")}const X2={};function Mc(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,X2,a),e.overrides=Nc,H2.extend(t,e,a),K2(t,e)}var q2={newInstance:k.newInstance(Mc,"vtkOpenGLViewNodeFactory"),extend:Mc};function Y2(t,e){e.classHierarchy.push("vtkOpenGLCamera"),t.buildPass=a=>{a&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext())},t.opaquePass=a=>{if(a){const n=e._openGLRenderer.getTiledSizeAndOrigin();e.context.viewport(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize),e.context.scissor(n.lowerLeftU,n.lowerLeftV,n.usize,n.vsize)}},t.translucentPass=t.opaquePass,t.zBufferPass=t.opaquePass,t.opaqueZBufferPass=t.opaquePass,t.volumePass=t.opaquePass,t.getKeyMatrices=a=>{if(a!==e.lastRenderer||e._openGLRenderWindow.getMTime()>e.keyMatrixTime.getMTime()||t.getMTime()>e.keyMatrixTime.getMTime()||a.getMTime()>e.keyMatrixTime.getMTime()||e.renderable.getMTime()>e.keyMatrixTime.getMTime()){dt(e.keyMatrices.wcvc,e.renderable.getViewMatrix()),ta(e.keyMatrices.normalMatrix,e.keyMatrices.wcvc),xr(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),ze(e.keyMatrices.wcvc,e.keyMatrices.wcvc);const n=e._openGLRenderer.getAspectRatio();dt(e.keyMatrices.vcpc,e.renderable.getProjectionMatrix(n,-1,1)),ze(e.keyMatrices.vcpc,e.keyMatrices.vcpc),Ge(e.keyMatrices.wcpc,e.keyMatrices.vcpc,e.keyMatrices.wcvc),e.keyMatrixTime.modified(),e.lastRenderer=a}return e.keyMatrices}}const J2={context:null,lastRenderer:null,keyMatrixTime:null,keyMatrices:null};function Z2(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,J2,a),vt.extend(t,e,a),e.keyMatrixTime={},ot(e.keyMatrixTime),e.keyMatrices={normalMatrix:new Float64Array(9),vcpc:new Float64Array(16),wcvc:new Float64Array(16),wcpc:new Float64Array(16)},lt(t,e,["context","keyMatrixTime"]),Y2(t,e)}const Q2=Ke(Z2);st("vtkCamera",Q2);const{vtkDebugMacro:e3}=wt;function t3(t,e){e.classHierarchy.push("vtkOpenGLRenderer"),t.buildPass=a=>{if(a){if(!e.renderable)return;t.updateLights(),t.prepareNodes(),t.addMissingNode(e.renderable.getActiveCamera()),t.addMissingNodes(e.renderable.getViewPropsWithNestedProps()),t.removeUnusedNodes()}},t.updateLights=()=>{let a=0;const n=e.renderable.getLightsByReference();for(let r=0;r<n.length;++r)n[r].getSwitch()>0&&a++;return a||(e3("No lights are on, creating one."),e.renderable.createLight()),a},t.zBufferPass=a=>{if(a){let n=0;const r=e.context;e.renderable.getTransparent()||(e.context.clearColor(1,0,0,1),n|=r.COLOR_BUFFER_BIT),e.renderable.getPreserveDepthBuffer()||(r.clearDepth(1),n|=r.DEPTH_BUFFER_BIT,e.context.depthMask(!0));const i=t.getTiledSizeAndOrigin();r.enable(r.SCISSOR_TEST),r.scissor(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),r.viewport(i.lowerLeftU,i.lowerLeftV,i.usize,i.vsize),r.colorMask(!0,!0,!0,!0),n&&r.clear(n),r.enable(r.DEPTH_TEST)}},t.opaqueZBufferPass=a=>t.zBufferPass(a),t.cameraPass=a=>{a&&t.clear()},t.getAspectRatio=()=>{const a=e._parent.getSizeByReference(),n=e.renderable.getViewportByReference();return a[0]*(n[2]-n[0])/((n[3]-n[1])*a[1])},t.getTiledSizeAndOrigin=()=>{const a=e.renderable.getViewportByReference(),n=[0,0,1,1],r=a[0]-n[0],i=a[1]-n[1],s=e._parent.normalizedDisplayToDisplay(r,i),u=Math.round(s[0]),c=Math.round(s[1]),o=a[2]-n[0],f=a[3]-n[1],l=e._parent.normalizedDisplayToDisplay(o,f);let h=Math.round(l[0])-u,p=Math.round(l[1])-c;return h<0&&(h=0),p<0&&(p=0),{usize:h,vsize:p,lowerLeftU:u,lowerLeftV:c}},t.clear=()=>{let a=0;const n=e.context;if(!e.renderable.getTransparent()){const i=e.renderable.getBackgroundByReference();e.context.clearColor(i[0],i[1],i[2],i[3]),a|=n.COLOR_BUFFER_BIT}e.renderable.getPreserveDepthBuffer()||(n.clearDepth(1),a|=n.DEPTH_BUFFER_BIT,e.context.depthMask(!0)),n.colorMask(!0,!0,!0,!0);const r=t.getTiledSizeAndOrigin();n.enable(n.SCISSOR_TEST),n.scissor(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),n.viewport(r.lowerLeftU,r.lowerLeftV,r.usize,r.vsize),a&&n.clear(a),n.enable(n.DEPTH_TEST)},t.releaseGraphicsResources=()=>{e.selector!==null&&e.selector.releaseGraphicsResources(),e.renderable&&e.renderable.getViewProps().forEach(a=>{a.modified()})},t.setOpenGLRenderWindow=a=>{e._openGLRenderWindow!==a&&(t.releaseGraphicsResources(),e._openGLRenderWindow=a,e.context=null,a&&(e.context=e._openGLRenderWindow.getContext()))}}const n3={context:null,_openGLRenderWindow:null,selector:null};function r3(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n3,a),vt.extend(t,e,a),Lt(t,e,["shaderCache"]),lt(t,e,["selector"]),ca(t,e,["openGLRenderWindow"]),t3(t,e)}const a3=Ke(r3,"vtkOpenGLRenderer");st("vtkRenderer",a3);function i3(t,e){e.classHierarchy.push("vtkOpenGLActor"),t.buildPass=a=>{if(a){e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let n=0;n<e.children.length;n++){const r=e.children[n];r.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(r)):e.oglmapper=r}}},t.traverseZBufferPass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.traverseOpaqueZBufferPass=a=>t.traverseOpaquePass(a),t.traverseOpaquePass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.traverseTranslucentPass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let a=0;a<e.ogltextures.length;a++){const n=e.ogltextures[a];n.render(),n.getHandle()&&e.activeTextures.push(n)}}},t.queryPass=(a,n)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},t.zBufferPass=(a,n)=>t.opaquePass(a,n),t.opaqueZBufferPass=(a,n)=>t.opaquePass(a,n),t.opaquePass=(a,n)=>{if(a)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let r=0;r<e.activeTextures.length;r++)e.activeTextures[r].deactivate()},t.translucentPass=(a,n)=>{if(a)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let r=0;r<e.activeTextures.length;r++)e.activeTextures[r].deactivate()},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),dt(e.keyMatrices.mcwc,e.renderable.getMatrix()),ze(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.renderable.getIsIdentity()?zt(e.keyMatrices.normalMatrix):(ta(e.keyMatrices.normalMatrix,e.keyMatrices.mcwc),xr(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix),ei(e.keyMatrices.normalMatrix,e.keyMatrices.normalMatrix)),e.keyMatrixTime.modified()),e.keyMatrices)}const o3={context:null,keyMatrixTime:null,keyMatrices:null,activeTextures:null};function s3(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,o3,a),vt.extend(t,e,a),e.keyMatrixTime={},ot(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:zt(new Float64Array(9)),mcwc:Se(new Float64Array(16))},lt(t,e,["context"]),Lt(t,e,["activeTextures"]),i3(t,e)}const u3=Ke(s3);st("vtkActor",u3);function c3(t,e){e.classHierarchy.push("vtkOpenGLActor2D"),t.buildPass=a=>{if(a){if(!e.renderable)return;e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNodes(e.renderable.getTextures()),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes(),e.ogltextures=null,e.activeTextures=null;for(let n=0;n<e.children.length;n++){const r=e.children[n];r.isA("vtkOpenGLTexture")?(e.ogltextures||(e.ogltextures=[]),e.ogltextures.push(r)):e.oglmapper=r}}},t.queryPass=(a,n)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;n.incrementOverlayActorCount()}},t.traverseOpaquePass=a=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.traverseTranslucentPass=a=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.traverseOverlayPass=a=>{!e.oglmapper||!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable||(t.apply(a,!0),e.oglmapper.traverse(a),t.apply(a,!1))},t.activateTextures=()=>{if(e.ogltextures){e.activeTextures=[];for(let a=0;a<e.ogltextures.length;a++){const n=e.ogltextures[a];n.render(),n.getHandle()&&e.activeTextures.push(n)}}},t.opaquePass=(a,n)=>{if(a)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let r=0;r<e.activeTextures.length;r++)e.activeTextures[r].deactivate()},t.translucentPass=(a,n)=>{if(a)e.context.depthMask(!1),t.activateTextures();else if(e.activeTextures)for(let r=0;r<e.activeTextures.length;r++)e.activeTextures[r].deactivate()},t.overlayPass=(a,n)=>{if(a)e.context.depthMask(!0),t.activateTextures();else if(e.activeTextures)for(let r=0;r<e.activeTextures.length;r++)e.activeTextures[r].deactivate()}}const l3={context:null,activeTextures:null};function f3(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,l3,a),vt.extend(t,e,a),lt(t,e,["context"]),Lt(t,e,["activeTextures"]),c3(t,e)}const h3=Ke(f3);st("vtkActor2D",h3);function di(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function p3(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Rc(t){let e,a,n;t.length!==2?(e=di,a=(u,c)=>di(t(u),c),n=(u,c)=>t(u)-c):(e=t===di||t===p3?t:g3,a=t,n=t);function r(u,c,o=0,f=u.length){if(o<f){if(e(c,c)!==0)return f;do{const l=o+f>>>1;a(u[l],c)<0?o=l+1:f=l}while(o<f)}return o}function i(u,c,o=0,f=u.length){if(o<f){if(e(c,c)!==0)return f;do{const l=o+f>>>1;a(u[l],c)<=0?o=l+1:f=l}while(o<f)}return o}function s(u,c,o=0,f=u.length){const l=r(u,c,o,f-1);return l>o&&n(u[l-1],c)>-n(u[l],c)?l-1:l}return{left:r,center:s,right:i}}function g3(){return 0}function d3(t){return t===null?NaN:+t}const v3=Rc(di).right;Rc(d3).center;const y3=v3,m3=Math.sqrt(50),x3=Math.sqrt(10),S3=Math.sqrt(2);function vi(t,e,a){const n=(e-t)/Math.max(0,a),r=Math.floor(Math.log10(n)),i=n/Math.pow(10,r),s=i>=m3?10:i>=x3?5:i>=S3?2:1;let u,c,o;return r<0?(o=Math.pow(10,-r)/s,u=Math.round(t*o),c=Math.round(e*o),u/o<t&&++u,c/o>e&&--c,o=-o):(o=Math.pow(10,r)*s,u=Math.round(t/o),c=Math.round(e/o),u*o<t&&++u,c*o>e&&--c),c<u&&.5<=a&&a<2?vi(t,e,a*2):[u,c,o]}function C3(t,e,a){if(e=+e,t=+t,a=+a,!(a>0))return[];if(t===e)return[t];const n=e<t,[r,i,s]=n?vi(e,t,a):vi(t,e,a);if(!(i>=r))return[];const u=i-r+1,c=new Array(u);if(n)if(s<0)for(let o=0;o<u;++o)c[o]=(i-o)/-s;else for(let o=0;o<u;++o)c[o]=(i-o)*s;else if(s<0)for(let o=0;o<u;++o)c[o]=(r+o)/-s;else for(let o=0;o<u;++o)c[o]=(r+o)*s;return c}function ns(t,e,a){return e=+e,t=+t,a=+a,vi(t,e,a)[2]}function T3(t,e,a){e=+e,t=+t,a=+a;const n=e<t,r=n?ns(e,t,a):ns(t,e,a);return(n?-1:1)*(r<0?1/-r:r)}function w3(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function rs(t,e,a){t.prototype=e.prototype=a,a.constructor=t}function Lc(t,e){var a=Object.create(t.prototype);for(var n in e)a[n]=e[n];return a}function fa(){}var ha=.7,yi=1/ha,Mr="\\s*([+-]?\\d+)\\s*",pa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_3=/^#([0-9a-f]{3,8})$/,E3=new RegExp(`^rgb\\(${Mr},${Mr},${Mr}\\)$`),D3=new RegExp(`^rgb\\(${rn},${rn},${rn}\\)$`),b3=new RegExp(`^rgba\\(${Mr},${Mr},${Mr},${pa}\\)$`),O3=new RegExp(`^rgba\\(${rn},${rn},${rn},${pa}\\)$`),N3=new RegExp(`^hsl\\(${pa},${rn},${rn}\\)$`),M3=new RegExp(`^hsla\\(${pa},${rn},${rn},${pa}\\)$`),kc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rs(fa,ga,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Fc,formatHex:Fc,formatHex8:R3,formatHsl:L3,formatRgb:Ac,toString:Ac});function Fc(){return this.rgb().formatHex()}function R3(){return this.rgb().formatHex8()}function L3(){return Ic(this).formatHsl()}function Ac(){return this.rgb().formatRgb()}function ga(t){var e,a;return t=(t+"").trim().toLowerCase(),(e=_3.exec(t))?(a=e[1].length,e=parseInt(e[1],16),a===6?Vc(e):a===3?new Mt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):a===8?mi(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):a===4?mi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=E3.exec(t))?new Mt(e[1],e[2],e[3],1):(e=D3.exec(t))?new Mt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=b3.exec(t))?mi(e[1],e[2],e[3],e[4]):(e=O3.exec(t))?mi(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=N3.exec(t))?Gc(e[1],e[2]/100,e[3]/100,1):(e=M3.exec(t))?Gc(e[1],e[2]/100,e[3]/100,e[4]):kc.hasOwnProperty(t)?Vc(kc[t]):t==="transparent"?new Mt(NaN,NaN,NaN,0):null}function Vc(t){return new Mt(t>>16&255,t>>8&255,t&255,1)}function mi(t,e,a,n){return n<=0&&(t=e=a=NaN),new Mt(t,e,a,n)}function k3(t){return t instanceof fa||(t=ga(t)),t?(t=t.rgb(),new Mt(t.r,t.g,t.b,t.opacity)):new Mt}function as(t,e,a,n){return arguments.length===1?k3(t):new Mt(t,e,a,n??1)}function Mt(t,e,a,n){this.r=+t,this.g=+e,this.b=+a,this.opacity=+n}rs(Mt,as,Lc(fa,{brighter(t){return t=t==null?yi:Math.pow(yi,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ha:Math.pow(ha,t),new Mt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Mt(Kn(this.r),Kn(this.g),Kn(this.b),xi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bc,formatHex:Bc,formatHex8:F3,formatRgb:Uc,toString:Uc}));function Bc(){return`#${Xn(this.r)}${Xn(this.g)}${Xn(this.b)}`}function F3(){return`#${Xn(this.r)}${Xn(this.g)}${Xn(this.b)}${Xn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Uc(){const t=xi(this.opacity);return`${t===1?"rgb(":"rgba("}${Kn(this.r)}, ${Kn(this.g)}, ${Kn(this.b)}${t===1?")":`, ${t})`}`}function xi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Kn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Xn(t){return t=Kn(t),(t<16?"0":"")+t.toString(16)}function Gc(t,e,a,n){return n<=0?t=e=a=NaN:a<=0||a>=1?t=e=NaN:e<=0&&(t=NaN),new $t(t,e,a,n)}function Ic(t){if(t instanceof $t)return new $t(t.h,t.s,t.l,t.opacity);if(t instanceof fa||(t=ga(t)),!t)return new $t;if(t instanceof $t)return t;t=t.rgb();var e=t.r/255,a=t.g/255,n=t.b/255,r=Math.min(e,a,n),i=Math.max(e,a,n),s=NaN,u=i-r,c=(i+r)/2;return u?(e===i?s=(a-n)/u+(a<n)*6:a===i?s=(n-e)/u+2:s=(e-a)/u+4,u/=c<.5?i+r:2-i-r,s*=60):u=c>0&&c<1?0:s,new $t(s,u,c,t.opacity)}function A3(t,e,a,n){return arguments.length===1?Ic(t):new $t(t,e,a,n??1)}function $t(t,e,a,n){this.h=+t,this.s=+e,this.l=+a,this.opacity=+n}rs($t,A3,Lc(fa,{brighter(t){return t=t==null?yi:Math.pow(yi,t),new $t(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ha:Math.pow(ha,t),new $t(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,a=this.l,n=a+(a<.5?a:1-a)*e,r=2*a-n;return new Mt(is(t>=240?t-240:t+120,r,n),is(t,r,n),is(t<120?t+240:t-120,r,n),this.opacity)},clamp(){return new $t(Pc(this.h),Si(this.s),Si(this.l),xi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xi(this.opacity);return`${t===1?"hsl(":"hsla("}${Pc(this.h)}, ${Si(this.s)*100}%, ${Si(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Pc(t){return t=(t||0)%360,t<0?t+360:t}function Si(t){return Math.max(0,Math.min(1,t||0))}function is(t,e,a){return(t<60?e+(a-e)*t/60:t<180?a:t<240?e+(a-e)*(240-t)/60:e)*255}const os=t=>()=>t;function V3(t,e){return function(a){return t+a*e}}function B3(t,e,a){return t=Math.pow(t,a),e=Math.pow(e,a)-t,a=1/a,function(n){return Math.pow(t+n*e,a)}}function U3(t){return(t=+t)==1?zc:function(e,a){return a-e?B3(e,a,t):os(isNaN(e)?a:e)}}function zc(t,e){var a=e-t;return a?V3(t,a):os(isNaN(t)?e:t)}const jc=function t(e){var a=U3(e);function n(r,i){var s=a((r=as(r)).r,(i=as(i)).r),u=a(r.g,i.g),c=a(r.b,i.b),o=zc(r.opacity,i.opacity);return function(f){return r.r=s(f),r.g=u(f),r.b=c(f),r.opacity=o(f),r+""}}return n.gamma=t,n}(1);function G3(t,e){e||(e=[]);var a=t?Math.min(e.length,t.length):0,n=e.slice(),r;return function(i){for(r=0;r<a;++r)n[r]=t[r]*(1-i)+e[r]*i;return n}}function I3(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function P3(t,e){var a=e?e.length:0,n=t?Math.min(a,t.length):0,r=new Array(n),i=new Array(a),s;for(s=0;s<n;++s)r[s]=cs(t[s],e[s]);for(;s<a;++s)i[s]=e[s];return function(u){for(s=0;s<n;++s)i[s]=r[s](u);return i}}function z3(t,e){var a=new Date;return t=+t,e=+e,function(n){return a.setTime(t*(1-n)+e*n),a}}function Ci(t,e){return t=+t,e=+e,function(a){return t*(1-a)+e*a}}function j3(t,e){var a={},n={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?a[r]=cs(t[r],e[r]):n[r]=e[r];return function(i){for(r in a)n[r]=a[r](i);return n}}var ss=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,us=new RegExp(ss.source,"g");function W3(t){return function(){return t}}function $3(t){return function(e){return t(e)+""}}function H3(t,e){var a=ss.lastIndex=us.lastIndex=0,n,r,i,s=-1,u=[],c=[];for(t=t+"",e=e+"";(n=ss.exec(t))&&(r=us.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),u[s]?u[s]+=i:u[++s]=i),(n=n[0])===(r=r[0])?u[s]?u[s]+=r:u[++s]=r:(u[++s]=null,c.push({i:s,x:Ci(n,r)})),a=us.lastIndex;return a<e.length&&(i=e.slice(a),u[s]?u[s]+=i:u[++s]=i),u.length<2?c[0]?$3(c[0].x):W3(e):(e=c.length,function(o){for(var f=0,l;f<e;++f)u[(l=c[f]).i]=l.x(o);return u.join("")})}function cs(t,e){var a=typeof e,n;return e==null||a==="boolean"?os(e):(a==="number"?Ci:a==="string"?(n=ga(e))?(e=n,jc):H3:e instanceof ga?jc:e instanceof Date?z3:I3(e)?G3:Array.isArray(e)?P3:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?j3:Ci)(t,e)}function K3(t,e){return t=+t,e=+e,function(a){return Math.round(t*(1-a)+e*a)}}function X3(t){return function(){return t}}function q3(t){return+t}var Wc=[0,1];function Rr(t){return t}function ls(t,e){return(e-=t=+t)?function(a){return(a-t)/e}:X3(isNaN(e)?NaN:.5)}function Y3(t,e){var a;return t>e&&(a=t,t=e,e=a),function(n){return Math.max(t,Math.min(e,n))}}function J3(t,e,a){var n=t[0],r=t[1],i=e[0],s=e[1];return r<n?(n=ls(r,n),i=a(s,i)):(n=ls(n,r),i=a(i,s)),function(u){return i(n(u))}}function Z3(t,e,a){var n=Math.min(t.length,e.length)-1,r=new Array(n),i=new Array(n),s=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<n;)r[s]=ls(t[s],t[s+1]),i[s]=a(e[s],e[s+1]);return function(u){var c=y3(t,u,1,n)-1;return i[c](r[c](u))}}function Q3(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ev(){var t=Wc,e=Wc,a=cs,n,r,i,s=Rr,u,c,o;function f(){var h=Math.min(t.length,e.length);return s!==Rr&&(s=Y3(t[0],t[h-1])),u=h>2?Z3:J3,c=o=null,l}function l(h){return h==null||isNaN(h=+h)?i:(c||(c=u(t.map(n),e,a)))(n(s(h)))}return l.invert=function(h){return s(r((o||(o=u(e,t.map(n),Ci)))(h)))},l.domain=function(h){return arguments.length?(t=Array.from(h,q3),f()):t.slice()},l.range=function(h){return arguments.length?(e=Array.from(h),f()):e.slice()},l.rangeRound=function(h){return e=Array.from(h),a=K3,f()},l.clamp=function(h){return arguments.length?(s=h?!0:Rr,f()):s!==Rr},l.interpolate=function(h){return arguments.length?(a=h,f()):a},l.unknown=function(h){return arguments.length?(i=h,l):i},function(h,p){return n=h,r=p,f()}}function tv(){return ev()(Rr,Rr)}function nv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Ti(t,e){if((a=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var a,n=t.slice(0,a);return[n.length>1?n[0]+n.slice(2):n,+t.slice(a+1)]}function Lr(t){return t=Ti(Math.abs(t)),t?t[1]:NaN}function rv(t,e){return function(a,n){for(var r=a.length,i=[],s=0,u=t[0],c=0;r>0&&u>0&&(c+u+1>n&&(u=Math.max(1,n-c)),i.push(a.substring(r-=u,r+u)),!((c+=u+1)>n));)u=t[s=(s+1)%t.length];return i.reverse().join(e)}}function av(t){return function(e){return e.replace(/[0-9]/g,function(a){return t[+a]})}}var iv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function wi(t){if(!(e=iv.exec(t)))throw new Error("invalid format: "+t);var e;return new fs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}wi.prototype=fs.prototype;function fs(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}fs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ov(t){e:for(var e=t.length,a=1,n=-1,r;a<e;++a)switch(t[a]){case".":n=r=a;break;case"0":n===0&&(n=a),r=a;break;default:if(!+t[a])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(r+1):t}var $c;function sv(t,e){var a=Ti(t,e);if(!a)return t+"";var n=a[0],r=a[1],i=r-($c=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ti(t,Math.max(0,e+i-1))[0]}function Hc(t,e){var a=Ti(t,e);if(!a)return t+"";var n=a[0],r=a[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const Kc={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:nv,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Hc(t*100,e),r:Hc,s:sv,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Xc(t){return t}var qc=Array.prototype.map,Yc=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function uv(t){var e=t.grouping===void 0||t.thousands===void 0?Xc:rv(qc.call(t.grouping,Number),t.thousands+""),a=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",i=t.numerals===void 0?Xc:av(qc.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function o(l){l=wi(l);var h=l.fill,p=l.align,d=l.sign,y=l.symbol,m=l.zero,S=l.width,v=l.comma,g=l.precision,x=l.trim,C=l.type;C==="n"?(v=!0,C="g"):Kc[C]||(g===void 0&&(g=12),x=!0,C="g"),(m||h==="0"&&p==="=")&&(m=!0,h="0",p="=");var T=y==="$"?a:y==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",w=y==="$"?n:/[%p]/.test(C)?s:"",_=Kc[C],E=/[defgprs%]/.test(C);g=g===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g));function D(b){var N=T,R=w,M,A,I;if(C==="c")R=_(b)+R,b="";else{b=+b;var $=b<0||1/b<0;if(b=isNaN(b)?c:_(Math.abs(b),g),x&&(b=ov(b)),$&&+b==0&&d!=="+"&&($=!1),N=($?d==="("?d:u:d==="-"||d==="("?"":d)+N,R=(C==="s"?Yc[8+$c/3]:"")+R+($&&d==="("?")":""),E){for(M=-1,A=b.length;++M<A;)if(I=b.charCodeAt(M),48>I||I>57){R=(I===46?r+b.slice(M+1):b.slice(M))+R,b=b.slice(0,M);break}}}v&&!m&&(b=e(b,1/0));var U=N.length+b.length+R.length,B=U<S?new Array(S-U+1).join(h):"";switch(v&&m&&(b=e(B+b,B.length?S-R.length:1/0),B=""),p){case"<":b=N+b+R+B;break;case"=":b=N+B+b+R;break;case"^":b=B.slice(0,U=B.length>>1)+N+b+R+B.slice(U);break;default:b=B+N+b+R;break}return i(b)}return D.toString=function(){return l+""},D}function f(l,h){var p=o((l=wi(l),l.type="f",l)),d=Math.max(-8,Math.min(8,Math.floor(Lr(h)/3)))*3,y=Math.pow(10,-d),m=Yc[8+d/3];return function(S){return p(y*S)+m}}return{format:o,formatPrefix:f}}var _i,Jc,Zc;cv({thousands:",",grouping:[3],currency:["$",""]});function cv(t){return _i=uv(t),Jc=_i.format,Zc=_i.formatPrefix,_i}function lv(t){return Math.max(0,-Lr(Math.abs(t)))}function fv(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lr(e)/3)))*3-Lr(Math.abs(t)))}function hv(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Lr(e)-Lr(t))+1}function pv(t,e,a,n){var r=T3(t,e,a),i;switch(n=wi(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(i=fv(r,s))&&(n.precision=i),Zc(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=hv(r,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=lv(r))&&(n.precision=i-(n.type==="%")*2);break}}return Jc(n)}function gv(t){var e=t.domain;return t.ticks=function(a){var n=e();return C3(n[0],n[n.length-1],a??10)},t.tickFormat=function(a,n){var r=e();return pv(r[0],r[r.length-1],a??10,n)},t.nice=function(a){a==null&&(a=10);var n=e(),r=0,i=n.length-1,s=n[r],u=n[i],c,o,f=10;for(u<s&&(o=s,s=u,u=o,o=r,r=i,i=o);f-- >0;){if(o=ns(s,u,a),o===c)return n[r]=s,n[i]=u,e(n);if(o>0)s=Math.floor(s/o)*o,u=Math.ceil(u/o)*o;else if(o<0)s=Math.ceil(s*o)/o,u=Math.floor(u*o)/o;else break;c=o}return t},t}function hs(){var t=tv();return t.copy=function(){return Q3(t,hs())},w3.apply(t,arguments),gv(t)}var ps={},dv={get exports(){return ps},set exports(t){ps=t}};(function(t){(function(e,a,n){function r(c){var o=this,f=u();o.next=function(){var l=2091639*o.s0+o.c*23283064365386963e-26;return o.s0=o.s1,o.s1=o.s2,o.s2=l-(o.c=l|0)},o.c=1,o.s0=f(" "),o.s1=f(" "),o.s2=f(" "),o.s0-=f(c),o.s0<0&&(o.s0+=1),o.s1-=f(c),o.s1<0&&(o.s1+=1),o.s2-=f(c),o.s2<0&&(o.s2+=1),f=null}function i(c,o){return o.c=c.c,o.s0=c.s0,o.s1=c.s1,o.s2=c.s2,o}function s(c,o){var f=new r(c),l=o&&o.state,h=f.next;return h.int32=function(){return f.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,l&&(typeof l=="object"&&i(l,f),h.state=function(){return i(f,{})}),h}function u(){var c=4022871197,o=function(f){f=String(f);for(var l=0;l<f.length;l++){c+=f.charCodeAt(l);var h=.02519603282416938*c;c=h>>>0,h-=c,h*=c,c=h>>>0,h-=c,c+=h*4294967296}return(c>>>0)*23283064365386963e-26};return o}a&&a.exports?a.exports=s:n&&n.amd?n(function(){return s}):this.alea=s})(Rt,t,!1)})(dv);var gs={},vv={get exports(){return gs},set exports(t){gs=t}};(function(t){(function(e,a,n){function r(u){var c=this,o="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var l=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^l^l>>>8},u===(u|0)?c.x=u:o+=u;for(var f=0;f<o.length+64;f++)c.x^=o.charCodeAt(f)|0,c.next()}function i(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c}function s(u,c){var o=new r(u),f=c&&c.state,l=function(){return(o.next()>>>0)/4294967296};return l.double=function(){do var h=o.next()>>>11,p=(o.next()>>>0)/4294967296,d=(h+p)/(1<<21);while(d===0);return d},l.int32=o.next,l.quick=l,f&&(typeof f=="object"&&i(f,o),l.state=function(){return i(o,{})}),l}a&&a.exports?a.exports=s:n&&n.amd?n(function(){return s}):this.xor128=s})(Rt,t,!1)})(vv);var ds={},yv={get exports(){return ds},set exports(t){ds=t}};(function(t){(function(e,a,n){function r(u){var c=this,o="";c.next=function(){var l=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^(l^l<<1))|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,u===(u|0)?c.x=u:o+=u;for(var f=0;f<o.length+64;f++)c.x^=o.charCodeAt(f)|0,f==o.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(u,c){return c.x=u.x,c.y=u.y,c.z=u.z,c.w=u.w,c.v=u.v,c.d=u.d,c}function s(u,c){var o=new r(u),f=c&&c.state,l=function(){return(o.next()>>>0)/4294967296};return l.double=function(){do var h=o.next()>>>11,p=(o.next()>>>0)/4294967296,d=(h+p)/(1<<21);while(d===0);return d},l.int32=o.next,l.quick=l,f&&(typeof f=="object"&&i(f,o),l.state=function(){return i(o,{})}),l}a&&a.exports?a.exports=s:n&&n.amd?n(function(){return s}):this.xorwow=s})(Rt,t,!1)})(yv);var vs={},mv={get exports(){return vs},set exports(t){vs=t}};(function(t){(function(e,a,n){function r(u){var c=this;c.next=function(){var f=c.x,l=c.i,h,p;return h=f[l],h^=h>>>7,p=h^h<<24,h=f[l+1&7],p^=h^h>>>10,h=f[l+3&7],p^=h^h>>>3,h=f[l+4&7],p^=h^h<<7,h=f[l+7&7],h=h^h<<13,p^=h^h<<9,f[l]=p,c.i=l+1&7,p};function o(f,l){var h,p=[];if(l===(l|0))p[0]=l;else for(l=""+l,h=0;h<l.length;++h)p[h&7]=p[h&7]<<15^l.charCodeAt(h)+p[h+1&7]<<13;for(;p.length<8;)p.push(0);for(h=0;h<8&&p[h]===0;++h);for(h==8?p[7]=-1:p[h],f.x=p,f.i=0,h=256;h>0;--h)f.next()}o(c,u)}function i(u,c){return c.x=u.x.slice(),c.i=u.i,c}function s(u,c){u==null&&(u=+new Date);var o=new r(u),f=c&&c.state,l=function(){return(o.next()>>>0)/4294967296};return l.double=function(){do var h=o.next()>>>11,p=(o.next()>>>0)/4294967296,d=(h+p)/(1<<21);while(d===0);return d},l.int32=o.next,l.quick=l,f&&(f.x&&i(f,o),l.state=function(){return i(o,{})}),l}a&&a.exports?a.exports=s:n&&n.amd?n(function(){return s}):this.xorshift7=s})(Rt,t,!1)})(mv);var ys={},xv={get exports(){return ys},set exports(t){ys=t}};(function(t){(function(e,a,n){function r(u){var c=this;c.next=function(){var f=c.w,l=c.X,h=c.i,p,d;return c.w=f=f+1640531527|0,d=l[h+34&127],p=l[h=h+1&127],d^=d<<13,p^=p<<17,d^=d>>>15,p^=p>>>12,d=l[h]=d^p,c.i=h,d+(f^f>>>16)|0};function o(f,l){var h,p,d,y,m,S=[],v=128;for(l===(l|0)?(p=l,l=null):(l=l+"\0",p=0,v=Math.max(v,l.length)),d=0,y=-32;y<v;++y)l&&(p^=l.charCodeAt((y+32)%l.length)),y===0&&(m=p),p^=p<<10,p^=p>>>15,p^=p<<4,p^=p>>>13,y>=0&&(m=m+1640531527|0,h=S[y&127]^=p+m,d=h==0?d+1:0);for(d>=128&&(S[(l&&l.length||0)&127]=-1),d=127,y=4*128;y>0;--y)p=S[d+34&127],h=S[d=d+1&127],p^=p<<13,h^=h<<17,p^=p>>>15,h^=h>>>12,S[d]=p^h;f.w=m,f.X=S,f.i=d}o(c,u)}function i(u,c){return c.i=u.i,c.w=u.w,c.X=u.X.slice(),c}function s(u,c){u==null&&(u=+new Date);var o=new r(u),f=c&&c.state,l=function(){return(o.next()>>>0)/4294967296};return l.double=function(){do var h=o.next()>>>11,p=(o.next()>>>0)/4294967296,d=(h+p)/(1<<21);while(d===0);return d},l.int32=o.next,l.quick=l,f&&(f.X&&i(f,o),l.state=function(){return i(o,{})}),l}a&&a.exports?a.exports=s:n&&n.amd?n(function(){return s}):this.xor4096=s})(Rt,t,!1)})(xv);var ms={},Sv={get exports(){return ms},set exports(t){ms=t}};(function(t){(function(e,a,n){function r(u){var c=this,o="";c.next=function(){var l=c.b,h=c.c,p=c.d,d=c.a;return l=l<<25^l>>>7^h,h=h-p|0,p=p<<24^p>>>8^d,d=d-l|0,c.b=l=l<<20^l>>>12^h,c.c=h=h-p|0,c.d=p<<16^h>>>16^d,c.a=d-l|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,u===Math.floor(u)?(c.a=u/4294967296|0,c.b=u|0):o+=u;for(var f=0;f<o.length+20;f++)c.b^=o.charCodeAt(f)|0,c.next()}function i(u,c){return c.a=u.a,c.b=u.b,c.c=u.c,c.d=u.d,c}function s(u,c){var o=new r(u),f=c&&c.state,l=function(){return(o.next()>>>0)/4294967296};return l.double=function(){do var h=o.next()>>>11,p=(o.next()>>>0)/4294967296,d=(h+p)/(1<<21);while(d===0);return d},l.int32=o.next,l.quick=l,f&&(typeof f=="object"&&i(f,o),l.state=function(){return i(o,{})}),l}a&&a.exports?a.exports=s:n&&n.amd?n(function(){return s}):this.tychei=s})(Rt,t,!1)})(Sv);var xs={},Cv={get exports(){return xs},set exports(t){xs=t}};const Tv=Id(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(t){(function(e,a,n){var r=256,i=6,s=52,u="random",c=n.pow(r,i),o=n.pow(2,s),f=o*2,l=r-1,h;function p(x,C,T){var w=[];C=C==!0?{entropy:!0}:C||{};var _=S(m(C.entropy?[x,g(a)]:x??v(),3),w),E=new d(w),D=function(){for(var b=E.g(i),N=c,R=0;b<o;)b=(b+R)*r,N*=r,R=E.g(1);for(;b>=f;)b/=2,N/=2,R>>>=1;return(b+R)/N};return D.int32=function(){return E.g(4)|0},D.quick=function(){return E.g(4)/4294967296},D.double=D,S(g(E.S),a),(C.pass||T||function(b,N,R,M){return M&&(M.S&&y(M,E),b.state=function(){return y(E,{})}),R?(n[u]=b,N):b})(D,_,"global"in C?C.global:this==n,C.state)}function d(x){var C,T=x.length,w=this,_=0,E=w.i=w.j=0,D=w.S=[];for(T||(x=[T++]);_<r;)D[_]=_++;for(_=0;_<r;_++)D[_]=D[E=l&E+x[_%T]+(C=D[_])],D[E]=C;(w.g=function(b){for(var N,R=0,M=w.i,A=w.j,I=w.S;b--;)N=I[M=l&M+1],R=R*r+I[l&(I[M]=I[A=l&A+N])+(I[A]=N)];return w.i=M,w.j=A,R})(r)}function y(x,C){return C.i=x.i,C.j=x.j,C.S=x.S.slice(),C}function m(x,C){var T=[],w=typeof x,_;if(C&&w=="object")for(_ in x)try{T.push(m(x[_],C-1))}catch{}return T.length?T:w=="string"?x:x+"\0"}function S(x,C){for(var T=x+"",w,_=0;_<T.length;)C[l&_]=l&(w^=C[l&_]*19)+T.charCodeAt(_++);return g(C)}function v(){try{var x;return h&&(x=h.randomBytes)?x=x(r):(x=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(x)),g(x)}catch{var C=e.navigator,T=C&&C.plugins;return[+new Date,e,T,e.screen,g(a)]}}function g(x){return String.fromCharCode.apply(0,x)}if(S(n.random(),a),t.exports){t.exports=p;try{h=Tv}catch{}}else n["seed"+u]=p})(typeof self<"u"?self:Rt,[],Math)})(Cv);var wv=ps,_v=gs,Ev=ds,Dv=vs,bv=ys,Ov=ms,qn=xs;qn.alea=wv,qn.xor128=_v,qn.xorwow=Ev,qn.xorshift7=Dv,qn.xor4096=bv,qn.tychei=Ov;var Qc=qn;const Ss=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Nv=[1,0,0,0,1,0,0,0,1],Cs=1e-6,Ts=1e-12,{vtkErrorMacro:el,vtkWarningMacro:Yn}=k;let tl=0;const nl=20;function da(t){return()=>el(`vtkMath::${t} - NOT IMPLEMENTED`)}function va(t,e,a,n){let r;for(let i=0;i<e;i++)r=t[a*e+i],t[a*e+i]=t[n*e+i],t[n*e+i]=r}function ya(t,e,a,n){let r;for(let i=0;i<e;i++)r=t[i*e+a],t[i*e+a]=t[i*e+n],t[i*e+n]=r}function Xe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:3;const e=Array(t);for(let a=0;a<t;++a)e[a]=0;return e}const Mv=()=>Math.PI;function qe(t){return t/180*Math.PI}function ma(t){return t*180/Math.PI}const{round:xa,floor:ws,ceil:Rv,min:Lv,max:kv}=Math;function Fv(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=1/0;for(let r=e,i=t.length;r<i;r+=a)t[r]<n&&(n=t[r]);return n}function Av(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=-1/0;for(let r=e,i=t.length;r<i;r+=a)n<t[r]&&(n=t[r]);return n}function Vv(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,n=1/0,r=-1/0;for(let i=e,s=t.length;i<s;i+=a)t[i]<n&&(n=t[i]),r<t[i]&&(r=t[i]);return[n,r]}const Bv=da("ceilLog2"),Uv=da("factorial");function Bt(t){let e=1;for(;e<t;)e*=2;return e}function Sa(t){return t===Bt(t)}function Gv(t,e){let a=1;for(let n=1;n<=e;++n)a*=(t-n+1)/n;return Math.floor(a)}function Iv(t,e){if(t<e)return 0;const a=Xe(e);for(let n=0;n<e;++n)a[n]=n;return a}function Pv(t,e,a){let n=0;for(let r=e-1;r>=0;--r)if(a[r]<t-e+r){let i=a[r]+1;for(;r<e;)a[r++]=i++;n=1;break}return n}function zv(t){Qc(`${t}`,{global:!0}),tl=t}function jv(){return tl}function Ei(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const a=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:1)-t;return t+a*Math.random()}const Wv=da("gaussian");function Ca(t,e,a){return a[0]=t[0]+e[0],a[1]=t[1]+e[1],a[2]=t[2]+e[2],a}function ht(t,e,a){return a[0]=t[0]-e[0],a[1]=t[1]-e[1],a[2]=t[2]-e[2],a}function _s(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t}function rl(t,e){return t[0]*=e,t[1]*=e,t}function Es(t,e,a,n){return n[0]=t[0]+e[0]*a,n[1]=t[1]+e[1]*a,n[2]=t[2]+e[2]*a,n}function $v(t,e,a,n){return n[0]=t[0]+e[0]*a,n[1]=t[1]+e[1]*a,n}function we(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Hv(t,e,a){a[0]=t[0]*e[0],a[1]=t[0]*e[1],a[2]=t[0]*e[2],a[3]=t[1]*e[0],a[4]=t[1]*e[1],a[5]=t[1]*e[2],a[6]=t[2]*e[0],a[7]=t[2]*e[1],a[8]=t[2]*e[2]}function ut(t,e,a){const n=t[1]*e[2]-t[2]*e[1],r=t[2]*e[0]-t[0]*e[2],i=t[0]*e[1]-t[1]*e[0];return a[0]=n,a[1]=r,a[2]=i,a}function kt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;switch(e){case 1:return Math.abs(t);case 2:return Math.sqrt(t[0]*t[0]+t[1]*t[1]);case 3:return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);default:{let a=0;for(let n=0;n<e;n++)a+=t[n]*t[n];return Math.sqrt(a)}}}function nt(t){const e=kt(t);return e!==0&&(t[0]/=e,t[1]/=e,t[2]/=e),e}function Kv(t,e,a,n){const r=t[0]*t[0],i=t[1]*t[1],s=t[2]*t[2],u=Math.sqrt(r+i+s);let c,o,f;r>i&&r>s?(c=0,o=1,f=2):i>s?(c=1,o=2,f=0):(c=2,o=0,f=1);const l=t[c]/u,h=t[o]/u,p=t[f]/u,d=Math.sqrt(l*l+p*p);if(n!==0){const y=Math.sin(n),m=Math.cos(n);e&&(e[c]=(p*m-l*h*y)/d,e[o]=y*d,e[f]=(-(l*m)-h*p*y)/d),a&&(a[c]=(-(p*y)-l*h*m)/d,a[o]=m*d,a[f]=(l*y-h*p*m)/d)}else e&&(e[c]=p/d,e[o]=0,e[f]=-l/d),a&&(a[c]=-l*h/d,a[o]=d,a[f]=-h*p/d)}function Xv(t,e,a){const n=we(e,e);if(n===0)return a[0]=0,a[1]=0,a[2]=0,!1;const r=we(t,e)/n;for(let i=0;i<3;i++)a[i]=e[i];return _s(a,r),!0}function Ds(t,e){return t[0]*e[0]+t[1]*e[1]}function qv(t,e,a){const n=Ds(e,e);if(n===0)return a[0]=0,a[1]=0,!1;const r=Ds(t,e)/n;for(let i=0;i<2;i++)a[i]=e[i];return rl(a,r),!0}function Ft(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])+(t[2]-e[2])*(t[2]-e[2])}function Yv(t,e){const a=[0,0,0];return ut(t,e,a),Math.atan2(kt(a),we(t,e))}function Jv(t,e,a){const n=Math.abs(t-a);return 1/Math.sqrt(2*Math.PI*e)*Math.exp(-(n**2)/(2*e))}function Zv(t,e,a){const n=Math.abs(t-a);return Math.exp(-(n**2)/(2*e))}function Qv(t,e,a){a[0]=t[0]*e[0],a[1]=t[0]*e[1],a[2]=t[1]*e[0],a[3]=t[1]*e[1]}function al(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function il(t){const e=al(t);return e!==0&&(t[0]/=e,t[1]/=e),e}function rt(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return e.length===2?e[0][0]*e[1][1]-e[1][0]*e[0][1]:e.length===4?e[0]*e[3]-e[1]*e[2]:Number.NaN}function ey(t,e){let a,n,r;const i=[0,0,0];for(let s=0;s<3;s++)r=Math.abs(t[s*3]),(n=Math.abs(t[s*3+1]))>r&&(r=n),(n=Math.abs(t[s*3+2]))>r&&(r=n),i[s]=1/r;r=i[0]*Math.abs(t[0]),a=0,(n=i[1]*Math.abs(t[3]))>=r&&(r=n,a=1),(n=i[2]*Math.abs(t[6]))>=r&&(a=2),a!==0&&(va(t,3,a,0),i[a]=i[0]),e[0]=a,t[3]/=t[0],t[6]/=t[0],t[4]-=t[3]*t[1],t[7]-=t[6]*t[1],r=i[1]*Math.abs(t[4]),a=1,(n=i[2]*Math.abs(t[7]))>=r&&(a=2,va(t,3,1,2),i[2]=i[1]),e[1]=a,t[7]/=t[4],t[5]-=t[3]*t[2],t[8]-=t[6]*t[2]+t[7]*t[5],e[2]=2}function ty(t,e,a){let n=a[e[0]];a[e[0]]=a[0],a[0]=n,n=a[e[1]],a[e[1]]=a[1],a[1]=n-t[3]*a[0],n=a[e[2]],a[e[2]]=a[2],a[2]=n-t[6]*a[0]-t[7]*a[1],a[2]/=t[8],a[1]=(a[1]-t[5]*a[2])/t[4],a[0]=(a[0]-t[1]*a[1]-t[2]*a[2])/t[0]}function ny(t,e,a){const n=t[0],r=t[1],i=t[2],s=t[3],u=t[4],c=t[5],o=t[6],f=t[7],l=t[8],h=+rt(u,f,c,l),p=-rt(s,o,c,l),d=+rt(s,o,u,f),y=-rt(r,f,i,l),m=+rt(n,o,i,l),S=-rt(n,o,r,f),v=+rt(r,u,i,c),g=-rt(n,s,i,c),x=+rt(n,s,r,u),C=n*h+r*p+i*d,T=h*e[0]+y*e[1]+v*e[2],w=p*e[0]+m*e[1]+g*e[2],_=d*e[0]+S*e[1]+x*e[2];a[0]=T/C,a[1]=w/C,a[2]=_/C}function Di(t,e,a){const n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],r=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],i=t[6]*e[0]+t[7]*e[1]+t[8]*e[2];a[0]=n,a[1]=r,a[2]=i}function bs(t,e,a){const n=[...t],r=[...e];for(let i=0;i<3;i++)a[i]=n[0]*r[i]+n[1]*r[i+3]+n[2]*r[i+6],a[i+3]=n[3]*r[i]+n[4]*r[i+3]+n[5]*r[i+6],a[i+6]=n[6]*r[i]+n[7]*r[i+3]+n[8]*r[i+6]}function ry(t,e,a,n,r,i,s){n!==r&&el("Number of columns of A must match number of rows of B.");const u=[...t],c=[...e];for(let o=0;o<a;o++)for(let f=0;f<i;f++){s[o*i+f]=0;for(let l=0;l<n;l++)s[o*i+f]+=u[o*n+l]*c[f+i*l]}}function kr(t,e){let a;a=t[3],e[3]=t[1],e[1]=a,a=t[6],e[6]=t[2],e[2]=a,a=t[7],e[7]=t[5],e[5]=a,e[0]=t[0],e[4]=t[4],e[8]=t[8]}function ay(t,e){const a=t[0],n=t[1],r=t[2],i=t[3],s=t[4],u=t[5],c=t[6],o=t[7],f=t[8],l=+rt(s,o,u,f),h=-rt(i,c,u,f),p=+rt(i,c,s,o),d=-rt(n,o,r,f),y=+rt(a,c,r,f),m=-rt(a,c,n,o),S=+rt(n,s,r,u),v=-rt(a,i,r,u),g=+rt(a,i,n,s),x=a*l+n*h+r*p;x===0&&Yn("Matrix has 0 determinant"),e[0]=l/x,e[3]=h/x,e[6]=p/x,e[1]=d/x,e[4]=y/x,e[7]=m/x,e[2]=S/x,e[5]=v/x,e[8]=g/x}function bi(t){return t[0]*t[4]*t[8]+t[3]*t[7]*t[2]+t[6]*t[1]*t[5]-t[0]*t[7]*t[5]-t[3]*t[1]*t[8]-t[6]*t[4]*t[2]}function ol(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Cs;if(t.length!==e.length)return!1;function n(r,i){return Math.abs(r-e[i])<=a}return t.every(n)}const Ta=ol;function sl(t){for(let e=0;e<3;e++)t[e*3]=t[e*3+1]=t[e*3+2]=0,t[e*3+e]=1}function ul(t,e){for(let a=0;a<t;a++){for(let n=0;n<t;n++)e[a*t+n]=0;e[a*t+a]=1}return e}function iy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cs;return Ta(t,Ss,e)}function oy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cs;return Ta(t,Nv,e)}function cl(t,e){const a=t[0]*t[0],n=t[0]*t[1],r=t[0]*t[2],i=t[0]*t[3],s=t[1]*t[1],u=t[2]*t[2],c=t[3]*t[3],o=t[1]*t[2],f=t[1]*t[3],l=t[2]*t[3],h=s+u+c;let p=1/(a+h);const d=(a-h)*p;p*=2,e[0]=s*p+d,e[3]=(o+i)*p,e[6]=(f-r)*p,e[1]=(o-i)*p,e[4]=u*p+d,e[7]=(l+n)*p,e[2]=(f+r)*p,e[5]=(l-n)*p,e[8]=c*p+d}function Oi(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!`${t}`.includes("e"))return+`${Math.round(`${t}e+${e}`)}e-${e}`;const a=`${t}`.split("e");let n="";return+a[1]+e>0&&(n="+"),+`${Math.round(`${+a[0]}e${n}${+a[1]+e}`)}e-${e}`}function Os(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return e[0]=Oi(t[0],a),e[1]=Oi(t[1],a),e[2]=Oi(t[2],a),e}function wa(t,e,a,n){let r,i,s,u,c,o,f,l,h,p,d,y,m,S,v,g;const x=Xe(e),C=Xe(e),T=(_,E,D)=>{S=_[E],m=_[D],_[E]=S-y*(m+S*p),_[D]=m+y*(S-m*p)};for(ul(e,n),c=0;c<e;c++)x[c]=a[c]=t[c+c*e],C[c]=0;for(r=0;r<nl;r++){for(d=0,c=0;c<e-1;c++)for(u=c+1;u<e;u++)d+=Math.abs(t[c*e+u]);if(d===0)break;for(r<3?f=.2*d/(e*e):f=0,c=0;c<e-1;c++)for(u=c+1;u<e;u++)if(S=100*Math.abs(t[c*e+u]),r>3&&Math.abs(a[c])+S===Math.abs(a[c])&&Math.abs(a[u])+S===Math.abs(a[u]))t[c*e+u]=0;else if(Math.abs(t[c*e+u])>f){for(m=a[u]-a[c],Math.abs(m)+S===Math.abs(m)?h=t[c*e+u]/m:(l=.5*m/t[c*e+u],h=1/(Math.abs(l)+Math.sqrt(1+l*l)),l<0&&(h=-h)),v=1/Math.sqrt(1+h*h),y=h*v,p=y/(1+v),m=h*t[c*e+u],C[c]-=m,C[u]+=m,a[c]-=m,a[u]+=m,t[c*e+u]=0,i=0;i<=c-1;i++)T(t,i*e+c,i*e+u);for(i=c+1;i<=u-1;i++)T(t,c*e+i,i*e+u);for(i=u+1;i<e;i++)T(t,c*e+i,u*e+i);for(i=0;i<e;i++)T(n,i*e+c,i*e+u)}for(c=0;c<e;c++)x[c]+=C[c],a[c]=x[c],C[c]=0}if(r>=nl)return Yn("vtkMath::Jacobi: Error extracting eigenfunctions"),0;for(i=0;i<e-1;i++){for(s=i,g=a[s],r=i+1;r<e;r++)(a[r]>=g||Math.abs(a[r]-g)<Ts)&&(s=r,g=a[s]);s!==i&&(a[s]=a[i],a[i]=g,ya(n,e,i,s))}const w=(e>>1)+(e&1);for(o=0,r=0;r<e*e;r++)n[r]>=0&&o++;if(o<w)for(r=0;r<e;r++)n[r*e+i]*=-1;return 1}function ll(t,e){const a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];a[0]=t[0]+t[4]+t[8],a[5]=t[0]-t[4]-t[8],a[10]=-t[0]+t[4]-t[8],a[15]=-t[0]-t[4]+t[8],a[1]=a[4]=t[7]-t[5],a[2]=a[8]=t[2]-t[6],a[3]=a[12]=t[3]-t[1],a[6]=a[9]=t[3]+t[1],a[7]=a[13]=t[2]+t[6],a[11]=a[14]=t[7]+t[5];const n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=[0,0,0,0],i=[...a];wa(i,4,r,n),e[0]=n[0],e[1]=n[4],e[2]=n[8],e[3]=n[12]}function sy(t,e,a){const n=t[0]*e[0],r=t[0]*e[1],i=t[0]*e[2],s=t[0]*e[3],u=t[1]*e[0],c=t[1]*e[1],o=t[1]*e[2],f=t[1]*e[3],l=t[2]*e[0],h=t[2]*e[1],p=t[2]*e[2],d=t[2]*e[3],y=t[3]*e[0],m=t[3]*e[1],S=t[3]*e[2],v=t[3]*e[3];a[0]=n-c-p-v,a[1]=r+u+d-S,a[2]=i-f+l+m,a[3]=s+o-h+y}function fl(t,e){for(let h=0;h<9;h++)e[h]=t[h];const a=Xe(3),n=Xe(3);let r;for(let h=0;h<3;h++){const p=Math.abs(e[h*3]),d=Math.abs(e[h*3+1]),y=Math.abs(e[h*3+2]);r=d>p?d:p,r=y>r?y:r,a[h]=1,r!==0&&(a[h]/=r)}const i=Math.abs(e[0])*a[0],s=Math.abs(e[3])*a[1],u=Math.abs(e[6])*a[2];n[0]=0,r=i,s>=r&&(r=s,n[0]=1),u>=r&&(n[0]=2),n[0]!==0&&(ya(e,3,n[0],0),a[n[0]]=a[0]);const c=Math.abs(e[4])*a[1],o=Math.abs(e[7])*a[2];n[1]=1,r=c,o>=r&&(n[1]=2,ya(e,3,1,2)),n[2]=2;let f=0;if(bi(e)<0){f=1;for(let h=0;h<9;h++)e[h]=-e[h]}const l=Xe(4);if(ll(e,l),cl(l,e),f)for(let h=0;h<9;h++)e[h]=-e[h];n[1]!==1&&ya(e,3,n[1],1),n[0]!==0&&ya(e,3,n[0],0)}function hl(t,e,a){let n,r,i,s,u,c;const o=[...t];if(wa(o,3,e,a),e[0]===e[1]&&e[0]===e[2]){sl(a);return}for(kr(a,a),n=0;n<3;n++)if(e[(n+1)%3]===e[(n+2)%3]){for(c=Math.abs(a[n*3]),s=0,r=1;r<3;r++)c<(u=Math.abs(a[n*3+r]))&&(c=u,s=r);s!==n&&(u=e[s],e[s]=e[n],e[n]=u,va(a,3,n,s)),a[s*3+s]<0&&(a[s*3]=-a[s*3],a[s*3+1]=-a[s*3+1],a[s*3+2]=-a[s*3+2]),r=(s+1)%3,i=(s+2)%3,a[r*3]=0,a[r*3+1]=0,a[r*3+2]=0,a[r*3+r]=1;const f=ut([a[s*3],a[s*3+1],a[s*3+2]],[a[r*3],a[r*3+1],a[r*3+2]],[]);nt(f);const l=ut(f,[a[s*3],a[s*3+1],a[s*3+2]],[]);for(let h=0;h<3;h++)a[i*3+h]=f[h],a[r*3+h]=l[h];kr(a,a);return}for(c=Math.abs(a[0]),s=0,n=1;n<3;n++)c<(u=Math.abs(a[n*3]))&&(c=u,s=n);if(s!==0){const f=e[s];e[s]=e[0],e[0]=f,va(a,3,s,0)}if(Math.abs(a[4])<Math.abs(a[7])){const f=e[2];e[2]=e[1],e[1]=f,va(a,3,1,2)}for(n=0;n<2;n++)a[n*3+n]<0&&(a[n*3]=-a[n*3],a[n*3+1]=-a[n*3+1],a[n*3+2]=-a[n*3+2]);bi(a)<0&&(a[6]=-a[6],a[7]=-a[7],a[8]=-a[8]),kr(a,a)}function uy(t,e,a,n){let r;const i=[...t],s=bi(i);if(s<0)for(r=0;r<9;r++)i[r]=-i[r];fl(i,e),kr(i,i),bs(i,e,n),hl(n,a,n),bs(e,n,e),kr(n,n),s<0&&(a[0]=-a[0],a[1]=-a[1],a[2]=-a[2])}function Ns(t,e,a){let n,r,i,s,u=0,c,o,f;const l=Xe(a);for(n=0;n<a;n++){for(s=0,r=0;r<a;r++)(f=Math.abs(t[n*a+r]))>s&&(s=f);if(s===0)return Yn("Unable to factor linear system"),0;l[n]=1/s}for(r=0;r<a;r++){for(n=0;n<r;n++){for(c=t[n*a+r],i=0;i<n;i++)c-=t[n*a+i]*t[i*a+r];t[n*a+r]=c}for(s=0,n=r;n<a;n++){for(c=t[n*a+r],i=0;i<r;i++)c-=t[n*a+i]*t[i*a+r];t[n*a+r]=c,(o=l[n]*Math.abs(c))>=s&&(s=o,u=n)}if(r!==u){for(i=0;i<a;i++)o=t[u*a+i],t[u*a+i]=t[r*a+i],t[r*a+i]=o;l[u]=l[r]}if(e[r]=u,Math.abs(t[r*a+r])<=Ts)return Yn("Unable to factor linear system"),0;if(r!==a-1)for(o=1/t[r*a+r],n=r+1;n<a;n++)t[n*a+r]*=o}return 1}function Ms(t,e,a,n){let r,i,s,u,c;for(s=-1,r=0;r<n;r++){if(u=e[r],c=a[u],a[u]=a[r],s>=0)for(i=s;i<=r-1;i++)c-=t[r*n+i]*a[i];else c!==0&&(s=r);a[r]=c}for(r=n-1;r>=0;r--){for(c=a[r],i=r+1;i<n;i++)c-=t[r*n+i]*a[i];a[r]=c/t[r*n+r]}}function pl(t,e,a){if(a===2){const r=Xe(2),i=rt(t[0],t[1],t[2],t[3]);return i===0?0:(r[0]=(t[3]*e[0]-t[1]*e[1])/i,r[1]=(-(t[2]*e[0])+t[0]*e[1])/i,e[0]=r[0],e[1]=r[1],1)}if(a===1)return t[0]===0?0:(e[0]/=t[0],1);const n=Xe(a);return Ns(t,n,a)===0?0:(Ms(t,n,e,a),1)}function gl(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;const i=n||Xe(a),s=r||Xe(a);if(Ns(t,i,a)===0)return null;for(let u=0;u<a;u++){for(let c=0;c<a;c++)s[c]=0;s[u]=1,Ms(t,i,s,a);for(let c=0;c<a;c++)e[c*a+u]=s[c]}return e}function cy(t,e){let a=+Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let r=0;r<e;r++)for(let i=r;i<e;i++)Math.abs(t[r*e+i])>n&&(n=Math.abs(t[r*e+i]));for(let r=0;r<e;r++)Math.abs(t[r*e+r])<a&&(a=Math.abs(t[r*e+r]));return a===0?Number.MAX_VALUE:n/a}function ly(t,e,a){return wa(t,3,e,a)}function Rs(t,e,a,n){if(t<a)return Yn("Insufficient number of samples. Underdetermined."),0;let r,i,s;const u=Xe(a*a),c=Xe(a),o=Xe(a*a);for(s=0;s<t;s++)for(r=0;r<a;r++)for(i=r;i<a;i++)u[r*a+i]+=e[s*a+r]*e[s*a+i];for(r=0;r<a;r++)for(i=0;i<r;i++)u[r*a+i]=u[i*a+r];for(wa(u,a,c,o),r=0;r<a;r++)n[r]=o[r*a+a-1];return 1}function fy(t,e,a,n,r,i){let s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!0;if(t<a||t<r)return Yn("Insufficient number of samples. Underdetermined."),0;const u=Xe(r);let c=1,o,f=0,l,h,p,d=0;if(s){for(h=0;h<r;h++)u[h]=1;for(l=0;l<t;l++)for(h=0;h<r;h++)Math.abs(n[l*r+h])>Ts&&(c=0,u[h]=0);if(c&&r===1)return Yn("Detected homogeneous system (Y=0), calling SolveHomogeneousLeastSquares()"),Rs(t,e,a,i);if(c)d=1;else for(h=0;h<r;h++)u[h]&&(d=1)}d&&(o=Xe(a),f=Rs(t,e,a,o));const y=Xe(a*a),m=Xe(a*a),S=Xe(a*r);for(p=0;p<t;p++)for(l=0;l<a;l++){for(h=l;h<a;h++)y[l*a+h]+=e[p*a+l]*e[p*a+h];for(h=0;h<r;h++)S[l*r+h]+=e[p*a+l]*n[p*r+h]}for(l=0;l<a;l++)for(h=0;h<l;h++)y[l*a+h]=y[h*a+l];const v=gl(y,m,a);if(v)for(l=0;l<a;l++)for(h=0;h<r;h++)for(i[l*r+h]=0,p=0;p<a;p++)i[l*r+h]+=m[l*a+p]*S[p*r+h];if(d){for(h=0;h<r;h++)if(u[h])for(l=0;l<a;l++)i[l*r+h]=o[l*r]}return d?f&&v:v}function hy(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,.5,1];switch(t.length){case 3:return e[0]=parseInt(t[0],16)*17/255,e[1]=parseInt(t[1],16)*17/255,e[2]=parseInt(t[2],16)*17/255,e;case 4:return e[0]=parseInt(t[1],16)*17/255,e[1]=parseInt(t[2],16)*17/255,e[2]=parseInt(t[3],16)*17/255,e;case 6:return e[0]=parseInt(t.substr(0,2),16)/255,e[1]=parseInt(t.substr(2,2),16)/255,e[2]=parseInt(t.substr(4,2),16)/255,e;case 7:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e;case 9:return e[0]=parseInt(t.substr(1,2),16)/255,e[1]=parseInt(t.substr(3,2),16)/255,e[2]=parseInt(t.substr(5,2),16)/255,e[3]=parseInt(t.substr(7,2),16)/255,e;default:return e}}function _a(t,e){let a,n;const[r,i,s]=t,u=1/3,c=1/6,o=2/3;let f=r,l=r;i>f?f=i:i<l&&(l=i),s>f?f=s:s<l&&(l=s);const h=f;h>0?n=(f-l)/f:n=0,n>0?(r===f?a=c*(i-s)/(f-l):i===f?a=u+c*(s-r)/(f-l):a=o+c*(r-i)/(f-l),a<0&&(a+=1)):a=0,e[0]=a,e[1]=n,e[2]=h}function Jn(t,e){const[a,n,r]=t,i=1/3,s=1/6,u=2/3,c=5/6;let o,f,l;a>s&&a<=i?(f=1,o=(i-a)/s,l=0):a>i&&a<=.5?(f=1,l=(a-i)/s,o=0):a>.5&&a<=u?(l=1,f=(u-a)/s,o=0):a>u&&a<=c?(l=1,o=(a-u)/s,f=0):a>c&&a<=1?(o=1,l=(1-a)/s,f=0):(o=1,f=a/s,l=0),o=n*o+(1-n),f=n*f+(1-n),l=n*l+(1-n),o*=r,f*=r,l*=r,e[0]=o,e[1]=f,e[2]=l}function dl(t,e){const[a,n,r]=t;let i=(a+16)/116,s=n/500+i,u=i-r/200;i**3>.008856?i**=3:i=(i-16/116)/7.787,s**3>.008856?s**=3:s=(s-16/116)/7.787,u**3>.008856?u**=3:u=(u-16/116)/7.787;const c=.9505,o=1,f=1.089;e[0]=c*s,e[1]=o*i,e[2]=f*u}function vl(t,e){const[a,n,r]=t,i=.9505,s=1,u=1.089;let c=a/i,o=n/s,f=r/u;c>.008856?c**=1/3:c=7.787*c+16/116,o>.008856?o**=1/3:o=7.787*o+16/116,f>.008856?f**=1/3:f=7.787*f+16/116,e[0]=116*o-16,e[1]=500*(c-o),e[2]=200*(o-f)}function yl(t,e){const[a,n,r]=t;let i=a*3.2406+n*-1.5372+r*-.4986,s=a*-.9689+n*1.8758+r*.0415,u=a*.0557+n*-.204+r*1.057;i>.0031308?i=1.055*i**(1/2.4)-.055:i*=12.92,s>.0031308?s=1.055*s**(1/2.4)-.055:s*=12.92,u>.0031308?u=1.055*u**(1/2.4)-.055:u*=12.92;let c=i;c<s&&(c=s),c<u&&(c=u),c>1&&(i/=c,s/=c,u/=c),i<0&&(i=0),s<0&&(s=0),u<0&&(u=0),e[0]=i,e[1]=s,e[2]=u}function ml(t,e){let[a,n,r]=t;a>.04045?a=((a+.055)/1.055)**2.4:a/=12.92,n>.04045?n=((n+.055)/1.055)**2.4:n/=12.92,r>.04045?r=((r+.055)/1.055)**2.4:r/=12.92,e[0]=a*.4124+n*.3576+r*.1805,e[1]=a*.2126+n*.7152+r*.0722,e[2]=a*.0193+n*.1192+r*.9505}function Zn(t,e){const a=[0,0,0];ml(t,a),vl(a,e)}function Ni(t,e){const a=[0,0,0];dl(t,a),yl(a,e)}function Fr(t){return t[0]=1,t[1]=-1,t[2]=1,t[3]=-1,t[4]=1,t[5]=-1,t}function Mi(t){return!(t[1]-t[0]<0)}function py(t,e,a){return a[0]=Math.min(t[0],e[0]),a[1]=Math.max(t[0],e[0]),a[2]=Math.min(t[1],e[1]),a[3]=Math.max(t[1],e[1]),a[4]=Math.min(t[2],e[2]),a[5]=Math.max(t[2],e[2]),a}function Ht(t,e,a){return t<e?e:t>a?a:t}function Ls(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[0,0,0];return n[0]=Ht(t[0],e[0],a[0]),n[1]=Ht(t[1],e[1],a[1]),n[2]=Ht(t[2],e[2],a[2]),n}function gy(t,e){let a=0;return e[0]!==e[1]&&(t<e[0]?a=e[0]:t>e[1]?a=e[1]:a=t,a=(a-e[0])/(e[1]-e[0])),a}const dy=da("GetScalarTypeFittingRange"),vy=da("GetAdjustedScalarRange");function yy(t,e){if(!t||!e)return 0;for(let a=0;a<6;a+=2)if(t[a]<e[a]||t[a]>e[a+1]||t[a+1]<e[a]||t[a+1]>e[a+1])return 0;return 1}function my(t,e,a){if(!t||!e)return 0;for(let n=0;n<6;n+=2)if(t[n]+a[n/2]<e[n]||t[n]-a[n/2]>e[n+1]||t[n+1]+a[n/2]<e[n]||t[n+1]-a[n/2]>e[n+1])return 0;return 1}function xy(t,e,a){if(!t||!e||!a)return 0;for(let n=0;n<3;n++)if(t[n]+a[n]<e[2*n]||t[n]-a[n]>e[2*n+1])return 0;return 1}function Sy(t,e,a,n){const r=Xe(3),i=Xe(3),s=Xe(3),u=Xe(3),c=Xe(3),o=Xe(3);for(let x=0;x<3;++x)r[x]=t[x]-e[x],i[x]=e[x]-a[x],s[x]=a[x]-t[x],u[x]=-r[x],c[x]=-i[x],o[x]=-s[x];const f=kt(u),l=kt(c),h=kt(s),p=Xe(3);ut(r,i,p);const d=kt(p),y=f*l*h/(2*d),m=2*d*d,S=l*l*we(r,o)/m,v=h*h*we(u,i)/m,g=f*f*we(s,c)/m;for(let x=0;x<3;++x)n[x]=S*t[x]+v*e[x]+g*a[x];return y}const Cy=1/0,Ty=-1/0,xl=t=>!Number.isFinite(t),{isFinite:wy,isNaN:ks}=Number,Ri=ks;function fn(){return[].concat([Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE])}function _y(t){let e=-1,a=-1;for(let n=0;n<t.length;n++){const r=Math.abs(t[n]);r>e&&(a=n,e=r)}return a}function Sl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;const a=new Array(e),n=new Array(e);for(let i=0;i<e;++i)a[i]=i,n[i]=i;for(let i=e-1;i>0;i--){let s=-1/0,u=0,c=0;for(let o=0;o<=i;++o){const f=a[o];for(let l=0;l<=i;++l){const h=n[l],p=Math.abs(t[f+e*h]);p>s&&(s=p,u=o,c=l)}}[a[i],a[u]]=[a[u],a[i]],[n[i],n[c]]=[n[c],n[i]]}const r=new Array(e*e).fill(0);for(let i=0;i<e;++i){const s=a[i]+e*n[i];r[s]=t[s]<0?-1:1}return r}function Cl(t){const e=Math.floor(t*255);return e>15?e.toString(16):`0${e.toString(16)}`}function Ey(t){return`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#"}${t.map(Cl).join("")}`}function Li(t){return Math.round(t*255)}function Dy(t){return t.length===3?`rgb(${t.map(Li).join(", ")})`:`rgba(${Li(t[0]||0)}, ${Li(t[1]||0)}, ${Li(t[2]||0)}, ${t[3]||0})`}var Ea={Pi:Mv,radiansFromDegrees:qe,degreesFromRadians:ma,round:xa,floor:ws,ceil:Rv,ceilLog2:Bv,min:Lv,max:kv,arrayMin:Fv,arrayMax:Av,arrayRange:Vv,isPowerOfTwo:Sa,nearestPowerOfTwo:Bt,factorial:Uv,binomial:Gv,beginCombination:Iv,nextCombination:Pv,randomSeed:zv,getSeed:jv,random:Ei,gaussian:Wv,add:Ca,subtract:ht,multiplyScalar:_s,multiplyScalar2D:rl,multiplyAccumulate:Es,multiplyAccumulate2D:$v,dot:we,outer:Hv,cross:ut,norm:kt,normalize:nt,perpendiculars:Kv,projectVector:Xv,projectVector2D:qv,distance2BetweenPoints:Ft,angleBetweenVectors:Yv,gaussianAmplitude:Jv,gaussianWeight:Zv,dot2D:Ds,outer2D:Qv,norm2D:al,normalize2D:il,determinant2x2:rt,LUFactor3x3:ey,LUSolve3x3:ty,linearSolve3x3:ny,multiply3x3_vect3:Di,multiply3x3_mat3:bs,multiplyMatrix:ry,transpose3x3:kr,invert3x3:ay,identity3x3:sl,identity:ul,isIdentity:iy,isIdentity3x3:oy,determinant3x3:bi,quaternionToMatrix3x3:cl,areEquals:ol,areMatricesEqual:Ta,roundNumber:Oi,roundVector:Os,matrix3x3ToQuaternion:ll,multiplyQuaternion:sy,orthogonalize3x3:fl,diagonalize3x3:hl,singularValueDecomposition3x3:uy,solveLinearSystem:pl,invertMatrix:gl,luFactorLinearSystem:Ns,luSolveLinearSystem:Ms,estimateMatrixCondition:cy,jacobi:ly,jacobiN:wa,solveHomogeneousLeastSquares:Rs,solveLeastSquares:fy,hex2float:hy,rgb2hsv:_a,hsv2rgb:Jn,lab2xyz:dl,xyz2lab:vl,xyz2rgb:yl,rgb2xyz:ml,rgb2lab:Zn,lab2rgb:Ni,uninitializeBounds:Fr,areBoundsInitialized:Mi,computeBoundsFromPoints:py,clampValue:Ht,clampVector:Ls,clampAndNormalizeValue:gy,getScalarTypeFittingRange:dy,getAdjustedScalarRange:vy,extentIsWithinOtherExtent:yy,boundsIsWithinOtherBounds:my,pointIsWithinBounds:xy,solve3PointCircle:Sy,inf:Cy,negInf:Ty,isInf:xl,isNan:ks,isNaN:ks,isFinite:wy,createUninitializedBounds:fn,getMajorAxisIndex:_y,getSparseOrthogonalMatrix:Sl,floatToHex2:Cl,floatRGB2HexCode:Ey,float2CssRGBA:Dy};const Fs=1e-6,Tl="coincide",wl="disjoint";function by(t,e,a){return t[0]*(a[0]-e[0])+t[1]*(a[1]-e[1])+t[2]*(a[2]-e[2])}function _l(t,e,a){const n=a[0]*(t[0]-e[0])+a[1]*(t[1]-e[1])+a[2]*(t[2]-e[2]);return Math.abs(n)}function El(t,e,a,n){const r=[];ht(t,e,r);const i=we(a,r);n[0]=t[0]-i*a[0],n[1]=t[1]-i*a[1],n[2]=t[2]-i*a[2]}function Dl(t,e,a){const n=we(t,e);let r=we(e,e);return r===0&&(r=1),a[0]=t[0]-n*e[0]/r,a[1]=t[1]-n*e[1]/r,a[2]=t[2]-n*e[2]/r,a}function bl(t,e,a,n){const r=[];ht(t,e,r);const i=we(a,r),s=we(a,a);s!==0?(n[0]=t[0]-i*a[0]/s,n[1]=t[1]-i*a[1]/s,n[2]=t[2]-i*a[2]/s):(n[0]=t[0],n[1]=t[1],n[2]=t[2])}function Ol(t,e,a,n){const r={intersection:!1,betweenPoints:!1,t:Number.MAX_VALUE,x:[]},i=[],s=[];ht(e,t,i),ht(a,t,s);const u=we(n,s),c=we(n,i);let o,f;return c<0?o=-c:o=c,u<0?f=-u*Fs:f=u*Fs,o<=f||(r.t=u/c,r.x[0]=t[0]+r.t*i[0],r.x[1]=t[1]+r.t*i[1],r.x[2]=t[2]+r.t*i[2],r.intersection=!0,r.betweenPoints=r.t>=0&&r.t<=1),r}function Nl(t,e,a,n){const r={intersection:!1,l0:[],l1:[],error:null},i=[];ut(e,n,i);const s=i.map(l=>Math.abs(l));if(s[0]+s[1]+s[2]<Fs){const l=[];return ht(t,a,l),we(e,l)===0?r.error=Tl:r.error=wl,r}let u;s[0]>s[1]&&s[0]>s[2]?u="x":s[1]>s[2]?u="y":u="z";const c=[],o=-we(e,t),f=-we(n,a);switch(u){case"x":c[0]=0,c[1]=(f*e[2]-o*n[2])/i[0],c[2]=(o*n[1]-f*e[1])/i[0];break;case"y":c[0]=(o*n[2]-f*e[2])/i[1],c[1]=0,c[2]=(f*e[0]-o*n[0])/i[1];break;case"z":c[0]=(f*e[1]-o*n[1])/i[2],c[1]=(o*n[0]-f*e[0])/i[2],c[2]=0;break}return r.l0=c,Ca(c,i,r.l1),r.intersection=!0,r}const Oy={evaluate:by,distanceToPlane:_l,projectPoint:El,projectVector:Dl,generalizedProjectPoint:bl,intersectWithLine:Ol,intersectWithPlane:Nl,DISJOINT:wl,COINCIDE:Tl};function Ny(t,e){e.classHierarchy.push("vtkPlane"),t.distanceToPlane=a=>_l(a,e.origin,e.normal),t.projectPoint=(a,n)=>{El(a,e.origin,e.normal,n)},t.projectVector=(a,n)=>Dl(a,e.normal,n),t.push=a=>{if(a!==0)for(let n=0;n<3;n++)e.origin[n]+=a*e.normal[n]},t.generalizedProjectPoint=(a,n)=>{bl(a,e.origin,e.normal,n)},t.evaluateFunction=(a,n,r)=>Array.isArray(a)?e.normal[0]*(a[0]-e.origin[0])+e.normal[1]*(a[1]-e.origin[1])+e.normal[2]*(a[2]-e.origin[2]):e.normal[0]*(a-e.origin[0])+e.normal[1]*(n-e.origin[1])+e.normal[2]*(r-e.origin[2]),t.evaluateGradient=a=>[e.normal[0],e.normal[1],e.normal[2]],t.intersectWithLine=(a,n)=>Ol(a,n,e.origin,e.normal),t.intersectWithPlane=(a,n)=>Nl(a,n,e.origin,e.normal)}const My={normal:[0,0,1],origin:[0,0,0]};function Ml(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,My,a),k.obj(t,e),k.setGetArray(t,e,["normal","origin"],3),Ny(t,e)}var Mn={newInstance:k.newInstance(Ml,"vtkPlane"),extend:Ml,...Oy};const ki=[Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE];function Rl(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function hn(t){return(t==null?void 0:t.length)>=6&&t[0]<=t[1]&&t[2]<=t[3]&&t[4]<=t[5]}function As(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Vs(t){return As(t,ki)}function Fi(t,e,a,n){const[r,i,s,u,c,o]=t;return t[0]=r<e?r:e,t[1]=i>e?i:e,t[2]=s<a?s:a,t[3]=u>a?u:a,t[4]=c<n?c:n,t[5]=o>n?o:n,t}function Bs(t,e){if(e.length===0)return t;if(Array.isArray(e[0]))for(let a=0;a<e.length;++a)Fi(t,...e[a]);else for(let a=0;a<e.length;a+=3)Fi(t,...e.slice(a,a+3));return t}function Ll(t,e,a,n,r,i,s){const[u,c,o,f,l,h]=t;return s===void 0?(t[0]=Math.min(e[0],u),t[1]=Math.max(e[1],c),t[2]=Math.min(e[2],o),t[3]=Math.max(e[3],f),t[4]=Math.min(e[4],l),t[5]=Math.max(e[5],h)):(t[0]=Math.min(e,u),t[1]=Math.max(a,c),t[2]=Math.min(n,o),t[3]=Math.max(r,f),t[4]=Math.min(i,l),t[5]=Math.max(s,h)),t}function kl(t,e,a,n){const[r,i,s,u,c,o]=t;return t[0]=e,t[1]=e>i?e:i,t[2]=a,t[3]=a>u?a:u,t[4]=n,t[5]=n>o?n:o,r!==e||s!==a||c!==n}function Fl(t,e,a,n){const[r,i,s,u,c,o]=t;return t[0]=e<r?e:r,t[1]=e,t[2]=a<s?a:s,t[3]=a,t[4]=n<c?n:c,t[5]=n,i!==e||u!==a||o!==n}function Al(t,e){return t[0]-=e,t[1]+=e,t[2]-=e,t[3]+=e,t[4]-=e,t[5]+=e,t}function Us(t,e,a,n){return hn(t)?(e>=0?(t[0]*=e,t[1]*=e):(t[0]=e*t[1],t[1]=e*t[0]),a>=0?(t[2]*=a,t[3]*=a):(t[2]=a*t[3],t[3]=a*t[2]),n>=0?(t[4]*=n,t[5]*=n):(t[4]=n*t[5],t[5]=n*t[4]),!0):!1}function Gs(t){return[.5*(t[0]+t[1]),.5*(t[2]+t[3]),.5*(t[4]+t[5])]}function Ry(t,e,a,n){if(!hn(t))return!1;const r=Gs(t);return t[0]-=r[0],t[1]-=r[0],t[2]-=r[1],t[3]-=r[1],t[4]-=r[2],t[5]-=r[2],Us(t,e,a,n),t[0]+=r[0],t[1]+=r[0],t[2]+=r[1],t[3]+=r[1],t[4]+=r[2],t[5]+=r[2],!0}function Da(t,e){return t[e*2+1]-t[e*2]}function Ai(t){return[Da(t,0),Da(t,1),Da(t,2)]}function Vl(t){return t.slice(0,2)}function Bl(t){return t.slice(2,4)}function Ul(t){return t.slice(4,6)}function Gl(t){const e=Ai(t);return e[0]>e[1]?e[0]>e[2]?e[0]:e[2]:e[1]>e[2]?e[1]:e[2]}function Il(t){if(hn(t)){const e=Ai(t);return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])}return null}function Is(t){return[t[0],t[2],t[4]]}function Ps(t){return[t[1],t[3],t[5]]}function Vi(t,e){return t<=0&&e>=0||t>=0&&e<=0}function zs(t,e){let a=0;for(let n=0;n<2;n++)for(let r=2;r<4;r++)for(let i=4;i<6;i++)e[a++]=[t[n],t[r],t[i]];return e}function Pl(t,e,a){return e[0]=t[0],e[1]=t[2],e[2]=t[4],a[0]=t[1],a[1]=t[3],a[2]=t[5],e}function zl(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];const n=zs(t,[]);for(let r=0;r<n.length;++r)Te(n[r],n[r],e);return Vs(a),Bs(a,n)}function jl(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e[0]=.5*(t[1]-t[0]),e[1]=.5*(t[3]-t[2]),e[2]=.5*(t[5]-t[4]),e}function Wl(t,e,a,n){const r=[].concat(ki),i=t.getData();for(let s=0;s<i.length;s+=3){const u=[i[s],i[s+1],i[s+2]],c=we(u,e);r[0]=Math.min(c,r[0]),r[1]=Math.max(c,r[1]);const o=we(u,a);r[2]=Math.min(o,r[2]),r[3]=Math.max(o,r[3]);const f=we(u,n);r[4]=Math.min(f,r[4]),r[5]=Math.max(f,r[5])}return r}function $l(t,e,a,n,r){let i=!0;const s=[];let u=0;const c=[],o=[0,0,0],f=0,l=1,h=2;for(let p=0;p<3;p++)e[p]<t[2*p]?(s[p]=l,o[p]=t[2*p],i=!1):e[p]>t[2*p+1]?(s[p]=f,o[p]=t[2*p+1],i=!1):s[p]=h;if(i)return n[0]=e[0],n[1]=e[1],n[2]=e[2],r[0]=0,1;for(let p=0;p<3;p++)s[p]!==h&&a[p]!==0?c[p]=(o[p]-e[p])/a[p]:c[p]=-1;for(let p=0;p<3;p++)c[u]<c[p]&&(u=p);if(c[u]>1||c[u]<0)return 0;r[0]=c[u];for(let p=0;p<3;p++)if(u!==p){if(n[p]=e[p]+c[u]*a[p],n[p]<t[2*p]||n[p]>t[2*p+1])return 0}else n[p]=o[p];return 1}function Hl(t,e,a){const n=[];let r=0,i=1,s=1;for(let u=4;u<=5;++u){n[2]=t[u];for(let c=2;c<=3;++c){n[1]=t[c];for(let o=0;o<=1;++o)if(n[0]=t[o],r=Mn.evaluate(a,e,n),s&&(i=r>=0?1:-1,s=0),r===0||i>0&&r<0||i<0&&r>0)return 1}}return 0}function Kl(t,e){if(!(hn(t)&&hn(e)))return!1;const a=[0,0,0,0,0,0];let n;for(let r=0;r<3;r++)if(n=!1,e[r*2]>=t[r*2]&&e[r*2]<=t[r*2+1]?(n=!0,a[r*2]=e[r*2]):t[r*2]>=e[r*2]&&t[r*2]<=e[r*2+1]&&(n=!0,a[r*2]=t[r*2]),e[r*2+1]>=t[r*2]&&e[r*2+1]<=t[r*2+1]?(n=!0,a[r*2+1]=e[2*r+1]):t[r*2+1]>=e[r*2]&&t[r*2+1]<=e[r*2+1]&&(n=!0,a[r*2+1]=t[r*2+1]),!n)return!1;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],!0}function Bi(t,e){if(!(hn(t)&&hn(e)))return!1;for(let a=0;a<3;a++)if(!(e[a*2]>=t[a*2]&&e[a*2]<=t[a*2+1])&&!(t[a*2]>=e[a*2]&&t[a*2]<=e[a*2+1])&&!(e[a*2+1]>=t[a*2]&&e[a*2+1]<=t[a*2+1])&&!(t[a*2+1]>=e[a*2]&&t[a*2+1]<=e[a*2+1]))return!1;return!0}function Ui(t,e,a,n){return!(e<t[0]||e>t[1]||a<t[2]||a>t[3]||n<t[4]||n>t[5])}function Ly(t,e){return!(!Bi(t,e)||!Ui(t,...Is(e))||!Ui(t,...Ps(e)))}function Xl(t,e,a){const n=[[0,1,2,3,4,5,6,7],[0,1,4,5,2,3,6,7],[0,2,4,6,1,3,5,7]],r=[0,0,0,0,0,0,0,0];let i=0;for(let l=0;l<2;l++)for(let h=2;h<4;h++)for(let p=4;p<6;p++){const d=[t[l],t[h],t[p]];r[i++]=Mn.evaluate(a,e,d)}let s=2;for(;s--&&!(Vi(r[n[s][0]],r[n[s][4]])&&Vi(r[n[s][1]],r[n[s][5]])&&Vi(r[n[s][2]],r[n[s][6]])&&Vi(r[n[s][3]],r[n[s][7]])););if(s<0)return!1;const u=Math.sign(a[s]),c=Math.abs((t[s*2+1]-t[s*2])*a[s]);let o=u>0?1:0;for(let l=0;l<4;l++){if(c===0)continue;const h=Math.abs(r[n[s][l]])/c;u>0&&h<o&&(o=h),u<0&&h>o&&(o=h)}const f=(1-o)*t[s*2]+o*t[s*2+1];return u>0?t[s*2]=f:t[s*2+1]=f,!0}class ky{constructor(e){this.bounds=e,this.bounds||(this.bounds=new Float64Array(ki))}getBounds(){return this.bounds}equals(e){return Rl(this.bounds,e)}isValid(){return hn(this.bounds)}setBounds(e){return As(this.bounds,e)}reset(){return Vs(this.bounds)}addPoint(){for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];return Fi(this.bounds,...a)}addPoints(e){return Bs(this.bounds,e)}addBounds(e,a,n,r,i,s){return Ll(this.bounds,e,a,n,r,i,s)}setMinPoint(e,a,n){return kl(this.bounds,e,a,n)}setMaxPoint(e,a,n){return Fl(this.bounds,e,a,n)}inflate(e){return Al(this.bounds,e)}scale(e,a,n){return Us(this.bounds,e,a,n)}getCenter(){return Gs(this.bounds)}getLength(e){return Da(this.bounds,e)}getLengths(){return Ai(this.bounds)}getMaxLength(){return Gl(this.bounds)}getDiagonalLength(){return Il(this.bounds)}getMinPoint(){return Is(this.bounds)}getMaxPoint(){return Ps(this.bounds)}getXRange(){return Vl(this.bounds)}getYRange(){return Bl(this.bounds)}getZRange(){return Ul(this.bounds)}getCorners(e){return zs(this.bounds,e)}computeCornerPoints(e,a){return Pl(this.bounds,e,a)}computeLocalBounds(e,a,n){return Wl(this.bounds,e,a,n)}transformBounds(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return zl(this.bounds,e,a)}computeScale3(e){return jl(this.bounds,e)}cutWithPlane(e,a){return Xl(this.bounds,e,a)}intersectBox(e,a,n,r){return $l(this.bounds,e,a,n,r)}intersectPlane(e,a){return Hl(this.bounds,e,a)}intersect(e){return Kl(this.bounds,e)}intersects(e){return Bi(this.bounds,e)}containsPoint(e,a,n){return Ui(this.bounds,e,a,n)}contains(e){return Bi(this.bounds,e)}}function Fy(t){const e=t&&t.bounds;return new ky(e)}var Le={newInstance:Fy,...{equals:Rl,isValid:hn,setBounds:As,reset:Vs,addPoint:Fi,addPoints:Bs,addBounds:Ll,setMinPoint:kl,setMaxPoint:Fl,inflate:Al,scale:Us,scaleAboutCenter:Ry,getCenter:Gs,getLength:Da,getLengths:Ai,getMaxLength:Gl,getDiagonalLength:Il,getMinPoint:Is,getMaxPoint:Ps,getXRange:Vl,getYRange:Bl,getZRange:Ul,getCorners:zs,computeCornerPoints:Pl,computeLocalBounds:Wl,transformBounds:zl,computeScale3:jl,cutWithPlane:Xl,intersectBox:$l,intersectPlane:Hl,intersect:Kl,intersects:Bi,containsPoint:Ui,contains:Ly,INIT_BOUNDS:ki}},ql={CoordinateSystem:{DISPLAY:0,WORLD:1}};const{CoordinateSystem:js}=ql;function Yl(t){return()=>k.vtkErrorMacro(`vtkProp::${t} - NOT IMPLEMENTED`)}function Ay(t,e){e.classHierarchy.push("vtkProp"),t.getMTime=()=>{let a=e.mtime;for(let n=0;n<e.textures.length;++n){const r=e.textures[n].getMTime();r>a&&(a=r)}return a},t.processSelectorPixelBuffers=(a,n)=>{},t.getNestedProps=()=>null,t.getActors=()=>[],t.getActors2D=()=>[],t.getVolumes=()=>[],t.pick=Yl("pick"),t.hasKey=Yl("hasKey"),t.getNestedVisibility=()=>e.visibility&&(!e._parentProp||e._parentProp.getNestedVisibility()),t.getNestedPickable=()=>e.pickable&&(!e._parentProp||e._parentProp.getNestedPickable()),t.getNestedDragable=()=>e.dragable&&(!e._parentProp||e._parentProp.getNestedDragable()),t.getRedrawMTime=()=>e.mtime,t.setEstimatedRenderTime=a=>{e.estimatedRenderTime=a,e.savedEstimatedRenderTime=a},t.restoreEstimatedRenderTime=()=>{e.estimatedRenderTime=e.savedEstimatedRenderTime},t.addEstimatedRenderTime=a=>{e.estimatedRenderTime+=a},t.setAllocatedRenderTime=a=>{e.allocatedRenderTime=a,e.savedEstimatedRenderTime=e.estimatedRenderTime,e.estimatedRenderTime=0},t.getSupportsSelection=()=>!1,t.getTextures=()=>e.textures,t.hasTexture=a=>e.textures.indexOf(a)!==-1,t.addTexture=a=>{a&&!t.hasTexture(a)&&(e.textures=e.textures.concat(a),t.modified())},t.removeTexture=a=>{const n=e.textures.filter(r=>r!==a);e.textures.length!==n.length&&(e.textures=n,t.modified())},t.removeAllTextures=()=>{e.textures=[],t.modified()},t.setCoordinateSystemToWorld=()=>t.setCoordinateSystem(js.WORLD),t.setCoordinateSystemToDisplay=()=>t.setCoordinateSystem(js.DISPLAY)}const Vy={allocatedRenderTime:10,coordinateSystem:js.WORLD,dragable:!0,estimatedRenderTime:0,paths:null,pickable:!0,renderTimeMultiplier:1,savedEstimatedRenderTime:0,textures:[],useBounds:!0,visibility:!0};function Jl(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Vy,a),k.obj(t,e),k.get(t,e,["estimatedRenderTime","allocatedRenderTime"]),k.setGet(t,e,["_parentProp","coordinateSystem","dragable","pickable","renderTimeMultiplier","useBounds","visibility"]),k.moveToProtected(t,e,["parentProp"]),Ay(t,e)}var Zl={newInstance:k.newInstance(Jl,"vtkProp"),extend:Jl,...ql};function By(t,e){e.classHierarchy.push("vtkProp3D"),t.addPosition=n=>{e.position=e.position.map((r,i)=>r+n[i]),t.modified()},t.getOrientationWXYZ=()=>{const n=zn();Eu(n,e.rotation);const r=new Float64Array(3),i=Bd(r,n);return[ma(i),r[0],r[1],r[2]]},t.rotateX=n=>{n!==0&&(ti(e.rotation,e.rotation,qe(n)),t.modified())},t.rotateY=n=>{n!==0&&(na(e.rotation,e.rotation,qe(n)),t.modified())},t.rotateZ=n=>{n!==0&&(ni(e.rotation,e.rotation,qe(n)),t.modified())},t.rotateWXYZ=(n,r,i,s)=>{if(n===0||r===0&&i===0&&s===0)return;const u=qe(n),c=zn();Go(c,[r,i,s],u);const o=new Float64Array(16);Uo(o,c),Ge(e.rotation,e.rotation,o),t.modified()},t.setOrientation=(n,r,i)=>n===e.orientation[0]&&r===e.orientation[1]&&i===e.orientation[2]?!1:(e.orientation=[n,r,i],Se(e.rotation),t.rotateZ(i),t.rotateX(n),t.rotateY(r),t.modified(),!0),t.setUserMatrix=n=>Ta(e.userMatrix,n)?!1:(dt(e.userMatrix,n),t.modified(),!0),t.getMatrix=()=>(t.computeMatrix(),e.matrix),t.computeMatrix=()=>{if(t.getMTime()>e.matrixMTime.getMTime()){Se(e.matrix),e.userMatrix&&Ge(e.matrix,e.matrix,e.userMatrix),Ze(e.matrix,e.matrix,e.origin),Ze(e.matrix,e.matrix,e.position),Ge(e.matrix,e.matrix,e.rotation),Dn(e.matrix,e.matrix,e.scale),Ze(e.matrix,e.matrix,[-e.origin[0],-e.origin[1],-e.origin[2]]),ze(e.matrix,e.matrix),e.isIdentity=!0;for(let n=0;n<4;++n)for(let r=0;r<4;++r)(n===r?1:0)!==e.matrix[n+r*4]&&(e.isIdentity=!1);e.matrixMTime.modified()}},t.getCenter=()=>Le.getCenter(e.bounds),t.getLength=()=>Le.getLength(e.bounds),t.getXRange=()=>Le.getXRange(e.bounds),t.getYRange=()=>Le.getYRange(e.bounds),t.getZRange=()=>Le.getZRange(e.bounds),t.getUserMatrix=()=>e.userMatrix;function a(){t.computeMatrix()}t.onModified(a)}const Uy={origin:[0,0,0],position:[0,0,0],orientation:[0,0,0],rotation:null,scale:[1,1,1],bounds:[1,-1,1,-1,1,-1],userMatrix:null,userMatrixMTime:null,cachedProp3D:null,isIdentity:!0,matrixMTime:null};function Ql(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Uy,a),Zl.extend(t,e,a),e.matrixMTime={},k.obj(e.matrixMTime),k.get(t,e,["bounds","isIdentity"]),k.getArray(t,e,["orientation"]),k.setGetArray(t,e,["origin","position","scale"],3),e.matrix=Se(new Float64Array(16)),e.rotation=Se(new Float64Array(16)),e.userMatrix=Se(new Float64Array(16)),e.transform=null,By(t,e)}var Ws={newInstance:k.newInstance(Ql,"vtkProp3D"),extend:Ql};const ef={FLAT:0,GOURAUD:1,PHONG:2},Kt={POINTS:0,WIREFRAME:1,SURFACE:2};var tf={Shading:ef,Representation:Kt,Interpolation:ef};const{Representation:ba,Interpolation:Oa}=tf;function nf(t){return()=>k.vtkErrorMacro(`vtkProperty::${t} - NOT IMPLEMENTED`)}function Gy(t,e){e.classHierarchy.push("vtkProperty"),t.setColor=(a,n,r)=>{Array.isArray(a)?(e.color[0]!==a[0]||e.color[1]!==a[1]||e.color[2]!==a[2])&&(e.color[0]=a[0],e.color[1]=a[1],e.color[2]=a[2],t.modified()):(e.color[0]!==a||e.color[1]!==n||e.color[2]!==r)&&(e.color[0]=a,e.color[1]=n,e.color[2]=r,t.modified()),t.setDiffuseColor(e.color),t.setAmbientColor(e.color),t.setSpecularColor(e.color)},t.computeCompositeColor=nf("ComputeCompositeColor"),t.getColor=()=>{let a=0;e.ambient+e.diffuse+e.specular>0&&(a=1/(e.ambient+e.diffuse+e.specular));for(let n=0;n<3;n++)e.color[n]=a*(e.ambient*e.ambientColor[n]+e.diffuse*e.diffuseColor[n]+e.specular*e.specularColor[n]);return[].concat(e.color)},t.setSpecularPower=a=>{const n=1/Math.max(1,a);(e.roughness!==n||e.specularPower!==a)&&(e.specularPower=a,e.roughness=n,t.modified())},t.addShaderVariable=nf("AddShaderVariable"),t.setInterpolationToFlat=()=>t.setInterpolation(Oa.FLAT),t.setInterpolationToGouraud=()=>t.setInterpolation(Oa.GOURAUD),t.setInterpolationToPhong=()=>t.setInterpolation(Oa.PHONG),t.getInterpolationAsString=()=>k.enumToString(Oa,e.interpolation),t.setRepresentationToWireframe=()=>t.setRepresentation(ba.WIREFRAME),t.setRepresentationToSurface=()=>t.setRepresentation(ba.SURFACE),t.setRepresentationToPoints=()=>t.setRepresentation(ba.POINTS),t.getRepresentationAsString=()=>k.enumToString(ba,e.representation)}const Iy={color:[1,1,1],ambientColor:[1,1,1],diffuseColor:[1,1,1],specularColor:[1,1,1],edgeColor:[0,0,0],ambient:0,diffuse:1,metallic:0,roughness:.6,normalStrength:1,emission:1,baseIOR:1.45,specular:0,specularPower:1,opacity:1,interpolation:Oa.GOURAUD,representation:ba.SURFACE,edgeVisibility:!1,backfaceCulling:!1,frontfaceCulling:!1,pointSize:1,lineWidth:1,lighting:!0,shading:!1,materialName:null};function rf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Iy,a),k.obj(t,e),k.setGet(t,e,["lighting","interpolation","ambient","diffuse","metallic","roughness","normalStrength","emission","baseIOR","specular","specularPower","opacity","edgeVisibility","lineWidth","pointSize","backfaceCulling","frontfaceCulling","representation","diffuseTexture","metallicTexture","roughnessTexture","normalTexture","ambientOcclusionTexture","emissionTexture"]),k.setGetArray(t,e,["ambientColor","specularColor","diffuseColor","edgeColor"],3),Gy(t,e)}var Qn={newInstance:k.newInstance(rf,"vtkProperty"),extend:rf,...tf};const{vtkDebugMacro:Py}=k;function zy(t,e){e.classHierarchy.push("vtkActor");const a={...t};t.getActors=()=>[t],t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.property||t.getProperty();let n=e.property.getOpacity()>=1;return n=n&&(!e.texture||!e.texture.isTranslucent()),n=n&&(!e.mapper||e.mapper.getIsOpaque()),n},t.hasTranslucentPolygonalGeometry=()=>e.mapper===null?!1:(e.property===null&&t.setProperty(t.makeProperty()),!t.getIsOpaque()),t.makeProperty=Qn.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const n=e.mapper.getBounds();if(!n||n.length!==6)return n;if(n[0]>n[1])return e.mapperBounds=n.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),n;if(!e.mapperBounds||n[0]!==e.mapperBounds[0]||n[1]!==e.mapperBounds[1]||n[2]!==e.mapperBounds[2]||n[3]!==e.mapperBounds[3]||n[4]!==e.mapperBounds[4]||n[5]!==e.mapperBounds[5]||t.getMTime()>e.boundsMTime.getMTime()){Py("Recomputing bounds..."),e.mapperBounds=n.concat();const r=[];Le.getCorners(n,r),t.computeMatrix();const i=new Float64Array(16);ze(i,e.matrix),r.forEach(s=>Te(s,s,i)),e.bounds[0]=e.bounds[2]=e.bounds[4]=Number.MAX_VALUE,e.bounds[1]=e.bounds[3]=e.bounds[5]=-Number.MAX_VALUE,e.bounds=e.bounds.map((s,u)=>u%2===0?r.reduce((c,o)=>c>o[u/2]?o[u/2]:c,s):r.reduce((c,o)=>c<o[(u-1)/2]?o[(u-1)/2]:c,s)),e.boundsMTime.modified()}return e.bounds},t.getMTime=()=>{let n=a.getMTime();if(e.property!==null){const r=e.property.getMTime();n=r>n?r:n}if(e.backfaceProperty!==null){const r=e.backfaceProperty.getMTime();n=r>n?r:n}return n},t.getRedrawMTime=()=>{let n=e.mtime;if(e.mapper!==null){let r=e.mapper.getMTime();n=r>n?r:n,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),r=e.mapper.getInput().getMTime(),n=r>n?r:n)}return n},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1,t.processSelectorPixelBuffers=(n,r)=>{e.mapper&&e.mapper.processSelectorPixelBuffers&&e.mapper.processSelectorPixelBuffers(n,r)}}const jy={mapper:null,property:null,backfaceProperty:null,forceOpaque:!1,forceTranslucent:!1,bounds:[1,-1,1,-1,1,-1]};function af(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jy,a),Ws.extend(t,e,a),e.boundsMTime={},k.obj(e.boundsMTime),k.set(t,e,["property"]),k.setGet(t,e,["backfaceProperty","forceOpaque","forceTranslucent","mapper"]),zy(t,e)}var pn={newInstance:k.newInstance(af,"vtkActor"),extend:af};const Gi={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ne={VOID:"",CHAR:"Int8Array",SIGNED_CHAR:"Int8Array",UNSIGNED_CHAR:"Uint8Array",SHORT:"Int16Array",UNSIGNED_SHORT:"Uint16Array",INT:"Int32Array",UNSIGNED_INT:"Uint32Array",FLOAT:"Float32Array",DOUBLE:"Float64Array"};var of={DefaultDataType:Ne.FLOAT,DataTypeByteSize:Gi,VtkDataTypes:Ne};const{vtkErrorMacro:Wy}=wt,{DefaultDataType:$y}=of,Hy=1e-6;function $s(t,e,a){const n=t.length;let r=Number.MAX_VALUE,i=-Number.MAX_VALUE,s,u;for(u=e;u<n;u+=a)if(!Number.isNaN(t[u])){r=t[u],i=r;break}for(;u<n;u+=a)s=t[u],s<r?r=s:s>i&&(i=s);return{min:r,max:i}}function Ky(){let t=Number.MAX_VALUE,e=-Number.MAX_VALUE,a=0,n=0;return{add(r){t>r&&(t=r),e<r&&(e=r),a++,n+=r},get(){return{min:t,max:e,count:a,sum:n,mean:n/a}},getRange(){return{min:t,max:e}}}}function sf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;if(e<0&&a>1){const r=t.length/a,i=new Float64Array(r);for(let s=0,u=0;s<r;++s){for(let c=u+a;u<c;++u)i[s]+=t[u]*t[u];i[s]**=.5}return $s(i,0,1)}return $s(t,e<0?0:e,a)}function uf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const a=t||[];for(;a.length<=e;)a.push(null);return a}function Hs(t){return Object.prototype.toString.call(t).slice(8,-1)}function Xy(t){const e=t.getNumberOfComponents();let a=0;const n=new Array(e);for(let r=0;r<t.getNumberOfTuples();++r){t.getTuple(r,n);const i=kt(n,e);i>a&&(a=i)}return a}const qy={computeRange:sf,createRangeHelper:Ky,fastComputeRange:$s,getDataType:Hs,getMaxNorm:Xy};function Yy(t,e){e.classHierarchy.push("vtkDataArray");function a(n){if(n<0)return!1;const r=t.getNumberOfComponents(),i=e.values.length/(r>0?r:1);if(n===i)return!0;if(n>i){const s=e.values;return e.values=Hn(e.dataType,(n+i)*r),e.values.set(s),!0}return e.size>n*r&&(e.size=n*r,t.dataChange()),!0}t.dataChange=()=>{e.ranges=null,t.modified()},t.resize=n=>{a(n);const r=n*t.getNumberOfComponents();return e.size!==r?(e.size=r,t.dataChange(),!0):!1},t.initialize=()=>{t.resize(0)},t.getElementComponentSize=()=>e.values.BYTES_PER_ELEMENT,t.getComponent=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[n*e.numberOfComponents+r]},t.setComponent=(n,r,i)=>{i!==e.values[n*e.numberOfComponents+r]&&(e.values[n*e.numberOfComponents+r]=i,t.dataChange())},t.getValue=n=>{const r=n/e.numberOfComponents,i=n%e.numberOfComponents;return t.getComponent(r,i)},t.setValue=(n,r)=>{const i=n/e.numberOfComponents,s=n%e.numberOfComponents;t.setComponent(i,s,r)},t.getData=()=>e.size===e.values.length?e.values:e.values.subarray(0,e.size),t.getRange=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,r=n;r<0&&(r=e.numberOfComponents===1?0:e.numberOfComponents);let i=null;return e.ranges||(e.ranges=uf(e.ranges,e.numberOfComponents)),i=e.ranges[r],i?(e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple):(i=sf(t.getData(),n,e.numberOfComponents),e.ranges[r]=i,e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple)},t.setRange=(n,r)=>{e.ranges||(e.ranges=uf(e.ranges,e.numberOfComponents));const i={min:n.min,max:n.max};return e.ranges[r]=i,e.rangeTuple[0]=i.min,e.rangeTuple[1]=i.max,e.rangeTuple},t.setTuple=(n,r)=>{const i=n*e.numberOfComponents;for(let s=0;s<e.numberOfComponents;s++)e.values[i+s]=r[s]},t.setTuples=(n,r)=>{let i=n*e.numberOfComponents;const s=Math.min(r.length,e.size-i);for(let u=0;u<s;)e.values[i++]=r[u++]},t.insertTuple=(n,r)=>(e.size<=n*e.numberOfComponents&&(e.size=(n+1)*e.numberOfComponents,a(n+1)),t.setTuple(n,r),n),t.insertTuples=(n,r)=>{const i=n+r.length/e.numberOfComponents;return e.size<i*e.numberOfComponents&&(e.size=i*e.numberOfComponents,a(i)),t.setTuples(n,r),i},t.insertNextTuple=n=>{const r=e.size/e.numberOfComponents;return t.insertTuple(r,n)},t.insertNextTuples=n=>{const r=e.size/e.numberOfComponents;return t.insertTuples(r,n)},t.findTuple=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Hy;for(let i=0;i<e.size;i+=e.numberOfComponents)if(Math.abs(n[0]-e.values[i])<=r){let s=!0;for(let u=1;u<e.numberOfComponents;++u)if(Math.abs(n[u]-e.values[i+u])>r){s=!1;break}if(s)return i/e.numberOfComponents}return-1},t.getTuple=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const i=e.numberOfComponents||1,s=n*i;switch(i){case 4:r[3]=e.values[s+3];case 3:r[2]=e.values[s+2];case 2:r[1]=e.values[s+1];case 1:r[0]=e.values[s];break;default:for(let u=i-1;u>=0;--u)r[u]=e.values[s+u]}return r},t.getTuples=(n,r)=>{const i=(n??0)*e.numberOfComponents,s=(r??t.getNumberOfTuples())*e.numberOfComponents,u=t.getData().subarray(i,s);return u.length>0?u:null},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.size,t.getNumberOfTuples=()=>e.size/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>lf({empty:!0,name:e.name,dataType:e.dataType,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||(t.modified(),e.name=`vtkDataArray${t.getMTime()}`),e.name),t.setData=(n,r)=>{e.values=n,e.size=n.length,e.dataType=Hs(n),r&&(e.numberOfComponents=r),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.dataChange()},t.getState=()=>{if(e.deleted)return null;const n={...e,vtkClass:t.getClassName()};n.values=Array.from(n.values),delete n.buffer,Object.keys(n).forEach(i=>{n[i]||delete n[i]});const r={};return Object.keys(n).sort().forEach(i=>{r[i]=n[i]}),r.mtime&&delete r.mtime,r},t.deepCopy=n=>{const r=t.getDataType(),i=e.values;t.shallowCopy(n),(i==null?void 0:i.length)>=n.getNumberOfValues()&&r===n.getDataType()?(i.set(n.getData()),e.values=i,t.dataChange()):t.setData(n.getData().slice())},t.interpolateTuple=(n,r,i,s,u,c)=>{const o=e.numberOfComponents||1;(o!==r.getNumberOfComponents()||o!==s.getNumberOfComponents())&&Wy("numberOfComponents must match");const f=r.getTuple(i),l=s.getTuple(u),h=[];switch(h.length=o,o){case 4:h[3]=f[3]+(l[3]-f[3])*c;case 3:h[2]=f[2]+(l[2]-f[2])*c;case 2:h[1]=f[1]+(l[1]-f[1])*c;case 1:h[0]=f[0]+(l[0]-f[0])*c;break;default:for(let p=0;p<o;p++)h[p]=f[p]+(l[p]-f[p])*c}return t.insertTuple(n,h)}}const Jy={name:"",numberOfComponents:1,dataType:$y,rangeTuple:[0,0]};function cf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,Jy,a),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkDataArray object without: size > 0, values");if(e.values?Array.isArray(e.values)&&(e.values=hi(e.dataType,e.values)):e.values=Hn(e.dataType,e.size),e.values&&(e.size=e.size??e.values.length,e.dataType=Hs(e.values)),ot(t,e),sa(t,e,["name","numberOfComponents"]),e.size%e.numberOfComponents!==0)throw new RangeError("model.size is not a multiple of model.numberOfComponents");Yy(t,e)}const lf=Ke(cf,"vtkDataArray");var pe={newInstance:lf,extend:cf,...qy,...of};function Zy(t,e){e.classHierarchy.push("vtkAbstractMapper"),t.update=()=>{t.getInputData()},t.addClippingPlane=a=>a.isA("vtkPlane")?e.clippingPlanes.includes(a)?!1:(e.clippingPlanes.push(a),t.modified(),!0):!1,t.getNumberOfClippingPlanes=()=>e.clippingPlanes.length,t.removeAllClippingPlanes=()=>e.clippingPlanes.length===0?!1:(e.clippingPlanes.length=0,t.modified(),!0),t.removeClippingPlane=a=>{const n=e.clippingPlanes.indexOf(a);return n===-1?!1:(e.clippingPlanes.splice(n,1),t.modified(),!0)},t.getClippingPlanes=()=>e.clippingPlanes,t.setClippingPlanes=a=>{if(a)if(!Array.isArray(a))t.addClippingPlane(a);else{const n=a.length;for(let r=0;r<n&&r<6;r++)t.addClippingPlane(a[r])}},t.getClippingPlaneInDataCoords=(a,n,r)=>{const i=e.clippingPlanes,s=a;if(i){const u=i.length;if(n>=0&&n<u){const c=i[n],o=c.getNormal(),f=c.getOrigin(),l=o[0],h=o[1],p=o[2],d=-(l*f[0]+h*f[1]+p*f[2]);r[0]=l*s[0]+h*s[4]+p*s[8]+d*s[12],r[1]=l*s[1]+h*s[5]+p*s[9]+d*s[13],r[2]=l*s[2]+h*s[6]+p*s[10]+d*s[14],r[3]=l*s[3]+h*s[7]+p*s[11]+d*s[15];return}}k.vtkErrorMacro(`Clipping plane index ${n} is out of range.`)}}const Qy={clippingPlanes:[]};function em(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Qy,a),k.obj(t,e),k.algo(t,e,1,0),e.clippingPlanes||(e.clippingPlanes=[]),Zy(t,e)}var Ks={extend:em};function tm(t,e){t.getBounds=()=>(k.vtkErrorMacro("vtkAbstractMapper3D.getBounds - NOT IMPLEMENTED"),fn()),t.getCenter=()=>{var n;const a=t.getBounds();return e.center=Le.isValid(a)?Le.getCenter(a):null,(n=e.center)==null?void 0:n.slice()},t.getLength=()=>{const a=t.getBounds();return Le.getDiagonalLength(a)}}const nm=t=>({bounds:[...Le.INIT_BOUNDS],center:[0,0,0],viewSpecificProperties:{},...t});function rm(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nm(a)),Ks.extend(t,e,a),k.setGet(t,e,["viewSpecificProperties"]),tm(t,e)}var ff={extend:rm};const{vtkErrorMacro:hf,vtkWarningMacro:am}=k;function im(t,e){e.classHierarchy.push("vtkFieldData");const a=t.getState;e.arrays&&(e.arrays=e.arrays.map(n=>({data:xt(n.data)}))),t.initialize=()=>{t.initializeFields(),t.copyAllOn(),t.clearFieldFlags()},t.initializeFields=()=>{e.arrays=[],e.copyFieldFlags={},t.modified()},t.copyStructure=n=>{t.initializeFields(),e.copyFieldFlags=n.getCopyFieldFlags().map(r=>r),e.arrays=n.arrays().map(r=>({array:r}))},t.getNumberOfArrays=()=>e.arrays.length,t.getNumberOfActiveArrays=()=>e.arrays.length,t.addArray=n=>{const r=n.getName(),{array:i,index:s}=t.getArrayWithIndex(r);return i!=null?(e.arrays[s]={data:n},s):(e.arrays=[].concat(e.arrays,{data:n}),e.arrays.length-1)},t.removeAllArrays=()=>{e.arrays=[]},t.removeArray=n=>{const r=e.arrays.findIndex(i=>i.data.getName()===n);return t.removeArrayByIndex(r)},t.removeArrayByIndex=n=>n!==-1&&n<e.arrays.length?(e.arrays.splice(n,1),!0):!1,t.getArrays=()=>e.arrays.map(n=>n.data),t.getArray=n=>typeof n=="number"?t.getArrayByIndex(n):t.getArrayByName(n),t.getArrayByName=n=>e.arrays.reduce((r,i,s)=>i.data.getName()===n?i.data:r,null),t.getArrayWithIndex=n=>{const r=e.arrays.findIndex(i=>i.data.getName()===n);return{array:r!==-1?e.arrays[r].data:null,index:r}},t.getArrayByIndex=n=>n>=0&&n<e.arrays.length?e.arrays[n].data:null,t.hasArray=n=>t.getArrayWithIndex(n).index>=0,t.getArrayName=n=>{const r=e.arrays[n];return r?r.data.getName():""},t.getCopyFieldFlags=()=>e.copyFieldFlags,t.getFlag=n=>e.copyFieldFlags[n],t.passData=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;n.getArrays().forEach(s=>{const u=t.getFlag(s.getName());if(u!==!1&&!(e.doCopyAllOff&&u!==!0)&&s){let c=t.getArrayByName(s.getName());if(c)if(s.getNumberOfComponents()===c.getNumberOfComponents())if(r>-1&&r<s.getNumberOfTuples()){const o=i>-1?i:r;c.insertTuple(o,s.getTuple(r))}else c.insertTuples(0,s.getTuples());else hf("Unhandled case in passData");else if(r<0||r>s.getNumberOfTuples())t.addArray(s),n.getAttributes(s).forEach(o=>{t.setAttribute(s,o)});else{const o=s.getNumberOfComponents();let f=s.getNumberOfValues();const l=i>-1?i:r;f<=l*o&&(f=(l+1)*o),c=pe.newInstance({name:s.getName(),dataType:s.getDataType(),numberOfComponents:o,values:k.newTypedArray(s.getDataType(),f),size:0}),c.insertTuple(l,s.getTuple(r)),t.addArray(c),n.getAttributes(s).forEach(h=>{t.setAttribute(c,h)})}}})},t.interpolateData=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:-1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5;n.getArrays().forEach(c=>{const o=t.getFlag(c.getName());if(o!==!1&&!(e.doCopyAllOff&&o!==!0)&&c){let f=t.getArrayByName(c.getName());if(f)if(c.getNumberOfComponents()===f.getNumberOfComponents())if(r>-1&&r<c.getNumberOfTuples()){const l=s>-1?s:r;f.interpolateTuple(l,c,r,c,i,u),am("Unexpected case in interpolateData")}else f.insertTuples(c.getTuples());else hf("Unhandled case in interpolateData");else if(r<0||i<0||r>c.getNumberOfTuples())t.addArray(c),n.getAttributes(c).forEach(l=>{t.setAttribute(c,l)});else{const l=c.getNumberOfComponents();let h=c.getNumberOfValues();const p=s>-1?s:r;h<=p*l&&(h=(p+1)*l),f=pe.newInstance({name:c.getName(),dataType:c.getDataType(),numberOfComponents:l,values:k.newTypedArray(c.getDataType(),h),size:0}),f.interpolateTuple(p,c,r,c,i,u),t.addArray(f),n.getAttributes(c).forEach(d=>{t.setAttribute(f,d)})}}})},t.copyFieldOn=n=>{e.copyFieldFlags[n]=!0},t.copyFieldOff=n=>{e.copyFieldFlags[n]=!1},t.copyAllOn=()=>{(!e.doCopyAllOn||e.doCopyAllOff)&&(e.doCopyAllOn=!0,e.doCopyAllOff=!1,t.modified())},t.copyAllOff=()=>{(e.doCopyAllOn||!e.doCopyAllOff)&&(e.doCopyAllOn=!1,e.doCopyAllOff=!0,t.modified())},t.clearFieldFlags=()=>{e.copyFieldFlags={}},t.deepCopy=n=>{e.arrays=n.getArrays().map(r=>{const i=r.newClone();return i.deepCopy(r),{data:i}})},t.copyFlags=n=>n.getCopyFieldFlags().map(r=>r),t.reset=()=>e.arrays.forEach(n=>n.data.reset()),t.getMTime=()=>e.arrays.reduce((n,r)=>r.data.getMTime()>n?r.data.getMTime():n,e.mtime),t.getNumberOfComponents=()=>e.arrays.reduce((n,r)=>n+r.data.getNumberOfComponents(),0),t.getNumberOfTuples=()=>e.arrays.length>0?e.arrays[0].getNumberOfTuples():0,t.getState=()=>{const n=a();return n&&(n.arrays=e.arrays.map(r=>({data:r.data.getState()}))),n}}const om={arrays:[],copyFieldFlags:[],doCopyAllOn:!0,doCopyAllOff:!1};function pf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,om,a),k.obj(t,e),im(t,e)}var sm={newInstance:k.newInstance(pf,"vtkFieldData"),extend:pf};const gf={SCALARS:0,VECTORS:1,NORMALS:2,TCOORDS:3,TENSORS:4,GLOBALIDS:5,PEDIGREEIDS:6,EDGEFLAG:7,NUM_ATTRIBUTES:8},um={MAX:0,EXACT:1,NOLIMIT:2},cm={DUPLICATECELL:1,HIGHCONNECTIVITYCELL:2,LOWCONNECTIVITYCELL:4,REFINEDCELL:8,EXTERIORCELL:16,HIDDENCELL:32},lm={DUPLICATEPOINT:1,HIDDENPOINT:2},fm={COPYTUPLE:0,INTERPOLATE:1,PASSDATA:2,ALLCOPY:3},hm="vtkGhostType",er={DEFAULT:0,SINGLE:1,DOUBLE:2};var df={AttributeCopyOperations:fm,AttributeLimitTypes:um,AttributeTypes:gf,CellGhostTypes:cm,DesiredOutputPrecision:er,PointGhostTypes:lm,ghostArrayName:hm};const{AttributeTypes:Rn,AttributeCopyOperations:tr}=df,{vtkWarningMacro:Ii}=k;function pm(t,e){const a=["Scalars","Vectors","Normals","TCoords","Tensors","GlobalIds","PedigreeIds"];function n(s){let u=a.find(c=>Rn[c.toUpperCase()]===s||typeof s!="number"&&c.toLowerCase()===s.toLowerCase());return typeof u>"u"&&(u=null),u}e.classHierarchy.push("vtkDataSetAttributes");const r={...t};t.checkNumberOfComponents=s=>!0,t.setAttribute=(s,u)=>{const c=n(u);if(s&&c.toUpperCase()==="PEDIGREEIDS"&&!s.isA("vtkDataArray"))return Ii(`Cannot set attribute ${c}. The attribute must be a vtkDataArray.`),-1;if(s&&!t.checkNumberOfComponents(s,c))return Ii(`Cannot set attribute ${c}. Incorrect number of components.`),-1;let o=e[`active${c}`];if(o>=0&&o<e.arrays.length){if(e.arrays[o]===s)return o;t.removeArrayByIndex(o)}return s?(o=t.addArray(s),e[`active${c}`]=o):e[`active${c}`]=-1,t.modified(),e[`active${c}`]},t.getAttributes=s=>a.filter(u=>t[`get${u}`]()===s),t.setActiveAttributeByName=(s,u)=>t.setActiveAttributeByIndex(t.getArrayWithIndex(s).index,u),t.setActiveAttributeByIndex=(s,u)=>{const c=n(u);if(s>=0&&s<e.arrays.length){if(c.toUpperCase()!=="PEDIGREEIDS"){const o=t.getArrayByIndex(s);if(!o.isA("vtkDataArray"))return Ii(`Cannot set attribute ${c}. Only vtkDataArray subclasses can be set as active attributes.`),-1;if(!t.checkNumberOfComponents(o,c))return Ii(`Cannot set attribute ${c}. Incorrect number of components.`),-1}return e[`active${c}`]=s,t.modified(),s}return s===-1&&(e[`active${c}`]=s,t.modified()),-1},t.getActiveAttribute=s=>{const u=n(s);return t[`get${u}`]()},t.removeAllArrays=()=>{a.forEach(s=>{e[`active${s}`]=-1}),r.removeAllArrays()},t.removeArrayByIndex=s=>(s!==-1&&a.forEach(u=>{s===e[`active${u}`]?e[`active${u}`]=-1:s<e[`active${u}`]&&(e[`active${u}`]-=1)}),r.removeArrayByIndex(s)),a.forEach(s=>{const u=`active${s}`;t[`get${s}`]=()=>t.getArrayByIndex(e[u]),t[`set${s}`]=c=>t.setAttribute(c,s),t[`setActive${s}`]=c=>t.setActiveAttributeByIndex(t.getArrayWithIndex(c).index,s),t[`copy${s}Off`]=()=>{const c=s.toUpperCase();e.copyAttributeFlags[tr.PASSDATA][Rn[c]]=!1},t[`copy${s}On`]=()=>{const c=s.toUpperCase();e.copyAttributeFlags[tr.PASSDATA][Rn[c]]=!0}}),t.initializeAttributeCopyFlags=()=>{e.copyAttributeFlags=[],Object.keys(tr).filter(s=>s!=="ALLCOPY").forEach(s=>{e.copyAttributeFlags[tr[s]]=Object.keys(Rn).filter(u=>u!=="NUM_ATTRIBUTES").reduce((u,c)=>(u[Rn[c]]=!0,u),[])}),e.copyAttributeFlags[tr.COPYTUPLE][Rn.GLOBALIDS]=!1,e.copyAttributeFlags[tr.INTERPOLATE][Rn.GLOBALIDS]=!1,e.copyAttributeFlags[tr.COPYTUPLE][Rn.PEDIGREEIDS]=!1},t.initialize=k.chain(t.initialize,t.initializeAttributeCopyFlags),e.dataArrays&&Object.keys(e.dataArrays).length&&Object.keys(e.dataArrays).forEach(s=>{!e.dataArrays[s].ref&&e.dataArrays[s].type==="vtkDataArray"&&t.addArray(pe.newInstance(e.dataArrays[s]))});const i=t.shallowCopy;t.shallowCopy=(s,u)=>{i(s,u),e.arrays=s.getArrays().map(c=>{const o=c.newClone();return o.shallowCopy(c,u),{data:o}})},t.initializeAttributeCopyFlags()}const gm={activeScalars:-1,activeVectors:-1,activeTensors:-1,activeNormals:-1,activeTCoords:-1,activeGlobalIds:-1,activePedigreeIds:-1};function vf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gm,a),sm.extend(t,e,a),k.setGet(t,e,["activeScalars","activeNormals","activeTCoords","activeVectors","activeTensors","activeGlobalIds","activePedigreeIds"]),e.arrays||(e.arrays={}),pm(t,e)}var yf={newInstance:k.newInstance(vf,"vtkDataSetAttributes"),extend:vf,...df};const ct={UNIFORM:0,DATA_OBJECT_FIELD:0,COORDINATE:1,POINT_DATA:1,POINT:2,POINT_FIELD_DATA:2,CELL:3,CELL_FIELD_DATA:3,VERTEX:4,VERTEX_FIELD_DATA:4,EDGE:5,EDGE_FIELD_DATA:5,ROW:6,ROW_DATA:6},Xs={FIELD_ASSOCIATION_POINTS:0,FIELD_ASSOCIATION_CELLS:1,FIELD_ASSOCIATION_NONE:2,FIELD_ASSOCIATION_POINTS_THEN_CELLS:3,FIELD_ASSOCIATION_VERTICES:4,FIELD_ASSOCIATION_EDGES:5,FIELD_ASSOCIATION_ROWS:6,NUMBER_OF_ASSOCIATIONS:7};var dm={FieldDataTypes:ct,FieldAssociations:Xs};const qs=["pointData","cellData","fieldData"];function vm(t,e){e.classHierarchy.push("vtkDataSet"),qs.forEach(n=>{e[n]?e[n]=xt(e[n]):e[n]=yf.newInstance()});const a=t.shallowCopy;t.shallowCopy=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a(n,r),qs.forEach(i=>{e[i]=yf.newInstance(),e[i].shallowCopy(n.getReferenceByName(i))})}}const ym={};function mf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ym,a),k.obj(t,e),k.setGet(t,e,qs),vm(t,e)}var nr={newInstance:k.newInstance(mf,"vtkDataSet"),extend:mf,...dm};const Xt={UNCHANGED:0,SINGLE_POINT:1,X_LINE:2,Y_LINE:3,Z_LINE:4,XY_PLANE:5,YZ_PLANE:6,XZ_PLANE:7,XYZ_GRID:8,EMPTY:9};var xf={StructuredType:Xt};const{StructuredType:gn}=xf;function mm(t){let e=0;for(let a=0;a<3;++a)t[a*2]<t[a*2+1]&&e++;return t[0]>t[1]||t[2]>t[3]||t[4]>t[5]?gn.EMPTY:e===3?gn.XYZ_GRID:e===2?t[0]===t[1]?gn.YZ_PLANE:t[2]===t[3]?gn.XZ_PLANE:gn.XY_PLANE:e===1?t[0]<t[1]?gn.X_LINE:t[2]<t[3]?gn.Y_LINE:gn.Z_LINE:gn.SINGLE_POINT}var xm={getDataDescriptionFromExtent:mm,...xf};const{vtkErrorMacro:rr}=k;function Sm(t,e){e.classHierarchy.push("vtkImageData"),t.setExtent=function(){if(e.deleted)return rr("instance deleted - cannot call any method"),!1;for(var a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];const i=n.length===1?n[0]:n;if(i.length!==6)return!1;const s=e.extent.some((u,c)=>u!==i[c]);return s&&(e.extent=i.slice(),e.dataDescription=xm.getDataDescriptionFromExtent(e.extent),t.modified()),s},t.setDimensions=function(){let a,n,r;if(e.deleted){rr("instance deleted - cannot call any method");return}if(arguments.length===1){const i=arguments.length<=0?void 0:arguments[0];a=i[0],n=i[1],r=i[2]}else if(arguments.length===3)a=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2];else{rr("Bad dimension specification");return}t.setExtent(0,a-1,0,n-1,0,r-1)},t.getDimensions=()=>[e.extent[1]-e.extent[0]+1,e.extent[3]-e.extent[2]+1,e.extent[5]-e.extent[4]+1],t.getNumberOfCells=()=>{const a=t.getDimensions();let n=1;for(let r=0;r<3;r++){if(a[r]===0)return 0;a[r]>1&&(n*=a[r]-1)}return n},t.getNumberOfPoints=()=>{const a=t.getDimensions();return a[0]*a[1]*a[2]},t.getPoint=a=>{const n=t.getDimensions();if(n[0]===0||n[1]===0||n[2]===0)return rr("Requesting a point from an empty image."),null;const r=new Float64Array(3);switch(e.dataDescription){case Xt.EMPTY:return null;case Xt.SINGLE_POINT:break;case Xt.X_LINE:r[0]=a;break;case Xt.Y_LINE:r[1]=a;break;case Xt.Z_LINE:r[2]=a;break;case Xt.XY_PLANE:r[0]=a%n[0],r[1]=a/n[0];break;case Xt.YZ_PLANE:r[1]=a%n[1],r[2]=a/n[1];break;case Xt.XZ_PLANE:r[0]=a%n[0],r[2]=a/n[0];break;case Xt.XYZ_GRID:r[0]=a%n[0],r[1]=a/n[0]%n[1],r[2]=a/(n[0]*n[1]);break;default:rr("Invalid dataDescription");break}const i=[0,0,0];return t.indexToWorld(r,i),i},t.getBounds=()=>t.extentToBounds(t.getSpatialExtent()),t.extentToBounds=a=>Le.transformBounds(a,e.indexToWorld),t.getSpatialExtent=()=>Le.inflate([...e.extent],.5),t.computeTransforms=()=>{Cu(e.indexToWorld,e.origin),e.indexToWorld[0]=e.direction[0],e.indexToWorld[1]=e.direction[1],e.indexToWorld[2]=e.direction[2],e.indexToWorld[4]=e.direction[3],e.indexToWorld[5]=e.direction[4],e.indexToWorld[6]=e.direction[5],e.indexToWorld[8]=e.direction[6],e.indexToWorld[9]=e.direction[7],e.indexToWorld[10]=e.direction[8],Dn(e.indexToWorld,e.indexToWorld,e.spacing),Nt(e.worldToIndex,e.indexToWorld)},t.indexToWorld=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Te(n,a,e.indexToWorld),n},t.indexToWorldVec3=t.indexToWorld,t.worldToIndex=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Te(n,a,e.worldToIndex),n},t.worldToIndexVec3=t.worldToIndex,t.indexToWorldBounds=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Le.transformBounds(a,e.indexToWorld,n)},t.worldToIndexBounds=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Le.transformBounds(a,e.worldToIndex,n)},t.onModified(t.computeTransforms),t.computeTransforms(),t.getCenter=()=>Le.getCenter(t.getBounds()),t.computeHistogram=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const r=[0,0,0,0,0,0];t.worldToIndexBounds(a,r);const i=[0,0,0],s=[0,0,0];Le.computeCornerPoints(r,i,s),Os(i,i),Os(s,s);const u=t.getDimensions();Ls(i,[0,0,0],[u[0]-1,u[1]-1,u[2]-1],i),Ls(s,[0,0,0],[u[0]-1,u[1]-1,u[2]-1],s);const c=u[0],o=u[0]*u[1],f=t.getPointData().getScalars().getData();let l=-1/0,h=1/0,p=0,d=0,y=0;for(let g=i[2];g<=s[2];g++)for(let x=i[1];x<=s[1];x++){let C=i[0]+x*c+g*o;for(let T=i[0];T<=s[0];T++){if(!n||n([T,x,g],r)){const w=f[C];w>l&&(l=w),w<h&&(h=w),p+=w*w,d+=w,y+=1}++C}}const m=y>0?d/y:0,S=y?Math.abs(p/y-m*m):0,v=Math.sqrt(S);return{minimum:h,maximum:l,average:m,variance:S,sigma:v,count:y}},t.computeIncrements=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=[];let i=n;for(let s=0;s<3;++s)r[s]=i,i*=a[s*2+1]-a[s*2]+1;return r},t.computeOffsetIndex=a=>{let[n,r,i]=a;const s=t.getExtent(),u=t.getPointData().getScalars().getNumberOfComponents(),c=t.computeIncrements(s,u);return Math.floor((Math.round(n)-s[0])*c[0]+(Math.round(r)-s[2])*c[1]+(Math.round(i)-s[4])*c[2])},t.getOffsetIndexFromWorld=a=>{const n=t.getExtent(),r=t.worldToIndex(a);for(let i=0;i<3;++i)if(r[i]<n[i*2]||r[i]>n[i*2+1])return rr(`GetScalarPointer: Pixel ${r} is not in memory. Current extent = ${n}`),NaN;return t.computeOffsetIndex(r)},t.getScalarValueFromWorld=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=t.getPointData().getScalars().getNumberOfComponents();if(n<0||n>=r)return rr(`GetScalarPointer: Scalar Component ${n} is not within bounds. Current Scalar numberOfComponents: ${r}`),NaN;const i=t.getOffsetIndexFromWorld(a);return Number.isNaN(i)?i:t.getPointData().getScalars().getComponent(i,n)}}const Cm={direction:null,indexToWorld:null,worldToIndex:null,spacing:[1,1,1],origin:[0,0,0],extent:[0,-1,0,-1,0,-1],dataDescription:Xt.EMPTY};function Sf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Cm,a),nr.extend(t,e,a),e.direction?Array.isArray(e.direction)&&(e.direction=new Float64Array(e.direction.slice(0,9))):e.direction=zt(new Float64Array(9)),e.indexToWorld=new Float64Array(16),e.worldToIndex=new Float64Array(16),k.get(t,e,["indexToWorld","worldToIndex"]),k.setGetArray(t,e,["origin","spacing"],3),k.setGetArray(t,e,["direction"],9),k.getArray(t,e,["extent"],6),Sm(t,e)}var Ys={newInstance:k.newInstance(Sf,"vtkImageData"),extend:Sf};const Tm={MAGNITUDE:0,COMPONENT:1,RGBCOLORS:2},Js={LUMINANCE:1,LUMINANCE_ALPHA:2,RGB:3,RGBA:4};var Zs={VectorMode:Tm,ScalarMappingTarget:Js},Pi={ColorMode:{DEFAULT:0,MAP_SCALARS:1,DIRECT_SCALARS:2},GetArray:{BY_ID:0,BY_NAME:1},ScalarMode:{DEFAULT:0,USE_POINT_DATA:1,USE_CELL_DATA:2,USE_POINT_FIELD_DATA:3,USE_CELL_FIELD_DATA:4,USE_FIELD_DATA:5}};const{ScalarMappingTarget:Cf,VectorMode:an}=Zs,{VtkDataTypes:ar}=pe,{ColorMode:zi}=Pi,{vtkErrorMacro:Tf}=k;function wm(t){return t}function wf(t){return Math.floor(t*255+.5)}function _m(t,e){e.classHierarchy.push("vtkScalarsToColors"),t.setVectorModeToMagnitude=()=>t.setVectorMode(an.MAGNITUDE),t.setVectorModeToComponent=()=>t.setVectorMode(an.COMPONENT),t.setVectorModeToRGBColors=()=>t.setVectorMode(an.RGBCOLORS),t.build=()=>{},t.isOpaque=()=>!0,t.setAnnotations=(a,n)=>{if(!(a&&!n||!a&&n)){if(a&&n&&a.length!==n.length){Tf("Values and annotations do not have the same number of tuples so ignoring");return}if(e.annotationArray=[],n&&a){const r=n.length;for(let i=0;i<r;i++)e.annotationArray.push({value:a[i],annotation:String(n[i])})}t.updateAnnotatedValueMap(),t.modified()}},t.setAnnotation=(a,n)=>{let r=t.checkForAnnotatedValue(a),i=!1;return r>=0?e.annotationArray[r].annotation!==n&&(e.annotationArray[r].annotation=n,i=!0):(e.annotationArray.push({value:a,annotation:n}),r=e.annotationArray.length-1,i=!0),i&&(t.updateAnnotatedValueMap(),t.modified()),r},t.getNumberOfAnnotatedValues=()=>e.annotationArray.length,t.getAnnotatedValue=a=>a<0||a>=e.annotationArray.length?null:e.annotationArray[a].value,t.getAnnotation=a=>e.annotationArray[a]===void 0?null:e.annotationArray[a].annotation,t.getAnnotatedValueIndex=a=>e.annotationArray.length?t.checkForAnnotatedValue(a):-1,t.removeAnnotation=a=>{const n=t.checkForAnnotatedValue(a),r=n>=0;return r&&(e.annotationArray.splice(n,1),t.updateAnnotatedValueMap(),t.modified()),r},t.resetAnnotations=()=>{e.annotationArray=[],e.annotatedValueMap=[],t.modified()},t.getAnnotationColor=(a,n)=>{if(e.indexedLookup){const r=t.getAnnotatedValueIndex(a);t.getIndexedColor(r,n)}else t.getColor(parseFloat(a),n),n[3]=1},t.checkForAnnotatedValue=a=>t.getAnnotatedValueIndexInternal(a),t.getAnnotatedValueIndexInternal=a=>{if(e.annotatedValueMap[a]!==void 0){const n=e.annotationArray.length;return e.annotatedValueMap[a]%n}return-1},t.getIndexedColor=(a,n)=>{n[0]=0,n[1]=0,n[2]=0,n[3]=0},t.updateAnnotatedValueMap=()=>{e.annotatedValueMap=[];const a=e.annotationArray.length;for(let n=0;n<a;n++)e.annotatedValueMap[e.annotationArray[n].value]=n},t.mapScalars=(a,n,r)=>{const i=a.getNumberOfComponents();let s=null;if(n===zi.DEFAULT&&a.getDataType()===ar.UNSIGNED_CHAR||n===zi.DIRECT_SCALARS&&a)s=t.convertToRGBA(a,i,a.getNumberOfTuples());else{const u={type:"vtkDataArray",name:"temp",numberOfComponents:4,dataType:ar.UNSIGNED_CHAR},c=k.newTypedArray(u.dataType,4*a.getNumberOfTuples());u.values=c,u.size=c.length,s=pe.newInstance(u);let o=r;o<0&&i>1?t.mapVectorsThroughTable(a,s,Cf.RGBA,-1,-1):(o<0&&(o=0),o>=i&&(o=i-1),t.mapScalarsThroughTable(a,s,Cf.RGBA,o))}return s},t.mapVectorsToMagnitude=(a,n,r)=>{const i=a.getNumberOfTuples(),s=a.getNumberOfComponents(),u=n.getData(),c=a.getData();for(let o=0;o<i;o++){let f=0;for(let l=0;l<r;l++)f+=c[o*s+l]*c[o*s+l];u[o]=Math.sqrt(f)}},t.mapVectorsThroughTable=(a,n,r,i,s)=>{let u=t.getVectorMode(),c=s,o=i;const f=a.getNumberOfComponents();u===an.COMPONENT?(o===-1&&(o=t.getVectorComponent()),o<0&&(o=0),o>=f&&(o=f-1)):(c===-1&&(c=t.getVectorSize()),c<=0?(o=0,c=f):(o<0&&(o=0),o>=f&&(o=f-1),o+c>f&&(c=f-o)),u===an.MAGNITUDE&&(f===1||c===1)&&(u=an.COMPONENT));let l=0;switch(o>0&&(l=o),u){case an.COMPONENT:{t.mapScalarsThroughTable(a,n,r,l);break}case an.RGBCOLORS:break;case an.MAGNITUDE:default:{const h=pe.newInstance({numberOfComponents:1,values:new Float32Array(a.getNumberOfTuples())});t.mapVectorsToMagnitude(a,h,c),t.mapScalarsThroughTable(h,n,r,0);break}}},t.luminanceToRGBA=(a,n,r,i)=>{const s=i(r),u=n.getData(),c=a.getData(),o=u.length,f=0,l=1;let h=0;for(let p=f;p<o;p+=l){const d=i(u[p]);c[h*4]=d,c[h*4+1]=d,c[h*4+2]=d,c[h*4+3]=s,h++}},t.luminanceAlphaToRGBA=(a,n,r,i)=>{const s=n.getData(),u=a.getData(),c=s.length,o=0,f=2;let l=0;for(let h=o;h<c;h+=f){const p=i(s[h]);u[l]=p,u[l+1]=p,u[l+2]=p,u[l+3]=i(s[h+1])*r,l+=4}},t.rGBToRGBA=(a,n,r,i)=>{const s=wf(r),u=n.getData(),c=a.getData(),o=u.length,f=0,l=3;let h=0;for(let p=f;p<o;p+=l)c[h*4]=i(u[p]),c[h*4+1]=i(u[p+1]),c[h*4+2]=i(u[p+2]),c[h*4+3]=s,h++},t.rGBAToRGBA=(a,n,r,i)=>{const s=n.getData(),u=a.getData(),c=s.length,o=0,f=4;let l=0;for(let h=o;h<c;h+=f)u[l*4]=i(s[h]),u[l*4+1]=i(s[h+1]),u[l*4+2]=i(s[h+2]),u[l*4+3]=i(s[h+3])*r,l++},t.convertToRGBA=(a,n,r)=>{let{alpha:i}=e;if(n===4&&i>=1&&a.getDataType()===ar.UNSIGNED_CHAR)return a;const s=pe.newInstance({numberOfComponents:4,empty:!0,size:4*r,dataType:ar.UNSIGNED_CHAR});if(r<=0)return s;i=i>0?i:0,i=i<1?i:1;let u=wm;switch((a.getDataType()===ar.FLOAT||a.getDataType()===ar.DOUBLE)&&(u=wf),n){case 1:t.luminanceToRGBA(s,a,i,u);break;case 2:t.luminanceAlphaToRGBA(s,a,u);break;case 3:t.rGBToRGBA(s,a,i,u);break;case 4:t.rGBAToRGBA(s,a,i,u);break;default:return Tf("Cannot convert colors"),null}return s},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>256*256*256,t.setRange=(a,n)=>t.setMappingRange(a,n),t.getRange=()=>t.getMappingRange(),t.areScalarsOpaque=(a,n,r)=>{if(!a)return t.isOpaque();const i=a.getNumberOfComponents();return n===zi.DEFAULT&&a.getDataType()===ar.UNSIGNED_CHAR||n===zi.DIRECT_SCALARS?i===3||i===1?e.alpha>=1:a.getRange(i-1)[0]===255:!0}}const Em={alpha:1,vectorComponent:0,vectorSize:-1,vectorMode:an.COMPONENT,mappingRange:null,annotationArray:null,annotatedValueMap:null,indexedLookup:!1};function _f(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Em,a),k.obj(t,e),e.mappingRange=[0,255],e.annotationArray=[],e.annotatedValueMap=[],k.setGet(t,e,["vectorSize","vectorComponent","vectorMode","alpha","indexedLookup"]),k.setArray(t,e,["mappingRange"],2),k.getArray(t,e,["mappingRange"]),_m(t,e)}var ji={newInstance:k.newInstance(_f,"vtkScalarsToColors"),extend:_f,...Zs};const{vtkErrorMacro:Ef}=k,Df=0,bf=1,Qs=2;function Dm(t,e){e.classHierarchy.push("vtkLookupTable"),t.isOpaque=()=>{if(e.opaqueFlagBuildTime.getMTime()<t.getMTime()){let a=!0;e.nanColor[3]<1&&(a=0),e.useBelowRangeColor&&e.belowRangeColor[3]<1&&(a=0),e.useAboveRangeColor&&e.aboveRangeColor[3]<1&&(a=0);for(let n=3;n<e.table.length&&a;n+=4)e.table[n]<255&&(a=!1);e.opaqueFlag=a,e.opaqueFlagBuildTime.modified()}return e.opaqueFlag},t.usingLogScale=()=>!1,t.getNumberOfAvailableColors=()=>e.table.length/4,t.linearIndexLookup=(a,n)=>{let r=0;const i=Number(a);return i<n.range[0]?r=n.maxIndex+Df+1.5:i>n.range[1]?r=n.maxIndex+bf+1.5:(r=(i+n.shift)*n.scale,r=r<n.maxIndex?r:n.maxIndex),Math.floor(r)},t.linearLookup=(a,n,r)=>{let i=0;Ri(a)?i=Math.floor(r.maxIndex+1.5+Qs):i=t.linearIndexLookup(a,r);const s=4*i;return n.slice(s,s+4)},t.indexedLookupFunction=(a,n,r)=>{let i=t.getAnnotatedValueIndexInternal(a);i===-1&&(i=e.numberOfColors+Qs);const s=4*i;return[n[s],n[s+1],n[s+2],n[s+3]]},t.lookupShiftAndScale=(a,n)=>{n.shift=-a[0],n.scale=Number.MAX_VALUE,a[1]>a[0]&&(n.scale=(n.maxIndex+1)/(a[1]-a[0]))},t.mapScalarsThroughTable=(a,n,r,i)=>{let s=t.linearLookup;e.indexedLookup&&(s=t.indexedLookupFunction);const u=t.getMappingRange(),c={maxIndex:t.getNumberOfColors()-1,range:u,shift:0,scale:0};t.lookupShiftAndScale(u,c);const o=t.getAlpha(),f=a.getNumberOfTuples(),l=a.getNumberOfComponents(),h=n.getData(),p=a.getData();if(o>=1){if(r===Js.RGBA)for(let d=0;d<f;d++){const y=s(p[d*l+i],e.table,c);h[d*4]=y[0],h[d*4+1]=y[1],h[d*4+2]=y[2],h[d*4+3]=y[3]}}else if(r===Js.RGBA)for(let d=0;d<f;d++){const y=s(p[d*l+i],e.table,c);h[d*4]=y[0],h[d*4+1]=y[1],h[d*4+2]=y[2],h[d*4+3]=Math.floor(y[3]*o+.5)}},t.forceBuild=()=>{let a=0,n=0,r=0,i=0;const s=e.numberOfColors-1;s&&(a=(e.hueRange[1]-e.hueRange[0])/s,n=(e.saturationRange[1]-e.saturationRange[0])/s,r=(e.valueRange[1]-e.valueRange[0])/s,i=(e.alphaRange[1]-e.alphaRange[0])/s),e.table.length=4*s+16;const u=[],c=[];for(let o=0;o<=s;o++)u[0]=e.hueRange[0]+o*a,u[1]=e.saturationRange[0]+o*n,u[2]=e.valueRange[0]+o*r,Jn(u,c),c[3]=e.alphaRange[0]+o*i,e.table[o*4]=c[0]*255+.5,e.table[o*4+1]=c[1]*255+.5,e.table[o*4+2]=c[2]*255+.5,e.table[o*4+3]=c[3]*255+.5;t.buildSpecialColors(),e.buildTime.modified()},t.setTable=a=>{if(Array.isArray(a)){const r=a[0].length;e.numberOfColors=a.length;const i=4-r;let s=0;for(let u=0;u<e.numberOfColors;u++)e.table[u*4]=255,e.table[u*4+1]=255,e.table[u*4+2]=255,e.table[u*4+3]=255;for(let u=0;u<a.length;u++){const c=a[u];for(let o=0;o<r;o++)e.table[s++]=c[o];s+=i}return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0}if(a.getNumberOfComponents()!==4)return Ef("Expected 4 components for RGBA colors"),!1;if(a.getDataType()!==Ne.UNSIGNED_CHAR)return Ef("Expected unsigned char values for RGBA colors"),!1;e.numberOfColors=a.getNumberOfTuples();const n=a.getData();e.table.length=n.length;for(let r=0;r<n.length;r++)e.table[r]=n[r];return t.buildSpecialColors(),e.insertTime.modified(),t.modified(),!0},t.buildSpecialColors=()=>{const{numberOfColors:a}=e,n=e.table;let r=(a+Df)*4;e.useBelowRangeColor||a===0?(n[r]=e.belowRangeColor[0]*255+.5,n[r+1]=e.belowRangeColor[1]*255+.5,n[r+2]=e.belowRangeColor[2]*255+.5,n[r+3]=e.belowRangeColor[3]*255+.5):(n[r]=n[0],n[r+1]=n[1],n[r+2]=n[2],n[r+3]=n[3]),r=(a+bf)*4,e.useAboveRangeColor||a===0?(n[r]=e.aboveRangeColor[0]*255+.5,n[r+1]=e.aboveRangeColor[1]*255+.5,n[r+2]=e.aboveRangeColor[2]*255+.5,n[r+3]=e.aboveRangeColor[3]*255+.5):(n[r]=n[4*(a-1)+0],n[r+1]=n[4*(a-1)+1],n[r+2]=n[4*(a-1)+2],n[r+3]=n[4*(a-1)+3]),r=(a+Qs)*4,n[r]=e.nanColor[0]*255+.5,n[r+1]=e.nanColor[1]*255+.5,n[r+2]=e.nanColor[2]*255+.5,n[r+3]=e.nanColor[3]*255+.5},t.build=()=>{(e.table.length<1||t.getMTime()>e.buildTime.getMTime()&&e.insertTime.getMTime()<=e.buildTime.getMTime())&&t.forceBuild()},e.table.length>0&&(t.buildSpecialColors(),e.insertTime.modified())}const bm={numberOfColors:256,hueRange:[0,.66667],saturationRange:[1,1],valueRange:[1,1],alphaRange:[1,1],nanColor:[.5,0,0,1],belowRangeColor:[0,0,0,1],aboveRangeColor:[1,1,1,1],useAboveRangeColor:!1,useBelowRangeColor:!1,alpha:1};function Of(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bm,a),ji.extend(t,e,a),e.table||(e.table=[]),e.buildTime={},k.obj(e.buildTime),e.opaqueFlagBuildTime={},k.obj(e.opaqueFlagBuildTime,{mtime:0}),e.insertTime={},k.obj(e.insertTime,{mtime:0}),k.get(t,e,["buildTime"]),k.setGet(t,e,["numberOfColors","useAboveRangeColor","useBelowRangeColor"]),k.setArray(t,e,["alphaRange","hueRange","saturationRange","valueRange"],2),k.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),k.getArray(t,e,["hueRange","saturationRange","valueRange","alphaRange","nanColor","belowRangeColor","aboveRangeColor"]),Dm(t,e)}var Ar={newInstance:k.newInstance(Of,"vtkLookupTable"),extend:Of};let Nf=1,e0=0;const Om=["VTK_RESOLVE_OFF","VTK_RESOLVE_POLYGON_OFFSET"];function Nm(){return Nf}function Mm(t){Nf=t}function Rm(){return e0}function Wi(){e0=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0}function Lm(){Wi(0)}function km(){Wi(0)}function Fm(){Wi(1)}function Am(){return Om[e0]}var t0={getResolveCoincidentTopologyAsString:Am,getResolveCoincidentTopologyPolygonOffsetFaces:Nm,getResolveCoincidentTopology:Rm,setResolveCoincidentTopology:Wi,setResolveCoincidentTopologyPolygonOffsetFaces:Mm,setResolveCoincidentTopologyToDefault:Lm,setResolveCoincidentTopologyToOff:km,setResolveCoincidentTopologyToPolygonOffset:Fm};function Mf(t,e,a){a.forEach(n=>{t[`get${n.method}`]=()=>e[n.key],t[`set${n.method}`]=(r,i)=>{e[n.key]={factor:r,offset:i}}})}const n0=["Polygon","Line","Point"],Vm={Polygon:{factor:2,offset:0},Line:{factor:1,offset:-1},Point:{factor:0,offset:-2}},ir={};Mf(ir,Vm,n0.map(t=>({key:t,method:`ResolveCoincidentTopology${t}OffsetParameters`})));function Bm(t,e){e.resolveCoincidentTopology===void 0&&(e.resolveCoincidentTopology=!1),k.setGet(t,e,["resolveCoincidentTopology"]),e.topologyOffset={Polygon:{factor:0,offset:0},Line:{factor:0,offset:0},Point:{factor:0,offset:0}},Object.keys(t0).forEach(a=>{t[a]=t0[a]}),Object.keys(ir).forEach(a=>{t[a]=ir[a]}),Mf(t,e.topologyOffset,n0.map(a=>({key:a,method:`RelativeCoincidentTopology${a}OffsetParameters`}))),t.getCoincidentTopologyPolygonOffsetParameters=()=>{const a=ir.getResolveCoincidentTopologyPolygonOffsetParameters(),n=t.getRelativeCoincidentTopologyPolygonOffsetParameters();return{factor:a.factor+n.factor,offset:a.offset+n.offset}},t.getCoincidentTopologyLineOffsetParameters=()=>{const a=ir.getResolveCoincidentTopologyLineOffsetParameters(),n=t.getRelativeCoincidentTopologyLineOffsetParameters();return{factor:a.factor+n.factor,offset:a.offset+n.offset}},t.getCoincidentTopologyPointOffsetParameter=()=>{const a=ir.getResolveCoincidentTopologyPointOffsetParameters(),n=t.getRelativeCoincidentTopologyPointOffsetParameters();return{factor:a.factor+n.factor,offset:a.offset+n.offset}}}var $i={implementCoincidentTopologyMethods:Bm,staticOffsetAPI:ir,otherStaticMethods:t0,CATEGORIES:n0};const Et={MIN_KNOWN_PASS:0,ACTOR_PASS:0,COMPOSITE_INDEX_PASS:1,ID_LOW24:2,ID_HIGH24:3,MAX_KNOWN_PASS:3};var Rf={PassTypes:Et};const{FieldAssociations:Lf}=nr,{staticOffsetAPI:Um,otherStaticMethods:Gm}=$i,{ColorMode:r0,ScalarMode:or,GetArray:a0}=Pi,{VectorMode:Im}=Zs,{VtkDataTypes:Pm}=pe;function Na(t){return()=>k.vtkErrorMacro(`vtkMapper::${t} - NOT IMPLEMENTED`)}function zm(t,e){e.classHierarchy.push("vtkMapper"),t.getBounds=()=>{const a=t.getInputData();return a?(e.static||t.update(),e.bounds=a.getBounds()):e.bounds=fn(),e.bounds},t.setForceCompileOnly=a=>{e.forceCompileOnly=a},t.setSelectionWebGLIdsToVTKIds=a=>{e.selectionWebGLIdsToVTKIds=a},t.createDefaultLookupTable=()=>{e.lookupTable=Ar.newInstance()},t.getColorModeAsString=()=>k.enumToString(r0,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>k.enumToString(or,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(a,n,r,i,s)=>{if(!a||!e.scalarVisibility)return{scalars:null,cellFLag:!1};let u=null,c=!1;if(n===or.DEFAULT)u=a.getPointData().getScalars(),u||(u=a.getCellData().getScalars(),c=!0);else if(n===or.USE_POINT_DATA)u=a.getPointData().getScalars();else if(n===or.USE_CELL_DATA)u=a.getCellData().getScalars(),c=!0;else if(n===or.USE_POINT_FIELD_DATA){const o=a.getPointData();r===a0.BY_ID?u=o.getArrayByIndex(i):u=o.getArrayByName(s)}else if(n===or.USE_CELL_FIELD_DATA){const o=a.getCellData();c=!0,r===a0.BY_ID?u=o.getArrayByIndex(i):u=o.getArrayByName(s)}else if(n===or.USE_FIELD_DATA){const o=a.getFieldData();r===a0.BY_ID?u=o.getArrayByIndex(i):u=o.getArrayByName(s)}return{scalars:u,cellFlag:c}},t.mapScalars=(a,n)=>{const r=t.getAbstractScalars(a,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!r){e.colorCoordinates=null,e.colorTextureMap=null,e.colorMapColors=null;return}const i=`${t.getMTime()}${r.getMTime()}${n}`;if(e.colorBuildString!==i){if(e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),t.canUseTextureMapForColoring(a))t.mapScalarsToTexture(r,n);else{e.colorCoordinates=null,e.colorTextureMap=null;const s=t.getLookupTable();s&&(s.build(),e.colorMapColors=s.mapScalars(r,e.colorMode,e.fieldDataTupleId))}e.colorBuildString=`${t.getMTime()}${r.getMTime()}${n}`}},t.scalarToTextureCoordinate=(a,n,r)=>{let i=.5,s=1;return Ri(a)||(s=.49,i=(a-n)*r,i>1e3?i=1e3:i<-1e3&&(i=-1e3)),{texCoordS:i,texCoordT:s}},t.createColorTextureCoordinates=(a,n,r,i,s,u,c,o,f)=>{const l=(u[1]-u[0])/o,h=[];h[0]=u[0]-l,h[1]=u[1]+l;const p=1/(h[1]-h[0]),d=n.getData(),y=a.getData();let m=0,S=0;if(s<0||s>=i)for(let v=0;v<r;++v){let g=0;for(let T=0;T<i;++T)g+=y[m]*y[m],m++;let x=Math.sqrt(g);f&&(x=Ar.applyLogScale(x,c,u));const C=t.scalarToTextureCoordinate(x,h[0],p);d[S]=C.texCoordS,d[S+1]=C.texCoordT,S+=2}else{m+=s;for(let v=0;v<r;++v){let g=y[m];f&&(g=Ar.applyLogScale(g,c,u));const x=t.scalarToTextureCoordinate(g,h[0],p);d[S]=x.texCoordS,d[S+1]=x.texCoordT,S+=2,m+=i}}},t.mapScalarsToTexture=(a,n)=>{const r=e.lookupTable.getRange(),i=e.lookupTable.usingLogScale();i&&Ar.getLogRange(r,r);const s=e.lookupTable.getAlpha();if(e.colorMapColors=null,e.colorTextureMap==null||t.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getMTime()>e.colorTextureMap.getMTime()||e.lookupTable.getAlpha()!==n){e.lookupTable.setAlpha(n),e.colorTextureMap=null,e.lookupTable.build();let u=e.lookupTable.getNumberOfAvailableColors();u>4094&&(u=4094),u<64&&(u=64),u+=2;const c=(r[1]-r[0])/(u-2),o=new Float64Array(u*2);for(let l=0;l<u;++l)o[l]=r[0]+l*c-c/2,i&&(o[l]=10**o[l]);for(let l=0;l<u;++l)o[l+u]=NaN;e.colorTextureMap=Ys.newInstance(),e.colorTextureMap.setExtent(0,u-1,0,1,0,0);const f=pe.newInstance({numberOfComponents:1,values:o});e.colorTextureMap.getPointData().setScalars(e.lookupTable.mapScalars(f,e.colorMode,0)),e.lookupTable.setAlpha(s)}if(!e.colorCoordinates||t.getMTime()>e.colorCoordinates.getMTime()||t.getInputData(0).getMTime()>e.colorCoordinates.getMTime()||e.lookupTable.getMTime()>e.colorCoordinates.getMTime()){e.colorCoordinates=null;const u=a.getNumberOfComponents(),c=a.getNumberOfTuples();e.colorCoordinates=pe.newInstance({numberOfComponents:2,values:new Float32Array(c*2)});let o=e.lookupTable.getVectorComponent();e.lookupTable.getVectorMode()===Im.MAGNITUDE&&a.getNumberOfComponents()>1&&(o=-1),t.createColorTextureCoordinates(a,e.colorCoordinates,c,u,o,r,e.lookupTable.getRange(),e.colorTextureMap.getPointData().getScalars().getNumberOfTuples()/2-2,i)}},t.getIsOpaque=()=>{const a=t.getInputData(),r=t.getAbstractScalars(a,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!e.scalarVisibility||r==null)return!0;const i=t.getLookupTable();return i?(i.build(),i.areScalarsOpaque(r,e.colorMode,-1)):!0},t.canUseTextureMapForColoring=a=>{if(!e.interpolateScalarsBeforeMapping||e.lookupTable&&e.lookupTable.getIndexedLookup())return!1;const n=t.getAbstractScalars(a,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName),r=n.scalars;return!(!r||n.cellFlag||e.colorMode===r0.DEFAULT&&r.getDataType()===Pm.UNSIGNED_CHAR||e.colorMode===r0.DIRECT_SCALARS)},t.clearColorArrays=()=>{e.colorMapColors=null,e.colorCoordinates=null,e.colorTextureMap=null},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let a=e.mtime;if(e.lookupTable!==null){const n=e.lookupTable.getMTime();a=n>a?n:a}return a},t.getPrimitiveCount=()=>{const a=t.getInputData();return{points:a.getPoints().getNumberOfValues()/3,verts:a.getVerts().getNumberOfValues()-a.getVerts().getNumberOfCells(),lines:a.getLines().getNumberOfValues()-2*a.getLines().getNumberOfCells(),triangles:a.getPolys().getNumberOfValues()-3*a.getPolys().getNumberOfCells()}},t.acquireInvertibleLookupTable=Na("AcquireInvertibleLookupTable"),t.valueToColor=Na("ValueToColor"),t.colorToValue=Na("ColorToValue"),t.useInvertibleColorFor=Na("UseInvertibleColorFor"),t.clearInvertibleColor=Na("ClearInvertibleColor"),t.processSelectorPixelBuffers=(a,n)=>{if(!a||!e.selectionWebGLIdsToVTKIds||!e.populateSelectionSettings)return;const r=a.getRawPixelBuffer(Et.ID_LOW24),i=a.getRawPixelBuffer(Et.ID_HIGH24),s=a.getCurrentPass(),u=a.getFieldAssociation();let c=null;u===Lf.FIELD_ASSOCIATION_POINTS?c=e.selectionWebGLIdsToVTKIds.points:u===Lf.FIELD_ASSOCIATION_CELLS&&(c=e.selectionWebGLIdsToVTKIds.cells),c&&n.forEach(o=>{if(s===Et.ID_LOW24){let f=0;i&&(f+=i[o],f*=256),f+=r[o+2],f*=256,f+=r[o+1],f*=256,f+=r[o];const l=c[f],h=a.getPixelBuffer(Et.ID_LOW24);h[o]=l&255,h[o+1]=(l&65280)>>8,h[o+2]=(l&16711680)>>16}else if(s===Et.ID_HIGH24&&i){let f=0;f+=i[o],f*=256,f+=r[o],f*=256,f+=r[o+1],f*=256,f+=r[o+2];const l=c[f],h=a.getPixelBuffer(Et.ID_HIGH24);h[o]=(l&4278190080)>>24}})}}const jm={colorMapColors:null,static:!1,lookupTable:null,scalarVisibility:!0,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,fieldDataTupleId:-1,populateSelectionSettings:!0,selectionWebGLIdsToVTKIds:null,interpolateScalarsBeforeMapping:!1,colorCoordinates:null,colorTextureMap:null,forceCompileOnly:0,useInvertibleColors:!1,invertibleScalars:null,customShaderAttributes:[]};function kf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,jm,a),ff.extend(t,e,a),k.get(t,e,["colorCoordinates","colorMapColors","colorTextureMap","selectionWebGLIdsToVTKIds"]),k.setGet(t,e,["colorByArrayName","arrayAccessMode","colorMode","fieldDataTupleId","interpolateScalarsBeforeMapping","lookupTable","populateSelectionSettings","renderTime","scalarMode","scalarVisibility","static","useLookupTableScalarRange","customShaderAttributes"]),k.setGetArray(t,e,["scalarRange"],2),$i.implementCoincidentTopologyMethods(t,e),zm(t,e)}var dn={newInstance:k.newInstance(kf,"vtkMapper"),extend:kf,...Um,...Gm,...Pi};function Ff(t){let e=0;return t.filter((a,n)=>n===e?(e+=a+1,!0):!1)}function Af(t){let e=0;for(let a=0;a<t.length;)a+=t[a]+1,e++;return e}const Wm={extractCellSizes:Ff,getNumberOfCells:Af};function $m(t,e){e.classHierarchy.push("vtkCellArray");const a={...t};t.getNumberOfCells=n=>(e.numberOfCells!==void 0&&!n||(e.cellSizes?e.numberOfCells=e.cellSizes.length:e.numberOfCells=Af(t.getData())),e.numberOfCells),t.getCellSizes=n=>(e.cellSizes!==void 0&&!n||(e.cellSizes=Ff(t.getData())),e.cellSizes),t.resize=n=>{const r=t.getNumberOfTuples();a.resize(n);const i=t.getNumberOfTuples();i<r&&(i===0?(e.numberOfCells=0,e.cellSizes=[]):(e.numberOfCells=void 0,e.cellSizes=void 0))},t.setData=n=>{a.setData(n,1),e.numberOfCells=void 0,e.cellSizes=void 0},t.getCell=n=>{let r=n;const i=e.values[r++];return e.values.subarray(r,r+i)},t.insertNextCell=n=>{const r=t.getNumberOfCells();return t.insertNextTuples([n.length,...n]),++e.numberOfCells,e.cellSizes!=null&&e.cellSizes.push(n.length),r}}function Hm(t){return{empty:!0,numberOfComponents:1,dataType:Ne.UNSIGNED_INT,...t}}function Vf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};pe.extend(t,e,Hm(a)),$m(t,e)}var Ln={newInstance:k.newInstance(Vf,"vtkCellArray"),extend:Vf,...Wm};const{vtkErrorMacro:Km}=k,Xm=[1,-1,1,-1,1,-1];function qm(t,e){e.classHierarchy.push("vtkPoints"),t.getNumberOfPoints=t.getNumberOfTuples,t.setNumberOfPoints=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3;t.getNumberOfPoints()!==a&&(e.size=a*n,e.values=k.newTypedArray(e.dataType,e.size),t.setNumberOfComponents(n),t.modified())},t.setPoint=function(a){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.setTuple(a,r)},t.getPoint=t.getTuple,t.findPoint=t.findTuple,t.insertNextPoint=(a,n,r)=>t.insertNextTuple([a,n,r]),t.getBounds=()=>{if(t.getNumberOfComponents()===3){const r=t.getRange(0);e.bounds[0]=r[0],e.bounds[1]=r[1];const i=t.getRange(1);e.bounds[2]=i[0],e.bounds[3]=i[1];const s=t.getRange(2);return e.bounds[4]=s[0],e.bounds[5]=s[1],e.bounds}if(t.getNumberOfComponents()!==2)return Km(`getBounds called on an array with components of
        ${t.getNumberOfComponents()}`),Xm;const a=t.getRange(0);e.bounds[0]=a[0],e.bounds[1]=a[1];const n=t.getRange(1);return e.bounds[2]=n[0],e.bounds[3]=n[1],e.bounds[4]=0,e.bounds[5]=0,e.bounds},t.computeBounds=t.getBounds,t.setNumberOfComponents(e.numberOfComponents<2?3:e.numberOfComponents)}const Ym={empty:!0,numberOfComponents:3,dataType:Ne.FLOAT,bounds:[1,-1,1,-1,1,-1]};function Bf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ym,a),pe.extend(t,e,a),qm(t,e)}var vn={newInstance:k.newInstance(Bf,"vtkPoints"),extend:Bf};function Jm(t,e){e.classHierarchy.push("vtkCell"),t.initialize=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(n){e.pointsIds=n;let r=e.points.getData();r.length!==3*e.pointsIds.length&&(r=k.newTypedArray(a.getDataType(),3*e.pointsIds.length));const i=a.getData();e.pointsIds.forEach((s,u)=>{let c=3*s,o=3*u;r[o]=i[c],r[++o]=i[++c],r[++o]=i[++c]}),e.points.setData(r)}else{e.points=a,e.pointsIds=new Array(a.getNumberOfPoints());for(let r=a.getNumberOfPoints()-1;r>=0;--r)e.pointsIds[r]=r}},t.getBounds=()=>{const a=e.points.getNumberOfPoints(),n=[];if(a){e.points.getPoint(0,n),e.bounds[0]=n[0],e.bounds[1]=n[0],e.bounds[2]=n[1],e.bounds[3]=n[1],e.bounds[4]=n[2],e.bounds[5]=n[2];for(let r=1;r<a;r++)e.points.getPoint(r,n),e.bounds[0]=n[0]<e.bounds[0]?n[0]:e.bounds[0],e.bounds[1]=n[0]>e.bounds[1]?n[0]:e.bounds[1],e.bounds[2]=n[1]<e.bounds[2]?n[1]:e.bounds[2],e.bounds[3]=n[1]>e.bounds[3]?n[1]:e.bounds[3],e.bounds[4]=n[2]<e.bounds[4]?n[2]:e.bounds[4],e.bounds[5]=n[2]>e.bounds[5]?n[2]:e.bounds[5]}else Fr(e.bounds);return e.bounds},t.getLength2=()=>{t.getBounds();let a=0,n=0;for(let r=0;r<3;r++)n=e.bounds[2*r+1]-e.bounds[2*r],a+=n*n;return a},t.getParametricDistance=a=>{let n,r=0;for(let i=0;i<3;i++)a[i]<0?n=-a[i]:a[i]>1?n=a[i]-1:n=0,n>r&&(r=n);return r},t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.deepCopy=a=>{a.initialize(e.points,e.pointsIds)},t.getCellDimension=()=>{},t.intersectWithLine=(a,n,r,i,s,u,c)=>{},t.evaluatePosition=(a,n,r,i,s,u)=>{k.vtkErrorMacro("vtkCell.evaluatePosition is not implemented.")}}const Zm={bounds:[-1,-1,-1,-1,-1,-1],pointsIds:[]};function Uf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Zm,a),k.obj(t,e),e.points||(e.points=vn.newInstance()),k.get(t,e,["points","pointsIds"]),Jm(t,e)}var Hi={newInstance:k.newInstance(Uf,"vtkCell"),extend:Uf};function Qm(t,e){let a=e;for(e>=t.array.length&&(a+=t.array.length);a>t.array.length;)t.array.push({ncells:0,cells:null});t.array.length=a}function e5(t,e){e.classHierarchy.push("vtkCellLinks"),t.buildLinks=a=>{const n=a.getPoints().getNumberOfPoints(),r=a.getNumberOfCells(),i=new Uint32Array(n);if(a.isA("vtkPolyData")){for(let s=0;s<r;++s){const{cellPointIds:u}=a.getCellPoints(s);u.forEach(c=>{t.incrementLinkCount(c)})}t.allocateLinks(n),e.maxId=n-1;for(let s=0;s<r;++s){const{cellPointIds:u}=a.getCellPoints(s);u.forEach(c=>{t.insertCellReference(c,i[c]++,s)})}}else{for(let s=0;s<r;s++)Hi.newInstance().getPointsIds().forEach(c=>{t.incrementLinkCount(c)});t.allocateLinks(n),e.maxId=n-1;for(let s=0;s<r;++s)Hi.newInstance().getPointsIds().forEach(c=>{t.insertCellReference(c,i[c]++,s)})}},t.allocate=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.array=Array(a).fill().map(()=>({ncells:0,cells:null})),e.extend=n,e.maxId=-1},t.initialize=()=>{e.array=null},t.getLink=a=>e.array[a],t.getNcells=a=>e.array[a].ncells,t.getCells=a=>e.array[a].cells,t.insertNextPoint=a=>{e.array.push({ncells:a,cells:Array(a)}),++e.maxId},t.insertNextCellReference=(a,n)=>{e.array[a].cells[e.array[a].ncells++]=n},t.deletePoint=a=>{e.array[a].ncells=0,e.array[a].cells=null},t.removeCellReference=(a,n)=>{e.array[n].cells=e.array[n].cells.filter(r=>r!==a),e.array[n].ncells=e.array[n].cells.length},t.addCellReference=(a,n)=>{e.array[n].cells[e.array[n].ncells++]=a},t.resizeCellList=(a,n)=>{e.array[a].cells.length=n},t.squeeze=()=>{Qm(e,e.maxId+1)},t.reset=()=>{e.maxId=-1},t.deepCopy=a=>{e.array=[...a.array],e.extend=a.extend,e.maxId=a.maxId},t.incrementLinkCount=a=>{++e.array[a].ncells},t.allocateLinks=a=>{for(let n=0;n<a;++n)e.array[n].cells=new Array(e.array[n].ncells)},t.insertCellReference=(a,n,r)=>{e.array[a].cells[n]=r}}const t5={array:null,maxId:0,extend:0};function Gf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,t5,a),k.obj(t,e),e5(t,e)}var n5={newInstance:k.newInstance(Gf,"vtkCellLinks"),extend:Gf};const Ye={VTK_EMPTY_CELL:0,VTK_VERTEX:1,VTK_POLY_VERTEX:2,VTK_LINE:3,VTK_POLY_LINE:4,VTK_TRIANGLE:5,VTK_TRIANGLE_STRIP:6,VTK_POLYGON:7,VTK_PIXEL:8,VTK_QUAD:9,VTK_TETRA:10,VTK_VOXEL:11,VTK_HEXAHEDRON:12,VTK_WEDGE:13,VTK_PYRAMID:14,VTK_PENTAGONAL_PRISM:15,VTK_HEXAGONAL_PRISM:16,VTK_QUADRATIC_EDGE:21,VTK_QUADRATIC_TRIANGLE:22,VTK_QUADRATIC_QUAD:23,VTK_QUADRATIC_POLYGON:36,VTK_QUADRATIC_TETRA:24,VTK_QUADRATIC_HEXAHEDRON:25,VTK_QUADRATIC_WEDGE:26,VTK_QUADRATIC_PYRAMID:27,VTK_BIQUADRATIC_QUAD:28,VTK_TRIQUADRATIC_HEXAHEDRON:29,VTK_QUADRATIC_LINEAR_QUAD:30,VTK_QUADRATIC_LINEAR_WEDGE:31,VTK_BIQUADRATIC_QUADRATIC_WEDGE:32,VTK_BIQUADRATIC_QUADRATIC_HEXAHEDRON:33,VTK_BIQUADRATIC_TRIANGLE:34,VTK_CUBIC_LINE:35,VTK_CONVEX_POINT_SET:41,VTK_POLYHEDRON:42,VTK_PARAMETRIC_CURVE:51,VTK_PARAMETRIC_SURFACE:52,VTK_PARAMETRIC_TRI_SURFACE:53,VTK_PARAMETRIC_QUAD_SURFACE:54,VTK_PARAMETRIC_TETRA_REGION:55,VTK_PARAMETRIC_HEX_REGION:56,VTK_HIGHER_ORDER_EDGE:60,VTK_HIGHER_ORDER_TRIANGLE:61,VTK_HIGHER_ORDER_QUAD:62,VTK_HIGHER_ORDER_POLYGON:63,VTK_HIGHER_ORDER_TETRAHEDRON:64,VTK_HIGHER_ORDER_WEDGE:65,VTK_HIGHER_ORDER_PYRAMID:66,VTK_HIGHER_ORDER_HEXAHEDRON:67,VTK_LAGRANGE_CURVE:68,VTK_LAGRANGE_TRIANGLE:69,VTK_LAGRANGE_QUADRILATERAL:70,VTK_LAGRANGE_TETRAHEDRON:71,VTK_LAGRANGE_HEXAHEDRON:72,VTK_LAGRANGE_WEDGE:73,VTK_LAGRANGE_PYRAMID:74,VTK_NUMBER_OF_CELL_TYPES:75},i0=["vtkEmptyCell","vtkVertex","vtkPolyVertex","vtkLine","vtkPolyLine","vtkTriangle","vtkTriangleStrip","vtkPolygon","vtkPixel","vtkQuad","vtkTetra","vtkVoxel","vtkHexahedron","vtkWedge","vtkPyramid","vtkPentagonalPrism","vtkHexagonalPrism","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkQuadraticEdge","vtkQuadraticTriangle","vtkQuadraticQuad","vtkQuadraticTetra","vtkQuadraticHexahedron","vtkQuadraticWedge","vtkQuadraticPyramid","vtkBiQuadraticQuad","vtkTriQuadraticHexahedron","vtkQuadraticLinearQuad","vtkQuadraticLinearWedge","vtkBiQuadraticQuadraticWedge","vtkBiQuadraticQuadraticHexahedron","vtkBiQuadraticTriangle","vtkCubicLine","vtkQuadraticPolygon","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkConvexPointSet","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","UnknownClass","vtkParametricCurve","vtkParametricSurface","vtkParametricTriSurface","vtkParametricQuadSurface","vtkParametricTetraRegion","vtkParametricHexRegion","UnknownClass","UnknownClass","UnknownClass","vtkHigherOrderEdge","vtkHigherOrderTriangle","vtkHigherOrderQuad","vtkHigherOrderPolygon","vtkHigherOrderTetrahedron","vtkHigherOrderWedge","vtkHigherOrderPyramid","vtkHigherOrderHexahedron"];function r5(t){return t<i0.length?i0[t]:"UnknownClass"}function a5(t){return i0.findIndex(t)}function i5(t){return t<Ye.VTK_QUADRATIC_EDGE||t===Ye.VTK_CONVEX_POINT_SET||t===Ye.VTK_POLYHEDRON}function o5(t){return t===Ye.VTK_TRIANGLE_STRIP||t===Ye.VTK_POLY_LINE||t===Ye.VTK_POLY_VERTEX}const s5={getClassNameFromTypeId:r5,getTypeIdFromClassName:a5,isLinear:i5,hasSubCells:o5};function u5(t,e){e.classHierarchy.push("vtkCellTypes"),t.allocate=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:512,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;e.size=a>0?a:1,e.extend=n>0?n:1,e.maxId=-1,e.typeArray=new Uint8Array(a),e.locationArray=new Uint32Array(a)},t.insertCell=(a,n,r)=>{e.typeArray[a]=n,e.locationArray[a]=r,a>e.maxId&&(e.maxId=a)},t.insertNextCell=(a,n)=>(t.insertCell(++e.maxId,a,n),e.maxId),t.setCellTypes=(a,n,r)=>{e.size=a,e.typeArray=n,e.locationArray=r,e.maxId=a-1},t.getCellLocation=a=>e.locationArray[a],t.deleteCell=a=>{e.typeArray[a]=Ye.VTK_EMPTY_CELL},t.getNumberOfTypes=()=>e.maxId+1,t.isType=a=>{const n=t.getNumberOfTypes();for(let r=0;r<n;++r)if(a===t.getCellType(r))return!0;return!1},t.insertNextType=a=>t.insertNextCell(a,-1),t.getCellType=a=>e.typeArray[a],t.reset=()=>{e.maxId=-1},t.deepCopy=a=>{t.allocate(a.getSize(),a.getExtend()),e.typeArray.set(a.getTypeArray()),e.locationArray.set(a.getLocationArray()),e.maxId=a.getMaxId()}}const c5={size:0,maxId:-1,extend:1e3};function If(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c5,a),k.obj(t,e),k.get(t,e,["size","maxId","extend"]),k.getArray(t,e,["typeArray","locationArray"]),u5(t,e)}var l5={newInstance:k.newInstance(If,"vtkCellTypes"),extend:If,...s5},Pf={IntersectionState:{NO_INTERSECTION:0,YES_INTERSECTION:1,ON_LINE:2}};const{IntersectionState:Ki}=Pf;function Vr(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const r={t:Number.MIN_VALUE,distance:0},i=[];let s;i[0]=a[0]-e[0],i[1]=a[1]-e[1],i[2]=a[2]-e[2];const u=i[0]*(t[0]-e[0])+i[1]*(t[1]-e[1])+i[2]*(t[2]-e[2]),c=we(i,i);let o=1e-5*u;return c!==0&&(r.t=u/c),o<0&&(o=-o),-o<c&&c<o||c<=0||r.t<0?s=e:r.t>1?s=a:(s=i,i[0]=e[0]+r.t*i[0],i[1]=e[1]+r.t*i[1],i[2]=e[2]+r.t*i[2]),n&&(n[0]=s[0],n[1]=s[1],n[2]=s[2]),r.distance=Ft(s,t),r}function zf(t,e,a,n,r,i){const s=[],u=[],c=[];r[0]=0,i[0]=0,ht(e,t,s),ht(n,a,u),ht(a,t,c);const o=[we(s,s),-we(s,u),-we(s,u),we(u,u)],f=[];if(f[0]=we(s,c),f[1]=-we(u,c),pl(o,f,2)===0){let l=Number.MAX_VALUE;const h=[t,e,a,n],p=[a,a,t,t],d=[n,n,e,e];i[0],i[0],r[0],r[0],r[0],r[0],i[0],i[0];let y;for(let m=0;m<4;m++)y=Vr(h[m],p[m],d[m]),y.distance<l&&(l=y.distance);return Ki.ON_LINE}return r[0]=f[0],i[0]=f[1],r[0]>=0&&r[0]<=1&&i[0]>=0&&i[0]<=1?Ki.YES_INTERSECTION:Ki.NO_INTERSECTION}const f5={distanceToLine:Vr,intersection:zf};function h5(t,e){e.classHierarchy.push("vtkLine");function a(n){return n>=0&&n<=1}t.getCellDimension=()=>1,t.intersectWithLine=(n,r,i,s,u)=>{const c={intersect:0,t:Number.MAX_VALUE,subId:0,betweenPoints:null};u[1]=0,u[2]=0;const o=[],f=[],l=[];e.points.getPoint(0,f),e.points.getPoint(1,l);const h=[],p=[],d=zf(n,r,f,l,h,p);if(c.t=h[0],c.betweenPoints=a(c.t),u[0]=p[0],d===Ki.YES_INTERSECTION){for(let y=0;y<3;y++)s[y]=f[y]+u[0]*(l[y]-f[y]),o[y]=n[y]+c.t*(r[y]-n[y]);if(Ft(s,o)<=i*i)return c.intersect=1,c}else{let y;if(c.t<0)return y=Vr(n,f,l,s),y.distance<=i*i&&(c.t=0,c.intersect=1,c.betweenPoints=!0),c;if(c.t>1)return y=Vr(r,f,l,s),y.distance<=i*i&&(c.t=1,c.intersect=1,c.betweenPoints=!0),c;if(u[0]<0)return u[0]=0,y=Vr(f,n,r,s),c.t=y.t,y.distance<=i*i&&(c.intersect=1),c;if(u[0]>1)return u[0]=1,y=Vr(l,n,r,s),c.t=y.t,y.distance<=i*i&&(c.intersect=1),c}return c},t.evaluateLocation=(n,r,i)=>{const s=[],u=[];e.points.getPoint(0,s),e.points.getPoint(1,u);for(let c=0;c<3;c++)r[c]=s[c]+n[0]*(u[c]-s[c]);i[0]=1-n[0],i[1]=n[0]},t.evaluateOrientation=(n,r,i)=>e.orientations?(oi(r,e.orientations[0],e.orientations[1],n[0]),i[0]=1-n[0],i[1]=n[0],!0):!1}const p5={orientations:null};function jf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p5,a),Hi.extend(t,e,a),k.setGet(t,e,["orientations"]),h5(t,e)}var Ut={newInstance:k.newInstance(jf,"vtkLine"),extend:jf,...f5,...Pf};function g5(t,e){e.classHierarchy.push("vtkPointSet"),e.points?e.points=xt(e.points):e.points=vn.newInstance(),t.getNumberOfPoints=()=>e.points.getNumberOfPoints(),t.getBounds=()=>e.points.getBounds(),t.computeBounds=()=>{t.getBounds()};const a=t.shallowCopy;t.shallowCopy=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a(n,r),e.points=vn.newInstance(),e.points.shallowCopy(n.getPoints())}}const d5={};function Wf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,d5,a),nr.extend(t,e,a),k.setGet(t,e,["points"]),g5(t,e)}var v5={newInstance:k.newInstance(Wf,"vtkPointSet"),extend:Wf};function o0(t,e,a,n){const r=a[0]-e[0],i=a[1]-e[1],s=a[2]-e[2],u=t[0]-e[0],c=t[1]-e[1],o=t[2]-e[2];n[0]=i*o-s*c,n[1]=s*u-r*o,n[2]=r*c-i*u}function Xi(t,e,a,n){o0(t,e,a,n);const r=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);r!==0&&(n[0]/=r,n[1]/=r,n[2]/=r)}function y5(t,e,a,n,r,i){let s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1e-6,u=!1;const c=[],o=[],f=[],l=[],h=[];Xi(t,e,a,l),Xi(n,r,i,h);const p=-we(l,t),d=-we(h,n),y=[we(h,t)+d,we(h,e)+d,we(h,a)+d];if(y[0]*y[1]>s&&y[0]*y[2]>s)return{intersect:!1,coplanar:u,pt1:c,pt2:o,surfaceId:f};const m=[we(l,n)+p,we(l,r)+p,we(l,i)+p];if(m[0]*m[1]>s&&m[0]*m[2]>s)return{intersect:!1,coplanar:u,pt1:c,pt2:o,surfaceId:f};if(Math.abs(l[0]-h[0])<1e-9&&Math.abs(l[1]-h[1])<1e-9&&Math.abs(l[2]-h[2])<1e-9&&Math.abs(p-d)<1e-9)return u=!0,{intersect:!1,coplanar:u,pt1:c,pt2:o,surfaceId:f};const S=[t,e,a],v=[n,r,i],g=we(l,h),x=(p-d*g)/(g*g-1),C=(d-p*g)/(g*g-1),T=[x*l[0]+C*h[0],x*l[1]+C*h[1],x*l[2]+C*h[2]],w=ut(l,h,[]);nt(w);let _=0,E=0;const D=[],b=[];let N=50,R=50;for(let I=0;I<3;I++){const $=I,U=(I+1)%3,B=Mn.intersectWithLine(S[$],S[U],n,h);B.intersection&&B.t>0-s&&B.t<1+s&&(B.t<1+s&&B.t>1-s&&(N=_),D[_++]=we(B.x,w)-we(T,w));const F=Mn.intersectWithLine(v[$],v[U],t,l);F.intersection&&F.t>0-s&&F.t<1+s&&(F.t<1+s&&F.t>1-s&&(R=E),b[E++]=we(F.x,w)-we(T,w))}if(_>2){_--;const I=D[2];D[2]=D[N],D[N]=I}if(E>2){E--;const I=b[2];b[2]=b[R],b[R]=I}if(_!==2||E!==2)return{intersect:!1,coplanar:u,pt1:c,pt2:o,surfaceId:f};if(Number.isNaN(D[0])||Number.isNaN(D[1])||Number.isNaN(b[0])||Number.isNaN(b[1]))return{intersect:!1,coplanar:u,pt1:c,pt2:o,surfaceId:f};if(D[0]>D[1]){const I=D[1];D[1]=D[0],D[0]=I}if(b[0]>b[1]){const I=b[1];b[1]=b[0],b[0]=I}let M,A;return D[1]<b[0]||b[1]<D[0]?{intersect:!1,coplanar:u,pt1:c,pt2:o,surfaceId:f}:(D[0]<b[0]?D[1]<b[1]?(f[0]=2,f[1]=1,M=b[0],A=D[1]):(f[0]=2,f[1]=2,M=b[0],A=b[1]):D[1]<b[1]?(f[0]=1,f[1]=1,M=D[0],A=D[1]):(f[0]=1,f[1]=2,M=D[0],A=b[1]),Es(T,w,M,c),Es(T,w,A,o),{intersect:!0,coplanar:u,pt1:c,pt2:o,surfaceId:f})}const m5={computeNormalDirection:o0,computeNormal:Xi,intersectWithTriangle:y5};function x5(t,e){e.classHierarchy.push("vtkTriangle"),t.getCellDimension=()=>2,t.intersectWithLine=(a,n,r,i,s)=>{const u={subId:0,t:Number.MAX_VALUE,intersect:0,betweenPoints:!1};s[2]=0;const c=[],o=r*r,f=[],l=[],h=[];e.points.getPoint(0,f),e.points.getPoint(1,l),e.points.getPoint(2,h);const p=[],d=[];if(Xi(f,l,h,p),p[0]!==0||p[1]!==0||p[2]!==0){const g=Mn.intersectWithLine(a,n,f,p);if(u.betweenPoints=g.betweenPoints,u.t=g.t,i[0]=g.x[0],i[1]=g.x[1],i[2]=g.x[2],!g.intersection)return s[0]=0,s[1]=0,u.intersect=0,u;const x=t.evaluatePosition(i,c,s,d);if(x.evaluation>=0)return x.dist2<=o?(u.intersect=1,u):(u.intersect=x.evaluation,u)}const y=Ft(f,l),m=Ft(l,h),S=Ft(h,f);e.line||(e.line=Ut.newInstance()),y>m&&y>S?(e.line.getPoints().setPoint(0,f),e.line.getPoints().setPoint(1,l)):m>S&&m>y?(e.line.getPoints().setPoint(0,l),e.line.getPoints().setPoint(1,h)):(e.line.getPoints().setPoint(0,h),e.line.getPoints().setPoint(1,f));const v=e.line.intersectWithLine(a,n,r,i,s);if(u.betweenPoints=v.betweenPoints,u.t=v.t,v.intersect){const g=[],x=[],C=[];for(let T=0;T<3;T++)g[T]=f[T]-h[T],x[T]=l[T]-h[T],C[T]=i[T]-h[T];return s[0]=we(C,g)/S,s[1]=we(C,x)/m,u.intersect=1,u}return s[0]=0,s[1]=0,u.intersect=0,u},t.evaluatePosition=(a,n,r,i)=>{const s={subId:0,dist2:0,evaluation:-1};let u,c;const o=[],f=[],l=[],h=[];let p;const d=[],y=[],m=[];let S=0,v=0;const g=[];let x,C,T,w=[];const _=[],E=[],D=[];s.subId=0,r[2]=0,e.points.getPoint(1,o),e.points.getPoint(2,f),e.points.getPoint(0,l),o0(o,f,l,h),Mn.generalizedProjectPoint(a,o,h,D);let b=0;for(u=0;u<3;u++)h[u]<0?p=-h[u]:p=h[u],p>b&&(b=p,v=u);for(c=0,u=0;u<3;u++)u!==v&&(g[c++]=u);for(u=0;u<2;u++)d[u]=D[g[u]]-l[g[u]],y[u]=o[g[u]]-l[g[u]],m[u]=f[g[u]]-l[g[u]];if(S=rt(y,m),S===0)return r[0]=0,r[1]=0,s.evaluation=-1,s;if(r[0]=rt(d,m)/S,r[1]=rt(y,d)/S,i[0]=1-(r[0]+r[1]),i[1]=r[0],i[2]=r[1],i[0]>=0&&i[0]<=1&&i[1]>=0&&i[1]<=1&&i[2]>=0&&i[2]<=1)n&&(s.dist2=Ft(D,a),n[0]=D[0],n[1]=D[1],n[2]=D[2]),s.evaluation=1;else{let N;if(n){if(i[1]<0&&i[2]<0)for(x=Ft(a,l),C=Ut.distanceToLine(a,o,l,N,_),T=Ut.distanceToLine(a,l,f,N,E),x<C?(s.dist2=x,w=l):(s.dist2=C,w=_),T<s.dist2&&(s.dist2=T,w=E),u=0;u<3;u++)n[u]=w[u];else if(i[2]<0&&i[0]<0)for(x=Ft(a,o),C=Ut.distanceToLine(a,o,l,N,_),T=Ut.distanceToLine(a,o,f,N,E),x<C?(s.dist2=x,w=o):(s.dist2=C,w=_),T<s.dist2&&(s.dist2=T,w=E),u=0;u<3;u++)n[u]=w[u];else if(i[1]<0&&i[0]<0)for(x=Ft(a,f),C=Ut.distanceToLine(a,f,l,N,_),T=Ut.distanceToLine(a,o,f,N,E),x<C?(s.dist2=x,w=f):(s.dist2=C,w=_),T<s.dist2&&(s.dist2=T,w=E),u=0;u<3;u++)n[u]=w[u];else if(i[0]<0){const R=Ut.distanceToLine(a,o,f,n);s.dist2=R.distance}else if(i[1]<0){const R=Ut.distanceToLine(a,f,l,n);s.dist2=R.distance}else if(i[2]<0){const R=Ut.distanceToLine(a,o,l,n);s.dist2=R.distance}}s.evaluation=0}return s},t.evaluateLocation=(a,n,r)=>{const i=[],s=[],u=[];e.points.getPoint(0,i),e.points.getPoint(1,s),e.points.getPoint(2,u);const c=1-a[0]-a[1];for(let o=0;o<3;o++)n[o]=i[o]*c+s[o]*a[0]+u[o]*a[1];r[0]=c,r[1]=a[0],r[2]=a[1]},t.getParametricDistance=a=>{let n,r=0;const i=[];i[0]=a[0],i[1]=a[1],i[2]=1-a[0]-a[1];for(let s=0;s<3;s++)i[s]<0?n=-i[s]:i[s]>1?n=i[s]-1:n=0,n>r&&(r=n);return r}}const S5={};function $f(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,S5,a),Hi.extend(t,e,a),x5(t,e)}var C5={newInstance:k.newInstance($f,"vtkTriangle"),extend:$f,...m5};const s0=["verts","lines","polys","strips"],{vtkWarningMacro:Hf}=k,T5={[Ye.VTK_LINE]:Ut,[Ye.VTK_POLY_LINE]:Ut,[Ye.VTK_TRIANGLE]:C5};function w5(t,e){e.classHierarchy.push("vtkPolyData");function a(r){return r.replace(/(?:^\w|[A-Z]|\b\w)/g,i=>i.toUpperCase()).replace(/\s+/g,"")}s0.forEach(r=>{t[`getNumberOf${a(r)}`]=()=>e[r].getNumberOfCells(),e[r]?e[r]=xt(e[r]):e[r]=Ln.newInstance()}),t.getNumberOfCells=()=>s0.reduce((r,i)=>r+e[i].getNumberOfCells(),0);const n=t.shallowCopy;t.shallowCopy=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n(r,i),s0.forEach(s=>{e[s]=Ln.newInstance(),e[s].shallowCopy(r.getReferenceByName(s))})},t.buildCells=()=>{const r=t.getNumberOfVerts(),i=t.getNumberOfLines(),s=t.getNumberOfPolys(),u=t.getNumberOfStrips(),c=r+i+s+u,o=new Uint8Array(c);let f=o;const l=new Uint32Array(c);let h=l;if(r){let p=0;e.verts.getCellSizes().forEach((d,y)=>{h[y]=p,f[y]=d>1?Ye.VTK_POLY_VERTEX:Ye.VTK_VERTEX,p+=d+1}),h=h.subarray(r),f=f.subarray(r)}if(i){let p=0;e.lines.getCellSizes().forEach((d,y)=>{h[y]=p,f[y]=d>2?Ye.VTK_POLY_LINE:Ye.VTK_LINE,d===1&&Hf("Building VTK_LINE ",y," with only one point, but VTK_LINE needs at least two points. Check the input."),p+=d+1}),h=h.subarray(i),f=f.subarray(i)}if(s){let p=0;e.polys.getCellSizes().forEach((d,y)=>{switch(h[y]=p,d){case 3:f[y]=Ye.VTK_TRIANGLE;break;case 4:f[y]=Ye.VTK_QUAD;break;default:f[y]=Ye.VTK_POLYGON;break}d<3&&Hf("Building VTK_TRIANGLE ",y," with less than three points, but VTK_TRIANGLE needs at least three points. Check the input."),p+=d+1}),h+=h.subarray(s),f+=f.subarray(s)}if(u){let p=0;f.fill(Ye.VTK_TRIANGLE_STRIP,0,u),e.strips.getCellSizes().forEach((d,y)=>{h[y]=p,p+=d+1})}e.cells=l5.newInstance(),e.cells.setCellTypes(c,o,l)},t.buildLinks=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;e.cells===void 0&&t.buildCells(),e.links=n5.newInstance(),r>0?e.links.allocate(r):e.links.allocate(t.getPoints().getNumberOfPoints()),e.links.buildLinks(t)},t.getCellType=r=>e.cells.getCellType(r),t.getCellPoints=r=>{const i=t.getCellType(r);let s=null;switch(i){case Ye.VTK_VERTEX:case Ye.VTK_POLY_VERTEX:s=e.verts;break;case Ye.VTK_LINE:case Ye.VTK_POLY_LINE:s=e.lines;break;case Ye.VTK_TRIANGLE:case Ye.VTK_QUAD:case Ye.VTK_POLYGON:s=e.polys;break;case Ye.VTK_TRIANGLE_STRIP:s=e.strips;break;default:return s=null,{type:0,cellPointIds:null}}const u=e.cells.getCellLocation(r),c=s.getCell(u);return{cellType:i,cellPointIds:c}},t.getPointCells=r=>e.links.getCells(r),t.getCellEdgeNeighbors=(r,i,s)=>{const u=e.links.getLink(i),c=e.links.getLink(s);return u.cells.filter(o=>o!==r&&c.cells.indexOf(o)!==-1)},t.getCell=function(r){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const s=t.getCellPoints(r),u=i||T5[s.cellType].newInstance();return u.initialize(t.getPoints(),s.cellPointIds),u}}const _5={};function Kf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_5,a),v5.extend(t,e,a),k.get(t,e,["cells","links"]),k.setGet(t,e,["verts","lines","polys","strips"]),w5(t,e)}var je={newInstance:k.newInstance(Kf,"vtkPolyData"),extend:Kf};function E5(t,e){e.classHierarchy.push("vtkTexture"),t.imageLoaded=()=>{e.image.removeEventListener("load",t.imageLoaded),e.imageLoaded=!0,t.modified()},t.setJsImageData=a=>{e.jsImageData!==a&&(a!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.canvas=null),e.jsImageData=a,e.imageLoaded=!0,t.modified())},t.setCanvas=a=>{e.canvas!==a&&(a!==null&&(t.setInputData(null),t.setInputConnection(null),e.image=null,e.jsImageData=null),e.canvas=a,t.modified())},t.setImage=a=>{e.image!==a&&(a!==null&&(t.setInputData(null),t.setInputConnection(null),e.canvas=null,e.jsImageData=null),e.image=a,e.imageLoaded=!1,a.complete?t.imageLoaded():a.addEventListener("load",t.imageLoaded),t.modified())},t.getDimensionality=()=>{let a=0,n=0,r=1;if(t.getInputData()){const s=t.getInputData();a=s.getDimensions()[0],n=s.getDimensions()[1],r=s.getDimensions()[2]}return e.jsImageData&&(a=e.jsImageData.width,n=e.jsImageData.height),e.canvas&&(a=e.canvas.width,n=e.canvas.height),e.image&&(a=e.image.width,n=e.image.height),(a>1)+(n>1)+(r>1)},t.getInputAsJsImageData=()=>{if(!e.imageLoaded||t.getInputData())return null;if(e.jsImageData)return e.jsImageData();if(e.canvas)return e.canvas.getContext("2d").getImageData(0,0,e.canvas.width,e.canvas.height);if(e.image){const a=document.createElement("canvas");a.width=e.image.width,a.height=e.image.height;const n=a.getContext("2d");return n.translate(0,a.height),n.scale(1,-1),n.drawImage(e.image,0,0,e.image.width,e.image.height),n.getImageData(0,0,a.width,a.height)}return null}}const D5=(t,e,a,n)=>{const r=[1,2,1],i=4,s=r,u=i,c=t.length/(e*a);let o=e,f=a,l=t;const h=[l];for(let p=0;p<n;p++){const d=[...l];o/=2,f/=2,l=new Uint8ClampedArray(o*f*c);const y=c*o;let m=0;for(let v=0;v<l.length;v+=c){v%y===0&&(m+=2*c*o);for(let g=0;g<c;g++){let x=d[m+g];x+=d[m+c+g],x+=d[m-2*y+g],x+=d[m-2*y+c+g],x/=4,l[v+g]=x}m+=2*c}let S=[...l];for(let v=0;v<l.length;v+=c)for(let g=0;g<c;g++){let x=-(s.length-1)/2,C=u,T=0;for(let w=0;w<s.length;w++){let _=v+g+x*c;const E=_%y-(v+g)%y;E>c&&(_+=y),E<-c&&(_-=y),S[_]?T+=S[_]*s[w]:C-=s[w],x+=1}l[v+g]=T/C}S=[...l];for(let v=0;v<l.length;v+=c)for(let g=0;g<c;g++){let x=-(s.length-1)/2,C=u,T=0;for(let w=0;w<s.length;w++){const _=v+g+x*y;S[_]?T+=S[_]*s[w]:C-=s[w],x+=1}l[v+g]=T/C}h.push(l)}return h},b5={image:null,canvas:null,jsImageData:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function Xf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,b5,a),k.obj(t,e),k.algo(t,e,6,0),k.get(t,e,["canvas","image","jsImageData","imageLoaded","resizable"]),k.setGet(t,e,["repeat","edgeClamp","interpolate","mipLevel"]),E5(t,e)}var u0={newInstance:k.newInstance(Xf,"vtkTexture"),extend:Xf,...{generateMipmaps:D5}};const O5=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],qf=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],qi=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],Yf=[0,1,0,1,0,1,0,1,2,2,2,2],et=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],De=new Float64Array(3),Yi=new Float64Array(3),We=new Float64Array(3),sr=new Float64Array(3),ur=new Float64Array(3),Ji=new Float64Array(3),c0=new Float64Array(16);function l0(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function N5(t,e){e.classHierarchy.push("vtkCubeAxesActorHelper"),t.setRenderable=a=>{e.renderable!==a&&(e.renderable=a,e.tmActor.addTexture(e.renderable.getTmTexture()),e.tmActor.setProperty(a.getProperty()),e.tmActor.setParentProp(a),t.modified())},t.createPolyDataForOneLabel=(a,n,r,i,s,u,c)=>{const o=e.renderable.get_tmAtlas().get(a);if(!o)return;const f=e.renderable.getTextPolyData().getPoints().getData(),l=e.lastSize;De[0]=f[n*3],De[1]=f[n*3+1],De[2]=f[n*3+2],Te(We,De,r),We[0]+=.1,Te(Yi,We,i),bn(ur,Yi,De),We[0]-=.1,We[1]+=.1,Te(Yi,We,i),bn(Ji,Yi,De);for(let d=0;d<3;d++)ur[d]/=.5*.1*l[0],Ji[d]/=.5*.1*l[1];let h=c.ptIdx,p=c.cellIdx;De[0]=f[n*3],De[1]=f[n*3+1],De[2]=f[n*3+2],s[0]<-.5?On(We,ur,s[0]*u-o.width):s[0]>.5?On(We,ur,s[0]*u):On(We,ur,s[0]*u-o.width/2),ri(De,De,We),On(We,Ji,s[1]*u-o.height/2),ri(De,De,We),c.points[h*3]=De[0],c.points[h*3+1]=De[1],c.points[h*3+2]=De[2],c.tcoords[h*2]=o.tcoords[0],c.tcoords[h*2+1]=o.tcoords[1],h++,On(We,ur,o.width),ri(De,De,We),c.points[h*3]=De[0],c.points[h*3+1]=De[1],c.points[h*3+2]=De[2],c.tcoords[h*2]=o.tcoords[2],c.tcoords[h*2+1]=o.tcoords[3],h++,On(We,Ji,o.height),ri(De,De,We),c.points[h*3]=De[0],c.points[h*3+1]=De[1],c.points[h*3+2]=De[2],c.tcoords[h*2]=o.tcoords[4],c.tcoords[h*2+1]=o.tcoords[5],h++,On(We,ur,o.width),bn(De,De,We),c.points[h*3]=De[0],c.points[h*3+1]=De[1],c.points[h*3+2]=De[2],c.tcoords[h*2]=o.tcoords[6],c.tcoords[h*2+1]=o.tcoords[7],h++,c.polys[p*4]=3,c.polys[p*4+1]=h-4,c.polys[p*4+2]=h-3,c.polys[p*4+3]=h-2,p++,c.polys[p*4]=3,c.polys[p*4+1]=h-4,c.polys[p*4+2]=h-2,c.polys[p*4+3]=h-1,c.ptIdx+=4,c.cellIdx+=2},t.updateTexturePolyData=()=>{const a=e.camera.getCompositeProjectionMatrix(e.lastAspectRatio,-1,1);ze(a,a);const n=e.renderable.getTextValues().length,r=n*4,i=n*2,s=new Float64Array(r*3),u=new Uint16Array(i*4),c=new Float32Array(r*2);Nt(c0,a);const o={ptIdx:0,cellIdx:0,polys:u,points:s,tcoords:c};let f=0,l=0,h=0;const p=e.renderable.getTextPolyData().getPoints().getData(),d=e.renderable.getTextValues();for(;f<p.length/3;){De[0]=p[f*3],De[1]=p[f*3+1],De[2]=p[f*3+2],Te(We,De,a),De[0]=p[f*3+3],De[1]=p[f*3+4],De[2]=p[f*3+5],Te(sr,De,a),bn(We,We,sr);const m=[We[0],We[1]];il(m),t.createPolyDataForOneLabel(d[l],f,a,c0,m,e.renderable.getAxisTitlePixelOffset(),o),f+=2,l++;for(let S=0;S<e.renderable.getTickCounts()[h];S++)t.createPolyDataForOneLabel(d[l],f,a,c0,m,e.renderable.getTickLabelPixelOffset(),o),f++,l++;h++}const y=pe.newInstance({numberOfComponents:2,values:c,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(y),e.tmPolyData.getPoints().setData(s,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(u,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updateAPISpecificData=(a,n,r)=>{(e.lastSize[0]!==a[0]||e.lastSize[1]!==a[1])&&(e.lastSize[0]=a[0],e.lastSize[1]=a[1],e.lastAspectRatio=a[0]/a[1],e.forceUpdate=!0),e.camera=n,t.updateTexturePolyData()}}const M5=k.newInstance(function(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},a),k.obj(t,e),e.tmPolyData=je.newInstance(),e.tmMapper=dn.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmActor=pn.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),k.setGet(t,e,["renderable"]),k.get(t,e,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),e.forceUpdate=!1,e.lastRedrawTime={},k.obj(e.lastRedrawTime,{mtime:0}),e.lastRebuildTime={},k.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.lastTickBounds=[],N5(t,e)},"vtkCubeAxesActorHelper");function R5(t,e){e.classHierarchy.push("vtkCubeAxesActor"),t.setCamera=n=>{e.camera!==n&&(e.cameraModifiedSub&&(e.cameraModifiedSub.unsubscribe(),e.cameraModifiedSub=null),e.camera=n,n&&(e.cameraModifiedSub=n.onModified(t.update)),t.update(),t.modified())},t.computeFacesToDraw=()=>{const n=e.camera.getViewMatrix();ze(n,n);let r=!1;const i=Le.getDiagonalLength(e.dataBounds),s=Math.sin(e.faceVisibilityAngle*Math.PI/180);for(let u=0;u<6;u++){let c=!1;const o=Math.floor(u/2),f=(o+1)%3,l=(o+2)%3;e.dataBounds[f*2]!==e.dataBounds[f*2+1]&&e.dataBounds[l*2]!==e.dataBounds[l*2+1]&&(De[o]=e.dataBounds[u]-.1*i*O5[u][o],De[f]=.5*(e.dataBounds[f*2]+e.dataBounds[f*2+1]),De[l]=.5*(e.dataBounds[l*2]+e.dataBounds[l*2+1]),Te(We,De,n),De[o]=e.dataBounds[u],Te(sr,De,n),bn(We,sr,We),jt(We,We),c=We[2]>s,e.camera.getParallelProjection()||(jt(sr,sr),c=aa(sr,We)>s)),c!==e.lastFacesToDraw[u]&&(e.lastFacesToDraw[u]=c,r=!0)}return r},t.updatePolyData=(n,r,i)=>{let s=0,u=0;s+=8;let c=0;for(let p=0;p<12;p++)r[p]>0&&c++;if(u+=c,e.gridLines)for(let p=0;p<6;p++)n[p]&&(s+=i[et[p][0]].length*2+i[et[p][1]].length*2,u+=i[et[p][0]].length+i[et[p][1]].length);const o=new Float64Array(s*3),f=new Uint32Array(u*3);let l=0,h=0;for(let p=0;p<2;p++)for(let d=0;d<2;d++)for(let y=0;y<2;y++)o[l*3]=e.dataBounds[y],o[l*3+1]=e.dataBounds[2+d],o[l*3+2]=e.dataBounds[4+p],l++;for(let p=0;p<12;p++)r[p]>0&&(f[h*3]=2,f[h*3+1]=qi[p][0],f[h*3+2]=qi[p][1],h++);if(e.gridLines){for(let p=0;p<6;p++)if(n[p]){const d=Math.floor(p/2);let y=i[et[p][0]];for(let m=0;m<y.length;m++)o[l*3+d]=e.dataBounds[p],o[l*3+et[p][0]]=y[m],o[l*3+et[p][1]]=e.dataBounds[et[p][1]*2],l++,o[l*3+d]=e.dataBounds[p],o[l*3+et[p][0]]=y[m],o[l*3+et[p][1]]=e.dataBounds[et[p][1]*2+1],l++,f[h*3]=2,f[h*3+1]=l-2,f[h*3+2]=l-1,h++;y=i[et[p][1]];for(let m=0;m<y.length;m++)o[l*3+d]=e.dataBounds[p],o[l*3+et[p][1]]=y[m],o[l*3+et[p][0]]=e.dataBounds[et[p][0]*2],l++,o[l*3+d]=e.dataBounds[p],o[l*3+et[p][1]]=y[m],o[l*3+et[p][0]]=e.dataBounds[et[p][0]*2+1],l++,f[h*3]=2,f[h*3+1]=l-2,f[h*3+2]=l-1,h++}}e.polyData.getPoints().setData(o,3),e.polyData.getPoints().modified(),e.polyData.getLines().setData(f,1),e.polyData.getLines().modified(),e.polyData.modified()},t.updateTextData=(n,r,i,s)=>{let u=0;for(let p=0;p<12;p++)r[p]===1&&(u+=2,u+=i[Yf[p]].length);const c=e.polyData.getPoints().getData(),o=new Float64Array(u*3);let f=0,l=0,h=0;for(let p=0;p<6;p++)if(n[p])for(let d=0;d<4;d++){const y=qf[p][d];if(r[y]===1){const m=Yf[y],S=qi[y][0]*3,v=qi[y][1]*3;o[f*3]=.5*(c[S]+c[v]),o[f*3+1]=.5*(c[S+1]+c[v+1]),o[f*3+2]=.5*(c[S+2]+c[v+2]),f++;const g=Math.floor(p/2);o[f*3+g]=e.dataBounds[p],o[f*3+et[p][0]]=.5*(e.dataBounds[et[p][0]*2]+e.dataBounds[et[p][0]*2+1]),o[f*3+et[p][1]]=.5*(e.dataBounds[et[p][1]*2]+e.dataBounds[et[p][1]*2+1]),f++,e.textValues[l]=e.axisLabels[m],l++;const x=(m+1)%3,C=(m+2)%3,T=i[m],w=s[m];e.tickCounts[h]=T.length;for(let _=0;_<T.length;_++)o[f*3+m]=T[_],o[f*3+x]=c[S+x],o[f*3+C]=c[S+C],f++,e.textValues[l]=w[_],l++;h++}}e.textPolyData.getPoints().setData(o,3),e.textPolyData.modified()},t.update=()=>{if(!e.camera)return;const n=t.computeFacesToDraw(),r=e.lastFacesToDraw;let i=!1;for(let s=0;s<6;s++)e.dataBounds[s]!==e.lastTickBounds[s]&&(i=!0,e.lastTickBounds[s]=e.dataBounds[s]);if(n||i||e.forceUpdate){const s=new Array(12).fill(0);for(let o=0;o<6;o++)if(r[o])for(let f=0;f<4;f++)s[qf[o][f]]++;const u=[],c=[];for(let o=0;o<3;o++){const f=hs().domain([e.dataBounds[o*2],e.dataBounds[o*2+1]]);u[o]=f.ticks(5);const l=f.tickFormat(5);c[o]=u[o].map(l)}t.updatePolyData(r,s,u),t.updateTextData(r,s,u,c),(i||e.forceUpdate)&&t.updateTextureAtlas(c)}e.forceUpdate=!1},t.updateTextureAtlas=n=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e._tmAtlas.clear();let r=0,i=1;for(let s=0;s<3;s++){if(!e._tmAtlas.has(e.axisLabels[s])){l0(e.tmContext,e.axisTextStyle);const u=e.tmContext.measureText(e.axisLabels[s]),c={height:u.actualBoundingBoxAscent+2,startingHeight:i,width:u.width+2,textStyle:e.axisTextStyle};e._tmAtlas.set(e.axisLabels[s],c),i+=c.height,r<c.width&&(r=c.width)}l0(e.tmContext,e.tickTextStyle);for(let u=0;u<n[s].length;u++)if(!e._tmAtlas.has(n[s][u])){const c=e.tmContext.measureText(n[s][u]),o={height:c.actualBoundingBoxAscent+2,startingHeight:i,width:c.width+2,textStyle:e.tickTextStyle};e._tmAtlas.set(n[s][u],o),i+=o.height,r<o.width&&(r=o.width)}}r=Bt(r),i=Bt(i),e._tmAtlas.forEach(s=>{s.tcoords=[0,(i-s.startingHeight-s.height)/i,s.width/r,(i-s.startingHeight-s.height)/i,s.width/r,(i-s.startingHeight)/i,0,(i-s.startingHeight)/i]}),e.tmCanvas.width=r,e.tmCanvas.height=i,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,r,i),e._tmAtlas.forEach((s,u)=>{l0(e.tmContext,s.textStyle),e.tmContext.fillText(u,1,s.startingHeight+s.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified()},t.onModified(()=>{e.forceUpdate=!0,t.update()}),t.setTickTextStyle=n=>{e.tickTextStyle={...e.tickTextStyle,...n},t.modified()},t.setAxisTextStyle=n=>{e.axisTextStyle={...e.axisTextStyle,...n},t.modified()},t.get_tmAtlas=()=>e._tmAtlas,t.getBounds=()=>(t.update(),Le.setBounds(e.bounds,e.gridActor.getBounds()),Le.scaleAboutCenter(e.bounds,e.boundsScaleFactor,e.boundsScaleFactor,e.boundsScaleFactor),e.bounds);const a=k.chain(t.setProperty,e.gridActor.setProperty);t.setProperty=n=>a(n)[0]}function L5(t){return{boundsScaleFactor:1.3,camera:null,dataBounds:[...Le.INIT_BOUNDS],faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:12,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},...t}}function Jf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,L5(a)),pn.extend(t,e,a),e.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],e.axisLabels=["X-Axis","Y-Axis","Z-Axis"],e.tickCounts=[],e.textValues=[],e.lastTickBounds=[],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.tmTexture=u0.newInstance(),e.tmTexture.setInterpolate(!1),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),e.gridMapper=dn.newInstance(),e.polyData=je.newInstance(),e.gridMapper.setInputData(e.polyData),e.gridActor=pn.newInstance(),e.gridActor.setMapper(e.gridMapper),e.gridActor.setProperty(t.getProperty()),e.gridActor.setParentProp(t),e.textPolyData=je.newInstance(),k.setGet(t,e,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset"]),k.setGetArray(t,e,["dataBounds"],6),k.setGetArray(t,e,["axisLabels"],3),k.get(t,e,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),R5(t,e)}var f0={newInstance:k.newInstance(Jf,"vtkCubeAxesActor"),extend:Jf,newCubeAxesActorHelper:M5};function k5(t,e){e.classHierarchy.push("vtkOpenGLCubeAxesActor"),t.buildPass=a=>{a&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.CubeAxesActorHelper.getRenderable()||e.CubeAxesActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.CubeAxesActorHelper.getTmActor()),t.addMissingNode(e.renderable.getGridActor()),t.removeUnusedNodes())},t.opaquePass=(a,n)=>{if(a){const r=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,i=e._openGLRenderer.getTiledSizeAndOrigin();e.CubeAxesActorHelper.updateAPISpecificData([i.usize,i.vsize],r,e._openGLRenderWindow.getRenderable())}}}const F5={};function A5(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,F5,a),vt.extend(t,e,a),e.CubeAxesActorHelper=f0.newCubeAxesActorHelper(),k5(t,e)}const V5=Ke(A5,"vtkOpenGLCubeAxesActor");st("vtkCubeAxesActor",V5);const yn={ARRAY_BUFFER:0,ELEMENT_ARRAY_BUFFER:1,TEXTURE_BUFFER:2};var Zf={ObjectType:yn};const{ObjectType:Zi}=Zf,B5={};function U5(t,e){e.classHierarchy.push("vtkOpenGLBufferObject");function a(u){switch(u){case Zi.ELEMENT_ARRAY_BUFFER:return e.context.ELEMENT_ARRAY_BUFFER;case Zi.TEXTURE_BUFFER:if("TEXTURE_BUFFER"in e.context)return e.context.TEXTURE_BUFFER;case Zi.ARRAY_BUFFER:default:return e.context.ARRAY_BUFFER}}let n=null,r=null,i=!0,s="";t.getType=()=>n,t.setType=u=>{n=u},t.getHandle=()=>r,t.isReady=()=>i===!1,t.generateBuffer=u=>{const c=a(u);return r===null&&(r=e.context.createBuffer(),n=u),a(n)===c},t.upload=(u,c)=>t.generateBuffer(c)?(e.context.bindBuffer(a(n),r),e.context.bufferData(a(n),u,e.context.STATIC_DRAW),e.allocatedGPUMemoryInBytes=u.length*u.BYTES_PER_ELEMENT,i=!1,!0):(s="Trying to upload array buffer to incompatible buffer.",!1),t.bind=()=>r?(e.context.bindBuffer(a(n),r),!0):!1,t.release=()=>r?(e.context.bindBuffer(a(n),null),!0):!1,t.releaseGraphicsResources=()=>{r!==null&&(e.context.bindBuffer(a(n),null),e.context.deleteBuffer(r),r=null,e.allocatedGPUMemoryInBytes=0)},t.setOpenGLRenderWindow=u=>{e._openGLRenderWindow!==u&&(t.releaseGraphicsResources(),e._openGLRenderWindow=u,e.context=null,u&&(e.context=e._openGLRenderWindow.getContext()))},t.getError=()=>s}const G5={objectType:Zi.ARRAY_BUFFER,context:null,allocatedGPUMemoryInBytes:0};function Qf(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,G5,a),k.obj(t,e),k.get(t,e,["_openGLRenderWindow","allocatedGPUMemoryInBytes"]),k.moveToProtected(t,e,["openGLRenderWindow"]),U5(t,e)}var mn={newInstance:k.newInstance(Qf),extend:Qf,...B5,...Zf};const{vtkErrorMacro:e1}=k;function I5(t,e){const a=new Float64Array(3);Au(a,e);const n=new Float64Array(16);return Du(n,zn(),t,a),n}function P5(t,e){return t===null||e===null?!1:!(ia(t,[0,0,0])&&ia(e,[1,1,1]))}function z5(t,e){e.classHierarchy.push("vtkOpenGLCellArrayBufferObject"),t.setType(yn.ARRAY_BUFFER),t.createVBO=function(a,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:null;if(!a.getData()||!a.getData().length)return e.elementCount=0,0;e.blockSize=3,e.vertexOffset=0,e.normalOffset=0,e.tCoordOffset=0,e.tCoordComponents=0,e.colorComponents=0,e.colorOffset=0,e.customData=[];const u=i.points.getData();let c=null,o=null,f=null;const l=i.colors?i.colors.getNumberOfComponents():0,h=i.tcoords?i.tcoords.getNumberOfComponents():0;i.normals&&(e.normalOffset=4*e.blockSize,e.blockSize+=3,c=i.normals.getData()),i.customAttributes&&i.customAttributes.forEach(B=>{B&&(e.customData.push({data:B.getData(),offset:4*e.blockSize,components:B.getNumberOfComponents(),name:B.getName()}),e.blockSize+=B.getNumberOfComponents())}),i.tcoords&&(e.tCoordOffset=4*e.blockSize,e.tCoordComponents=h,e.blockSize+=h,o=i.tcoords.getData()),i.colors?(e.colorComponents=i.colors.getNumberOfComponents(),e.colorOffset=0,f=i.colors.getData(),e.colorBO||(e.colorBO=mn.newInstance()),e.colorBO.setOpenGLRenderWindow(e._openGLRenderWindow)):e.colorBO=null,e.stride=4*e.blockSize;let p=0,d=0,y=0,m=0,S=0,v=0,g;const x={anythingToPoints(B,F,z){for(let H=0;H<B;++H)g(F[z+H])},linesToWireframe(B,F,z){for(let H=0;H<B-1;++H)g(F[z+H]),g(F[z+H+1])},polysToWireframe(B,F,z){if(B>2)for(let H=0;H<B;++H)g(F[z+H]),g(F[z+(H+1)%B])},stripsToWireframe(B,F,z){if(B>2){for(let H=0;H<B-1;++H)g(F[z+H]),g(F[z+H+1]);for(let H=0;H<B-2;H++)g(F[z+H]),g(F[z+H+2])}},polysToSurface(B,F,z){for(let H=0;H<B-2;H++)g(F[z+0]),g(F[z+H+1]),g(F[z+H+2])},stripsToSurface(B,F,z){for(let H=0;H<B-2;H++)g(F[z+H]),g(F[z+H+1+H%2]),g(F[z+H+1+(H+1)%2])}},C={anythingToPoints(B,F){return B},linesToWireframe(B,F){return B>1?(B-1)*2:0},polysToWireframe(B,F){return B>2?B*2:0},stripsToWireframe(B,F){return B>2?B*4-6:0},polysToSurface(B,F){return B>2?(B-2)*3:0},stripsToSurface(B,F,z){return B>2?(B-2)*3:0}};let T=null,w=null;r===Kt.POINTS||n==="verts"?(T=x.anythingToPoints,w=C.anythingToPoints):r===Kt.WIREFRAME||n==="lines"?(T=x[`${n}ToWireframe`],w=C[`${n}ToWireframe`]):(T=x[`${n}ToSurface`],w=C[`${n}ToSurface`]);const _=a.getData(),E=_.length;let D=0;for(let B=0;B<E;)D+=w(_[B],_),B+=_[B]+1;let b=null;const N=new Float32Array(D*e.blockSize);f&&(b=new Uint8Array(D*4));let R=0,M=0,A=0,I=0;for(let B=0;B<3;++B){const F=i.points.getRange(B),z=F[1]-F[0];A+=z*z;const H=.5*(F[1]+F[0]);I+=H*H}if(A>0&&(Math.abs(I)/A>1e6||Math.abs(Math.log10(A))>3||A===0&&I>1e6)){const B=new Float64Array(3),F=new Float64Array(3);for(let z=0;z<3;++z){const H=i.points.getRange(z),X=H[1]-H[0];B[z]=.5*(H[1]+H[0]),F[z]=X>0?1/X:1}t.setCoordShiftAndScale(B,F)}else e.coordShiftAndScaleEnabled===!0&&t.setCoordShiftAndScale(null,null);if(s)if(!s.points&&!s.cells)s.points=new Int32Array(D),s.cells=new Int32Array(D);else{const B=new Int32Array(D+s.points.length);B.set(s.points),s.points=B;const F=new Int32Array(D+s.cells.length);F.set(s.cells),s.cells=F}let U=i.vertexOffset;g=function(F){if(s&&(s.points[U]=F,s.cells[U]=v+i.cellOffset),++U,p=F*3,e.coordShiftAndScaleEnabled?(N[R++]=(u[p++]-e.coordShift[0])*e.coordScale[0],N[R++]=(u[p++]-e.coordShift[1])*e.coordScale[1],N[R++]=(u[p++]-e.coordShift[2])*e.coordScale[2]):(N[R++]=u[p++],N[R++]=u[p++],N[R++]=u[p++]),c!==null&&(i.haveCellNormals?d=(v+i.cellOffset)*3:d=F*3,N[R++]=c[d++],N[R++]=c[d++],N[R++]=c[d++]),e.customData.forEach(z=>{S=F*z.components;for(let H=0;H<z.components;++H)N[R++]=z.data[S++]}),o!==null){y=F*h;for(let z=0;z<h;++z)N[R++]=o[y++]}f!==null&&(i.haveCellScalars?m=(v+i.cellOffset)*l:m=F*l,b[M++]=f[m++],b[M++]=f[m++],b[M++]=f[m++],b[M++]=l===4?f[m++]:255)};for(let B=0;B<E;)T(_[B],_,B+1),B+=_[B]+1,v++;return e.elementCount=D,t.upload(N,yn.ARRAY_BUFFER),e.colorBO&&(e.colorBOStride=4,e.colorBO.upload(b,yn.ARRAY_BUFFER)),v},t.setCoordShiftAndScale=(a,n)=>{if(a!==null&&(a.constructor!==Float64Array||a.length!==3)){e1("Wrong type for coordShift, expected vec3 or null");return}if(n!==null&&(n.constructor!==Float64Array||n.length!==3)){e1("Wrong type for coordScale, expected vec3 or null");return}(e.coordShift===null||a===null||!Vu(a,e.coordShift))&&(e.coordShift=a),(e.coordScale===null||n===null||!Vu(n,e.coordScale))&&(e.coordScale=n),e.coordShiftAndScaleEnabled=P5(e.coordShift,e.coordScale),e.coordShiftAndScaleEnabled?e.inverseShiftAndScaleMatrix=I5(e.coordShift,e.coordScale):e.inverseShiftAndScaleMatrix=null}}const j5={elementCount:0,stride:0,colorBOStride:0,vertexOffset:0,normalOffset:0,tCoordOffset:0,tCoordComponents:0,colorOffset:0,colorComponents:0,tcoordBO:null,customData:[],coordShift:null,coordScale:null,coordShiftAndScaleEnabled:!1,inverseShiftAndScaleMatrix:null};function t1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,j5,a),mn.extend(t,e,a),k.setGet(t,e,["colorBO","elementCount","stride","colorBOStride","vertexOffset","normalOffset","tCoordOffset","tCoordComponents","colorOffset","colorComponents","customData"]),k.get(t,e,["coordShift","coordScale","coordShiftAndScaleEnabled","inverseShiftAndScaleMatrix"]),z5(t,e)}var W5={newInstance:k.newInstance(t1),extend:t1};const{vtkErrorMacro:$5}=k;function H5(t,e){e.classHierarchy.push("vtkShader"),t.compile=()=>{let a=e.context.VERTEX_SHADER;if(!e.source||!e.source.length||e.shaderType==="Unknown")return!1;switch(e.handle!==0&&(e.context.deleteShader(e.handle),e.handle=0),e.shaderType){case"Fragment":a=e.context.FRAGMENT_SHADER;break;case"Vertex":default:a=e.context.VERTEX_SHADER;break}if(e.handle=e.context.createShader(a),e.context.shaderSource(e.handle,e.source),e.context.compileShader(e.handle),!e.context.getShaderParameter(e.handle,e.context.COMPILE_STATUS)){const r=e.context.getShaderInfoLog(e.handle);return $5(`Error compiling shader '${e.source}': ${r}`),e.context.deleteShader(e.handle),e.handle=0,!1}return!0},t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(e.context.deleteShader(e.handle),e.handle=0,e.dirty=!0)}}const K5={shaderType:"Unknown",source:"",error:"",handle:0,dirty:!1,context:null};function n1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,K5,a),k.obj(t,e),k.setGet(t,e,["shaderType","source","error","handle","context"]),H5(t,e)}var h0={newInstance:k.newInstance(n1,"vtkShader"),extend:n1};const{vtkErrorMacro:on}=k;function X5(t,e,a,n){const r=typeof a=="string"?a:a.join(`
`),i=n===!1?e:new RegExp(e,"g"),s=t.replace(i,r);return{replace:s!==r,result:s}}function q5(t,e){e.classHierarchy.push("vtkShaderProgram"),t.compileShader=()=>e.vertexShader.compile()?e.fragmentShader.compile()?!t.attachShader(e.vertexShader)||!t.attachShader(e.fragmentShader)?(on(e.error),0):t.link()?(t.setCompiled(!0),1):(on(`Links failed: ${e.error}`),0):(on(e.fragmentShader.getSource().split(`
`).map((a,n)=>`${n}: ${a}`).join(`
`)),on(e.fragmentShader.getError()),0):(on(e.vertexShader.getSource().split(`
`).map((a,n)=>`${n}: ${a}`).join(`
`)),on(e.vertexShader.getError()),0),t.cleanup=()=>{e.shaderType==="Unknown"||e.handle===0||(t.release(),e.vertexShaderHandle!==0&&(e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=0),e.fragmentShaderHandle!==0&&(e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=0),e.context.deleteProgram(e.handle),e.handle=0,t.setCompiled(!1))},t.bind=()=>!e.linked&&!t.link()?!1:(e.context.useProgram(e.handle),t.setBound(!0),!0),t.isBound=()=>!!e.bound,t.release=()=>{e.context.useProgram(null),t.setBound(!1)},t.setContext=a=>{e.vertexShader.setContext(a),e.fragmentShader.setContext(a),e.geometryShader.setContext(a)},t.link=()=>{if(e.linked)return!0;if(e.handle===0)return e.error="Program has not been initialized, and/or does not have shaders.",!1;if(e.uniformLocs={},e.context.linkProgram(e.handle),!e.context.getProgramParameter(e.handle,e.context.LINK_STATUS)){const n=e.context.getProgramInfoLog(e.handle);return on(`Error linking shader ${n}`),e.handle=0,!1}return t.setLinked(!0),e.attributeLocs={},!0},t.setUniformMatrix=(a,n)=>{const r=t.findUniform(a);if(r===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;const i=new Float32Array(n);return e.context.uniformMatrix4fv(r,!1,i),!0},t.setUniformMatrix3x3=(a,n)=>{const r=t.findUniform(a);if(r===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;const i=new Float32Array(n);return e.context.uniformMatrix3fv(r,!1,i),!0},t.setUniformf=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform1f(r,n),!0)},t.setUniformfv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform1fv(r,n),!0)},t.setUniformi=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform1i(r,n),!0)},t.setUniformiv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform1iv(r,n),!0)},t.setUniform2f=(a,n,r)=>{const i=t.findUniform(a);if(i===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;if(r===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2f(i,n,r),!0},t.setUniform2fv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform2fv(r,n),!0)},t.setUniform2i=(a,n,r)=>{const i=t.findUniform(a);if(i===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;if(r===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform2i(i,n,r),!0},t.setUniform2iv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform2iv(r,n),!0)},t.setUniform3f=(a,n,r,i)=>{const s=t.findUniform(a);if(s===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;if(i===void 0)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(s,n,r,i),!0},t.setUniform3fArray=(a,n)=>{const r=t.findUniform(a);if(r===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;if(!Array.isArray(n)||n.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3f(r,n[0],n[1],n[2]),!0},t.setUniform3fv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform3fv(r,n),!0)},t.setUniform3i=function(a){const n=t.findUniform(a);if(n===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];let u=i;if(u.length===1&&Array.isArray(u[0])&&(u=u[0]),u.length!==3)throw new RangeError("Invalid number of values for array");return e.context.uniform3i(n,u[0],u[1],u[2]),!0},t.setUniform3iv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform3iv(r,n),!0)},t.setUniform4f=function(a){const n=t.findUniform(a);if(n===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];let u=i;if(u.length===1&&Array.isArray(u[0])&&(u=u[0]),u.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4f(n,u[0],u[1],u[2],u[3]),!0},t.setUniform4fv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform4fv(r,n),!0)},t.setUniform4i=function(a){const n=t.findUniform(a);if(n===-1)return e.error=`Could not set uniform ${a} . No such uniform.`,!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];let u=i;if(u.length===1&&Array.isArray(u[0])&&(u=u[0]),u.length!==4)throw new RangeError("Invalid number of values for array");return e.context.uniform4i(n,u[0],u[1],u[2],u[3]),!0},t.setUniform4iv=(a,n)=>{const r=t.findUniform(a);return r===-1?(e.error=`Could not set uniform ${a} . No such uniform.`,!1):(e.context.uniform4iv(r,n),!0)},t.findUniform=a=>{if(!a||!e.linked)return-1;let n=e.uniformLocs[a];return n!==void 0?n:(n=e.context.getUniformLocation(e.handle,a),n===null?(e.error=`Uniform ${a} not found in current shader program.`,e.uniformLocs[a]=-1,-1):(e.uniformLocs[a]=n,n))},t.isUniformUsed=a=>{if(!a)return!1;let n=e.uniformLocs[a];return n!==void 0?n!==null:e.linked?(n=e.context.getUniformLocation(e.handle,a),e.uniformLocs[a]=n,n!==null):(on("attempt to find uniform when the shader program is not linked"),!1)},t.isAttributeUsed=a=>{if(!a)return!1;if(a in e.attributeLocs)return!0;if(!e.linked)return on("attempt to find uniform when the shader program is not linked"),!1;const n=e.context.getAttribLocation(e.handle,a);return n===-1?!1:(e.attributeLocs[a]=n,!0)},t.attachShader=a=>{if(a.getHandle()===0)return e.error="Shader object was not initialized, cannot attach it.",!1;if(a.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;if(e.handle===0){const n=e.context.createProgram();if(n===0)return e.error="Could not create shader program.",!1;e.handle=n,e.linked=!1}return a.getShaderType()==="Vertex"&&(e.vertexShaderHandle!==0&&e.context.detachShader(e.handle,e.vertexShaderHandle),e.vertexShaderHandle=a.getHandle()),a.getShaderType()==="Fragment"&&(e.fragmentShaderHandle!==0&&e.context.detachShader(e.handle,e.fragmentShaderHandle),e.fragmentShaderHandle=a.getHandle()),e.context.attachShader(e.handle,a.getHandle()),t.setLinked(!1),!0},t.detachShader=a=>{if(a.getHandle()===0)return e.error="shader object was not initialized, cannot attach it.",!1;if(a.getShaderType()==="Unknown")return e.error="Shader object is of type Unknown and cannot be used.",!1;switch(e.handle===0&&(e.error="This shader program has not been initialized yet."),a.getShaderType()){case"Vertex":return e.vertexShaderHandle!==a.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,a.getHandle()),e.vertexShaderHandle=0,e.linked=!1,!0);case"Fragment":return e.fragmentShaderHandle!==a.getHandle()?(e.error="The supplied shader was not attached to this program.",!1):(e.context.detachShader(e.handle,a.getHandle()),e.fragmentShaderHandle=0,e.linked=!1,!0);default:return!1}},t.setContext=a=>{e.context=a,e.vertexShader.setContext(a),e.fragmentShader.setContext(a),e.geometryShader.setContext(a)},t.setLastCameraMTime=a=>{e.lastCameraMTime=a}}const Y5={vertexShaderHandle:0,fragmentShaderHandle:0,geometryShaderHandle:0,vertexShader:null,fragmentShader:null,geometryShader:null,linked:!1,bound:!1,compiled:!1,error:"",handle:0,numberOfOutputs:0,attributesLocs:null,uniformLocs:null,md5Hash:0,context:null,lastCameraMTime:null};function r1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Y5,a),e.attributesLocs={},e.uniformLocs={},e.vertexShader=h0.newInstance(),e.vertexShader.setShaderType("Vertex"),e.fragmentShader=h0.newInstance(),e.fragmentShader.setShaderType("Fragment"),e.geometryShader=h0.newInstance(),e.geometryShader.setShaderType("Geometry"),k.obj(t,e),k.get(t,e,["lastCameraMTime"]),k.setGet(t,e,["error","handle","compiled","bound","md5Hash","vertexShader","fragmentShader","geometryShader","linked"]),q5(t,e)}var J={newInstance:k.newInstance(r1,"vtkShaderProgram"),extend:r1,substitute:X5};function J5(t,e){e.classHierarchy.push("vtkOpenGLVertexArrayObject"),t.exposedMethod=()=>{},t.initialize=()=>{e.instancingExtension=null,e._openGLRenderWindow.getWebgl2()||(e.instancingExtension=e.context.getExtension("ANGLE_instanced_arrays")),!e.forceEmulation&&e._openGLRenderWindow&&e._openGLRenderWindow.getWebgl2()?(e.extension=null,e.supported=!0,e.handleVAO=e.context.createVertexArray()):(e.extension=e.context.getExtension("OES_vertex_array_object"),!e.forceEmulation&&e.extension?(e.supported=!0,e.handleVAO=e.extension.createVertexArrayOES()):e.supported=!1)},t.isReady=()=>e.handleVAO!==0||e.supported===!1,t.bind=()=>{if(t.isReady()||t.initialize(),t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(e.handleVAO):e.context.bindVertexArray(e.handleVAO);else if(t.isReady()){const a=e.context;for(let n=0;n<e.buffers.length;++n){const r=e.buffers[n];e.context.bindBuffer(a.ARRAY_BUFFER,r.buffer);for(let i=0;i<r.attributes.length;++i){const s=r.attributes[i],u=s.isMatrix?s.size:1;for(let c=0;c<u;++c)a.enableVertexAttribArray(s.index+c),a.vertexAttribPointer(s.index+c,s.size,s.type,s.normalize,s.stride,s.offset+s.stride*c/s.size),s.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(s.index+c,1):a.vertexAttribDivisor(s.index+c,1))}}}},t.release=()=>{if(t.isReady()&&e.supported)e.extension?e.extension.bindVertexArrayOES(null):e.context.bindVertexArray(null);else if(t.isReady()){const a=e.context;for(let n=0;n<e.buffers.length;++n){const r=e.buffers[n];e.context.bindBuffer(a.ARRAY_BUFFER,r.buffer);for(let i=0;i<r.attributes.length;++i){const s=r.attributes[i],u=s.isMatrix?s.size:1;for(let c=0;c<u;++c)a.enableVertexAttribArray(s.index+c),a.vertexAttribPointer(s.index+c,s.size,s.type,s.normalize,s.stride,s.offset+s.stride*c/s.size),s.divisor>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(s.index+c,0):a.vertexAttribDivisor(s.index+c,0)),a.disableVertexAttribArray(s.index+c)}}}},t.shaderProgramChanged=()=>{t.release(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.handleProgram=0},t.releaseGraphicsResources=()=>{t.shaderProgramChanged(),e.handleVAO&&(e.extension?e.extension.deleteVertexArrayOES(e.handleVAO):e.context.deleteVertexArray(e.handleVAO)),e.handleVAO=0,e.supported=!0,e.handleProgram=0},t.addAttributeArray=(a,n,r,i,s,u,c,o)=>t.addAttributeArrayWithDivisor(a,n,r,i,s,u,c,o,0,!1),t.addAttributeArrayWithDivisor=(a,n,r,i,s,u,c,o,f,l)=>{if(!a||!a.isBound()||n.getHandle()===0||n.getType()!==yn.ARRAY_BUFFER||(e.handleProgram===0&&(e.handleProgram=a.getHandle()),t.isReady()||t.initialize(),!t.isReady()||e.handleProgram!==a.getHandle()))return!1;const h=e.context,p={};if(p.name=r,p.index=h.getAttribLocation(e.handleProgram,r),p.offset=i,p.stride=s,p.type=u,p.size=c,p.normalize=o,p.isMatrix=l,p.divisor=f,p.Index===-1)return!1;if(n.bind(),h.enableVertexAttribArray(p.index),h.vertexAttribPointer(p.index,p.size,p.type,p.normalize,p.stride,p.offset),f>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(p.index,1):h.vertexAttribDivisor(p.index,1)),p.buffer=n.getHandle(),!e.supported){let d=!1;for(let y=0;y<e.buffers.length;++y){const m=e.buffers[y];if(m.buffer===p.buffer){d=!0;let S=!1;for(let v=0;v<m.attributes.length;++v)m.attributes[v].name===r&&(S=!0,m.attributes[v]=p);S||m.attributes.push(p)}}d||e.buffers.push({buffer:p.buffer,attributes:[p]})}return!0},t.addAttributeMatrixWithDivisor=(a,n,r,i,s,u,c,o,f)=>{const l=t.addAttributeArrayWithDivisor(a,n,r,i,s,u,c,o,f,!0);if(!l)return l;const h=e.context,p=h.getAttribLocation(e.handleProgram,r);for(let d=1;d<c;d++)h.enableVertexAttribArray(p+d),h.vertexAttribPointer(p+d,c,u,o,s,i+s*d/c),f>0&&(e.instancingExtension?e.instancingExtension.vertexAttribDivisorANGLE(p+d,1):h.vertexAttribDivisor(p+d,1));return!0},t.removeAttributeArray=a=>{if(!t.isReady()||e.handleProgram===0)return!1;if(!e.supported)for(let n=0;n<e.buffers.length;++n){const r=e.buffers[n];for(let i=0;i<r.attributes.length;++i)if(r.attributes[i].name===a)return r.attributes.splice(i,1),r.attributes.length||e.buffers.splice(n,1),!0}return!0},t.setOpenGLRenderWindow=a=>{e._openGLRenderWindow!==a&&(t.releaseGraphicsResources(),e._openGLRenderWindow=a,e.context=null,a&&(e.context=e._openGLRenderWindow.getContext()))}}const Z5={forceEmulation:!1,handleVAO:0,handleProgram:0,supported:!0,buffers:null,context:null};function a1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Z5,a),e.buffers=[],k.obj(t,e),k.get(t,e,["supported"]),k.setGet(t,e,["forceEmulation"]),J5(t,e)}var Ma={newInstance:k.newInstance(a1,"vtkOpenGLVertexArrayObject"),extend:a1};const kn={Start:0,Points:0,Lines:1,Tris:2,TriStrips:3,TrisEdges:4,TriStripsEdges:5,End:6};function Q5(t,e){e.classHierarchy.push("vtkOpenGLHelper"),t.setOpenGLRenderWindow=a=>{e.context=a.getContext(),e.program.setContext(e.context),e.VAO.setOpenGLRenderWindow(a),e.CABO.setOpenGLRenderWindow(a)},t.releaseGraphicsResources=a=>{e.VAO.releaseGraphicsResources(),e.CABO.releaseGraphicsResources(),e.CABO.setElementCount(0)},t.drawArrays=(a,n,r,i)=>{if(e.CABO.getElementCount()){const s=t.getOpenGLMode(r),u=t.haveWideLines(a,n),c=e.context,o=c.getParameter(c.DEPTH_WRITEMASK);e.pointPicking&&c.depthMask(!1),s===c.LINES&&u?(t.updateShaders(a,n,i),c.drawArraysInstanced(s,0,e.CABO.getElementCount(),2*Math.ceil(n.getProperty().getLineWidth()))):(c.lineWidth(n.getProperty().getLineWidth()),t.updateShaders(a,n,i),c.drawArrays(s,0,e.CABO.getElementCount()),c.lineWidth(1));const l=(s===c.POINTS?1:0)||(s===c.LINES?2:3);return e.pointPicking&&c.depthMask(o),e.CABO.getElementCount()/l}return 0},t.getOpenGLMode=a=>{if(e.pointPicking)return e.context.POINTS;const n=e.primitiveType;return a===Kt.POINTS||n===kn.Points?e.context.POINTS:a===Kt.WIREFRAME||n===kn.Lines||n===kn.TrisEdges||n===kn.TriStripsEdges?e.context.LINES:e.context.TRIANGLES},t.haveWideLines=(a,n)=>n.getProperty().getLineWidth()>1?!(e.CABO.getOpenGLRenderWindow()&&e.CABO.getOpenGLRenderWindow().getHardwareMaximumLineWidth()>=n.getProperty().getLineWidth()):!1,t.getNeedToRebuildShaders=(a,n,r)=>!!(r.getNeedToRebuildShaders(t,a,n)||t.getProgram()===0||t.getShaderSourceTime().getMTime()<r.getMTime()||t.getShaderSourceTime().getMTime()<n.getMTime()),t.updateShaders=(a,n,r)=>{if(t.getNeedToRebuildShaders(a,n,r)){const i={Vertex:null,Fragment:null,Geometry:null};r.buildShaders(i,a,n);const s=e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);s!==t.getProgram()&&(t.setProgram(s),t.getVAO().releaseGraphicsResources()),t.getShaderSourceTime().modified()}else e.CABO.getOpenGLRenderWindow().getShaderCache().readyShaderProgram(t.getProgram());t.getVAO().bind(),r.setMapperShaderParameters(t,a,n),r.setPropertyShaderParameters(t,a,n),r.setCameraShaderParameters(t,a,n),r.setLightingShaderParameters(t,a,n),r.invokeShaderCallbacks(t,a,n)},t.setMapperShaderParameters=(a,n,r)=>{if(t.haveWideLines(a,n)){t.getProgram().setUniform2f("viewportSize",r.usize,r.vsize);const i=parseFloat(n.getProperty().getLineWidth()),s=i/2;t.getProgram().setUniformf("lineWidthStepSize",i/Math.ceil(i)),t.getProgram().setUniformf("halfLineWidth",s)}e.primitiveType===kn.Points||n.getProperty().getRepresentation()===Kt.POINTS?t.getProgram().setUniformf("pointSize",n.getProperty().getPointSize()):e.pointPicking&&t.getProgram().setUniformf("pointSize",t.getPointPickingPrimitiveSize())},t.replaceShaderPositionVC=(a,n,r)=>{let i=a.Vertex;i=J.substitute(i,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform float pointSize;"]).result,i=J.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl","  gl_PointSize = pointSize;"],!1).result,t.getOpenGLMode(r.getProperty().getRepresentation())===e.context.LINES&&t.haveWideLines(n,r)&&(i=J.substitute(i,"//VTK::PositionVC::Dec",["//VTK::PositionVC::Dec","uniform vec2 viewportSize;","uniform float lineWidthStepSize;","uniform float halfLineWidth;"]).result,i=J.substitute(i,"//VTK::PositionVC::Impl",["//VTK::PositionVC::Impl"," if (halfLineWidth > 0.0)","   {","   float offset = float(gl_InstanceID / 2) * lineWidthStepSize - halfLineWidth;","   vec4 tmpPos = gl_Position;","   vec3 tmpPos2 = tmpPos.xyz / tmpPos.w;","   tmpPos2.x = tmpPos2.x + 2.0 * mod(float(gl_InstanceID), 2.0) * offset / viewportSize[0];","   tmpPos2.y = tmpPos2.y + 2.0 * mod(float(gl_InstanceID + 1), 2.0) * offset / viewportSize[1];","   gl_Position = vec4(tmpPos2.xyz * tmpPos.w, tmpPos.w);","   }"]).result),a.Vertex=i},t.getPointPickingPrimitiveSize=()=>e.primitiveType===kn.Points?2:e.primitiveType===kn.Lines?4:6,t.getAllocatedGPUMemoryInBytes=()=>t.getCABO().getAllocatedGPUMemoryInBytes()}const e4={context:null,program:null,shaderSourceTime:null,VAO:null,attributeUpdateTime:null,CABO:null,primitiveType:0,pointPicking:!1};function i1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,e4,a),k.obj(t,e),e.shaderSourceTime={},k.obj(e.shaderSourceTime),e.attributeUpdateTime={},k.obj(e.attributeUpdateTime),k.setGet(t,e,["program","shaderSourceTime","VAO","attributeUpdateTime","CABO","primitiveType","pointPicking"]),e.program=J.newInstance(),e.VAO=Ma.newInstance(),e.CABO=W5.newInstance(),Q5(t,e)}var Gt={newInstance:k.newInstance(i1),extend:i1,primTypes:kn};const Ra={CLAMP_TO_EDGE:0,REPEAT:1,MIRRORED_REPEAT:2},ye={NEAREST:0,LINEAR:1,NEAREST_MIPMAP_NEAREST:2,NEAREST_MIPMAP_LINEAR:3,LINEAR_MIPMAP_NEAREST:4,LINEAR_MIPMAP_LINEAR:5};var o1={Wrap:Ra,Filter:ye};const s1=new Float32Array(1),t4=new Int32Array(s1.buffer);function n4(t){s1[0]=t;const e=t4[0];let a=e>>16&32768,n=e>>12&2047;const r=e>>23&255;return r<103?a:r>142?(a|=31744,a|=(r===255?0:1)&&e&8388607,a):r<113?(n|=2048,a|=(n>>114-r)+(n>>113-r&1),a):(a|=r-112<<10|n>>1,a+=n&1,a)}function r4(t){const e=(t&32768)>>15,a=(t&31744)>>10,n=t&1023;return a===0?(e?-1:1)*2**-14*(n/2**10):a===31?n?NaN:(e?-1:1)*(1/0):(e?-1:1)*2**(a-15)*(1+n/2**10)}var Br={fromHalf:r4,toHalf:n4};const{Wrap:xn,Filter:Ct}=o1,{VtkDataTypes:Ie}=pe,{vtkDebugMacro:p0,vtkErrorMacro:Ur,vtkWarningMacro:a4}=wt,{toHalf:i4}=Br;function o4(t,e){e.classHierarchy.push("vtkOpenGLTexture"),t.render=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(o?e._openGLRenderWindow=o:(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent()),e.context=e._openGLRenderWindow.getContext(),e.renderable.getInterpolate()?(e.generateMipmap?t.setMinificationFilter(Ct.LINEAR_MIPMAP_LINEAR):t.setMinificationFilter(Ct.LINEAR),t.setMagnificationFilter(Ct.LINEAR)):(t.setMinificationFilter(Ct.NEAREST),t.setMagnificationFilter(Ct.NEAREST)),e.renderable.getRepeat()&&(t.setWrapR(xn.REPEAT),t.setWrapS(xn.REPEAT),t.setWrapT(xn.REPEAT)),e.renderable.getInputData()&&e.renderable.setImage(null),!e.handle||e.renderable.getMTime()>e.textureBuildTime.getMTime()){if(e.renderable.getImage()!==null&&(e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Ct.LINEAR_MIPMAP_LINEAR)),e.renderable.getImage()&&e.renderable.getImageLoaded()&&(t.create2DFromImage(e.renderable.getImage()),t.activate(),t.sendParameters(),e.textureBuildTime.modified())),e.renderable.getCanvas()!==null){e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Ct.LINEAR_MIPMAP_LINEAR));const l=e.renderable.getCanvas();t.create2DFromRaw(l.width,l.height,4,Ie.UNSIGNED_CHAR,l,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}if(e.renderable.getJsImageData()!==null){const l=e.renderable.getJsImageData();e.renderable.getInterpolate()&&(e.generateMipmap=!0,t.setMinificationFilter(Ct.LINEAR_MIPMAP_LINEAR)),t.create2DFromRaw(l.width,l.height,4,Ie.UNSIGNED_CHAR,l.data,!0),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}const f=e.renderable.getInputData(0);if(f&&f.getPointData().getScalars()){const l=f.getExtent(),h=f.getPointData().getScalars(),p=[];for(let d=0;d<e.renderable.getNumberOfInputPorts();++d){const y=e.renderable.getInputData(d),m=y?y.getPointData().getScalars().getData():null;m&&p.push(m)}e.renderable.getInterpolate()&&h.getNumberOfComponents()===4&&(e.generateMipmap=!0,t.setMinificationFilter(Ct.LINEAR_MIPMAP_LINEAR)),p.length%6===0?t.createCubeFromRaw(l[1]-l[0]+1,l[3]-l[2]+1,h.getNumberOfComponents(),h.getDataType(),p):t.create2DFromRaw(l[1]-l[0]+1,l[3]-l[2]+1,h.getNumberOfComponents(),h.getDataType(),h.getData()),t.activate(),t.sendParameters(),e.textureBuildTime.modified()}}e.handle&&t.activate()},t.destroyTexture=()=>{t.deactivate(),e.context&&e.handle&&e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.components=0,e.width=0,e.height=0,e.depth=0,t.resetFormatAndType()},t.createTexture=()=>{e.handle||(e.handle=e.context.createTexture(),e.target&&(e.context.bindTexture(e.target,e.handle),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.bindTexture(e.target,null)))},t.getTextureUnit=()=>e._openGLRenderWindow?e._openGLRenderWindow.getTextureUnitForTexture(t):-1,t.activate=()=>{e._openGLRenderWindow.activateTexture(t),t.bind()},t.deactivate=()=>{e._openGLRenderWindow&&e._openGLRenderWindow.deactivateTexture(t)},t.releaseGraphicsResources=o=>{o&&e.handle&&(o.activateTexture(t),o.deactivateTexture(t),e.context.deleteTexture(e.handle),e.handle=0,e.numberOfDimensions=0,e.target=0,e.internalFormat=0,e.format=0,e.openGLDataType=0,e.components=0,e.width=0,e.height=0,e.depth=0,e.allocatedGPUMemoryInBytes=0),e.shaderProgram&&(e.shaderProgram.releaseGraphicsResources(o),e.shaderProgram=null)},t.bind=()=>{e.context.bindTexture(e.target,e.handle),e.autoParameters&&t.getMTime()>e.sendParametersTime.getMTime()&&t.sendParameters()},t.isBound=()=>{let o=!1;if(e.context&&e.handle){let f=0;switch(e.target){case e.context.TEXTURE_2D:f=e.context.TEXTURE_BINDING_2D;break;default:a4("impossible case");break}o=e.context.getIntegerv(f)===e.handle}return o},t.sendParameters=()=>{e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_S,t.getOpenGLWrapMode(e.wrapS)),e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_T,t.getOpenGLWrapMode(e.wrapT)),e._openGLRenderWindow.getWebgl2()&&e.context.texParameteri(e.target,e.context.TEXTURE_WRAP_R,t.getOpenGLWrapMode(e.wrapR)),e.context.texParameteri(e.target,e.context.TEXTURE_MIN_FILTER,t.getOpenGLFilterMode(e.minificationFilter)),e.context.texParameteri(e.target,e.context.TEXTURE_MAG_FILTER,t.getOpenGLFilterMode(e.magnificationFilter)),e._openGLRenderWindow.getWebgl2()&&(e.context.texParameteri(e.target,e.context.TEXTURE_BASE_LEVEL,e.baseLevel),e.context.texParameteri(e.target,e.context.TEXTURE_MAX_LEVEL,e.maxLevel)),e.sendParametersTime.modified()},t.getInternalFormat=(o,f)=>(e._forceInternalFormat||(e.internalFormat=t.getDefaultInternalFormat(o,f)),e.internalFormat||p0(`Unable to find suitable internal format for T=${o} NC= ${f}`),e.internalFormat),t.getDefaultInternalFormat=(o,f)=>{let l=0;return l=e._openGLRenderWindow.getDefaultTextureInternalFormat(o,f,e.oglNorm16Ext,e.useHalfFloat),l||(l||(p0("Unsupported internal texture type!"),p0(`Unable to find suitable internal format for T=${o} NC= ${f}`)),l)},t.setInternalFormat=o=>{e._forceInternalFormat=!0,o!==e.internalFormat&&(e.internalFormat=o,t.modified())},t.getFormat=(o,f)=>(e.format=t.getDefaultFormat(o,f),e.format),t.getDefaultFormat=(o,f)=>{if(e._openGLRenderWindow.getWebgl2())switch(f){case 1:return e.context.RED;case 2:return e.context.RG;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}else switch(f){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:return e.context.RGBA;default:return e.context.RGB}},t.resetFormatAndType=()=>{e.format=0,e.internalFormat=0,e._forceInternalFormat=!1,e.openGLDataType=0},t.getDefaultDataType=o=>{if(e._openGLRenderWindow.getWebgl2())switch(o){case Ie.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case(e.oglNorm16Ext&&!e.useHalfFloat&&Ie.SHORT):return e.context.SHORT;case(e.oglNorm16Ext&&!e.useHalfFloat&&Ie.UNSIGNED_SHORT):return e.context.UNSIGNED_SHORT;case(e.useHalfFloat&&Ie.SHORT):return e.context.HALF_FLOAT;case(e.useHalfFloat&&Ie.UNSIGNED_SHORT):return e.context.HALF_FLOAT;case Ie.FLOAT:case Ie.VOID:default:return e.context.FLOAT}switch(o){case Ie.UNSIGNED_CHAR:return e.context.UNSIGNED_BYTE;case Ie.FLOAT:case Ie.VOID:default:if(e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))return e.context.FLOAT;{const f=e.context.getExtension("OES_texture_half_float");if(f&&e.context.getExtension("OES_texture_half_float_linear"))return f.HALF_FLOAT_OES}return e.context.UNSIGNED_BYTE}},t.getOpenGLDataType=function(o){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(!e.openGLDataType||f)&&(e.openGLDataType=t.getDefaultDataType(o)),e.openGLDataType},t.getShiftAndScale=()=>{let o=0,f=1;switch(e.openGLDataType){case e.context.BYTE:f=127.5,o=f-128;break;case e.context.UNSIGNED_BYTE:f=255,o=0;break;case e.context.SHORT:f=32767.5,o=f-32768;break;case e.context.UNSIGNED_SHORT:f=65536,o=0;break;case e.context.INT:f=21474836475e-1,o=f-2147483648;break;case e.context.UNSIGNED_INT:f=4294967295,o=0;break;case e.context.FLOAT:}return{shift:o,scale:f}},t.getOpenGLFilterMode=o=>{switch(o){case Ct.NEAREST:return e.context.NEAREST;case Ct.LINEAR:return e.context.LINEAR;case Ct.NEAREST_MIPMAP_NEAREST:return e.context.NEAREST_MIPMAP_NEAREST;case Ct.NEAREST_MIPMAP_LINEAR:return e.context.NEAREST_MIPMAP_LINEAR;case Ct.LINEAR_MIPMAP_NEAREST:return e.context.LINEAR_MIPMAP_NEAREST;case Ct.LINEAR_MIPMAP_LINEAR:return e.context.LINEAR_MIPMAP_LINEAR;default:return e.context.NEAREST}},t.getOpenGLWrapMode=o=>{switch(o){case xn.CLAMP_TO_EDGE:return e.context.CLAMP_TO_EDGE;case xn.REPEAT:return e.context.REPEAT;case xn.MIRRORED_REPEAT:return e.context.MIRRORED_REPEAT;default:return e.context.CLAMP_TO_EDGE}};function a(o,f){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const h=[];let p=e.width*e.height*e.components;if(l&&(p*=e.depth),o!==Ie.FLOAT&&e.openGLDataType===e.context.FLOAT)for(let y=0;y<f.length;y++)if(f[y]){const m=f[y].length>p?f[y].subarray(0,p):f[y];h.push(new Float32Array(m))}else h.push(null);if(o!==Ie.UNSIGNED_CHAR&&e.openGLDataType===e.context.UNSIGNED_BYTE)for(let y=0;y<f.length;y++)if(f[y]){const m=f[y].length>p?f[y].subarray(0,p):f[y];h.push(new Uint8Array(m))}else h.push(null);let d=!1;if(e._openGLRenderWindow.getWebgl2())d=e.openGLDataType===e.context.HALF_FLOAT;else{const y=e.context.getExtension("OES_texture_half_float");d=y&&e.openGLDataType===y.HALF_FLOAT_OES}if(d)for(let y=0;y<f.length;y++)if(f[y]){const m=new Uint16Array(p),S=f[y];for(let v=0;v<p;v++)m[v]=i4(S[v]);h.push(m)}else h.push(null);if(h.length===0)for(let y=0;y<f.length;y++)h.push(f[y]);return h}function n(o){if(e._openGLRenderWindow.getWebgl2())return o;const f=[],l=e.width,h=e.height,p=e.components;if(o&&(!Sa(l)||!Sa(h))){const d=e.context.getExtension("OES_texture_half_float"),y=Bt(l),m=Bt(h),S=y*m*e.components;for(let v=0;v<o.length;v++)if(o[v]!==null){let g=null;const x=h/m,C=l/y;let T=!1;e.openGLDataType===e.context.FLOAT?g=new Float32Array(S):d&&e.openGLDataType===d.HALF_FLOAT_OES?(g=new Uint16Array(S),T=!0):g=new Uint8Array(S);for(let w=0;w<m;w++){const _=w*y*p,E=w*x;let D=Math.floor(E),b=Math.ceil(E);b>=h&&(b=h-1);const N=E-D,R=1-N;D=D*l*p,b=b*l*p;for(let M=0;M<y;M++){const A=M*p,I=M*C;let $=Math.floor(I),U=Math.ceil(I);U>=l&&(U=l-1);const B=I-$;$*=p,U*=p;for(let F=0;F<p;F++)T?g[_+A+F]=Br.toHalf(Br.fromHalf(o[v][D+$+F])*R*(1-B)+Br.fromHalf(o[v][D+U+F])*R*B+Br.fromHalf(o[v][b+$+F])*N*(1-B)+Br.fromHalf(o[v][b+U+F])*N*B):g[_+A+F]=o[v][D+$+F]*R*(1-B)+o[v][D+U+F]*R*B+o[v][b+$+F]*N*(1-B)+o[v][b+U+F]*N*B}}f.push(g),e.width=y,e.height=m}else f.push(null)}if(f.length===0)for(let d=0;d<o.length;d++)f.push(o[d]);return f}function r(o){var f;return e._openGLRenderWindow?e.resizable||(f=e.renderable)!=null&&f.getResizable()?!1:e._openGLRenderWindow.getWebgl2()?!(e._openGLRenderWindow.getGLInformations().RENDERER.value.match(/WebKit/gi)&&navigator.platform.match(/Mac/gi)&&e.oglNorm16Ext&&(o===Ie.UNSIGNED_SHORT||o===Ie.SHORT)):!1:!1}t.create2DFromRaw=function(o,f,l,h,p){let d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;if(t.getOpenGLDataType(h,!0),t.getInternalFormat(h,l),t.getFormat(h,l),!e.internalFormat||!e.format||!e.openGLDataType)return Ur("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=l,e.width=o,e.height=f,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const m=a(h,[p]),S=n(m);return e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,d),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(h)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),S[0]!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,S[0])):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,S[0]),e.generateMipmap&&e.context.generateMipmap(e.target),d&&e.context.pixelStorei(e.context.UNPACK_FLIP_Y_WEBGL,!1),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*l*e._openGLRenderWindow.getDefaultTextureByteSize(h,e.oglNorm16Ext,e.useHalfFloat),t.deactivate(),!0},t.createCubeFromRaw=(o,f,l,h,p)=>{if(t.getOpenGLDataType(h),t.getInternalFormat(h,l),t.getFormat(h,l),!e.internalFormat||!e.format||!e.openGLDataType)return Ur("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_CUBE_MAP,e.components=l,e.width=o,e.height=f,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),e.maxLevel=p.length/6-1,t.createTexture(),t.bind();const d=a(h,p),y=n(d),m=[];let S=e.width,v=e.height;for(let g=0;g<y.length;g++){g%6===0&&g!==0&&(S/=2,v/=2),m[g]=Hn(h,v*S*e.components);for(let x=0;x<v;++x){const C=x*S*e.components,T=(v-x-1)*S*e.components;m[g].set(y[g].slice(T,T+S*e.components),C)}}e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(h)&&e.context.texStorage2D(e.target,6,e.internalFormat,e.width,e.height);for(let g=0;g<6;g++){let x=0,C=e.width,T=e.height;for(;C>=1&&T>=1;){let w=null;x<=e.maxLevel&&(w=m[6*x+g]),r(h)?w!=null&&e.context.texSubImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+g,x,0,0,C,T,e.format,e.openGLDataType,w):e.context.texImage2D(e.context.TEXTURE_CUBE_MAP_POSITIVE_X+g,x,e.internalFormat,C,T,0,e.format,e.openGLDataType,w),x++,C/=2,T/=2}}return e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*l*e._openGLRenderWindow.getDefaultTextureByteSize(h,e.oglNorm16Ext,e.useHalfFloat),t.deactivate(),!0},t.createDepthFromRaw=(o,f,l,h)=>(t.getOpenGLDataType(l),e.format=e.context.DEPTH_COMPONENT,e._openGLRenderWindow.getWebgl2()?l===Ie.FLOAT?e.internalFormat=e.context.DEPTH_COMPONENT32F:e.internalFormat=e.context.DEPTH_COMPONENT16:e.internalFormat=e.context.DEPTH_COMPONENT,!e.internalFormat||!e.format||!e.openGLDataType?(Ur("Failed to determine texture parameters."),!1):(e.target=e.context.TEXTURE_2D,e.components=1,e.width=o,e.height=f,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(l)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),h!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,h)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,h),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(l,e.oglNorm16Ext,e.useHalfFloat),t.deactivate(),!0)),t.create2DFromImage=o=>{if(t.getOpenGLDataType(Ie.UNSIGNED_CHAR),t.getInternalFormat(Ie.UNSIGNED_CHAR,4),t.getFormat(Ie.UNSIGNED_CHAR,4),!e.internalFormat||!e.format||!e.openGLDataType)return Ur("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=4,e.depth=1,e.numberOfDimensions=2,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1);const f=!e._openGLRenderWindow.getWebgl2()&&(!Sa(o.width)||!Sa(o.height)),l=document.createElement("canvas");l.width=f?Bt(o.width):o.width,l.height=f?Bt(o.height):o.height,e.width=l.width,e.height=l.height;const h=l.getContext("2d");h.translate(0,l.height),h.scale(1,-1),h.drawImage(o,0,0,o.width,o.height,0,0,l.width,l.height);const p=l;return r(Ie.UNSIGNED_CHAR)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),p!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,p)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,p),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(Ie.UNSIGNED_CHAR,e.oglNorm16Ext,e.useHalfFloat),t.deactivate(),!0};function i(o,f,l){const h=new Array(l),p=new Array(l);for(let d=0;d<l;++d)h[d]=o[d],p[d]=f[d]-o[d]||1;return{scale:p,offset:h}}function s(o,f){for(let l=0;l<o.length;l++){const h=o[l],p=f[l]+h;if(h<-2048||h>2048||p<-2048||p>2048)return!1}return!0}function u(o,f,l,h){t.getOpenGLDataType(o);let p=!1;if(e._openGLRenderWindow.getWebgl2())p=e.openGLDataType===e.context.HALF_FLOAT;else{const y=e.context.getExtension("OES_texture_half_float");p=y&&e.openGLDataType===y.HALF_FLOAT_OES}const d=p&&(s(f,l)||h);e.useHalfFloat=d}function c(o,f){const l=o.getNumberOfComponents(),h=o.getDataType(),p=o.getData(),d=new Array(l),y=new Array(l);for(let S=0;S<l;++S){const[v,g]=o.getRange(S);d[S]=v,y[S]=g}const m=i(d,y,l);return u(h,m.offset,m.scale,f),e.useHalfFloat||t.getOpenGLDataType(h,!0),{numComps:l,dataType:h,data:p,scaleOffsets:m}}t.create2DFilterableFromRaw=function(o,f,l,h,p){let d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1;return t.create2DFilterableFromDataArray(o,f,pe.newInstance({numberOfComponents:l,dataType:h,values:p}),d)},t.create2DFilterableFromDataArray=function(o,f,l){let h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const{numComps:p,dataType:d,data:y}=c(l,h);t.create2DFromRaw(o,f,p,d,y)},t.create3DFromRaw=(o,f,l,h,p,d)=>{if(t.getOpenGLDataType(p),t.getInternalFormat(p,h),t.getFormat(p,h),!e.internalFormat||!e.format||!e.openGLDataType)return Ur("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_3D,e.components=h,e.width=o,e.height=f,e.depth=l,e.numberOfDimensions=3,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind();const S=a(p,[d],!0),v=n(S);return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(p)?(e.context.texStorage3D(e.target,1,e.internalFormat,e.width,e.height,e.depth),v[0]!=null&&e.context.texSubImage3D(e.target,0,0,0,0,e.width,e.height,e.depth,e.format,e.openGLDataType,v[0])):e.context.texImage3D(e.target,0,e.internalFormat,e.width,e.height,e.depth,0,e.format,e.openGLDataType,v[0]),e.generateMipmap&&e.context.generateMipmap(e.target),e.allocatedGPUMemoryInBytes=e.width*e.height*e.depth*e.components*e._openGLRenderWindow.getDefaultTextureByteSize(p,e.oglNorm16Ext,e.useHalfFloat),t.deactivate(),!0},t.create3DFilterableFromRaw=function(o,f,l,h,p,d){let y=arguments.length>6&&arguments[6]!==void 0?arguments[6]:!1;return t.create3DFilterableFromDataArray(o,f,l,pe.newInstance({numberOfComponents:h,dataType:p,values:d}),y)},t.create3DFilterableFromDataArray=function(o,f,l,h){let p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;const{numComps:d,dataType:y,data:m,scaleOffsets:S}=c(h,p),v=o*f*l,g=[],x=[];for(let F=0;F<d;++F)g[F]=0,x[F]=1;e.volumeInfo={scale:x,offset:g,dataComputedScale:S.scale,dataComputedOffset:S.offset,width:o,height:f,depth:l};const C=structuredClone(S);if(e._openGLRenderWindow.getWebgl2()){if(e.oglNorm16Ext&&!e.useHalfFloat&&y===Ie.SHORT){for(let X=0;X<d;++X)e.volumeInfo.scale[X]=32767;return t.create3DFromRaw(o,f,l,d,y,m)}if(e.oglNorm16Ext&&!e.useHalfFloat&&y===Ie.UNSIGNED_SHORT){for(let X=0;X<d;++X)e.volumeInfo.scale[X]=65535;return t.create3DFromRaw(o,f,l,d,y,m)}if(y===Ie.FLOAT||e.useHalfFloat&&(y===Ie.SHORT||y===Ie.UNSIGNED_SHORT))return t.create3DFromRaw(o,f,l,d,y,m);if(y===Ie.UNSIGNED_CHAR){for(let X=0;X<d;++X)e.volumeInfo.scale[X]=255;return t.create3DFromRaw(o,f,l,d,y,m)}const F=new Float32Array(v*d);e.volumeInfo.offset=C.offset,e.volumeInfo.scale=C.scale;let z=0;const H=C.scale.map(X=>1/X);for(let X=0;X<v;X++)for(let Y=0;Y<d;Y++)F[z]=(m[z]-C.offset[Y])*H[Y],z++;return t.create3DFromRaw(o,f,l,d,Ie.FLOAT,F)}let T=(F,z,H,X,Y)=>{F[z]=H},w=Ie.UNSIGNED_CHAR;if(y===Ie.UNSIGNED_CHAR)for(let F=0;F<d;++F)C.offset[F]=0,C.scale[F]=255;else e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear")?(w=Ie.FLOAT,T=(F,z,H,X,Y)=>{F[z]=(H-X)/Y}):(w=Ie.UNSIGNED_CHAR,T=(F,z,H,X,Y)=>{F[z]=255*(H-X)/Y});if(t.getOpenGLDataType(w),t.getInternalFormat(w,d),t.getFormat(w,d),!e.internalFormat||!e.format||!e.openGLDataType)return Ur("Failed to determine texture parameters."),!1;e.target=e.context.TEXTURE_2D,e.components=d,e.depth=1,e.numberOfDimensions=2;let _=e.context.getParameter(e.context.MAX_TEXTURE_SIZE);_>4096&&(w===Ie.FLOAT||d>=3)&&(_=4096);let E=1,D=1;v>_*_&&(E=Math.ceil(Math.sqrt(v/(_*_))),D=E);let b=Math.sqrt(v)/E;b=Bt(b);const N=Math.floor(b*E/o),R=Math.ceil(l/N),M=Bt(f*R/D);e.width=b,e.height=M,e._openGLRenderWindow.activateTexture(t),t.createTexture(),t.bind(),e.volumeInfo.xreps=N,e.volumeInfo.yreps=R,e.volumeInfo.xstride=E,e.volumeInfo.ystride=D,e.volumeInfo.offset=C.offset,e.volumeInfo.scale=C.scale;let A;const I=b*M*d;w===Ie.FLOAT?A=new Float32Array(I):A=new Uint8Array(I);let $=0;const U=Math.floor(o/E),B=Math.floor(f/D);for(let F=0;F<R;F++){const z=Math.min(N,l-F*N),H=d*(e.width-z*Math.floor(o/E));for(let X=0;X<B;X++){for(let Y=0;Y<z;Y++){const q=d*((F*N+Y)*o*f+D*X*o);for(let ee=0;ee<U;ee++)for(let re=0;re<d;re++)T(A,$,m[q+E*ee*d+re],C.offset[re],C.scale[re]),$++}$+=H}}return e.context.pixelStorei(e.context.UNPACK_ALIGNMENT,1),r(w)?(e.context.texStorage2D(e.target,1,e.internalFormat,e.width,e.height),A!=null&&e.context.texSubImage2D(e.target,0,0,0,e.width,e.height,e.format,e.openGLDataType,A)):e.context.texImage2D(e.target,0,e.internalFormat,e.width,e.height,0,e.format,e.openGLDataType,A),t.deactivate(),!0},t.setOpenGLRenderWindow=o=>{e._openGLRenderWindow!==o&&(t.releaseGraphicsResources(),e._openGLRenderWindow=o,e.context=null,o&&(e.context=e._openGLRenderWindow.getContext()))},t.getMaximumTextureSize=o=>o&&o.isCurrent()?o.getIntegerv(o.MAX_TEXTURE_SIZE):-1}const s4={_openGLRenderWindow:null,_forceInternalFormat:!1,context:null,handle:0,sendParametersTime:null,textureBuildTime:null,numberOfDimensions:0,target:0,format:0,openGLDataType:0,components:0,width:0,height:0,depth:0,autoParameters:!0,wrapS:xn.CLAMP_TO_EDGE,wrapT:xn.CLAMP_TO_EDGE,wrapR:xn.CLAMP_TO_EDGE,minificationFilter:Ct.NEAREST,magnificationFilter:Ct.NEAREST,minLOD:-1e3,maxLOD:1e3,baseLevel:0,maxLevel:1e3,generateMipmap:!1,useHalfFloat:!0,oglNorm16Ext:null,allocatedGPUMemoryInBytes:0};function u1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,s4,a),vt.extend(t,e,a),e.sendParametersTime={},ot(e.sendParametersTime,{mtime:0}),e.textureBuildTime={},ot(e.textureBuildTime,{mtime:0}),sa(t,e,["format","openGLDataType"]),lt(t,e,["keyMatrixTime","minificationFilter","magnificationFilter","wrapS","wrapT","wrapR","generateMipmap","oglNorm16Ext"]),Lt(t,e,["width","height","volumeInfo","components","handle","target","allocatedGPUMemoryInBytes"]),ca(t,e,["openGLRenderWindow"]),o4(t,e)}const c1=Ke(u1,"vtkOpenGLTexture");var Me={newInstance:c1,extend:u1,...o1};st("vtkTexture",c1);var g0=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexMC;

// frag position in VC
//VTK::PositionVC::Dec

// optional normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// Texture coordinates
//VTK::TCoord::Dec

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

// Apple Bug
//VTK::PrimID::Dec

// picking support
//VTK::Picking::Dec

void main()
{
  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  //VTK::PrimID::Impl

  //VTK::PositionVC::Impl

  //VTK::Light::Impl

  //VTK::Picking::Impl
}
`,La=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the polydata mappers fragment shader

uniform int PrimitiveIDOffset;

// VC position of this fragment
//VTK::PositionVC::Dec

// optional color passed in from the vertex shader, vertexColor
//VTK::Color::Dec

// optional surface normal declaration
//VTK::Normal::Dec

// extra lighting parameters
//VTK::Light::Dec

// define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// Depth Peeling Support
//VTK::DepthPeeling::Dec

// clipping plane vars
//VTK::Clip::Dec

// label outline 
//VTK::LabelOutline::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

//VTK::LabelOutlineHelperFunction

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Clip::Impl

  //VTK::Color::Impl

  // Generate the normal if we are not passed in one
  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Light::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;function u4(t,e){t.replaceShaderCoincidentOffset=(a,n,r)=>{const i=t.getCoincidentParameters(n,r);if(i&&(i.factor!==0||i.offset!==0)){let s=a.Fragment;s=J.substitute(s,"//VTK::Coincident::Dec",["uniform float cfactor;","uniform float coffset;"]).result,e.context.getExtension("EXT_frag_depth")&&(i.factor!==0?(s=J.substitute(s,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,s=J.substitute(s,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):s=J.substitute(s,"//VTK::Depth::Impl","gl_FragDepthEXT = gl_FragCoord.z + 0.000016*coffset;").result),e._openGLRenderWindow.getWebgl2()&&(i.factor!==0?(s=J.substitute(s,"//VTK::UniformFlow::Impl",["float cscale = length(vec2(dFdx(gl_FragCoord.z),dFdy(gl_FragCoord.z)));","//VTK::UniformFlow::Impl"],!1).result,s=J.substitute(s,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + cfactor*cscale + 0.000016*coffset;").result):s=J.substitute(s,"//VTK::Depth::Impl","gl_FragDepth = gl_FragCoord.z + 0.000016*coffset;").result),a.Fragment=s}}}function c4(t,e){t.applyShaderReplacements=(a,n,r)=>{let i=null;if(n&&(i=n.ShaderReplacements),i)for(let s=0;s<i.length;s++){const u=i[s];if(r&&u.replaceFirst||!r&&!u.replaceFirst){const c=u.shaderType,o=a[c],f=J.substitute(o,u.originalValue,u.replacementValue,u.replaceAll);a[c]=f.result}}},t.buildShaders=(a,n,r)=>{t.getReplacedShaderTemplate(a,n,r),e.lastRenderPassShaderReplacement=e.currentRenderPass?e.currentRenderPass.getShaderReplacement():null,e.lastRenderPassShaderReplacement&&e.lastRenderPassShaderReplacement(a);const i=e.renderable.getViewSpecificProperties().OpenGL;t.applyShaderReplacements(a,i,!0),t.replaceShaderValues(a,n,r),t.applyShaderReplacements(a,i)},t.getReplacedShaderTemplate=(a,n,r)=>{const i=e.renderable.getViewSpecificProperties().OpenGL;t.getShaderTemplate(a,n,r);let s=a.Vertex;if(i){const o=i.VertexShaderCode;o!==void 0&&o!==""&&(s=o)}a.Vertex=s;let u=a.Fragment;if(i){const o=i.FragmentShaderCode;o!==void 0&&o!==""&&(u=o)}a.Fragment=u;let c=a.Geometry;if(i){const o=i.GeometryShaderCode;o!==void 0&&(c=o)}a.Geometry=c}}var Sn={implementReplaceShaderCoincidentOffset:u4,implementBuildShadersWithReplacements:c4};const{FieldAssociations:d0}=nr,{primTypes:pt}=Gt,{Representation:Gr,Shading:l1}=Qn,{ScalarMode:Qi}=dn,{Filter:f1,Wrap:h1}=Me,{vtkErrorMacro:cr}=wt,l4={type:"StartEvent"},f4={type:"EndEvent"},{CoordinateSystem:h4}=Zl;function p4(t){const e=t.getSelector();return e?e.getCurrentPass():Et.MIN_KNOWN_PASS-1}function g4(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper"),t.buildPass=n=>{n&&(e.currentRenderPass=null,e.openGLActor=t.getFirstAncestorOfType("vtkOpenGLActor"),e._openGLRenderer=e.openGLActor.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.translucentPass=(n,r)=>{n&&(e.currentRenderPass=r,t.render())},t.zBufferPass=n=>{n&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.opaquePass=n=>{n&&t.render()},t.render=()=>{const n=e._openGLRenderWindow.getContext();if(e.context!==n){e.context=n;for(let s=pt.Start;s<pt.End;s++)e.primitives[s].setOpenGLRenderWindow(e._openGLRenderWindow)}const r=e.openGLActor.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,r)},t.getShaderTemplate=(n,r,i)=>{n.Vertex=g0,n.Fragment=La,n.Geometry=""},t.replaceShaderColor=(n,r,i)=>{let s=n.Vertex,u=n.Geometry,c=n.Fragment;const o=e.lastBoundBO.getReferenceByName("lastLightComplexity");let f=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity","uniform vec3 ambientColorUniform;","uniform vec3 diffuseColorUniform;"];o&&(f=f.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let l=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];o&&(l=l.concat(["  vec3 specularColor;","  float specularPower;"])),l=l.concat(["  ambientColor = ambientColorUniform;","  diffuseColor = diffuseColorUniform;","  opacity = opacityUniform;"]),o&&(l=l.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges&&(f=f.concat(["varying vec4 vertexColorVSOutput;"]),s=J.substitute(s,"//VTK::Color::Dec",["attribute vec4 scalarColor;","varying vec4 vertexColorVSOutput;"]).result,s=J.substitute(s,"//VTK::Color::Impl",["vertexColorVSOutput =  scalarColor;"]).result,u=J.substitute(u,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,u=J.substitute(u,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0&&!e.drawingEdges?c=J.substitute(c,"//VTK::Color::Impl",l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])).result:e.renderable.getInterpolateScalarsBeforeMapping()&&e.renderable.getColorCoordinates()&&!e.drawingEdges?c=J.substitute(c,"//VTK::Color::Impl",l.concat(["  vec4 texColor = texture2D(texture1, tcoordVCVSOutput.st);","  diffuseColor = texColor.rgb;","  ambientColor = texColor.rgb;","  opacity = opacity*texColor.a;"])).result:(i.getBackfaceProperty()&&!e.drawingEdges&&(f=f.concat(["uniform float opacityUniformBF; // the fragment opacity","uniform float ambientIntensityBF; // the material ambient","uniform float diffuseIntensityBF; // the material diffuse","uniform vec3 ambientColorUniformBF; // ambient material color","uniform vec3 diffuseColorUniformBF; // diffuse material color"]),o?(f=f.concat(["uniform float specularIntensityBF; // the material specular intensity","uniform vec3 specularColorUniformBF; // intensity weighted color","uniform float specularPowerUniformBF;"]),l=l.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  specularColor = specularIntensityBF * specularColorUniformBF;","  specularPower = specularPowerUniformBF;","  opacity = opacityUniformBF; }"])):l=l.concat(["if (gl_FrontFacing == false) {","  ambientColor = ambientIntensityBF * ambientColorUniformBF;","  diffuseColor = diffuseIntensityBF * diffuseColorUniformBF;","  opacity = opacityUniformBF; }"])),e.haveCellScalars&&!e.drawingEdges&&(f=f.concat(["uniform samplerBuffer texture1;"])),c=J.substitute(c,"//VTK::Color::Impl",l).result),c=J.substitute(c,"//VTK::Color::Dec",f).result,n.Vertex=s,n.Geometry=u,n.Fragment=c},t.replaceShaderLight=(n,r,i)=>{let s=n.Fragment;const u="",c=e.lastBoundBO.getReferenceByName("lastLightComplexity"),o=e.lastBoundBO.getReferenceByName("lastLightCount");let f=[];switch(c){case 0:s=J.substitute(s,"//VTK::Light::Impl",["  gl_FragData[0] = vec4(ambientColor * ambient + diffuseColor * diffuse, opacity);","  //VTK::Light::Impl"],!1).result;break;case 1:s=J.substitute(s,"//VTK::Light::Impl",["  float df = max(0.0, normalVCVSOutput.z);","  float sf = pow(df, specularPower);","  vec3 diffuseL = df * diffuseColor;","  vec3 specularL = sf * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"],!1).result;break;case 2:for(let l=0;l<o;++l)f=f.concat([`uniform vec3 lightColor${l};`,`uniform vec3 lightDirectionVC${l}; // normalized`,`uniform vec3 lightHalfAngleVC${l}; // normalized`]);s=J.substitute(s,"//VTK::Light::Dec",f).result,f=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  float df;"];for(let l=0;l<o;++l)f=f.concat([`  df = max(0.0, dot(normalVCVSOutput, -lightDirectionVC${l}));`,`  diffuseL += ((df${u}) * lightColor${l});`,`  if (dot(normalVCVSOutput, lightDirectionVC${l}) < 0.0)`,"    {",`    float sf = sign(df)*pow(max(1e-5,
                                              dot(reflect(lightDirectionVC${l},normalVCVSOutput),
                                                  normalize(-vertexVC.xyz))),
                                         specularPower);`,`    specularL += (sf${u} * lightColor${l});`,"    }"]);f=f.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),s=J.substitute(s,"//VTK::Light::Impl",f,!1).result;break;case 3:for(let l=0;l<o;++l)f=f.concat([`uniform vec3 lightColor${l};`,`uniform vec3 lightDirectionVC${l}; // normalized`,`uniform vec3 lightHalfAngleVC${l}; // normalized`,`uniform vec3 lightPositionVC${l};`,`uniform vec3 lightAttenuation${l};`,`uniform float lightConeAngle${l};`,`uniform float lightExponent${l};`,`uniform int lightPositional${l};`]);s=J.substitute(s,"//VTK::Light::Dec",f).result,f=["vec3 diffuseL = vec3(0,0,0);","  vec3 specularL = vec3(0,0,0);","  vec3 vertLightDirectionVC;","  float attenuation;","  float df;"];for(let l=0;l<o;++l)f=f.concat(["  attenuation = 1.0;",`  if (lightPositional${l} == 0)`,"    {",`      vertLightDirectionVC = lightDirectionVC${l};`,"    }","  else","    {",`    vertLightDirectionVC = vertexVC.xyz - lightPositionVC${l};`,"    float distanceVC = length(vertLightDirectionVC);","    vertLightDirectionVC = normalize(vertLightDirectionVC);","    attenuation = 1.0 /",`      (lightAttenuation${l}.x`,`       + lightAttenuation${l}.y * distanceVC`,`       + lightAttenuation${l}.z * distanceVC * distanceVC);`,"    // per OpenGL standard cone angle is 90 or less for a spot light",`    if (lightConeAngle${l} <= 90.0)`,"      {",`      float coneDot = dot(vertLightDirectionVC, lightDirectionVC${l});`,"      // if inside the cone",`      if (coneDot >= cos(radians(lightConeAngle${l})))`,"        {",`        attenuation = attenuation * pow(coneDot, lightExponent${l});`,"        }","      else","        {","        attenuation = 0.0;","        }","      }","    }","    df = max(0.0, attenuation*dot(normalVCVSOutput, -vertLightDirectionVC));",`    diffuseL += ((df${u}) * lightColor${l});`,"    if (dot(normalVCVSOutput, vertLightDirectionVC) < 0.0)","      {",`      float sf = sign(df)*attenuation*pow(max(1e-5,
                                                           dot(reflect(lightDirectionVC${l},
                                                                       normalVCVSOutput),
                                                               normalize(-vertexVC.xyz))),
                                                       specularPower);`,`    specularL += ((sf${u}) * lightColor${l});`,"    }"]);f=f.concat(["  diffuseL = diffuseL * diffuseColor;","  specularL = specularL * specularColor;","  gl_FragData[0] = vec4(ambientColor * ambient + diffuseL * diffuse + specularL * specular, opacity);","  //VTK::Light::Impl"]),s=J.substitute(s,"//VTK::Light::Impl",f,!1).result;break;default:cr("bad light complexity")}n.Fragment=s},t.replaceShaderNormal=(n,r,i)=>{if(e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let u=n.Vertex,c=n.Geometry,o=n.Fragment;e.lastBoundBO.getCABO().getNormalOffset()?(u=J.substitute(u,"//VTK::Normal::Dec",["attribute vec3 normalMC;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,u=J.substitute(u,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * normalMC;"]).result,c=J.substitute(c,"//VTK::Normal::Dec",["in vec3 normalVCVSOutput[];","out vec3 normalVCGSOutput;"]).result,c=J.substitute(c,"//VTK::Normal::Impl",["normalVCGSOutput = normalVCVSOutput[i];"]).result,o=J.substitute(o,"//VTK::Normal::Dec",["varying vec3 normalVCVSOutput;"]).result,o=J.substitute(o,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalVCVSOutput);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.haveCellNormals?(o=J.substitute(o,"//VTK::Normal::Dec",["uniform mat3 normalMatrix;","uniform samplerBuffer textureN;"]).result,o=J.substitute(o,"//VTK::Normal::Impl",["vec3 normalVCVSOutput = normalize(normalMatrix *","    texelFetchBuffer(textureN, gl_PrimitiveID + PrimitiveIDOffset).xyz);","  if (gl_FrontFacing == false) { normalVCVSOutput = -normalVCVSOutput; }"]).result):e.lastBoundBO.getOpenGLMode(i.getProperty().getRepresentation())===e.context.LINES?(o=J.substitute(o,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,o=J.substitute(o,"//VTK::Normal::Impl",["vec3 normalVCVSOutput;","  if (abs(fdx.x) > 0.0)","    { fdx = normalize(fdx); normalVCVSOutput = normalize(cross(vec3(fdx.y, -fdx.x, 0.0), fdx)); }","  else { fdy = normalize(fdy); normalVCVSOutput = normalize(cross(vec3(fdy.y, -fdy.x, 0.0), fdy));}"]).result):(o=J.substitute(o,"//VTK::Normal::Dec",["uniform int cameraParallel;"]).result,o=J.substitute(o,"//VTK::UniformFlow::Impl",["  vec3 fdx = dFdx(vertexVC.xyz);","  vec3 fdy = dFdy(vertexVC.xyz);","  //VTK::UniformFlow::Impl"]).result,o=J.substitute(o,"//VTK::Normal::Impl",["  fdx = normalize(fdx);","  fdy = normalize(fdy);","  vec3 normalVCVSOutput = normalize(cross(fdx,fdy));","  if (cameraParallel == 1 && normalVCVSOutput.z < 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }","  if (cameraParallel == 0 && dot(normalVCVSOutput,vertexVC.xyz) > 0.0) { normalVCVSOutput = -1.0*normalVCVSOutput; }"]).result),n.Vertex=u,n.Geometry=c,n.Fragment=o}},t.replaceShaderPositionVC=(n,r,i)=>{e.lastBoundBO.replaceShaderPositionVC(n,r,i);let s=n.Vertex,u=n.Geometry,c=n.Fragment;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(s=J.substitute(s,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,s=J.substitute(s,"//VTK::PositionVC::Impl",["vertexVCVSOutput = MCVCMatrix * vertexMC;","  gl_Position = MCPCMatrix * vertexMC;"]).result,s=J.substitute(s,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result,u=J.substitute(u,"//VTK::PositionVC::Dec",["in vec4 vertexVCVSOutput[];","out vec4 vertexVCGSOutput;"]).result,u=J.substitute(u,"//VTK::PositionVC::Impl",["vertexVCGSOutput = vertexVCVSOutput[i];"]).result,c=J.substitute(c,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,c=J.substitute(c,"//VTK::PositionVC::Impl",["vec4 vertexVC = vertexVCVSOutput;"]).result):(s=J.substitute(s,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,s=J.substitute(s,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result),n.Vertex=s,n.Geometry=u,n.Fragment=c},t.replaceShaderTCoord=(n,r,i)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let s=n.Vertex,u=n.Geometry,c=n.Fragment;if(e.drawingEdges)return;s=J.substitute(s,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result;const o=e.openGLActor.getActiveTextures();let f=2,l=2;if(o&&o.length>0&&(f=o[0].getComponents(),o[0].getTarget()===e.context.TEXTURE_CUBE_MAP&&(l=3)),e.renderable.getColorTextureMap()&&(f=e.renderable.getColorTextureMap().getPointData().getScalars().getNumberOfComponents(),l=2),l===2){if(s=J.substitute(s,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result,u=J.substitute(u,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];","out vec2 tcoordVCGSOutput;"]).result,u=J.substitute(u,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,c=J.substitute(c,"//VTK::TCoord::Dec",["varying vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,o&&o.length>=1)switch(f){case 1:c=J.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:c=J.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:c=J.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}}else switch(s=J.substitute(s,"//VTK::TCoord::Dec","attribute vec3 tcoordMC; varying vec3 tcoordVCVSOutput;").result,u=J.substitute(u,"//VTK::TCoord::Dec",["in vec3 tcoordVCVSOutput[];","out vec3 tcoordVCGSOutput;"]).result,u=J.substitute(u,"//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];").result,c=J.substitute(c,"//VTK::TCoord::Dec",["varying vec3 tcoordVCVSOutput;","uniform samplerCube texture1;"]).result,f){case 1:c=J.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;"]).result;break;case 2:c=J.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.r;","  diffuseColor = diffuseColor*tcolor.r;","  opacity = opacity * tcolor.g;"]).result;break;default:c=J.substitute(c,"//VTK::TCoord::Impl",["  vec4 tcolor = textureCube(texture1, tcoordVCVSOutput);","  ambientColor = ambientColor*tcolor.rgb;","  diffuseColor = diffuseColor*tcolor.rgb;","  opacity = opacity * tcolor.a;"]).result}n.Vertex=s,n.Geometry=u,n.Fragment=c}},t.replaceShaderClip=(n,r,i)=>{let s=n.Vertex,u=n.Fragment;if(e.renderable.getNumberOfClippingPlanes()){const c=e.renderable.getNumberOfClippingPlanes();s=J.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`uniform vec4 clipPlanes[${c}];`,`varying float clipDistancesVSOutput[${c}];`]).result,s=J.substitute(s,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${c}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,u=J.substitute(u,"//VTK::Clip::Dec",["uniform int numClipPlanes;",`varying float clipDistancesVSOutput[${c}];`]).result,u=J.substitute(u,"//VTK::Clip::Impl",[`for (int planeNum = 0; planeNum < ${c}; planeNum++)`,"    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}n.Vertex=s,n.Fragment=u},t.getCoincidentParameters=(n,r)=>{let i={factor:0,offset:0};const s=r.getProperty();if(e.renderable.getResolveCoincidentTopology()||s.getEdgeVisibility()&&s.getRepresentation()===Gr.SURFACE){const c=e.lastBoundBO.getPrimitiveType();c===pt.Points||s.getRepresentation()===Gr.POINTS?i=e.renderable.getCoincidentTopologyPointOffsetParameter():c===pt.Lines||s.getRepresentation()===Gr.WIREFRAME?i=e.renderable.getCoincidentTopologyLineOffsetParameters():(c===pt.Tris||c===pt.TriStrips)&&(i=e.renderable.getCoincidentTopologyPolygonOffsetParameters()),(c===pt.TrisEdges||c===pt.TriStripsEdges)&&(i=e.renderable.getCoincidentTopologyPolygonOffsetParameters(),i.factor/=2,i.offset/=2)}const u=e._openGLRenderer.getSelector();return u&&u.getFieldAssociation()===d0.FIELD_ASSOCIATION_POINTS&&(i.offset-=2),i},t.replaceShaderPicking=(n,r,i)=>{let s=n.Fragment,u=n.Vertex;if(s=J.substitute(s,"//VTK::Picking::Dec",["uniform int picking;","//VTK::Picking::Dec"]).result,!!e._openGLRenderer.getSelector()){switch((e.lastSelectionState===Et.ID_LOW24||e.lastSelectionState===Et.ID_HIGH24)&&(u=J.substitute(u,"//VTK::Picking::Dec",[`flat out int vertexIDVSOutput;
`,`uniform int VertexIDOffset;
`]).result,u=J.substitute(u,"//VTK::Picking::Impl",`  vertexIDVSOutput = gl_VertexID + VertexIDOffset;
`).result,s=J.substitute(s,"//VTK::Picking::Dec",`flat in int vertexIDVSOutput;
`).result,s=J.substitute(s,"//VTK::Picking::Impl",["  int idx = vertexIDVSOutput;","//VTK::Picking::Impl"]).result),e.lastSelectionState){case Et.ID_LOW24:s=J.substitute(s,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx%256)/255.0, float((idx/256)%256)/255.0, float((idx/65536)%256)/255.0, 1.0);").result;break;case Et.ID_HIGH24:s=J.substitute(s,"//VTK::Picking::Impl","  gl_FragData[0] = vec4(float(idx)/255.0, 0.0, 0.0, 1.0);").result;break;default:s=J.substitute(s,"//VTK::Picking::Dec","uniform vec3 mapperIndex;").result,s=J.substitute(s,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result}n.Fragment=s,n.Vertex=u}},t.replaceShaderValues=(n,r,i)=>{if(t.replaceShaderColor(n,r,i),t.replaceShaderNormal(n,r,i),t.replaceShaderLight(n,r,i),t.replaceShaderTCoord(n,r,i),t.replaceShaderPicking(n,r,i),t.replaceShaderClip(n,r,i),t.replaceShaderCoincidentOffset(n,r,i),t.replaceShaderPositionVC(n,r,i),e.haveSeenDepthRequest){let s=n.Fragment;s=J.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=J.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,n.Fragment=s}},t.getNeedToRebuildShaders=(n,r,i)=>{let s=0,u=0;const c=n.getPrimitiveType(),o=e.currentInput;let f=!1;const l=o.getPointData().getNormals(),h=o.getCellData().getNormals(),p=i.getProperty().getInterpolation()===l1.FLAT,d=i.getProperty().getRepresentation(),y=n.getOpenGLMode(d,c);if((y===e.context.TRIANGLES||h&&!l||!p&&l||!p&&y===e.context.LINES)&&(f=!0),i.getProperty().getLighting()&&f){s=0;const g=r.getLightsByReference();for(let x=0;x<g.length;++x){const C=g[x];C.getSwitch()>0&&(u++,s===0&&(s=1)),s===1&&(u>1||C.getIntensity()!==1||!C.lightTypeIsHeadLight())&&(s=2),s<3&&C.getPositional()&&(s=3)}}let m=!1;const S=e.lastBoundBO.getReferenceByName("lastLightComplexity"),v=e.lastBoundBO.getReferenceByName("lastLightCount");return(S!==s||v!==u)&&(e.lastBoundBO.set({lastLightComplexity:s},!0),e.lastBoundBO.set({lastLightCount:u},!0),m=!0),(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(m=!0),e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||n.getShaderSourceTime().getMTime()<e.renderable.getMTime()||n.getShaderSourceTime().getMTime()<e.currentInput.getMTime()||n.getShaderSourceTime().getMTime()<e.selectionStateChanged.getMTime()||m?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,!0):!1},t.invokeShaderCallbacks=(n,r,i)=>{const s=e.renderable.getViewSpecificProperties().ShadersCallbacks;s&&s.forEach(u=>{u.callback(u.userData,n,r,i)})},t.setMapperShaderParameters=(n,r,i)=>{if(n.getProgram().isUniformUsed("PrimitiveIDOffset")&&n.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),n.getProgram().isUniformUsed("VertexIDOffset")&&n.getProgram().setUniformi("VertexIDOffset",e.vertexIDOffset),n.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){const c=e.lastBoundBO.getReferenceByName("lastLightComplexity");n.getProgram().isAttributeUsed("vertexMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexMC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,!1)||cr("Error setting vertexMC in shader VAO.")),n.getProgram().isAttributeUsed("normalMC")&&n.getCABO().getNormalOffset()&&c>0?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"normalMC",n.getCABO().getNormalOffset(),n.getCABO().getStride(),e.context.FLOAT,3,!1)||cr("Error setting normalMC in shader VAO."):n.getVAO().removeAttributeArray("normalMC"),e.renderable.getCustomShaderAttributes().forEach((o,f)=>{n.getProgram().isAttributeUsed(`${o}MC`)&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),`${o}MC`,n.getCABO().getCustomData()[f].offset,n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getCustomData()[f].components,!1)||cr(`Error setting ${o}MC in shader VAO.`))}),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getTCoordComponents(),!1)||cr("Error setting tcoordMC in shader VAO."):n.getVAO().removeAttributeArray("tcoordMC"),n.getProgram().isAttributeUsed("scalarColor")&&n.getCABO().getColorComponents()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO().getColorBO(),"scalarColor",n.getCABO().getColorOffset(),n.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,4,!0)||cr("Error setting scalarColor in shader VAO."):n.getVAO().removeAttributeArray("scalarColor"),n.getAttributeUpdateTime().modified()}if(e.renderable.getNumberOfClippingPlanes()){const c=e.renderable.getNumberOfClippingPlanes(),o=[],l=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,h=l?dt(e.tmpMat4,i.getMatrix()):i.getMatrix();l&&(ze(h,h),Ge(h,h,l),ze(h,h));for(let p=0;p<c;p++){const d=[];e.renderable.getClippingPlaneInDataCoords(h,p,d);for(let y=0;y<4;y++)o.push(d[y])}n.getProgram().setUniformi("numClipPlanes",c),n.getProgram().setUniform4fv("clipPlanes",o)}e.internalColorTexture&&n.getProgram().isUniformUsed("texture1")&&n.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const s=e.openGLActor.getActiveTextures();if(s)for(let c=0;c<s.length;++c){const f=s[c].getTextureUnit(),l=`texture${f+1}`;n.getProgram().isUniformUsed(l)&&n.getProgram().setUniformi(l,f)}if(e.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){const c=t.getCoincidentParameters(r,i);n.getProgram().setUniformf("coffset",c.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",c.factor)}n.setMapperShaderParameters(r,i,e._openGLRenderer.getTiledSizeAndOrigin());const u=e._openGLRenderer.getSelector();n.getProgram().setUniform3fArray("mapperIndex",u?u.getPropColorValue():[0,0,0]),n.getProgram().setUniformi("picking",u?u.getCurrentPass()+1:0)},t.setLightingShaderParameters=(n,r,i)=>{const s=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(s<2)return;const u=n.getProgram();let c=0;const o=r.getLightsByReference();for(let h=0;h<o.length;++h){const p=o[h];if(p.getSwitch()>0){const y=p.getColorByReference(),m=p.getIntensity();e.lightColor[0]=y[0]*m,e.lightColor[1]=y[1]*m,e.lightColor[2]=y[2]*m;const S=p.getDirection(),v=r.getActiveCamera().getViewMatrix(),g=[...S];p.lightTypeIsSceneLight()&&(g[0]=v[0]*S[0]+v[1]*S[1]+v[2]*S[2],g[1]=v[4]*S[0]+v[5]*S[1]+v[6]*S[2],g[2]=v[8]*S[0]+v[9]*S[1]+v[10]*S[2],nt(g)),e.lightDirection[0]=g[0],e.lightDirection[1]=g[1],e.lightDirection[2]=g[2],nt(e.lightDirection),u.setUniform3fArray(`lightColor${c}`,e.lightColor),u.setUniform3fArray(`lightDirectionVC${c}`,e.lightDirection),c++}}if(s<3)return;const l=r.getActiveCamera().getViewMatrix();ze(l,l),c=0;for(let h=0;h<o.length;++h){const p=o[h];if(p.getSwitch()>0){const y=p.getTransformedPosition(),m=new Float64Array(3);Te(m,y,l),u.setUniform3fArray(`lightAttenuation${c}`,p.getAttenuationValuesByReference()),u.setUniformi(`lightPositional${c}`,p.getPositional()),u.setUniformf(`lightExponent${c}`,p.getExponent()),u.setUniformf(`lightConeAngle${c}`,p.getConeAngle()),u.setUniform3fArray(`lightPositionVC${c}`,[m[0],m[1],m[2]]),c++}}};function a(n,r,i){return r.identity(i),n.reduce((s,u,c)=>c===0?u?r.copy(s,u):r.identity(s):u?r.multiply(s,s,u):s,i)}t.setCameraShaderParameters=(n,r,i)=>{const s=n.getProgram(),u=e.openGLCamera.getKeyMatrices(r),c=r.getActiveCamera(),o=e.openGLCamera.getKeyMatrixTime().getMTime(),f=s.getLastCameraMTime(),h=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,p=i.getIsIdentity(),d=p?{mcwc:null,normalMatrix:null}:e.openGLActor.getKeyMatrices();if(i.getCoordinateSystem()===h4.DISPLAY){const y=e._openGLRenderer.getTiledSizeAndOrigin();Se(e.tmpMat4),e.tmpMat4[0]=2/y.usize,e.tmpMat4[12]=-1,e.tmpMat4[5]=2/y.vsize,e.tmpMat4[13]=-1,Ge(e.tmpMat4,e.tmpMat4,h),s.setUniformMatrix("MCPCMatrix",e.tmpMat4)}else s.setUniformMatrix("MCPCMatrix",a([u.wcpc,d.mcwc,h],ra,e.tmpMat4));s.isUniformUsed("MCVCMatrix")&&s.setUniformMatrix("MCVCMatrix",a([u.wcvc,d.mcwc,h],ra,e.tmpMat4)),s.isUniformUsed("normalMatrix")&&s.setUniformMatrix3x3("normalMatrix",a([u.normalMatrix,d.normalMatrix],rd,e.tmpMat3)),f!==o&&(s.isUniformUsed("cameraParallel")&&s.setUniformi("cameraParallel",c.getParallelProjection()),s.setLastCameraMTime(o)),p||s.setLastCameraMTime(0)},t.setPropertyShaderParameters=(n,r,i)=>{const s=n.getProgram();let u=i.getProperty(),c=u.getOpacity(),o=e.drawingEdges?u.getEdgeColorByReference():u.getAmbientColorByReference(),f=e.drawingEdges?u.getEdgeColorByReference():u.getDiffuseColorByReference(),l=e.drawingEdges?1:u.getAmbient(),h=e.drawingEdges?0:u.getDiffuse(),p=e.drawingEdges?0:u.getSpecular();const d=u.getSpecularPower();s.setUniformf("opacityUniform",c),s.setUniform3fArray("ambientColorUniform",o),s.setUniform3fArray("diffuseColorUniform",f),s.setUniformf("ambient",l),s.setUniformf("diffuse",h);const y=e.lastBoundBO.getReferenceByName("lastLightComplexity");if(y<1)return;let m=u.getSpecularColorByReference();if(s.setUniform3fArray("specularColorUniform",m),s.setUniformf("specularPowerUniform",d),s.setUniformf("specular",p),s.isUniformUsed("ambientIntensityBF")){if(u=i.getBackfaceProperty(),c=u.getOpacity(),o=u.getAmbientColor(),l=u.getAmbient(),f=u.getDiffuseColor(),h=u.getDiffuse(),m=u.getSpecularColor(),p=u.getSpecular(),s.setUniformf("ambientIntensityBF",l),s.setUniformf("diffuseIntensityBF",h),s.setUniformf("opacityUniformBF",c),s.setUniform3fArray("ambientColorUniformBF",o),s.setUniform3fArray("diffuseColorUniformBF",f),y<1)return;s.setUniformf("specularIntensityBF",p),s.setUniform3fArray("specularColorUniformBF",m),s.setUniformf("specularPowerUniformBF",d)}},t.updateMaximumPointCellIds=(n,r)=>{var u,c,o,f;const i=e._openGLRenderer.getSelector();if(!i)return;if((c=(u=e.selectionWebGLIdsToVTKIds)==null?void 0:u.points)!=null&&c.length){const l=e.selectionWebGLIdsToVTKIds.points.length;i.setMaximumPointId(l-1)}if((f=(o=e.selectionWebGLIdsToVTKIds)==null?void 0:o.cells)!=null&&f.length){const l=e.selectionWebGLIdsToVTKIds.cells.length;i.setMaximumCellId(l-1)}i.getFieldAssociation()===d0.FIELD_ASSOCIATION_POINTS&&(e.pointPicking=!0)},t.renderPieceStart=(n,r)=>{e.primitiveIDOffset=0,e.vertexIDOffset=0;const i=p4(e._openGLRenderer);if(e.lastSelectionState!==i&&(e.selectionStateChanged.modified(),e.lastSelectionState=i),e._openGLRenderer.getSelector())switch(i){default:e._openGLRenderer.getSelector().renderProp(r)}t.updateBufferObjects(n,r),e.renderable.getColorTextureMap()&&e.internalColorTexture.activate(),e.lastBoundBO=null},t.renderPieceDraw=(n,r)=>{const i=r.getProperty().getRepresentation(),s=r.getProperty().getEdgeVisibility()&&i===Gr.SURFACE,u=e._openGLRenderer.getSelector(),c=u&&u.getFieldAssociation()===d0.FIELD_ASSOCIATION_POINTS&&(e.lastSelectionState===Et.ID_LOW24||e.lastSelectionState===Et.ID_HIGH24);for(let o=pt.Start;o<pt.End;o++)e.primitives[o].setPointPicking(c),e.primitives[o].getCABO().getElementCount()&&(e.drawingEdges=s&&(o===pt.TrisEdges||o===pt.TriStripsEdges),(!e.drawingEdges||!(e.renderDepth||e.lastSelectionState>=0))&&(e.lastBoundBO=e.primitives[o],e.primitiveIDOffset+=e.primitives[o].drawArrays(n,r,i,t),e.vertexIDOffset+=e.primitives[o].getCABO().getElementCount()))},t.renderPieceFinish=(n,r)=>{e.LastBoundBO&&e.LastBoundBO.getVAO().release(),e.renderable.getColorTextureMap()&&e.internalColorTexture.deactivate()},t.renderPiece=(n,r)=>{if(t.invokeEvent(l4),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(f4),!e.currentInput){cr("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const i=e.context,s=r.getProperty().getBackfaceCulling(),u=r.getProperty().getFrontfaceCulling();!s&&!u?e._openGLRenderWindow.disableCullFace():u?(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)),t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r)},t.computeBounds=(n,r)=>{if(!t.getInput()){Fr(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(n,r)=>{t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=(n,r)=>{const i=e.VBOBuildTime.getMTime();return i<t.getMTime()||i<e.renderable.getMTime()||i<r.getMTime()||i<e.currentInput.getMTime()},t.buildBufferObjects=(n,r)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,1);const s=e.renderable.getColorMapColors();e.haveCellScalars=!1;const u=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(u===Qi.USE_CELL_DATA||u===Qi.USE_CELL_FIELD_DATA||u===Qi.USE_FIELD_DATA||!i.getPointData().getScalars())&&u!==Qi.USE_POINT_FIELD_DATA&&s&&(e.haveCellScalars=!0);let c=r.getProperty().getInterpolation()!==l1.FLAT?i.getPointData().getNormals():null;c===null&&i.getCellData().getNormals()&&(e.haveCellNormals=!0,c=i.getCellData().getNormals());const o=r.getProperty().getRepresentation();let f=i.getPointData().getTCoords();if(e.openGLActor.getActiveTextures()||(f=null),e.renderable.getColorCoordinates()){f=e.renderable.getColorCoordinates(),e.internalColorTexture||(e.internalColorTexture=Me.newInstance({resizable:!0}));const h=e.internalColorTexture;h.setMinificationFilter(f1.NEAREST),h.setMagnificationFilter(f1.NEAREST),h.setWrapS(h1.CLAMP_TO_EDGE),h.setWrapT(h1.CLAMP_TO_EDGE),h.setOpenGLRenderWindow(e._openGLRenderWindow);const p=e.renderable.getColorTextureMap(),d=p.getExtent(),y=p.getPointData().getScalars();h.create2DFromRaw(d[1]-d[0]+1,d[3]-d[2]+1,y.getNumberOfComponents(),y.getDataType(),y.getData()),h.activate(),h.sendParameters(),h.deactivate()}const l=`${i.getMTime()}A${o}B${i.getMTime()}C${c?c.getMTime():1}D${s?s.getMTime():1}E${r.getProperty().getEdgeVisibility()}F${f?f.getMTime():1}`;if(e.VBOBuildString!==l){const p={points:i.getPoints(),normals:c,tcoords:f,colors:s,cellOffset:0,vertexOffset:0,haveCellScalars:e.haveCellScalars,haveCellNormals:e.haveCellNormals,customAttributes:e.renderable.getCustomShaderAttributes().map(m=>i.getPointData().getArrayByName(m))};e.renderable.getPopulateSelectionSettings()&&(e.selectionWebGLIdsToVTKIds={points:null,cells:null});const d=[{inRep:"verts",cells:i.getVerts()},{inRep:"lines",cells:i.getLines()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()},{inRep:"polys",cells:i.getPolys()},{inRep:"strips",cells:i.getStrips()}],y=r.getProperty().getEdgeVisibility()&&o===Gr.SURFACE;for(let m=pt.Start;m<pt.End;m++)m!==pt.TrisEdges&&m!==pt.TriStripsEdges?(p.cellOffset+=e.primitives[m].getCABO().createVBO(d[m].cells,d[m].inRep,o,p,e.selectionWebGLIdsToVTKIds),p.vertexOffset+=e.primitives[m].getCABO().getElementCount()):y?e.primitives[m].getCABO().createVBO(d[m].cells,d[m].inRep,Gr.WIREFRAME,{...p,tcoords:null,colors:null,haveCellScalars:!1,haveCellNormals:!1}):e.primitives[m].releaseGraphicsResources();e.renderable.getPopulateSelectionSettings()&&(e.renderable.setSelectionWebGLIdsToVTKIds(e.selectionWebGLIdsToVTKIds),t.updateMaximumPointCellIds()),e.VBOBuildTime.modified(),e.VBOBuildString=l}},t.getAllocatedGPUMemoryInBytes=()=>{let n=0;return e.primitives.forEach(r=>{n+=r.getAllocatedGPUMemoryInBytes()}),n}}const d4={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null,tmpMat4:null,ambientColor:[],diffuseColor:[],specularColor:[],lightColor:[],lightDirection:[],lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastSelectionState:Et.MIN_KNOWN_PASS-1,selectionStateChanged:null,selectionWebGLIdsToVTKIds:null,pointPicking:!1};function p1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,d4,a),vt.extend(t,e,a),Sn.implementReplaceShaderCoincidentOffset(t,e,a),Sn.implementBuildShadersWithReplacements(t,e,a),e.primitives=[],e.primTypes=pt,e.tmpMat3=zt(new Float64Array(9)),e.tmpMat4=Se(new Float64Array(16));for(let n=pt.Start;n<pt.End;n++)e.primitives[n]=Gt.newInstance(),e.primitives[n].setPrimitiveType(n),e.primitives[n].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);lt(t,e,["context"]),e.VBOBuildTime={},ot(e.VBOBuildTime,{mtime:0}),e.selectionStateChanged={},ot(e.selectionStateChanged,{mtime:0}),g4(t,e)}const g1=Ke(p1,"vtkOpenGLPolyDataMapper");var eo={newInstance:g1,extend:p1};st("vtkMapper",g1);const{ColorMode:v4,ScalarMode:lr,GetArray:v0}=Pi;function y4(t,e){e.classHierarchy.push("vtkMapper2D"),t.createDefaultLookupTable=()=>{e.lookupTable=Ar.newInstance()},t.getColorModeAsString=()=>k.enumToString(v4,e.colorMode),t.setColorModeToDefault=()=>t.setColorMode(0),t.setColorModeToMapScalars=()=>t.setColorMode(1),t.setColorModeToDirectScalars=()=>t.setColorMode(2),t.getScalarModeAsString=()=>k.enumToString(lr,e.scalarMode),t.setScalarModeToDefault=()=>t.setScalarMode(0),t.setScalarModeToUsePointData=()=>t.setScalarMode(1),t.setScalarModeToUseCellData=()=>t.setScalarMode(2),t.setScalarModeToUsePointFieldData=()=>t.setScalarMode(3),t.setScalarModeToUseCellFieldData=()=>t.setScalarMode(4),t.setScalarModeToUseFieldData=()=>t.setScalarMode(5),t.getAbstractScalars=(a,n,r,i,s)=>{if(!a||!e.scalarVisibility)return{scalars:null,cellFLag:!1};let u=null,c=!1;if(n===lr.DEFAULT)u=a.getPointData().getScalars(),u||(u=a.getCellData().getScalars(),c=!0);else if(n===lr.USE_POINT_DATA)u=a.getPointData().getScalars();else if(n===lr.USE_CELL_DATA)u=a.getCellData().getScalars(),c=!0;else if(n===lr.USE_POINT_FIELD_DATA){const o=a.getPointData();r===v0.BY_ID?u=o.getArrayByIndex(i):u=o.getArrayByName(s)}else if(n===lr.USE_CELL_FIELD_DATA){const o=a.getCellData();c=!0,r===v0.BY_ID?u=o.getArrayByIndex(i):u=o.getArrayByName(s)}else if(n===lr.USE_FIELD_DATA){const o=a.getFieldData();r===v0.BY_ID?u=o.getArrayByIndex(i):u=o.getArrayByName(s)}return{scalars:u,cellFlag:c}},t.getLookupTable=()=>(e.lookupTable||t.createDefaultLookupTable(),e.lookupTable),t.getMTime=()=>{let a=e.mtime;if(e.lookupTable!==null){const n=e.lookupTable.getMTime();a=n>a?n:a}return a},t.mapScalars=(a,n)=>{const r=t.getAbstractScalars(a,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;if(!r){e.colorMapColors=null;return}const i=`${t.getMTime()}${r.getMTime()}${n}`;if(e.colorBuildString===i)return;e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]);const s=t.getLookupTable();s&&(s.build(),e.colorMapColors=s.mapScalars(r,e.colorMode,e.fieldDataTupleId)),e.colorBuildString=`${t.getMTime()}${r.getMTime()}${n}`},t.getPrimitiveCount=()=>{const a=t.getInputData();return{points:a.getPoints().getNumberOfValues()/3,verts:a.getVerts().getNumberOfValues()-a.getVerts().getNumberOfCells(),lines:a.getLines().getNumberOfValues()-2*a.getLines().getNumberOfCells(),triangles:a.getPolys().getNumberOfValues()-3*a.getPolys().getNumberOfCells()}}}const m4={static:!1,lookupTable:null,scalarVisibility:!1,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,transformCoordinate:null,viewSpecificProperties:null,customShaderAttributes:[]};function d1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,m4,a),Ks.extend(t,e,a),k.get(t,e,["colorMapColors"]),k.setGet(t,e,["arrayAccessMode","colorByArrayName","colorMode","lookupTable","renderTime","scalarMode","scalarVisibility","static","transformCoordinate","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),k.setGetArray(t,e,["scalarRange"],2),e.viewSpecificProperties||(e.viewSpecificProperties={}),y4(t,e)}var x4={newInstance:k.newInstance(d1,"vtkMapper2D"),extend:d1},S4=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

uniform int PrimitiveIDOffset;

// Texture coordinates
//VTK::TCoord::Dec

// Scalar coloring
//VTK::Color::Dec

// Depth Peeling
//VTK::DepthPeeling::Dec

// picking support
//VTK::Picking::Dec

// the output of this shader
//VTK::Output::Dec

// Apple Bug
//VTK::PrimID::Dec

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  //VTK::Color::Impl
  //VTK::TCoord::Impl

  //VTK::DepthPeeling::Impl
  //VTK::Picking::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }
}
`,C4=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyData2DVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model Coordinates
// WC - WC world coordinates
// VC - View Coordinates
// DC - Display Coordinates

in vec4 vertexWC;

// frag position in VC
//VTK::PositionVC::Dec

// material property values
//VTK::Color::Dec

// Texture coordinates
//VTK::TCoord::Dec

// Apple Bug
//VTK::PrimID::Dec

uniform mat4 WCVCMatrix;  // World to view matrix

void main()
{
  // Apple Bug
  //VTK::PrimID::Impl

  gl_Position = WCVCMatrix*vertexWC;

  //VTK::TCoord::Impl

  //VTK::Color::Impl

  //VTK::PositionVC::Impl
}
`;const T4={BACKGROUND:0,FOREGROUND:1},{primTypes:qt}=Gt,{ScalarMode:to}=x4,{vtkErrorMacro:no}=wt,w4={type:"StartEvent"},_4={type:"EndEvent"};function E4(t,e){e.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),t.buildPass=n=>{n&&(e.openGLActor2D=t.getFirstAncestorOfType("vtkOpenGLActor2D"),e._openGLRenderer=e.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()))},t.overlayPass=n=>{n&&t.render()},t.getShaderTemplate=(n,r,i)=>{n.Vertex=C4,n.Fragment=S4,n.Geometry=""},t.render=()=>{const n=e._openGLRenderWindow.getContext();if(e.context!==n){e.context=n;for(let s=qt.Start;s<qt.End;s++)e.primitives[s].setOpenGLRenderWindow(e._openGLRenderWindow)}const r=e.openGLActor2D.getRenderable(),i=e._openGLRenderer.getRenderable();t.renderPiece(i,r)},t.renderPiece=(n,r)=>{if(t.invokeEvent(w4),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent(_4),!e.currentInput){no("No input!");return}!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues()||(t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r))},t.renderPieceStart=(n,r)=>{if(e.primitiveIDOffset=0,e._openGLRenderer.getSelector())switch(e._openGLRenderer.getSelector().getCurrentPass()){default:e._openGLRenderer.getSelector().renderProp(r)}t.updateBufferObjects(n,r),e.lastBoundBO=null},t.getNeedToRebuildShaders=(n,r,i)=>n.getShaderSourceTime().getMTime()<e.renderable.getMTime()||n.getShaderSourceTime().getMTime()<e.currentInput.getMTime(),t.updateBufferObjects=(n,r)=>{t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=(n,r)=>{const i=e.VBOBuildTime.getMTime();return!!(i<t.getMTime()||i<e._openGLRenderWindow.getMTime()||i<e.renderable.getMTime()||i<r.getMTime()||i<e.currentInput.getMTime()||e.renderable.getTransformCoordinate()&&i<n.getMTime())},t.buildBufferObjects=(n,r)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,r.getProperty().getOpacity());const s=e.renderable.getColorMapColors();e.haveCellScalars=!1;const u=e.renderable.getScalarMode();e.renderable.getScalarVisibility()&&(u===to.USE_CELL_DATA||u===to.USE_CELL_FIELD_DATA||u===to.USE_FIELD_DATA||!i.getPointData().getScalars())&&u!==to.USE_POINT_FIELD_DATA&&s&&(e.haveCellScalars=!0);const c=r.getProperty().getRepresentation();let o=i.getPointData().getTCoords();e.openGLActor2D.getActiveTextures()||(o=null);const f=e.renderable.getTransformCoordinate(),h=n.getRenderWindow().getViews()[0].getViewportSize(n),p=`${i.getMTime()}A${c}B${i.getMTime()}C${s?s.getMTime():1}D${o?o.getMTime():1}E${f?n.getMTime():1}F${h}`;if(e.VBOBuildString!==p){let d=i.getPoints();if(f){const m=vn.newInstance(),S=d.getNumberOfPoints();m.setNumberOfPoints(S);const v=[];for(let g=0;g<S;++g){d.getPoint(g,v),f.setValue(v);const x=f.getComputedDoubleViewportValue(n);m.setPoint(g,x[0],x[1],0)}d=m}const y={points:d,tcoords:o,colors:s,cellOffset:0,haveCellScalars:e.haveCellSCalars,customAttributes:e.renderable.getCustomShaderAttributes().map(m=>i.getPointData().getArrayByName(m))};y.cellOffset+=e.primitives[qt.Points].getCABO().createVBO(i.getVerts(),"verts",c,y),y.cellOffset+=e.primitives[qt.Lines].getCABO().createVBO(i.getLines(),"lines",c,y),y.cellOffset+=e.primitives[qt.Tris].getCABO().createVBO(i.getPolys(),"polys",c,y),y.cellOffset+=e.primitives[qt.TriStrips].getCABO().createVBO(i.getStrips(),"strips",c,y),e.VBOBuildTime.modified(),e.VBOBuildString=p}},t.renderPieceDraw=(n,r)=>{const i=r.getProperty().getRepresentation();e.context.depthMask(!0);for(let u=qt.Start;u<qt.End;u++)e.primitives[u].getCABO().getElementCount()&&(e.lastBoundBO=e.primitives[u],e.primitiveIDOffset+=e.primitives[u].drawArrays(n,r,i,t))},t.renderPieceFinish=(n,r)=>{e.lastBoundBO&&e.lastBoundBO.getVAO().release()},t.replaceShaderValues=(n,r,i)=>{t.replaceShaderColor(n,r,i),t.replaceShaderTCoord(n,r,i),t.replaceShaderPicking(n,r,i),t.replaceShaderPositionVC(n,r,i)},t.replaceShaderColor=(n,r,i)=>{let s=n.Vertex,u=n.Geometry,c=n.Fragment;e.haveCellScalars&&(c=J.substitute(c,"//VTK::Color::Dec",["uniform samplerBuffer texture1;"]).result,c=J.substitute(c,"//VTK::Color::Impl",["gl_FragData[0] = texelFetchBuffer(texture1, gl_PrimitiveID + PrimitiveIDOffset);"]).result),e.lastBoundBO.getCABO().getColorComponents()!==0?(s=J.substitute(s,"//VTK::Color::Dec",["in vec4 diffuseColor;","out vec4 fcolorVSOutput;"]).result,s=J.substitute(s,"//VTK::Color::Impl",["fcolorVSOutput = diffuseColor;"]).result,u=J.substitute(u,"//VTK::Color::Dec",[`in vec4 fcolorVSOutput[];
`,"out vec4 fcolorGSOutput;"]).result,u=J.substitute(u,"//VTK::Color::Impl",["fcolorGSOutput = fcolorVSOutput[i];"]).result,c=J.substitute(c,"//VTK::Color::Dec",["in vec4 fcolorVSOutput;"]).result,c=J.substitute(c,"//VTK::Color::Impl",["gl_FragData[0] = fcolorVSOutput;"]).result):(c=J.substitute(c,"//VTK::Color::Dec",["uniform vec4 diffuseColor;"]).result,c=J.substitute(c,"//VTK::Color::Impl",["gl_FragData[0] = diffuseColor;"]).result),n.Vertex=s,n.Geometry=u,n.Fragment=c},t.replaceShaderTCoord=(n,r,i)=>{if(e.lastBoundBO.getCABO().getTCoordOffset()){let s=n.Vertex,u=n.Geometry,c=n.Fragment;const o=e.lastBoundBO.getCABO().getTCoordComponents();o===1?(s=J.substitute(s,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,s=J.substitute(s,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,u=J.substitute(u,"//VTK::TCoord::Dec",[`in float tcoordVCVSOutput[];
`,"out float tcoordVCGSOutput;"]).result,u=J.substitute(u,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,c=J.substitute(c,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,c=J.substitute(c,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):o===2&&(s=J.substitute(s,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,s=J.substitute(s,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,u=J.substitute(u,"//VTK::TCoord::Dec",[`in vec2 tcoordVCVSOutput[];
`,"out vec2 tcoordVCGSOutput;"]).result,u=J.substitute(u,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,c=J.substitute(c,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,c=J.substitute(c,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),e.haveCellScalars&&(u=J.substitute(u,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),n.Vertex=s,n.Geometry=u,n.Fragment=c}},t.replaceShaderPicking=(n,r,i)=>{let s=n.Fragment;s=J.substitute(s,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,s=J.substitute(s,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,n.Fragment=s},t.replaceShaderPositionVC=(n,r,i)=>{e.lastBoundBO.replaceShaderPositionVC(n,r,i)},t.invokeShaderCallbacks=(n,r,i)=>{const s=e.renderable.getViewSpecificProperties().ShadersCallbacks;s&&s.forEach(u=>{u.callback(u.userData,n,r,i)})},t.setMapperShaderParameters=(n,r,i)=>{if(n.getProgram().isUniformUsed("PrimitiveIDOffset")&&n.getProgram().setUniformi("PrimitiveIDOffset",e.primitiveIDOffset),n.getProgram().isAttributeUsed("vertexWC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"vertexWC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,!1)||no("Error setting vertexWC in shader VAO.")),n.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){e.renderable.getCustomShaderAttributes().forEach((c,o)=>{n.getProgram().isAttributeUsed(`${c}MC`)&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),`${c}MC`,n.getCABO().getCustomData()[o].offset,n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getCustomData()[o].components,!1)||no(`Error setting ${c}MC in shader VAO.`))}),n.getProgram().isAttributeUsed("tcoordMC")&&n.getCABO().getTCoordOffset()?n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"tcoordMC",n.getCABO().getTCoordOffset(),n.getCABO().getStride(),e.context.FLOAT,n.getCABO().getTCoordComponents(),!1)||no("Error setting tcoordMC in shader VAO."):n.getVAO().removeAttributeArray("tcoordMC"),e.internalColorTexture&&n.getProgram().isUniformUsed("texture1")&&n.getProgram().setUniformi("texture1",e.internalColorTexture.getTextureUnit());const s=e.openGLActor2D.getActiveTextures();if(s)for(let c=0;c<s.length;++c){const f=s[c].getTextureUnit(),l=`texture${f+1}`;n.getProgram().isUniformUsed(l)&&n.getProgram().setUniformi(l,f)}n.setMapperShaderParameters(r,i,e._openGLRenderer.getTiledSizeAndOrigin());const u=e._openGLRenderer.getSelector();n.getProgram().setUniform3fArray("mapperIndex",u?u.getPropColorValue():[0,0,0]),n.getProgram().setUniformi("picking",u?u.getCurrentPass()+1:0)}},t.setPropertyShaderParameters=(n,r,i)=>{const s=e.renderable.getColorMapColors();if(!s||s.getNumberOfComponents()===0){const u=n.getProgram(),c=i.getProperty(),o=c.getOpacity(),f=c.getColor(),l=[f[0],f[1],f[2],o];u.setUniform4f("diffuseColor",l)}},t.setLightingShaderParameters=(n,r,i)=>{};function a(n,r,i){return r.identity(i),n.reduce((s,u,c)=>c===0?u?r.copy(s,u):r.identity(s):u?r.multiply(s,s,u):s,i)}t.setCameraShaderParameters=(n,r,i)=>{const s=n.getProgram(),c=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,f=r.getRenderWindow().getViews()[0].getViewportSize(r),l=r.getViewport(),h=i.getActualPositionCoordinate().getComputedDoubleViewportValue(r),p=[0,0,1,1],d=[0,0,1,1];if(d[0]=l[0]>=p[0]?l[0]:p[0],d[1]=l[1]>=p[1]?l[1]:p[1],d[2]=l[2]<=p[2]?l[2]:p[2],d[3]=l[3]<=p[3]?l[3]:p[3],d[0]>=d[2]||d[1]>=d[3])return;f[0]=xa(f[0]*(d[2]-d[0])/(l[2]-l[0])),f[1]=xa(f[1]*(d[3]-d[1])/(l[3]-l[1]));const y=e._openGLRenderer.getParent().getSize(),m=xa(h[0]-(d[0]-l[0])*y[0]),S=xa(h[1]-(d[1]-l[1])*y[1]),v=-m;let g=-m+f[0];const x=-S;let C=-S+f[1];v===g&&(g=v+1),x===C&&(C=x+1);const T=Se(new Float64Array(16));T[0]=2/(g-v),T[1*4+1]=2/(C-x),T[0*4+3]=-1*(g+v)/(g-v),T[1*4+3]=-1*(C+x)/(C-x),T[2*4+2]=0,T[2*4+3]=i.getProperty().getDisplayLocation()===T4.FOREGROUND?-1:1,T[3*4+3]=1,ze(T,T),s.setUniformMatrix("WCVCMatrix",a([T,c],ra,e.tmpMat4))},t.getAllocatedGPUMemoryInBytes=()=>{let n=0;return e.primitives.forEach(r=>{n+=r.getAllocatedGPUMemoryInBytes()}),n}}const D4={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null};function b4(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,D4,a),vt.extend(t,e,a),Sn.implementReplaceShaderCoincidentOffset(t,e,a),Sn.implementBuildShadersWithReplacements(t,e,a),e.primitives=[],e.primTypes=qt,e.tmpMat4=Se(new Float64Array(16));for(let n=qt.Start;n<qt.End;n++)e.primitives[n]=Gt.newInstance(),e.primitives[n].setPrimitiveType(n),e.primitives[n].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);lt(t,e,["context"]),e.VBOBuildTime={},ot(e.VBOBuildTime,{mtime:0}),E4(t,e)}const O4=Ke(b4,"vtkOpenGLPolyDataMapper2D");st("vtkMapper2D",O4);const{VectorMode:N4}=ji;function y0(t,e){t.strokeStyle=e.strokeColor,t.lineWidth=e.strokeSize,t.fillStyle=e.fontColor,t.font=`${e.fontStyle} ${e.fontSize}px ${e.fontFamily}`}function v1(t,e){return a=>{const n=a.getLastSize(),r=(n[0]/700)**.8,i=(n[1]/700)**.8,s=Math.min(r,i),u=a.getAxisTextStyle(),c=a.getTickTextStyle();Object.assign(u,e.axisTextStyle),Object.assign(c,e.tickTextStyle),u.fontSize=Math.max(24*s,12),a.getLastAspectRatio()>1?c.fontSize=Math.max(20*s,10):c.fontSize=Math.max(16*s,10);const o=a.updateTextureAtlas();a.setTopTitle(!1);const f=a.getBoxSizeByReference();if(a.getLastAspectRatio()>1)a.setTickLabelPixelOffset(.3*c.fontSize),o.titleWidth<=o.tickWidth+a.getTickLabelPixelOffset()+.8*c.fontSize?(a.setTopTitle(!0),a.setAxisTitlePixelOffset(.2*c.fontSize),f[0]=2*(o.tickWidth+a.getTickLabelPixelOffset()+.8*c.fontSize)/n[0],a.setBoxPosition([.98-f[0],-.92])):(a.setAxisTitlePixelOffset(.2*c.fontSize),f[0]=2*(o.titleHeight+a.getAxisTitlePixelOffset()+o.tickWidth+a.getTickLabelPixelOffset()+.8*c.fontSize)/n[0],a.setBoxPosition([.99-f[0],-.92])),f[1]=Math.max(1.2,Math.min(1.84/i,1.84));else{a.setAxisTitlePixelOffset(1.2*c.fontSize),a.setTickLabelPixelOffset(.1*c.fontSize);const l=2*(.8*c.fontSize+o.titleHeight+a.getAxisTitlePixelOffset())/n[1],h=2*o.tickWidth/n[0];f[0]=Math.min(1.9,Math.max(1.4,1.4*h*(a.getTicks().length+3))),f[1]=l,a.setBoxPosition([-.5*f[0],-.97])}a.recomputeBarSegments(o)}}function y1(t,e){return a=>{const n=a.getLastTickBounds(),r=hs().domain([n[0],n[1]]),i=r.ticks(5),s=r.tickFormat(5);a.setTicks(i),a.setTickStrings(i.map(s))}}function M4(t,e){e.classHierarchy.push("vtkScalarBarActorHelper"),t.setRenderable=r=>{e.renderable!==r&&(e.renderable=r,e.barActor.setProperty(r.getProperty()),e.barActor.setParentProp(r),e.barActor.setCoordinateSystemToDisplay(),e.tmActor.setProperty(r.getProperty()),e.tmActor.setParentProp(r),e.tmActor.setCoordinateSystemToDisplay(),e.generateTicks=r.generateTicks,e.axisTextStyle={...r.getAxisTextStyle()},e.tickTextStyle={...r.getTickTextStyle()},t.modified())},t.updateAPISpecificData=(r,i,s)=>{(e.lastSize[0]!==r[0]||e.lastSize[1]!==r[1])&&(e.lastSize[0]=r[0],e.lastSize[1]=r[1],e.lastAspectRatio=r[0]/r[1],e.forceUpdate=!0);const u=e.renderable.getScalarsToColors();if(!(!u||!e.renderable.getVisibility())&&(e.barMapper.setLookupTable(u),e.camera=i,e.renderWindow=s,e.forceUpdate||Math.max(u.getMTime(),t.getMTime(),e.renderable.getMTime())>e.lastRebuildTime.getMTime())){const c=u.getMappingRange();if(e.lastTickBounds=[...c],e.renderable.getGenerateTicks()(t),e.renderable.getAutomated())e.renderable.getAutoLayout()(t);else{e.axisTextStyle={...e.renderable.getAxisTextStyle()},e.tickTextStyle={...e.renderable.getTickTextStyle()},e.barPosition=[...e.renderable.getBarPosition()],e.barSize=[...e.renderable.getBarSize()],e.boxPosition=[...e.renderable.getBoxPosition()],e.boxSize=[...e.renderable.getBoxSize()],e.axisTitlePixelOffset=e.renderable.getAxisTitlePixelOffset(),e.tickLabelPixelOffset=e.renderable.getTickLabelPixelOffset();const o=t.updateTextureAtlas();t.recomputeBarSegments(o)}t.updatePolyDataForLabels(),t.updatePolyDataForBarSegments(),e.lastRebuildTime.modified(),e.forceUpdate=!1}},t.updateTextureAtlas=()=>{e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left";const r={},i=new Map;let s=0,u=1;y0(e.tmContext,e.axisTextStyle);let c=e.tmContext.measureText(e.renderable.getAxisLabel()),o={height:c.actualBoundingBoxAscent+2,startingHeight:u,width:c.width+2,textStyle:e.axisTextStyle};i.set(e.renderable.getAxisLabel(),o),u+=o.height,s=o.width,r.titleWidth=o.width,r.titleHeight=o.height,r.tickWidth=0,r.tickHeight=0,y0(e.tmContext,e.tickTextStyle);const f=[...t.getTickStrings(),"NaN","Below","Above"];for(let l=0;l<f.length;l++)i.has(f[l])||(c=e.tmContext.measureText(f[l]),o={height:c.actualBoundingBoxAscent+2,startingHeight:u,width:c.width+2,textStyle:e.tickTextStyle},i.set(f[l],o),u+=o.height,s<o.width&&(s=o.width),r.tickWidth<o.width&&(r.tickWidth=o.width),r.tickHeight<o.height&&(r.tickHeight=o.height));return s=Bt(s),u=Bt(u),i.forEach(l=>{l.tcoords=[0,(u-l.startingHeight-l.height)/u,l.width/s,(u-l.startingHeight-l.height)/u,l.width/s,(u-l.startingHeight)/u,0,(u-l.startingHeight)/u]}),e.tmCanvas.width=s,e.tmCanvas.height=u,e.tmContext.textBaseline="bottom",e.tmContext.textAlign="left",e.tmContext.clearRect(0,0,s,u),i.forEach((l,h)=>{y0(e.tmContext,l.textStyle),e.tmContext.fillText(h,1,l.startingHeight+l.height-1)}),e.tmTexture.setCanvas(e.tmCanvas),e.tmTexture.modified(),e._tmAtlas=i,r},t.computeBarSize=r=>{e.vertical=e.boxSize[1]>e.boxSize[0];const i=2*r.tickHeight/e.lastSize[1],s=[1,1];if(e.vertical){const u=2*(r.tickWidth+e.tickLabelPixelOffset)/e.lastSize[0];if(e.topTitle){const c=2*(r.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0]-u,e.barSize[1]=e.boxSize[1]-c}else{const c=2*(r.titleHeight+e.axisTitlePixelOffset)/e.lastSize[0];e.barSize[0]=e.boxSize[0]-c-u,e.barSize[1]=e.boxSize[1]}e.barPosition[0]=e.boxPosition[0]+u,e.barPosition[1]=e.boxPosition[1],s[1]=i}else{const u=(2*r.tickWidth-8)/e.lastSize[0],c=2*(r.titleHeight+e.axisTitlePixelOffset)/e.lastSize[1];e.barSize[0]=e.boxSize[0],e.barPosition[0]=e.boxPosition[0],e.barSize[1]=e.boxSize[1]-c,e.barPosition[1]=e.boxPosition[1],s[0]=u}return s},t.recomputeBarSegments=r=>{var h,p,d,y;const i=t.computeBarSize(r);e.barSegments=[];const s=[0,0],u=e.vertical?1:0,c=e.vertical?.01:.02;function o(m,S){e.barSegments.push({corners:[[...s],[s[0]+i[0],s[1]],[s[0]+i[0],s[1]+i[1]],[s[0],s[1]+i[1]]],scalars:S,title:m}),s[u]+=i[u]+c}e.renderable.getDrawNanAnnotation()&&e.renderable.getScalarsToColors().getNanColor()&&o("NaN",[NaN,NaN,NaN,NaN]),e.renderable.getDrawBelowRangeSwatch()&&((p=(h=e.renderable.getScalarsToColors()).getUseBelowRangeColor)!=null&&p.call(h))&&o("Below",[-.1,-.1,-.1,-.1]);const f=(y=(d=e.renderable.getScalarsToColors()).getUseAboveRangeColor)==null?void 0:y.call(d);s[u]+=c;const l=i[u];i[u]=f?1-2*c-i[u]-s[u]:1-c-s[u],o("ticks",e.vertical?[0,0,.995,.995]:[0,.995,.995,0]),e.renderable.getDrawAboveRangeSwatch()&&f&&(i[u]=l,s[u]+=c,o("Above",[1.1,1.1,1.1,1.1]))};const a=new Float64Array(3);t.createPolyDataForOneLabel=(r,i,s,u,c,o)=>{const f=e._tmAtlas.get(r);if(!f)return;let l=o.ptIdx,h=o.cellIdx;a[0]=(.5*i[0]+.5)*e.lastSize[0],a[1]=(.5*i[1]+.5)*e.lastSize[1],a[2]=i[2],a[0]+=c[0],a[1]+=c[1];const p=[],d=u==="vertical"?[1,0]:[0,1];u==="vertical"?(p[0]=f.width,p[1]=-f.height,s[0]==="middle"?a[1]-=f.width/2:s[0]==="right"&&(a[1]-=f.width),s[1]==="middle"?a[0]+=f.height/2:s[1]==="top"&&(a[0]+=f.height)):(p[0]=f.width,p[1]=f.height,s[0]==="middle"?a[0]-=f.width/2:s[0]==="right"&&(a[0]-=f.width),s[1]==="middle"?a[1]-=f.height/2:s[1]==="top"&&(a[1]-=f.height)),o.points[l*3]=a[0],o.points[l*3+1]=a[1],o.points[l*3+2]=a[2],o.tcoords[l*2]=f.tcoords[0],o.tcoords[l*2+1]=f.tcoords[1],l++,a[d[0]]+=p[0],o.points[l*3]=a[0],o.points[l*3+1]=a[1],o.points[l*3+2]=a[2],o.tcoords[l*2]=f.tcoords[2],o.tcoords[l*2+1]=f.tcoords[3],l++,a[d[1]]+=p[1],o.points[l*3]=a[0],o.points[l*3+1]=a[1],o.points[l*3+2]=a[2],o.tcoords[l*2]=f.tcoords[4],o.tcoords[l*2+1]=f.tcoords[5],l++,a[d[0]]-=p[0],o.points[l*3]=a[0],o.points[l*3+1]=a[1],o.points[l*3+2]=a[2],o.tcoords[l*2]=f.tcoords[6],o.tcoords[l*2+1]=f.tcoords[7],l++,o.polys[h*4]=3,o.polys[h*4+1]=l-4,o.polys[h*4+2]=l-3,o.polys[h*4+3]=l-2,h++,o.polys[h*4]=3,o.polys[h*4+1]=l-4,o.polys[h*4+2]=l-2,o.polys[h*4+3]=l-1,o.ptIdx+=4,o.cellIdx+=2};const n=new Float64Array(3);t.updatePolyDataForLabels=()=>{const r=t.getTickStrings().length+e.barSegments.length,i=r*4,s=r*2,u=new Float64Array(i*3),c=new Uint16Array(s*4),o=new Float32Array(i*2),f={ptIdx:0,cellIdx:0,polys:c,points:u,tcoords:o},l=e.vertical?0:1,h=e.vertical?1:0;n[2]=-.99;const p=e.vertical?["right","middle"]:["middle","bottom"];let d=[0,1];const y=[0,0];e.vertical?(y[0]=-e.tickLabelPixelOffset,e.topTitle?(n[0]=e.boxPosition[0]+.5*e.boxSize[0],n[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),n,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],f)):(n[0]=e.barPosition[0]+e.barSize[0],n[1]=e.barPosition[1]+.5*e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),n,["middle","top"],"vertical",[e.axisTitlePixelOffset,0],f)),d=[-1,0]):(y[1]=e.tickLabelPixelOffset,n[0]=e.barPosition[0]+.5*e.barSize[0],n[1]=e.barPosition[1]+e.barSize[1],t.createPolyDataForOneLabel(e.renderable.getAxisLabel(),n,["middle","bottom"],"horizontal",[0,e.axisTitlePixelOffset],f)),n[l]=e.barPosition[l]+(.5*d[l]+.5)*e.barSize[l],n[h]=e.barPosition[h]+e.barSize[h]*.5;let m=null;for(let T=0;T<e.barSegments.length;T++){const w=e.barSegments[T];w.title==="ticks"?m=w:(n[h]=e.barPosition[h]+.5*e.barSize[h]*(w.corners[2][h]+w.corners[0][h]),t.createPolyDataForOneLabel(w.title,n,p,"horizontal",y,f))}const S=e.barPosition[h]+e.barSize[h]*m.corners[0][h],v=e.barSize[h]*(m.corners[2][h]-m.corners[0][h]),g=t.getTicks(),x=t.getTickStrings();for(let T=0;T<g.length;T++){const w=(g[T]-e.lastTickBounds[0])/(e.lastTickBounds[1]-e.lastTickBounds[0]);n[h]=S+v*w,t.createPolyDataForOneLabel(x[T],n,p,"horizontal",y,f)}const C=pe.newInstance({numberOfComponents:2,values:o,name:"TextureCoordinates"});e.tmPolyData.getPointData().setTCoords(C),e.tmPolyData.getPoints().setData(u,3),e.tmPolyData.getPoints().modified(),e.tmPolyData.getPolys().setData(c,1),e.tmPolyData.getPolys().modified(),e.tmPolyData.modified()},t.updatePolyDataForBarSegments=()=>{var y,m;const r=e.renderable.getScalarsToColors();let i=0;e.renderable.getDrawNanAnnotation()&&r.getNanColor()&&(i+=1),e.renderable.getDrawBelowRangeSwatch()&&((y=r.getUseBelowRangeColor)!=null&&y.call(r))&&(i+=1),e.renderable.getDrawAboveRangeSwatch()&&((m=r.getUseAboveRangeColor)!=null&&m.call(r))&&(i+=1);const s=4*(1+i),u=s;let c=1;r.getVectorMode()===N4.COMPONENT&&(c=r.getVectorComponent()+1);const o=new Float64Array(s*3),f=new Uint16Array(u*5),l=new Float32Array(s*c);let h=0,p=0;for(let S=0;S<e.barSegments.length;S++){const v=e.barSegments[S];for(let g=0;g<4;g++){n[0]=e.barPosition[0]+v.corners[g][0]*e.barSize[0],n[1]=e.barPosition[1]+v.corners[g][1]*e.barSize[1],o[h*3]=(.5*n[0]+.5)*e.lastSize[0],o[h*3+1]=(.5*n[1]+.5)*e.lastSize[1],o[h*3+2]=n[2];for(let x=0;x<c;x++)l[h*c+x]=e.lastTickBounds[0]+v.scalars[g]*(e.lastTickBounds[1]-e.lastTickBounds[0]);h++}f[p*5]=4,f[p*5+1]=h-4,f[p*5+2]=h-3,f[p*5+3]=h-2,f[p*5+4]=h-1,p++}const d=pe.newInstance({numberOfComponents:c,values:l,name:"Scalars"});e.polyData.getPointData().setScalars(d),e.polyData.getPoints().setData(o,3),e.polyData.getPoints().modified(),e.polyData.getPolys().setData(f,1),e.polyData.getPolys().modified(),e.polyData.modified()}}const R4=k.newInstance(function(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{renderable:null};Object.assign(e,{},a),k.obj(t,e),k.setGet(t,e,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings"]),k.get(t,e,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),k.getArray(t,e,["boxPosition","boxSize"]),k.setArray(t,e,["boxPosition","boxSize"],2),e.forceUpdate=!1,e.lastRebuildTime={},k.obj(e.lastRebuildTime,{mtime:0}),e.lastSize=[-1,-1],e.tmCanvas=document.createElement("canvas"),e.tmContext=e.tmCanvas.getContext("2d"),e._tmAtlas=new Map,e.barMapper=dn.newInstance(),e.barMapper.setInterpolateScalarsBeforeMapping(!0),e.barMapper.setUseLookupTableScalarRange(!0),e.polyData=je.newInstance(),e.barMapper.setInputData(e.polyData),e.barActor=pn.newInstance(),e.barActor.setMapper(e.barMapper),e.tmPolyData=je.newInstance(),e.tmMapper=dn.newInstance(),e.tmMapper.setInputData(e.tmPolyData),e.tmTexture=u0.newInstance({resizable:!0}),e.tmTexture.setInterpolate(!1),e.tmActor=pn.newInstance({parentProp:t}),e.tmActor.setMapper(e.tmMapper),e.tmActor.addTexture(e.tmTexture),e.barPosition=[0,0],e.barSize=[0,0],e.boxPosition=[.88,-.92],e.boxSize=[.1,1.1],e.lastTickBounds=[],M4(t,e)},"vtkScalarBarActorHelper");function L4(t,e){e.classHierarchy.push("vtkScalarBarActor"),t.setTickTextStyle=a=>{e.tickTextStyle={...e.tickTextStyle,...a},t.modified()},t.setAxisTextStyle=a=>{e.axisTextStyle={...e.axisTextStyle,...a},t.modified()},t.resetAutoLayoutToDefault=()=>{t.setAutoLayout(v1(t,e))},t.resetGenerateTicksToDefault=()=>{t.setGenerateTicks(y1())}}function k4(t){return{automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0,...t}}function m1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,k4(a)),e.autoLayout||(e.autoLayout=v1(t,e)),e.generateTicks||(e.generateTicks=y1()),pn.extend(t,e,a),t.getProperty().setDiffuse(0),t.getProperty().setAmbient(1),k.setGet(t,e,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),k.get(t,e,["axisTextStyle","tickTextStyle"]),k.getArray(t,e,["barPosition","barSize","boxPosition","boxSize"]),k.setArray(t,e,["barPosition","barSize","boxPosition","boxSize"],2),L4(t,e)}var x1={newInstance:k.newInstance(m1,"vtkScalarBarActor"),extend:m1,newScalarBarActorHelper:R4};function F4(t,e){e.classHierarchy.push("vtkOpenGLScalarBarActor"),t.buildPass=a=>{a&&(e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.scalarBarActorHelper.getRenderable()||e.scalarBarActorHelper.setRenderable(e.renderable),t.prepareNodes(),t.addMissingNode(e.scalarBarActorHelper.getBarActor()),t.addMissingNode(e.scalarBarActorHelper.getTmActor()),t.removeUnusedNodes())},t.opaquePass=(a,n)=>{if(a){const r=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,i=e._openGLRenderer.getTiledSizeAndOrigin();e.scalarBarActorHelper.updateAPISpecificData([i.usize,i.vsize],r,e._openGLRenderWindow.getRenderable())}}}const A4={};function V4(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,A4,a),vt.extend(t,e,a),e.scalarBarActorHelper=x1.newScalarBarActorHelper(),F4(t,e)}const B4=Ke(V4,"vtkOpenGLScalarBarActor");st("vtkScalarBarActor",B4);const{vtkErrorMacro:S1}=wt;function U4(t,e){e.classHierarchy.push("vtkOpenGLSkybox"),t.buildPass=a=>{if(a){e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow);const n=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(n.getActiveCamera())}},t.queryPass=(a,n)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;n.incrementOpaqueActorCount()}},t.opaquePass=(a,n)=>{if(a&&!e._openGLRenderer.getSelector()){t.updateBufferObjects(),e.context.depthMask(!0),e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.tris.getProgram()),e.openGLTexture.render(e._openGLRenderWindow);const r=e.openGLTexture.getTextureUnit();e.tris.getProgram().setUniformi("sbtexture",r);const i=e._openGLRenderer.getRenderable(),s=e.openGLCamera.getKeyMatrices(i),u=new Float64Array(16);if(Nt(u,s.wcpc),e.tris.getProgram().setUniformMatrix("IMCPCMatrix",u),e.lastFormat==="box"){const c=i.getActiveCamera().getPosition();e.tris.getProgram().setUniform3f("camPos",c[0],c[1],c[2])}e.tris.getVAO().bind(),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate()}},t.updateBufferObjects=()=>{if(!e.tris.getCABO().getElementCount()){const n=new Float32Array(12);for(let u=0;u<4;u++)n[u*3]=u%2*2-1,n[u*3+1]=u>1?1:-1,n[u*3+2]=1;const r=pe.newInstance({numberOfComponents:3,values:n});r.setName("points");const i=new Uint16Array(8);i[0]=3,i[1]=0,i[2]=1,i[3]=3,i[4]=3,i[5]=0,i[6]=3,i[7]=2;const s=pe.newInstance({numberOfComponents:1,values:i});e.tris.getCABO().createVBO(s,"polys",Kt.SURFACE,{points:r,cellOffset:0})}e.renderable.getFormat()!==e.lastFormat&&(e.lastFormat=e.renderable.getFormat(),e.lastFormat==="box"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec3 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = wpos.xyz/wpos.w;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec3 TexCoords;
             uniform samplerCube sbtexture;
             uniform vec3 camPos;
             void main () {
               // skybox looks from inside out
               // which means we have to adjust
               // our tcoords. Otherwise text would
               // be flipped
               vec3 tc = normalize(TexCoords - camPos);
               if (abs(tc.z) < max(abs(tc.x),abs(tc.y)))
               {
                 tc = vec3(1.0, 1.0, -1.0) * tc;
               }
               else
               {
                 tc = vec3(-1.0, 1.0, 1.0) * tc;
               }
               gl_FragData[0] = textureCube(sbtexture, tc);
             }`,"")),e.lastFormat==="background"&&e.tris.setProgram(e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(`//VTK::System::Dec
             attribute vec3 vertexMC;
             uniform mat4 IMCPCMatrix;
             varying vec2 TexCoords;
             void main () {
              gl_Position = vec4(vertexMC.xyz, 1.0);
              vec4 wpos = IMCPCMatrix * gl_Position;
              TexCoords = vec2(vertexMC.x, vertexMC.y)*0.5 + 0.5;
             }`,`//VTK::System::Dec
             //VTK::Output::Dec
             varying vec2 TexCoords;
             uniform sampler2D sbtexture;
             void main () {
               gl_FragData[0] = texture2D(sbtexture, TexCoords);
             }`,"")),e.tris.getShaderSourceTime().modified(),e.tris.getVAO().bind(),e.tris.getVAO().addAttributeArray(e.tris.getProgram(),e.tris.getCABO(),"vertexMC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||S1("Error setting vertexMC in shader VAO."));const a=e.renderable.getTextures();a.length||S1("vtkSkybox requires a texture map"),e.openGLTexture.getRenderable()!==a[0]&&(e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.setRenderable(a[0]))}}const G4={context:null};function I4(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,G4,a),vt.extend(t,e,a),e.openGLTexture=Me.newInstance(),e.tris=Gt.newInstance(),e.keyMatrixTime={},ot(e.keyMatrixTime,{mtime:0}),e.keyMatrices={normalMatrix:zt(new Float64Array(9)),mcwc:Se(new Float64Array(16))},lt(t,e,["context"]),Lt(t,e,["activeTextures"]),U4(t,e)}const P4=Ke(I4);st("vtkSkybox",P4);const{FieldAssociations:z4}=nr;function j4(t,e){e.classHierarchy.push("vtkHardwareSelector"),t.getSourceDataAsync=async(a,n,r,i,s)=>{},t.selectAsync=async(a,n,r,i,s)=>{const u=await t.getSourceDataAsync(a,n,r,i,s);return u?u.generateSelection(n,r,i,s):[]}}const W4={fieldAssociation:z4.FIELD_ASSOCIATION_CELLS,captureZValues:!1};function C1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,W4,a),k.obj(t,e),k.setGet(t,e,["fieldAssociation","captureZValues"]),j4(t,e)}var $4={newInstance:k.newInstance(C1,"vtkHardwareSelector"),extend:C1};function H4(t,e){e.classHierarchy.push("vtkFramebuffer"),t.getBothMode=()=>e.context.FRAMEBUFFER,t.saveCurrentBindingsAndBuffers=a=>{const n=typeof a<"u"?a:t.getBothMode();t.saveCurrentBindings(n),t.saveCurrentBuffers(n)},t.saveCurrentBindings=a=>{if(!e.context){Pe("you must set the OpenGLRenderWindow before calling saveCurrentBindings");return}const n=e.context;e.previousDrawBinding=n.getParameter(e.context.FRAMEBUFFER_BINDING),e.previousActiveFramebuffer=e._openGLRenderWindow.getActiveFramebuffer()},t.saveCurrentBuffers=a=>{},t.restorePreviousBindingsAndBuffers=a=>{const n=typeof a<"u"?a:t.getBothMode();t.restorePreviousBindings(n),t.restorePreviousBuffers(n)},t.restorePreviousBindings=a=>{if(!e.context){Pe("you must set the OpenGLRenderWindow before calling restorePreviousBindings");return}const n=e.context;n.bindFramebuffer(n.FRAMEBUFFER,e.previousDrawBinding),e._openGLRenderWindow.setActiveFramebuffer(e.previousActiveFramebuffer)},t.restorePreviousBuffers=a=>{},t.bind=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;n===null&&(n=e.context.FRAMEBUFFER),e.context.bindFramebuffer(n,e.glFramebuffer);for(let r=0;r<e.colorBuffers.length;r++)e.colorBuffers[r].bind();e._openGLRenderWindow.setActiveFramebuffer(t)},t.create=(a,n)=>{if(!e.context){Pe("you must set the OpenGLRenderWindow before calling create");return}e.glFramebuffer=e.context.createFramebuffer(),e.glFramebuffer.width=a,e.glFramebuffer.height=n},t.setColorBuffer=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const r=e.context;if(!r){Pe("you must set the OpenGLRenderWindow before calling setColorBuffer");return}let i=r.COLOR_ATTACHMENT0;if(n>0)if(e._openGLRenderWindow.getWebgl2())i+=n;else{Pe("Using multiple framebuffer attachments requires WebGL 2");return}e.colorBuffers[n]=a,r.framebufferTexture2D(r.FRAMEBUFFER,i,r.TEXTURE_2D,a.getHandle(),0)},t.removeColorBuffer=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const n=e.context;if(!n){Pe("you must set the OpenGLRenderWindow before calling removeColorBuffer");return}let r=n.COLOR_ATTACHMENT0;if(a>0)if(e._openGLRenderWindow.getWebgl2())r+=a;else{Pe("Using multiple framebuffer attachments requires WebGL 2");return}n.framebufferTexture2D(n.FRAMEBUFFER,r,n.TEXTURE_2D,null,0),e.colorBuffers=e.colorBuffers.splice(a,1)},t.setDepthBuffer=a=>{if(!e.context){Pe("you must set the OpenGLRenderWindow before calling setDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const n=e.context;n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,a.getHandle(),0)}else Pe("Attaching depth buffer textures to fbo requires WebGL 2")},t.removeDepthBuffer=()=>{if(!e.context){Pe("you must set the OpenGLRenderWindow before calling removeDepthBuffer");return}if(e._openGLRenderWindow.getWebgl2()){const a=e.context;a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,null,0)}else Pe("Attaching depth buffer textures to framebuffers requires WebGL 2")},t.getGLFramebuffer=()=>e.glFramebuffer,t.setOpenGLRenderWindow=a=>{e._openGLRenderWindow!==a&&(t.releaseGraphicsResources(),e._openGLRenderWindow=a,e.context=null,a&&(e.context=e._openGLRenderWindow.getContext()))},t.releaseGraphicsResources=()=>{e.glFramebuffer&&e.context.deleteFramebuffer(e.glFramebuffer)},t.getSize=()=>{const a=[0,0];return e.glFramebuffer!==null&&(a[0]=e.glFramebuffer.width,a[1]=e.glFramebuffer.height),a},t.populateFramebuffer=()=>{if(!e.context){Pe("you must set the OpenGLRenderWindow before calling populateFrameBuffer");return}t.bind();const a=e.context,n=Me.newInstance();n.setOpenGLRenderWindow(e._openGLRenderWindow),n.setMinificationFilter(ye.LINEAR),n.setMagnificationFilter(ye.LINEAR),n.create2DFromRaw(e.glFramebuffer.width,e.glFramebuffer.height,4,Ne.UNSIGNED_CHAR,null),t.setColorBuffer(n),e.depthTexture=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,e.depthTexture),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,e.glFramebuffer.width,e.glFramebuffer.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,e.depthTexture)},t.getColorTexture=()=>e.colorBuffers[0]}const K4={glFramebuffer:null,colorBuffers:null,depthTexture:null,previousDrawBinding:0,previousReadBinding:0,previousDrawBuffer:0,previousReadBuffer:0,previousActiveFramebuffer:null};function T1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,K4,a),ot(t,e),e.colorBuffers&&Pe("you cannot initialize colorBuffers through the constructor. You should call setColorBuffer() instead."),e.colorBuffers=[],ua(t,e,["colorBuffers"]),H4(t,e)}var fr={newInstance:Ke(T1,"vtkFramebuffer"),extend:T1},X4={SelectionContent:{GLOBALIDS:0,PEDIGREEIDS:1,VALUES:2,INDICES:3,FRUSTUM:4,LOCATIONS:5,THRESHOLDS:6,BLOCKS:7,QUERY:8},SelectionField:{CELL:0,POINT:1,FIELD:2,VERTEX:3,EDGE:4,ROW:5}};function q4(t,e){e.classHierarchy.push("vtkSelectionNode"),t.getBounds=()=>e.points.getBounds()}const Y4={contentType:-1,fieldType:-1,properties:null,selectionList:[]};function w1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Y4,a),k.obj(t,e),e.properties={},k.setGet(t,e,["contentType","fieldType","properties","selectionList"]),q4(t,e)}var _1={newInstance:k.newInstance(w1,"vtkSelectionNode"),extend:w1,...X4};const{PassTypes:ft}=Rf,{SelectionContent:J4,SelectionField:E1}=_1,{FieldAssociations:ka}=nr,{vtkErrorMacro:D1}=k,Fn=1;function b1(t){return`${t.propID} ${t.compositeID}`}function O1(t,e,a,n){if(!a)return 0;const r=(e*(n[2]-n[0]+1)+t)*4;return a[r+3]}function Cn(t,e,a,n){if(!a)return 0;const r=(e*(n[2]-n[0]+1)+t)*4,i=a[r],s=a[r+1];return(a[r+2]*256+s)*256+i}function N1(t,e){let a=e;return a<<=24,a|=t,a}function Ir(t,e,a,n){const r=a<0?0:a;if(r===0){if(n[0]=e[0],n[1]=e[1],e[0]<t.area[0]||e[0]>t.area[2]||e[1]<t.area[1]||e[1]>t.area[3])return null;const c=[e[0]-t.area[0],e[1]-t.area[1]],o=Cn(c[0],c[1],t.pixBuffer[ft.ACTOR_PASS],t.area);if(o<=0||o-Fn>=t.props.length)return null;const f={};f.valid=!0,f.propID=o-Fn,f.prop=t.props[f.propID];let l=Cn(c[0],c[1],t.pixBuffer[ft.COMPOSITE_INDEX_PASS],t.area);if((l<0||l>16777215)&&(l=0),f.compositeID=l-Fn,t.captureZValues){const d=(c[1]*(t.area[2]-t.area[0]+1)+c[0])*4;f.zValue=(256*t.zBuffer[d]+t.zBuffer[d+1])/65535,f.displayPosition=e}if(t.pixBuffer[ft.ID_LOW24]&&O1(c[0],c[1],t.pixBuffer[ft.ID_LOW24],t.area)===0)return f;const h=Cn(c[0],c[1],t.pixBuffer[ft.ID_LOW24],t.area),p=Cn(c[0],c[1],t.pixBuffer[ft.ID_HIGH24],t.area);return f.attributeID=N1(h,p),f}const i=[e[0],e[1]],s=[0,0];let u=Ir(t,e,0,n);if(u&&u.valid)return u;for(let c=1;c<r;++c){for(let o=i[1]>c?i[1]-c:0;o<=i[1]+c;++o)if(s[1]=o,i[0]>=c&&(s[0]=i[0]-c,u=Ir(t,s,0,n),u&&u.valid)||(s[0]=i[0]+c,u=Ir(t,s,0,n),u&&u.valid))return u;for(let o=i[0]>=c?i[0]-(c-1):0;o<=i[0]+(c-1);++o)if(s[0]=o,i[1]>=c&&(s[1]=i[1]-c,u=Ir(t,s,0,n),u&&u.valid)||(s[1]=i[1]+c,u=Ir(t,s,0,n),u&&u.valid))return u}return n[0]=e[0],n[1]=e[1],null}function M1(t,e,a,n,r){const i=[];let s=0;return e.forEach((u,c)=>{const o=_1.newInstance();switch(o.setContentType(J4.INDICES),t){case ka.FIELD_ASSOCIATION_CELLS:o.setFieldType(E1.CELL);break;case ka.FIELD_ASSOCIATION_POINTS:o.setFieldType(E1.POINT);break;default:D1("Unknown field association")}o.getProperties().propID=u.info.propID,o.getProperties().prop=u.info.prop,o.getProperties().compositeID=u.info.compositeID,o.getProperties().attributeID=u.info.attributeID,o.getProperties().pixelCount=u.pixelCount,a&&(o.getProperties().displayPosition=[u.info.displayPosition[0],u.info.displayPosition[1],u.info.zValue],o.getProperties().worldPosition=r.displayToWorld(u.info.displayPosition[0],u.info.displayPosition[1],u.info.zValue,n)),o.setSelectionList(u.attributeIDs),i[s]=o,s++}),i}function Z4(t,e,a,n,r){const i=Math.floor(e),s=Math.floor(a),u=Math.floor(n),c=Math.floor(r),o=new Map,f=[0,0];for(let l=s;l<=c;l++)for(let h=i;h<=u;h++){const d=Ir(t,[h,l],0,f);if(d&&d.valid){const y=b1(d);if(!o.has(y))o.set(y,{info:d,pixelCount:1,attributeIDs:[d.attributeID]});else{const m=o.get(y);m.pixelCount++,t.captureZValues&&d.zValue<m.info.zValue&&(m.info=d),m.attributeIDs.indexOf(d.attributeID)===-1&&m.attributeIDs.push(d.attributeID)}}}return M1(t.fieldAssociation,o,t.captureZValues,t.renderer,t.openGLRenderWindow)}function Q4(t,e){e.classHierarchy.push("vtkOpenGLHardwareSelector"),t.releasePixBuffers=()=>{e.rawPixBuffer=[],e.pixBuffer=[],e.zBuffer=null},t.beginSelection=()=>{e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e.maxAttributeId=0;const n=e._openGLRenderWindow.getSize();if(!e.framebuffer)e.framebuffer=fr.newInstance(),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.create(n[0],n[1]),e.framebuffer.populateFramebuffer();else{e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.saveCurrentBindingsAndBuffers();const r=e.framebuffer.getSize();r[0]!==n[0]||r[1]!==n[1]?(e.framebuffer.create(n[0],n[1]),e.framebuffer.populateFramebuffer()):e.framebuffer.bind()}if(e._openGLRenderer.clear(),e._openGLRenderer.setSelector(t),e.hitProps={},e.propPixels={},e.props=[],t.releasePixBuffers(),e.fieldAssociation===ka.FIELD_ASSOCIATION_POINTS){const r=e._openGLRenderWindow.getContext(),i=r.isEnabled(r.BLEND);r.disable(r.BLEND),e._openGLRenderWindow.traverseAllPasses(),i&&r.enable(r.BLEND)}},t.endSelection=()=>{e.hitProps={},e._openGLRenderer.setSelector(null),e.framebuffer.restorePreviousBindingsAndBuffers()},t.preCapturePass=()=>{const n=e._openGLRenderWindow.getContext();e.originalBlending=n.isEnabled(n.BLEND),n.disable(n.BLEND)},t.postCapturePass=()=>{const n=e._openGLRenderWindow.getContext();e.originalBlending&&n.enable(n.BLEND)},t.select=()=>{let n=null;return t.captureBuffers()&&(n=t.generateSelection(e.area[0],e.area[1],e.area[2],e.area[3]),t.releasePixBuffers()),n},t.getSourceDataAsync=async(n,r,i,s,u)=>{if(e._renderer=n,r===void 0){const o=e._openGLRenderWindow.getSize();t.setArea(0,0,o[0]-1,o[1]-1)}else t.setArea(r,i,s,u);if(!t.captureBuffers())return!1;const c={area:[...e.area],pixBuffer:[...e.pixBuffer],captureZValues:e.captureZValues,zBuffer:e.zBuffer,props:[...e.props],fieldAssociation:e.fieldAssociation,renderer:n,openGLRenderWindow:e._openGLRenderWindow};return c.generateSelection=function(){for(var o=arguments.length,f=new Array(o),l=0;l<o;l++)f[l]=arguments[l];return Z4(c,...f)},c},t.captureBuffers=()=>{if(!e._renderer||!e._openGLRenderWindow)return D1("Renderer and view must be set before calling Select."),!1;e._openGLRenderer=e._openGLRenderWindow.getViewNodeFor(e._renderer),e._openGLRenderWindow.getRenderable().preRender(),t.invokeEvent({type:"StartEvent"}),e.originalBackground=e._renderer.getBackgroundByReference(),e._renderer.setBackground(0,0,0,0);const n=e._openGLRenderWindow.getRenderPasses();for(t.beginSelection(),e.currentPass=ft.MIN_KNOWN_PASS;e.currentPass<=ft.MAX_KNOWN_PASS;e.currentPass++)t.passRequired(e.currentPass)&&(t.preCapturePass(e.currentPass),e.captureZValues&&e.currentPass===ft.ACTOR_PASS&&typeof n[0].requestDepth=="function"&&typeof n[0].getFramebuffer=="function"&&n[0].requestDepth(),e._openGLRenderWindow.traverseAllPasses(),t.postCapturePass(e.currentPass),t.savePixelBuffer(e.currentPass),t.processPixelBuffers());return t.endSelection(),e._renderer.setBackground(e.originalBackground),t.invokeEvent({type:"EndEvent"}),!0},t.processPixelBuffers=()=>{e.props.forEach((n,r)=>{t.isPropHit(r)&&n.processSelectorPixelBuffers(t,e.propPixels[r])})},t.passRequired=n=>{if(n===ft.ID_HIGH24){if(e.fieldAssociation===ka.FIELD_ASSOCIATION_POINTS)return e.maximumPointId>16777215;if(e.fieldAssociation===ka.FIELD_ASSOCIATION_CELLS)return e.maximumCellId>16777215}return!0},t.savePixelBuffer=n=>{if(e.pixBuffer[n]=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),!e.rawPixBuffer[n]){const r=(e.area[2]-e.area[0]+1)*(e.area[3]-e.area[1]+1)*4;e.rawPixBuffer[n]=new Uint8Array(r),e.rawPixBuffer[n].set(e.pixBuffer[n])}if(n===ft.ACTOR_PASS){if(e.captureZValues){const r=e._openGLRenderWindow.getRenderPasses();if(typeof r[0].requestDepth=="function"&&typeof r[0].getFramebuffer=="function"){const i=r[0].getFramebuffer();i.saveCurrentBindingsAndBuffers(),i.bind(),e.zBuffer=e._openGLRenderWindow.getPixelData(e.area[0],e.area[1],e.area[2],e.area[3]),i.restorePreviousBindingsAndBuffers()}}t.buildPropHitList(e.rawPixBuffer[n])}},t.buildPropHitList=n=>{let r=0;for(let i=0;i<=e.area[3]-e.area[1];i++)for(let s=0;s<=e.area[2]-e.area[0];s++){let u=Cn(s,i,n,e.area);u>0&&(u--,u in e.hitProps||(e.hitProps[u]=!0,e.propPixels[u]=[]),e.propPixels[u].push(r*4)),++r}},t.renderProp=n=>{e.currentPass===ft.ACTOR_PASS&&(t.setPropColorValueFromInt(e.props.length+Fn),e.props.push(n))},t.renderCompositeIndex=n=>{e.currentPass===ft.COMPOSITE_INDEX_PASS&&t.setPropColorValueFromInt(n+Fn)},t.renderAttributeId=n=>{n<0||(e.maxAttributeId=n>e.maxAttributeId?n:e.maxAttributeId)},t.passTypeToString=n=>k.enumToString(ft,n),t.isPropHit=n=>Boolean(e.hitProps[n]),t.setPropColorValueFromInt=n=>{e.propColorValue[0]=n%256/255,e.propColorValue[1]=Math.floor(n/256)%256/255,e.propColorValue[2]=Math.floor(n/65536)%256/255},t.getPixelInformation=(n,r,i)=>{const s=r<0?0:r;if(s===0){if(i[0]=n[0],i[1]=n[1],n[0]<e.area[0]||n[0]>e.area[2]||n[1]<e.area[1]||n[1]>e.area[3])return null;const f=[n[0]-e.area[0],n[1]-e.area[1]],l=Cn(f[0],f[1],e.pixBuffer[ft.ACTOR_PASS],e.area);if(l<=0||l-Fn>=e.props.length)return null;const h={};h.valid=!0,h.propID=l-Fn,h.prop=e.props[h.propID];let p=Cn(f[0],f[1],e.pixBuffer[ft.COMPOSITE_INDEX_PASS],e.area);if((p<0||p>16777215)&&(p=0),h.compositeID=p-Fn,e.captureZValues){const m=(f[1]*(e.area[2]-e.area[0]+1)+f[0])*4;h.zValue=(256*e.zBuffer[m]+e.zBuffer[m+1])/65535,h.displayPosition=n}if(e.pixBuffer[ft.ID_LOW24]&&O1(f[0],f[1],e.pixBuffer[ft.ID_LOW24],e.area)===0)return h;const d=Cn(f[0],f[1],e.pixBuffer[ft.ID_LOW24],e.area),y=Cn(f[0],f[1],e.pixBuffer[ft.ID_HIGH24],e.area);return h.attributeID=N1(d,y),h}const u=[n[0],n[1]],c=[0,0];let o=t.getPixelInformation(n,0,i);if(o&&o.valid)return o;for(let f=1;f<s;++f){for(let l=u[1]>f?u[1]-f:0;l<=u[1]+f;++l)if(c[1]=l,u[0]>=f&&(c[0]=u[0]-f,o=t.getPixelInformation(c,0,i),o&&o.valid)||(c[0]=u[0]+f,o=t.getPixelInformation(c,0,i),o&&o.valid))return o;for(let l=u[0]>=f?u[0]-(f-1):0;l<=u[0]+(f-1);++l)if(c[0]=l,u[1]>=f&&(c[1]=u[1]-f,o=t.getPixelInformation(c,0,i),o&&o.valid)||(c[1]=u[1]+f,o=t.getPixelInformation(c,0,i),o&&o.valid))return o}return i[0]=n[0],i[1]=n[1],null},t.generateSelection=(n,r,i,s)=>{const u=Math.floor(n),c=Math.floor(r),o=Math.floor(i),f=Math.floor(s),l=new Map,h=[0,0];for(let p=c;p<=f;p++)for(let d=u;d<=o;d++){const y=[d,p],m=t.getPixelInformation(y,0,h);if(m&&m.valid){const S=b1(m);if(!l.has(S))l.set(S,{info:m,pixelCount:1,attributeIDs:[m.attributeID]});else{const v=l.get(S);v.pixelCount++,e.captureZValues&&m.zValue<v.info.zValue&&(v.info=m),v.attributeIDs.indexOf(m.attributeID)===-1&&v.attributeIDs.push(m.attributeID)}}}return M1(e.fieldAssociation,l,e.captureZValues,e._renderer,e._openGLRenderWindow)},t.getRawPixelBuffer=n=>e.rawPixBuffer[n],t.getPixelBuffer=n=>e.pixBuffer[n],t.attach=(n,r)=>{e._openGLRenderWindow=n,e._renderer=r};const a=t.setArea;t.setArea=function(){return a(...arguments)?(e.area[0]=Math.floor(e.area[0]),e.area[1]=Math.floor(e.area[1]),e.area[2]=Math.floor(e.area[2]),e.area[3]=Math.floor(e.area[3]),!0):!1}}const e9={area:void 0,currentPass:-1,propColorValue:null,props:null,maximumPointId:0,maximumCellId:0,idOffset:1};function R1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,e9,a),$4.extend(t,e,a),e.propColorValue=[0,0,0],e.props=[],e.area||(e.area=[0,0,0,0]),k.setGetArray(t,e,["area"],4),k.setGet(t,e,["_renderer","currentPass","_openGLRenderWindow","maximumPointId","maximumCellId"]),k.setGetArray(t,e,["propColorValue"],3),k.moveToProtected(t,e,["renderer","openGLRenderWindow"]),k.event(t,e,"event"),Q4(t,e)}var Fa={newInstance:k.newInstance(R1,"vtkOpenGLHardwareSelector"),extend:R1,...Rf};const{vtkErrorMacro:Aa}=wt,{Representation:t9}=Qn,{ObjectType:ro}=mn,{PassTypes:n9}=Fa,r9={type:"StartEvent"},a9={type:"EndEvent"};function i9(t,e){e.classHierarchy.push("vtkOpenGLGlyph3DMapper");const a={...t};t.renderPiece=(n,r)=>{if(t.invokeEvent(r9),e.renderable.getStatic()||e.renderable.update(),e.currentInput=e.renderable.getInputData(1),t.invokeEvent(a9),!e.currentInput){Aa("No input!");return}if(!e.currentInput.getPoints||!e.currentInput.getPoints().getNumberOfValues())return;const i=e.context;e._openGLRenderWindow.getWebgl2()?(e.hardwareSupport=!0,e.extension=null):e.extension||(e.extension=e.context.getExtension("ANGLE_instanced_arrays"),e.hardwareSupport=!!e.extension);const s=r.getProperty().getBackfaceCulling(),u=r.getProperty().getFrontfaceCulling();!s&&!u?e._openGLRenderWindow.disableCullFace():u?(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.FRONT)):(e._openGLRenderWindow.enableCullFace(),i.cullFace(i.BACK)),t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r)},t.multiply4x4WithOffset=(n,r,i,s)=>{const u=r[0],c=r[1],o=r[2],f=r[3],l=r[4],h=r[5],p=r[6],d=r[7],y=r[8],m=r[9],S=r[10],v=r[11],g=r[12],x=r[13],C=r[14],T=r[15];let w=i[s],_=i[s+1],E=i[s+2],D=i[s+3];n[0]=w*u+_*l+E*y+D*g,n[1]=w*c+_*h+E*m+D*x,n[2]=w*o+_*p+E*S+D*C,n[3]=w*f+_*d+E*v+D*T,w=i[s+4],_=i[s+5],E=i[s+6],D=i[s+7],n[4]=w*u+_*l+E*y+D*g,n[5]=w*c+_*h+E*m+D*x,n[6]=w*o+_*p+E*S+D*C,n[7]=w*f+_*d+E*v+D*T,w=i[s+8],_=i[s+9],E=i[s+10],D=i[s+11],n[8]=w*u+_*l+E*y+D*g,n[9]=w*c+_*h+E*m+D*x,n[10]=w*o+_*p+E*S+D*C,n[11]=w*f+_*d+E*v+D*T,w=i[s+12],_=i[s+13],E=i[s+14],D=i[s+15],n[12]=w*u+_*l+E*y+D*g,n[13]=w*c+_*h+E*m+D*x,n[14]=w*o+_*p+E*S+D*C,n[15]=w*f+_*d+E*v+D*T},t.replaceShaderNormal=(n,r,i)=>{if(e.hardwareSupport&&e.lastBoundBO.getReferenceByName("lastLightComplexity")>0){let u=n.Vertex;e.lastBoundBO.getCABO().getNormalOffset()&&(u=J.substitute(u,"//VTK::Normal::Dec",["attribute vec3 normalMC;","attribute mat3 gNormal;","uniform mat3 normalMatrix;","varying vec3 normalVCVSOutput;"]).result,u=J.substitute(u,"//VTK::Normal::Impl",["normalVCVSOutput = normalMatrix * gNormal * normalMC;"]).result),n.Vertex=u}a.replaceShaderNormal(n,r,i)},t.replaceShaderColor=(n,r,i)=>{if(e.hardwareSupport&&e.renderable.getColorArray()){let s=n.Vertex,u=n.Geometry,c=n.Fragment;const o=e.lastBoundBO.getReferenceByName("lastLightComplexity");let f=["uniform float ambient;","uniform float diffuse;","uniform float specular;","uniform float opacityUniform; // the fragment opacity"];o&&(f=f.concat(["uniform vec3 specularColorUniform;","uniform float specularPowerUniform;"]));let l=["vec3 ambientColor;","  vec3 diffuseColor;","  float opacity;"];o&&(l=l.concat(["  vec3 specularColor;","  float specularPower;"])),l=l.concat(["  opacity = opacityUniform;"]),o&&(l=l.concat(["  specularColor = specularColorUniform;","  specularPower = specularPowerUniform;"])),e.drawingEdges||(f=f.concat(["varying vec4 vertexColorVSOutput;"]),s=J.substitute(s,"//VTK::Color::Dec",["attribute vec4 gColor;","varying vec4 vertexColorVSOutput;"]).result,s=J.substitute(s,"//VTK::Color::Impl",["vertexColorVSOutput = gColor;"]).result,u=J.substitute(u,"//VTK::Color::Dec",["in vec4 vertexColorVSOutput[];","out vec4 vertexColorGSOutput;"]).result,u=J.substitute(u,"//VTK::Color::Impl",["vertexColorGSOutput = vertexColorVSOutput[i];"]).result,l=l.concat(["  diffuseColor = vertexColorVSOutput.rgb;","  ambientColor = vertexColorVSOutput.rgb;","  opacity = opacity*vertexColorVSOutput.a;"])),c=J.substitute(c,"//VTK::Color::Impl",l).result,c=J.substitute(c,"//VTK::Color::Dec",f).result,n.Vertex=s,n.Geometry=u,n.Fragment=c}a.replaceShaderColor(n,r,i)},t.replaceShaderPositionVC=(n,r,i)=>{if(e.hardwareSupport){let s=n.Vertex;e.lastBoundBO.getReferenceByName("lastLightComplexity")>0?(s=J.substitute(s,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","vertexVCVSOutput = MCVCMatrix * gVertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result,s=J.substitute(s,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result):(s=J.substitute(s,"//VTK::Camera::Dec",["attribute mat4 gMatrix;","uniform mat4 MCPCMatrix;"]).result,s=J.substitute(s,"//VTK::PositionVC::Impl",["vec4 gVertexMC = gMatrix * vertexMC;","  gl_Position = MCPCMatrix * gVertexMC;"]).result),n.Vertex=s}a.replaceShaderPositionVC(n,r,i)},t.replaceShaderPicking=(n,r,i)=>{if(e.hardwareSupport){let s=n.Fragment,u=n.Vertex;u=J.substitute(u,"//VTK::Picking::Dec",["attribute vec3 mapperIndexVS;","varying vec3 mapperIndexVSOutput;"]).result,u=J.substitute(u,"//VTK::Picking::Impl","  mapperIndexVSOutput = mapperIndexVS;").result,n.Vertex=u,s=J.substitute(s,"//VTK::Picking::Dec",["varying vec3 mapperIndexVSOutput;","uniform vec3 mapperIndex;","uniform int picking;"]).result,s=J.substitute(s,"//VTK::Picking::Impl",["  vec4 pickColor = picking == 2 ? vec4(mapperIndexVSOutput,1.0) : vec4(mapperIndex,1.0);","  gl_FragData[0] = picking != 0 ? pickColor : gl_FragData[0];"]).result,n.Fragment=s}else a.replaceShaderPicking(n,r,i)},t.updateGlyphShaderParameters=(n,r,i,s,u,c,o,f)=>{const l=i.getProgram();if(n){const h=e.normalMatrix,p=c,d=o*9,y=e.tmpMat3,m=h[0],S=h[1],v=h[2],g=h[3],x=h[4],C=h[5],T=h[6],w=h[7],_=h[8],E=p[d],D=p[d+1],b=p[d+2],N=p[d+3],R=p[d+4],M=p[d+5],A=p[d+6],I=p[d+7],$=p[d+8];y[0]=E*m+D*g+b*T,y[1]=E*S+D*x+b*w,y[2]=E*v+D*C+b*_,y[3]=N*m+R*g+M*T,y[4]=N*S+R*x+M*w,y[5]=N*v+R*C+M*_,y[6]=A*m+I*g+$*T,y[7]=A*S+I*x+$*w,y[8]=A*v+I*C+$*_,l.setUniformMatrix3x3("normalMatrix",e.tmpMat3)}if(t.multiply4x4WithOffset(e.tmpMat4,e.mcpcMatrix,u,o*16),l.setUniformMatrix("MCPCMatrix",e.tmpMat4),r&&(t.multiply4x4WithOffset(e.tmpMat4,e.mcvcMatrix,u,o*16),l.setUniformMatrix("MCVCMatrix",e.tmpMat4)),s){const h=s.getData();e.tmpColor[0]=h[o*4]/255,e.tmpColor[1]=h[o*4+1]/255,e.tmpColor[2]=h[o*4+2]/255,l.setUniform3fArray("ambientColorUniform",e.tmpColor),l.setUniform3fArray("diffuseColorUniform",e.tmpColor)}f&&l.setUniform3fArray("mapperIndex",f.getPropColorValue())},t.renderPieceDraw=(n,r)=>{const i=r.getProperty().getRepresentation(),s=e.context,u=r.getProperty().getEdgeVisibility()&&i===t9.SURFACE,c=e.openGLCamera.getKeyMatrices(n),o=e.openGLActor.getKeyMatrices();Sr(e.normalMatrix,c.normalMatrix,o.normalMatrix),Ge(e.mcpcMatrix,c.wcpc,o.mcwc),Ge(e.mcvcMatrix,c.wcvc,o.mcwc);const f=e.renderable.getMatrixArray(),l=e.renderable.getNormalArray(),h=e.renderable.getColorArray(),p=f.length/16;let d=!1;e._openGLRenderer.getSelector()&&e._openGLRenderer.getSelector().getCurrentPass()===n9.COMPOSITE_INDEX_PASS&&(d=!0);for(let y=e.primTypes.Start;y<e.primTypes.End;y++){const m=e.primitives[y].getCABO();if(m.getElementCount()){e.drawingEdges=u&&(y===e.primTypes.TrisEdges||y===e.primTypes.TriStripsEdges),e.lastBoundBO=e.primitives[y],e.primitives[y].updateShaders(n,r,t);const S=e.primitives[y].getProgram(),v=e.primitives[y].getOpenGLMode(i),g=S.isUniformUsed("normalMatrix"),x=S.isUniformUsed("MCVCMatrix");if(e.hardwareSupport)e.extension?e.extension.drawArraysInstancedANGLE(v,0,m.getElementCount(),p):s.drawArraysInstanced(v,0,m.getElementCount(),p);else for(let C=0;C<p;++C)d&&e._openGLRenderer.getSelector().renderCompositeIndex(C),t.updateGlyphShaderParameters(g,x,e.primitives[y],h,f,l,C,d?e._openGLRenderer.getSelector():null),s.drawArrays(v,0,m.getElementCount())}}},t.setMapperShaderParameters=(n,r,i)=>{if(n.getCABO().getElementCount()&&(e.glyphBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){n.getProgram().isAttributeUsed("gMatrix")?n.getVAO().addAttributeMatrixWithDivisor(n.getProgram(),e.matrixBuffer,"gMatrix",0,64,e.context.FLOAT,4,!1,1)||Aa("Error setting gMatrix in shader VAO."):n.getVAO().removeAttributeArray("gMatrix"),n.getProgram().isAttributeUsed("gNormal")?n.getVAO().addAttributeMatrixWithDivisor(n.getProgram(),e.normalBuffer,"gNormal",0,36,e.context.FLOAT,3,!1,1)||Aa("Error setting gNormal in shader VAO."):n.getVAO().removeAttributeArray("gNormal"),n.getProgram().isAttributeUsed("gColor")?n.getVAO().addAttributeArrayWithDivisor(n.getProgram(),e.colorBuffer,"gColor",0,4,e.context.UNSIGNED_BYTE,4,!0,1,!1)||Aa("Error setting gColor in shader VAO."):n.getVAO().removeAttributeArray("gColor"),n.getProgram().isAttributeUsed("mapperIndexVS")?n.getVAO().addAttributeArrayWithDivisor(n.getProgram(),e.pickBuffer,"mapperIndexVS",0,4,e.context.UNSIGNED_BYTE,4,!0,1,!1)||Aa("Error setting mapperIndexVS in shader VAO."):n.getVAO().removeAttributeArray("mapperIndexVS"),a.setMapperShaderParameters(n,r,i),n.getAttributeUpdateTime().modified();return}a.setMapperShaderParameters(n,r,i)},t.getNeedToRebuildBufferObjects=(n,r)=>(e.renderable.buildArrays(),e.VBOBuildTime.getMTime()<e.renderable.getBuildTime().getMTime()?!0:a.getNeedToRebuildBufferObjects(n,r)),t.getNeedToRebuildShaders=(n,r,i)=>!!(a.getNeedToRebuildShaders(n,r,i)||n.getShaderSourceTime().getMTime()<e.renderable.getMTime()||n.getShaderSourceTime().getMTime()<e.currentInput.getMTime()),t.buildBufferObjects=(n,r)=>{if(e.hardwareSupport){const i=e.renderable.getMatrixArray(),s=e.renderable.getNormalArray(),u=e.renderable.getColorArray();if(e.matrixBuffer||(e.matrixBuffer=mn.newInstance(),e.matrixBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.normalBuffer=mn.newInstance(),e.normalBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorBuffer=mn.newInstance(),e.colorBuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.pickBuffer=mn.newInstance(),e.pickBuffer.setOpenGLRenderWindow(e._openGLRenderWindow)),e.renderable.getBuildTime().getMTime()>e.glyphBOBuildTime.getMTime()){e.matrixBuffer.upload(i,ro.ARRAY_BUFFER),e.normalBuffer.upload(s,ro.ARRAY_BUFFER),u?e.colorBuffer.upload(u.getData(),ro.ARRAY_BUFFER):e.colorBuffer.releaseGraphicsResources();const c=i.length/16,o=new Uint8Array(4*c);for(let f=0;f<c;++f){let l=f+1;const h=f*4;o[h]=l%256,l-=o[h],l/=256,o[h+1]=l%256,l-=o[h+1],l/=256,o[h+2]=l%256,o[h+3]=255}e.pickBuffer.upload(o,ro.ARRAY_BUFFER),e.glyphBOBuildTime.modified()}}return a.buildBufferObjects(n,r)}}const o9={normalMatrix:null,mcpcMatrix:null,mcwcMatrix:null};function s9(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,o9,a),eo.extend(t,e,a),e.tmpMat3=zt(new Float64Array(9)),e.normalMatrix=zt(new Float64Array(9)),e.mcpcMatrix=Se(new Float64Array(16)),e.mcvcMatrix=Se(new Float64Array(16)),e.tmpColor=[],e.glyphBOBuildTime={},ot(e.glyphBOBuildTime,{mtime:0}),i9(t,e)}const u9=Ke(s9,"vtkOpenGLGlyph3DMapper");st("vtkGlyph3DMapper",u9);const{vtkErrorMacro:c9}=k;class l9{constructor(){this.segmentMapping={},this.segments=[null],this.faces=[]}addSegment(e){const a=e[0],n=e[e.length-1];if(a===n||e.length<2)return;const r=this.segmentMapping[a],i=this.segmentMapping[n];if(r!==void 0&&i!==void 0)if(Math.abs(r)===Math.abs(i)){const s=r<i?i:r,u=this.segments[s];if(r>0)for(let c=1;c<e.length-1;c++)u.push(e[c]);else for(let c=1;c<e.length-1;c++)u.unshift(e[e.length-1-c]);this.faces.push(u),this.segments[s]=null,this.segmentMapping[a]=void 0,this.segmentMapping[n]=void 0}else{const s=Math.abs(r),u=Math.abs(i),c=this.segments[s],o=this.segments[u];this.segments[s]=null,this.segments[u]=null,this.segmentMapping[c[0]]=void 0,this.segmentMapping[o[0]]=void 0,this.segmentMapping[c[c.length-1]]=void 0,this.segmentMapping[o[o.length-1]]=void 0,this.addSegment(e),this.addSegment(c),this.addSegment(o)}else if(r!==void 0){if(r>0){const s=this.segments[r];for(let u=1;u<e.length;u++)s.push(e[u]);this.segmentMapping[n]=r}else{const s=this.segments[-r];this.segmentMapping[n]=r;for(let u=1;u<e.length;u++)s.unshift(e[u])}this.segmentMapping[a]=void 0}else if(i!==void 0){if(i>0){const s=this.segments[i];for(let u=1;u<e.length;u++)s.push(e[e.length-1-u]);this.segmentMapping[a]=i}else{const s=this.segments[-i];this.segmentMapping[a]=i;for(let u=1;u<e.length;u++)s.unshift(e[e.length-u-1])}this.segmentMapping[n]=void 0}else{const s=this.segments.length;this.segments.push(e),this.segmentMapping[a]=-s,this.segmentMapping[n]=s}}}function f9(t,e){e.classHierarchy.push("vtkClosedPolyLineToSurfaceFilter"),t.requestData=(a,n)=>{const r=a[0];if(!r){c9("Invalid or missing input");return}const i=je.newInstance();i.shallowCopy(r);const s=new l9,u=r.getLines().getData();let c=0;for(;c<u.length;){const h=u[c++],p=[];for(let d=0;d<h;d++)p.push(u[c+d]);s.addSegment(p),c+=h}const{faces:o}=s;let f=o.length;for(let h=0;h<o.length;h++)f+=o[h].length;const l=new Uint16Array(f);c=0;for(let h=0;h<o.length;h++){const p=o[h];l[c++]=p.length;for(let d=0;d<p.length;d++)l[c++]=p[d]}i.setPolys(Ln.newInstance({values:l,name:"faces"})),n[0]=i}}const h9={};function L1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,h9,a),k.obj(t,e),k.algo(t,e,1,1),f9(t,e)}var p9={newInstance:k.newInstance(L1,"vtkClosedPolyLineToSurfaceFilter"),extend:L1};const{vtkErrorMacro:k1}=wt;function g9(t){const e=t.getPolys().getData(),a=t.getStrips().getData(),n={cellSize:0,cell:[],done:!1,polyIdx:0,stripIdx:0,remainingStripLength:0,next(){if(n.polyIdx<e.length){n.cellSize=e[n.polyIdx];const r=n.polyIdx+1,i=r+n.cellSize;n.polyIdx=i;let s=0;for(let u=r;u<i;++u)n.cell[s++]=e[u]}else if(n.stripIdx<a.length){n.cellSize=3,n.remainingStripLength===0&&(n.remainingStripLength=a[n.stripIdx]-2,n.stripIdx+=3);const r=n.stripIdx-2,i=n.stripIdx+1;n.stripIdx++,n.remainingStripLength--;let s=0;for(let u=r;u<i;++u)n.cell[s++]=a[u]}else if(!n.done)n.done=!0;else throw new Error("Iterator is done")}};return n.next(),n}function d9(t,e){e.classHierarchy.push("vtkCutter");const a={...t};t.getMTime=()=>{let r=a.getMTime();return e.cutFunction&&(r=Math.max(r,e.cutFunction.getMTime())),r};function n(r,i){const s=r.getPoints(),u=s.getData(),c=s.getNumberOfPoints(),o=[],f=[],l=[];(!e.cutScalars||e.cutScalars.length<c)&&(e.cutScalars=new Float32Array(c));let h=0,p=0;for(;h<u.length;)e.cutScalars[p++]=e.cutFunction.evaluateFunction(u[h++],u[h++],u[h++]);const d=[],y=new Array(3),m=new Array(3),S=[];for(const g=g9(r);!g.done;g.next()){if(g.cellSize<=2)continue;for(let _=0;_<g.cellSize;)S[_]=e.cutScalars[g.cell[_++]];const x=S[0]>0;let C=!0;for(let _=1;_<g.cell.length;_++)if(S[_]>0!==x){C=!1;break}if(C)continue;const T=[];for(let _=0;_<g.cellSize;_++){const E=_+1===g.cellSize?0:_+1,D=S[_]>0;if(S[E]>0===D)continue;let N=_,R=E,M=S[R]-S[N];M<=0&&(N=E,R=_,M*=-1);let A=0;M!==0&&(A=(e.cutValue-S[N])/M);const I=g.cell[N],$=g.cell[R];y[0]=u[I*3],y[1]=u[I*3+1],y[2]=u[I*3+2],m[0]=u[$*3],m[1]=u[$*3+1],m[2]=u[$*3+2];const U=[y[0]+A*(m[0]-y[0]),y[1]+A*(m[1]-y[1]),y[2]+A*(m[2]-y[2])];T.push({pointEdge1:I,pointEdge2:$,intersectedPoint:U,newPointID:-1})}for(let _=0;_<T.length;_++){const E=T[_];let D=!1;for(let b=0;b<d.length;b++){const N=d[b],R=E.pointEdge1===N.pointEdge1&&E.pointEdge2===N.pointEdge2,M=E.intersectedPoint[0]===N.intersectedPoint[0]&&E.intersectedPoint[1]===N.intersectedPoint[1]&&E.intersectedPoint[2]===N.intersectedPoint[2];if(R||M){D=!0,T[_].newPointID=d[b].newPointID;break}}D||(o.push(E.intersectedPoint[0]),o.push(E.intersectedPoint[1]),o.push(E.intersectedPoint[2]),T[_].newPointID=o.length/3-1,d.push(T[_]))}const w=T.length;w===2?f.push(w,T[0].newPointID,T[1].newPointID):w>2&&(l.push(w),T.forEach(_=>{l.push(_.newPointID)}))}i.getPoints().setData(hi(s.getDataType(),o),3),f.length!==0&&i.getLines().setData(Uint16Array.from(f)),l.length!==0&&i.getPolys().setData(Uint16Array.from(l))}t.requestData=(r,i)=>{const s=r[0];if(!s){k1("Invalid or missing input");return}if(!e.cutFunction){k1("Missing cut function");return}const u=je.newInstance();n(s,u),i[0]=u}}const v9={cutFunction:null,cutScalars:null,cutValue:0};function F1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,v9,a),ot(t,e),Zo(t,e,1,1),lt(t,e,["cutFunction","cutValue"]),d9(t,e)}var y9={newInstance:Ke(F1,"vtkCutter"),extend:F1};const m9=t=>t,A1=1e-6;class V1{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.matrix=Se(new Float64Array(16)),this.tmp=new Float64Array(3),this.angleConv=e?Lg:m9}rotateFromDirections(e,a){const n=new Float64Array(3),r=new Float64Array(3),i=new Float64Array(16);He(n,e[0],e[1],e[2]),He(r,a[0],a[1],a[2]),jt(n,n),jt(r,r);const s=aa(n,r);return s>=1?this:(Tr(this.tmp,n,r),Cr(this.tmp)<A1&&(Tr(this.tmp,[1,0,0],e),Cr(this.tmp)<A1&&Tr(this.tmp,[0,1,0],e)),Tu(i,Math.acos(s),this.tmp),Ge(this.matrix,this.matrix,i),this)}rotate(e,a){return He(this.tmp,...a),jt(this.tmp,this.tmp),mt(this.matrix,this.matrix,this.angleConv(e),this.tmp),this}rotateX(e){return ti(this.matrix,this.matrix,this.angleConv(e)),this}rotateY(e){return na(this.matrix,this.matrix,this.angleConv(e)),this}rotateZ(e){return ni(this.matrix,this.matrix,this.angleConv(e)),this}translate(e,a,n){return He(this.tmp,e,a,n),Ze(this.matrix,this.matrix,this.tmp),this}scale(e,a,n){return He(this.tmp,e,a,n),Dn(this.matrix,this.matrix,this.tmp),this}multiply(e){return Ge(this.matrix,this.matrix,e),this}multiply3x3(e){return Ge(this.matrix,this.matrix,[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1]),this}invert(){return Nt(this.matrix,this.matrix),this}identity(){return Se(this.matrix),this}apply(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(Ta(Ss,this.matrix))return this;const r=n===-1?e.length:a+n*3;for(let i=a;i<r;i+=3)He(this.tmp,e[i],e[i+1],e[i+2]),Te(this.tmp,this.tmp,this.matrix),e[i]=this.tmp[0],e[i+1]=this.tmp[1],e[i+2]=this.tmp[2];return this}getMatrix(){return this.matrix}setMatrix(e){return e&&e.length===16&&dt(this.matrix,e),this}}function x9(){return new V1(!0)}function S9(){return new V1(!1)}var _t={buildFromDegree:x9,buildFromRadian:S9};const C9=[2,0,1,2,2,3,2,4,5,2,6,7,2,0,2,2,1,3,2,4,6,2,5,7,2,0,4,2,1,5,2,2,6,2,3,7],T9=[4,0,1,3,2,4,4,6,7,5,4,8,10,11,9,4,12,13,15,14,4,16,18,19,17,4,20,21,23,22];function w9(t,e){e.classHierarchy.push("vtkCubeSource");function a(n,r){if(e.deleted)return;const i=je.newInstance();r[0]=i;const s=24,u=k.newTypedArray(e.pointType,s*3);i.getPoints().setData(u,3);const c=k.newTypedArray(e.pointType,s*3),o=pe.newInstance({name:"Normals",values:c,numberOfComponents:3});i.getPointData().setNormals(o);let f=2;e.generate3DTextureCoordinates===!0&&(f=3);const l=k.newTypedArray(e.pointType,s*f),h=pe.newInstance({name:"TextureCoordinates",values:l,numberOfComponents:f});i.getPointData().setTCoords(h);const p=[0,0,0],d=[0,0,0],y=[0,0];let m=0;p[0]=-e.xLength/2,d[0]=-1,d[1]=0,d[2]=0;for(let S=0;S<2;S++){p[1]=-e.yLength/2;for(let v=0;v<2;v++){y[1]=p[1]+.5,p[2]=-e.zLength/2;for(let g=0;g<2;g++)y[0]=(p[2]+.5)*(1-2*S),u[m*3]=p[0],u[m*3+1]=p[1],u[m*3+2]=p[2],c[m*3]=d[0],c[m*3+1]=d[1],c[m*3+2]=d[2],f===2?(l[m*f]=y[0],l[m*f+1]=y[1]):(l[m*f]=2*S-1,l[m*f+1]=2*v-1,l[m*f+2]=2*g-1),m++,p[2]+=e.zLength;p[1]+=e.yLength}p[0]+=e.xLength,d[0]+=2}p[1]=-e.yLength/2,d[1]=-1,d[0]=0,d[2]=0;for(let S=0;S<2;S++){p[0]=-e.xLength/2;for(let v=0;v<2;v++){y[0]=(p[0]+.5)*(2*S-1),p[2]=-e.zLength/2;for(let g=0;g<2;g++)y[1]=(p[2]+.5)*-1,u[m*3]=p[0],u[m*3+1]=p[1],u[m*3+2]=p[2],c[m*3]=d[0],c[m*3+1]=d[1],c[m*3+2]=d[2],f===2?(l[m*f]=y[0],l[m*f+1]=y[1]):(l[m*f]=2*v-1,l[m*f+1]=2*S-1,l[m*f+2]=2*g-1),m++,p[2]+=e.zLength;p[0]+=e.xLength}p[1]+=e.yLength,d[1]+=2}p[2]=-e.zLength/2,d[2]=-1,d[0]=0,d[1]=0;for(let S=0;S<2;S++){p[1]=-e.yLength/2;for(let v=0;v<2;v++){y[1]=p[1]+.5,p[0]=-e.xLength/2;for(let g=0;g<2;g++)y[0]=(p[0]+.5)*(2*S-1),u[m*3]=p[0],u[m*3+1]=p[1],u[m*3+2]=p[2],c[m*3]=d[0],c[m*3+1]=d[1],c[m*3+2]=d[2],f===2?(l[m*f]=y[0],l[m*f+1]=y[1]):(l[m*f]=2*g-1,l[m*f+1]=2*v-1,l[m*f+2]=2*S-1),m++,p[0]+=e.xLength;p[1]+=e.yLength}p[2]+=e.zLength,d[2]+=2}if(e.rotations&&_t.buildFromDegree().rotateX(e.rotations[0]).rotateY(e.rotations[1]).rotateZ(e.rotations[2]).apply(u).apply(c),e.center&&_t.buildFromRadian().translate(...e.center).apply(u),e.matrix){_t.buildFromRadian().setMatrix(e.matrix).apply(u);const S=[e.matrix[0],e.matrix[1],e.matrix[2],0,e.matrix[4],e.matrix[5],e.matrix[6],0,e.matrix[8],e.matrix[9],e.matrix[10],0,0,0,0,1];_t.buildFromRadian().setMatrix(S).apply(c)}e.generateFaces?i.getPolys().deepCopy(e._polys):i.getPolys().initialize(),e.generateLines?(i.getLines().deepCopy(e._lineCells),i.getPointData().setNormals(null)):i.getLines().initialize(),i.modified()}t.setBounds=function(){let n=[];if(Array.isArray(arguments.length<=0?void 0:arguments[0]))n=arguments.length<=0?void 0:arguments[0];else for(let r=0;r<arguments.length;r++)n.push(r<0||arguments.length<=r?void 0:arguments[r]);n.length===6&&(t.setXLength(n[1]-n[0]),t.setYLength(n[3]-n[2]),t.setZLength(n[5]-n[4]),t.setCenter([(n[0]+n[1])/2,(n[2]+n[3])/2,(n[4]+n[5])/2]))},t.requestData=a}const _9={xLength:1,yLength:1,zLength:1,pointType:"Float64Array",generate3DTextureCoordinates:!1,generateFaces:!0,generateLines:!1};function B1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_9,a),k.obj(t,e),k.setGet(t,e,["xLength","yLength","zLength","generate3DTextureCoordinates","generateFaces","generateLines"]),k.setGetArray(t,e,["center","rotations"],3),k.setGetArray(t,e,["matrix"],16),e._polys=Ln.newInstance({values:Uint16Array.from(T9)}),e._lineCells=Ln.newInstance({values:Uint16Array.from(C9)}),k.moveToProtected(t,e,["polys","lineCells"]),k.algo(t,e,0,1),w9(t,e)}var E9={newInstance:k.newInstance(B1,"vtkCubeSource"),extend:B1};const{vtkErrorMacro:U1}=k;function D9(t,e){e.classHierarchy.push("vtkImageDataOutlineFilter");const a={...t};t.requestData=(n,r)=>{const i=n[0];if(!i||!i.isA("vtkImageData")){U1("Invalid or missing input");return}const s=i.getSpatialExtent();if(!s){U1("Unable to fetch spatial extents of input image.");return}e._cubeSource.setBounds(s),e._cubeSource.setMatrix(i.getIndexToWorld()),r[0]=e._cubeSource.getOutputData()},t.getMTime=()=>Math.max(a.getMTime(),e._cubeSource.getMTime()),t.setGenerateFaces=e._cubeSource.setGenerateFaces,t.setGenerateLines=e._cubeSource.setGenerateLines,t.getGenerateFaces=e._cubeSource.getGenerateFaces,t.getGenerateLines=e._cubeSource.getGenerateLines}const b9={};function G1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,b9,a),k.obj(t,e),k.algo(t,e,1,1),e._cubeSource=E9.newInstance(),k.moveToProtected(t,e,["cubeSource","tmpOut"]),D9(t,e)}var O9={newInstance:k.newInstance(G1,"vtkImageDataOutlineFilter"),extend:G1};let m0;function N9(t,e){e.classHierarchy.push("vtkAbstractTransform","vtkHomogeneousTransform","vtkTransform"),t.transformPoint=(a,n)=>(Te(n,a,e.matrix),n),t.transformPoints=(a,n)=>{const r=new Float64Array(3),i=new Float64Array(3);for(let s=0;s<a.length;s+=3)r[0]=a[s],r[1]=a[s+1],r[2]=a[s+2],Te(i,r,e.matrix),n[s]=i[0],n[s+1]=i[1],n[s+2]=i[2];return n},t.preMultiply=()=>{t.setPreMultiplyFlag(!0)},t.postMultiply=()=>{t.setPreMultiplyFlag(!1)},t.transformMatrix=(a,n)=>(e.preMultiplyFlag?Ge(n,e.matrix,a):Ge(n,a,e.matrix),n),t.transformMatrices=(a,n)=>{const r=new Float64Array(16),i=new Float64Array(16),s=e.preMultiplyFlag?()=>Ge(i,e.matrix,r):()=>Ge(i,r,e.matrix);for(let u=0;u<a.length;u+=16){for(let c=0;c<16;++c)r[c]=a[u+c];s();for(let c=0;c<16;++c)n[u+c]=i[c]}return n},t.getInverse=()=>m0({matrix:Ea.invertMatrix(Array.from(e.matrix),[],4),preMultiplyFlag:e.preMultiplyFlag})}const M9={preMultiplyFlag:!1,matrix:[...Ss]};function I1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,M9,a),k.obj(t,e),k.setGet(t,e,["preMultiplyFlag"]),k.setGetArray(t,e,["matrix"],16),N9(t,e)}m0=k.newInstance(I1,"vtkTransform");var R9={newInstance:m0,extend:I1},L9=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

// all variables that represent positions or directions have a suffix
// indicating the coordinate system they are in. The possible values are
// MC - Model coordinates
// WC - World coordinates
// VC - View coordinates
// DC - Display coordinates
// TC - Texture coordinates

// frag position in VC
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// camera and actor matrix values
//VTK::Camera::Dec

void main()
{
  //VTK::PositionVC::Impl

  //VTK::TCoord::Impl

  //VTK::Picking::Impl
}
`,k9=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkImageResliceMapperFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the gpu image mapper fragment shader

// VC position of this fragment
//VTK::PositionVC::Dec

// Texture coordinates
//VTK::TCoord::Dec

// picking support
//VTK::Picking::Dec

// handle coincident offsets
//VTK::Coincident::Dec

//VTK::ZBuffer::Dec

// the output of this shader
//VTK::Output::Dec

void main()
{
  // VC position of this fragment. This should not branch/return/discard.
  //VTK::PositionVC::Impl

  // Place any calls that require uniform flow (e.g. dFdx) here.
  //VTK::UniformFlow::Impl

  // Set gl_FragDepth here (gl_FragCoord.z by default)
  //VTK::Depth::Impl

  // Early depth peeling abort:
  //VTK::DepthPeeling::PreColor

  //VTK::TCoord::Impl

  if (gl_FragData[0].a <= 0.0)
    {
    discard;
    }

  //VTK::DepthPeeling::Impl

  //VTK::Picking::Impl

  // handle coincident offsets
  //VTK::Coincident::Impl

  //VTK::ZBuffer::Impl

  //VTK::RenderPassFragmentShader::Impl
}
`;const Pr={NEAREST:0,LINEAR:1};var F9={InterpolationType:Pr};const{vtkErrorMacro:hr}=wt;function P1(t,e,a){if(e){const n=t.getIndependentComponents();return`${e.getMTime()}-${n}-${a}`}return"0"}function z1(t,e,a){return e.identity(a),t.reduce((n,r,i)=>i===0?r?e.copy(n,r):e.identity(n):r?e.multiply(n,n,r):n,a)}function A9(t,e){e.classHierarchy.push("vtkOpenGLImageResliceMapper"),t.buildPass=n=>{if(n){e.currentRenderPass=null,e._openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const r=e._openGLRenderer.getRenderable();e._openGLCamera=e._openGLRenderer.getViewNodeFor(r.getActiveCamera()),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow)}},t.translucentPass=(n,r)=>{n&&(e.currentRenderPass=r,t.render())},t.zBufferPass=n=>{n&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=n=>t.zBufferPass(n),t.opaquePass=n=>{n&&t.render()},t.getCoincidentParameters=(n,r)=>e.renderable.getResolveCoincidentTopology()?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const n=e._openGLImageSlice.getRenderable(),r=e._openGLRenderer.getRenderable();t.renderPiece(r,n)},t.renderPiece=(n,r)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getInputData(),!e.currentInput){hr("No input!");return}t.updateResliceGeometry(),t.renderPieceStart(n,r),t.renderPieceDraw(n,r),t.renderPieceFinish(n,r),t.invokeEvent({type:"EndEvent"})},t.renderPieceStart=(n,r)=>{t.updateBufferObjects(n,r),r.getProperty().getInterpolationType()===Pr.NEAREST?(e.openGLTexture.setMinificationFilter(ye.NEAREST),e.openGLTexture.setMagnificationFilter(ye.NEAREST),e.colorTexture.setMinificationFilter(ye.NEAREST),e.colorTexture.setMagnificationFilter(ye.NEAREST),e.pwfTexture.setMinificationFilter(ye.NEAREST),e.pwfTexture.setMagnificationFilter(ye.NEAREST)):(e.openGLTexture.setMinificationFilter(ye.LINEAR),e.openGLTexture.setMagnificationFilter(ye.LINEAR),e.colorTexture.setMinificationFilter(ye.LINEAR),e.colorTexture.setMagnificationFilter(ye.LINEAR),e.pwfTexture.setMinificationFilter(ye.LINEAR),e.pwfTexture.setMagnificationFilter(ye.LINEAR)),e.lastBoundBO=null},t.renderPieceDraw=(n,r)=>{const i=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),t.updateShaders(e.tris,n,r),i.drawArrays(i.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(n,r)=>{},t.updateBufferObjects=(n,r)=>{t.getNeedToRebuildBufferObjects(n,r)&&t.buildBufferObjects(n,r)},t.getNeedToRebuildBufferObjects=(n,r)=>e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<r.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<r.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime()||e.VBOBuildTime.getMTime()<e.resliceGeom.getMTime(),t.buildBufferObjects=(n,r)=>{var T;const i=e.currentInput;if(!i)return;const s=(T=i.getPointData())==null?void 0:T.getScalars();if(!s)return;e._scalars!==s&&(e._openGLRenderWindow.releaseGraphicsResourcesForObject(e._scalars),e._scalars=s);const u=s.getNumberOfComponents();let c=`${i.getMTime()}A${s.getMTime()}`;const o=e._openGLRenderWindow.getGraphicsResourceForObject(s);if(!(o!=null&&o.vtkObj)||(o==null?void 0:o.hash)!==c||e.openGLTextureString!==c){e.openGLTexture||(e.openGLTexture=Me.newInstance(),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow));const w=i.getDimensions();e.openGLTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.openGLTexture.releaseGraphicsResources(e._openGLRenderWindow),e.openGLTexture.resetFormatAndType(),e.openGLTexture.create3DFilterableFromDataArray(w[0],w[1],w[2],s),e.openGLTextureString=c,s&&e._openGLRenderWindow.setGraphicsResourceForObject(s,e.openGLTexture,e.openGLTextureString)}else e.openGLTexture=o.vtkObj,e.openGLTextureString=o.hash;const l=r.getProperty(),h=l.getIndependentComponents(),p=h?u:1,d=h?2*p:1,y=l.getRGBTransferFunction();c=P1(l,y,p);const m=e._openGLRenderWindow.getGraphicsResourceForObject(y);if(!(m!=null&&m.vtkObj)||(m==null?void 0:m.hash)!==c||e.colorTextureString!==c){const _=1024*d*3,E=new Uint8Array(_);if(e.colorTexture||(e.colorTexture=Me.newInstance(),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow)),y){const D=new Float32Array(3072);for(let b=0;b<p;b++){const N=l.getRGBTransferFunction(b),R=N.getRange();if(N.getTable(R[0],R[1],1024,D,1),h)for(let M=0;M<1024*3;M++)E[b*1024*6+M]=255*D[M],E[b*1024*6+M+1024*3]=255*D[M];else for(let M=0;M<1024*3;M++)E[b*1024*6+M]=255*D[M]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,d,3,Ne.UNSIGNED_CHAR,E)}else{for(let D=0;D<1024*3;++D)E[D]=255*D/((1024-1)*3),E[D+1]=255*D/((1024-1)*3),E[D+2]=255*D/((1024-1)*3);e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,1,3,Ne.UNSIGNED_CHAR,E)}e.colorTextureString=c,y&&e._openGLRenderWindow.setGraphicsResourceForObject(y,e.colorTexture,e.colorTextureString)}else e.colorTexture=m.vtkObj,e.colorTextureString=m.hash;const v=l.getPiecewiseFunction();c=P1(l,v,p);const g=e._openGLRenderWindow.getGraphicsResourceForObject(v);if(!(g!=null&&g.vtkObj)||(g==null?void 0:g.hash)!==c||e.pwfTextureString!==c){const _=1024*d,E=new Uint8Array(_);if(e.pwfTexture||(e.pwfTexture=Me.newInstance(),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow)),v){const D=new Float32Array(_),b=new Float32Array(1024);for(let N=0;N<p;++N){const R=l.getPiecewiseFunction(N);if(R===null)D.fill(1);else{const M=R.getRange();if(R.getTable(M[0],M[1],1024,b,1),h)for(let A=0;A<1024;A++)D[N*1024*2+A]=b[A],D[N*1024*2+A+1024]=b[A];else for(let A=0;A<1024;A++)D[N*1024*2+A]=b[A]}}e.pwfTexture.releaseGraphicsResources(e._openGLRenderWindow),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,d,1,Ne.FLOAT,D)}else E.fill(255),e.pwfTexture.releaseGraphicsResources(e._openGLRenderWindow),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,1,1,Ne.UNSIGNED_CHAR,E);e.pwfTextureString=c,v&&e._openGLRenderWindow.setGraphicsResourceForObject(v,e.pwfTexture,e.pwfTextureString)}else e.pwfTexture=g.vtkObj,e.pwfTextureString=g.hash;const C=`${e.resliceGeom.getMTime()}A${e.renderable.getSlabThickness()}`;if(!e.tris.getCABO().getElementCount()||e.VBOBuildString!==C){const w=pe.newInstance({numberOfComponents:3,values:e.resliceGeom.getPoints().getData()});w.setName("points");const _=pe.newInstance({numberOfComponents:1,values:e.resliceGeom.getPolys().getData()}),E={points:w,cellOffset:0};if(e.renderable.getSlabThickness()>0){const D=e.resliceGeom.getPointData().getNormals();D?E.normals=D:hr("Slab mode requested without normals")}e.tris.getCABO().createVBO(_,"polys",Kt.SURFACE,E)}e.VBOBuildString=C,e.VBOBuildTime.modified()},t.updateShaders=(n,r,i)=>{if(e.lastBoundBO=n,t.getNeedToRebuildShaders(n,r,i)){const s={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(s,r,i);const u=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(s.Vertex,s.Fragment,s.Geometry);u!==n.getProgram()&&(n.setProgram(u),n.getVAO().releaseGraphicsResources()),n.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(n.getProgram());n.getVAO().bind(),t.setMapperShaderParameters(n,r,i),t.setCameraShaderParameters(n,r,i),t.setPropertyShaderParameters(n,r,i)},t.setMapperShaderParameters=(n,r,i)=>{const s=n.getProgram();if(n.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())){s.isUniformUsed("texture1")&&s.setUniformi("texture1",e.openGLTexture.getTextureUnit()),s.isAttributeUsed("vertexWC")&&(n.getVAO().addAttributeArray(s,n.getCABO(),"vertexWC",n.getCABO().getVertexOffset(),n.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||hr("Error setting vertexWC in shader VAO.")),s.isAttributeUsed("normalWC")&&(n.getVAO().addAttributeArray(s,n.getCABO(),"normalWC",n.getCABO().getNormalOffset(),n.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||hr("Error setting normalWC in shader VAO.")),s.isUniformUsed("slabThickness")&&s.setUniformf("slabThickness",e.renderable.getSlabThickness()),s.isUniformUsed("spacing")&&s.setUniform3fv("spacing",e.currentInput.getSpacing()),s.isUniformUsed("slabType")&&s.setUniformi("slabType",e.renderable.getSlabType()),s.isUniformUsed("slabType")&&s.setUniformi("slabType",e.renderable.getSlabType()),s.isUniformUsed("slabTrapezoid")&&s.setUniformi("slabTrapezoid",e.renderable.getSlabTrapezoidIntegration());const c=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null;if(s.isUniformUsed("WCTCMatrix")){const o=e.currentInput,f=o.getDimensions();dt(e.tmpMat4,o.getIndexToWorld()),Dn(e.tmpMat4,e.tmpMat4,f),Nt(e.tmpMat4,e.tmpMat4),c&&Ge(e.tmpMat4,e.tmpMat4,c),s.setUniformMatrix("WCTCMatrix",e.tmpMat4)}s.isUniformUsed("vboScaling")&&s.setUniform3fv("vboScaling",n.getCABO().getCoordScale()),n.getAttributeUpdateTime().modified()}if(e.haveSeenDepthRequest&&n.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),n.getProgram().isUniformUsed("coffset")){const u=t.getCoincidentParameters(r,i);n.getProgram().setUniformf("coffset",u.offset),n.getProgram().isUniformUsed("cfactor")&&n.getProgram().setUniformf("cfactor",u.factor)}},t.setCameraShaderParameters=(n,r,i)=>{const s=e._openGLCamera.getKeyMatrices(r),u=e._openGLImageSlice.getKeyMatrices(),o=n.getCABO().getCoordShiftAndScaleEnabled()?n.getCABO().getInverseShiftAndScaleMatrix():null,f=n.getProgram();f.isUniformUsed("MCPCMatrix")&&(Se(e.tmpMat4),f.setUniformMatrix("MCPCMatrix",z1([s.wcpc,u.mcwc,o],ra,e.tmpMat4))),f.isUniformUsed("MCVCMatrix")&&(Se(e.tmpMat4),f.setUniformMatrix("MCVCMatrix",z1([s.wcvc,u.mcwc,o],ra,e.tmpMat4)))},t.setPropertyShaderParameters=(n,r,i)=>{const s=n.getProgram(),u=i.getProperty(),c=u.getOpacity();s.setUniformf("opacity",c);const o=e.openGLTexture.getComponents(),f=u.getIndependentComponents();if(f)for(let d=0;d<o;++d)s.setUniformf(`mix${d}`,u.getComponentWeight(d));const l=e.openGLTexture.getVolumeInfo();for(let d=0;d<o;d++){let y=u.getColorWindow(),m=u.getColorLevel();const S=f?d:0,v=u.getRGBTransferFunction(S);if(v&&u.getUseLookupTableScalarRange()){const C=v.getRange();y=C[1]-C[0],m=.5*(C[1]+C[0])}const g=l.scale[d]/y,x=(l.offset[d]-m)/y+.5;s.setUniformf(`cshift${d}`,x),s.setUniformf(`cscale${d}`,g)}const h=e.colorTexture.getTextureUnit();s.setUniformi("colorTexture1",h);for(let d=0;d<o;d++){let y=1,m=0;const S=f?d:0,v=u.getPiecewiseFunction(S);if(v){const g=v.getRange(),x=g[1]-g[0],C=.5*(g[0]+g[1]);y=l.scale[d]/x,m=(l.offset[d]-C)/x+.5}s.setUniformf(`pwfshift${d}`,m),s.setUniformf(`pwfscale${d}`,y)}const p=e.pwfTexture.getTextureUnit();s.setUniformi("pwfTexture1",p),s.setUniform4fv("backgroundColor",e.renderable.getBackgroundColor())},t.getNeedToRebuildShaders=(n,r,i)=>{var h;const s=e.openGLTexture.getComponents(),u=i.getProperty().getIndependentComponents(),c=e.renderable.getSlabThickness(),o=e.renderable.getSlabType(),f=e.renderable.getSlabTrapezoidIntegration();let l=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(l=!0),l||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||((h=n.getProgram())==null?void 0:h.getHandle())===0||e.lastTextureComponents!==s||e.lastIndependentComponents!==u||e.lastSlabThickness!==c||e.lastSlabType!==o||e.lastSlabTrapezoidIntegration!==f?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=s,e.lastIndependentComponents=u,e.lastSlabThickness=c,e.lastSlabType=o,e.lastSlabTrapezoidIntegration=f,!0):!1},t.getShaderTemplate=(n,r,i)=>{n.Vertex=L9,n.Fragment=k9,n.Geometry=""},t.replaceShaderValues=(n,r,i)=>{if(t.replaceShaderTCoord(n,r,i),t.replaceShaderPositionVC(n,r,i),e.haveSeenDepthRequest){let s=n.Fragment;s=J.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=J.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result,n.Fragment=s}t.replaceShaderCoincidentOffset(n,r,i)},t.replaceShaderTCoord=(n,r,i)=>{let s=n.Vertex;const u=n.Geometry;let c=n.Fragment;const o=["uniform mat4 WCTCMatrix;","out vec3 fragTexCoord;"],f=e.renderable.getSlabThickness();s=J.substitute(s,"//VTK::TCoord::Dec",o).result;const l=["fragTexCoord = (WCTCMatrix * vertexWC).xyz;"];s=J.substitute(s,"//VTK::TCoord::Impl",l).result;const h=e.openGLTexture.getComponents(),p=i.getProperty().getIndependentComponents();let d=["in vec3 fragTexCoord;","uniform highp sampler3D texture1;","uniform mat4 WCTCMatrix;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;"];if(p){for(let m=1;m<h;m++)d=d.concat([`uniform float cshift${m};`,`uniform float cscale${m};`,`uniform float pwfshift${m};`,`uniform float pwfscale${m};`]);switch(h){case 1:d=d.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:d=d.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:d=d.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:d=d.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:hr("Unsupported number of independent coordinates.")}}f>0&&(d=d.concat(["uniform vec3 spacing;","uniform float slabThickness;","uniform int slabType;","uniform int slabTrapezoid;","uniform vec3 vboScaling;"]),d=d.concat(["vec4 compositeValue(vec4 currVal, vec4 valToComp, int trapezoid)","{","  vec4 retVal = vec4(1.0);","  if (slabType == 0) // min","  {","    retVal = min(currVal, valToComp);","  }","  else if (slabType == 1) // max","  {","    retVal = max(currVal, valToComp);","  }","  else if (slabType == 3) // sum","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  else // mean","  {","    retVal = currVal + (trapezoid > 0 ? 0.5 * valToComp : valToComp); ","  }","  return retVal;","}"])),c=J.substitute(c,"//VTK::TCoord::Dec",d).result;let y=["if (any(greaterThan(fragTexCoord, vec3(1.0))) || any(lessThan(fragTexCoord, vec3(0.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = texture(texture1, fragTexCoord);"];if(f>0&&(y=y.concat(["// Get the first and last samples","int numSlices = 1;","float scaling = min(min(spacing.x, spacing.y), spacing.z) * 0.5;","vec3 normalxspacing = scaling * normalWCVSOutput;","float distTraveled = length(normalxspacing);","int trapezoid = 0;","while (distTraveled < slabThickness * 0.5)","{","  distTraveled += length(normalxspacing);","  float fnumSlices = float(numSlices);","  if (distTraveled > slabThickness * 0.5)","  {","    // Before stepping outside the slab, sample at the boundaries","    normalxspacing = normalWCVSOutput * slabThickness * 0.5 / fnumSlices;","    trapezoid = slabTrapezoid;","  }","  vec3 fragTCoordNeg = (WCTCMatrix * vec4(vertexWCVSOutput.xyz - fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordNeg);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","  vec3 fragTCoordPos = (WCTCMatrix * vec4(vertexWCVSOutput.xyz + fnumSlices * normalxspacing * vboScaling, 1.0)).xyz;","  if (!any(greaterThan(fragTCoordNeg, vec3(1.0))) && !any(lessThan(fragTCoordNeg, vec3(0.0))))","  {","    vec4 newVal = texture(texture1, fragTCoordPos);","    tvalue = compositeValue(tvalue, newVal, trapezoid);","    numSlices += 1;","  }","}","// Finally, if slab type is *mean*, divide the sum by the numSlices","if (slabType == 2)","{","  tvalue = tvalue / float(numSlices);","}"])),p){const m=["r","g","b","a"];for(let S=0;S<h;++S)y=y.concat([`vec3 tcolor${S} = mix${S} * texture2D(colorTexture1, vec2(tvalue.${m[S]} * cscale${S} + cshift${S}, height${S})).rgb;`,`float compWeight${S} = mix${S} * texture2D(pwfTexture1, vec2(tvalue.${m[S]} * pwfscale${S} + pwfshift${S}, height${S})).r;`]);switch(h){case 1:y=y.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:y=y.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:y=y.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:y=y.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:hr("Unsupported number of independent coordinates.")}}else switch(h){case 1:y=y.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:y=y.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:y=y.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:y=y.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}c=J.substitute(c,"//VTK::TCoord::Impl",y).result,n.Vertex=s,n.Fragment=c,n.Geometry=u},t.replaceShaderPositionVC=(n,r,i)=>{let s=n.Vertex;const u=n.Geometry;let c=n.Fragment;const o=e.renderable.getSlabThickness();let f=["attribute vec4 vertexWC;"];f=f.concat([`//${t.getMTime()}${e.resliceGeomUpdateString}`]),o>0&&(f=f.concat(["attribute vec3 normalWC;","varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),s=J.substitute(s,"//VTK::PositionVC::Dec",f).result;let l=["gl_Position = MCPCMatrix * vertexWC;"];o>0&&(l=l.concat(["normalWCVSOutput = normalWC;","vertexWCVSOutput = vertexWC;"])),s=J.substitute(s,"//VTK::PositionVC::Impl",l).result,s=J.substitute(s,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;","uniform mat4 MCVCMatrix;"]).result;let h=[];o>0&&(h=h.concat(["varying vec3 normalWCVSOutput;","varying vec4 vertexWCVSOutput;"])),c=J.substitute(c,"//VTK::PositionVC::Dec",h).result,n.Vertex=s,n.Geometry=u,n.Fragment=c};function a(n){Ea.normalize(n);const r=[0,0,0];for(let i=0;i<3;++i){Ld(r),r[i]=1;const s=Ea.dot(n,r);if(s<-.999||s>.999)return[!0,i]}return[!1,2]}t.updateResliceGeometry=()=>{var f;let n="";const r=e.currentInput,i=r==null?void 0:r.getBounds();let s=!0,u=2;const c=e.renderable.getSlicePolyData(),o=e.renderable.getSlicePlane();if(c)n=n.concat(`PolyData${c.getMTime()}`);else if(o){n=n.concat(`Plane${o.getMTime()}`),r&&(n=n.concat(`Image${r.getMTime()}`));const l=xu(r==null?void 0:r.getDirection());xr(l,l);const h=[...o.getNormal()];ai(h,h,l),[s,u]=a(h)}else{const l=Mn.newInstance();l.setNormal(0,0,1);let h=[0,1,0,1,0,1];r&&(h=i),l.setOrigin(h[0],h[2],.5*(h[5]+h[4])),e.renderable.setSlicePlane(l),n=n.concat(`Plane${o==null?void 0:o.getMTime()}`),r&&(n=n.concat(`Image${r.getMTime()}`))}if(!e.resliceGeom||e.resliceGeomUpdateString!==n){if(c)e.resliceGeom||(e.resliceGeom=je.newInstance()),e.resliceGeom.getPoints().setData(c.getPoints().getData(),3),e.resliceGeom.getPolys().setData(c.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(c.getPointData().getNormals());else if(o)if(s){const l=new Float32Array(12),h=r.worldToIndex(o.getOrigin(),[0,0,0]),p=[(u+1)%3,(u+2)%3].sort(),d=r.getDimensions(),y=[0,d[0]-1,0,d[1]-1,0,d[2]-1];let m=0;for(let C=0;C<2;++C)for(let T=0;T<2;++T)l[m+u]=h[u],l[m+p[0]]=y[2*p[0]+T],l[m+p[1]]=y[2*p[1]+C],m+=3;e.transform.setMatrix(r.getIndexToWorld()),e.transform.transformPoints(l,l);const S=new Uint16Array(8);S[0]=3,S[1]=0,S[2]=1,S[3]=3,S[4]=3,S[5]=0,S[6]=3,S[7]=2;const v=o.getNormal();Ea.normalize(v);const g=new Float32Array(12);for(let C=0;C<4;++C)g[3*C]=v[0],g[3*C+1]=v[1],g[3*C+2]=v[2];e.resliceGeom||(e.resliceGeom=je.newInstance()),e.resliceGeom.getPoints().setData(l,3),e.resliceGeom.getPolys().setData(S,1);const x=pe.newInstance({numberOfComponents:3,values:g,name:"Normals"});e.resliceGeom.getPointData().setNormals(x)}else{e.outlineFilter.setInputData(r),e.cutter.setInputConnection(e.outlineFilter.getOutputPort()),e.cutter.setCutFunction(o),e.lineToSurfaceFilter.setInputConnection(e.cutter.getOutputPort()),e.lineToSurfaceFilter.update(),e.resliceGeom||(e.resliceGeom=je.newInstance());const l=e.lineToSurfaceFilter.getOutputData();e.resliceGeom.getPoints().setData(l.getPoints().getData(),3),e.resliceGeom.getPolys().setData(l.getPolys().getData(),1),e.resliceGeom.getPointData().setNormals(l.getPointData().getNormals());const h=o.getNormal(),p=e.resliceGeom.getNumberOfPoints();Ea.normalize(h);const d=new Float32Array(p*3);for(let m=0;m<p;++m)d[3*m]=h[0],d[3*m+1]=h[1],d[3*m+2]=h[2];const y=pe.newInstance({numberOfComponents:3,values:d,name:"Normals"});e.resliceGeom.getPointData().setNormals(y)}else hr("Something went wrong.","A default slice plane should have been created in the beginning of","updateResliceGeometry.");e.resliceGeomUpdateString=n,(f=e.resliceGeom)==null||f.modified()}},t.setOpenGLTexture=n=>{n&&(e.openGLTexture=n,e._externalOpenGLTexture=!0)}}const V9={VBOBuildTime:{},VBOBuildString:null,haveSeenDepthRequest:!1,lastHaveSeenDepthRequest:!1,lastIndependentComponents:!1,lastTextureComponents:0,lastSlabThickness:0,lastSlabTrapezoidIntegration:0,lastSlabType:-1,openGLTexture:null,openGLTextureString:null,colorTextureString:null,pwfTextureString:null,resliceGeom:null,resliceGeomUpdateString:null,tris:null,colorTexture:null,pwfTexture:null,_externalOpenGLTexture:!1,_scalars:null};function B9(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,V9,a),vt.extend(t,e,a),Sn.implementReplaceShaderCoincidentOffset(t,e,a),Sn.implementBuildShadersWithReplacements(t,e,a),e.tris=Gt.newInstance(),e.openGLTexture=null,e.colorTexture=null,e.pwfTexture=null,e.VBOBuildTime={},ot(e.VBOBuildTime),e.tmpMat4=Se(new Float64Array(16)),e.outlineFilter=O9.newInstance(),e.outlineFilter.setGenerateFaces(!0),e.outlineFilter.setGenerateLines(!1),e.cubePolyData=je.newInstance(),e.cutter=y9.newInstance(),e.lineToSurfaceFilter=p9.newInstance(),e.transform=R9.newInstance(),Lt(t,e,["openGLTexture"]),A9(t,e)}const U9=Ke(B9,"vtkOpenGLImageResliceMapper");st("vtkImageResliceMapper",U9);var x0={SlicingMode:{NONE:-1,I:0,J:1,K:2,X:3,Y:4,Z:5}};const{vtkErrorMacro:zr}=wt,{SlicingMode:Yt}=x0;function j1(t,e,a){if(e){const n=t.getIndependentComponents();return`${e.getMTime()}-${n}-${a}`}return"0"}function G9(t){const e=t.split(`
`),a=[];for(let n=0;n<e.length;++n){const r=e[n].trim();r.length>0&&a.push(r)}return a}function I9(t,e){e.classHierarchy.push("vtkOpenGLImageMapper"),t.buildPass=a=>{if(a){e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow);const n=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(n.getActiveCamera()),e.renderable.isA("vtkImageMapper")&&e.renderable.getSliceAtFocalPoint()&&e.renderable.setSliceFromCamera(n.getActiveCamera())}},t.translucentPass=(a,n)=>{a&&(e.currentRenderPass=n,t.render())},t.zBufferPass=a=>{a&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.opaqueZBufferPass=a=>t.zBufferPass(a),t.opaquePass=a=>{a&&t.render()},t.getCoincidentParameters=(a,n)=>e.renderable.getResolveCoincidentTopology()?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const a=e.openGLImageSlice.getRenderable(),n=e._openGLRenderer.getRenderable();t.renderPiece(n,a)},t.getShaderTemplate=(a,n,r)=>{a.Vertex=g0,a.Fragment=La,a.Geometry=""},t.replaceShaderValues=(a,n,r)=>{let i=a.Vertex,s=a.Fragment;i=J.substitute(i,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,i=J.substitute(i,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result,i=J.substitute(i,"//VTK::TCoord::Impl","tcoordVCVSOutput = tcoordMC;").result,i=J.substitute(i,"//VTK::TCoord::Dec","attribute vec2 tcoordMC; varying vec2 tcoordVCVSOutput;").result;const u=e.openGLTexture.getComponents(),c=r.getProperty().getIndependentComponents();let o=["varying vec2 tcoordVCVSOutput;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;","uniform sampler2D texture1;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform sampler2D labelOutlineTexture1;","uniform float opacity;","uniform float outlineOpacity;"];if(c){for(let l=1;l<u;l++)o=o.concat([`uniform float cshift${l};`,`uniform float cscale${l};`,`uniform float pwfshift${l};`,`uniform float pwfscale${l};`]);switch(u){case 1:o=o.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:o=o.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:o=o.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:o=o.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:zr("Unsupported number of independent coordinates.")}}if(s=J.substitute(s,"//VTK::TCoord::Dec",o).result,r.getProperty().getUseLabelOutline()===!0&&(s=J.substitute(s,"//VTK::LabelOutline::Dec",["uniform int outlineThickness;","uniform float vpWidth;","uniform float vpHeight;","uniform float vpOffsetX;","uniform float vpOffsetY;","uniform mat4 PCWCMatrix;","uniform mat4 vWCtoIDX;","uniform ivec3 imageDimensions;"]).result,s=J.substitute(s,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result,s=J.substitute(s,"//VTK::LabelOutlineHelperFunction",["#ifdef vtkImageLabelOutlineOn","vec3 fragCoordToIndexSpace(vec4 fragCoord) {","  vec4 pcPos = vec4(","    (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,","    (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,","    (fragCoord.z - 0.5) * 2.0,","    1.0);","","  vec4 worldCoord = PCWCMatrix * pcPos;","  vec4 vertex = (worldCoord/worldCoord.w);","","  vec3 index = (vWCtoIDX * vertex).xyz;","","  // half voxel fix for labelmapOutline","  return (index + vec3(0.5)) / vec3(imageDimensions);","}","#endif"]).result),c){const l=["r","g","b","a"];let h=["vec4 tvalue = texture2D(texture1, tcoordVCVSOutput);"];for(let p=0;p<u;p++)h=h.concat([`vec3 tcolor${p} = mix${p} * texture2D(colorTexture1, vec2(tvalue.${l[p]} * cscale${p} + cshift${p}, height${p})).rgb;`,`float compWeight${p} = mix${p} * texture2D(pwfTexture1, vec2(tvalue.${l[p]} * pwfscale${p} + pwfshift${p}, height${p})).r;`]);switch(u){case 1:h=h.concat(["gl_FragData[0] = vec4(tcolor0.rgb, opacity);"]);break;case 2:h=h.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:h=h.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:zr("Unsupported number of independent coordinates.")}s=J.substitute(s,"//VTK::TCoord::Impl",h).result}else switch(u){case 1:s=J.substitute(s,"//VTK::TCoord::Impl",[...G9(`
                #ifdef vtkImageLabelOutlineOn
                  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); 
                  float centerValue = texture2D(texture1, centerPosIS.xy).r;
                  bool pixelOnBorder = false;
                  vec3 tColor = texture2D(colorTexture1, vec2(centerValue * cscale0 + cshift0, 0.5)).rgb;
                  float scalarOpacity = texture2D(pwfTexture1, vec2(centerValue * pwfscale0 + pwfshift0, 0.5)).r;
                  float opacityToUse = scalarOpacity * opacity;
                  int segmentIndex = int(centerValue * 255.0);
                  float textureCoordinate = float(segmentIndex - 1) / 1024.0;
                  float textureValue = texture2D(labelOutlineTexture1, vec2(textureCoordinate, 0.5)).r;
                  int actualThickness = int(textureValue * 255.0);

                  if (actualThickness == 0) {
                    gl_FragData[0] = vec4(0.0, 0.0, 1.0, 1.0);
                    return;
                  }
                  if (opacityToUse > 0.01) {
                    for (int i = -actualThickness; i <= actualThickness; i++) {
                      for (int j = -actualThickness; j <= actualThickness; j++) {
                        if (i == 0 || j == 0) {
                          continue;
                        }
                        vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),
                          gl_FragCoord.y + float(j),
                          gl_FragCoord.z, gl_FragCoord.w);
                        vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
                        float value = texture2D(texture1, neighborPosIS.xy).r;
                        if (value != centerValue) {
                          pixelOnBorder = true;
                          break;
                        }
                      }
                      if (pixelOnBorder == true) {
                        break;
                      }
                    }
                    if (pixelOnBorder == true) {
                      gl_FragData[0] = vec4(tColor, outlineOpacity);
                    }
                    else {
                      gl_FragData[0] = vec4(tColor, opacityToUse);
                    }
                  }
                #else
                  float intensity = texture2D(texture1, tcoordVCVSOutput).r;
                  vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;
                  float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;
                  gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);
                #endif
                `)]).result;break;case 2:s=J.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = texture2D(texture1, tcoordVCVSOutput);","float intensity = tcolor.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tcolor.g + pwfshift0);"]).result;break;case 3:s=J.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]).result;break;default:s=J.substitute(s,"//VTK::TCoord::Impl",["vec4 tcolor = cscale0*texture2D(texture1, tcoordVCVSOutput.st) + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"]).result}e.haveSeenDepthRequest&&(s=J.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=J.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),a.Vertex=i,a.Fragment=s,t.replaceShaderClip(a,n,r),t.replaceShaderCoincidentOffset(a,n,r)},t.replaceShaderClip=(a,n,r)=>{let i=a.Vertex,s=a.Fragment;if(e.renderable.getNumberOfClippingPlanes()){let u=e.renderable.getNumberOfClippingPlanes();u>6&&(Pe("OpenGL has a limit of 6 clipping planes"),u=6),i=J.substitute(i,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,i=J.substitute(i,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=J.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,s=J.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}a.Vertex=i,a.Fragment=s},t.getNeedToRebuildShaders=(a,n,r)=>{var c;const i=e.openGLTexture.getComponents(),s=r.getProperty().getIndependentComponents();let u=!1;return(!e.currentRenderPass&&e.lastRenderPassShaderReplacement||e.currentRenderPass&&e.currentRenderPass.getShaderReplacement()!==e.lastRenderPassShaderReplacement)&&(u=!0),u||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||((c=a.getProgram())==null?void 0:c.getHandle())===0||e.lastTextureComponents!==i||e.lastIndependentComponents!==s?(e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=i,e.lastIndependentComponents=s,!0):!1},t.updateShaders=(a,n,r)=>{if(e.lastBoundBO=a,t.getNeedToRebuildShaders(a,n,r)){const i={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(i,n,r);const s=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);s!==a.getProgram()&&(a.setProgram(s),a.getVAO().releaseGraphicsResources()),a.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(a.getProgram());a.getVAO().bind(),t.setMapperShaderParameters(a,n,r),t.setCameraShaderParameters(a,n,r),t.setPropertyShaderParameters(a,n,r)},t.setMapperShaderParameters=(a,n,r)=>{a.getCABO().getElementCount()&&(e.VBOBuildTime>a.getAttributeUpdateTime().getMTime()||a.getShaderSourceTime().getMTime()>a.getAttributeUpdateTime().getMTime())&&(a.getProgram().isAttributeUsed("vertexMC")&&(a.getVAO().addAttributeArray(a.getProgram(),a.getCABO(),"vertexMC",a.getCABO().getVertexOffset(),a.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||zr("Error setting vertexMC in shader VAO.")),a.getProgram().isAttributeUsed("tcoordMC")&&a.getCABO().getTCoordOffset()&&(a.getVAO().addAttributeArray(a.getProgram(),a.getCABO(),"tcoordMC",a.getCABO().getTCoordOffset(),a.getCABO().getStride(),e.context.FLOAT,a.getCABO().getTCoordComponents(),e.context.FALSE)||zr("Error setting tcoordMC in shader VAO.")),a.getAttributeUpdateTime().modified());const i=e.openGLTexture.getTextureUnit();a.getProgram().setUniformi("texture1",i);const s=e.openGLTexture.getComponents(),u=r.getProperty().getIndependentComponents();if(u)for(let p=0;p<s;p++)a.getProgram().setUniformf(`mix${p}`,r.getProperty().getComponentWeight(p));const c=e.openGLTexture.getShiftAndScale();for(let p=0;p<s;p++){let d=r.getProperty().getColorWindow(),y=r.getProperty().getColorLevel();const m=u?p:0,S=r.getProperty().getRGBTransferFunction(m);if(S&&r.getProperty().getUseLookupTableScalarRange()){const x=S.getRange();d=x[1]-x[0],y=.5*(x[1]+x[0])}const v=c.scale/d,g=(c.shift-y)/d+.5;a.getProgram().setUniformf(`cshift${p}`,g),a.getProgram().setUniformf(`cscale${p}`,v)}for(let p=0;p<s;p++){let d=1,y=0;const m=u?p:0,S=r.getProperty().getPiecewiseFunction(m);if(S){const v=S.getRange(),g=v[1]-v[0],x=.5*(v[0]+v[1]);d=c.scale/g,y=(c.shift-x)/g+.5}a.getProgram().setUniformf(`pwfshift${p}`,y),a.getProgram().setUniformf(`pwfscale${p}`,d)}if(e.haveSeenDepthRequest&&a.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),a.getProgram().isUniformUsed("coffset")){const p=t.getCoincidentParameters(n,r);a.getProgram().setUniformf("coffset",p.offset),a.getProgram().isUniformUsed("cfactor")&&a.getProgram().setUniformf("cfactor",p.factor)}const o=e.colorTexture.getTextureUnit();a.getProgram().setUniformi("colorTexture1",o);const f=e.pwfTexture.getTextureUnit();a.getProgram().setUniformi("pwfTexture1",f);const l=e.labelOutlineThicknessTexture.getTextureUnit();if(a.getProgram().setUniformi("labelOutlineTexture1",l),e.renderable.getNumberOfClippingPlanes()){let p=e.renderable.getNumberOfClippingPlanes();p>6&&(Pe("OpenGL has a limit of 6 clipping planes"),p=6);const y=a.getCABO().getCoordShiftAndScaleEnabled()?a.getCABO().getInverseShiftAndScaleMatrix():null,m=y?dt(e.imagematinv,r.getMatrix()):r.getMatrix();y&&(ze(m,m),Ge(m,m,y),ze(m,m)),ze(e.imagemat,e.currentInput.getIndexToWorld()),Ge(e.imagematinv,m,e.imagemat);const S=[];for(let v=0;v<p;v++){const g=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,v,g);for(let x=0;x<4;x++)S.push(g[x])}a.getProgram().setUniformi("numClipPlanes",p),a.getProgram().setUniform4fv("clipPlanes",S)}if(r.getProperty().getUseLabelOutline()===!0){const p=r.getProperty().getLabelOutlineOpacity();a.getProgram().setUniformf("outlineOpacity",p)}},t.setCameraShaderParameters=(a,n,r)=>{const i=a.getProgram(),s=e.openGLImageSlice.getKeyMatrices(),u=e.currentInput,c=u.getIndexToWorld();Ge(e.imagemat,s.mcwc,c);const o=e.openGLCamera.getKeyMatrices(n);if(Ge(e.imagemat,o.wcpc,e.imagemat),a.getCABO().getCoordShiftAndScaleEnabled()){const l=a.getCABO().getInverseShiftAndScaleMatrix();Ge(e.imagemat,e.imagemat,l)}if(i.setUniformMatrix("MCPCMatrix",e.imagemat),r.getProperty().getUseLabelOutline()===!0){const l=u.getWorldToIndex(),h=u.getDimensions();i.setUniform3i("imageDimensions",h[0],h[1],1),i.setUniformMatrix("vWCtoIDX",l);const p=e.openGLCamera.getKeyMatrices(n);Nt(e.projectionToWorld,p.wcpc),e.openGLCamera.getKeyMatrices(n),i.setUniformMatrix("PCWCMatrix",e.projectionToWorld);const d=t.getRenderTargetSize();i.setUniformf("vpWidth",d[0]),i.setUniformf("vpHeight",d[1]);const y=t.getRenderTargetOffset();i.setUniformf("vpOffsetX",y[0]/d[0]),i.setUniformf("vpOffsetY",y[1]/d[1])}},t.setPropertyShaderParameters=(a,n,r)=>{const i=a.getProgram(),u=r.getProperty().getOpacity();i.setUniformf("opacity",u)},t.renderPieceStart=(a,n)=>{t.updateBufferObjects(a,n),e.lastBoundBO=null},t.renderPieceDraw=(a,n)=>{const r=e.context;e.openGLTexture.activate(),e.colorTexture.activate(),e.labelOutlineThicknessTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,a,n),r.drawArrays(r.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.openGLTexture.deactivate(),e.colorTexture.deactivate(),e.labelOutlineThicknessTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(a,n)=>{},t.renderPiece=(a,n)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getCurrentImage(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){zr("No input!");return}t.renderPieceStart(a,n),t.renderPieceDraw(a,n),t.renderPieceFinish(a,n)},t.computeBounds=(a,n)=>{if(!t.getInput()){Fr(e.bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(a,n)=>{t.getNeedToRebuildBufferObjects(a,n)&&t.buildBufferObjects(a,n)},t.getNeedToRebuildBufferObjects=(a,n)=>e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<n.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<n.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime(),t.buildBufferObjects=(a,n)=>{var b,N;const r=e.currentInput;if(!r)return;const i=r.getPointData()&&r.getPointData().getScalars();if(!i)return;const s=i.getDataType(),u=i.getNumberOfComponents(),c=n.getProperty(),o=c.getInterpolationType(),f=c.getIndependentComponents(),l=f?u:1,h=f?2*l:1,p=c.getRGBTransferFunction(),d=j1(c,p,l),y=e._openGLRenderWindow.getGraphicsResourceForObject(p);if(!(y!=null&&y.vtkObj)||(y==null?void 0:y.hash)!==d||e.colorTextureString!==d){const M=1024*h*3,A=new Uint8Array(M);if(e.colorTexture||(e.colorTexture=Me.newInstance({resizable:!0}),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow)),o===Pr.NEAREST?(e.colorTexture.setMinificationFilter(ye.NEAREST),e.colorTexture.setMagnificationFilter(ye.NEAREST)):(e.colorTexture.setMinificationFilter(ye.LINEAR),e.colorTexture.setMagnificationFilter(ye.LINEAR)),p){const I=new Float32Array(3072);for(let $=0;$<l;$++){const U=c.getRGBTransferFunction($),B=U.getRange();if(U.getTable(B[0],B[1],1024,I,1),f)for(let F=0;F<1024*3;F++)A[$*1024*6+F]=255*I[F],A[$*1024*6+F+1024*3]=255*I[F];else for(let F=0;F<1024*3;F++)A[$*1024*6+F]=255*I[F]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,h,3,Ne.UNSIGNED_CHAR,A)}else{for(let I=0;I<1024*3;++I)A[I]=255*I/((1024-1)*3),A[I+1]=255*I/((1024-1)*3),A[I+2]=255*I/((1024-1)*3);e.colorTexture.create2DFromRaw(1024,1,3,Ne.UNSIGNED_CHAR,A)}e.colorTextureString=d,p&&e._openGLRenderWindow.setGraphicsResourceForObject(p,e.colorTexture,e.colorTextureString)}else e.colorTexture=y.vtkObj,e.colorTextureString=y.hash;const S=c.getPiecewiseFunction(),v=j1(c,S,l),g=e._openGLRenderWindow.getGraphicsResourceForObject(S);if(!(g!=null&&g.vtkObj)||(g==null?void 0:g.hash)!==v||e.pwfTextureString!==v){const M=1024*h,A=new Uint8Array(M);if(e.pwfTexture||(e.pwfTexture=Me.newInstance({resizable:!0}),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow)),o===Pr.NEAREST?(e.pwfTexture.setMinificationFilter(ye.NEAREST),e.pwfTexture.setMagnificationFilter(ye.NEAREST)):(e.pwfTexture.setMinificationFilter(ye.LINEAR),e.pwfTexture.setMagnificationFilter(ye.LINEAR)),S){const I=new Float32Array(M),$=new Float32Array(1024);for(let U=0;U<l;++U){const B=c.getPiecewiseFunction(U);if(B===null)I.fill(1);else{const F=B.getRange();if(B.getTable(F[0],F[1],1024,$,1),f)for(let z=0;z<1024;z++)I[U*1024*2+z]=$[z],I[U*1024*2+z+1024]=$[z];else for(let z=0;z<1024;z++)I[U*1024*2+z]=$[z]}}e.pwfTexture.releaseGraphicsResources(e._openGLRenderWindow),e.pwfTexture.resetFormatAndType(),e.pwfTexture.create2DFromRaw(1024,h,1,Ne.FLOAT,I)}else A.fill(255),e.pwfTexture.create2DFromRaw(1024,1,1,Ne.UNSIGNED_CHAR,A);e.pwfTextureString=v,S&&e._openGLRenderWindow.setGraphicsResourceForObject(S,e.pwfTexture,e.pwfTextureString)}else e.pwfTexture=g.vtkObj,e.pwfTextureString=g.hash;t.updatelabelOutlineThicknessTexture(n);const{ijkMode:C}=e.renderable.getClosestIJKAxis();let T=e.renderable.getSlice();C!==e.renderable.getSlicingMode()&&(T=e.renderable.getSliceAtPosition(T));const w=e.renderable.isA("vtkImageArrayMapper")?e.renderable.getSubSlice():Math.round(T),_=r.getExtent();let E;C===Yt.I&&(E=w-_[0]),C===Yt.J&&(E=w-_[2]),(C===Yt.K||C===Yt.NONE)&&(E=w-_[4]);const D=`${T}A${r.getMTime()}A${i.getMTime()}B${t.getMTime()}C${e.renderable.getSlicingMode()}D${n.getProperty().getInterpolationType()}`;if(e.VBOBuildString!==D){const R=r.getDimensions();e.openGLTexture||(e.openGLTexture=Me.newInstance({resizable:!0}),e.openGLTexture.setOpenGLRenderWindow(e._openGLRenderWindow)),o===Pr.NEAREST?(new Set([1,3,4]).has(u)&&s===Ne.UNSIGNED_CHAR&&!f&&e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(ye.NEAREST),e.openGLTexture.setMagnificationFilter(ye.NEAREST)):(u===4&&s===Ne.UNSIGNED_CHAR&&!f?(e.openGLTexture.setGenerateMipmap(!0),e.openGLTexture.setMinificationFilter(ye.LINEAR_MIPMAP_LINEAR)):e.openGLTexture.setMinificationFilter(ye.LINEAR),e.openGLTexture.setMagnificationFilter(ye.LINEAR)),e.openGLTexture.setWrapS(Ra.CLAMP_TO_EDGE),e.openGLTexture.setWrapT(Ra.CLAMP_TO_EDGE);const M=R[0]*R[1]*u,A=new Float32Array(12),I=new Float32Array(8);for(let ee=0;ee<4;ee++)I[ee*2]=ee%2?1:0,I[ee*2+1]=ee>1?1:0;const $=[Yt.X,Yt.Y,Yt.Z].includes(e.renderable.getSlicingMode())?T:w,U=r.getSpatialExtent(),B=i.getData();let F=null;if(C===Yt.I){F=new B.constructor(R[2]*R[1]*u);let ee=0;for(let re=0;re<R[2];re++)for(let ie=0;ie<R[1];ie++){let te=(E+ie*R[0]+re*R[0]*R[1])*u;ee=(re*R[1]+ie)*u;const L=te+u;for(;te<L;)F[ee++]=B[te++]}R[0]=R[1],R[1]=R[2],A[0]=$,A[1]=U[2],A[2]=U[4],A[3]=$,A[4]=U[3],A[5]=U[4],A[6]=$,A[7]=U[2],A[8]=U[5],A[9]=$,A[10]=U[3],A[11]=U[5]}else if(C===Yt.J){F=new B.constructor(R[2]*R[0]*u);let ee=0;for(let re=0;re<R[2];re++)for(let ie=0;ie<R[0];ie++){let te=(ie+E*R[0]+re*R[0]*R[1])*u;ee=(re*R[0]+ie)*u;const L=te+u;for(;te<L;)F[ee++]=B[te++]}R[1]=R[2],A[0]=U[0],A[1]=$,A[2]=U[4],A[3]=U[1],A[4]=$,A[5]=U[4],A[6]=U[0],A[7]=$,A[8]=U[5],A[9]=U[1],A[10]=$,A[11]=U[5]}else C===Yt.K||C===Yt.NONE?(F=B.subarray(E*M,(E+1)*M),A[0]=U[0],A[1]=U[2],A[2]=$,A[3]=U[1],A[4]=U[2],A[5]=$,A[6]=U[0],A[7]=U[3],A[8]=$,A[9]=U[1],A[10]=U[3],A[11]=$):zr("Reformat slicing not yet supported.");const z=e._openGLRenderWindow.getGraphicsResourceForObject(F);z!=null&&z.vtkObj?(e.openGLTexture=z.vtkObj,e.VBOBuildString=z.hash):(e._scalars!==F&&(e._openGLRenderWindow.releaseGraphicsResourcesForObject(e._scalars),e._scalars=F),e.openGLTexture.resetFormatAndType(),e.openGLTexture.create2DFilterableFromRaw(R[0],R[1],u,i.getDataType(),F,(N=(b=e.renderable).getPreferSizeOverAccuracy)==null?void 0:N.call(b)),e._openGLRenderWindow.setGraphicsResourceForObject(F,e.openGLTexture,e.VBOBuildString)),e.openGLTexture.activate(),e.openGLTexture.sendParameters(),e.openGLTexture.deactivate();const H=pe.newInstance({numberOfComponents:3,values:A});H.setName("points");const X=pe.newInstance({numberOfComponents:2,values:I});X.setName("tcoords");const Y=new Uint16Array(8);Y[0]=3,Y[1]=0,Y[2]=1,Y[3]=3,Y[4]=3,Y[5]=0,Y[6]=3,Y[7]=2;const q=pe.newInstance({numberOfComponents:1,values:Y});e.tris.getCABO().createVBO(q,"polys",Kt.SURFACE,{points:H,tcoords:X,cellOffset:0}),e.VBOBuildTime.modified(),e.VBOBuildString=D}},t.updatelabelOutlineThicknessTexture=a=>{e.labelOutlineThicknessTexture||(e.labelOutlineThicknessTexture=Me.newInstance({resizable:!1}),e.labelOutlineThicknessTexture.setOpenGLRenderWindow(e._openGLRenderWindow));const n=a.getProperty().getLabelOutlineThickness(),r=e._openGLRenderWindow.getGraphicsResourceForObject(n),i=`${n.join("-")}`;if(!(r!=null&&r.vtkObj)||(r==null?void 0:r.hash)!==i||e.labelOutlineThicknessTextureString!==i){const f=new Uint8Array(1024);for(let l=0;l<1024;++l){const h=n[l]||n[0];f[l]=h}e.labelOutlineThicknessTexture.releaseGraphicsResources(e._openGLRenderWindow),e.labelOutlineThicknessTexture.resetFormatAndType(),e.labelOutlineThicknessTexture.setMinificationFilter(ye.NEAREST),e.labelOutlineThicknessTexture.setMagnificationFilter(ye.NEAREST),e.labelOutlineThicknessTexture.create2DFromRaw(1024,1,1,Ne.UNSIGNED_CHAR,f),e.labelOutlineThicknessTextureString=i,n&&e._openGLRenderWindow.setGraphicsResourceForObject(n,e.labelOutlineThicknessTexture,e.labelOutlineThicknessTextureString)}else e.labelOutlineThicknessTexture=r.vtkObj,e.labelOutlineThicknessTextureString=r.hash},t.getRenderTargetSize=()=>{if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];const{usize:a,vsize:n}=e._openGLRenderer.getTiledSizeAndOrigin();return[a,n]},t.getRenderTargetOffset=()=>{const{lowerLeftU:a,lowerLeftV:n}=e._openGLRenderer.getTiledSizeAndOrigin();return[a,n]}}const P9={VBOBuildTime:0,VBOBuildString:null,openGLTexture:null,tris:null,imagemat:null,imagematinv:null,colorTexture:null,pwfTexture:null,labelOutlineThicknessTexture:null,labelOutlineThicknessTextureString:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0,_scalars:null};function z9(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,P9,a),vt.extend(t,e,a),Sn.implementReplaceShaderCoincidentOffset(t,e,a),Sn.implementBuildShadersWithReplacements(t,e,a),e.tris=Gt.newInstance(),e.imagemat=Se(new Float64Array(16)),e.imagematinv=Se(new Float64Array(16)),e.projectionToWorld=Se(new Float64Array(16)),e.idxToView=Se(new Float64Array(16)),e.idxNormalMatrix=zt(new Float64Array(9)),e.modelToView=Se(new Float64Array(16)),e.projectionToView=Se(new Float64Array(16)),lt(t,e,[]),e.VBOBuildTime={},ot(e.VBOBuildTime),I9(t,e)}const j9=Ke(z9,"vtkOpenGLImageMapper");st("vtkAbstractImageMapper",j9);const{vtkErrorMacro:ao}=k;function W1(t,e,a){if(e.apply(t)){const r=t.getIndependentComponents();return`${t.getMTime()}-${r}-${a}`}return"0"}function W9(t,e){e.classHierarchy.push("vtkOpenGLImageCPRMapper"),t.buildPass=a=>{a&&(e.currentRenderPass=null,e.openGLImageSlice=t.getFirstAncestorOfType("vtkOpenGLImageSlice"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent(),e.context=e._openGLRenderWindow.getContext(),e.openGLCamera=e._openGLRenderer.getViewNodeFor(e._openGLRenderer.getRenderable().getActiveCamera()),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.volumeTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.pwfTexture.setOpenGLRenderWindow(e._openGLRenderWindow))},t.opaquePass=(a,n)=>{a&&(e.currentRenderPass=n,t.render())},t.opaqueZBufferPass=a=>{a&&(e.haveSeenDepthRequest=!0,e.renderDepth=!0,t.render(),e.renderDepth=!1)},t.getCoincidentParameters=(a,n)=>e.renderable.getResolveCoincidentTopology()?e.renderable.getCoincidentTopologyPolygonOffsetParameters():null,t.render=()=>{const a=e.openGLImageSlice.getRenderable(),n=e._openGLRenderer.getRenderable();t.renderPiece(n,a)},t.renderPiece=(a,n)=>{t.invokeEvent({type:"StartEvent"}),e.renderable.update(),t.invokeEvent({type:"EndEvent"}),e.renderable.preRenderCheck()&&(e.currentImageDataInput=e.renderable.getInputData(0),e.currentCenterlineInput=e.renderable.getOrientedCenterline(),t.renderPieceStart(a,n),t.renderPieceDraw(a,n),t.renderPieceFinish(a,n))},t.renderPieceStart=(a,n)=>{t.updateBufferObjects(a,n)},t.renderPieceDraw=(a,n)=>{const r=e.context;e.volumeTexture.activate(),e.colorTexture.activate(),e.pwfTexture.activate(),e.tris.getCABO().getElementCount()&&(t.updateShaders(e.tris,a,n),r.drawArrays(r.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release()),e.volumeTexture.deactivate(),e.colorTexture.deactivate(),e.pwfTexture.deactivate()},t.renderPieceFinish=(a,n)=>{},t.updateBufferObjects=(a,n)=>{t.getNeedToRebuildBufferObjects(a,n)&&t.buildBufferObjects(a,n)},t.getNeedToRebuildBufferObjects=(a,n)=>{const r=e.VBOBuildTime.getMTime();return r<t.getMTime()||r<e.renderable.getMTime()||r<n.getMTime()||r<e.currentImageDataInput.getMTime()||r<e.currentCenterlineInput.getMTime()},t.buildBufferObjects=(a,n)=>{const r=e.currentImageDataInput,i=e.currentCenterlineInput;n.getProperty().getInterpolationType()===Pr.NEAREST?(e.volumeTexture.setMinificationFilter(ye.NEAREST),e.volumeTexture.setMagnificationFilter(ye.NEAREST),e.colorTexture.setMinificationFilter(ye.NEAREST),e.colorTexture.setMagnificationFilter(ye.NEAREST),e.pwfTexture.setMinificationFilter(ye.NEAREST),e.pwfTexture.setMagnificationFilter(ye.NEAREST)):(e.volumeTexture.setMinificationFilter(ye.LINEAR),e.volumeTexture.setMagnificationFilter(ye.LINEAR),e.colorTexture.setMinificationFilter(ye.LINEAR),e.colorTexture.setMagnificationFilter(ye.LINEAR),e.pwfTexture.setMinificationFilter(ye.LINEAR),e.pwfTexture.setMagnificationFilter(ye.LINEAR));const u=r.getMTime();if(e.volumeTextureTime!==u){const m=r.getDimensions(),S=r.getPointData().getScalars();if(!S)return;e.volumeTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.volumeTexture.releaseGraphicsResources(e._openGLRenderWindow),e.volumeTexture.resetFormatAndType(),e.volumeTexture.create3DFilterableFromRaw(m[0],m[1],m[2],S.getNumberOfComponents(),S.getDataType(),S.getData(),e.renderable.getPreferSizeOverAccuracy()),e.volumeTextureTime=u}const c=r.getPointData()&&r.getPointData().getScalars();if(!c)return;const o=c.getNumberOfComponents(),f=n.getProperty(),l=f.getIndependentComponents(),h=l?o:1,p=l?2*h:1,d=W1(f,f.getRGBTransferFunction,h);if(e.colorTextureString!==d){const S=1024*p*3,v=new Uint8Array(S);let g=f.getRGBTransferFunction();if(g){const x=new Float32Array(3072);for(let C=0;C<h;C++){g=f.getRGBTransferFunction(C);const T=g.getRange();if(g.getTable(T[0],T[1],1024,x,1),l)for(let w=0;w<1024*3;w++)v[C*1024*6+w]=255*x[w],v[C*1024*6+w+1024*3]=255*x[w];else for(let w=0;w<1024*3;w++)v[C*1024*6+w]=255*x[w]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.create2DFromRaw(1024,p,3,Ne.UNSIGNED_CHAR,v)}else{for(let x=0;x<1024*3;++x)v[x]=255*x/((1024-1)*3),v[x+1]=255*x/((1024-1)*3),v[x+2]=255*x/((1024-1)*3);e.colorTexture.create2DFromRaw(1024,1,3,Ne.UNSIGNED_CHAR,v)}e.colorTextureString=d}const y=W1(f,f.getPiecewiseFunction,h);if(e.pwfTextureString!==y){const S=1024*p,v=new Uint8Array(S);let g=f.getPiecewiseFunction();if(e.pwfTexture.releaseGraphicsResources(e._openGLRenderWindow),e.pwfTexture.resetFormatAndType(),g){const x=new Float32Array(S),C=new Float32Array(1024);for(let T=0;T<h;++T)if(g=f.getPiecewiseFunction(T),g===null)x.fill(1);else{const w=g.getRange();if(g.getTable(w[0],w[1],1024,C,1),l)for(let _=0;_<1024;_++)x[T*1024*2+_]=C[_],x[T*1024*2+_+1024]=C[_];else for(let _=0;_<1024;_++)x[T*1024*2+_]=C[_]}e.pwfTexture.create2DFromRaw(1024,p,1,Ne.FLOAT,x)}else v.fill(255),e.pwfTexture.create2DFromRaw(1024,1,1,Ne.UNSIGNED_CHAR,v);e.pwfTextureString=y}if(e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<i.getMTime()){const m=i.getNumberOfPoints(),S=m<=1?0:m-1,v=i.getDistancesToFirstPoint(),g=e.renderable.getHeight(),x=4*S,C=new Float32Array(3*x),T=e.renderable.getWidth();for(let U=0,B=0;U<S;++U)C.set([0,g-v[U],0],B),B+=3,C.set([T,g-v[U],0],B),B+=3,C.set([T,g-v[U+1],0],B),B+=3,C.set([0,g-v[U+1],0],B),B+=3;const w=pe.newInstance({numberOfComponents:3,values:C});w.setName("points");const _=new Uint16Array(5*S);for(let U=0,B=0,F=0;U<S;++U)_.set([4,F+3,F+2,F+1,F],B),B+=5,F+=4;const E=pe.newInstance({numberOfComponents:1,values:_}),D=i.getPoints(),b=new Float32Array(3*x),N=new Array(3),R=new Array(3);for(let U=0,B=0;U<S;++U)D.getPoint(U,N),D.getPoint(U+1,R),b.set(N,B),B+=3,b.set(N,B),B+=3,b.set(R,B),B+=3,b.set(R,B),B+=3;const M=pe.newInstance({numberOfComponents:3,values:b,name:"centerlinePosition"}),A=new Float32Array(x);for(let U=0,B=0;U<S;++U)A.set([0,1,3,2],B),B+=4;const I=pe.newInstance({numberOfComponents:1,values:A,name:"quadIndex"}),$=[M,I];if(!e.renderable.getUseUniformOrientation()){const U=e.renderable.getCenterlineTangentDirections(),B=new Float32Array(3*x),F=new Float32Array(3*x);for(let X=0,Y=0;X<S;++X){const q=3*X;for(let ee=0;ee<4;++ee)B[Y+0]=U[q+0],B[Y+1]=U[q+1],B[Y+2]=U[q+2],F[Y+0]=U[q+3],F[Y+1]=U[q+4],F[Y+2]=U[q+5],Y+=3}const z=pe.newInstance({numberOfComponents:3,values:B,name:"centerlineTopDirection"}),H=pe.newInstance({numberOfComponents:3,values:F,name:"centerlineBotDirection"});$.push(z,H)}e.tris.getCABO().createVBO(E,"polys",Kt.SURFACE,{points:w,customAttributes:$}),e.VBOBuildTime.modified()}},t.getNeedToRebuildShaders=(a,n,r)=>{const i=e.volumeTexture.getComponents(),s=r.getProperty().getIndependentComponents(),u=!!e.renderable.getCenterPoint(),c=e.renderable.getUseUniformOrientation();return a.getProgram()===0||e.lastUseCenterPoint!==u||e.lastUseUniformOrientation!==c||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||e.lastTextureComponents!==i||e.lastIndependentComponents!==s?(e.lastUseCenterPoint=u,e.lastUseUniformOrientation=c,e.lastHaveSeenDepthRequest=e.haveSeenDepthRequest,e.lastTextureComponents=i,e.lastIndependentComponents=s,!0):!1},t.buildShaders=(a,n,r)=>{t.getShaderTemplate(a,n,r),t.replaceShaderValues(a,n,r)},t.replaceShaderValues=(a,n,r)=>{let i=a.Vertex,s=a.Fragment;i=J.substitute(i,"//VTK::Camera::Dec",["uniform mat4 MCPCMatrix;"]).result,i=J.substitute(i,"//VTK::PositionVC::Impl",["  gl_Position = MCPCMatrix * vertexMC;"]).result;const u=["attribute vec3 centerlinePosition;","attribute float quadIndex;","uniform float width;","out vec2 quadOffsetVSOutput;","out vec3 centerlinePosVSOutput;"],c=e.renderable.getUseUniformOrientation();c?u.push("out vec3 centerlineDirVSOutput;","uniform vec3 centerlineDirection;"):u.push("out vec3 centerlineTopDirVSOutput;","out vec3 centerlineBotDirVSOutput;","out float centerlineAngleVSOutput;","attribute vec3 centerlineTopDirection;","attribute vec3 centerlineBotDirection;"),i=J.substitute(i,"//VTK::Color::Dec",u).result;const o=["quadOffsetVSOutput = vec2(width * (mod(quadIndex, 2.0) == 0.0 ? -0.5 : 0.5), quadIndex > 1.0 ? 0.0 : 1.0);","centerlinePosVSOutput = centerlinePosition;"];c?o.push("centerlineDirVSOutput = centerlineDirection;"):o.push("vec3 sumVec = centerlineTopDirection + centerlineBotDirection;","float sumLen2 = dot(sumVec, sumVec);","float diffLen2 = 4.0 - sumLen2;","if (diffLen2 < 0.001) {","  // vectors are too close to each other, use lerp","  centerlineAngleVSOutput = -1.0; // use negative angle as a flag for lerp","  centerlineTopDirVSOutput = centerlineTopDirection;","  centerlineBotDirVSOutput = centerlineBotDirection;","} else if (sumLen2 == 0.0) {","  // vector are opposite to each other, don't make a choice for the user","  // use slerp without direction, it will display the centerline color on each row of pixel","  centerlineAngleVSOutput = 0.0;","  centerlineTopDirVSOutput = vec3(0.0);","  centerlineBotDirVSOutput = vec3(0.0);","} else {","  // use slerp","  centerlineAngleVSOutput = 2.0 * atan(sqrt(diffLen2/sumLen2));","  float sinAngle = sin(centerlineAngleVSOutput);","  centerlineTopDirVSOutput = centerlineTopDirection / sinAngle;","  centerlineBotDirVSOutput = centerlineBotDirection / sinAngle;","}"),i=J.substitute(i,"//VTK::Color::Impl",o).result;const f=e.volumeTexture.getComponents(),l=r.getProperty().getIndependentComponents();let h=["uniform mat4 MCTCMatrix; // Model coordinates to texture coordinates","in vec2 quadOffsetVSOutput;","in vec3 centerlinePosVSOutput;","uniform highp sampler3D volumeTexture;","uniform sampler2D colorTexture1;","uniform sampler2D pwfTexture1;","uniform float opacity;","uniform vec4 backgroundColor;","uniform float cshift0;","uniform float cscale0;","uniform float pwfshift0;","uniform float pwfscale0;"];c?h.push("in vec3 centerlineDirVSOutput;"):h.push("in vec3 centerlineTopDirVSOutput;","in vec3 centerlineBotDirVSOutput;","in float centerlineAngleVSOutput;");const p=e.renderable.getCenterPoint();if(p&&h.push("uniform vec3 globalCenterPoint;"),l){for(let y=1;y<f;y++)h=h.concat([`uniform float cshift${y};`,`uniform float cscale${y};`,`uniform float pwfshift${y};`,`uniform float pwfscale${y};`]);switch(f){case 1:h=h.concat(["uniform float mix0;","#define height0 0.5"]);break;case 2:h=h.concat(["uniform float mix0;","uniform float mix1;","#define height0 0.25","#define height1 0.75"]);break;case 3:h=h.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","#define height0 0.17","#define height1 0.5","#define height2 0.83"]);break;case 4:h=h.concat(["uniform float mix0;","uniform float mix1;","uniform float mix2;","uniform float mix3;","#define height0 0.125","#define height1 0.375","#define height2 0.625","#define height3 0.875"]);break;default:ao("Unsupported number of independent coordinates.")}}s=J.substitute(s,"//VTK::TCoord::Dec",h).result;let d=[];if(c?d.push("vec3 interpolatedCenterlineDir = centerlineDirVSOutput;"):d.push("vec3 interpolatedCenterlineDir;","if (centerlineAngleVSOutput < 0.0) {","  // Lerp","  interpolatedCenterlineDir = quadOffsetVSOutput.y * centerlineTopDirVSOutput + (1.0 - quadOffsetVSOutput.y) * centerlineBotDirVSOutput;","} else {","  // Slerp","  float topInterpolationAngle = quadOffsetVSOutput.y * centerlineAngleVSOutput;","  float botInterpolationAngle = centerlineAngleVSOutput - topInterpolationAngle;","  interpolatedCenterlineDir = sin(topInterpolationAngle) * centerlineTopDirVSOutput + sin(botInterpolationAngle) * centerlineBotDirVSOutput;","}","// Slerp should give a normalized vector but when sin(angle) is small, rounding error occurs","// Normalize for both lerp and slerp","interpolatedCenterlineDir = normalize(interpolatedCenterlineDir);"),p?d.push("float baseOffset = dot(interpolatedCenterlineDir, globalCenterPoint - centerlinePosVSOutput);","float horizontalOffset = quadOffsetVSOutput.x + baseOffset;"):d.push("float horizontalOffset = quadOffsetVSOutput.x;"),d.push("vec3 volumePosMC = centerlinePosVSOutput + horizontalOffset * interpolatedCenterlineDir;","vec3 volumePosTC = (MCTCMatrix * vec4(volumePosMC, 1.0)).xyz;","if (any(lessThan(volumePosTC, vec3(0.0))) || any(greaterThan(volumePosTC, vec3(1.0))))","{","  // set the background color and exit","  gl_FragData[0] = backgroundColor;","  return;","}","vec4 tvalue = texture(volumeTexture, volumePosTC);"),l){const y=["r","g","b","a"];for(let m=0;m<f;++m)d=d.concat([`vec3 tcolor${m} = mix${m} * texture2D(colorTexture1, vec2(tvalue.${y[m]} * cscale${m} + cshift${m}, height${m})).rgb;`,`float compWeight${m} = mix${m} * texture2D(pwfTexture1, vec2(tvalue.${y[m]} * pwfscale${m} + pwfshift${m}, height${m})).r;`]);switch(f){case 1:d=d.concat(["gl_FragData[0] = vec4(tcolor0.rgb, compWeight0 * opacity);"]);break;case 2:d=d.concat(["float weightSum = compWeight0 + compWeight1;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum))), opacity);"]);break;case 3:d=d.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum))), opacity);"]);break;case 4:d=d.concat(["float weightSum = compWeight0 + compWeight1 + compWeight2 + compWeight3;","gl_FragData[0] = vec4(vec3((tcolor0.rgb * (compWeight0 / weightSum)) + (tcolor1.rgb * (compWeight1 / weightSum)) + (tcolor2.rgb * (compWeight2 / weightSum)) + (tcolor3.rgb * (compWeight3 / weightSum))), opacity);"]);break;default:ao("Unsupported number of independent coordinates.")}}else switch(f){case 1:d=d.concat(["// Dependent components","float intensity = tvalue.r;","vec3 tcolor = texture2D(colorTexture1, vec2(intensity * cscale0 + cshift0, 0.5)).rgb;","float scalarOpacity = texture2D(pwfTexture1, vec2(intensity * pwfscale0 + pwfshift0, 0.5)).r;","gl_FragData[0] = vec4(tcolor, scalarOpacity * opacity);"]);break;case 2:d=d.concat(["float intensity = tvalue.r*cscale0 + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(intensity, 0.5)).rgb, pwfscale0*tvalue.g + pwfshift0);"]);break;case 3:d=d.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, opacity);"]);break;default:d=d.concat(["vec4 tcolor = cscale0*tvalue + cshift0;","gl_FragData[0] = vec4(texture2D(colorTexture1, vec2(tcolor.r,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.g,0.5)).r,","  texture2D(colorTexture1, vec2(tcolor.b,0.5)).r, tcolor.a);"])}s=J.substitute(s,"//VTK::TCoord::Impl",d).result,e.haveSeenDepthRequest&&(s=J.substitute(s,"//VTK::ZBuffer::Dec","uniform int depthRequest;").result,s=J.substitute(s,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float iz = floor(gl_FragCoord.z*65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),a.Vertex=i,a.Fragment=s,t.replaceShaderClip(a,n,r),t.replaceShaderCoincidentOffset(a,n,r)},t.replaceShaderClip=(a,n,r)=>{let i=a.Vertex,s=a.Fragment;if(e.renderable.getNumberOfClippingPlanes()){let u=e.renderable.getNumberOfClippingPlanes();u>6&&(k.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),u=6),i=J.substitute(i,"//VTK::Clip::Dec",["uniform int numClipPlanes;","uniform vec4 clipPlanes[6];","varying float clipDistancesVSOutput[6];"]).result,i=J.substitute(i,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    clipDistancesVSOutput[planeNum] = dot(clipPlanes[planeNum], vertexMC);","    }"]).result,s=J.substitute(s,"//VTK::Clip::Dec",["uniform int numClipPlanes;","varying float clipDistancesVSOutput[6];"]).result,s=J.substitute(s,"//VTK::Clip::Impl",["for (int planeNum = 0; planeNum < 6; planeNum++)","    {","    if (planeNum >= numClipPlanes)","        {","        break;","        }","    if (clipDistancesVSOutput[planeNum] < 0.0) discard;","    }"]).result}a.Vertex=i,a.Fragment=s},t.getShaderTemplate=(a,n,r)=>{a.Vertex=g0,a.Fragment=La,a.Geometry=""},t.setMapperShaderParameters=(a,n,r)=>{a.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>a.getAttributeUpdateTime().getMTime()||a.getShaderSourceTime().getMTime()>a.getAttributeUpdateTime().getMTime())&&(a.getProgram().isAttributeUsed("vertexMC")&&(a.getVAO().addAttributeArray(a.getProgram(),a.getCABO(),"vertexMC",a.getCABO().getVertexOffset(),a.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||ao("Error setting vertexMC in shader VAO.")),a.getCABO().getCustomData().forEach(f=>{f&&a.getProgram().isAttributeUsed(f.name)&&!a.getVAO().addAttributeArray(a.getProgram(),a.getCABO(),f.name,f.offset,a.getCABO().getStride(),e.context.FLOAT,f.components,e.context.FALSE)&&ao(`Error setting ${f.name} in shader VAO.`)}),a.getAttributeUpdateTime().modified());const i=e.volumeTexture.getTextureUnit();if(a.getProgram().setUniformi("volumeTexture",i),a.getProgram().setUniformf("width",e.renderable.getWidth()),a.getProgram().setUniform4f("backgroundColor",...e.renderable.getBackgroundColor()),a.getProgram().isUniformUsed("centerlineDirection")){const f=e.renderable.getUniformDirection();a.getProgram().setUniform3fArray("centerlineDirection",f)}if(a.getProgram().isUniformUsed("globalCenterPoint")){const f=e.renderable.getCenterPoint();a.getProgram().setUniform3fArray("globalCenterPoint",f)}const s=e.currentImageDataInput,u=s.getWorldToIndex(),c=Bo(new Float32Array(16),Au([],s.getDimensions())),o=Lu(c,c,u);if(a.getProgram().setUniformMatrix("MCTCMatrix",o),e.haveSeenDepthRequest&&a.getProgram().setUniformi("depthRequest",e.renderDepth?1:0),e.renderable.getNumberOfClippingPlanes()){let f=e.renderable.getNumberOfClippingPlanes();f>6&&(k.vtkErrorMacro("OpenGL has a limit of 6 clipping planes"),f=6);const h=a.getCABO().getCoordShiftAndScaleEnabled()?a.getCABO().getInverseShiftAndScaleMatrix():null,p=h?dt(e.imagematinv,r.getMatrix()):r.getMatrix();h&&(ze(p,p),Ge(p,p,h),ze(p,p)),ze(e.imagemat,e.currentImageDataInput.getIndexToWorld()),Ge(e.imagematinv,p,e.imagemat);const d=[];for(let y=0;y<f;y++){const m=[];e.renderable.getClippingPlaneInDataCoords(e.imagematinv,y,m);for(let S=0;S<4;S++)d.push(m[S])}a.getProgram().setUniformi("numClipPlanes",f),a.getProgram().setUniform4fv("clipPlanes",d)}if(a.getProgram().isUniformUsed("coffset")){const f=t.getCoincidentParameters(n,r);a.getProgram().setUniformf("coffset",f.offset),a.getProgram().isUniformUsed("cfactor")&&a.getProgram().setUniformf("cfactor",f.factor)}},t.setCameraShaderParameters=(a,n,r)=>{const i=e.openGLImageSlice.getKeyMatrices().mcwc,s=e.openGLCamera.getKeyMatrices(n).wcpc;if(Ge(e.imagemat,s,i),a.getCABO().getCoordShiftAndScaleEnabled()){const u=a.getCABO().getInverseShiftAndScaleMatrix();Ge(e.imagemat,e.imagemat,u)}a.getProgram().setUniformMatrix("MCPCMatrix",e.imagemat)},t.setPropertyShaderParameters=(a,n,r)=>{const i=a.getProgram(),s=r.getProperty(),u=s.getOpacity();i.setUniformf("opacity",u);const c=e.volumeTexture.getComponents(),o=s.getIndependentComponents();if(o)for(let p=0;p<c;++p)i.setUniformf(`mix${p}`,s.getComponentWeight(p));const f=e.volumeTexture.getVolumeInfo();for(let p=0;p<c;p++){let d=s.getColorWindow(),y=s.getColorLevel();const m=o?p:0,S=s.getRGBTransferFunction(m);if(S&&s.getUseLookupTableScalarRange()){const x=S.getRange();d=x[1]-x[0],y=.5*(x[1]+x[0])}const v=f.scale[p]/d,g=(f.offset[p]-y)/d+.5;i.setUniformf(`cshift${p}`,g),i.setUniformf(`cscale${p}`,v)}const l=e.colorTexture.getTextureUnit();i.setUniformi("colorTexture1",l);for(let p=0;p<c;p++){let d=1,y=0;const m=o?p:0,S=s.getPiecewiseFunction(m);if(S){const v=S.getRange(),g=v[1]-v[0],x=.5*(v[0]+v[1]);d=f.scale[p]/g,y=(f.offset[p]-x)/g+.5}i.setUniformf(`pwfshift${p}`,y),i.setUniformf(`pwfscale${p}`,d)}const h=e.pwfTexture.getTextureUnit();i.setUniformi("pwfTexture1",h)},t.updateShaders=(a,n,r)=>{if(t.getNeedToRebuildShaders(a,n,r)){const i={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(i,n,r);const s=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);s!==a.getProgram()&&(a.setProgram(s),a.getVAO().releaseGraphicsResources()),a.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(a.getProgram());a.getVAO().bind(),t.setMapperShaderParameters(a,n,r),t.setCameraShaderParameters(a,n,r),t.setPropertyShaderParameters(a,n,r)}}const $9={currentRenderPass:null,volumeTexture:null,volumeTextureTime:0,colorTexture:null,colorTextureString:null,pwfTexture:null,pwfTextureString:null,tris:null,lastHaveSeenDepthRequest:!1,haveSeenDepthRequest:!1,lastTextureComponents:0,lastIndependentComponents:0,imagemat:null,imagematinv:null};function H9(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$9,a),vt.extend(t,e,a),Sn.implementReplaceShaderCoincidentOffset(t,e,a),k.algo(t,e,2,0),e.tris=Gt.newInstance(),e.volumeTexture=Me.newInstance(),e.colorTexture=Me.newInstance(),e.pwfTexture=Me.newInstance(),e.imagemat=Se(new Float64Array(16)),e.imagematinv=Se(new Float64Array(16)),e.VBOBuildTime={},k.obj(e.VBOBuildTime,{mtime:0}),W9(t,e)}const K9=k.newInstance(H9,"vtkOpenGLImageCPRMapper");st("vtkImageCPRMapper",K9);function X9(t,e){e.classHierarchy.push("vtkOpenGLImageSlice"),t.buildPass=a=>{if(!(!e.renderable||!e.renderable.getVisibility())&&a){if(!e.renderable)return;e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes()}},t.traverseZBufferPass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.children.forEach(n=>{n.traverse(a)}),t.apply(a,!1))},t.traverseOpaqueZBufferPass=a=>t.traverseOpaquePass(a),t.traverseOpaquePass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||!e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.children.forEach(n=>{n.traverse(a)}),t.apply(a,!1))},t.traverseTranslucentPass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||e.renderable.getIsOpaque()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.children.forEach(n=>{n.traverse(a)}),t.apply(a,!1))},t.queryPass=(a,n)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;e.renderable.getIsOpaque()?n.incrementOpaqueActorCount():n.incrementTranslucentActorCount()}},t.zBufferPass=(a,n)=>t.opaquePass(a,n),t.opaqueZBufferPass=(a,n)=>t.opaquePass(a,n),t.opaquePass=(a,n)=>{a&&e.context.depthMask(!0)},t.translucentPass=(a,n)=>{e.context.depthMask(!a)},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(dt(e.keyMatrices.mcwc,e.renderable.getMatrix()),ze(e.keyMatrices.mcwc,e.keyMatrices.mcwc),e.keyMatrixTime.modified()),e.keyMatrices)}const q9={context:null,keyMatrixTime:null,keyMatrices:null};function Y9(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,q9,a),vt.extend(t,e,a),e.keyMatrixTime={},ot(e.keyMatrixTime,{mtime:0}),e.keyMatrices={mcwc:Se(new Float64Array(16))},lt(t,e,["context"]),X9(t,e)}const J9=Ke(Y9,"vtkOpenGLImageSlice");st("vtkImageSlice",J9);function Z9(t,e){e.classHierarchy.push("vtkOpenGLVolume"),t.buildPass=a=>{!e.renderable||!e.renderable.getVisibility()||a&&(e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e.context=e._openGLRenderWindow.getContext(),t.prepareNodes(),t.addMissingNode(e.renderable.getMapper()),t.removeUnusedNodes())},t.queryPass=(a,n)=>{if(a){if(!e.renderable||!e.renderable.getVisibility())return;n.incrementVolumeCount()}},t.traverseVolumePass=a=>{!e.renderable||!e.renderable.getNestedVisibility()||e._openGLRenderer.getSelector()&&!e.renderable.getNestedPickable()||(t.apply(a,!0),e.children[0].traverse(a),t.apply(a,!1))},t.volumePass=a=>{!e.renderable||!e.renderable.getVisibility()||e.context.depthMask(!a)},t.getKeyMatrices=()=>(e.renderable.getMTime()>e.keyMatrixTime.getMTime()&&(e.renderable.computeMatrix(),dt(e.MCWCMatrix,e.renderable.getMatrix()),ze(e.MCWCMatrix,e.MCWCMatrix),e.renderable.getIsIdentity()?zt(e.normalMatrix):(ta(e.normalMatrix,e.MCWCMatrix),xr(e.normalMatrix,e.normalMatrix),ei(e.normalMatrix,e.normalMatrix)),e.keyMatrixTime.modified()),{mcwc:e.MCWCMatrix,normalMatrix:e.normalMatrix})}const Q9={};function e8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Q9,a),vt.extend(t,e,a),e.keyMatrixTime={},ot(e.keyMatrixTime,{mtime:0}),e.normalMatrix=new Float64Array(9),e.MCWCMatrix=new Float64Array(16),lt(t,e,["context"]),Z9(t,e)}const t8=Ke(e8,"vtkOpenGLVolume");st("vtkVolume",t8);const S0={NEAREST:0,LINEAR:1,FAST_LINEAR:2},$1={FRACTIONAL:0,PROPORTIONAL:1};var H1={InterpolationType:S0,OpacityMode:$1};const K1={COMPOSITE_BLEND:0,MAXIMUM_INTENSITY_BLEND:1,MINIMUM_INTENSITY_BLEND:2,AVERAGE_INTENSITY_BLEND:3,ADDITIVE_INTENSITY_BLEND:4,RADON_TRANSFORM_BLEND:5};var n8={BlendMode:K1,FilterMode:{OFF:0,NORMALIZED:1,RAW:2}},r8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkPolyDataVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexDC;

varying vec3 vertexVCVSOutput;
uniform mat4 PCVCMatrix;

uniform float dcxmin;
uniform float dcxmax;
uniform float dcymin;
uniform float dcymax;

void main()
{
  // dcsmall is the device coords reduced to the
  // x y area covered by the volume
  vec4 dcsmall = vec4(
    dcxmin + 0.5 * (vertexDC.x + 1.0) * (dcxmax - dcxmin),
    dcymin + 0.5 * (vertexDC.y + 1.0) * (dcymax - dcymin),
    vertexDC.z,
    vertexDC.w);
  vec4 vcpos = PCVCMatrix * dcsmall;
  vertexVCVSOutput = vcpos.xyz/vcpos.w;
  gl_Position = dcsmall;
}
`,a8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkVolumeFS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// Template for the volume mappers fragment shader

// the output of this shader
//VTK::Output::Dec

varying vec3 vertexVCVSOutput;

// first declare the settings from the mapper
// that impact the code paths in here

// always set vtkNumComponents 1,2,3,4
//VTK::NumComponents

// possibly define vtkTrilinearOn
//VTK::TrilinearOn

// possibly define vtkIndependentComponents
//VTK::IndependentComponentsOn

// possibly define any "proportional" components
//VTK::vtkProportionalComponents

// Define the blend mode to use
#define vtkBlendMode //VTK::BlendMode

// Possibly define vtkImageLabelOutlineOn
//VTK::ImageLabelOutlineOn

#ifdef vtkImageLabelOutlineOn

uniform float outlineOpacity;
uniform float vpWidth;
uniform float vpHeight;
uniform float vpOffsetX;
uniform float vpOffsetY;
uniform mat4 PCWCMatrix;
uniform mat4 vWCtoIDX;
#endif

// define vtkLightComplexity
//VTK::LightComplexity
#if vtkLightComplexity > 0
uniform float vSpecularPower;
uniform float vAmbient;
uniform float vDiffuse;
uniform float vSpecular;
//VTK::Light::Dec
#endif

//VTK::VolumeShadowOn
//VTK::SurfaceShadowOn
//VTK::localAmbientOcclusionOn
//VTK::LAO::Dec
//VTK::VolumeShadow::Dec

// define vtkComputeNormalFromOpacity
//VTK::vtkComputeNormalFromOpacity

// possibly define vtkGradientOpacityOn
//VTK::GradientOpacityOn
#ifdef vtkGradientOpacityOn
uniform float goscale0;
uniform float goshift0;
uniform float gomin0;
uniform float gomax0;
#if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)
uniform float goscale1;
uniform float goshift1;
uniform float gomin1;
uniform float gomax1;
#if vtkNumComponents >= 3
uniform float goscale2;
uniform float goshift2;
uniform float gomin2;
uniform float gomax2;
#endif
#if vtkNumComponents >= 4
uniform float goscale3;
uniform float goshift3;
uniform float gomin3;
uniform float gomax3;
#endif
#endif
#endif

// if you want to see the raw tiled
// data in webgl1 uncomment the following line
// #define debugtile

// camera values
uniform float camThick;
uniform float camNear;
uniform float camFar;
uniform int cameraParallel;

// values describing the volume geometry
uniform vec3 vOriginVC;
uniform vec3 vSpacing;
uniform ivec3 volumeDimensions; // 3d texture dimensions
uniform vec3 vPlaneNormal0;
uniform float vPlaneDistance0;
uniform vec3 vPlaneNormal1;
uniform float vPlaneDistance1;
uniform vec3 vPlaneNormal2;
uniform float vPlaneDistance2;
uniform vec3 vPlaneNormal3;
uniform float vPlaneDistance3;
uniform vec3 vPlaneNormal4;
uniform float vPlaneDistance4;
uniform vec3 vPlaneNormal5;
uniform float vPlaneDistance5;

//VTK::ClipPlane::Dec

// opacity and color textures
uniform sampler2D otexture;
uniform float oshift0;
uniform float oscale0;
uniform sampler2D ctexture;
uniform float cshift0;
uniform float cscale0;

// jitter texture
uniform sampler2D jtexture;
uniform sampler2D ttexture;


// some 3D texture values
uniform float sampleDistance;
uniform vec3 vVCToIJK;

// the heights defined below are the locations
// for the up to four components of the tfuns
// the tfuns have a height of 2XnumComps pixels so the
// values are computed to hit the middle of the two rows
// for that component
#ifdef vtkIndependentComponentsOn
#if vtkNumComponents == 2
uniform float mix0;
uniform float mix1;
#define height0 0.25
#define height1 0.75
#endif
#if vtkNumComponents == 3
uniform float mix0;
uniform float mix1;
uniform float mix2;
#define height0 0.17
#define height1 0.5
#define height2 0.83
#endif
#if vtkNumComponents == 4
uniform float mix0;
uniform float mix1;
uniform float mix2;
uniform float mix3;
#define height0 0.125
#define height1 0.375
#define height2 0.625
#define height3 0.875
#endif
#endif

#if vtkNumComponents >= 2
uniform float oshift1;
uniform float oscale1;
uniform float cshift1;
uniform float cscale1;
#endif
#if vtkNumComponents >= 3
uniform float oshift2;
uniform float oscale2;
uniform float cshift2;
uniform float cscale2;
#endif
#if vtkNumComponents >= 4
uniform float oshift3;
uniform float oscale3;
uniform float cshift3;
uniform float cscale3;
#endif

uniform vec4 ipScalarRangeMin;
uniform vec4 ipScalarRangeMax;

// declaration for intermixed geometry
//VTK::ZBuffer::Dec

//=======================================================================
// global and custom variables (a temporary section before photorealistics rendering module is complete)
vec3 rayDirVC;
float sampleDistanceISVS;
float sampleDistanceIS;

#define SQRT3    1.7321
#define INV4PI   0.0796
#define EPSILON  0.001
#define PI       3.1415
#define PI2      9.8696

//=======================================================================
// Webgl2 specific version of functions
#if __VERSION__ == 300

uniform highp sampler3D texture1;

vec4 getTextureValue(vec3 pos)
{
  vec4 tmp = texture(texture1, pos);
#if vtkNumComponents == 1
  tmp.a = tmp.r;
#endif
#if vtkNumComponents == 2
  tmp.a = tmp.g;
#endif
#if vtkNumComponents == 3
  tmp.a = length(tmp.rgb);
#endif
  return tmp;
}

//=======================================================================
// WebGL1 specific version of functions
#else

uniform sampler2D texture1;

uniform float texWidth;
uniform float texHeight;
uniform int xreps;
uniform int xstride;
uniform int ystride;

// if computing trilinear values from multiple z slices
#ifdef vtkTrilinearOn
vec4 getTextureValue(vec3 ijk)
{
  float zoff = 1.0/float(volumeDimensions.z);
  vec4 val1 = getOneTextureValue(ijk);
  vec4 val2 = getOneTextureValue(vec3(ijk.xy, ijk.z + zoff));

  float indexZ = float(volumeDimensions)*ijk.z;
  float zmix =  indexZ - floor(indexZ);

  return mix(val1, val2, zmix);
}

vec4 getOneTextureValue(vec3 ijk)
#else // nearest or fast linear
vec4 getTextureValue(vec3 ijk)
#endif
{
  vec3 tdims = vec3(volumeDimensions);

#ifdef debugtile
  vec2 tpos = vec2(ijk.x, ijk.y);
  vec4 tmp = texture2D(texture1, tpos);
  tmp.a = 1.0;

#else
  int z = int(ijk.z * tdims.z);
  int yz = z / xreps;
  int xz = z - yz*xreps;

  int tileWidth = volumeDimensions.x/xstride;
  int tileHeight = volumeDimensions.y/ystride;

  xz *= tileWidth;
  yz *= tileHeight;

  float ni = float(xz) + (ijk.x*float(tileWidth));
  float nj = float(yz) + (ijk.y*float(tileHeight));

  vec2 tpos = vec2(ni/texWidth, nj/texHeight);

  vec4 tmp = texture2D(texture1, tpos);

#if vtkNumComponents == 1
  tmp.a = tmp.r;
#endif
#if vtkNumComponents == 2
  tmp.g = tmp.a;
#endif
#if vtkNumComponents == 3
  tmp.a = length(tmp.rgb);
#endif
#endif

  return tmp;
}

// End of Webgl1 specific code
//=======================================================================
#endif

//=======================================================================
// transformation between VC and IS space

// convert vector position from idx to vc
#if (vtkLightComplexity > 0) || (defined vtkClippingPlanesOn)
vec3 IStoVC(vec3 posIS){
  vec3 posVC = posIS / vVCToIJK;
  return posVC.x * vPlaneNormal0 +
         posVC.y * vPlaneNormal2 +
         posVC.z * vPlaneNormal4 +
         vOriginVC;
}

// convert vector position from vc to idx
vec3 VCtoIS(vec3 posVC){
  posVC = posVC - vOriginVC;
  posVC = vec3(
    dot(posVC, vPlaneNormal0),
    dot(posVC, vPlaneNormal2),
    dot(posVC, vPlaneNormal4));
  return posVC * vVCToIJK;
}
#endif

//Rotate vector to view coordinate
#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)
void rotateToViewCoord(inout vec3 dirIS){
  dirIS.xyz =
    dirIS.x * vPlaneNormal0 +
    dirIS.y * vPlaneNormal2 +
    dirIS.z * vPlaneNormal4;
}

//Rotate vector to idx coordinate
vec3 rotateToIDX(vec3 dirVC){
  vec3 dirIS;
  dirIS.xyz = vec3(
    dot(dirVC, vPlaneNormal0),
    dot(dirVC, vPlaneNormal2),
    dot(dirVC, vPlaneNormal4));
  return dirIS;
}
#endif

//=======================================================================
// Given a normal compute the gradient opacity factors
float computeGradientOpacityFactor(
  float normalMag, float goscale, float goshift, float gomin, float gomax)
{
#if defined(vtkGradientOpacityOn)
  return clamp(normalMag * goscale + goshift, gomin, gomax);
#else
  return 1.0;
#endif
}

//=======================================================================
// compute the normal and gradient magnitude for a position, uses forward difference
#if (vtkLightComplexity > 0) || (defined vtkGradientOpacityOn)
#ifdef vtkClippingPlanesOn
  void adjustClippedVoxelValues(vec3 pos, vec3 texPos[3], inout vec3 g1)
  {
    vec3 g1VC[3];
    for (int i = 0; i < 3; ++i)
    {
      g1VC[i] = IStoVC(texPos[i]);
    }
    vec3 posVC = IStoVC(pos);
    for (int i = 0; i < clip_numPlanes; ++i)
    {
      for (int j = 0; j < 3; ++j)
      {
        if(dot(vec3(vClipPlaneOrigins[i] - g1VC[j].xyz), vClipPlaneNormals[i]) > 0.0)
        {
          g1[j] = 0.0;
        }
      }
    }
  }
#endif

  #ifdef vtkComputeNormalFromOpacity
    #ifdef vtkGradientOpacityOn
      vec4 computeDensityNormal(float gradientMag, vec3 scalarInterp[2])
      {
    #else
      //if gradient opacity not on but using density gradient
      vec4 computeDensityNormal(vec3 scalarInterp[2])
      {
    #endif
        vec3 opacityG1, opacityG2;
        opacityG1.x = texture2D(otexture, vec2(scalarInterp[0].x * oscale0 + oshift0, 0.5)).r;
        opacityG1.y = texture2D(otexture, vec2(scalarInterp[0].y * oscale0 + oshift0, 0.5)).r;
        opacityG1.z = texture2D(otexture, vec2(scalarInterp[0].z * oscale0 + oshift0, 0.5)).r;
        opacityG2.x = texture2D(otexture, vec2(scalarInterp[1].x * oscale0 + oshift0, 0.5)).r;
        opacityG2.y = texture2D(otexture, vec2(scalarInterp[1].y * oscale0 + oshift0, 0.5)).r;
        opacityG2.z = texture2D(otexture, vec2(scalarInterp[1].z * oscale0 + oshift0, 0.5)).r;
    #ifdef vtkGradientOpacityOn
        float gradOpacityFactor = 1.0f;
        if (gradientMag >= 0.0){
          gradOpacityFactor = computeGradientOpacityFactor(gradientMag, goscale0, goshift0, gomin0, gomax0);
        }
        opacityG1.xyz *= gradOpacityFactor;
        opacityG2.xyz *= gradOpacityFactor;
    #endif

        vec4 opacityG = vec4(opacityG1 - opacityG2, 1.0f);
        // divide by spacing
        opacityG.xyz /= vSpacing;
        opacityG.w = length(opacityG.xyz);
        // rotate to View Coords
        rotateToViewCoord(opacityG.xyz);
        if (length(opacityG.xyz) > 0.0) {
          return vec4(normalize(opacityG.xyz),opacityG.w);
        } else {
          return vec4(0.0);
        }
      }

      vec4 computeNormalForDensity(vec3 pos, vec3 tstep, out vec3 scalarInterp[2])
      {
        vec3 xvec = vec3(tstep.x, 0.0, 0.0);
        vec3 yvec = vec3(0.0, tstep.y, 0.0);
        vec3 zvec = vec3(0.0, 0.0, tstep.z);
        vec3 texPosPVec[3];
        texPosPVec[0] = pos + xvec;
        texPosPVec[1] = pos + yvec;
        texPosPVec[2] = pos + zvec;
        vec3 texPosNVec[3];
        texPosNVec[0] = pos - xvec;
        texPosNVec[1] = pos - yvec;
        texPosNVec[2] = pos - zvec;
        vec3 g1, g2;

        scalarInterp[0].x = getTextureValue(texPosPVec[0]).a;
        scalarInterp[0].y = getTextureValue(texPosPVec[1]).a;
        scalarInterp[0].z = getTextureValue(texPosPVec[2]).a;
        scalarInterp[1].x = getTextureValue(texPosNVec[0]).a;
        scalarInterp[1].y = getTextureValue(texPosNVec[1]).a;
        scalarInterp[1].z = getTextureValue(texPosNVec[2]).a;

        #ifdef vtkClippingPlanesOn
          adjustClippedVoxelValues(pos, texPosPVec, scalarInterp[0]);
          adjustClippedVoxelValues(pos, texPosNVec, scalarInterp[1]);
        #endif
        vec4 result;
        result.x = scalarInterp[0].x - scalarInterp[1].x;
        result.y = scalarInterp[0].y - scalarInterp[1].y;
        result.z = scalarInterp[0].z - scalarInterp[1].z;
        // divide by spacing
        result.xyz /= vSpacing;
        result.w = length(result.xyz);
        // rotate to View Coords
        rotateToViewCoord(result.xyz);
        if (length(result.xyz) > 0.0) {
          return vec4(normalize(result.xyz),result.w);
        } else {
          return vec4(0.0);
        }
      }
  #endif

  vec4 computeNormal(vec3 pos, vec3 tstep)
  {
    vec3 xvec = vec3(tstep.x, 0.0, 0.0);
    vec3 yvec = vec3(0.0, tstep.y, 0.0);
    vec3 zvec = vec3(0.0, 0.0, tstep.z);
    vec3 texPosPVec[3];
    texPosPVec[0] = pos + xvec;
    texPosPVec[1] = pos + yvec;
    texPosPVec[2] = pos + zvec;
    vec3 texPosNVec[3];
    texPosNVec[0] = pos - xvec;
    texPosNVec[1] = pos - yvec;
    texPosNVec[2] = pos - zvec;
    vec3 g1, g2;
    g1.x = getTextureValue(texPosPVec[0]).a;
    g1.y = getTextureValue(texPosPVec[1]).a;
    g1.z = getTextureValue(texPosPVec[2]).a;
    g2.x = getTextureValue(texPosNVec[0]).a;
    g2.y = getTextureValue(texPosNVec[1]).a;
    g2.z = getTextureValue(texPosNVec[2]).a;
    #ifdef vtkClippingPlanesOn
      adjustClippedVoxelValues(pos, texPosPVec, g1);
      adjustClippedVoxelValues(pos, texPosNVec, g2);
    #endif
    vec4 result;
    result = vec4(g1 - g2, -1.0);
    // divide by spacing
    result.xyz /= vSpacing;
    result.w = length(result.xyz);
    if (result.w > 0.0){
      // rotate to View Coords
      rotateToViewCoord(result.xyz);
      return vec4(normalize(result.xyz),result.w);
    } else {
      return vec4(0.0);
    }
  }
#endif

#ifdef vtkImageLabelOutlineOn
vec3 fragCoordToIndexSpace(vec4 fragCoord) {
  vec4 pcPos = vec4(
    (fragCoord.x / vpWidth - vpOffsetX - 0.5) * 2.0,
    (fragCoord.y / vpHeight - vpOffsetY - 0.5) * 2.0,
    (fragCoord.z - 0.5) * 2.0,
    1.0);

  vec4 worldCoord = PCWCMatrix * pcPos;
  vec4 vertex = (worldCoord/worldCoord.w);

  vec3 index = (vWCtoIDX * vertex).xyz;

  // half voxel fix for labelmapOutline
  return (index + vec3(0.5)) / vec3(volumeDimensions);
}
#endif

//=======================================================================
// compute the normals and gradient magnitudes for a position
// for independent components
mat4 computeMat4Normal(vec3 pos, vec4 tValue, vec3 tstep)
{
  mat4 result;
  vec4 distX = getTextureValue(pos + vec3(tstep.x, 0.0, 0.0)) - tValue;
  vec4 distY = getTextureValue(pos + vec3(0.0, tstep.y, 0.0)) - tValue;
  vec4 distZ = getTextureValue(pos + vec3(0.0, 0.0, tstep.z)) - tValue;

  // divide by spacing
  distX /= vSpacing.x;
  distY /= vSpacing.y;
  distZ /= vSpacing.z;

  mat3 rot;
  rot[0] = vPlaneNormal0;
  rot[1] = vPlaneNormal2;
  rot[2] = vPlaneNormal4;

#if !defined(vtkComponent0Proportional)
  result[0].xyz = vec3(distX.r, distY.r, distZ.r);
  result[0].a = length(result[0].xyz);
  result[0].xyz *= rot;
  if (result[0].w > 0.0)
  {
    result[0].xyz /= result[0].w;
  }
#endif

// optionally compute the 2nd component
#if vtkNumComponents >= 2 && !defined(vtkComponent1Proportional)
  result[1].xyz = vec3(distX.g, distY.g, distZ.g);
  result[1].a = length(result[1].xyz);
  result[1].xyz *= rot;
  if (result[1].w > 0.0)
  {
    result[1].xyz /= result[1].w;
  }
#endif

// optionally compute the 3rd component
#if vtkNumComponents >= 3 && !defined(vtkComponent2Proportional)
  result[2].xyz = vec3(distX.b, distY.b, distZ.b);
  result[2].a = length(result[2].xyz);
  result[2].xyz *= rot;
  if (result[2].w > 0.0)
  {
    result[2].xyz /= result[2].w;
  }
#endif

// optionally compute the 4th component
#if vtkNumComponents >= 4 && !defined(vtkComponent3Proportional)
  result[3].xyz = vec3(distX.a, distY.a, distZ.a);
  result[3].a = length(result[3].xyz);
  result[3].xyz *= rot;
  if (result[3].w > 0.0)
  {
    result[3].xyz /= result[3].w;
  }
#endif

  return result;
}

//=======================================================================
// global shadow - secondary ray
#if defined(VolumeShadowOn) || defined(localAmbientOcclusionOn)
float random()
{
  float rand = fract(sin(dot(gl_FragCoord.xy,vec2(12.9898,78.233)))*43758.5453123);
  float jitter=texture2D(jtexture,gl_FragCoord.xy/32.).r;
  uint pcg_state = floatBitsToUint(jitter);
  uint state = pcg_state;
  pcg_state = pcg_state * uint(747796405) + uint(2891336453);
  uint word = ((state >> ((state >> uint(28)) + uint(4))) ^ state) * uint(277803737);
  return (float((((word >> uint(22)) ^ word) >> 1 ))/float(2147483647) + rand)/2.0;
}
#endif

#ifdef VolumeShadowOn
// henyey greenstein phase function
float phase_function(float cos_angle)
{
  // divide by 2.0 instead of 4pi to increase intensity
  return ((1.0-anisotropy2)/pow(1.0+anisotropy2-2.0*anisotropy*cos_angle, 1.5))/2.0;
}

// Computes the intersection between a ray and a box
struct Hit
{
  float tmin;
  float tmax;
};

struct Ray
{
  vec3 origin;
  vec3 dir;
  vec3 invDir;
};

bool BBoxIntersect(vec3 boundMin, vec3 boundMax, const Ray r, out Hit hit)
{
  vec3 tbot = r.invDir * (boundMin - r.origin);
  vec3 ttop = r.invDir * (boundMax - r.origin);
  vec3 tmin = min(ttop, tbot);
  vec3 tmax = max(ttop, tbot);
  vec2 t = max(tmin.xx, tmin.yz);
  float t0 = max(t.x, t.y);
  t = min(tmax.xx, tmax.yz);
  float t1 = min(t.x, t.y);
  hit.tmin = t0;
  hit.tmax = t1;
  return t1 > max(t0,0.0);
}

// As BBoxIntersect requires the inverse of the ray coords,
// this function is used to avoid numerical issues
void safe_0_vector(inout Ray ray)
{
  if(abs(ray.dir.x) < EPSILON) ray.dir.x = sign(ray.dir.x) * EPSILON;
  if(abs(ray.dir.y) < EPSILON) ray.dir.y = sign(ray.dir.y) * EPSILON;
  if(abs(ray.dir.z) < EPSILON) ray.dir.z = sign(ray.dir.z) * EPSILON;
}

float volume_shadow(vec3 posIS, vec3 lightDirNormIS)
{
  float shadow = 1.0;
  float opacity = 0.0;

  // modify sample distance with a random number between 1.5 and 3.0
  float sampleDistanceISVS_jitter = sampleDistanceISVS * mix(1.5, 3.0, random());
  float opacityPrev = texture2D(otexture, vec2(getTextureValue(posIS).r * oscale0 + oshift0, 0.5)).r;

  // in case the first sample near surface has a very tiled light ray, we need to offset start position
  posIS += sampleDistanceISVS_jitter * lightDirNormIS;

  // compute the start and end points for the ray
  Ray ray;
  Hit hit;
  ray.origin = posIS;
  ray.dir = lightDirNormIS;
  safe_0_vector(ray);
  ray.invDir = 1.0/ray.dir;

  if(!BBoxIntersect(vec3(0.0),vec3(1.0), ray, hit))
  {
    return 1.0;
  }
  float maxdist = hit.tmax;

  // interpolate shadow ray length between: 1 unit of sample distance in IS to SQRT3, based on globalIlluminationReach
  float maxgi = mix(sampleDistanceISVS_jitter,SQRT3,giReach);
  maxdist = min(maxdist,maxgi);
  if(maxdist < EPSILON) {
    return 1.0;
  }

  // support gradient opacity
  #ifdef vtkGradientOpacityOn
    vec4 normal;
  #endif

  float current_dist = 0.0;
  float current_step = length(sampleDistanceISVS_jitter * lightDirNormIS);
  float clamped_step = 0.0;

  vec4 scalar = vec4(0.0);
  while(current_dist < maxdist)
  {
#ifdef vtkClippingPlanesOn
    vec3 posVC = IStoVC(posIS);
    for (int i = 0; i < clip_numPlanes; ++i)
    {
      if (dot(vec3(vClipPlaneOrigins[i] - posVC), vClipPlaneNormals[i]) > 0.0)
      {
        current_dist = maxdist;
      }
    }
#endif
    scalar = getTextureValue(posIS);
    opacity = texture2D(otexture, vec2(scalar.r * oscale0 + oshift0, 0.5)).r;
    #ifdef vtkGradientOpacityOn
      normal = computeNormal(posIS, vec3(1.0/vec3(volumeDimensions)));
      opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);
    #endif
    shadow *= 1.0 - opacity;

    // optimization: early termination
    if (shadow < EPSILON){
      return 0.0;
    }

    clamped_step = min(maxdist - current_dist, current_step);
    posIS += clamped_step * lightDirNormIS;
    current_dist += current_step;
  }

  return shadow;
}

vec3 applyShadowRay(vec3 tColor, vec3 posIS, vec3 viewDirectionVC)
{
  vec3 vertLight = vec3(0.0);
  vec3 secondary_contrib = vec3(0.0);
  // here we assume only positional light, no effect of cones
  for (int i = 0; i < lightNum; i++)
  {
    #if(vtkLightComplexity==3)
      if (lightPositional[i] == 1){
        vertLight = lightPositionVC[i] - IStoVC(posIS);
      }else{
        vertLight = - lightDirectionVC[i];
      }
    #else
      vertLight = - lightDirectionVC[i];
    #endif
    // here we assume achromatic light, only intensity
    float dDotL = dot(viewDirectionVC, normalize(vertLight));
    // isotropic scatter returns 0.5 instead of 1/4pi to increase intensity
    float phase_attenuation = 0.5;
    if (abs(anisotropy) > EPSILON){
      phase_attenuation = phase_function(dDotL);
    }
    float vol_shadow = volume_shadow(posIS, normalize(rotateToIDX(vertLight)));
    secondary_contrib += tColor * vDiffuse * lightColor[i] * vol_shadow * phase_attenuation;
    secondary_contrib += tColor * vAmbient;
  }
  return secondary_contrib;
}
#endif

//=======================================================================
// local ambient occlusion
#ifdef localAmbientOcclusionOn
vec3 sample_direction_uniform(int i)
{
  float rand = random() * 0.5;
  float theta = PI2 * (kernelSample[i][0] + rand);
  float phi = acos(2.0 * (kernelSample[i][1] + rand) -1.0) / 2.5;
  return normalize(vec3(cos(theta)*sin(phi), sin(theta)*sin(phi), cos(phi)));
}

// return a matrix that transform startDir into z axis; startDir should be normalized
mat3 zBaseRotationalMatrix(vec3 startDir){
  vec3 axis = cross(startDir, vec3(0.0,0.0,1.0));
  float cosA = startDir.z;
  float k = 1.0 / (1.0 + cosA);
  mat3 matrix = mat3((axis.x * axis.x * k) + cosA, (axis.y * axis.x * k) - axis.z, (axis.z * axis.x * k) + axis.y,
              (axis.x * axis.y * k) + axis.z, (axis.y * axis.y * k) + cosA, (axis.z * axis.y * k) - axis.x,
              (axis.x * axis.z * k) - axis.y, (axis.y * axis.z * k) + axis.x, (axis.z * axis.z * k) + cosA);
  return matrix;
}

float computeLAO(vec3 posIS, float op, vec3 lightDir, vec4 normal){
  // apply LAO only at selected locations, otherwise return full brightness
  if (normal.w > 0.0 && op > 0.05){
    float total_transmittance = 0.0;
    mat3 inverseRotateBasis = inverse(zBaseRotationalMatrix(normalize(-normal.xyz)));
    vec3 currPos, randomDirStep;
    float weight, transmittance, opacity;
    for (int i = 0; i < kernelSize; i++)
    {
      randomDirStep = inverseRotateBasis * sample_direction_uniform(i) * sampleDistanceIS;
      weight = 1.0 - dot(normalize(lightDir), normalize(randomDirStep));
      currPos = posIS;
      transmittance = 1.0;
      for (int j = 0; j < kernelRadius ; j++){
        currPos += randomDirStep;
        // check if it's at clipping plane, if so return full brightness
        if (all(greaterThan(currPos, vec3(EPSILON))) && all(lessThan(currPos,vec3(1.0-EPSILON)))){
          opacity = texture2D(otexture, vec2(getTextureValue(currPos).r * oscale0 + oshift0, 0.5)).r;
          #ifdef vtkGradientOpacityOn
             opacity *= computeGradientOpacityFactor(normal.w, goscale0, goshift0, gomin0, gomax0);
          #endif
          transmittance *= 1.0 - opacity;
        }
        else{
          break;
        }
      }
      total_transmittance += transmittance / float(kernelRadius) * weight;

      // early termination if fully translucent
      if (total_transmittance > 1.0 - EPSILON){
        return 1.0;
      }
    }
    // average transmittance and reduce variance
    return clamp(total_transmittance / float(kernelSize), 0.3, 1.0);
  } else {
    return 1.0;
  }
}
#endif

//=======================================================================
// surface light contribution
#if vtkLightComplexity > 0
  void applyLighting(inout vec3 tColor, vec4 normal)
  {
    vec3 diffuse = vec3(0.0, 0.0, 0.0);
    vec3 specular = vec3(0.0, 0.0, 0.0);
    float df, sf = 0.0;
    for (int i = 0; i < lightNum; i++){
        df = abs(dot(normal.rgb, -lightDirectionVC[i]));
        diffuse += df * lightColor[i];
        sf = pow( abs(dot(lightHalfAngleVC[i],normal.rgb)), vSpecularPower);
        specular += sf * lightColor[i];
    }
    tColor.rgb = tColor.rgb*(diffuse*vDiffuse + vAmbient) + specular*vSpecular;
  }
  #ifdef SurfaceShadowOn
  #if vtkLightComplexity < 3
    vec3 applyLightingDirectional(vec3 posIS, vec4 tColor, vec4 normal)
    {
      // everything in VC
      vec3 diffuse = vec3(0.0);
      vec3 specular = vec3(0.0);
      #ifdef localAmbientOcclusionOn
        vec3 ambient = vec3(0.0);
      #endif
      vec3 vertLightDirection;
      for (int i = 0; i < lightNum; i++){
        float ndotL,vdotR;
        vertLightDirection = lightDirectionVC[i];
        ndotL = dot(normal.xyz, vertLightDirection);
        if (ndotL < 0.0 && twoSidedLighting)
        {
          ndotL = -ndotL;
        }
        if (ndotL > 0.0)
        {
          diffuse += ndotL * lightColor[i];
          //specular
          vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
          if (vdotR > 0.0)
          {
            specular += pow(vdotR, vSpecularPower) * lightColor[i];
          }
        }
        #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
        #endif
      }
      #ifdef localAmbientOcclusionOn
        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;
      #else
        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;
      #endif
    }
  #else
    vec3 applyLightingPositional(vec3 posIS, vec4 tColor, vec4 normal, vec3 posVC)
    {
      // everything in VC
      vec3 diffuse = vec3(0.0);
      vec3 specular = vec3(0.0);
      #ifdef localAmbientOcclusionOn
        vec3 ambient = vec3(0.0);
      #endif
      vec3 vertLightDirection;
      for (int i = 0; i < lightNum; i++){
        float distance,attenuation,ndotL,vdotR;
        vec3 lightDir;
        if (lightPositional[i] == 1){
          lightDir = lightDirectionVC[i];
          vertLightDirection = posVC - lightPositionVC[i];
          distance = length(vertLightDirection);
          vertLightDirection = normalize(vertLightDirection);
          attenuation = 1.0 / (lightAttenuation[i].x
                              + lightAttenuation[i].y * distance
                              + lightAttenuation[i].z * distance * distance);
          // per OpenGL standard cone angle is 90 or less for a spot light
          if (lightConeAngle[i] <= 90.0){
            float coneDot = dot(vertLightDirection, lightDir);
            if (coneDot >= cos(radians(lightConeAngle[i]))){  // if inside cone
              attenuation = attenuation * pow(coneDot, lightExponent[i]);
            }
            else {
              attenuation = 0.0;
            }
          }
          ndotL = dot(normal.xyz, vertLightDirection);
          if (ndotL < 0.0 && twoSidedLighting)
          {
            ndotL = -ndotL;
          }
          if (ndotL > 0.0)
          {
            diffuse += ndotL * attenuation * lightColor[i];
            //specular
            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
            if (vdotR > 0.0)
            {
              specular += pow(vdotR, vSpecularPower) * attenuation * lightColor[i];
            }
          }
          #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
          #endif
        } else {
          vertLightDirection = lightDirectionVC[i];
          ndotL = dot(normal.xyz, vertLightDirection);
          if (ndotL < 0.0 && twoSidedLighting)
          {
            ndotL = -ndotL;
          }
          if (ndotL > 0.0)
          {
            diffuse += ndotL * lightColor[i];
            //specular
            vdotR = dot(-rayDirVC, normalize(2.0 * ndotL * -normal.xyz + vertLightDirection));
            if (vdotR > 0.0)
            {
              specular += pow(vdotR, vSpecularPower) * lightColor[i];
            }
          }
          #ifdef localAmbientOcclusionOn
            ambient += computeLAO(posIS, tColor.a, vertLightDirection, normal);
          #endif
        }
      }
      #ifdef localAmbientOcclusionOn
        return tColor.rgb * (diffuse * vDiffuse + vAmbient * ambient) + specular*vSpecular;
      #else
        return tColor.rgb * (diffuse * vDiffuse + vAmbient) + specular*vSpecular;
      #endif
    }
  #endif
  #endif
#endif

//=======================================================================
// Given a texture value compute the color and opacity
//
vec4 getColorForValue(vec4 tValue, vec3 posIS, vec3 tstep)
{
#ifdef vtkImageLabelOutlineOn
  vec3 centerPosIS = fragCoordToIndexSpace(gl_FragCoord); // pos in texture space
  vec4 centerValue = getTextureValue(centerPosIS);
  bool pixelOnBorder = false;
  vec4 tColor = texture2D(ctexture, vec2(centerValue.r * cscale0 + cshift0, 0.5));

  // Get alpha of segment from opacity function.
  tColor.a = texture2D(otexture, vec2(centerValue.r * oscale0 + oshift0, 0.5)).r;

  int segmentIndex = int(centerValue.r * 255.0);
  
  // Use texture sampling for outlineThickness
  float textureCoordinate = float(segmentIndex - 1) / 1024.0;
  float textureValue = texture2D(ttexture, vec2(textureCoordinate, 0.5)).r;

  int actualThickness = int(textureValue * 255.0);

  if (actualThickness == 0) {
    return vec4(0, 0, 1, 1);
  }

  // Only perform outline check on fragments rendering voxels that aren't invisible.
  // Saves a bunch of needless checks on the background.
  // TODO define epsilon when building shader?
  if (float(tColor.a) > 0.01) {
    for (int i = -actualThickness; i <= actualThickness; i++) {
      for (int j = -actualThickness; j <= actualThickness; j++) {
        if (i == 0 || j == 0) {
          continue;
        }

        vec4 neighborPixelCoord = vec4(gl_FragCoord.x + float(i),
          gl_FragCoord.y + float(j),
          gl_FragCoord.z, gl_FragCoord.w);

        vec3 neighborPosIS = fragCoordToIndexSpace(neighborPixelCoord);
        vec4 value = getTextureValue(neighborPosIS);

        // If any of my neighbours are not the same value as I
        // am, this means I am on the border of the segment.
        // We can break the loops
        if (any(notEqual(value, centerValue))) {
          pixelOnBorder = true;
          break;
        }
      }

      if (pixelOnBorder == true) {
        break;
      }
    }

    // If I am on the border, I am displayed at full opacity
    if (pixelOnBorder == true) {
      tColor.a = outlineOpacity;
    }
  }

#else
  // compute the normal and gradient magnitude if needed
  // We compute it as a vec4 if possible otherwise a mat4
  //
  vec4 goFactor = vec4(1.0,1.0,1.0,1.0);

  // compute the normal vectors as needed
  #if (vtkLightComplexity > 0) || defined(vtkGradientOpacityOn)
    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)
      mat4 normalMat = computeMat4Normal(posIS, tValue, tstep);
      #if !defined(vtkComponent0Proportional)
        vec4 normal0 = normalMat[0];
      #endif
      #if !defined(vtkComponent1Proportional)
        vec4 normal1 = normalMat[1];
      #endif
      #if vtkNumComponents > 2
        #if !defined(vtkComponent2Proportional)
          vec4 normal2 = normalMat[2];
        #endif
        #if vtkNumComponents > 3
          #if !defined(vtkComponent3Proportional)
            vec4 normal3 = normalMat[3];
          #endif
        #endif
      #endif
    #else
      vec4 normalLight;
      #ifdef vtkComputeNormalFromOpacity
        vec3 scalarInterp[2];
        vec4 normal0 = computeNormalForDensity(posIS, tstep, scalarInterp);
        if (length(normal0)>0.0){
          #ifdef vtkGradientOpacityOn
            normalLight = computeDensityNormal(normal0.w, scalarInterp);
          #else
            normalLight = computeDensityNormal(scalarInterp);
          #endif
          if (length(normalLight) == 0.0){
            normalLight = normal0;
          }
        }
      #else
        vec4 normal0 = computeNormal(posIS, tstep);
        normalLight = normal0;
      #endif
    #endif
  #endif

  // compute gradient opacity factors as needed
  #if defined(vtkGradientOpacityOn)
    #if !defined(vtkComponent0Proportional)
      goFactor.x =
        computeGradientOpacityFactor(normal0.a, goscale0, goshift0, gomin0, gomax0);
    #endif
    #if defined(vtkIndependentComponentsOn) && (vtkNumComponents > 1)
      #if !defined(vtkComponent1Proportional)
        goFactor.y =
          computeGradientOpacityFactor(normal1.a, goscale1, goshift1, gomin1, gomax1);
      #endif
      #if vtkNumComponents > 2
        #if !defined(vtkComponent2Proportional)
          goFactor.z =
            computeGradientOpacityFactor(normal2.a, goscale2, goshift2, gomin2, gomax2);
        #endif
        #if vtkNumComponents > 3
          #if !defined(vtkComponent3Proportional)
            goFactor.w =
              computeGradientOpacityFactor(normal3.a, goscale3, goshift3, gomin3, gomax3);
          #endif
        #endif
      #endif
    #endif
  #endif

  // single component is always independent
  #if vtkNumComponents == 1
    vec4 tColor = texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, 0.5));
    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;
    if (tColor.a < EPSILON){
      return vec4(0.0);
    }
  #endif

  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2
    vec4 tColor = mix0*texture2D(ctexture, vec2(tValue.r * cscale0 + cshift0, height0));
    #if !defined(vtkComponent0Proportional)
      tColor.a = goFactor.x*mix0*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;
    #else
      float pwfValue = texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, height0)).r;
      tColor *= pwfValue;
      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix0));
    #endif

    vec3 tColor1 = mix1*texture2D(ctexture, vec2(tValue.g * cscale1 + cshift1, height1)).rgb;
    #if !defined(vtkComponent1Proportional)
      tColor.a += goFactor.y*mix1*texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;
    #else
      float pwfValue = texture2D(otexture, vec2(tValue.g * oscale1 + oshift1, height1)).r;
      tColor1 *= pwfValue;
      tColor.a *= mix(pwfValue, 1.0, (1.0 - mix1));
    #endif

    #if vtkNumComponents >= 3
      vec3 tColor2 = mix2*texture2D(ctexture, vec2(tValue.b * cscale2 + cshift2, height2)).rgb;
      #if !defined(vtkComponent2Proportional)
        tColor.a += goFactor.z*mix2*texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;
      #else
        float pwfValue = texture2D(otexture, vec2(tValue.b * oscale2 + oshift2, height2)).r;
        tColor2 *= pwfValue;
        tColor.a *= mix(pwfValue, 1.0, (1.0 - mix2));
      #endif

      #if vtkNumComponents >= 4
        vec3 tColor3 = mix3*texture2D(ctexture, vec2(tValue.a * cscale3 + cshift3, height3)).rgb;
        #if !defined(vtkComponent3Proportional)
          tColor.a += goFactor.w*mix3*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;
        #else
          float pwfValue = texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, height3)).r;
          tColor3 *= pwfValue;
          tColor.a *= mix(pwfValue, 1.0, (1.0 - mix3));
        #endif
      #endif
    #endif
  #else // then not independent

  #if vtkNumComponents == 2
    float lum = tValue.r * cscale0 + cshift0;
    float alpha = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale1 + oshift1, 0.5)).r;
    vec4 tColor = vec4(lum, lum, lum, alpha);
  #endif
  #if vtkNumComponents == 3
    vec4 tColor;
    tColor.r = tValue.r * cscale0 + cshift0;
    tColor.g = tValue.g * cscale1 + cshift1;
    tColor.b = tValue.b * cscale2 + cshift2;
    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale0 + oshift0, 0.5)).r;
  #endif
  #if vtkNumComponents == 4
    vec4 tColor;
    tColor.r = tValue.r * cscale0 + cshift0;
    tColor.g = tValue.g * cscale1 + cshift1;
    tColor.b = tValue.b * cscale2 + cshift2;
    tColor.a = goFactor.x*texture2D(otexture, vec2(tValue.a * oscale3 + oshift3, 0.5)).r;
  #endif
  #endif // dependent

  // apply lighting if requested as appropriate
  #if vtkLightComplexity > 0
    #if !defined(vtkComponent0Proportional)
      #if vtkNumComponents == 1
        #ifdef SurfaceShadowOn
            #if vtkLightComplexity < 3
                vec3 tColorS = applyLightingDirectional(posIS, tColor, normalLight);
            #else
                vec3 tColorS = applyLightingPositional(posIS, tColor, normalLight, IStoVC(posIS));
            #endif
        #endif

        #ifdef VolumeShadowOn
          vec3 tColorVS = applyShadowRay(tColor.rgb, posIS, rayDirVC);
          #ifdef SurfaceShadowOn
            float vol_coef = volumetricScatteringBlending * (1.0 - tColor.a / 2.0) * (1.0 - atan(normalLight.w) * INV4PI);
            tColor.rgb = (1.0-vol_coef) * tColorS + vol_coef * tColorVS;
          #else
            tColor.rgb = tColorVS;
          #endif
        #else
            tColor.rgb = tColorS;
        #endif

      #else
        applyLighting(tColor.rgb, normal0);
      #endif
    #endif

    #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2
      #if !defined(vtkComponent1Proportional)
        applyLighting(tColor1, normal1);
      #endif
    #if vtkNumComponents >= 3
      #if !defined(vtkComponent2Proportional)
        applyLighting(tColor2, normal2);
      #endif
    #if vtkNumComponents >= 4
      #if !defined(vtkComponent3Proportional)
        applyLighting(tColor3, normal3);
      #endif
    #endif
    #endif
    #endif
  #endif

// perform final independent blend as needed
#if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 2
  tColor.rgb += tColor1;
#if vtkNumComponents >= 3
  tColor.rgb += tColor2;
#if vtkNumComponents >= 4
  tColor.rgb += tColor3;
#endif
#endif
#endif

#endif
return tColor;
}

bool valueWithinScalarRange(vec4 val, vec4 min, vec4 max) {
  bool withinRange = false;
  #if vtkNumComponents == 1
    if (val.r >= min.r && val.r <= max.r) {
      withinRange = true;
    }
  #endif
  #if defined(vtkIndependentComponentsOn) && vtkNumComponents == 2
     if (val.r >= min.r && val.r <= max.r &&
        val.g >= min.g && val.g <= max.g) {
      withinRange = true;
    }
  #endif
  #if defined(vtkIndependentComponentsOn) && vtkNumComponents >= 3
    if (all(greaterThanEqual(val, ipScalarRangeMin)) &&
        all(lessThanEqual(val, ipScalarRangeMax))) {
      withinRange = true;
    }
  #endif
  return withinRange;
}

//=======================================================================
// Apply the specified blend mode operation along the ray's path.
//
void applyBlend(vec3 posIS, vec3 endIS, vec3 tdims)
{
  vec3 tstep = 1.0/tdims;

  // start slightly inside and apply some jitter
  vec3 delta = endIS - posIS;
  vec3 stepIS = normalize(delta)*sampleDistanceIS;
  float raySteps = length(delta)/sampleDistanceIS;

  // avoid 0.0 jitter
  float jitter = 0.01 + 0.99*texture2D(jtexture, gl_FragCoord.xy/32.0).r;
  float stepsTraveled = jitter;

  // local vars for the loop
  vec4 color = vec4(0.0, 0.0, 0.0, 0.0);
  vec4 tValue;
  vec4 tColor;

  // if we have less than one step then pick the middle point
  // as our value
  // if (raySteps <= 1.0)
  // {
  //   posIS = (posIS + endIS)*0.5;
  // }

  // Perform initial step at the volume boundary
  // compute the scalar
  tValue = getTextureValue(posIS);

  #if vtkBlendMode == 0 // COMPOSITE_BLEND
    // now map through opacity and color
    tColor = getColorForValue(tValue, posIS, tstep);

    // handle very thin volumes
    if (raySteps <= 1.0)
    {
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps);
      gl_FragData[0] = tColor;
      return;
    }

    tColor.a = 1.0 - pow(1.0 - tColor.a, jitter);
    color = vec4(tColor.rgb*tColor.a, tColor.a);
    posIS += (jitter*stepIS);

    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // now map through opacity and color
      tColor = getColorForValue(tValue, posIS, tstep);

      float mix = (1.0 - color.a);

      // this line should not be needed but nvidia seems to not handle
      // the break correctly on windows/chrome 58 angle
      //mix = mix * sign(max(raySteps - stepsTraveled - 1.0, 0.0));

      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;
      stepsTraveled++;
      posIS += stepIS;
      if (color.a > 0.99) { color.a = 1.0; break; }
    }

    if (color.a < 0.99 && (raySteps - stepsTraveled) > 0.0)
    {
      posIS = endIS;

      // compute the scalar
      tValue = getTextureValue(posIS);

      // now map through opacity and color
      tColor = getColorForValue(tValue, posIS, tstep);
      tColor.a = 1.0 - pow(1.0 - tColor.a, raySteps - stepsTraveled);

      float mix = (1.0 - color.a);
      color = color + vec4(tColor.rgb*tColor.a, tColor.a)*mix;
    }

    gl_FragData[0] = vec4(color.rgb/color.a, color.a);
  #endif
  #if vtkBlendMode == 1 || vtkBlendMode == 2
    // MAXIMUM_INTENSITY_BLEND || MINIMUM_INTENSITY_BLEND
    // Find maximum/minimum intensity along the ray.

    // Define the operation we will use (min or max)
    #if vtkBlendMode == 1
    #define OP max
    #else
    #define OP min
    #endif

    // If the clipping range is shorter than the sample distance
    // we can skip the sampling loop along the ray.
    if (raySteps <= 1.0)
    {
      gl_FragData[0] = getColorForValue(tValue, posIS, tstep);
      return;
    }

    vec4 value = tValue;
    posIS += (jitter*stepIS);

    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // Update the maximum value if necessary
      value = OP(tValue, value);

      // Otherwise, continue along the ray
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;
    tValue = getTextureValue(posIS);
    value = OP(tValue, value);

    // Now map through opacity and color
    gl_FragData[0] = getColorForValue(value, posIS, tstep);
  #endif
  #if vtkBlendMode == 3 || vtkBlendMode == 4 //AVERAGE_INTENSITY_BLEND || ADDITIVE_BLEND
    vec4 sum = vec4(0.);

    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
      sum += tValue;
    }

    if (raySteps <= 1.0) {
      gl_FragData[0] = getColorForValue(sum, posIS, tstep);
      return;
    }

    posIS += (jitter*stepIS);

    // Sample along the ray until MaximumSamplesValue,
    // ending slightly inside the total distance
    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      // If we have reached the last step, break
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar
      tValue = getTextureValue(posIS);

      // One can control the scalar range by setting the AverageIPScalarRange to disregard scalar values, not in the range of interest, from the average computation.
      // Notes:
      // - We are comparing all values in the texture to see if any of them
      //   are outside of the scalar range. In the future we might want to allow
      //   scalar ranges for each component.
      if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
        // Sum the values across each step in the path
        sum += tValue;
      }
      stepsTraveled++;
      posIS += stepIS;
    }

    // Perform the last step along the ray using the
    // residual distance
    posIS = endIS;

    // compute the scalar
    tValue = getTextureValue(posIS);

    // One can control the scalar range by setting the IPScalarRange to disregard scalar values, not in the range of interest, from the average computation
    if (valueWithinScalarRange(tValue, ipScalarRangeMin, ipScalarRangeMax)) {
      sum += tValue;

      stepsTraveled++;
    }

    #if vtkBlendMode == 3 // Average
      sum /= vec4(stepsTraveled, stepsTraveled, stepsTraveled, 1.0);
    #endif

    gl_FragData[0] = getColorForValue(sum, posIS, tstep);
  #endif
  #if vtkBlendMode == 5 // RADON
    float normalizedRayIntensity = 1.0;

    // handle very thin volumes
    if (raySteps <= 1.0)
    {
      tValue = getTextureValue(posIS);
      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;
      gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity, 0.5));
      return;
    }

    posIS += (jitter*stepIS);

    for (int i = 0; i < //VTK::MaximumSamplesValue ; ++i)
    {
      if (stepsTraveled + 1.0 >= raySteps) { break; }

      // compute the scalar value
      tValue = getTextureValue(posIS);

      // Convert scalar value to normalizedRayIntensity coefficient and accumulate normalizedRayIntensity
      normalizedRayIntensity = normalizedRayIntensity - sampleDistance*texture2D(otexture, vec2(tValue.r * oscale0 + oshift0, 0.5)).r;

      posIS += stepIS;
      stepsTraveled++;
    }

    // map normalizedRayIntensity to color
    gl_FragData[0] = texture2D(ctexture, vec2(normalizedRayIntensity , 0.5));

  #endif
}

//=======================================================================
// Compute a new start and end point for a given ray based
// on the provided bounded clipping plane (aka a rectangle)
void getRayPointIntersectionBounds(
  vec3 rayPos, vec3 rayDir,
  vec3 planeDir, float planeDist,
  inout vec2 tbounds, vec3 vPlaneX, vec3 vPlaneY,
  float vSize1, float vSize2)
{
  float result = dot(rayDir, planeDir);
  if (abs(result) < 1e-6)
  {
    return;
  }
  result = -1.0 * (dot(rayPos, planeDir) + planeDist) / result;
  vec3 xposVC = rayPos + rayDir*result;
  vec3 vxpos = xposVC - vOriginVC;
  vec2 vpos = vec2(
    dot(vxpos, vPlaneX),
    dot(vxpos, vPlaneY));

  // on some apple nvidia systems this does not work
  // if (vpos.x < 0.0 || vpos.x > vSize1 ||
  //     vpos.y < 0.0 || vpos.y > vSize2)
  // even just
  // if (vpos.x < 0.0 || vpos.y < 0.0)
  // fails
  // so instead we compute a value that represents in and out
  //and then compute the return using this value
  float xcheck = max(0.0, vpos.x * (vpos.x - vSize1)); //  0 means in bounds
  float check = sign(max(xcheck, vpos.y * (vpos.y - vSize2))); //  0 means in bounds, 1 = out

  tbounds = mix(
   vec2(min(tbounds.x, result), max(tbounds.y, result)), // in value
   tbounds, // out value
   check);  // 0 in 1 out
}

//=======================================================================
// given a
// - ray direction (rayDir)
// - starting point (vertexVCVSOutput)
// - bounding planes of the volume
// - optionally depth buffer values
// - far clipping plane
// compute the start/end distances of the ray we need to cast
vec2 computeRayDistances(vec3 rayDir, vec3 tdims)
{
  vec2 dists = vec2(100.0*camFar, -1.0);

  vec3 vSize = vSpacing*tdims;

  // all this is in View Coordinates
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal0, vPlaneDistance0, dists, vPlaneNormal2, vPlaneNormal4,
    vSize.y, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal1, vPlaneDistance1, dists, vPlaneNormal2, vPlaneNormal4,
    vSize.y, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal2, vPlaneDistance2, dists, vPlaneNormal0, vPlaneNormal4,
    vSize.x, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal3, vPlaneDistance3, dists, vPlaneNormal0, vPlaneNormal4,
    vSize.x, vSize.z);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal4, vPlaneDistance4, dists, vPlaneNormal0, vPlaneNormal2,
    vSize.x, vSize.y);
  getRayPointIntersectionBounds(vertexVCVSOutput, rayDir,
    vPlaneNormal5, vPlaneDistance5, dists, vPlaneNormal0, vPlaneNormal2,
    vSize.x, vSize.y);

  //VTK::ClipPlane::Impl

  // do not go behind front clipping plane
  dists.x = max(0.0,dists.x);

  // do not go PAST far clipping plane
  float farDist = -camThick/rayDir.z;
  dists.y = min(farDist,dists.y);

  // Do not go past the zbuffer value if set
  // This is used for intermixing opaque geometry
  //VTK::ZBuffer::Impl

  return dists;
}

//=======================================================================
// Compute the index space starting position (pos) and end
// position
//
void computeIndexSpaceValues(out vec3 pos, out vec3 endPos, vec3 rayDir, vec2 dists)
{
  // compute starting and ending values in volume space
  pos = vertexVCVSOutput + dists.x*rayDir;
  pos = pos - vOriginVC;
  // convert to volume basis and origin
  pos = vec3(
    dot(pos, vPlaneNormal0),
    dot(pos, vPlaneNormal2),
    dot(pos, vPlaneNormal4));

  endPos = vertexVCVSOutput + dists.y*rayDir;
  endPos = endPos - vOriginVC;
  endPos = vec3(
    dot(endPos, vPlaneNormal0),
    dot(endPos, vPlaneNormal2),
    dot(endPos, vPlaneNormal4));

  float delta = length(endPos - pos);

  pos *= vVCToIJK;
  endPos *= vVCToIJK;

  float delta2 = length(endPos - pos);
  sampleDistanceIS = sampleDistance*delta2/delta;
  #ifdef VolumeShadowOn
    sampleDistanceISVS = sampleDistanceIS * volumeShadowSamplingDistFactor;
  #endif
}

void main()
{

  if (cameraParallel == 1)
  {
    // Camera is parallel, so the rayDir is just the direction of the camera.
    rayDirVC = vec3(0.0, 0.0, -1.0);
  } else {
    // camera is at 0,0,0 so rayDir for perspective is just the vc coord
    rayDirVC = normalize(vertexVCVSOutput);
  }

  vec3 tdims = vec3(volumeDimensions);

  // compute the start and end points for the ray
  vec2 rayStartEndDistancesVC = computeRayDistances(rayDirVC, tdims);

  // do we need to composite? aka does the ray have any length
  // If not, bail out early
  if (rayStartEndDistancesVC.y <= rayStartEndDistancesVC.x)
  {
    discard;
  }

  // IS = Index Space
  vec3 posIS;
  vec3 endIS;
  computeIndexSpaceValues(posIS, endIS, rayDirVC, rayStartEndDistancesVC);

  // Perform the blending operation along the ray
  applyBlend(posIS, endIS, tdims);
}
`;const{vtkWarningMacro:i8,vtkErrorMacro:C0}=wt;function o8(t,e){if(t.length!==e.length)return!1;for(let a=0;a<t.length;++a)if(t[a]!==e[a])return!1;return!0}function X1(t,e,a){if(e){const n=t.getIndependentComponents();return`${e.getMTime()}-${n}-${a}`}return"0"}function s8(t,e){e.classHierarchy.push("vtkOpenGLVolumeMapper"),t.buildPass=()=>{e.zBufferTexture=null},t.zBufferPass=(a,n)=>{if(a){const r=n.getZBufferTexture();r!==e.zBufferTexture&&(e.zBufferTexture=r)}},t.opaqueZBufferPass=(a,n)=>t.zBufferPass(a,n),t.volumePass=(a,n)=>{if(a){e._openGLRenderWindow=t.getFirstAncestorOfType("vtkOpenGLRenderWindow"),e.context=e._openGLRenderWindow.getContext(),e.tris.setOpenGLRenderWindow(e._openGLRenderWindow),e.jitterTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.framebuffer.setOpenGLRenderWindow(e._openGLRenderWindow),e.scalarTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.colorTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.opacityTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.labelOutlineThicknessTexture.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLVolume=t.getFirstAncestorOfType("vtkOpenGLVolume");const r=e.openGLVolume.getRenderable();e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer");const i=e._openGLRenderer.getRenderable();e.openGLCamera=e._openGLRenderer.getViewNodeFor(i.getActiveCamera()),t.renderPiece(i,r)}},t.buildShaders=(a,n,r)=>{t.getShaderTemplate(a,n,r),t.replaceShaderValues(a,n,r)},t.getShaderTemplate=(a,n,r)=>{a.Vertex=r8,a.Fragment=a8,a.Geometry=""},t.replaceShaderValues=(a,n,r)=>{let i=a.Fragment;r.getProperty().getInterpolationType()===S0.LINEAR&&(i=J.substitute(i,"//VTK::TrilinearOn","#define vtkTrilinearOn").result),r.getProperty().getUseLabelOutline()===!0&&(i=J.substitute(i,"//VTK::ImageLabelOutlineOn","#define vtkImageLabelOutlineOn").result);const c=e.scalarTexture.getComponents();i=J.substitute(i,"//VTK::NumComponents",`#define vtkNumComponents ${c}`).result;const o=r.getProperty().getIndependentComponents();if(o){i=J.substitute(i,"//VTK::IndependentComponentsOn","#define vtkIndependentComponentsOn").result;const d=[];for(let y=0;y<c;y++)r.getProperty().getOpacityMode(y)===$1.PROPORTIONAL&&d.push(`#define vtkComponent${y}Proportional`);d.length>0&&(i=J.substitute(i,"//VTK::vtkProportionalComponents",d.join(`
`)).result)}const f=e.currentInput.getSpatialExtent(),l=e.currentInput.getSpacing(),h=new Float64Array(3);He(h,(f[1]-f[0])*l[0],(f[3]-f[2])*l[1],(f[5]-f[4])*l[2]);const p=Cr(h)/t.getCurrentSampleDistance(n);i=J.substitute(i,"//VTK::MaximumSamplesValue",`${Math.ceil(p)}`).result,i=J.substitute(i,"//VTK::LightComplexity",`#define vtkLightComplexity ${e.lastLightComplexity}`).result,e.lastLightComplexity>0&&(e.renderable.getVolumetricScatteringBlending()>0&&(i=J.substitute(i,"//VTK::VolumeShadowOn","#define VolumeShadowOn").result),e.renderable.getVolumetricScatteringBlending()<1&&(i=J.substitute(i,"//VTK::SurfaceShadowOn","#define SurfaceShadowOn").result),e.renderable.getLocalAmbientOcclusion()&&r.getProperty().getAmbient()>0&&(i=J.substitute(i,"//VTK::localAmbientOcclusionOn","#define localAmbientOcclusionOn").result)),e.gopacity=r.getProperty().getUseGradientOpacity(0);for(let d=1;o&&!e.gopacity&&d<c;++d)r.getProperty().getUseGradientOpacity(d)&&(e.gopacity=!0);e.gopacity&&(i=J.substitute(i,"//VTK::GradientOpacityOn","#define vtkGradientOpacityOn").result),e.renderable.getComputeNormalFromOpacity()&&(i=J.substitute(i,"//VTK::vtkComputeNormalFromOpacity","#define vtkComputeNormalFromOpacity").result),e.zBufferTexture!==null&&(i=J.substitute(i,"//VTK::ZBuffer::Dec",["uniform sampler2D zBufferTexture;","uniform float vpZWidth;","uniform float vpZHeight;"]).result,i=J.substitute(i,"//VTK::ZBuffer::Impl",["vec4 depthVec = texture2D(zBufferTexture, vec2(gl_FragCoord.x / vpZWidth, gl_FragCoord.y/vpZHeight));","float zdepth = (depthVec.r*256.0 + depthVec.g)/257.0;","zdepth = zdepth * 2.0 - 1.0;","if (cameraParallel == 0) {","zdepth = -2.0 * camFar * camNear / (zdepth*(camFar-camNear)-(camFar+camNear)) - camNear;}","else {",`zdepth = (zdepth + 1.0) * 0.5 * (camFar - camNear);}
`,"zdepth = -zdepth/rayDir.z;","dists.y = min(zdepth,dists.y);"]).result),i=J.substitute(i,"//VTK::BlendMode",`${e.renderable.getBlendMode()}`).result,a.Fragment=i,t.replaceShaderLight(a,n,r),t.replaceShaderClippingPlane(a,n,r)},t.replaceShaderLight=(a,n,r)=>{if(e.lastLightComplexity===0)return;let i=a.Fragment,s=0;n.getLights().forEach(u=>{u.getSwitch()&&(s+=1)}),i=J.substitute(i,"//VTK::Light::Dec",["uniform int lightNum;","uniform bool twoSidedLighting;",`uniform vec3 lightColor[${s}];`,`uniform vec3 lightDirectionVC[${s}]; // normalized`,`uniform vec3 lightHalfAngleVC[${s}];`,"//VTK::Light::Dec"],!1).result,e.lastLightComplexity===3&&(i=J.substitute(i,"//VTK::Light::Dec",[`uniform vec3 lightPositionVC[${s}];`,`uniform vec3 lightAttenuation[${s}];`,`uniform float lightConeAngle[${s}];`,`uniform float lightExponent[${s}];`,`uniform int lightPositional[${s}];`],!1).result),e.renderable.getVolumetricScatteringBlending()>0&&(i=J.substitute(i,"//VTK::VolumeShadow::Dec",["uniform float volumetricScatteringBlending;","uniform float giReach;","uniform float volumeShadowSamplingDistFactor;","uniform float anisotropy;","uniform float anisotropy2;"],!1).result),e.renderable.getLocalAmbientOcclusion()&&r.getProperty().getAmbient()>0&&(i=J.substitute(i,"//VTK::LAO::Dec",["uniform int kernelRadius;",`uniform vec2 kernelSample[${e.renderable.getLAOKernelRadius()}];`,"uniform int kernelSize;"],!1).result),a.Fragment=i},t.replaceShaderClippingPlane=(a,n,r)=>{let i=a.Fragment;if(e.renderable.getClippingPlanes().length>0){const s=e.renderable.getClippingPlanes().length;i=J.substitute(i,"//VTK::ClipPlane::Dec",["uniform vec3 vClipPlaneNormals[6];","uniform float vClipPlaneDistances[6];","uniform vec3 vClipPlaneOrigins[6];","uniform int clip_numPlanes;","//VTK::ClipPlane::Dec","#define vtkClippingPlanesOn"],!1).result,i=J.substitute(i,"//VTK::ClipPlane::Impl",[`for(int i = 0; i < ${s}; i++) {`,"  float rayDirRatio = dot(rayDir, vClipPlaneNormals[i]);","  float equationResult = dot(vertexVCVSOutput, vClipPlaneNormals[i]) + vClipPlaneDistances[i];","  if (rayDirRatio == 0.0)","  {","    if (equationResult < 0.0) dists.x = dists.y;","    continue;","  }","  float result = -1.0 * equationResult / rayDirRatio;","  if (rayDirRatio < 0.0) dists.y = min(dists.y, result);","  else dists.x = max(dists.x, result);","}","//VTK::ClipPlane::Impl"],!1).result}a.Fragment=i},t.getNeedToRebuildShaders=(a,n,r)=>{var m;let i=0;r.getProperty().getShade()&&e.renderable.getBlendMode()===K1.COMPOSITE_BLEND&&(i=0,e.numberOfLights=0,n.getLights().forEach(S=>{S.getSwitch()>0&&(e.numberOfLights++,i===0&&(i=1)),i===1&&(e.numberOfLights>1||S.getIntensity()!==1||!S.lightTypeIsHeadLight())&&(i=2),i<3&&S.getPositional()&&(i=3)}));let s=!1;e.lastLightComplexity!==i&&(e.lastLightComplexity=i,s=!0);const u=e.scalarTexture.getComponents(),c=r.getProperty().getIndependentComponents();let o=!1;const f=[];if(c){for(let S=0;S<u;S++)f.push(r.getProperty().getOpacityMode(S));f.length>0&&(o=!0)}const l=e.currentInput.getSpatialExtent(),h=e.currentInput.getSpacing(),p=new Float64Array(3);He(p,(l[1]-l[0])*h[0],(l[3]-l[2])*h[1],(l[5]-l[4])*h[2]);const d=Cr(p)/t.getCurrentSampleDistance(n),y={interpolationType:r.getProperty().getInterpolationType(),useLabelOutline:r.getProperty().getUseLabelOutline(),numComp:u,usesProportionalComponents:o,iComps:c,maxSamples:d,useGradientOpacity:r.getProperty().getUseGradientOpacity(0),blendMode:e.renderable.getBlendMode(),proportionalComponents:f};return!e.previousState||e.previousState.interpolationType!==y.interpolationType||e.previousState.useLabelOutline!==y.useLabelOutline||e.previousState.numComp!==y.numComp||e.previousState.usesProportionalComponents!==y.usesProportionalComponents||e.previousState.iComps!==y.iComps||e.previousState.maxSamples!==y.maxSamples||e.previousState.useGradientOpacity!==y.useGradientOpacity||e.previousState.blendMode!==y.blendMode||!o8(e.previousState.proportionalComponents,y.proportionalComponents)?(e.previousState={...y},!0):((m=a.getProgram())==null?void 0:m.getHandle())===0||s||e.lastHaveSeenDepthRequest!==e.haveSeenDepthRequest||!!e.lastZBufferTexture!=!!e.zBufferTexture||a.getShaderSourceTime().getMTime()<t.getMTime()||a.getShaderSourceTime().getMTime()<e.renderable.getMTime()?(e.lastZBufferTexture=e.zBufferTexture,!0):!1},t.updateShaders=(a,n,r)=>{if(e.lastBoundBO=a,t.getNeedToRebuildShaders(a,n,r)){const i={Vertex:null,Fragment:null,Geometry:null};t.buildShaders(i,n,r);const s=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(i.Vertex,i.Fragment,i.Geometry);s!==a.getProgram()&&(a.setProgram(s),a.getVAO().releaseGraphicsResources()),a.getShaderSourceTime().modified()}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(a.getProgram());a.getVAO().bind(),t.setMapperShaderParameters(a,n,r),t.setCameraShaderParameters(a,n,r),t.setPropertyShaderParameters(a,n,r),t.getClippingPlaneShaderParameters(a,n,r)},t.setMapperShaderParameters=(a,n,r)=>{const i=a.getProgram();a.getCABO().getElementCount()&&(e.VBOBuildTime.getMTime()>a.getAttributeUpdateTime().getMTime()||a.getShaderSourceTime().getMTime()>a.getAttributeUpdateTime().getMTime())&&(i.isAttributeUsed("vertexDC")&&(a.getVAO().addAttributeArray(i,a.getCABO(),"vertexDC",a.getCABO().getVertexOffset(),a.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||C0("Error setting vertexDC in shader VAO.")),a.getAttributeUpdateTime().modified()),i.setUniformi("texture1",e.scalarTexture.getTextureUnit()),i.setUniformf("sampleDistance",t.getCurrentSampleDistance(n));const s=e.scalarTexture.getVolumeInfo(),u=e.renderable.getIpScalarRange(),c=[],o=[];for(let f=0;f<4;f++)c[f]=u[0]*s.dataComputedScale[f]+s.dataComputedOffset[f],o[f]=u[1]*s.dataComputedScale[f]+s.dataComputedOffset[f],c[f]=(c[f]-s.offset[f])/s.scale[f],o[f]=(o[f]-s.offset[f])/s.scale[f];if(i.setUniform4f("ipScalarRangeMin",c[0],c[1],c[2],c[3]),i.setUniform4f("ipScalarRangeMax",o[0],o[1],o[2],o[3]),e.zBufferTexture!==null){i.setUniformi("zBufferTexture",e.zBufferTexture.getTextureUnit());const f=e._useSmallViewport?[e._smallViewportWidth,e._smallViewportHeight]:e._openGLRenderWindow.getFramebufferSize();i.setUniformf("vpZWidth",f[0]),i.setUniformf("vpZHeight",f[1])}},t.setCameraShaderParameters=(a,n,r)=>{const i=e.openGLCamera.getKeyMatrices(n),s=e.openGLVolume.getKeyMatrices();Ge(e.modelToView,i.wcvc,s.mcwc);const u=a.getProgram(),c=e.openGLCamera.getRenderable(),o=c.getClippingRange();u.setUniformf("camThick",o[1]-o[0]),u.setUniformf("camNear",o[0]),u.setUniformf("camFar",o[1]);const f=e.currentInput.getBounds(),l=e.currentInput.getDimensions(),h=new Float64Array(3),p=new Float64Array(3);let d=1,y=-1,m=1,S=-1;for(let M=0;M<8;++M){if(He(h,f[M%2],f[2+Math.floor(M/2)%2],f[4+Math.floor(M/4)]),Te(h,h,e.modelToView),!c.getParallelProjection()){jt(p,h);const A=-o[0]/h[2];On(h,p,A)}Te(h,h,i.vcpc),d=Math.min(h[0],d),y=Math.max(h[0],y),m=Math.min(h[1],m),S=Math.max(h[1],S)}u.setUniformf("dcxmin",d),u.setUniformf("dcxmax",y),u.setUniformf("dcymin",m),u.setUniformf("dcymax",S),u.isUniformUsed("cameraParallel")&&u.setUniformi("cameraParallel",c.getParallelProjection());const v=e.currentInput.getSpatialExtent(),g=e.currentInput.getSpacing(),x=new Float64Array(3);He(x,(v[1]-v[0])*g[0],(v[3]-v[2])*g[1],(v[5]-v[4])*g[2]),u.setUniform3f("vSpacing",g[0],g[1],g[2]),He(h,v[0],v[2],v[4]),e.currentInput.indexToWorldVec3(h,h),Te(h,h,e.modelToView),u.setUniform3f("vOriginVC",h[0],h[1],h[2]);const C=e.currentInput.getIndexToWorld();Ge(e.idxToView,e.modelToView,C),Sr(e.idxNormalMatrix,i.normalMatrix,s.normalMatrix),Sr(e.idxNormalMatrix,e.idxNormalMatrix,e.currentInput.getDirectionByReference());const T=Cr(x)/t.getCurrentSampleDistance(n);T>e.renderable.getMaximumSamplesPerRay()&&i8(`The number of steps required ${Math.ceil(T)} is larger than the
        specified maximum number of steps ${e.renderable.getMaximumSamplesPerRay()}.
        Please either change the
        volumeMapper sampleDistance or its maximum number of samples.`);const w=new Float64Array(3);if(He(w,1,1,1),Md(w,w,x),u.setUniform3f("vVCToIJK",w[0],w[1],w[2]),u.setUniform3i("volumeDimensions",l[0],l[1],l[2]),!e._openGLRenderWindow.getWebgl2()){const M=e.scalarTexture.getVolumeInfo();u.setUniformf("texWidth",e.scalarTexture.getWidth()),u.setUniformf("texHeight",e.scalarTexture.getHeight()),u.setUniformi("xreps",M.xreps),u.setUniformi("xstride",M.xstride),u.setUniformi("ystride",M.ystride)}const _=new Float64Array(3),E=new Float64Array(3);for(let M=0;M<6;++M){switch(M){case 1:He(_,-1,0,0),He(E,v[0],v[2],v[4]);break;case 2:He(_,0,1,0),He(E,v[1],v[3],v[5]);break;case 3:He(_,0,-1,0),He(E,v[0],v[2],v[4]);break;case 4:He(_,0,0,1),He(E,v[1],v[3],v[5]);break;case 5:He(_,0,0,-1),He(E,v[0],v[2],v[4]);break;case 0:default:He(_,1,0,0),He(E,v[1],v[3],v[5]);break}ai(_,_,e.idxNormalMatrix),Te(E,E,e.idxToView);const A=-1*aa(E,_);u.setUniform3f(`vPlaneNormal${M}`,_[0],_[1],_[2]),u.setUniformf(`vPlaneDistance${M}`,A)}if(r.getProperty().getUseLabelOutline()){const A=e.currentInput.getWorldToIndex();u.setUniformMatrix("vWCtoIDX",A);const I=n.getActiveCamera(),[$,U]=I.getClippingRange(),B=I.getDistance();I.setClippingRange(B,B+.1);const F=e.openGLCamera.getKeyMatrices(n);Nt(e.projectionToWorld,F.wcpc),I.setClippingRange($,U),e.openGLCamera.getKeyMatrices(n),u.setUniformMatrix("PCWCMatrix",e.projectionToWorld);const z=t.getRenderTargetSize();u.setUniformf("vpWidth",z[0]),u.setUniformf("vpHeight",z[1]);const H=t.getRenderTargetOffset();u.setUniformf("vpOffsetX",H[0]/z[0]),u.setUniformf("vpOffsetY",H[1]/z[1])}if(Nt(e.projectionToView,i.vcpc),u.setUniformMatrix("PCVCMatrix",e.projectionToView),e.lastLightComplexity===0)return;let D=0;const b=[],N=[],R=[];if(n.getLights().forEach(M=>{if(M.getSwitch()>0){const I=M.getColor(),$=M.getIntensity();b[0+D*3]=I[0]*$,b[1+D*3]=I[1]*$,b[2+D*3]=I[2]*$;const U=M.getDirection();He(_,U[0],U[1],U[2]),ai(_,_,i.normalMatrix),jt(_,_),N[0+D*3]=_[0],N[1+D*3]=_[1],N[2+D*3]=_[2],R[0+D*3]=-.5*_[0],R[1+D*3]=-.5*_[1],R[2+D*3]=-.5*(_[2]-1),D++}}),u.setUniformi("twoSidedLighting",n.getTwoSidedLighting()),u.setUniformi("lightNum",D),u.setUniform3fv("lightColor",b),u.setUniform3fv("lightDirectionVC",N),u.setUniform3fv("lightHalfAngleVC",R),e.lastLightComplexity===3){D=0;const M=[],A=[],I=[],$=[],U=[];n.getLights().forEach(B=>{if(B.getSwitch()>0){const z=B.getAttenuationValues();A[0+D*3]=z[0],A[1+D*3]=z[1],A[2+D*3]=z[2],$[D]=B.getExponent(),I[D]=B.getConeAngle(),U[D]=B.getPositional();const H=B.getTransformedPosition();Te(H,H,e.modelToView),M[0+D*3]=H[0],M[1+D*3]=H[1],M[2+D*3]=H[2],D+=1}}),u.setUniform3fv("lightPositionVC",M),u.setUniform3fv("lightAttenuation",A),u.setUniformfv("lightConeAngle",I),u.setUniformfv("lightExponent",$),u.setUniformiv("lightPositional",U)}if(e.renderable.getVolumetricScatteringBlending()>0&&(u.setUniformf("giReach",e.renderable.getGlobalIlluminationReach()),u.setUniformf("volumetricScatteringBlending",e.renderable.getVolumetricScatteringBlending()),u.setUniformf("volumeShadowSamplingDistFactor",e.renderable.getVolumeShadowSamplingDistFactor()),u.setUniformf("anisotropy",e.renderable.getAnisotropy()),u.setUniformf("anisotropy2",e.renderable.getAnisotropy()**2)),e.renderable.getLocalAmbientOcclusion()&&r.getProperty().getAmbient()>0){const M=e.renderable.getLAOKernelSize();u.setUniformi("kernelSize",M);const A=[];for(let I=0;I<M;I++)A[I*2]=Math.random()*.5,A[I*2+1]=Math.random()*.5;u.setUniform2fv("kernelSample",A),u.setUniformi("kernelRadius",e.renderable.getLAOKernelRadius())}},t.setPropertyShaderParameters=(a,n,r)=>{const i=a.getProgram();i.setUniformi("ctexture",e.colorTexture.getTextureUnit()),i.setUniformi("otexture",e.opacityTexture.getTextureUnit()),i.setUniformi("jtexture",e.jitterTexture.getTextureUnit()),i.setUniformi("ttexture",e.labelOutlineThicknessTexture.getTextureUnit());const s=e.scalarTexture.getVolumeInfo(),u=r.getProperty(),c=e.scalarTexture.getComponents(),o=r.getProperty().getIndependentComponents();if(o&&c>=2)for(let l=0;l<c;l++)i.setUniformf(`mix${l}`,r.getProperty().getComponentWeight(l));for(let l=0;l<c;l++){const h=o?l:0,p=s.scale[l],y=u.getScalarOpacity(h).getRange(),m=p/(y[1]-y[0]),S=(s.offset[l]-y[0])/(y[1]-y[0]);i.setUniformf(`oshift${l}`,S),i.setUniformf(`oscale${l}`,m);const g=u.getRGBTransferFunction(h).getRange(),x=(s.offset[l]-g[0])/(g[1]-g[0]),C=p/(g[1]-g[0]);i.setUniformf(`cshift${l}`,x),i.setUniformf(`cscale${l}`,C)}if(e.gopacity)if(o)for(let l=0;l<c;++l){const h=s.scale[l];if(u.getUseGradientOpacity(l)){const d=u.getGradientOpacityMinimumOpacity(l),y=u.getGradientOpacityMaximumOpacity(l);i.setUniformf(`gomin${l}`,d),i.setUniformf(`gomax${l}`,y);const m=[u.getGradientOpacityMinimumValue(l),u.getGradientOpacityMaximumValue(l)];i.setUniformf(`goscale${l}`,h*(y-d)/(m[1]-m[0])),i.setUniformf(`goshift${l}`,-m[0]*(y-d)/(m[1]-m[0])+d)}else i.setUniformf(`gomin${l}`,1),i.setUniformf(`gomax${l}`,1),i.setUniformf(`goscale${l}`,0),i.setUniformf(`goshift${l}`,1)}else{const l=s.scale[c-1],h=u.getGradientOpacityMinimumOpacity(0),p=u.getGradientOpacityMaximumOpacity(0);i.setUniformf("gomin0",h),i.setUniformf("gomax0",p);const d=[u.getGradientOpacityMinimumValue(0),u.getGradientOpacityMaximumValue(0)];i.setUniformf("goscale0",l*(p-h)/(d[1]-d[0])),i.setUniformf("goshift0",-d[0]*(p-h)/(d[1]-d[0])+h)}if(r.getProperty().getUseLabelOutline()===!0){const l=r.getProperty().getLabelOutlineOpacity();i.setUniformf("outlineOpacity",l)}e.lastLightComplexity>0&&(i.setUniformf("vAmbient",u.getAmbient()),i.setUniformf("vDiffuse",u.getDiffuse()),i.setUniformf("vSpecular",u.getSpecular()),i.setUniformf("vSpecularPower",u.getSpecularPower()))},t.getClippingPlaneShaderParameters=(a,n,r)=>{if(e.renderable.getClippingPlanes().length>0){const i=e.openGLCamera.getKeyMatrices(n),s=[],u=[],c=[],o=e.renderable.getClippingPlanes(),f=o.length;for(let h=0;h<f;++h){const p=o[h].getNormal(),d=o[h].getOrigin();ai(p,p,i.normalMatrix),Te(d,d,i.wcvc);const y=-1*aa(d,p);s.push(p[0]),s.push(p[1]),s.push(p[2]),u.push(y),c.push(d[0]),c.push(d[1]),c.push(d[2])}const l=a.getProgram();l.setUniform3fv("vClipPlaneNormals",s),l.setUniformfv("vClipPlaneDistances",u),l.setUniform3fv("vClipPlaneOrigins",c),l.setUniformi("clip_numPlanes",f)}},t.delete=Nr(()=>{e._animationRateSubscription&&(e._animationRateSubscription.unsubscribe(),e._animationRateSubscription=null)},t.delete),t.getRenderTargetSize=()=>{if(e._useSmallViewport)return[e._smallViewportWidth,e._smallViewportHeight];const{usize:a,vsize:n}=e._openGLRenderer.getTiledSizeAndOrigin();return[a,n]},t.getRenderTargetOffset=()=>{const{lowerLeftU:a,lowerLeftV:n}=e._openGLRenderer.getTiledSizeAndOrigin();return[a,n]},t.getCurrentSampleDistance=a=>{const n=a.getVTKWindow().getInteractor(),r=e.renderable.getSampleDistance();if(n.isAnimating()){const i=e.renderable.getInteractionSampleDistanceFactor();return r*i}return r},t.renderPieceStart=(a,n)=>{const r=a.getVTKWindow().getInteractor();if(e._lastScale||(e._lastScale=e.renderable.getInitialInteractionScale()),e._useSmallViewport=!1,r.isAnimating()&&e._lastScale>1.5&&(e._useSmallViewport=!0),e._animationRateSubscription||(e._animationRateSubscription=r.onAnimationFrameRateUpdate(()=>{if(e.renderable.getAutoAdjustSampleDistances()){const s=r.getRecentAnimationFrameRate(),u=r.getDesiredUpdateRate()/s;(u>1.15||u<.85)&&(e._lastScale*=u),e._lastScale>400&&(e._lastScale=400),e._lastScale<1.5&&(e._lastScale=1.5)}else e._lastScale=e.renderable.getImageSampleDistance()*e.renderable.getImageSampleDistance()})),e._useSmallViewport){const s=e._openGLRenderWindow.getFramebufferSize(),u=1/Math.sqrt(e._lastScale);if(e._smallViewportWidth=Math.ceil(u*s[0]),e._smallViewportHeight=Math.ceil(u*s[1]),e._smallViewportHeight>s[1]&&(e._smallViewportHeight=s[1]),e._smallViewportWidth>s[0]&&(e._smallViewportWidth=s[0]),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.getGLFramebuffer()===null)e.framebuffer.create(s[0],s[1]),e.framebuffer.populateFramebuffer();else{const o=e.framebuffer.getSize();(o[0]!==s[0]||o[1]!==s[1])&&(e.framebuffer.create(s[0],s[1]),e.framebuffer.populateFramebuffer())}e.framebuffer.bind();const c=e.context;c.clearColor(0,0,0,0),c.colorMask(!0,!0,!0,!0),c.clear(c.COLOR_BUFFER_BIT),c.viewport(0,0,e._smallViewportWidth,e._smallViewportHeight),e.fvp=[e._smallViewportWidth/s[0],e._smallViewportHeight/s[1]]}e.context.disable(e.context.DEPTH_TEST),t.updateBufferObjects(a,n),n.getProperty().getInterpolationType()===S0.NEAREST?(e.scalarTexture.setMinificationFilter(ye.NEAREST),e.scalarTexture.setMagnificationFilter(ye.NEAREST)):(e.scalarTexture.setMinificationFilter(ye.LINEAR),e.scalarTexture.setMagnificationFilter(ye.LINEAR)),e.lastBoundBO=null,e.zBufferTexture!==null&&e.zBufferTexture.activate()},t.renderPieceDraw=(a,n)=>{const r=e.context;e.scalarTexture.activate(),e.opacityTexture.activate(),e.labelOutlineThicknessTexture.activate(),e.colorTexture.activate(),e.jitterTexture.activate(),t.updateShaders(e.tris,a,n),r.drawArrays(r.TRIANGLES,0,e.tris.getCABO().getElementCount()),e.tris.getVAO().release(),e.scalarTexture.deactivate(),e.colorTexture.deactivate(),e.opacityTexture.deactivate(),e.labelOutlineThicknessTexture.deactivate(),e.jitterTexture.deactivate()},t.renderPieceFinish=(a,n)=>{if(e.zBufferTexture!==null&&e.zBufferTexture.deactivate(),e._useSmallViewport){if(e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null){e.copyShader=e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","uniform vec2 tfactor;","varying vec2 tcoord;","void main() { tcoord = vec2(vertexDC.x*0.5 + 0.5, vertexDC.y*0.5 + 0.5) * tfactor; gl_Position = vertexDC; }"].join(`
`),["//VTK::System::Dec","//VTK::Output::Dec","uniform sampler2D texture1;","varying vec2 tcoord;","void main() { gl_FragData[0] = texture2D(texture1,tcoord); }"].join(`
`),"");const u=e.copyShader;e.copyVAO=Ma.newInstance(),e.copyVAO.setOpenGLRenderWindow(e._openGLRenderWindow),e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(u,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE)||C0("Error setting vertexDC in copy shader VAO.")}else e._openGLRenderWindow.getShaderCache().readyShaderProgram(e.copyShader);const r=e._openGLRenderWindow.getFramebufferSize();e.context.viewport(0,0,r[0],r[1]);const i=e.framebuffer.getColorTexture();i.activate(),e.copyShader.setUniformi("texture",i.getTextureUnit()),e.copyShader.setUniform2f("tfactor",e.fvp[0],e.fvp[1]);const s=e.context;s.blendFuncSeparate(s.ONE,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA),e.context.drawArrays(e.context.TRIANGLES,0,e.tris.getCABO().getElementCount()),i.deactivate(),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA)}},t.renderPiece=(a,n)=>{if(t.invokeEvent({type:"StartEvent"}),e.renderable.update(),e.currentInput=e.renderable.getInputData(),t.invokeEvent({type:"EndEvent"}),!e.currentInput){C0("No input!");return}t.renderPieceStart(a,n),t.renderPieceDraw(a,n),t.renderPieceFinish(a,n)},t.computeBounds=(a,n)=>{if(!t.getInput()){Fr(e.Bounds);return}e.bounds=t.getInput().getBounds()},t.updateBufferObjects=(a,n)=>{t.getNeedToRebuildBufferObjects(a,n)&&t.buildBufferObjects(a,n)},t.getNeedToRebuildBufferObjects=(a,n)=>e.VBOBuildTime.getMTime()<t.getMTime()||e.VBOBuildTime.getMTime()<n.getMTime()||e.VBOBuildTime.getMTime()<e.renderable.getMTime()||e.VBOBuildTime.getMTime()<n.getProperty().getMTime()||e.VBOBuildTime.getMTime()<e.currentInput.getMTime(),t.buildBufferObjects=(a,n)=>{const r=e.currentInput;if(!r)return;const i=r.getPointData()&&r.getPointData().getScalars();if(!i)return;e._scalars!==i&&(e._openGLRenderWindow.releaseGraphicsResourcesForObject(e._scalars),e._scalars=i);const s=n.getProperty();if(!e.jitterTexture.getHandle()){const g=new Uint8Array(1024);for(let x=0;x<32*32;++x)g[x]=255*Math.random();e.jitterTexture.setMinificationFilter(ye.LINEAR),e.jitterTexture.setMagnificationFilter(ye.LINEAR),e.jitterTexture.create2DFromRaw(32,32,1,Ne.UNSIGNED_CHAR,g)}const u=i.getNumberOfComponents(),o=s.getIndependentComponents()?u:1,f=s.getScalarOpacity(),l=e._openGLRenderWindow.getGraphicsResourceForObject(f);let h=X1(s,f,o);if(!l.vtkObj||l.hash!==h||e.opacityTextureString!==h){const x=2048*o,C=new Float32Array(x),T=new Float32Array(1024);for(let w=0;w<o;++w){const _=s.getScalarOpacity(w),E=t.getCurrentSampleDistance(a)/s.getScalarOpacityUnitDistance(w),D=_.getRange();_.getTable(D[0],D[1],1024,T,1);for(let b=0;b<1024;++b)C[w*1024*2+b]=1-(1-T[b])**E,C[w*1024*2+b+1024]=C[w*1024*2+b]}if(e.opacityTexture.releaseGraphicsResources(e._openGLRenderWindow),e.opacityTexture.resetFormatAndType(),e.opacityTexture.setMinificationFilter(ye.LINEAR),e.opacityTexture.setMagnificationFilter(ye.LINEAR),e._openGLRenderWindow.getWebgl2()||e.context.getExtension("OES_texture_float")&&e.context.getExtension("OES_texture_float_linear"))e.opacityTexture.create2DFromRaw(1024,2*o,1,Ne.FLOAT,C);else{const w=new Uint8Array(x);for(let _=0;_<x;++_)w[_]=255*C[_];e.opacityTexture.create2DFromRaw(1024,2*o,1,Ne.UNSIGNED_CHAR,w)}e.opacityTextureString=h,f&&e._openGLRenderWindow.setGraphicsResourceForObject(f,e.opacityTexture,e.opacityTextureString)}else e.opacityTexture=l.vtkObj,e.opacityTextureString=l.hash;const d=s.getRGBTransferFunction();h=X1(s,d,o);const y=e._openGLRenderWindow.getGraphicsResourceForObject(d);if(!(y!=null&&y.vtkObj)||(y==null?void 0:y.hash)!==h||e.colorTextureString!==h){const x=2048*o*3,C=new Uint8Array(x),T=new Float32Array(1024*3);for(let w=0;w<o;++w){const _=s.getRGBTransferFunction(w),E=_.getRange();_.getTable(E[0],E[1],1024,T,1);for(let D=0;D<1024*3;++D)C[w*1024*6+D]=255*T[D],C[w*1024*6+D+1024*3]=255*T[D]}e.colorTexture.releaseGraphicsResources(e._openGLRenderWindow),e.colorTexture.resetFormatAndType(),e.colorTexture.setMinificationFilter(ye.LINEAR),e.colorTexture.setMagnificationFilter(ye.LINEAR),e.colorTexture.create2DFromRaw(1024,2*o,3,Ne.UNSIGNED_CHAR,C),e.colorTextureString=h,d&&e._openGLRenderWindow.setGraphicsResourceForObject(d,e.colorTexture,e.colorTextureString)}else e.colorTexture=y.vtkObj,e.colorTextureString=y.hash;t.updateLabelOutlineThicknessTexture(n);const S=e._openGLRenderWindow.getGraphicsResourceForObject(i);if(h=`${r.getMTime()}A${i.getMTime()}`,!(S!=null&&S.vtkObj)||(S==null?void 0:S.hash)!==h||e.scalarTextureString!==h){const g=r.getDimensions();e.scalarTexture.setOglNorm16Ext(e.context.getExtension("EXT_texture_norm16")),e.scalarTexture.releaseGraphicsResources(e._openGLRenderWindow),e.scalarTexture.resetFormatAndType(),e.scalarTexture.create3DFilterableFromDataArray(g[0],g[1],g[2],i,e.renderable.getPreferSizeOverAccuracy()),e.scalarTextureString=h,i&&e._openGLRenderWindow.setGraphicsResourceForObject(i,e.scalarTexture,e.scalarTextureString)}else e.scalarTexture=S.vtkObj,e.scalarTextureString=S.hash;if(!e.tris.getCABO().getElementCount()){const g=new Float32Array(12);for(let w=0;w<4;w++)g[w*3]=w%2*2-1,g[w*3+1]=w>1?1:-1,g[w*3+2]=-1;const x=new Uint16Array(8);x[0]=3,x[1]=0,x[2]=1,x[3]=3,x[4]=3,x[5]=0,x[6]=3,x[7]=2;const C=pe.newInstance({numberOfComponents:3,values:g});C.setName("points");const T=pe.newInstance({numberOfComponents:1,values:x});e.tris.getCABO().createVBO(T,"polys",Kt.SURFACE,{points:C,cellOffset:0})}e.VBOBuildTime.modified()},t.updateLabelOutlineThicknessTexture=a=>{const n=a.getProperty().getLabelOutlineThickness(),r=e._openGLRenderWindow.getGraphicsResourceForObject(n),i=`${n.join("-")}`;if(!(r!=null&&r.vtkObj)||(r==null?void 0:r.hash)!==i||e.labelOutlineThicknessTextureString!==i){const f=new Uint8Array(1024);for(let l=0;l<1024;++l){const h=n[l]||n[0];f[l]=h}e.labelOutlineThicknessTexture.releaseGraphicsResources(e._openGLRenderWindow),e.labelOutlineThicknessTexture.resetFormatAndType(),e.labelOutlineThicknessTexture.setMinificationFilter(ye.NEAREST),e.labelOutlineThicknessTexture.setMagnificationFilter(ye.NEAREST),e.labelOutlineThicknessTexture.create2DFromRaw(1024,1,1,Ne.UNSIGNED_CHAR,f),e.labelOutlineThicknessTextureString=i,n&&e._openGLRenderWindow.setGraphicsResourceForObject(n,e.labelOutlineThicknessTexture,e.labelOutlineThicknessTextureString)}else e.labelOutlineThicknessTexture=r.vtkObj,e.labelOutlineThicknessTextureString=r.hash}}const u8={context:null,VBOBuildTime:null,scalarTexture:null,scalarTextureString:null,opacityTexture:null,opacityTextureString:null,colorTexture:null,colorTextureString:null,jitterTexture:null,labelOutlineThicknessTexture:null,labelOutlineThicknessTextureString:null,tris:null,framebuffer:null,copyShader:null,copyVAO:null,lastXYF:1,targetXYF:1,zBufferTexture:null,lastZBufferTexture:null,lastLightComplexity:0,fullViewportTime:1,idxToView:null,idxNormalMatrix:null,modelToView:null,projectionToView:null,avgWindowArea:0,avgFrameTime:0,_scalars:null};function c8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,u8,a),vt.extend(t,e,a),e.VBOBuildTime={},ot(e.VBOBuildTime,{mtime:0}),e.tris=Gt.newInstance(),e.scalarTexture=Me.newInstance(),e.opacityTexture=Me.newInstance(),e.colorTexture=Me.newInstance(),e.jitterTexture=Me.newInstance(),e.jitterTexture.setWrapS(Ra.REPEAT),e.jitterTexture.setWrapT(Ra.REPEAT),e.labelOutlineThicknessTexture=Me.newInstance(),e.framebuffer=fr.newInstance(),e.idxToView=Se(new Float64Array(16)),e.idxNormalMatrix=zt(new Float64Array(9)),e.modelToView=Se(new Float64Array(16)),e.projectionToView=Se(new Float64Array(16)),e.projectionToWorld=Se(new Float64Array(16)),lt(t,e,["context"]),s8(t,e)}const l8=Ke(c8,"vtkOpenGLVolumeMapper");st("vtkVolumeMapper",l8);const{vtkDebugMacro:f8}=wt;function h8(t,e){e.classHierarchy.push("vtkOpenGLPixelSpaceCallbackMapper"),t.opaquePass=(a,n)=>{e._openGLRenderer=t.getFirstAncestorOfType("vtkOpenGLRenderer"),e._openGLRenderWindow=e._openGLRenderer.getParent();const r=e._openGLRenderer.getAspectRatio(),i=e._openGLRenderer?e._openGLRenderer.getRenderable().getActiveCamera():null,s=e._openGLRenderer.getTiledSizeAndOrigin();let u=null;if(e.renderable.getUseZValues()){const c=n.getZBufferTexture(),o=Math.floor(c.getWidth()),f=Math.floor(c.getHeight()),l=e._openGLRenderWindow.getContext();c.bind();const h=n.getFramebuffer();h?h.saveCurrentBindingsAndBuffers():f8("No framebuffer to save/restore");const p=l.createFramebuffer();l.bindFramebuffer(l.FRAMEBUFFER,p),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,c.getHandle(),0),l.checkFramebufferStatus(l.FRAMEBUFFER)===l.FRAMEBUFFER_COMPLETE&&(u=new Uint8Array(o*f*4),l.viewport(0,0,o,f),l.readPixels(0,0,o,f,l.RGBA,l.UNSIGNED_BYTE,u)),h&&h.restorePreviousBindingsAndBuffers(),l.deleteFramebuffer(p)}e.renderable.invokeCallback(e.renderable.getInputData(),i,r,s,u)},t.queryPass=(a,n)=>{a&&e.renderable.getUseZValues()&&n.requestDepth()}}const p8={};function g8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,p8,a),vt.extend(t,e,a),h8(t,e)}const d8=Ke(g8,"vtkOpenGLPixelSpaceCallbackMapper");st("vtkPixelSpaceCallbackMapper",d8);var v8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_LIC0.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

/**
This shader initializes the convolution for the LIC computation.
*/

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texMaskVectors;
uniform sampler2D texNoise;
uniform sampler2D texLIC;

uniform int   uStepNo;         // in step 0 initialize lic and seeds, else just seeds
uniform int   uPassNo;         // in pass 1 hpf of pass 0 is convolved.
uniform float uMaskThreshold;  // if |V| < uMaskThreshold render transparent
uniform vec2  uNoiseBoundsPt1; // tc of upper right pt of noise texture

in vec2 tcoordVC;

// convert from vector coordinate space to noise coordinate space.
// the noise texture is tiled across the *whole* domain
vec2 VectorTCToNoiseTC(vec2 vectc)
{
  return vectc/uNoiseBoundsPt1;
}

// get the texture coordidnate to lookup noise value. this
// depends on the pass number.
vec2 getNoiseTC(vec2 vectc)
{
  // in pass 1 : convert from vector tc to noise tc
  // in pass 2 : use vector tc
  if (uPassNo == 0)
    {
    return VectorTCToNoiseTC(vectc);
    }
  else
    {
    return vectc;
    }
}

// look up noise value at the given location. The location
// is supplied in vector texture coordinates, hence the
// need to convert to noise texture coordinates.
float getNoise(vec2 vectc)
{
  return texture2D(texNoise, getNoiseTC(vectc)).r;
}

void main(void)
{
  vec2 vectc = tcoordVC.st;

  // lic => (convolution, mask, 0, step count)
  if (uStepNo == 0)
    {
    float maskCriteria = length(texture2D(texMaskVectors, vectc).xyz);
    float maskFlag;
    if (maskCriteria <= uMaskThreshold)
      {
      maskFlag = 1.0;
      }
    else
      {
      maskFlag = 0.0;
      }
    float noise = getNoise(vectc);
    LICOutput = vec4(noise, maskFlag, 0.0, 1.0);
    }
  else
    {
    LICOutput = texture2D(texLIC, vectc);
    }

  // initial seed
  SeedOutput = vec4(vectc, 0.0, 1.0);
}
`,y8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_fs1.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D  texVectors;
uniform sampler2D  texNoise;
uniform sampler2D  texLIC;
uniform sampler2D  texSeedPts;

uniform int   uPassNo;          // in pass 1 hpf of pass 0 is convolved.
uniform float uStepSize;        // step size in parametric space

uniform vec2  uNoiseBoundsPt1;  // tc of upper right pt of noise texture

in vec2 tcoordVC;

//VTK::LICVectorLookup::Impl

// We need to do this manually since CLAMP_TO_BORDER and and borderColor
// are very poorly supported in webgl
vec2 clampToBorder(vec2 uv){
  if(uv.x < 0.0 || uv.x > 1.0 || uv.y < 0.0 || uv.y > 1.0)
  {
    return vec2(0.0, 0.0);
  }
  return getVector(uv);
}

// convert from vector coordinate space to noise coordinate space.
// the noise texture is tiled across the whole domain
vec2 VectorTCToNoiseTC(vec2 vectc)
{
  return vectc/uNoiseBoundsPt1;
}

// get the texture coordidnate to lookup noise value.
// in pass 1 repeatedly tile the noise texture across
// the computational domain.
vec2 getNoiseTC(vec2 tc)
{
  if (uPassNo == 0)
    {
    return VectorTCToNoiseTC(tc);
    }
  else
    {
    return tc;
    }
}

// look up noise value at the given location. The location
// is supplied in vector texture coordinates, hence the need
// to convert to either noise or lic texture coordinates in
// pass 1 and 2 respectively.
float getNoise(vec2 vectc)
{
  return texture2D(texNoise, getNoiseTC(vectc)).r;
}

// fourth-order Runge-Kutta streamline integration
// no bounds checks are made, therefore it's essential
// to have the entire texture initialized to 0
// and set clamp to border and have border color 0
// an integer is set if the step was taken, keeping
// an accurate step count is necessary to prevent
// boundary artifacts. Don't count the step if
// all vector lookups are identically 0. This is
// a proxy for "stepped outside valid domain"
vec2 rk4(vec2 pt0, float dt, out bool count)
{
  count=true;
  float dtHalf = dt * 0.5;
  vec2 pt1;

  vec2 v0 = clampToBorder(pt0);
  pt1 = pt0 + v0 * dtHalf;

  vec2 v1 = clampToBorder(pt1);
  pt1 = pt0 + v1 * dtHalf;

  vec2 v2 = clampToBorder(pt1);
  pt1 = pt0 + v2 * dt;

  vec2 v3 = clampToBorder(pt1);
  vec2 vSum = v0 + v1 + v1 + v2 + v2 + v3;

  if (vSum == vec2(0.0, 0.0))
    {
      count = false;
    }

  pt1 = pt0 + (vSum) * (dt * (1.0/6.0));

 return pt1;
}

void main(void)
{
  vec2 lictc = tcoordVC.st;
  vec4 lic = texture2D(texLIC, lictc);
  vec2 pt0 = texture2D(texSeedPts, lictc).st;

  bool count;
  vec2 pt1 = rk4(pt0, uStepSize, count);

  if (count)
    {
    // accumulate lic step
    // (lic, mask, 0, step count)
    float noise = getNoise(pt1);
    LICOutput = vec4(lic.r + noise, lic.g, 0.0, lic.a + 1.0);
    SeedOutput = vec4(pt1, 0.0, 1.0);
    }
  else
    {
    // keep existing values
    LICOutput = lic;
    SeedOutput = vec4(pt0, 0.0, 1.0);
    }
}
`,m8=` //VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_LICN.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

/**
This shader finalizes the convolution for the LIC computation
applying the normalization. eg. if box kernel is used the this
is the number of steps taken.
*/

uniform sampler2D texLIC;

in vec2 tcoordVC;

void main(void)
{
  vec4 conv = texture2D(texLIC, tcoordVC.st);
  conv.r = conv.r/conv.a;
  // lic => (convolution, mask, 0, 1)
  LICOutput = vec4(conv.rg , 0.0, 1.0);
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,x8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_CE.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// gray scale contrast enhance stage implemented via histogram stretching
// if the min and max are tweaked it can generate out-of-range values
// these will be clamped in 0 to 1

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;


uniform sampler2D texLIC;  // most recent lic pass
uniform float uMin;        // min gray scale color value
uniform float uMaxMinDiff; // max-min

in vec2 tcoordVC;

void main( void )
{
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  if (lic.g!=0.0)
    {
    LICOutput = lic;
    }
  else
    {
    float CElic = clamp((lic.r - uMin)/uMaxMinDiff, 0.0, 1.0);
    LICOutput = vec4(CElic, lic.gb, 1.0);
    }
    SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,S8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_fs2.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// high-pass filter stage employed by vtkLineIntegralConvolution2D
// between LIC pass 1 and LIC pass 2. filtered LIC pass 1, becomes
// noise for pass2.

// the output of this shader
layout(location = 0) out vec4 EEOutput;

uniform sampler2D texLIC; // most recent lic pass
uniform float     uDx;    // fragment size
uniform float     uDy;    // fragment size

in vec2 tcoordVC;

// kernel for simple laplace edge enhancement.
// p=Laplace(p)+p
float K[9] = float[9](
  -1.0, -1.0, -1.0,
  -1.0,  9.0, -1.0,
  -1.0, -1.0, -1.0
  );

// determine if the fragment was masked
bool Masked(float val) { return val != 0.0; }

void main(void)
{
  // tex coord neighbor offsets
  vec2 fragDx[9] = vec2[9](
    vec2(-uDx, uDy), vec2(0.0, uDy), vec2(uDx, uDy),
    vec2(-uDx, 0.0), vec2(0.0, 0.0), vec2(uDx, 0.0),
    vec2(-uDx,-uDy), vec2(0.0,-uDy), vec2(uDx,-uDy)
    );

  vec2 lictc = tcoordVC.st;

  // compute the convolution but don't use convovled values if
  // any masked fragments on the stencil. Fragments outside
  // the valid domain are masked during initialization, and
  // texture wrap parameters are clamp to border with border
  // color that contains masked flag
  float conv = 0.0;
  bool dontUse = false;
  for (int i=0; i<9; ++i)
    {
    vec2 tc = lictc + fragDx[i];
    vec4 lic = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic.g);
    conv = conv + K[i] * lic.r;
    }

  if (dontUse)
    {
    EEOutput = vec4(texture2D(texLIC, lictc).rg, 0.0, 1.0);
    }
  else
    {
    conv = clamp(conv, 0.0, 1.0);
    EEOutput = vec4(conv,texture2D(texLIC, lictc).g, 0.0, 1.0);
    }

}
`,C8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_AAH.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// Anti-alias stage in vtkLineIntegralConvolution2D
// horizontal pass of a Gaussian convolution

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texLIC; // input texture
uniform float     uDx;    // fragment size

in vec2 tcoordVC;

// factored 3x3 Gaussian kernel
// K^T*K = G
float K[3] = float[3](0.141421356, 0.707106781, 0.141421356);

// determine if the fragment was masked
bool Masked(float val){ return val != 0.0; }

void main(void)
{
// neighbor offsets
vec2 fragDx[3] = vec2[3](vec2(-uDx,0.0), vec2(0.0,0.0), vec2(uDx,0.0));

  vec2 lictc = tcoordVC.st;
  vec4 lic[3];
  bool dontUse = false;
  float conv = 0.0;
  for (int i=0; i<3; ++i)
    {
    vec2 tc = lictc + fragDx[i];
    lic[i] = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic[i].g);
    conv = conv + K[i] * lic[i].r;
    }
  // output is (conv, mask, skip, 1)
  if (dontUse)
    {
    LICOutput = vec4(lic[1].rg, 1.0, 1.0);
    }
  else
    {
    LICOutput = vec4(conv, lic[1].gb, 1.0);
    }
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,T8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_VT.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// move vector field to normalized image space
// pre-processing for vtkLineIntegralConvolution2D

// the output of this shader
//VTK::Output::Dec

// Fragment shader used by the gaussian blur filter render pass.

uniform sampler2D texVectors; // input texture
uniform vec2      uTexSize;   // size of texture

in vec2 tcoordVC;

void main(void)
{
  //VTK::LICComponentSelection::Impl
  V = V/uTexSize;
  gl_FragData[0] = vec4(V, 0.0, 1.0);
}
`,w8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkLineIntegralConvolution2D_AAV.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// Anti-alias stage in vtkLineIntegralConvolution2D
// vertical pass of a Gaussian convolution

// the output of this shader
layout(location = 0) out vec4 LICOutput;
layout(location = 1) out vec4 SeedOutput;

uniform sampler2D texLIC; // input texture
uniform float     uDy;    // fragment size

in vec2 tcoordVC;


// factored 3x3 Gaussian kernel
// K^T*K = G
float K[3] = float[3](0.141421356, 0.707106781, 0.141421356);

// determine if the fragment was masked
bool Masked(float val){ return val != 0.0; }

void main(void)
{
// neighbor offsets
vec2 fragDy[3] = vec2[3](vec2(0.0,-uDy), vec2(0.0,0.0), vec2(0.0,uDy));


  vec2 lictc = tcoordVC.st;
  vec4 lic[3];
  bool dontUse = false;
  float conv = 0.0;
  for (int i=0; i<3; ++i)
    {
    vec2 tc = lictc + fragDy[i];
    lic[i] = texture2D(texLIC, tc);
    dontUse = dontUse || Masked(lic[i].g);
    conv = conv + K[i] * lic[i].r;
    }
  // output is (conv, mask, skip, 1)
  if (dontUse)
    {
    LICOutput = vec4(lic[1].rg, 1.0, 1.0);
    }
  else
    {
    LICOutput = vec4(conv, lic[1].gb, 1.0);
    }
  SeedOutput = vec4(0.0, 0.0, 0.0, 0.0);
}
`,q1=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtktextureObjectVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/

attribute vec4 vertexDC;
attribute vec2 tcoordDC;
varying vec2 tcoordVC;

void main()
{
  tcoordVC = tcoordDC;
  gl_Position = vertexDC;
}
`;const{Representation:_8}=Qn;function E8(t){const e=Gt.newInstance();e.setOpenGLRenderWindow(t);const a=new Float32Array(12);for(let c=0;c<4;c++)a[c*3]=c%2*2-1,a[c*3+1]=c>1?1:-1,a[c*3+2]=0;const n=new Float32Array([0,0,1,0,0,1,1,1]),r=new Uint16Array(8);r[0]=3,r[1]=0,r[2]=1,r[3]=3,r[4]=3,r[5]=0,r[6]=3,r[7]=2;const i=pe.newInstance({numberOfComponents:3,values:a});i.setName("points");const s=pe.newInstance({numberOfComponents:1,values:r}),u=pe.newInstance({numberOfComponents:2,values:n});return e.getCABO().createVBO(s,"polys",_8.SURFACE,{points:i,cellOffset:0,tcoords:u}),e}function T0(t,e,a,n){let[r,i]=e;const s=t.getContext(),u=Me.newInstance({autoParameters:!1,wrapS:n,wrapT:n,minificationFilter:a,magnificationFilter:a,generateMipmap:!1,openGLDataType:s.FLOAT,baseLevel:0,maxLevel:0});return u.setOpenGLRenderWindow(t),u.setInternalFormat(s.RGBA32F),u.create2DFromRaw(r,i,4,"Float32Array",null),u.activate(),u.sendParameters(),u.deactivate(),u}function io(t,e){return T0(t,e,Me.Filter.NEAREST,Me.Wrap.CLAMP_TO_EDGE)}function D8(t,e){return T0(t,e,Me.Filter.NEAREST,Me.Wrap.CLAMP_TO_EDGE)}function b8(t,e){return T0(t,e,Me.Filter.LINEAR,Me.Wrap.CLAMP_TO_EDGE)}function O8(t,e){if(e.classHierarchy.push("vtkLICPingPongBufferManager"),!e._openGLRenderWindow){console.error("Pass renderwindow to ping pong manager");return}e.quad=E8(e._openGLRenderWindow),e.context=e._openGLRenderWindow.getContext(),e.licTexture0=io(e._openGLRenderWindow,e.size),e.seedTexture0=io(e._openGLRenderWindow,e.size),e.licTexture1=io(e._openGLRenderWindow,e.size),e.seedTexture1=io(e._openGLRenderWindow,e.size),e.eeTexture=e.doEEPass?D8(e._openGLRenderWindow,e.size):null,e.imageVectorTexture=e.doVTPass?b8(e._openGLRenderWindow,e.size):null,e.pingTextures[0]=e.licTexture0,e.pingTextures[1]=e.seedTexture0,e.pongTextures[0]=e.licTexture1,e.pongTextures[1]=e.seedTexture1,e.textures[0]=e.pingTextures,e.textures[1]=e.pongTextures,t.swap=()=>{e.readIndex=1-e.readIndex},t.renderQuad=(a,n)=>{const r=e.quad,i=e.context;let s=e.quadVAO;s||(s=Ma.newInstance(),s.setOpenGLRenderWindow(e._openGLRenderWindow),e.quadVAO=s),e.previousProgramHash!==n.getMd5Hash()&&(s.shaderProgramChanged(),r.getCABO().bind(),s.addAttributeArray(n,r.getCABO(),"vertexDC",r.getCABO().getVertexOffset(),r.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE),s.addAttributeArray(n,r.getCABO(),"tcoordDC",r.getCABO().getTCoordOffset(),r.getCABO().getStride(),e.context.FLOAT,2,e.context.FALSE),e.previousProgramHash=n.getMd5Hash()),i.drawArrays(i.TRIANGLES,0,r.getCABO().getElementCount()),s.release()},t.getLastLICBuffer=()=>e.readIndex===0?e.licTexture0:e.licTexture1,t.getLastSeedBuffer=()=>e.readIndex===0?e.seedTexture0:e.seedTexture1,t.getLICBuffer=()=>1-e.readIndex===0?e.licTexture0:e.licTexture1,t.getSeedBuffer=()=>1-e.readIndex===0?e.seedTexture0:e.seedTexture1,t.getLICTextureUnit=()=>{const a=e.textures[e.readIndex][0];return a.activate(),a.getTextureUnit()},t.getSeedTextureUnit=()=>{const a=e.textures[e.readIndex][1];return a.activate(),a.getTextureUnit()},t.getNoiseTextureUnit=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:0)===0?(e.noiseTexture.activate(),e.noiseTexture.getTextureUnit()):(e.eeTexture.activate(),e.eeTexture.getTextureUnit())},t.getVectorTextureUnit=()=>(e.vectorTexture.activate(),e.vectorTexture.getTextureUnit()),t.getImageVectorTextureUnit=()=>e.imageVectorTexture?(e.imageVectorTexture.activate(),e.imageVectorTexture.getTextureUnit()):t.getVectorTextureUnit(),t.getMaskVectorTextureUnit=()=>e.maskVectorTexture?(e.maskVectorTexture.activate(),e.maskVectorTexture.getTextureUnit()):t.getImageVectorTextureUnit(),t.clearBuffers=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const n=e.framebuffer,r=e.context;n.removeColorBuffer(0),n.removeColorBuffer(1),n.removeColorBuffer(2),n.removeColorBuffer(3),n.setColorBuffer(e.licTexture0,0),n.setColorBuffer(e.seedTexture0,1),n.setColorBuffer(e.licTexture1,2),n.setColorBuffer(e.seedTexture1,3);const i=[r.COLOR_ATTACHMENT0,r.COLOR_ATTACHMENT1,r.COLOR_ATTACHMENT2,r.COLOR_ATTACHMENT3];a&&(n.removeColorBuffer(4),n.setColorBuffer(e.eeTexture,4),i.push(r.COLOR_ATTACHMENT4)),r.drawBuffers(i),r.clearColor(0,1,0,0),r.disable(r.SCISSOR_TEST),r.disable(r.BLEND),r.clear(r.COLOR_BUFFER_BIT),n.removeColorBuffer(0),n.removeColorBuffer(1),n.removeColorBuffer(2),n.removeColorBuffer(3),a&&n.removeColorBuffer(4),r.drawBuffers([r.NONE])},t.clearBuffer=a=>{const n=e.framebuffer,r=e.context;n.removeColorBuffer(0),n.setColorBuffer(a,0),r.drawBuffers([r.COLOR_ATTACHMENT0]),r.clearColor(0,1,0,0),r.disable(r.SCISSOR_TEST),r.disable(r.BLEND),r.clear(r.COLOR_BUFFER_BIT),n.removeColorBuffer(a,0),r.drawBuffers([r.NONE])},t.activateVectorTextures=()=>{e.imageVectorTexture?e.imageVectorTexture.activate():e.vectorTexture.activate(),e.maskVectorTexture&&e.maskVectorTexture.activate()},t.deactivateVectorTextures=()=>{e.imageVectorTexture?e.imageVectorTexture.deactivate():e.vectorTexture.deactivate(),e.maskVectorTexture&&e.maskVectorTexture.deactivate()},t.activateNoiseTexture=function(){switch(arguments.length>0&&arguments[0]!==void 0?arguments[0]:0){case 0:e.noiseTexture.activate();break;case 1:e.eeTexture.activate();break;default:console.error("Wrong LIC pass number")}},t.deactivateNoiseTexture=function(){switch(arguments.length>0&&arguments[0]!==void 0?arguments[0]:0){case 0:e.noiseTexture.deactivate();break;case 1:e.eeTexture.deactivate();break;default:console.error("Wrong LIC pass number")}},t.attachLICBuffers=()=>{const a=e.textures[e.readIndex],n=e.textures[1-e.readIndex],r=e.framebuffer,i=e.context;a[0].activate(),a[1].activate(),r.removeColorBuffer(0),r.removeColorBuffer(1),r.setColorBuffer(n[0],0),r.setColorBuffer(n[1],1),i.drawBuffers([i.COLOR_ATTACHMENT0,i.COLOR_ATTACHMENT1])},t.detachLICBuffers=()=>{const a=e.textures[e.readIndex],n=e.context,r=e.framebuffer;a[0].deactivate(),a[1].deactivate(),r.removeColorBuffer(0),r.removeColorBuffer(1),n.drawBuffers([n.NONE])},t.attachImageVectorBuffer=()=>{const a=e.framebuffer,n=e.context;e.vectorTexture.activate(),a.removeColorBuffer(0),a.setColorBuffer(e.imageVectorTexture,0),n.drawBuffers([n.COLOR_ATTACHMENT0])},t.detachImageVectorBuffer=()=>{const a=e.context,n=e.framebuffer;e.vectorTexture.deactivate(),n.removeColorBuffer(0),a.drawBuffers([a.NONE])},t.attachEEBuffer=()=>{e.textures[e.readIndex][0].activate(),e.framebuffer.removeColorBuffer(0),e.framebuffer.setColorBuffer(e.eeTexture,0);const n=e.context;n.drawBuffers([n.COLOR_ATTACHMENT0])},t.detachEEBuffer=()=>{const a=e.context;e.framebuffer.removeColorBuffer(0),a.drawBuffers([a.NONE]),e.textures[e.readIndex][0].deactivate()},t.detachBuffers=()=>{const a=e.context,n=e.framebuffer;n.removeColorBuffer(0),n.removeColorBuffer(1),a.drawBuffers([a.NONE]);const r=e.textures[e.readIndex],i=e.textures[1-e.readIndex];r[0]&&r[0].deactivate(),r[1]&&r[1].deactivate(),i[0]&&i[0].deactivate(),i[1]&&i[1].deactivate(),e.eeTexture&&e.eeTexture.deactivate(),e.noiseTexture&&e.noiseTexture.deactivate()},t.getWriteIndex=()=>1-e.readIndex,t.detachBuffers()}const N8={vectorTexture:null,maskVectorTexture:null,noiseTexture:null,doEEPass:!1,doVTPass:!1,readIndex:0,quad:null,lastProgramHash:null,framebuffer:null,size:null,pingTextures:[],pongTextures:[],textures:[]};function Y1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,N8,a),k.obj(t,e),k.get(t,e,["readIndex"]),k.setGet(t,e,["doEEPass","doVTPass","_openGLRenderWindow","vectorTexture","maskVectorTexture","noiseTexture","framebuffer","size"]),k.moveToProtected(t,e,["openGLRenderWindow"]),O8(t,e)}var M8={newInstance:k.newInstance(Y1,"vtkLICPingPongBufferManager"),extend:Y1};const pr={NONE:0,LIC:1,COLOR:2,BOTH:3},w0={UNIFORM:0,GAUSSIAN:1},R8={BLEND:0,MULTIPLY:1};function L8(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const e=`
    vec2 getVector( vec2 vectc )

      {

      vec2 V = texture2D( texVectors, vectc ).xy;

      // normalize if |V| not 0

      float lenV = length( V );

      if ( lenV > 1.0e-8 )

        {

        return V/lenV;

        }

      else

        {

        return vec2( 0.0, 0.0 );

        }

      }

    `,a=`
    vec2 getVector( vec2 vectc )

      {

      return texture2D( texVectors, vectc ).xy;

      }

    `;return t?e:a}function k8(t,e){e.classHierarchy.push("vtkLineIntegralConvolution2D"),t.buildAShader=r=>e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(q1,r,""),t.dumpTextureValues=function(r,i){let[s,u]=i,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.context,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e._openGLRenderWindow,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:4;const l=fr.newInstance(),h=c;let p=null;return l.setOpenGLRenderWindow(o),l.saveCurrentBindingsAndBuffers(),l.create(s,u),l.populateFramebuffer(),l.setColorBuffer(r),p=new Float32Array(s*u*f),h.readPixels(0,0,s,u,f===4?h.RGBA:h.RGB,h.FLOAT,p),l.restorePreviousBindingsAndBuffers(),p},t.getTextureMinMax=function(r,i){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.context,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e._openGLRenderWindow;const c=t.dumpTextureValues(r,i,s,u,4);let o=Number.MAX_VALUE,f=Number.MIN_VALUE;for(let l=0;l<c.length;l+=4)if(c[l+1]===0){const h=c[l];h<o&&(o=h),h>f&&(f=h)}return{min:o,max:f}},t.getComponentSelectionProgram=r=>{const i="xyzw";return`.${i[r[0]]}${i[r[1]]}`},t.buildShaders=()=>{e.LIC0ShaderProgram=t.buildAShader(v8);const r=J.substitute(T8,"//VTK::LICComponentSelection::Impl",`vec2 V = texture2D(texVectors, tcoordVC.st)${t.getComponentSelectionProgram(e.componentIds)};`).result;e.VTProgram=t.buildAShader(r);const i=J.substitute(y8,"//VTK::LICVectorLookup::Impl",L8(e.normalizeVectors),!0).result;e.LICIShaderProgram=t.buildAShader(i),e.LICNShaderProgram=t.buildAShader(m8),e.CEProgram=t.buildAShader(x8),e.EEProgram=t.buildAShader(S8),e.AAHProgram=t.buildAShader(C8),e.AAVProgram=t.buildAShader(w8)};function a(r,i){r.setUniformi("texLIC",i.getLICTextureUnit()),r.setUniformi("texSeedPts",i.getSeedTextureUnit())}function n(r,i,s){r.attachLICBuffers(),r.renderQuad(i,s),r.detachLICBuffers(),r.swap()}t.executeLIC=(r,i,s,u,c,o)=>{if(e._openGLRenderWindow=c,e.context=c.getContext(),Object.assign(e,o),r[0]<=0||r[1]<=0)return null;const f=[1/r[0],1/r[1]];let l=e.stepSize*Math.sqrt(f[0]*f[0]+f[1]*f[1]);l<=0&&(l=1e-10);const h=e.context;let p=e.framebuffer;(!p||r[0]!==p.getSize()[0]||r[1]!==p.getSize()[1])&&(p=fr.newInstance(),p.setOpenGLRenderWindow(e._openGLRenderWindow),p.saveCurrentBindingsAndBuffers(),p.create(...r),p.populateFramebuffer(),p.restorePreviousBindingsAndBuffers(),e.framebuffer=p),p.saveCurrentBindingsAndBuffers(),p.bind(),h.viewport(0,0,...r),h.scissor(0,0,...r),e.shadersNeedBuild&&(t.buildShaders(),e.shadersNeedBuild=!1),e.bufs?(e.bufs.setVectorTexture(i),e.bufs.setMaskVectorTexture(s),e.bufs.setNoiseTexture(u)):e.bufs=M8.newInstance({openGLRenderWindow:c,doEEPass:e.enhancedLIC,doVTPass:e.transformVectors,vectorTexture:i,maskVectorTexture:s,noiseTexture:u,framebuffer:p,size:r});const d=[(u.getWidth()+1)/r[0],(u.getHeight()+1)/r[1]],y=1/r[0],m=1/r[1],S=e._openGLRenderWindow.getShaderCache();if(e.transformVectors){const C=e.VTProgram;S.readyShaderProgram(C),e.bufs.attachImageVectorBuffer(),C.setUniform2f("uTexSize",...r),C.setUniformi("texVectors",e.bufs.getVectorTextureUnit()),h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT),e.bufs.renderQuad(r,C),e.bufs.detachImageVectorBuffer()}e.bufs.clearBuffers(e.enhancedLIC),e.bufs.activateVectorTextures(),e.bufs.activateNoiseTexture(0);const{LIC0ShaderProgram:v}=e;S.readyShaderProgram(v),v.setUniformi("uStepNo",0),v.setUniformi("uPassNo",0),v.setUniformf("uMaskThreshold",e.maskThreshold),v.setUniform2f("uNoiseBoundsPt1",...d),v.setUniformi("texMaskVectors",e.bufs.getMaskVectorTextureUnit()),v.setUniformi("texLIC",e.bufs.getLICTextureUnit()),v.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(0)),n(e.bufs,r,v);const{LICIShaderProgram:g}=e;S.readyShaderProgram(g),g.setUniformi("uPassNo",0),g.setUniformf("uStepSize",-l),g.setUniform2f("uNoiseBoundsPt1",...d),g.setUniformi("texVectors",e.bufs.getImageVectorTextureUnit()),g.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(0));for(let C=0;C<e.numberOfSteps;++C)a(g,e.bufs),n(e.bufs,r,g);S.readyShaderProgram(v),v.setUniformi("uStepNo",1),a(v,e.bufs),n(e.bufs,r,v),S.readyShaderProgram(g),g.setUniformf("uStepSize",l);for(let C=0;C<e.numberOfSteps;++C)a(g,e.bufs),n(e.bufs,r,g);e.bufs.deactivateNoiseTexture(0),e.bufs.deactivateVectorTextures();const{LICNShaderProgram:x}=e;if(S.readyShaderProgram(x),x.setUniformi("texLIC",e.bufs.getLICTextureUnit()),n(e.bufs,r,x),e.enhancedLIC){(e.enhanceContrast===pr.LIC||e.enhanceContrast===pr.BOTH)&&t.contrastEnhance(!1,r),e.bufs.attachEEBuffer();const{EEProgram:C}=e;S.readyShaderProgram(C),C.setUniformi("texLIC",e.bufs.getLICTextureUnit()),C.setUniformf("uDx",y),C.setUniformf("uDy",m),e.bufs.renderQuad(r,C),e.bufs.detachEEBuffer(),e.bufs.detachBuffers(),e.bufs.clearBuffers(!1),e.bufs.activateVectorTextures(),e.bufs.activateNoiseTexture(1),S.readyShaderProgram(v),v.setUniformi("uStepNo",0),v.setUniformi("uPassNo",1),a(v,e.bufs),v.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(1)),n(e.bufs,r,v),S.readyShaderProgram(g),g.setUniformi("uPassNo",1),g.setUniformf("uStepSize",-l),g.setUniformi("texNoise",e.bufs.getNoiseTextureUnit(1));const T=e.numberOfSteps/2;for(let w=0;w<T;++w)a(g,e.bufs),n(e.bufs,r,g);S.readyShaderProgram(v),v.setUniformi("uStepNo",1),a(v,e.bufs),n(e.bufs,r,v),S.readyShaderProgram(g),g.setUniformf("uStepSize",l);for(let w=0;w<T;++w)a(g,e.bufs),n(e.bufs,r,g);e.bufs.deactivateNoiseTexture(1),e.bufs.deactivateVectorTextures(),S.readyShaderProgram(x),x.setUniformi("texLIC",e.bufs.getLICTextureUnit()),x.setUniformi("texSeedPts",e.bufs.getSeedTextureUnit()),n(e.bufs,r,x)}if(e.antiAlias){const C=e.AAHProgram;S.readyShaderProgram(C),C.setUniformi("texLIC",e.bufs.getLICTextureUnit()),C.setUniformf("uDx",y);const T=e.AAVProgram;S.readyShaderProgram(T),T.setUniformi("texLIC",e.bufs.getLICTextureUnit()),T.setUniformf("uDy",m);for(let w=0;w<e.antiAlias;++w)S.readyShaderProgram(C),a(C,e.bufs),n(e.bufs,r,C),S.readyShaderProgram(T),a(T,e.bufs),n(e.bufs,r,T)}return(e.enhanceContrast===pr.LIC||e.enhanceContrast===pr.BOTH)&&t.contrastEnhance(!0,r),e.bufs.detachBuffers(),p.restorePreviousBindingsAndBuffers(),e.bufs.getLastLICBuffer()},t.contrastEnhance=(r,i)=>{const s=e._openGLRenderWindow.getShaderCache();let{min:u,max:c}=t.getTextureMinMax(e.bufs.getLastLICBuffer(),i,e.context,e._openGLRenderWindow);(c<=u||c>1||u<0)&&(console.error("Invalid color range: ",u,c),u=0,c=1);let o=c-u;r&&(u+=o*e.lowLICContrastEnhancementFactor,c-=o*e.highLICContrastEnhancementFactor,o=c-u);const{CEProgram:f}=e;s.readyShaderProgram(f),f.setUniformi("texLIC",e.bufs.getLICTextureUnit()),f.setUniformf("uMin",u),f.setUniformf("uMaxMinDiff",o),n(e.bufs,i,f)}}const F8={shadersNeedBuild:!0,stepSize:1,numberOfSteps:10,enhancedLIC:!0,enhanceContrast:!1,lowContrastEnhancementFactor:0,highContrastEnhancementFactor:0,antiAlias:0,componentIds:[0,1],normalizeVectors:!0,maskThreshold:0,transformVectors:!0,bufs:null,isComposite:!0};function J1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,F8,a),k.obj(t,e),k.setGet(t,e,["context","_openGLRenderWindow","nuberOfSteps","stepSize","normalizeVectors","maskThreshold","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","componentIds","isComposite"]),k.moveToProtected(t,e,["openGLRenderWindow"]),k8(t,e)}var A8={newInstance:k.newInstance(J1,"vtkLineIntegralConvolution2D"),extend:J1},V8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_fs2.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// This shader combines surface geometry, LIC, and  scalar colors.

// the output of this shader
layout(location = 0) out vec4 RGBOutput;
layout(location = 1) out vec4 HSLOutput;

uniform sampler2D texVectors;       // vectors, depth
uniform sampler2D texGeomColors;    // scalar colors + lighting
uniform sampler2D texLIC;           // image lic
uniform int       uScalarColorMode; // select between blend, and map shader
uniform float     uLICIntensity;    // blend shader: blending factor for lic'd colors
uniform float     uMapBias;         // map shader: adjust the brightness of the result
uniform float     uMaskIntensity;   // blending factor for mask color
uniform vec3      uMaskColor;       // color for the masked out fragments

in vec2 tcoordVC;

/**
Convert from RGB color space into HSL colorspace.
*/
vec3 RGBToHSL(vec3 RGB)
{
  vec3 HSL = vec3(0.0, 0.0, 0.0);

  float RGBMin = min(min(RGB.r, RGB.g), RGB.b);
  float RGBMax = max(max(RGB.r, RGB.g), RGB.b);
  float RGBMaxMinDiff = RGBMax - RGBMin;

  HSL.z = (RGBMax + RGBMin) / 2.0;

  if (RGBMaxMinDiff == 0.0)
    {
    // Gray scale
    HSL.x = 0.0;
    HSL.y = 0.0;
    }
  else
    {
    // Color
    if (HSL.z < 0.5)
      HSL.y = RGBMaxMinDiff / (RGBMax + RGBMin);
    else
      HSL.y = RGBMaxMinDiff / (2.0 - RGBMax - RGBMin);

    float dR
      = (((RGBMax - RGB.r) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;
    float dG
      = (((RGBMax - RGB.g) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;
    float dB
      = (((RGBMax - RGB.b) / 6.0) + (RGBMaxMinDiff / 2.0)) / RGBMaxMinDiff;

    if (RGB.r == RGBMax)
      HSL.x = dB - dG;
    else
    if (RGB.g == RGBMax)
      HSL.x = (1.0 / 3.0) + dR - dB;
    else
    if (RGB.b == RGBMax)
      HSL.x = (2.0 / 3.0) + dG - dR;

    if (HSL.x < 0.0)
      HSL.x += 1.0;

    if (HSL.x > 1.0)
      HSL.x -= 1.0;
    }

  return HSL;
}

/**
Helper for HSL to RGB conversion.
*/
float Util(float v1, float v2, float vH)
{
  if (vH < 0.0)
    vH += 1.0;

  if (vH > 1.0)
     vH -= 1.0;

  if ((6.0 * vH) < 1.0)
    return (v1 + (v2 - v1) * 6.0 * vH);

  if ((2.0 * vH) < 1.0)
    return (v2);

  if ((3.0 * vH) < 2.0)
    return (v1 + (v2 - v1) * ((2.0 / 3.0) - vH) * 6.0);

  return v1;
}

/**
Convert from HSL space into RGB space.
*/
vec3 HSLToRGB(vec3 HSL)
{
  vec3 RGB;
  if (HSL.y == 0.0)
    {
    // Gray
    RGB.r = HSL.z;
    RGB.g = HSL.z;
    RGB.b = HSL.z;
    }
  else
    {
    // Chromatic
    float v2;
    if (HSL.z < 0.5)
      v2 = HSL.z * (1.0 + HSL.y);
    else
      v2 = (HSL.z + HSL.y) - (HSL.y * HSL.z);

    float v1 = 2.0 * HSL.z - v2;

    RGB.r = Util(v1, v2, HSL.x + (1.0 / 3.0));
    RGB.g = Util(v1, v2, HSL.x);
    RGB.b = Util(v1, v2, HSL.x - (1.0 / 3.0));
    }

  return RGB.rgb;
}

void main()
{
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);

  // depth is used to determine which fragment belong to us
  // and we can change
  float depth = texture2D(texVectors, tcoordVC.st).a;

  vec3 fragColorRGB;
  float valid;
  if (depth > 1.0e-3)
    {
    // we own it
    // shade LIC'ed geometry, or apply mask
    if (lic.g!=0.0)
      {
      // it's masked
      // apply fragment mask
      fragColorRGB = uMaskIntensity * uMaskColor + (1.0 - uMaskIntensity) * geomColor.rgb;
      valid = 0.0;
      }
    else
      {
      if (uScalarColorMode==0)
        {
        // blend with scalars
        fragColorRGB = lic.rrr * uLICIntensity + geomColor.rgb * (1.0 - uLICIntensity);
        }
      else
        {
        // multiply with scalars
        fragColorRGB = geomColor.rgb * clamp((uMapBias + lic.r), 0.0, 1.0);
        }
      if (lic.b != 0.0)
        {
        // didn't have the required guard pixels
        // don't consider it in min max estimation
        // for histpgram stretching
        valid = 0.0;
        }
      else
        {
        // ok to use in min/max estimates for histogram
        // stretching
        valid = 1.0;
        }
      }
    }
  else
    {
    // we don't own it
    // pass through scalars
    fragColorRGB = geomColor.rgb;
    valid = 0.0;
    }

  // if no further stages this texture is
  // copied to the screen
  RGBOutput = vec4(fragColorRGB, geomColor.a);

  // if further stages, move to hsl space for contrast
  // enhancement. encoding validity saves moving a texture to the cpu
  vec3 fragColorHSL = RGBToHSL(fragColorRGB);
  HSLOutput = vec4(fragColorHSL, valid);
}
`,B8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_DCpy.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// This shader copies fragments and depths to the output buffer

// the output of this shader
//VTK::Output::Dec

uniform sampler2D texDepth;     // z values from vertex shader
uniform sampler2D texRGBColors; // final rgb LIC colors

in vec2 tcoordVC;

void main()
{
  gl_FragDepth = texture2D(texDepth, tcoordVC).x;
  gl_FragData[0] = texture2D(texRGBColors, tcoordVC);

  // since we render a screen aligned quad
  // we're going to be writing fragments
  // not touched by the original geometry
  // it's critical not to modify those
  // fragments.
  if (gl_FragDepth == 1.0)
    {
    discard;
    }
}
`,U8=`//VTK::System::Dec

//=========================================================================
//
//  Program:   Visualization Toolkit
//  Module:    vtkSurfaceLICMapper_CE.glsl
//
//  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
//  All rights reserved.
//  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.
//
//     This software is distributed WITHOUT ANY WARRANTY; without even
//     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
//     PURPOSE.  See the above copyright notice for more information.
//
//=========================================================================

// color contrast enhance stage implemented via histogram stretching
// on lightness channel. if the min and max are tweaked it can generate
// out-of-range values these will be clamped in 0 to 1

// the output of this shader
//VTK::Output::Dec

uniform sampler2D texGeomColors; // scalars + lighting
uniform sampler2D texLIC;        // image lic, mask
uniform sampler2D texHSLColors;  // hsla colors

uniform float     uLMin;         // min lightness over all fragments
uniform float     uLMaxMinDiff;  // max - min lightness over all fragments

in vec2 tcoordVC;

vec3 HSLToRGB(vec3 HSL)
{
  vec3 RGB;
  float v;
  float h = HSL.x;
  float sl = HSL.y;
  float l = HSL.z;

  v = (l <= 0.5) ? (l * (1.0 + sl)) : (l + sl - l * sl);
  if (v <= 0.0) {
    RGB = vec3(0.0,0.0,0.0);
  } else {
    float m;
    int sextant;
    float fract, vsf, mid1, mid2;

    m = l + l - v;
    h *= 6.0;
    sextant = int(h);
    fract = h - float(sextant);

    vsf = (v - m) * fract;
    mid1 = m + vsf;
    mid2 = v - vsf;
    switch (sextant) {
      case 0: RGB.r = v; RGB.g = mid1; RGB.b = m; break;
      case 1: RGB.r = mid2; RGB.g = v; RGB.b = m; break;
      case 2: RGB.r = m; RGB.g = v; RGB.b = mid1; break;
      case 3: RGB.r = m; RGB.g = mid2; RGB.b = v; break;
      case 4: RGB.r = mid1; RGB.g = m; RGB.b = v; break;
      case 5: RGB.r = v; RGB.g = m; RGB.b = mid2; break;
    }
  }
  return RGB;
}

void main()
{
  // lookup hsl color , mask
  vec4 fragColor = texture2D(texHSLColors, tcoordVC.st);

  // don't modify masked fragments (masked => lic.g==1)
  vec4 lic = texture2D(texLIC, tcoordVC.st);
  if (lic.g==0.0)
    {
    // normalize lightness channel
    fragColor.z = clamp((fragColor.z - uLMin)/uLMaxMinDiff, 0.0, 1.0);
    }

  // back into rgb space
  fragColor.rgb = HSLToRGB(fragColor.xyz);

  // add alpha
  vec4 geomColor = texture2D(texGeomColors, tcoordVC.st);
  fragColor.a = geomColor.a;

  gl_FragData[0] = fragColor;
}
`;function G8(t,e){e.classHierarchy.push("vtkSurfaceLICInterface")}const I8={enableLIC:!1,nuberOfSteps:40,stepSize:.25,transformVectors:!0,normalizeVectors:!0,maskOnSurface:!1,maskThreshold:0,maskColor:[0,0,0],maskIntensity:0,enhancedLIC:!0,enhanceContrast:pr.NONE,lowLICContrastEnhancementFactor:0,highLICContrastEnhancementFactor:0,lowColorContrastEnhancementFactor:0,highColorContrastEnhancementFactor:0,antiAlias:0,colorMode:R8.BLEND,LICIntensity:1,mapModeBias:0,noiseTextureSize:200,noiseTextureType:w0.GAUSSIAN,noiseGrainSize:8,noiseImpulseProbability:.1,noiseImpulseBackgroundValue:0,noiseGeneratorSeed:0,minNoiseValue:0,maxNoiseValue:1,numberOfNoiseLevels:2,shadersNeedBuilding:!0,reallocateTextures:!0,rebuildNoiseTexture:!1,viewPortScale:1};function Z1(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,I8,a),k.obj(t,e),k.setGet(t,e,["enableLIC","numberOfSteps","stepSize","normalizeVectors","transformVectors","maskOnSurface","maskThreshold","maskColor","maskIntensity","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor","antiAlias","colorMode","LICIntensity","mapModeBias","noiseTextureSize","noiseTextureType","noiseGrainSize","minNoiseValue","maxNoiseValue","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","noiseGeneratorSeed","viewPortScale","rebuildNoiseTexture"]),G8(t,e)}var Q1={newInstance:k.newInstance(Z1,"vtkSurfaceLICInterface"),extend:Z1};const{Representation:P8}=Qn;function z8(t){const e=Gt.newInstance();e.setOpenGLRenderWindow(t);const a=new Float32Array(12);for(let c=0;c<4;c++)a[c*3]=c%2*2-1,a[c*3+1]=c>1?1:-1,a[c*3+2]=0;const n=new Float32Array([0,0,1,0,0,1,1,1]),r=new Uint16Array(8);r[0]=3,r[1]=0,r[2]=1,r[3]=3,r[4]=3,r[5]=0,r[6]=3,r[7]=2;const i=pe.newInstance({numberOfComponents:3,values:a});i.setName("points");const s=pe.newInstance({numberOfComponents:1,values:r}),u=pe.newInstance({numberOfComponents:2,values:n});return e.getCABO().createVBO(s,"polys",P8.SURFACE,{points:i,cellOffset:0,tcoords:u}),e}function j8(t,e){e.classHierarchy.push("vtkOpenGLSurfaceLICInterface"),t.renderQuad=(r,i)=>{const s=e.licQuad,u=e.context;let c=e.licQuadVAO;c||(c=Ma.newInstance(),c.setOpenGLRenderWindow(e._openGLRenderWindow),e.licQuadVAO=c),e.previousProgramHash!==i.getMd5Hash()&&(c.shaderProgramChanged(),s.getCABO().bind(),c.addAttributeArray(i,s.getCABO(),"vertexDC",s.getCABO().getVertexOffset(),s.getCABO().getStride(),e.context.FLOAT,3,e.context.FALSE),c.addAttributeArray(i,s.getCABO(),"tcoordDC",s.getCABO().getTCoordOffset(),s.getCABO().getStride(),e.context.FLOAT,2,e.context.FALSE),e.previousProgramHash=i.getMd5Hash()),u.drawArrays(u.TRIANGLES,0,s.getCABO().getElementCount()),c.release()};function a(r,i,s,u,c,o){const l=Math.max(0,Math.min(1,s)),h=Float32Array.from({length:r*r},()=>{let g=0;if(l===1||Math.random()>1-l)for(let x=0;x<2048;++x)g+=Math.random();return g});let p=0,d=2048+1;h.forEach(g=>{l===1?d=g<d?g:d:d=g<d&&g>0?g:d,p=g>p?g:p});let y=p-d;y===0&&(d=0,p===0?y=1:y=p);const m=i-1,S=m!==0?1/m:0,v=o-c;return h.map(g=>{const x=g<d?g:(g-d)/y,C=Math.floor(x*i),T=C>m?m:C;return g>=d?i===1?o:c+T*S*v:u})}function n(r,i,s,u){let[c,o]=r;const f=u-s;return Float32Array.from({length:c*o},()=>{let l=Math.random();return l=Math.floor(l*i)/i,l=l*f+s,l>1?1:l<0?0:l})}t.generateNoiseTexture=r=>{if(!e.noiseTexture||e.licInterface.getRebuildNoiseTexture()){e.licInterface.setRebuildNoiseTexture(!1),e.noiseTexture&&e.noiseTexture.releaseGraphicsResources(),Qc(e.noiseGeneratorSeed,{global:!0});let i=[];const{noiseTextureType:s,noiseGrainSize:u,numberOfNoiseLevels:c,noiseImpulseProbability:o,noiseImpulseBackgroundValue:f,minNoiseValue:l,maxNoiseValue:h}=e.licInterface.get("noiseTextureType","noiseGrainSize","numberOfNoiseLevels","noiseImpulseProbability","noiseImpulseBackgroundValue","minNoiseValue","maxNoiseValue");switch(s){case w0.GAUSSIAN:i=a(Math.floor(r/u),c,o,f,l,h);break;case w0.UNIFORM:default:i=n([Math.ceil(r/u),Math.ceil(r/u)],c,l,h)}const p=1/u,d=Float32Array.from({length:r*r*4},(m,S)=>{const v=S/4;if(S%4===0){const g=Math.floor(v%r*p),x=Math.floor(v/r*p);return i[x*(r/u)+g]}return S%4===1||S%4===3?1:0}),y=Me.newInstance({wrapS:Me.Wrap.REPEAT,wrapT:Me.Wrap.REPEAT,minificationFilter:Me.Filter.NEAREST,magnificationFilter:Me.Filter.NEAREST,generateMipMap:!1,openGLDataType:e.context.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});y.setOpenGLRenderWindow(e._openGLRenderWindow),y.create2DFromRaw(r,r,4,"Float32Array",d),y.activate(),y.sendParameters(),y.deactivate(),e.noiseTexture=y}},t.buildAShader=r=>e._openGLRenderWindow.getShaderCache().readyShaderProgramArray(q1,r,""),t.allocateTextures=()=>{const r=Me.Filter.NEAREST,i=Me.Filter.LINEAR,s=e._openGLRenderWindow;e.geometryImage||(e.geometryImage=t.allocateTexture(s,r)),e.vectorImage||(e.vectorImage=t.allocateTexture(s,i)),e.maskVectorImage||(e.maskVectorImage=t.allocateTexture(s,i)),e.LICImage||(e.LICImage=t.allocateTexture(s,r)),e.RGBColorImage||(e.RGBColorImage=t.allocateTexture(s,r)),e.HSLColorImage||(e.HSLColorImage=t.allocateTexture(s,r)),e.depthTexture||(e.depthTexture=t.allocateDepthTexture(s))},t.allocateTexture=(r,i)=>{const s=e.context,u=Me.newInstance({wrapS:Me.Wrap.CLAMP_TO_EDGE,wrapT:Me.Wrap.CLAMP_TO_EDGE,minificationFilter:i,magnificationFilter:i,generateMipmap:!1,openGLDataType:s.FLOAT,baseLevel:0,maxLevel:0,autoParameters:!1});return u.setOpenGLRenderWindow(r),u.setInternalFormat(s.RGBA32F),u.create2DFromRaw(...e.size,4,"Float32Array",null),u.activate(),u.sendParameters(),u.deactivate(),u},t.allocateDepthTexture=r=>{const i=e.context,s=Me.newInstance({generateMipmap:!1,openGLDataType:i.FLOAT,autoParameters:!1});return s.setOpenGLRenderWindow(r),s.createDepthFromRaw(...e.size,"Float32Array",null),s.activate(),s.sendParameters(),s.deactivate(),s},t.createFBO=()=>{if(!e.framebuffer){e.licHelper=null;const r=fr.newInstance();r.setOpenGLRenderWindow(e._openGLRenderWindow),r.saveCurrentBindingsAndBuffers(),r.create(...e.size),r.populateFramebuffer(),e.framebuffer=r,r.restorePreviousBindingsAndBuffers()}},t.completedGeometry=()=>{const r=e.context,i=e.framebuffer;i.removeColorBuffer(0),i.removeColorBuffer(1),i.removeColorBuffer(2),i.removeDepthBuffer(),r.drawBuffers([r.NONE]),i.restorePreviousBindingsAndBuffers()},t.buildAllShaders=()=>{e.shadersNeedBuilding&&(e.licColorPass=t.buildAShader(V8),e.licCopyPass=t.buildAShader(B8),e.enhanceContrastPass=t.buildAShader(U8),e.shadersNeedBuilding=!1)},t.initializeResources=()=>{t.createFBO(),t.generateNoiseTexture(e.licInterface.getNoiseTextureSize()),t.allocateTextures(),t.buildAllShaders(),e.licQuad||(e.licQuad=z8(e._openGLRenderWindow)),e.licHelper||(e.licHelper=A8.newInstance())},t.prepareForGeometry=()=>{const r=e.framebuffer;r.saveCurrentBindingsAndBuffers(),r.bind(),e.geometryImage.activate(),e.vectorImage.activate(),e.maskVectorImage.activate(),r.removeColorBuffer(0),r.removeColorBuffer(2),r.removeColorBuffer(3),r.setColorBuffer(e.geometryImage,0),r.setColorBuffer(e.vectorImage,2),r.setColorBuffer(e.maskVectorImage,3),r.setDepthBuffer(e.depthTexture);const i=e.context;i.drawBuffers([i.COLOR_ATTACHMENT0,i.NONE,i.COLOR_ATTACHMENT2,i.COLOR_ATTACHMENT3]),i.viewport(0,0,...e.size),i.scissor(0,0,...e.size),i.disable(i.BLEND),i.disable(i.DEPTH_TEST),i.disable(i.SCISSOR_TEST),i.clearColor(0,0,0,0),i.clear(i.DEPTH_BUFFER_BIT|i.COLOR_BUFFER_BIT)},t.copyToScreen=r=>{e.RGBColorImage.activate(),e.depthTexture.activate(),e.licCopyPass||t.initializeResources();const i=e.licCopyPass;e._openGLRenderWindow.getShaderCache().readyShaderProgram(i);const s=e.context;s.viewport(0,0,...r),s.scissor(0,0,...r),s.disable(s.BLEND),s.enable(s.DEPTH_TEST),s.disable(s.SCISSOR_TEST),i.setUniformi("texDepth",e.depthTexture.getTextureUnit()),i.setUniformi("texRGBColors",e.RGBColorImage.getTextureUnit()),t.renderQuad(r,i),e.RGBColorImage.deactivate(),e.depthTexture.deactivate()},t.combineColorsAndLIC=()=>{const r=e.context,i=e.framebuffer;i.saveCurrentBindingsAndBuffers(),i.bind(),i.create(...e.size),i.removeColorBuffer(0),i.removeColorBuffer(1),i.setColorBuffer(e.RGBColorImage,0),i.setColorBuffer(e.HSLColorImage,1),r.drawBuffers([r.COLOR_ATTACHMENT0,r.COLOR_ATTACHMENT1]),r.disable(r.DEPTH_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),e.vectorImage.activate(),e.geometryImage.activate(),e.LICImage.activate(),e.licColorPass||t.initializeResources();const s=e.licColorPass;e._openGLRenderWindow.getShaderCache().readyShaderProgram(s),s.setUniformi("texVectors",e.vectorImage.getTextureUnit()),s.setUniformi("texGeomColors",e.geometryImage.getTextureUnit());const{colorMode:u,LICIntensity:c,mapModeBias:o,maskIntensity:f,maskColor:l,enhanceContrast:h,lowColorContrastEnhancementFactor:p,highColorContrastEnhancementFactor:d}=e.licInterface.get("colorMode","LICIntensity","mapModeBias","maskIntensity","maskColor","enhanceContrast","lowColorContrastEnhancementFactor","highColorContrastEnhancementFactor");if(s.setUniformi("texLIC",e.LICImage.getTextureUnit()),s.setUniformi("uScalarColorMode",u),s.setUniformf("uLICIntensity",c),s.setUniformf("uMapBias",o),s.setUniformf("uMaskIntensity",f),s.setUniform3f("uMaskColor",...l),t.renderQuad(e.size,s),e.vectorImage.deactivate(),e.geometryImage.deactivate(),e.LICImage.deactivate(),i.removeColorBuffer(0),i.removeColorBuffer(1),r.drawBuffers([r.NONE]),h===pr.COLOR||h===pr.BOTH){let y=0,m=1,S=m-y;y+=S*p,m-=S*d,S=m-y,i.setColorBuffer(e.RGBColorImage),r.drawBuffers([r.COLOR_ATTACHMENT0]),e.geometryImage.activate(),e.HSLColorImage.activate(),e.LICImage.activate(),e.enhanceContrastPass||t.initializeResources();const{enhanceContrastPass:v}=e;e._openGLRenderWindow.getShaderCache().readyShaderProgram(v),v.setUniformi("texGeomColors",e.geometryImage.getTextureUnit()),v.setUniformi("texHSLColors",e.HSLColorImage.getTextureUnit()),v.setUniformi("texLIC",e.LICImage.getTextureUnit()),v.setUniformf("uLMin",y),v.setUniformf("uLMaxMinDiff",S),t.renderQuad(e.size,v),e.geometryImage.deactivate(),e.HSLColorImage.deactivate(),e.LICImage.deactivate(),i.removeColorBuffer(0),r.drawBuffers([r.NONE])}i.restorePreviousBindingsAndBuffers()},t.applyLIC=()=>{const r=e.licInterface.get("stepSize","numberOfSteps","enhancedLIC","enhanceContrast","lowLICContrastEnhancementFactor","highLICContrastEnhancementFactor","antiAlias","normalizeVectors","maskThreshold","transformVectors"),i=e.licHelper.executeLIC(e.size,e.vectorImage,e.maskVectorImage,e.noiseTexture,e._openGLRenderWindow,r);if(!i){console.error("Failed to compute image LIC"),e.LICImage=null;return}e.LICImage=i},t.setSize=r=>{Array.isArray(r)&&r.length===2&&(!e.size||e.size[0]!==r[0]||e.size[1]!==r[1])&&(e.size=r,t.releaseGraphicsResources())},t.releaseGraphicsResources=()=>{e.geometryImage&&(e.geometryImage.releaseGraphicsResources(),e.geometryImage=null),e.vectorImage&&(e.vectorImage.releaseGraphicsResources(),e.vectorImage=null),e.maskVectorImage&&(e.maskVectorImage.releaseGraphicsResources(),e.maskVectorImage=null),e.LICImage&&(e.LICImage.releaseGraphicsResources(),e.LICImage=null),e.RGBColorImage&&(e.RGBColorImage.releaseGraphicsResources(),e.RGBColorImage=null),e.HSLColorImage&&(e.HSLColorImage.releaseGraphicsResources(),e.HSLColorImage=null),e.depthTexture&&(e.depthTexture.releaseGraphicsResources(),e.depthTexture=null),e.framebuffer&&(e.framebuffer.releaseGraphicsResources(),e.framebuffer=null)}}const W8={context:null,shadersNeedBuilding:!0,reallocateTextures:!0,size:null,licInterface:null};function eh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,W8,a),Q1.extend(t,e,a),k.obj(t,e),k.setGet(t,e,["context","_openGLRenderWindow","reallocateTextures","licInterface","size"]),k.moveToProtected(t,e,["openGLRenderWindow"]),j8(t,e)}var $8={newInstance:k.newInstance(eh,"vtkSurfaceLICInterface"),extend:eh};const{vtkErrorMacro:oo}=wt;function H8(t,e){e.classHierarchy.push("vtkOpenGLSurfaceLICMapper");const a={...t};t.getNeedToRebuildShaders=(n,r,i)=>e.rebuildLICShaders||a.getNeedToRebuildShaders(n,r,i),t.replaceShaderValues=(n,r,i)=>{const s=e.lastBoundBO.getReferenceByName("lastLightComplexity");let u=n.Vertex,c=n.Fragment;const o=e.renderable.getInputArrayToProcess(0);if(o&&e.canDrawLIC){c=J.substitute(c,"//VTK::Output::Dec",["//VTK::Output::Dec","layout(location = 2) out vec4 vectorTexture;","layout(location = 3) out vec4 maskVectorTexture;"]).result;const l=`${o.getName()}MC`;s===0&&e.lastBoundBO.set({lastLightComplexity:1},!0),u=J.substitute(u,"//VTK::TCoord::Dec",[`attribute vec3 ${l};`,"out vec3 licOutput;","//VTK::TCoord::Dec"]).result,u=J.substitute(u,"//VTK::TCoord::Impl",[`licOutput = ${l};`,"//VTK::TCoord::Impl"]).result,c=J.substitute(c,"//VTK::TCoord::Dec",["uniform int uMaskOnSurface;","uniform mat3 normalMatrix;","in vec3 licOutput;","//VTK::TCoord::Dec"]).result,c=J.substitute(c,"//VTK::TCoord::Impl",["// projected vectors","  vec3 tcoordLIC = normalMatrix * licOutput;","  vec3 normN = normalize(normalVCVSOutput);","  float k = dot(tcoordLIC, normN);","  vec3 projected = (tcoordLIC - k*normN);","  vectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","// vectors for fragment masking","  if (uMaskOnSurface == 0)","    {","    maskVectorTexture = vec4(licOutput, 1.0);","    }","  else","    {","    maskVectorTexture = vec4(projected.x, projected.y, 0.0 , 1.0);","    }","//VTK::TCoord::Impl"],!1).result,n.Vertex=u}e.rebuildLICShaders=!1,n.Fragment=c,a.replaceShaderValues(n,r,i),s>0&&e.lastBoundBO.set({lastLightComplexity:s},!0)},t.setMapperShaderParameters=(n,r,i)=>{a.setMapperShaderParameters(n,r,i),e.canDrawLIC&&n.getProgram().setUniformi("uMaskOnSurface",e.maskOnSurface)},t.getNeedToRebuildBufferObjects=(n,r)=>e.rebuildLICBuffers||a.getNeedToRebuildBufferObjects(n,r),t.buildBufferObjects=(n,r)=>{if(e.canDrawLIC){const i=e.renderable.getInputArrayToProcess(0);i&&i.getNumberOfComponents()>1&&e.renderable.setCustomShaderAttributes([i.getName()])}e.rebuildLICBuffers=!1,a.buildBufferObjects(n,r)},t.pushState=n=>{e.stateCache={[n.BLEND]:n.isEnabled(n.BLEND),[n.DEPTH_TEST]:n.isEnabled(n.DEPTH_TEST),[n.SCISSOR_TEST]:n.isEnabled(n.SCISSOR_TEST),[n.CULL_FACE]:n.isEnabled(n.CULL_FACE)}},t.popState=n=>{const r=i=>e.stateCache[i]?n.enable(i):n.disable(i);r(n.BLEND),r(n.DEPTH_TEST),r(n.SCISSOR_TEST),r(n.CULL_FACE)},t.renderPiece=(n,r)=>{let i=!0;e._openGLRenderWindow.getWebgl2()||(oo("SurfaceLICMapper Requires WebGL 2"),i=!1),(!e.context.getExtension("EXT_color_buffer_float")||!e.context.getExtension("OES_texture_float_linear"))&&(oo("SurfaceLICMapper requires the EXT_color_buffer_float and OES_texture_float_linear WebGL2 extensions."),i=!1),e.currentInput=e.renderable.getInputData(),e.currentInput||(oo("No input"),i=!1);let u=e.renderable.getLicInterface();u||(u=Q1.newInstance(),e.renderable.setLicInterface(u)),e.openGLLicInterface||(e.openGLLicInterface=$8.newInstance()),u!==e.openGLLicInterface.getLicInterface()&&e.openGLLicInterface.setLicInterface(u);const c=e.renderable.getInputArrayToProcess(0);if(u.getEnableLIC()&&(!c||c.getNumberOfComponents()<2)&&(oo("No vector input array"),i=!1),u.getEnableLIC()||(i=!1),e.canDrawLIC!==i&&(e.rebuildLICShaders=!0,e.rebuildLICBuffers=!0),e.canDrawLIC=i,!i||!u.getEnableLIC()){a.renderPiece(n,r);return}const o=e.context,f=r.getProperty().getBackfaceCulling(),l=r.getProperty().getFrontfaceCulling();!f&&!l?e._openGLRenderWindow.disableCullFace():l?(e._openGLRenderWindow.enableCullFace(),o.cullFace(o.FRONT)):(e._openGLRenderWindow.enableCullFace(),o.cullFace(o.BACK));const h=e._openGLRenderWindow.getSize(),p=h.map(d=>Math.round(d*u.getViewPortScale()));e.openGLLicInterface.setSize(p),e.openGLLicInterface.setOpenGLRenderWindow(e._openGLRenderWindow),e.openGLLicInterface.setContext(e.context),t.pushState(e.context),e.openGLLicInterface.initializeResources(),e.openGLLicInterface.prepareForGeometry(),t.popState(e.context),a.renderPieceStart(n,r),a.renderPieceDraw(n,r),a.renderPieceFinish(n,r),t.pushState(e.context),e.VBOBuildTime.modified(),e.openGLLicInterface.completedGeometry(),e.context.disable(e.context.CULL_FACE),e.openGLLicInterface.applyLIC(),e.openGLLicInterface.combineColorsAndLIC(),e.openGLLicInterface.copyToScreen(h),t.popState(e.context)}}const K8={canDrawLIC:!1,rebuildLICShaders:!1,rebuildLICBuffers:!1,openGLLicInterface:null};function X8(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,K8,a),eo.extend(t,e,a),H8(t,e),lt(t,e,["openGLLicInterface"])}const q8=Ke(X8,"vtkOpenGLSurfaceLICMapper");st("vtkSurfaceLICMapper",q8);var Y8=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkSphereMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// this shader implements imposters in OpenGL for Spheres

attribute vec4 vertexMC;
attribute vec2 offsetMC;

// optional normal declaration
//VTK::Normal::Dec

//VTK::Picking::Dec

// Texture coordinates
//VTK::TCoord::Dec

uniform mat3 normalMatrix; // transform model coordinate directions to view coordinates

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

varying vec4 vertexVCVSOutput;
varying float radiusVCVSOutput;
varying vec3 centerVCVSOutput;

uniform int cameraParallel;
uniform float scaleFactor;

void main()
{
  //VTK::Picking::Impl

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  // compute the projected vertex position
  vec2 scaledOffsetMC = scaleFactor * offsetMC;
  vertexVCVSOutput = MCVCMatrix * vertexMC;
  centerVCVSOutput = vertexVCVSOutput.xyz;
  radiusVCVSOutput = length(scaledOffsetMC)*0.5;

  // make the triangle face the camera
  if (cameraParallel == 0)
    {
    vec3 dir = normalize(-vertexVCVSOutput.xyz);
    vec3 base2 = normalize(cross(dir,vec3(1.0,0.0,0.0)));
    vec3 base1 = cross(base2,dir);
    vertexVCVSOutput.xyz = vertexVCVSOutput.xyz + scaledOffsetMC.x*base1 + scaledOffsetMC.y*base2;
    }
  else
    {
    // add in the offset
    vertexVCVSOutput.xy = vertexVCVSOutput.xy + scaledOffsetMC;
    }

  gl_Position = VCPCMatrix * vertexVCVSOutput;
}
`;const{vtkErrorMacro:J8}=wt;function Z8(t,e){e.classHierarchy.push("vtkOpenGLSphereMapper");const a={...t};t.getShaderTemplate=(n,r,i)=>{n.Vertex=Y8,n.Fragment=La,n.Geometry=""},t.replaceShaderValues=(n,r,i)=>{let s=n.Vertex,u=n.Fragment;s=J.substitute(s,"//VTK::Camera::Dec",[`uniform mat4 VCPCMatrix;
`,"uniform mat4 MCVCMatrix;"]).result,u=J.substitute(u,"//VTK::PositionVC::Dec",["varying vec4 vertexVCVSOutput;"]).result,u=J.substitute(u,"//VTK::PositionVC::Impl",[`vec4 vertexVC = vertexVCVSOutput;
`]).result;const c=[`uniform float invertedDepth;
`,`uniform int cameraParallel;
`,`varying float radiusVCVSOutput;
`,`varying vec3 centerVCVSOutput;
`,`uniform mat4 VCPCMatrix;
`];u=J.substitute(u,"//VTK::Normal::Dec",c).result;let o="";e.context.getExtension("EXT_frag_depth")&&(o=`gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;
`),e._openGLRenderWindow.getWebgl2()&&(o=`gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;
`),u=J.substitute(u,"//VTK::Depth::Impl",[`  vec3 EyePos;
`,`  vec3 EyeDir;
`,`  if (cameraParallel != 0) {
`,`    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);
`,`    EyeDir = vec3(0.0,0.0,-1.0); }
`,`  else {
`,`    EyeDir = vertexVC.xyz;
`,`    EyePos = vec3(0.0,0.0,0.0);
`,`    float lengthED = length(EyeDir);
`,`    EyeDir = normalize(EyeDir);
`,`    if (lengthED > radiusVCVSOutput*3.0) {
`,`      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }
`,`    }
`,`  EyePos = EyePos - centerVCVSOutput;
`,`  EyePos = EyePos/radiusVCVSOutput;
`,`  float b = 2.0*dot(EyePos,EyeDir);
`,`  float c = dot(EyePos,EyePos) - 1.0;
`,`  float d = b*b - 4.0*c;
`,`  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);
`,`  if (d < 0.0) { discard; }
`,`  else {
`,`    float t = (-b - invertedDepth*sqrt(d))*0.5;
`,`    normalVCVSOutput = invertedDepth*normalize(EyePos + t*EyeDir);
`,`    vertexVC.xyz = normalVCVSOutput*radiusVCVSOutput + centerVCVSOutput;
`,`    }
`,`  vec4 pos = VCPCMatrix * vertexVC;
`,o]).result,u=J.substitute(u,"//VTK::Normal::Impl","").result,e.haveSeenDepthRequest&&(u=J.substitute(u,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=s,n.Fragment=u,a.replaceShaderValues(n,r,i)},t.setMapperShaderParameters=(n,r,i)=>{if(n.getCABO().getElementCount()&&(e.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&n.getProgram().isAttributeUsed("offsetMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"offsetMC",12,n.getCABO().getStride(),e.context.FLOAT,2,!1)||J8("Error setting 'offsetMC' in shader VAO.")),n.getProgram().isUniformUsed("invertedDepth")&&n.getProgram().setUniformf("invertedDepth",e.invert?-1:1),n.getProgram().isUniformUsed("scaleFactor")){const u=e.currentInput.getPointData();e.renderable.getScaleArray()!=null&&u.hasArray(e.renderable.getScaleArray())?n.getProgram().setUniformf("scaleFactor",e.renderable.getScaleFactor()):n.getProgram().setUniformf("scaleFactor",1)}a.setMapperShaderParameters(n,r,i)},t.setCameraShaderParameters=(n,r,i)=>{const s=n.getProgram(),u=r.getActiveCamera(),c=e.openGLCamera.getKeyMatrices(r);if(s.isUniformUsed("VCPCMatrix")&&s.setUniformMatrix("VCPCMatrix",c.vcpc),s.isUniformUsed("MCVCMatrix"))if(i.getIsIdentity())s.setUniformMatrix("MCVCMatrix",c.wcvc);else{const o=e.openGLActor.getKeyMatrices(),f=new Float64Array(16);Ge(f,c.wcvc,o.mcwc),s.setUniformMatrix("MCVCMatrix",f)}s.isUniformUsed("cameraParallel")&&n.getProgram().setUniformi("cameraParallel",u.getParallelProjection())},t.getOpenGLMode=(n,r)=>e.context.TRIANGLES,t.buildBufferObjects=(n,r)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,1);const s=e.renderable.getColorMapColors(),u=e.primitives[e.primTypes.Tris].getCABO(),c=i.getPointData(),o=i.getPoints(),f=o.getNumberOfPoints(),l=o.getData(),h=5;let p=null;e.renderable.getScaleArray()!=null&&c.hasArray(e.renderable.getScaleArray())&&(p=c.getArray(e.renderable.getScaleArray()).getData());let d=null,y=0,m=null;s?(y=s.getNumberOfComponents(),u.setColorOffset(0),u.setColorBOStride(4),d=s.getData(),m=new Uint8Array(3*f*4),u.getColorBO()||u.setColorBO(mn.newInstance()),u.getColorBO().setOpenGLRenderWindow(e._openGLRenderWindow)):u.getColorBO()&&u.setColorBO(null),u.setColorComponents(y);const S=new Float32Array(h*f*3);u.setStride(h*4);const v=Math.cos(qe(30));let g=0,x=0,C=0,T=0;for(let w=0;w<f;++w){let _=e.renderable.getRadius();p&&(_=p[w]),g=w*3,S[C++]=l[g++],S[C++]=l[g++],S[C++]=l[g++],S[C++]=-2*_*v,S[C++]=-_,d&&(x=w*y,m[T++]=d[x],m[T++]=d[x+1],m[T++]=d[x+2],m[T++]=d[x+3]),g=w*3,S[C++]=l[g++],S[C++]=l[g++],S[C++]=l[g++],S[C++]=2*_*v,S[C++]=-_,d&&(m[T++]=d[x],m[T++]=d[x+1],m[T++]=d[x+2],m[T++]=d[x+3]),g=w*3,S[C++]=l[g++],S[C++]=l[g++],S[C++]=l[g++],S[C++]=0,S[C++]=2*_,d&&(m[T++]=d[x],m[T++]=d[x+1],m[T++]=d[x+2],m[T++]=d[x+3])}u.setElementCount(C/h),u.upload(S,yn.ARRAY_BUFFER),s&&u.getColorBO().upload(m,yn.ARRAY_BUFFER),e.VBOBuildTime.modified()}}const Q8={};function e6(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Q8,a),eo.extend(t,e,a),Z8(t,e)}const t6=Ke(e6,"vtkOpenGLSphereMapper");st("vtkSphereMapper",t6);var n6=`//VTK::System::Dec

/*=========================================================================

  Program:   Visualization Toolkit
  Module:    vtkStickMapperVS.glsl

  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen
  All rights reserved.
  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.

     This software is distributed WITHOUT ANY WARRANTY; without even
     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
     PURPOSE.  See the above copyright notice for more information.

=========================================================================*/
// this shader implements imposters in OpenGL for Sticks

attribute vec4 vertexMC;
attribute vec3 orientMC;
attribute vec4 offsetMC;
attribute float radiusMC;

// optional normal declaration
//VTK::Normal::Dec

//VTK::Picking::Dec

// Texture coordinates
//VTK::TCoord::Dec

uniform mat3 normalMatrix; // transform model coordinate directions to view coordinates

// material property values
//VTK::Color::Dec

// clipping plane vars
//VTK::Clip::Dec

// camera and actor matrix values
//VTK::Camera::Dec

varying vec4 vertexVCVSOutput;
varying float radiusVCVSOutput;
varying float lengthVCVSOutput;
varying vec3 centerVCVSOutput;
varying vec3 orientVCVSOutput;

uniform int cameraParallel;

void main()
{
  //VTK::Picking::Impl

  //VTK::Color::Impl

  //VTK::Normal::Impl

  //VTK::TCoord::Impl

  //VTK::Clip::Impl

  vertexVCVSOutput = MCVCMatrix * vertexMC;
  centerVCVSOutput = vertexVCVSOutput.xyz;
  radiusVCVSOutput = radiusMC;
  lengthVCVSOutput = length(orientMC);
  orientVCVSOutput = normalMatrix * normalize(orientMC);

  // make sure it is pointing out of the screen
  if (orientVCVSOutput.z < 0.0)
    {
    orientVCVSOutput = -orientVCVSOutput;
    }

  // make the basis
  vec3 xbase;
  vec3 ybase;
  vec3 dir = vec3(0.0,0.0,1.0);
  if (cameraParallel == 0)
    {
    dir = normalize(-vertexVCVSOutput.xyz);
    }
  if (abs(dot(dir,orientVCVSOutput)) == 1.0)
    {
    xbase = normalize(cross(vec3(0.0,1.0,0.0),orientVCVSOutput));
    ybase = cross(xbase,orientVCVSOutput);
    }
  else
    {
    xbase = normalize(cross(orientVCVSOutput,dir));
    ybase = cross(orientVCVSOutput,xbase);
    }

  vec3 offsets = offsetMC.xyz*2.0-1.0;
  vertexVCVSOutput.xyz = vertexVCVSOutput.xyz +
    radiusVCVSOutput*offsets.x*xbase +
    radiusVCVSOutput*offsets.y*ybase +
    0.5*lengthVCVSOutput*offsets.z*orientVCVSOutput;

  gl_Position = VCPCMatrix * vertexVCVSOutput;
}
`;const{vtkErrorMacro:so}=wt;function r6(t,e){e.classHierarchy.push("vtkOpenGLStickMapper");const a={...t};t.getShaderTemplate=(n,r,i)=>{n.Vertex=n6,n.Fragment=La,n.Geometry=""},t.replaceShaderValues=(n,r,i)=>{let s=n.Vertex,u=n.Fragment;s=J.substitute(s,"//VTK::Camera::Dec",[`uniform mat4 VCPCMatrix;
`,"uniform mat4 MCVCMatrix;"]).result,u=J.substitute(u,"//VTK::PositionVC::Dec","varying vec4 vertexVCVSOutput;").result,u=J.substitute(u,"//VTK::PositionVC::Impl",`  vec4 vertexVC = vertexVCVSOutput;
`).result;const c=[`uniform int cameraParallel;
`,`varying float radiusVCVSOutput;
`,`varying vec3 orientVCVSOutput;
`,`varying float lengthVCVSOutput;
`,`varying vec3 centerVCVSOutput;
`,`uniform mat4 VCPCMatrix;
`];u=J.substitute(u,"//VTK::Normal::Dec",c).result;let o="";e.context.getExtension("EXT_frag_depth")&&(o=`  gl_FragDepthEXT = (pos.z / pos.w + 1.0) / 2.0;
`),e._openGLRenderWindow.getWebgl2()&&(o=`gl_FragDepth = (pos.z / pos.w + 1.0) / 2.0;
`),u=J.substitute(u,"//VTK::Depth::Impl",[`  vec3 EyePos;
`,`  vec3 EyeDir;
`,`  if (cameraParallel != 0) {
`,`    EyePos = vec3(vertexVC.x, vertexVC.y, vertexVC.z + 3.0*radiusVCVSOutput);
`,`    EyeDir = vec3(0.0,0.0,-1.0); }
`,`  else {
`,`    EyeDir = vertexVC.xyz;
`,`    EyePos = vec3(0.0,0.0,0.0);
`,`    float lengthED = length(EyeDir);
`,`    EyeDir = normalize(EyeDir);
`,`    if (lengthED > radiusVCVSOutput*3.0) {
`,`      EyePos = vertexVC.xyz - EyeDir*3.0*radiusVCVSOutput; }
`,`    }
`,`  EyePos = EyePos - centerVCVSOutput;
`,`  vec3 base1;
`,`  if (abs(orientVCVSOutput.z) < 0.99) {
`,`    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,0.0,1.0))); }
`,`  else {
`,`    base1 = normalize(cross(orientVCVSOutput,vec3(0.0,1.0,0.0))); }
`,`  vec3 base2 = cross(orientVCVSOutput,base1);
`,`  EyePos = vec3(dot(EyePos,base1),dot(EyePos,base2),dot(EyePos,orientVCVSOutput));
`,`  EyeDir = vec3(dot(EyeDir,base1),dot(EyeDir,base2),dot(EyeDir,orientVCVSOutput));
`,`  EyePos = EyePos/radiusVCVSOutput;
`,`  float a = EyeDir.x*EyeDir.x + EyeDir.y*EyeDir.y;
`,`  float b = 2.0*(EyePos.x*EyeDir.x + EyePos.y*EyeDir.y);
`,`  float c = EyePos.x*EyePos.x + EyePos.y*EyePos.y - 1.0;
`,`  float d = b*b - 4.0*a*c;
`,`  vec3 normalVCVSOutput = vec3(0.0,0.0,1.0);
`,`  if (d < 0.0) { discard; }
`,`  else {
`,`    float t =  (-b - sqrt(d))/(2.0*a);
`,`    float tz = EyePos.z + t*EyeDir.z;
`,`    vec3 iPoint = EyePos + t*EyeDir;
`,`    if (abs(iPoint.z)*radiusVCVSOutput > lengthVCVSOutput*0.5) {
`,`      float t2 = (-b + sqrt(d))/(2.0*a);
`,`      float tz2 = EyePos.z + t2*EyeDir.z;
`,`      if (tz2*radiusVCVSOutput > lengthVCVSOutput*0.5 || tz*radiusVCVSOutput < -0.5*lengthVCVSOutput) { discard; }
`,`      else {
`,`        normalVCVSOutput = orientVCVSOutput;
`,`        float t3 = (lengthVCVSOutput*0.5/radiusVCVSOutput - EyePos.z)/EyeDir.z;
`,`        iPoint = EyePos + t3*EyeDir;
`,`        vertexVC.xyz = radiusVCVSOutput*(iPoint.x*base1 + iPoint.y*base2 + iPoint.z*orientVCVSOutput) + centerVCVSOutput;
`,`        }
`,`      }
`,`    else {
`,`      normalVCVSOutput = iPoint.x*base1 + iPoint.y*base2;
`,`      vertexVC.xyz = radiusVCVSOutput*(normalVCVSOutput + iPoint.z*orientVCVSOutput) + centerVCVSOutput;
`,`      }
`,`    }
`,`  vec4 pos = VCPCMatrix * vertexVC;
`,o]).result,u=J.substitute(u,"//VTK::Normal::Impl","").result,e.haveSeenDepthRequest&&(u=J.substitute(u,"//VTK::ZBuffer::Impl",["if (depthRequest == 1) {","float computedZ = (pos.z / pos.w + 1.0) / 2.0;","float iz = floor(computedZ * 65535.0 + 0.1);","float rf = floor(iz/256.0)/255.0;","float gf = mod(iz,256.0)/255.0;","gl_FragData[0] = vec4(rf, gf, 0.0, 1.0); }"]).result),n.Vertex=s,n.Fragment=u,a.replaceShaderValues(n,r,i)},t.setMapperShaderParameters=(n,r,i)=>{n.getCABO().getElementCount()&&(e.VBOBuildTime>n.getAttributeUpdateTime().getMTime()||n.getShaderSourceTime().getMTime()>n.getAttributeUpdateTime().getMTime())&&(n.getProgram().isAttributeUsed("orientMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"orientMC",12,n.getCABO().getStride(),e.context.FLOAT,3,!1)||so("Error setting 'orientMC' in shader VAO.")),n.getProgram().isAttributeUsed("offsetMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO().getColorBO(),"offsetMC",0,n.getCABO().getColorBOStride(),e.context.UNSIGNED_BYTE,3,!0)||so("Error setting 'offsetMC' in shader VAO.")),n.getProgram().isAttributeUsed("radiusMC")&&(n.getVAO().addAttributeArray(n.getProgram(),n.getCABO(),"radiusMC",24,n.getCABO().getStride(),e.context.FLOAT,1,!1)||so("Error setting 'radiusMC' in shader VAO."))),a.setMapperShaderParameters(n,r,i)},t.setCameraShaderParameters=(n,r,i)=>{const s=n.getProgram(),u=r.getActiveCamera(),c=e.openGLCamera.getKeyMatrices(r);if(s.isUniformUsed("VCPCMatrix")&&s.setUniformMatrix("VCPCMatrix",c.vcpc),i.getIsIdentity())s.isUniformUsed("MCVCMatrix")&&s.setUniformMatrix("MCVCMatrix",c.wcvc),s.isUniformUsed("normalMatrix")&&s.setUniformMatrix3x3("normalMatrix",c.normalMatrix);else{const o=e.openGLActor.getKeyMatrices();if(s.isUniformUsed("MCVCMatrix")){const f=new Float64Array(16);Ge(f,c.wcvc,o.mcwc),s.setUniformMatrix("MCVCMatrix",f)}if(s.isUniformUsed("normalMatrix")){const f=new Float64Array(9);Sr(f,c.normalMatrix,o.normalMatrix),s.setUniformMatrix3x3("normalMatrix",f)}}s.isUniformUsed("cameraParallel")&&n.getProgram().setUniformi("cameraParallel",u.getParallelProjection())},t.getOpenGLMode=(n,r)=>e.context.TRIANGLES,t.buildBufferObjects=(n,r)=>{const i=e.currentInput;if(i===null)return;e.renderable.mapScalars(i,1);const s=e.renderable.getColorMapColors(),u=e.primitives[e.primTypes.Tris].getCABO(),c=i.getPointData(),o=i.getPoints(),f=o.getNumberOfPoints(),l=o.getData();let h=3;h+=4;let p=null,d=0;u.setColorBOStride(4),u.getColorBO()||u.setColorBO(mn.newInstance()),u.getColorBO().setOpenGLRenderWindow(e._openGLRenderWindow),s&&(d=s.getNumberOfComponents(),u.setColorOffset(4),p=s.getData(),u.setColorBOStride(8)),u.setColorComponents(d),u.setStride(h*4);const y=new Float32Array(h*f*12),m=new Uint8Array(12*f*(p?8:4));let S=null,v=null;e.renderable.getScaleArray()!=null&&c.hasArray(e.renderable.getScaleArray())&&(S=c.getArray(e.renderable.getScaleArray()).getData()),e.renderable.getOrientationArray()!=null&&c.hasArray(e.renderable.getOrientationArray())?v=c.getArray(e.renderable.getOrientationArray()).getData():so([`Error setting orientationArray.
`,"You have to specify the stick orientation"]);const g=[0,1,3,0,3,2,2,3,5,2,5,4];let x=0,C=0,T=0,w=0;for(let _=0;_<f;++_){let E=e.renderable.getLength(),D=e.renderable.getRadius();S&&(E=S[_*2],D=S[_*2+1]);for(let b=0;b<g.length;++b)x=_*3,y[T++]=l[x++],y[T++]=l[x++],y[T++]=l[x++],x=_*3,y[T++]=v[x++]*E,y[T++]=v[x++]*E,y[T++]=v[x++]*E,y[T++]=D,m[w++]=255*(g[b]%2),m[w++]=g[b]>=4?255:0,m[w++]=g[b]>=2?255:0,m[w++]=255,C=_*d,p&&(m[w++]=p[C],m[w++]=p[C+1],m[w++]=p[C+2],m[w++]=p[C+3])}u.setElementCount(T/h),u.upload(y,yn.ARRAY_BUFFER),u.getColorBO().upload(m,yn.ARRAY_BUFFER),e.VBOBuildTime.modified()}}const a6={};function i6(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,a6,a),eo.extend(t,e,a),r6(t,e)}const o6=Ke(i6,"vtkOpenGLStickMapper");st("vtkStickMapper",o6);var Tt=Uint8Array,gr=Uint16Array,th=Uint32Array,nh=new Tt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),rh=new Tt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s6=new Tt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ah=function(t,e){for(var a=new gr(31),n=0;n<31;++n)a[n]=e+=1<<t[n-1];for(var r=new th(a[30]),n=1;n<30;++n)for(var i=a[n];i<a[n+1];++i)r[i]=i-a[n]<<5|n;return[a,r]},ih=ah(nh,2),oh=ih[0],u6=ih[1];oh[28]=258,u6[258]=28;for(var c6=ah(rh,0),l6=c6[0],_0=new gr(32768),Qe=0;Qe<32768;++Qe){var An=(Qe&43690)>>>1|(Qe&21845)<<1;An=(An&52428)>>>2|(An&13107)<<2,An=(An&61680)>>>4|(An&3855)<<4,_0[Qe]=((An&65280)>>>8|(An&255)<<8)>>>1}for(var Va=function(t,e,a){for(var n=t.length,r=0,i=new gr(e);r<n;++r)t[r]&&++i[t[r]-1];var s=new gr(e);for(r=0;r<e;++r)s[r]=s[r-1]+i[r-1]<<1;var u;if(a){u=new gr(1<<e);var c=15-e;for(r=0;r<n;++r)if(t[r])for(var o=r<<4|t[r],f=e-t[r],l=s[t[r]-1]++<<f,h=l|(1<<f)-1;l<=h;++l)u[_0[l]>>>c]=o}else for(u=new gr(n),r=0;r<n;++r)t[r]&&(u[r]=_0[s[t[r]-1]++]>>>15-t[r]);return u},Ba=new Tt(288),Qe=0;Qe<144;++Qe)Ba[Qe]=8;for(var Qe=144;Qe<256;++Qe)Ba[Qe]=9;for(var Qe=256;Qe<280;++Qe)Ba[Qe]=7;for(var Qe=280;Qe<288;++Qe)Ba[Qe]=8;for(var sh=new Tt(32),Qe=0;Qe<32;++Qe)sh[Qe]=5;var f6=Va(Ba,9,1),h6=Va(sh,5,1),E0=function(t){for(var e=t[0],a=1;a<t.length;++a)t[a]>e&&(e=t[a]);return e},Jt=function(t,e,a){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&a},D0=function(t,e){var a=e/8|0;return(t[a]|t[a+1]<<8|t[a+2]<<16)>>(e&7)},p6=function(t){return(t+7)/8|0},uo=function(t,e,a){(e==null||e<0)&&(e=0),(a==null||a>t.length)&&(a=t.length);var n=new(t.BYTES_PER_ELEMENT==2?gr:t.BYTES_PER_ELEMENT==4?th:Tt)(a-e);return n.set(t.subarray(e,a)),n},g6=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Dt=function(t,e,a){var n=new Error(e||g6[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,Dt),!a)throw n;return n},b0=function(t,e,a){var n=t.length;if(!n||a&&a.f&&!a.l)return e||new Tt(0);var r=!e||a,i=!a||a.i;a||(a={}),e||(e=new Tt(n*3));var s=function(ee){var re=e.length;if(ee>re){var ie=new Tt(Math.max(re*2,ee));ie.set(e),e=ie}},u=a.f||0,c=a.p||0,o=a.b||0,f=a.l,l=a.d,h=a.m,p=a.n,d=n*8;do{if(!f){u=Jt(t,c,1);var y=Jt(t,c+1,3);if(c+=3,y)if(y==1)f=f6,l=h6,h=9,p=5;else if(y==2){var g=Jt(t,c,31)+257,x=Jt(t,c+10,15)+4,C=g+Jt(t,c+5,31)+1;c+=14;for(var T=new Tt(C),w=new Tt(19),_=0;_<x;++_)w[s6[_]]=Jt(t,c+_*3,7);c+=x*3;for(var E=E0(w),D=(1<<E)-1,b=Va(w,E,1),_=0;_<C;){var N=b[Jt(t,c,D)];c+=N&15;var m=N>>>4;if(m<16)T[_++]=m;else{var R=0,M=0;for(m==16?(M=3+Jt(t,c,3),c+=2,R=T[_-1]):m==17?(M=3+Jt(t,c,7),c+=3):m==18&&(M=11+Jt(t,c,127),c+=7);M--;)T[_++]=R}}var A=T.subarray(0,g),I=T.subarray(g);h=E0(A),p=E0(I),f=Va(A,h,1),l=Va(I,p,1)}else Dt(1);else{var m=p6(c)+4,S=t[m-4]|t[m-3]<<8,v=m+S;if(v>n){i&&Dt(0);break}r&&s(o+S),e.set(t.subarray(m,v),o),a.b=o+=S,a.p=c=v*8,a.f=u;continue}if(c>d){i&&Dt(0);break}}r&&s(o+131072);for(var $=(1<<h)-1,U=(1<<p)-1,B=c;;B=c){var R=f[D0(t,c)&$],F=R>>>4;if(c+=R&15,c>d){i&&Dt(0);break}if(R||Dt(2),F<256)e[o++]=F;else if(F==256){B=c,f=null;break}else{var z=F-254;if(F>264){var _=F-257,H=nh[_];z=Jt(t,c,(1<<H)-1)+oh[_],c+=H}var X=l[D0(t,c)&U],Y=X>>>4;X||Dt(3),c+=X&15;var I=l6[Y];if(Y>3){var H=rh[Y];I+=D0(t,c)&(1<<H)-1,c+=H}if(c>d){i&&Dt(0);break}r&&s(o+131072);for(var q=o+z;o<q;o+=4)e[o]=e[o-I],e[o+1]=e[o+1-I],e[o+2]=e[o+2-I],e[o+3]=e[o+3-I];o=q}}a.l=f,a.p=B,a.b=o,a.f=u,f&&(u=1,a.m=h,a.d=l,a.n=p)}while(!u);return o==e.length?e:uo(e,0,o)},d6=new Tt(0),sn=function(t,e){return t[e]|t[e+1]<<8},Zt=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},O0=function(t,e){return Zt(t,e)+Zt(t,e+4)*4294967296},v6=function(t){(t[0]!=31||t[1]!=139||t[2]!=8)&&Dt(6,"invalid gzip data");var e=t[3],a=10;e&4&&(a+=t[10]|(t[11]<<8)+2);for(var n=(e>>3&1)+(e>>4&1);n>0;n-=!t[a++]);return a+(e&2)},y6=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},m6=function(t){((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)&&Dt(6,"invalid zlib data"),t[1]&32&&Dt(6,"invalid zlib data: preset dictionaries not supported")};function uh(t,e){return b0(t,e)}function x6(t,e){return b0(t.subarray(v6(t),-8),e||new Tt(y6(t)))}function S6(t,e){return b0((m6(t),t.subarray(2,-4)),e)}function Qt(t,e){return t[0]==31&&t[1]==139&&t[2]==8?x6(t,e):(t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31?uh(t,e):S6(t,e)}var ch=typeof TextEncoder<"u"&&new TextEncoder,N0=typeof TextDecoder<"u"&&new TextDecoder,C6=0;try{N0.decode(d6,{stream:!0}),C6=1}catch{}var T6=function(t){for(var e="",a=0;;){var n=t[a++],r=(n>127)+(n>223)+(n>239);if(a+r>t.length)return[e,uo(t,a-1)];r?r==3?(n=((n&15)<<18|(t[a++]&63)<<12|(t[a++]&63)<<6|t[a++]&63)-65536,e+=String.fromCharCode(55296|n>>10,56320|n&1023)):r&1?e+=String.fromCharCode((n&31)<<6|t[a++]&63):e+=String.fromCharCode((n&15)<<12|(t[a++]&63)<<6|t[a++]&63):e+=String.fromCharCode(n)}};function w6(t,e){if(e){for(var a=new Tt(t.length),n=0;n<t.length;++n)a[n]=t.charCodeAt(n);return a}if(ch)return ch.encode(t);for(var r=t.length,i=new Tt(t.length+(t.length>>1)),s=0,u=function(f){i[s++]=f},n=0;n<r;++n){if(s+5>i.length){var c=new Tt(s+8+(r-n<<1));c.set(i),i=c}var o=t.charCodeAt(n);o<128||e?u(o):o<2048?(u(192|o>>6),u(128|o&63)):o>55295&&o<57344?(o=65536+(o&1023<<10)|t.charCodeAt(++n)&1023,u(240|o>>18),u(128|o>>12&63),u(128|o>>6&63),u(128|o&63)):(u(224|o>>12),u(128|o>>6&63),u(128|o&63))}return uo(i,0,s)}function en(t,e){if(e){for(var a="",n=0;n<t.length;n+=16384)a+=String.fromCharCode.apply(null,t.subarray(n,n+16384));return a}else{if(N0)return N0.decode(t);var r=T6(t),i=r[0],s=r[1];return s.length&&Dt(8),i}}var _6=function(t,e){return e+30+sn(t,e+26)+sn(t,e+28)},E6=function(t,e,a){var n=sn(t,e+28),r=en(t.subarray(e+46,e+46+n),!(sn(t,e+8)&2048)),i=e+46+n,s=Zt(t,e+20),u=a&&s==4294967295?D6(t,i):[s,Zt(t,e+24),Zt(t,e+42)],c=u[0],o=u[1],f=u[2];return[sn(t,e+10),c,o,r,i+sn(t,e+30)+sn(t,e+32),f]},D6=function(t,e){for(;sn(t,e)!=1;e+=4+sn(t,e+2));return[O0(t,e+12),O0(t,e+4),O0(t,e+20)]};function lh(t,e){for(var a={},n=t.length-22;Zt(t,n)!=101010256;--n)(!n||t.length-n>65558)&&Dt(13);var r=sn(t,n+8);if(!r)return{};var i=Zt(t,n+16),s=i==4294967295;s&&(n=Zt(t,n-12),Zt(t,n)!=101075792&&Dt(13),r=Zt(t,n+32),i=Zt(t,n+48));for(var u=e&&e.filter,c=0;c<r;++c){var o=E6(t,i,s),f=o[0],l=o[1],h=o[2],p=o[3],d=o[4],y=o[5],m=_6(t,y);i=d,(!u||u({name:p,size:l,originalSize:h,compression:f}))&&(f?f==8?a[p]=uh(t.subarray(m,m+l),new Tt(h)):Dt(14,"unknown compression type "+f):a[p]=uo(t,m,m+l))}return a}function fh(){const t=new ArrayBuffer(4),e=new Uint8Array(t),a=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,a[0]===3569595041?"LittleEndian":a[0]===2712847316?"BigEndian":null}const b6=fh();function O6(t,e){if(e<2)return;const a=new Int8Array(t),n=a.length,r=[];for(let i=0;i<n;i+=e){for(let s=0;s<e;s++)r.push(a[i+s]);for(let s=0;s<e;s++)a[i+s]=r.pop()}}var Tn={ENDIANNESS:b6,getEndianness:fh,swapBytes:O6};const M0={};function hh(t){return!!M0[t]}function N6(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return M0[t](e)}function co(t,e){M0[t]=e}var jr={get:N6,has:hh,registerType:co};const{vtkErrorMacro:Ua,vtkDebugMacro:M6}=k;let Wr=0;function lo(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=new XMLHttpRequest;return n.open(t,e,!0),a.headers&&Object.entries(a.headers).forEach(r=>{let[i,s]=r;return n.setRequestHeader(i,s)}),a.progressCallback&&n.addEventListener("progress",a.progressCallback),n}function R6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e&&e.compression&&e.compression!=="gz"&&(Ua("Supported algorithms are: [gz]"),Ua(`Unkown compression algorithm: ${e.compression}`)),new Promise((a,n)=>{const r=lo("GET",t,e);r.onreadystatechange=i=>{r.readyState===4&&(r.status===200||r.status===0?e.compression?a(Qt(new Uint8Array(r.response)).buffer):a(r.response):n({xhr:r,e:i}))},r.responseType="arraybuffer",r.send()})}function L6(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return a.ref&&!a.ref.pending?new Promise((r,i)=>{let s=null;a.ref.url?s=a.ref.url:s=[e,a.ref.basepath,n.compression?`${a.ref.id}.gz`:a.ref.id].join("/");const u=lo("GET",s,n);u.onreadystatechange=c=>{u.readyState===1&&(a.ref.pending=!0,++Wr===1&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!0)),u.readyState===4&&(a.ref.pending=!1,u.status===200||u.status===0?(a.buffer=u.response,n.compression&&(a.dataType==="string"||a.dataType==="JSON"?a.buffer=en(Qt(new Uint8Array(a.buffer))):a.buffer=Qt(new Uint8Array(a.buffer)).buffer),a.ref.encode==="JSON"?a.values=JSON.parse(a.buffer):(Tn.ENDIANNESS!==a.ref.encode&&Tn.ENDIANNESS&&(M6(`Swap bytes of ${a.name}`),Tn.swapBytes(a.buffer,Gi[a.dataType])),a.values=k.newTypedArray(a.dataType,a.buffer)),a.values.length!==a.size&&Ua(`Error in FetchArray: ${a.name}, does not have the proper array size. Got ${a.values.length}, instead of ${a.size}`),delete a.ref,--Wr===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),r(a)):i({xhr:u,e:c}))},u.responseType=n.compression||a.dataType!=="string"?"arraybuffer":"text",u.send()}):Promise.resolve(a)}function k6(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((n,r)=>{const i=lo("GET",e,a);i.onreadystatechange=s=>{i.readyState===1&&++Wr===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--Wr===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),i.status===200||i.status===0?a.compression?n(JSON.parse(en(Qt(new Uint8Array(i.response))))):n(JSON.parse(i.responseText)):r({xhr:i,e:s}))},i.responseType=a.compression?"arraybuffer":"text",i.send()})}function F6(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a&&a.compression&&a.compression!=="gz"&&(Ua("Supported algorithms are: [gz]"),Ua(`Unkown compression algorithm: ${a.compression}`)),new Promise((n,r)=>{const i=lo("GET",e,a);i.onreadystatechange=s=>{i.readyState===1&&++Wr===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--Wr===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),i.status===200||i.status===0?a.compression?n(en(Qt(new Uint8Array(i.response)))):n(i.responseText):r({xhr:i,e:s}))},i.responseType=a.compression?"arraybuffer":"text",i.send()})}function A6(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((n,r)=>{const i=new Image;a.crossOrigin&&(i.crossOrigin=a.crossOrigin),i.onload=()=>n(i),i.onerror=r,i.src=e})}const V6={fetchArray:L6,fetchJSON:k6,fetchText:F6,fetchBinary:R6,fetchImage:A6};co("http",t=>V6);const At=[];At["-".charCodeAt(0)]=62,At["_".charCodeAt(0)]=63;const $r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(let t=0;t<$r.length;t++)At[$r.charCodeAt(t)]=t;function un(t){return At[t.charCodeAt(0)]!==void 0}function B6(t){const e=t.length,a=[];let n=null;for(let r=0;r<e;r++)un(t[r])?(n||(n={start:r,count:0}),n.count++,n.end=r):t[r]==="="&&n&&(a.push(n),n=null);return n&&a.push(n),a}function U6(t,e,a,n){const{start:r,count:i}=e,s=i%4,u=Math.floor(i/4);let c=r,o=null,f=a;for(let l=0;l<u;l++){for(;!un(t[c]);)c++;for(o=At[t.charCodeAt(c++)]<<18;!un(t[c]);)c++;for(o|=At[t.charCodeAt(c++)]<<12;!un(t[c]);)c++;for(o|=At[t.charCodeAt(c++)]<<6;!un(t[c]);)c++;o|=At[t.charCodeAt(c++)],n[f++]=o>>16&255,n[f++]=o>>8&255,n[f++]=o&255}switch(s){case 3:for(;!un(t[c]);)c++;for(o=At[t.charCodeAt(c++)]<<10;!un(t[c]);)c++;for(o|=At[t.charCodeAt(c++)]<<4;!un(t[c]);)c++;o|=At[t.charCodeAt(c++)]>>2,n[f++]=o>>8&255,n[f++]=o&255;break;case 2:for(;!un(t[c]);)c++;for(o=At[t.charCodeAt(c++)]<<2;!un(t[c]);)c++;o|=At[t.charCodeAt(c++)]>>4,n[f++]=o&255;break;case 1:throw new Error("BASE64: remain 1 should not happen")}return f}function G6(t){const e=B6(t),a=e[e.length-1].end+1,n=(4-a%4)%4,r=(a+n)*3/4-n,i=new ArrayBuffer(r),s=new Uint8Array(i);let u=0;for(let c=0;c<e.length;c++)u+=U6(t,e[c],u,s),u+=(4-e[c].count%4)%4;return i}function ph(t,e,a){const n=(t<<16)+(e<<8)+a;return $r[n>>18]+$r[n>>12&63]+$r[n>>6&63]+$r[n&63]}function gh(t){const e=new Uint8Array(t),a=t.byteLength%3,n=t.byteLength-a,r=Array(n/3);for(let i=0;i<r.length;i++){const s=i*3;r[i]=ph(e[s],e[s+1],e[s+2])}if(a>0){const i=ph(e[n],e[n+1]||0,e[n+2]||0);a===1?r.push(`${i.substr(0,2)}==`):a===2&&r.push(`${i.substr(0,3)}=`)}return r.join("")}var dr={toArrayBuffer:G6,fromArrayBuffer:gh};const{vtkErrorMacro:Hr,vtkDebugMacro:I6}=k;function P6(t){const e=t.split(".").pop().toLowerCase();return e==="jpg"?"jpeg":e}function z6(t,e,a){return n=>{t.buffer=new ArrayBuffer(n.length),new Uint8Array(t.buffer).set(n),e&&(t.dataType==="string"||t.dataType==="JSON"?t.buffer=en(Qt(new Uint8Array(t.buffer))):t.buffer=Qt(new Uint8Array(t.buffer)).buffer),t.ref.encode==="JSON"?t.values=JSON.parse(t.buffer):(Tn.ENDIANNESS!==t.ref.encode&&Tn.ENDIANNESS&&(I6(`Swap bytes of ${t.name}`),Tn.swapBytes(t.buffer,Gi[t.dataType])),t.values=k.newTypedArray(t.dataType,t.buffer)),t.values.length!==t.size&&Hr(`Error in FetchArray: ${t.name} does not have the proper array size. Got ${t.values.length}, instead of ${t.size}`),a()}}function j6(t,e,a){return n=>{e?t.values=JSON.parse(en(Qt(n))):t.values=JSON.parse(n),a()}}function W6(t){return t[0]==="/"?t.substr(1):t}function $6(t){return new URL(t,"http://any").pathname}function Ga(t){return W6($6(t))}function H6(t){return new Promise((e,a)=>{typeof t=="string"?e(w6(t)):t instanceof Blob?e(t.arrayBuffer().then(n=>new Uint8Array(n))):t instanceof ArrayBuffer?e(new Uint8Array(t)):(t==null?void 0:t.buffer)instanceof ArrayBuffer?e(new Uint8Array(t.buffer)):a(new Error("Invalid datatype to unpack."))})}function K6(t){let e=!1,a=0,n=null,r="";return H6(t.zipContent).then(i=>{n=lh(i),e=!0;const s=[];Object.keys(n).forEach(u=>{u.endsWith("index.json")&&s.push(u)}),s.sort((u,c)=>u.length-c.length),r=s[0].replace(/index\.json$/,""),t.callback&&t.callback(n)}),{fetchArray(i,s,u){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return new Promise((o,f)=>{e||Hr("ERROR!!! zip not ready...");const l=Ga([s,u.ref.basepath,c.compression?`${u.ref.id}.gz`:u.ref.id].join("/"));++a===1&&(i!=null&&i.invokeBusy)&&i.invokeBusy(!0);function h(){delete u.ref,--a===0&&(i!=null&&i.invokeBusy)&&i.invokeBusy(!1),i!=null&&i.modified&&i.modified(),o(u)}const p=n[`${r}${l}`];u.dataType==="string"&&!c.compression?j6(u,c.compression,h)(en(p)):z6(u,c.compression,h)(p)})},fetchJSON(i,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=Ga(s);e||Hr("ERROR!!! zip not ready...");const o=n[`${r}${c}`];if(u.compression){if(u.compression==="gz"){const f=en(Qt(o));return Promise.resolve(JSON.parse(f))}return Promise.reject(new Error("Invalid compression"))}return Promise.resolve(JSON.parse(en(o)))},fetchText(i,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=Ga(s);e||Hr("ERROR!!! zip not ready...");const o=n[`${r}${c}`];return u.compression?u.compression==="gz"?Promise.resolve(en(lh(o))):Promise.reject(new Error("Invalid compression")):Promise.resolve(en(o))},fetchImage(i,s){const u=Ga(s);e||Hr("ERROR!!! zip not ready...");const c=n[`${r}${u}`];return new Promise((o,f)=>{const l=new Image;l.onload=()=>o(l),l.onerror=f;const h=gh(c.buffer);l.src=`data:image/${P6(u)};base64,${h}`})},fetchBinary(i,s){let u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const c=Ga(s);e||Hr("ERROR!!! zip not ready...");const o=n[`${r}${c}`];return u.compression?u.compression==="gz"?Promise.resolve(Qt(o).buffer):Promise.reject(new Error("Invalid compression")):Promise.resolve(o.buffer)}}}const X6={create:K6};co("zip",t=>X6.create(t));function q6(t,e){e.classHierarchy.push("vtkConcentricCylinderSource");function a(){for(;e.cellFields.length<e.radius.length;)e.cellFields.push(e.cellFields.length)}t.clearRadius=()=>{e.radius=[],e.cellFields=[],t.modified()},t.addRadius=(r,i)=>{e.radius.push(r),i!==void 0&&e.cellFields.push(i),a(),t.modified()},t.getNumberOfRadius=()=>e.radius.length,t.getRadius=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.radius[r]},t.setRadius=(r,i)=>{e.radius[r]=i,t.modified()},t.setCellField=(r,i)=>{e.cellFields[r]=i,t.modified()},t.removeMask=()=>{e.mask=null,t.modified()},t.setMaskLayer=(r,i)=>{let s=!1;!e.mask&&i&&(s=!0,e.mask=[]),e.mask&&(!e.mask[r]!=!i&&(s=!0),e.mask[r]=i),s&&t.modified()},t.getMaskLayer=r=>r===void 0?e.mask:e.mask[r];function n(r,i){if(e.deleted||!e.radius.length)return;a();let s=i[0];const u=e.radius.length,c=e.height/2;let o=0,f=0,l=e.startTheta<e.endTheta?e.startTheta:e.endTheta;l*=Math.PI/180;let h=e.endTheta>e.startTheta?e.endTheta:e.startTheta;h*=Math.PI/180;let p=e.resolution,d=!1;h>=l+2*Math.PI?h=l+2*Math.PI:(++p,d=!0);const y=(h-l)/e.resolution,m=p*u*2+2;if(!e.skipInnerFaces&&!e.mask)o=2*(p+1)+5*p+(u-1)*p*20+(d?10*u:0),f=2+p+(u-1)*4*p+(d?2*u:0);else if(!e.skipInnerFaces&&e.mask){e.mask[0]||(o+=2*(p+1)+5*p+(d?10:0),f+=2+p+(d?2:0));for(let _=1;_<u;_++)e.mask[_]||(o+=p*20+(d?10:0),f+=4*p+(d?2:0))}else{(!e.skipInnerFaces||!e.mask||!e.mask[0])&&(o+=2*(p+1)+(d?10:0),f+=2+(d?2:0),(e.radius.length===1||!e.skipInnerFaces||e.mask&&e.mask[1])&&(o+=5*p,f+=p));for(let _=1;_<u;_++)if(!e.skipInnerFaces||!e.mask||!e.mask[_]){const E=u-1===_;o+=p*10+(d?10:0),f+=p*2+(d?2:0),(!e.skipInnerFaces||e.mask&&e.mask[_-1])&&(o+=p*5,f+=p),(E||!e.skipInnerFaces||e.mask&&e.mask[_+1])&&(o+=p*5,f+=p)}}let S=0;const v=k.newTypedArray(e.pointType,m*3);let g=0;const x=new Uint32Array(o);let C=0;const T=new Float32Array(f);v[S*3+0]=0,v[S*3+1]=0,v[S*3+2]=c,S++,v[S*3+0]=0,v[S*3+1]=0,v[S*3+2]=-c,S++;for(let _=0;_<u;_++){const E=e.radius[_];for(let D=0;D<p;D++){const b=l+D*y;v[S*3+0]=E*Math.cos(b),v[S*3+1]=E*Math.sin(b),v[S*3+2]=c,S++}for(let D=0;D<p;D++){const b=l+D*y;v[S*3+0]=E*Math.cos(b),v[S*3+1]=E*Math.sin(b),v[S*3+2]=-c,S++}}let w=e.cellFields[0];if(!e.mask||!e.mask[0]){T[C++]=w,x[g++]=p+(d?1:0),d&&(x[g++]=0);for(let _=0;_<p;_++)x[g++]=_+2;T[C++]=w,x[g++]=p+(d?1:0),d&&(x[g++]=1);for(let _=0;_<p;_++)x[g++]=2*p-_-1+2;if(!e.skipInnerFaces||e.mask&&e.mask[1]||u===1)for(let _=0;_<e.resolution;_++)x[g++]=4,x[g++]=(_+1)%p+2,x[g++]=_+2,x[g++]=_+p+2,x[g++]=(_+1)%p+p+2,T[C++]=w;d&&(x[g++]=4,x[g++]=2,x[g++]=0,x[g++]=1,x[g++]=p+2,T[C++]=w,x[g++]=4,x[g++]=0,x[g++]=p+1,x[g++]=2*p+1,x[g++]=1,T[C++]=w)}for(let _=1;_<u;_++){if(e.mask&&e.mask[_])continue;const E=p*2*(_-1)+2,D=E+2*p,b=u-1===_;w=e.cellFields[_];for(let N=0;N<e.resolution;N++)x[g++]=4,x[g++]=N+E,x[g++]=(N+1)%p+E,x[g++]=(N+1)%p+D,x[g++]=N+D,T[C++]=w;for(let N=0;N<e.resolution;N++)x[g++]=4,x[g++]=(N+1)%p+E+p,x[g++]=N+E+p,x[g++]=N+D+p,x[g++]=(N+1)%p+D+p,T[C++]=w;if(!e.skipInnerFaces||e.mask&&e.mask[_-1])for(let N=0;N<e.resolution;N++)x[g++]=4,x[g++]=N+E,x[g++]=(N+1)%p+E,x[g++]=(N+1)%p+p+E,x[g++]=N+p+E,T[C++]=w;if(!e.skipInnerFaces||b||e.mask&&(e.mask[_+1]||b))for(let N=0;N<e.resolution;N++)x[g++]=4,x[g++]=(N+1)%p+D,x[g++]=N+D,x[g++]=N+p+D,x[g++]=(N+1)%p+p+D,T[C++]=w;d&&(x[g++]=4,x[g++]=D,x[g++]=E,x[g++]=p+E,x[g++]=p+D,T[C++]=w,x[g++]=4,x[g++]=e.resolution+D,x[g++]=e.resolution+E,x[g++]=e.resolution+p+E,x[g++]=e.resolution+p+D,T[C++]=w)}_t.buildFromRadian().translate(...e.center).rotateFromDirections([0,0,1],e.direction).apply(v),s=je.newInstance(),s.getPoints().setData(v,3),s.getPolys().setData(x,1),s.getCellData().setScalars(pe.newInstance({name:"layer",values:T})),i[0]=s}t.requestData=n}const Y6={height:1,radius:[.5],cellFields:[1],resolution:6,startTheta:0,endTheta:360,center:[0,0,0],direction:[0,0,1],skipInnerFaces:!0,mask:null,pointType:"Float64Array"};function J6(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Y6,a),k.obj(t,e),k.setGet(t,e,["height","resolution","startTheta","endTheta","skipInnerFaces"]),k.setGetArray(t,e,["center","direction"],3),k.getArray(t,e,["cellFields"]),k.algo(t,e,0,1),q6(t,e)}k.newInstance(J6,"vtkConcentricCylinderSource");function Z6(t,e){e.classHierarchy.push("vtkConeSource");function a(n,r){if(e.deleted)return;let i=r[0];const s=2*Math.PI/e.resolution,u=-e.height/2,c=e.resolution+1,o=4*e.resolution+1+e.resolution;let f=0;const l=k.newTypedArray(e.pointType,c*3);let h=0;const p=new Uint32Array(o);l[0]=e.height/2,l[1]=0,l[2]=0,e.capping&&(p[h++]=e.resolution);for(let d=0;d<e.resolution;d++)f++,l[f*3+0]=u,l[f*3+1]=e.radius*Math.cos(d*s),l[f*3+2]=e.radius*Math.sin(d*s),e.capping&&(p[e.resolution-h+++1]=f);for(let d=0;d<e.resolution;d++)p[h++]=3,p[h++]=0,p[h++]=d+1,p[h++]=d+2>e.resolution?1:d+2;_t.buildFromRadian().translate(...e.center).rotateFromDirections([1,0,0],e.direction).apply(l),i=je.newInstance(),i.getPoints().setData(l,3),i.getPolys().setData(p,1),r[0]=i}t.requestData=a}const Q6={height:1,radius:.5,resolution:6,center:[0,0,0],direction:[1,0,0],capping:!0,pointType:"Float64Array"};function dh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Q6,a),k.obj(t,e),k.setGet(t,e,["height","radius","resolution","capping"]),k.setGetArray(t,e,["center","direction"],3),k.algo(t,e,0,1),Z6(t,e)}var ex={newInstance:k.newInstance(dh,"vtkConeSource"),extend:dh};function tx(t,e){e.classHierarchy.push("vtkCylinderSource");function a(n,r){if(e.deleted)return;let i=r[0];const s=2*Math.PI/e.resolution;let u=2*e.resolution,c=5*e.resolution;e.capping&&(u=4*e.resolution,c=7*e.resolution+2);const o=k.newTypedArray(e.pointType,u*3);let f=0;const l=new Uint32Array(c),h=new Float32Array(u*3),p=pe.newInstance({numberOfComponents:3,values:h,name:"Normals"}),d=new Float32Array(u*2),y=pe.newInstance({numberOfComponents:2,values:d,name:"TCoords"}),m=[0,0,0],S=[0,0,0],v=[0,0,0],g=[0,0,0],x=[0,0],C=[0,0],T=e.otherRadius==null?e.radius:e.otherRadius;for(let w=0;w<e.resolution;w++){m[0]=Math.cos(w*s+e.initAngle),S[0]=m[0],v[0]=e.radius*m[0]+e.center[0],g[0]=v[0],x[0]=Math.abs(2*w/e.resolution-1),C[0]=x[0],v[1]=.5*e.height+e.center[1],g[1]=-.5*e.height+e.center[1],x[1]=0,C[1]=1,m[2]=-Math.sin(w*s+e.initAngle),S[2]=m[2],v[2]=T*m[2]+e.center[2],g[2]=v[2];const _=2*w;for(let E=0;E<3;E++)h[_*3+E]=m[E],h[(_+1)*3+E]=S[E],o[_*3+E]=v[E],o[(_+1)*3+E]=g[E],E<2&&(d[_*2+E]=x[E],d[(_+1)*2+E]=C[E])}for(let w=0;w<e.resolution;w++){l[f++]=4,l[f++]=2*w,l[f++]=2*w+1;const _=(2*w+3)%(2*e.resolution);l[f++]=_,l[f++]=_-1}if(e.capping){for(let w=0;w<e.resolution;w++){v[0]=e.radius*Math.cos(w*s+e.initAngle),g[0]=v[0],x[0]=v[0],C[0]=v[0],v[0]+=e.center[0],g[0]+=e.center[0],m[1]=1,S[1]=-1,v[1]=.5*e.height+e.center[1],g[1]=-.5*e.height+e.center[1],v[2]=-T*Math.sin(w*s+e.initAngle),g[2]=v[2],x[1]=v[2],C[1]=v[2],v[2]+=e.center[2],g[2]+=e.center[2];const _=2*e.resolution+w,E=3*e.resolution+e.resolution-w-1;for(let D=0;D<3;D++)h[3*_+D]=m[D],h[3*E+D]=S[D],o[3*_+D]=v[D],o[3*E+D]=g[D],D<2&&(d[2*_+D]=x[D],d[2*E+D]=C[D])}l[f++]=e.resolution;for(let w=0;w<e.resolution;w++)l[f++]=2*e.resolution+w;l[f++]=e.resolution;for(let w=0;w<e.resolution;w++)l[f++]=3*e.resolution+w}_t.buildFromRadian().translate(...e.center).rotateFromDirections([0,1,0],e.direction).translate(...e.center.map(w=>w*-1)).apply(o),i=je.newInstance(),i.getPoints().setData(o,3),i.getPolys().setData(l,1),i.getPointData().setNormals(p),i.getPointData().setTCoords(y),r[0]=i}t.requestData=a}const nx={height:1,initAngle:0,radius:1,resolution:6,center:[0,0,0],direction:[0,1,0],capping:!0,pointType:"Float64Array"};function vh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,nx,a),k.obj(t,e),k.setGet(t,e,["height","initAngle","otherRadius","radius","resolution","capping"]),k.setGetArray(t,e,["center","direction"],3),k.algo(t,e,0,1),tx(t,e)}var rx={newInstance:k.newInstance(vh,"vtkCylinderSource"),extend:vh};const{vtkWarningMacro:ax}=k;function ix(t,e){e.classHierarchy.push("vtkLineSource"),t.requestData=(a,n)=>{if(e.deleted)return;const r=n[0],i=r?r.getPoints().getDataType():e.pointType,s=je.newInstance(),u=[];if(ht(e.point2,e.point1,u),kt(u)<=0){ax("Zero-length line definition");return}const c=e.resolution,o=c+1,f=k.newTypedArray(i,o*3);s.getPoints().setData(f,3);const l=new Uint32Array(o+1);s.getLines().setData(l,1);let h=0,p=0;for(let d=0;d<c+1;d++)p=d/c,f[h*3]=e.point1[0]+p*u[0],f[h*3+1]=e.point1[1]+p*u[1],f[h*3+2]=e.point1[2]+p*u[2],h++;h=0,l[0]=o;for(let d=0;d<o;d++)l[d+1]=d;n[0]=s}}const ox={resolution:10,point1:[-1,0,0],point2:[1,0,0],pointType:"Float64Array"};function sx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ox,a),k.obj(t,e),k.setGet(t,e,["resolution"]),k.setGetArray(t,e,["point1","point2"],3),k.algo(t,e,0,1),ix(t,e)}k.newInstance(sx,"vtkLineSource");const{vtkWarningMacro:ux}=k,cx=1e-6;function lx(t,e){e.classHierarchy.push("vtkPlaneSource"),t.requestData=(a,n)=>{if(e.deleted)return;const r=n[0],i=r?r.getPoints().getDataType():e.pointType,s=je.newInstance(),u=[],c=[];if(ht(e.point1,e.origin,u),ht(e.point2,e.origin,c),!t.updatePlane(u,c)){ux("Bad plane definition");return}const o=e.xResolution,f=e.yResolution,l=(o+1)*(f+1),h=o*f,p=k.newTypedArray(i,l*3);s.getPoints().setData(p,3);const d=new Uint32Array(5*h);s.getPolys().setData(d,1);const y=new Float32Array(l*3),m=pe.newInstance({numberOfComponents:3,values:y,name:"Normals"});s.getPointData().setNormals(m);const S=new Float32Array(l*2),v=pe.newInstance({numberOfComponents:2,values:S,name:"TextureCoordinates"});s.getPointData().setTCoords(v);const g=new Float32Array(2);let x=0;for(let C=0;C<f+1;C++){g[1]=C/f;for(let T=0;T<o+1;T++)g[0]=T/o,p[x*3]=e.origin[0]+g[0]*u[0]+g[1]*c[0],p[x*3+1]=e.origin[1]+g[0]*u[1]+g[1]*c[1],p[x*3+2]=e.origin[2]+g[0]*u[2]+g[1]*c[2],S[x*2]=g[0],S[x*2+1]=g[1],y[x*3]=e.normal[0],y[x*3+1]=e.normal[1],y[x*3+2]=e.normal[2],x++}x=0;for(let C=0;C<f;C++)for(let T=0;T<o;T++)d[x*5+0]=4,d[x*5+1]=T+C*(o+1),d[x*5+2]=d[x*5+1]+1,d[x*5+3]=d[x*5+1]+o+2,d[x*5+4]=d[x*5+1]+o+1,x++;n[0]=s},t.setNormal=function(){let a=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?a=[...arguments.length<=0?void 0:arguments[0]]:arguments.length===3&&(a=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),nt(a)!==0){const n=we(e.normal,a);let r=0;const i=[];n<1&&(n<=-1?(r=qe(180),ht(e.point1,e.origin,i)):(ut(e.normal,a,i),r=Math.acos(n)),t.rotate(r,i))}},t.rotate=(a,n)=>{if(Math.abs(a)<cx)return;const r=Se(new Float64Array(16)),i=[];Rd(i,e.center),Ze(r,r,e.center),mt(r,r,a,n),Ze(r,r,i),Te(e.origin,e.origin,r),Te(e.point1,e.point1,r),Te(e.point2,e.point2,r),_t.buildFromRadian().rotate(a,n).apply(e.normal),t.modified()},t.setCenter=function(){let a=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?a=[...arguments.length<=0?void 0:arguments[0]]:arguments.length===3&&(a=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!ia(a,e.center)){const n=[];ht(e.point1,e.origin,n);const r=[];ht(e.point2,e.origin,r);for(let i=0;i<3;i++)e.center[i]=a[i],e.origin[i]=e.center[i]-.5*(n[i]+r[i]),e.point1[i]=e.origin[i]+n[i],e.point2[i]=e.origin[i]+r[i];t.modified()}},t.setPoint1=function(){let a=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?a=[...arguments.length<=0?void 0:arguments[0]]:arguments.length===3&&(a=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!ia(a,e.point1)){const n=[],r=[];e.point1=[...a],ht(e.point1,e.origin,n),ht(e.point2,e.origin,r),t.updatePlane(n,r),t.modified()}},t.setPoint2=function(){let a=[];if(arguments.length===1||Array.isArray(arguments.length<=0?void 0:arguments[0])?a=[...arguments.length<=0?void 0:arguments[0]]:arguments.length===3&&(a=[arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]]),!ia(a,e.point2)){const n=[],r=[];e.point2=[...a],ht(e.point1,e.origin,n),ht(e.point2,e.origin,r),t.updatePlane(n,r),t.modified()}},t.updatePlane=(a,n)=>{for(let r=0;r<3;r++)e.center[r]=e.origin[r]+.5*(a[r]+n[r]);return ut(a,n,e.normal),nt(e.normal)!==0}}const fx={xResolution:10,yResolution:10,origin:[0,0,0],point1:[1,0,0],point2:[0,1,0],pointType:"Float64Array"};function hx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,fx,a),e.normal=[0,0,1],e.center=[0,0,0],k.obj(t,e),k.setGet(t,e,["xResolution","yResolution"]),k.setGetArray(t,e,["origin"],3),k.getArray(t,e,["point1","point2","normal","center"],3),k.algo(t,e,0,1),lx(t,e),t.setPoint1(e.point1),t.setPoint2(e.point2)}k.newInstance(hx,"vtkPlaneSource");function px(t,e){e.classHierarchy.push("vtkPointSource"),t.requestData=(a,n)=>{if(e.deleted)return;const r=n[0],i=r?r.getPoints().getDataType():e.pointType,s=je.newInstance(),u=e.numberOfPoints,c=k.newTypedArray(i,u*3);s.getPoints().setData(c,3);const o=new Uint32Array(u+1);s.getVerts().setData(o,1);let f,l,h,p,d;for(let y=0;y<u;y++)f=1-2*Ei(),l=Math.sqrt(1-f*f),h=e.radius*Ei()**.33333333,p=h*l,d=2*Math.PI*Ei(),c[y*3]=e.center[0]+p*Math.cos(d),c[y*3+1]=e.center[1]+p*Math.sin(d),c[y*3+2]=e.center[2]+h*f;o[0]=u;for(let y=0;y<u;y++)o[y+1]=y;n[0]=s}}const gx={numberOfPoints:10,center:[0,0,0],radius:.5,pointType:"Float64Array"};function dx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gx,a),k.obj(t,e),k.setGet(t,e,["numberOfPoints","radius"]),k.setGetArray(t,e,["center"],3),k.algo(t,e,0,1),px(t,e)}k.newInstance(dx,"vtkPointSource");function vx(t,e){e.classHierarchy.push("vtkSphereSource"),t.requestData=(a,n)=>{if(e.deleted)return;let r=n[0];const i=r?r.getPoints().getDataType():e.pointType;r=je.newInstance();let s=0,{thetaResolution:u}=e,c=e.startTheta<e.endTheta?e.startTheta:e.endTheta;c*=Math.PI/180;let o=e.endTheta>e.startTheta?e.endTheta:e.startTheta;o*=Math.PI/180;let f=e.startPhi<e.endPhi?e.startPhi:e.endPhi;f*=Math.PI/180;let l=e.endPhi>e.startPhi?e.endPhi:e.startPhi;l*=Math.PI/180,Math.abs(c-o)<2*Math.PI&&++u;const h=(o-c)/e.thetaResolution,p=e.startPhi<=0?1:0,d=e.phiResolution+(e.endPhi>=180?-1:0),y=e.phiResolution*u+2,m=e.phiResolution*2*e.thetaResolution;let S=0,v=k.newTypedArray(i,y*3),g=new Float32Array(y*3),x=0,C=new Uint32Array(m*5);e.startPhi<=0&&(v[S*3+0]=e.center[0],v[S*3+1]=e.center[1],v[S*3+2]=e.center[2]+e.radius,g[S*3+0]=0,g[S*3+1]=0,g[S*3+2]=1,S++,s++),e.endPhi>=180&&(v[S*3+0]=e.center[0],v[S*3+1]=e.center[1],v[S*3+2]=e.center[2]-e.radius,g[S*3+0]=0,g[S*3+1]=0,g[S*3+2]=-1,S++,s++);const T=e.phiResolution-s,w=(l-f)/(e.phiResolution-1);for(let D=0;D<u;D++){const b=c+D*h;for(let N=p;N<d;N++){const R=f+N*w,M=e.radius*Math.sin(R);g[S*3+0]=M*Math.cos(b),g[S*3+1]=M*Math.sin(b),g[S*3+2]=e.radius*Math.cos(R),v[S*3+0]=g[S*3+0]+e.center[0],v[S*3+1]=g[S*3+1]+e.center[1],v[S*3+2]=g[S*3+2]+e.center[2];let A=Math.sqrt(g[S*3+0]*g[S*3+0]+g[S*3+1]*g[S*3+1]+g[S*3+2]*g[S*3+2]);A=A===0?1:A,g[S*3+0]/=A,g[S*3+1]/=A,g[S*3+2]/=A,S++}}const _=T*u;if(Math.abs(c-o)<2*Math.PI&&--u,e.startPhi<=0)for(let D=0;D<u;D++)C[x++]=3,C[x++]=T*D+s,C[x++]=T*(D+1)%_+s,C[x++]=0;if(e.endPhi>=180){const D=T-1+s;for(let b=0;b<u;b++)C[x++]=3,C[x++]=T*b+D,C[x++]=s-1,C[x++]=T*(b+1)%_+D}for(let D=0;D<u;D++)for(let b=0;b<T-1;b++){const N=T*D+b+s,R=N+1,M=(T*(D+1)+b)%_+s+1;e.latLongTessellation?(C[x++]=4,C[x++]=N,C[x++]=R,C[x++]=M,C[x++]=M-1):(C[x++]=3,C[x++]=N,C[x++]=R,C[x++]=M,C[x++]=3,C[x++]=N,C[x++]=M,C[x++]=M-1)}v=v.subarray(0,S*3),r.getPoints().setData(v,3),g=g.subarray(0,S*3);const E=pe.newInstance({name:"Normals",values:g,numberOfComponents:3});r.getPointData().setNormals(E),C=C.subarray(0,x),r.getPolys().setData(C,1),n[0]=r}}const yx={radius:.5,latLongTessellation:!1,thetaResolution:8,startTheta:0,endTheta:360,phiResolution:8,startPhi:0,endPhi:180,center:[0,0,0],pointType:"Float64Array"};function mx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,yx,a),k.obj(t,e),k.setGet(t,e,["radius","latLongTessellation","thetaResolution","startTheta","endTheta","phiResolution","startPhi","endPhi"]),k.setGetArray(t,e,["center"],3),k.algo(t,e,0,1),vx(t,e)}k.newInstance(mx,"vtkSphereSource");const{vtkDebugMacro:fo,vtkErrorMacro:xx}=k;function Sx(t,e){e.classHierarchy.push("vtkWarpScalar"),t.requestData=(a,n)=>{const r=a[0];if(!r)return xx("Invalid or missing input"),1;const i=r.getPoints(),u=r.getPointData().getNormals(),c=t.getInputArrayToProcess(0);if(!i||!c)return fo("No data to warp",!!i,!!c),n[0]=a[0],1;const o=i.getNumberOfPoints();let f=null;const l=[0,0,1];u&&!e.useNormal?(f=(C,T)=>[T.getData()[C*3],T.getData()[C*3+1],T.getData()[C*3+2]],fo("Using data normals")):t.getXyPlane()?(f=(C,T)=>l,fo("Using x-y plane normal")):(f=(C,T)=>e.normal,fo("Using Normal instance variable"));const h=new Float32Array(o*3),p=i.getData();let d=0,y=[0,0,1],m=1;const S=c.getData(),v=c.getNumberOfComponents();for(let C=0;C<o;++C)d=C*3,y=f(C,u),e.xyPlane?m=p[d+2]:m=S[C*v],h[d]=p[d]+e.scaleFactor*m*y[0],h[d+1]=p[d+1]+e.scaleFactor*m*y[1],h[d+2]=p[d+2]+e.scaleFactor*m*y[2];const g=xt({vtkClass:r.getClassName()});g.shallowCopy(r);const x=vn.newInstance();return x.setData(h,3),g.setPoints(x),n[0]=g,1}}const Cx={scaleFactor:1,useNormal:!1,normal:[0,0,1],xyPlane:!1};function Tx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Cx,a),k.obj(t,e),k.algo(t,e,1,1),k.setGet(t,e,["scaleFactor","useNormal","xyPlane"]),k.setGetArray(t,e,["normal"],3),Sx(t,e)}k.newInstance(Tx,"vtkWarpScalar");var wx={VaryRadius:{VARY_RADIUS_OFF:0,VARY_RADIUS_BY_SCALAR:1,VARY_RADIUS_BY_VECTOR:2,VARY_RADIUS_BY_ABSOLUTE_SCALAR:3},GenerateTCoords:{TCOORDS_OFF:0,TCOORDS_FROM_NORMALIZED_LENGTH:1,TCOORDS_FROM_LENGTH:2,TCOORDS_FROM_SCALARS:3}};const{VaryRadius:Ia,GenerateTCoords:vr}=wx,{vtkDebugMacro:_x,vtkErrorMacro:Ex,vtkWarningMacro:Pa}=k;function Dx(t,e){e.classHierarchy.push("vtkTubeFilter");function a(c,o){let f=c;return e.sidesShareVertices?f+=e.numberOfSides*o:f+=2*e.numberOfSides*o,e.capping&&(f+=2*e.numberOfSides),f}function n(c,o,f){const l=o[f],h=c.slice(3*l,3*(l+1));let p=f+1;for(;p<o.length;){const d=o[p],y=c.slice(3*d,3*(d+1));if(h!==y)return p-1;++p}return o.length}function r(c,o,f){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=[0,0,1];const p=o;let d=p[0];for(let y=0;y<p.length;y+=d+1)if(d=p[y],d===1)f.setTuple(p[y+1],h);else if(d>1){let m=0,S=[0,0,0];const v=[0,0,0],g=p.slice(y+1,y+1+d);if(m=n(c,g,0),m!==d){let x=g[m],C=c.slice(3*x,3*(x+1)),T=g[m+1],w=c.slice(3*T,3*(T+1));if(S=w.map((E,D)=>E-C[D]),nt(S),l)h=l;else{for(;++m<d;)if(m=n(c,g,m),m!==d){x=g[m],C=c.slice(3*x,3*(x+1)),T=g[m+1],w=c.slice(3*T,3*(T+1));for(let D=0;D<3;++D)v[D]=w[D]-C[D];nt(v);const E=[0,0,0];if(ut(S,v,E),kt(E)>.001){h=E,S=v;break}}if(m>=d){for(let E=0;E<3;++E)if(S[E]!==0){h[(E+2)%3]=0,h[(E+1)%3]=1,h[E]=-S[(E+1)%3]/S[E];break}}}nt(h);let _=0;for(;++m<d&&(m=n(c,g,m),m!==d);){x=g[m],C=c.slice(3*x,3*(x+1)),T=g[m+1],w=c.slice(3*T,3*(T+1));for(let D=0;D<3;++D)v[D]=w[D]-C[D];nt(v);const E=[0,0,0];if(ut(S,h,E),nt(E)!==0){const D=[0,0,0];if(ut(v,S,D),nt(D)!==0){const b=we(D,h);let N=1-b*b;N>0?N=Math.sqrt(N):N=0;const R=[0,0,0];for(let M=0;M<3;++M)R[M]=v[M]+S[M];nt(R),ut(R,D,E),ut(S,D,R),we(h,R)*we(E,R)<0&&(N*=-1);for(let M=_;M<m;++M)f.setTuple(g[M],h);_=m,S=v,h=b*D+N*E}}}for(let E=_;E<d;++E)f.setTuple(g[E],h)}else for(let x=0;x<d;++x)f.setTuple(g[x],h)}return 1}function i(c,o,f,l,h,p,d,y,m,S,v,g,x,C){const T=[0,0,0],w=[0,0,0],_=[0,0,0],E=[0,0,0];let D=[0,0,0],b=[0,0,0],N=[0,0,0],R=[0,0,0];const M=[0,0,0],A=[0,0,0],I=[0,0,0];let $=1,U=c;const B=[];for(let F=0;F<o;++F){if(F===0){D=l.slice(3*f[0],3*(f[0]+1)),b=l.slice(3*f[1],3*(f[1]+1));for(let z=0;z<3;++z)T[z]=b[z]-D[z],w[z]=T[z],_[z]=-w[z];nt(_)}else if(F===o-1){for(let z=0;z<3;++z)w[z]=T[z],D[z]=b[z],E[z]=T[z];nt(E)}else{for(let z=0;z<3;++z)D[z]=b[z];b=l.slice(3*f[F+1],3*(f[F+1]+1));for(let z=0;z<3;++z)w[z]=T[z],T[z]=b[z]-D[z]}if(nt(T)===0)return Pa("Coincident points!"),0;for(let z=0;z<3;++z)N[z]=(w[z]+T[z])/2;if(R=x.slice(3*f[F],3*(f[F]+1)),nt(N)===0&&(ut(w,R,N),nt(N)===0&&_x("Using alternate bevel vector")),ut(N,R,M),nt(M)===0){let z="Bad normal: s = ";return z+=`${N[0]},  ${N[1]}, ${N[2]}`,z+=` n = ${R[0]},  ${R[1]}, ${R[2]}`,Pa(z),0}if(ut(M,N,A),nt(A),m&&e.varyRadius===Ia.VARY_RADIUS_BY_SCALAR)$=1+(e.radiusFactor-1)*(m.getComponent(f[F],0)-S[0])/(S[1]-S[0]);else if(v&&e.varyRadius===Ia.VARY_RADIUS_BY_VECTOR)$=Math.sqrt(g/kt(v.getTuple(f[F],B))),$>e.radiusFactor&&($=e.radiusFactor);else if(m&&e.varyRadius===Ia.VARY_RADIUS_BY_ABSOLUTE_SCALAR&&($=m.getComponent(f[F],0),$<0))return Pa("Scalar value less than zero, skipping line"),0;if(e.sidesShareVertices)for(let z=0;z<e.numberOfSides;++z){for(let H=0;H<3;++H)I[H]=M[H]*Math.cos(z*C)+A[H]*Math.sin(z*C),N[H]=D[H]+e.radius*$*I[H],h[3*U+H]=N[H],y[3*U+H]=I[H];d.passData(p,f[F],U),U++}else{const z=[0,0,0],H=[0,0,0];for(let X=0;X<e.numberOfSides;++X){for(let Y=0;Y<3;++Y)I[Y]=M[Y]*Math.cos(X*C)+A[Y]*Math.sin(X*C),z[Y]=M[Y]*Math.cos((X-.5)*C)+A[Y]*Math.sin((X-.5)*C),H[Y]=M[Y]*Math.cos((X+.5)*C)+A[Y]*Math.sin((X+.5)*C),N[Y]=D[Y]+e.radius*$*I[Y],h[3*U+Y]=N[Y],y[3*U+Y]=z[Y],h[3*(U+1)+Y]=N[Y],y[3*(U+1)+Y]=H[Y];d.passData(p,f[F],U+1),U+=2}}}if(e.capping){let F=e.numberOfSides,z=1;e.sidesShareVertices||(F=2*e.numberOfSides,z=2);for(let X=0;X<F;X+=z){N=h.slice(3*(c+X),3*(c+X+1));for(let Y=0;Y<3;++Y)h[3*U+Y]=N[Y],y[3*U+Y]=_[Y];d.passData(p,f[0],U),U++}let H=c+(o-1)*e.numberOfSides;e.sidesShareVertices||(H=c+2*(o-1)*e.numberOfSides);for(let X=0;X<F;X+=z){N=h.slice(3*(H+X),3*(H+X+1));for(let Y=0;Y<3;++Y)h[3*U+Y]=N[Y],y[3*U+Y]=E[Y];d.passData(p,f[o-1],U),U++}}return 1}function s(c,o,f,l,h,p,d){let y=0,m=0,S=0,v=l,g=0;const x=d.getData();let C=0;for(;g<x.length&&C!==l;)g+=x[g]+1,C++;if(e.sidesShareVertices)for(let T=c;T<e.numberOfSides+c;T+=e.onRatio){y=T%e.numberOfSides,m=(T+1)%e.numberOfSides,x[g++]=o*2;for(let w=0;w<o;++w)S=w*e.numberOfSides,x[g++]=c+m+S,x[g++]=c+y+S;p.passData(h,f,v++)}else for(let T=c;T<e.numberOfSides+c;T+=e.onRatio){y=2*(T%e.numberOfSides)+1,m=2*((T+1)%e.numberOfSides),x[g]=o*2,g++;for(let w=0;w<o;++w)S=w*2*e.numberOfSides,x[g++]=c+m+S,x[g++]=c+y+S;p.passData(h,f,v++)}if(e.capping){let T=c+o*e.numberOfSides,w=0;e.sidesShareVertices||(T=c+2*o*e.numberOfSides),x[g++]=e.numberOfSides,x[g++]=T,x[g++]=T+1;let _=0;for(y=e.numberOfSides-1,m=2,_=0;_<e.numberOfSides-2;++_)_%2?(w=T+m,x[g++]=w,m++):(w=T+y,x[g++]=w,y--);for(p.passData(h,f,v++),T+=e.numberOfSides,x[g++]=e.numberOfSides,x[g++]=T,x[g++]=T+e.numberOfSides-1,y=e.numberOfSides-2,m=1,_=0;_<e.numberOfSides-2;++_)_%2?(w=T+y,x[g++]=w,y--):(w=T+m,x[g++]=w,m++);p.passData(h,f,v++)}return v}function u(c,o,f,l,h,p){let d=e.numberOfSides;e.sidesShareVertices||(d=2*e.numberOfSides);let y=0,m=0,S=0;const v=h.getData();if(e.generateTCoords===vr.TCOORDS_FROM_SCALARS){m=v[f[0]];for(let g=0;g<o;++g){S=v[f[g]],y=(S-m)/e.textureLength;for(let x=0;x<d;++x){const C=x/(d-1),T=2*(c+g*d+x);p[T]=y,p[T+1]=C}}}else if(e.generateTCoords===vr.TCOORDS_FROM_LENGTH){let g=0;const x=l.slice(3*f[0],3*(f[0]+1));for(let C=0;C<o;++C){const T=l.slice(3*f[C],3*(f[C]+1));g+=Math.sqrt(Ft(T,x)),y=g/e.textureLength;for(let w=0;w<d;++w){const _=w/(d-1),E=2*(c+C*d+w);p[E]=y,p[E+1]=_}for(let w=0;w<3;++w)x[w]=T[w]}}else if(e.generateTCoords===vr.TCOORDS_FROM_NORMALIZED_LENGTH){let g=0,x=0,C=l.slice(3*f[0],3*(f[0]+1));for(let T=0;T<o;++T){const w=l.slice(3*f[T],3*(f[T]+1));x+=Math.sqrt(Ft(w,C));for(let _=0;_<3;++_)C[_]=w[_]}C=l.slice(3*f[0],3*(f[0]+1));for(let T=0;T<o;++T){const w=l.slice(3*f[T],3*(f[T]+1));g+=Math.sqrt(Ft(w,C)),y=g/x;for(let _=0;_<d;++_){const E=_/(d-1),D=2*(c+T*d+_);p[D]=y,p[D+1]=E}for(let _=0;_<3;++_)C[_]=w[_]}}if(e.capping){const g=c+o*d;for(let x=0;x<e.numberOfSides;++x){const C=2*(g+x);p[C]=0,p[C+1]=0}for(let x=0;x<e.numberOfSides;++x){const C=2*(g+e.numberOfSides+x);p[C]=0,p[C+1]=0}}}t.requestData=(c,o)=>{const f=je.newInstance();o[0]=f;const l=c[0];if(!l){Ex("Invalid or missing input");return}const h=l.getPoints();if(!h)return;const p=h.getNumberOfPoints();if(p<1)return;const d=l.getLines();if(!d||d.getNumberOfCells()<1)return;let m=0,S=0;const v=d.getData();let g=v[0];for(let O=0;O<v.length;O+=g+1)g=v[O],m=a(m,g),S+=(2*g+1)*Math.ceil(e.numberOfSides/e.onRatio),e.capping&&(S+=2*(e.numberOfSides+1));let x=h.getDataType();e.outputPointsPrecision===er.SINGLE?x=Ne.FLOAT:e.outputPointsPrecision===er.DOUBLE&&(x=Ne.DOUBLE);const C=vn.newInstance({dataType:x,size:m*3,numberOfComponents:3}),T=3*m,w=new Float32Array(T),_=pe.newInstance({numberOfComponents:3,values:w,name:"TubeNormals"}),E=new Uint32Array(S),D=Ln.newInstance({values:E});let b=0,N=l.getPointData().getNormals(),R=null,M=!1;(!N||e.useDefaultNormal)&&(R=new Float32Array(3*p),N=pe.newInstance({numberOfComponents:3,values:R,name:"Normals"}),e.useDefaultNormal?R=R.map((O,G)=>{const V=G%3;return e.defaultNormal[V]}):M=!0);const A=l.getPointData().getNumberOfArrays();let I=null,$=null;for(let O=0;O<A;O++)I=l.getPointData().getArrayByIndex(O),$=pe.newInstance({name:I.getName(),dataType:I.getDataType(),numberOfComponents:I.getNumberOfComponents(),size:m*I.getNumberOfComponents()}),f.getPointData().addArray($);let U=d.getNumberOfCells()*e.numberOfSides;e.capping&&(U+=2);const B=l.getCellData().getNumberOfArrays();for(let O=0;O<B;O++)I=l.getCellData().getArrayByIndex(O),$=pe.newInstance({name:I.getName(),dataType:I.getDataType(),numberOfComponents:I.getNumberOfComponents(),size:U*I.getNumberOfComponents()}),f.getCellData().addArray($);const F=t.getInputArrayToProcess(0);let z=null,H=[];F&&(z=pe.newInstance({name:F.getName(),dataType:F.getDataType(),numberOfComponents:F.getNumberOfComponents(),size:m*F.getNumberOfComponents()}),H=F.getRange(),H[1]-H[0]===0&&(e.varyRadius===Ia.VARY_RADIUS_BY_SCALAR&&Pa("Scalar range is zero!"),H[1]=H[0]+1));const X=t.getInputArrayToProcess(1);let Y=0;X&&(Y=X.getMaxNorm());const q=f.getCellData();q.copyNormalsOff(),q.passData(l.getCellData());const ee=f.getPointData();ee.getNormals()!==null&&ee.copyNormalsOff(),F&&z&&ee.setScalars(z);let re=null;if(e.generateTCoords===vr.TCOORDS_FROM_SCALARS&&F||e.generateTCoords===vr.TCOORDS_FROM_LENGTH||e.generateTCoords===vr.TCOORDS_FROM_NORMALIZED_LENGTH){const O=new Float32Array(2*m);re=pe.newInstance({numberOfComponents:2,values:O,name:"TCoords"}),ee.copyTCoordsOff()}ee.passData(l.getPointData());const ie=2*Math.PI/e.numberOfSides;g=v[0];let te=0,L=l.getVerts().getNumberOfCells();for(let O=0;O<v.length;O+=g+1){g=v[O];const G=v.slice(O+1,O+1+g);if(g>1&&M){const V=v.slice(O,O+g+1);r(h.getData(),V,N)}i(te,g,G,h.getData(),C.getData(),l.getPointData(),ee,w,F,H,X,Y,R,ie)?(b=s(te,g,L,b,l.getCellData(),q,D),re&&u(te,g,G,h.getData(),F,re.getData())):Pa("Could not generate points"),te=a(te,g),L++}f.setPoints(C),f.setStrips(D),f.setPointData(ee),ee.setNormals(_),o[0]=f}}const bx={outputPointsPrecision:er.DEFAULT,radius:.5,varyRadius:Ia.VARY_RADIUS_OFF,numberOfSides:3,radiusFactor:10,defaultNormal:[0,0,1],useDefaultNormal:!1,sidesShareVertices:!0,capping:!1,onRatio:1,offset:0,generateTCoords:vr.TCOORDS_OFF,textureLength:1};function Ox(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bx,a),k.setGet(t,e,["outputPointsPrecision","radius","varyRadius","numberOfSides","radiusFactor","defaultNormal","useDefaultNormal","sidesShareVertices","capping","onRatio","offset","generateTCoords","textureLength"]),k.obj(t,e),k.algo(t,e,1,1),Dx(t,e)}k.newInstance(Ox,"vtkTubeFilter");function yh(t){return new TextDecoder("latin1").decode(t)}function Nx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const n=yh(t),r=e.exec(n);if(!r)return{text:n};const i=r.index+r[0].length,s=n.substring(0,i);let u=null;const c=a?a.exec(n):null;if(c){const o=n.substr(c.index);u={text:s+o,binaryBuffer:t.slice(i,c.index)}}else u={text:s,binaryBuffer:t.slice(i)};return u}var za={arrayBufferToString:yh,extractBinary:Nx};const{vtkErrorMacro:mh,vtkDebugMacro:Mx}=k,R0=()=>(mh("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead."),Promise.reject(new Error("LiteHttpDataAccessHelper does not support compression. Need to register HttpDataAccessHelper instead.")));let Kr=0;function ho(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=new XMLHttpRequest;return n.open(t,e,!0),a.headers&&Object.entries(a.headers).forEach(r=>{let[i,s]=r;return n.setRequestHeader(i,s)}),a.progressCallback&&n.addEventListener("progress",a.progressCallback),n}function Rx(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((a,n)=>{const r=ho("GET",t,e);r.onreadystatechange=i=>{r.readyState===4&&(r.status===200||r.status===0?a(r.response):n({xhr:r,e:i}))},r.responseType="arraybuffer",r.send()})}function Lx(t,e,a){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n&&n.compression?R0():a.ref&&!a.ref.pending?new Promise((r,i)=>{const s=[e,a.ref.basepath,a.ref.id].join("/"),u=ho("GET",s,n);u.onreadystatechange=c=>{u.readyState===1&&(a.ref.pending=!0,++Kr===1&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!0)),u.readyState===4&&(a.ref.pending=!1,u.status===200||u.status===0?(a.buffer=u.response,a.ref.encode==="JSON"?a.values=JSON.parse(a.buffer):(Tn.ENDIANNESS!==a.ref.encode&&Tn.ENDIANNESS&&(Mx(`Swap bytes of ${a.name}`),Tn.swapBytes(a.buffer,Gi[a.dataType])),a.values=k.newTypedArray(a.dataType,a.buffer)),a.values.length!==a.size&&mh(`Error in FetchArray: ${a.name}, does not have the proper array size. Got ${a.values.length}, instead of ${a.size}`),delete a.ref,--Kr===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),t!=null&&t.modified&&t.modified(),r(a)):i({xhr:u,e:c}))},u.responseType=a.dataType!=="string"?"arraybuffer":"text",u.send()}):Promise.resolve(a)}function kx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a&&a.compression?R0():new Promise((n,r)=>{const i=ho("GET",e,a);i.onreadystatechange=s=>{i.readyState===1&&++Kr===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--Kr===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),i.status===200||i.status===0?n(JSON.parse(i.responseText)):r({xhr:i,e:s}))},i.responseType="text",i.send()})}function Fx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return a&&a.compression?R0():new Promise((n,r)=>{const i=ho("GET",e,a);i.onreadystatechange=s=>{i.readyState===1&&++Kr===1&&t!=null&&t.invokeBusy&&t.invokeBusy(!0),i.readyState===4&&(--Kr===0&&(t!=null&&t.invokeBusy)&&t.invokeBusy(!1),i.status===200||i.status===0?n(i.responseText):r({xhr:i,e:s}))},i.responseType="text",i.send()})}function Ax(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((n,r)=>{const i=new Image;a.crossOrigin&&(i.crossOrigin=a.crossOrigin),i.onload=()=>n(i),i.onerror=r,i.src=e})}const Vx={fetchArray:Lx,fetchJSON:kx,fetchText:Fx,fetchBinary:Rx,fetchImage:Ax};hh("http")||co("http",t=>Vx);const L0={ASCII:"ascii",BINARY_BIG_ENDIAN:"binary_big_endian",BINARY_LITTLE_ENDIAN:"binary_little_endian"},xh={diffuse_red:"red",diffuse_green:"green",diffuse_blue:"blue"},Sh={patternHeader:/ply([\s\S]*)end_header\r?\n/,patternBody:/end_header\s([\s\S]*)$/};function Ch(t){let e="",a=0;const n=Sh.patternHeader.exec(t);n!==null&&(e=n[1],a=n[0].length);const r={comments:[],elements:[],headerLength:a},i=e.split(`
`);let s,u,c;for(let o=0;o<i.length;o++){let f=i[o];if(f=f.trim(),f!==""){let l;switch(c=f.split(/\s+/),u=c.shift(),f=c.join(" "),u){case"format":r.format=c[0],r.version=c[1];break;case"comment":r.comments.push(f);break;case"element":s!==void 0&&r.elements.push(s),s={},s.name=c[0],s.count=parseInt(c[1],10),s.properties=[];break;case"property":l={type:c[0]},l.type==="list"?(l.name=c[3],l.countType=c[1],l.itemType=c[2]):l.name=c[1],l.name in xh&&(l.name=xh[l.name]),s.properties.push(l);break;case"obj_info":r.objInfo=f;break;default:console.warn("unhandled",u,c);break}}}return s!==void 0&&r.elements.push(s),r}function Th(t,e){const a=e.find(y=>y.name==="vertex"),n=e.find(y=>y.name==="face");let r=0,i=0;a&&(r=a.count),n&&(i=n.count);const s=new Float32Array(r*3),u=new Uint8Array(r*3),c=new Float32Array(r*2),o=new Float32Array(r*3),f=t.colors.length>0,l=t.uvs.length>0,h=t.normals.length>0,p=t.faceVertexUvs.length>0;for(let y=0;y<r;y++){let m=y*3+0,S=y*3+1;const v=y*3+2;s[m]=t.vertices[m],s[S]=t.vertices[S],s[v]=t.vertices[v],f&&(u[m]=t.colors[m],u[S]=t.colors[S],u[v]=t.colors[v]),l&&(m=y*2+0,S=y*2+1,c[m]=t.uvs[m],c[S]=t.uvs[S]),h&&(o[m]=t.normals[m],o[S]=t.normals[S],o[v]=t.normals[v])}if(!l&&p){let y=0,m=0;for(let S=0;S<i;++S){const v=t.indices[y++],g=t.faceVertexUvs[m++];if(g&&v*2===g.length)for(let x=0;x<v;++x){const C=t.indices[y++];c[C*2+0]=g[x*2+0],c[C*2+1]=g[x*2+1]}else y+=v}}const d=je.newInstance();if(d.getPoints().setData(s,3),f&&d.getPointData().setScalars(pe.newInstance({numberOfComponents:3,values:u,name:"Scalars"})),l||p){const y=pe.newInstance({numberOfComponents:2,values:c,name:"TextureCoordinates"}),m=d.getPointData();m.addArray(y),m.setActiveTCoords(y.getName())}return h&&d.getPointData().setNormals(pe.newInstance({numberOfComponents:3,name:"Normals",values:o})),d.getPolys().setData(Uint32Array.from(t.indices)),d}function k0(t,e){let a;switch(e){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":a=parseInt(t,10);break;case"float":case"double":case"float32":case"float64":a=parseFloat(t);break;default:console.log("Unsupported type");break}return a}function Bx(t,e){const a=e.split(/\s+/),n={};for(let r=0;r<t.length;r++)if(t[r].type==="list"){const i=[],s=k0(a.shift(),t[r].countType);for(let u=0;u<s;u++)i.push(k0(a.shift(),t[r].itemType));n[t[r].name]=i}else n[t[r].name]=k0(a.shift(),t[r].type);return n}function wh(t,e,a){if(e==="vertex")t.vertices.push(a.x,a.y,a.z),"nx"in a&&"ny"in a&&"nz"in a&&t.normals.push(a.nx,a.ny,a.nz),"s"in a&&"t"in a?t.uvs.push(a.s,a.t):"u"in a&&"v"in a?t.uvs.push(a.u,a.v):"texture_u"in a&&"texture_v"in a&&t.uvs.push(a.texture_u,a.texture_v),"red"in a&&"green"in a&&"blue"in a&&t.colors.push(a.red,a.green,a.blue);else if(e==="face"){const n=a.vertex_indices||a.vertex_index,r=a.texcoord;n&&n.length>0&&(t.indices.push(n.length),n.forEach((i,s)=>{t.indices.push(i)})),t.faceVertexUvs.push(r)}}function F0(t,e,a,n){let r;switch(a){case"int8":case"char":r=[t.getInt8(e),1];break;case"uint8":case"uchar":r=[t.getUint8(e),1];break;case"int16":case"short":r=[t.getInt16(e,n),2];break;case"uint16":case"ushort":r=[t.getUint16(e,n),2];break;case"int32":case"int":r=[t.getInt32(e,n),4];break;case"uint32":case"uint":r=[t.getUint32(e,n),4];break;case"float32":case"float":r=[t.getFloat32(e,n),4];break;case"float64":case"double":r=[t.getFloat64(e,n),8];break;default:console.log("Unsupported type");break}return r}function Ux(t,e,a,n){const r={};let i,s=0;for(let u=0;u<a.length;u++)if(a[u].type==="list"){const c=[];i=F0(t,e+s,a[u].countType,n);const o=i[0];s+=i[1];for(let f=0;f<o;f++)i=F0(t,e+s,a[u].itemType,n),c.push(i[0]),s+=i[1];r[a[u].name]=c}else i=F0(t,e+s,a[u].type,n),r[a[u].name]=i[0],s+=i[1];return[r,s]}function Gx(t,e){e.classHierarchy.push("vtkPLYReader"),e.dataAccessHelper||(e.dataAccessHelper=jr.get("http"));function a(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{compression:i,progressCallback:s}=e;return r.binary?e.dataAccessHelper.fetchBinary(n,{compression:i,progressCallback:s}):e.dataAccessHelper.fetchText(t,n,{compression:i,progressCallback:s})}t.setUrl=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{binary:!0};e.url=n;const i=n.split("/");return i.pop(),e.baseURL=i.join("/"),e.compression=r.compression,t.loadData({progressCallback:r.progressCallback,binary:!!r.binary})},t.loadData=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=a(e.url,n);return r.then(t.parse),r},t.parse=n=>{typeof n=="string"?t.parseAsText(n):t.parseAsArrayBuffer(n)},t.parseAsArrayBuffer=n=>{if(!n)return;if(n!==e.parseData)t.modified();else return;const r=za.arrayBufferToString(n),i=Ch(r);if(!(i.format!==L0.ASCII)){t.parseAsText(n);return}e.parseData=n;const u={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},c=i.format===L0.BINARY_LITTLE_ENDIAN,o=n instanceof ArrayBuffer?n:n.buffer,f=new DataView(o,i.headerLength);let l,h=0;for(let d=0;d<i.elements.length;d++)for(let y=0;y<i.elements[d].count;y++){l=Ux(f,h,i.elements[d].properties,c),h+=l[1];const m=l[0];wh(u,i.elements[d].name,m)}const p=Th(u,i.elements);e.output[0]=p},t.parseAsText=n=>{if(!n)return;if(n!==e.parseData)t.modified();else return;e.parseData=n;const r=za.arrayBufferToString(n),i=Ch(r);if(i.format!==L0.ASCII){t.parseAsArrayBuffer(n);return}const u={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},c=Sh.patternBody.exec(r);let o="";c!==null&&(o=c[1]);const f=o.split(`
`);let l=0,h=0;for(let d=0;d<f.length;d++){let y=f[d];if(y=y.trim(),y!==""){h>=i.elements[l].count&&(l++,h=0);const m=Bx(i.elements[l].properties,y);wh(u,i.elements[l].name,m),h++}}const p=Th(u,i.elements);e.output[0]=p},t.requestData=(n,r)=>{t.parse(e.parseData)}}const Ix={};function Px(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ix,a),k.obj(t,e),k.get(t,e,["url","baseURL"]),k.setGet(t,e,["dataAccessHelper"]),k.algo(t,e,0,1),Gx(t,e),e.compression||(e.compression=null),e.progressCallback||(e.progressCallback=null)}k.newInstance(Px,"vtkPLYReader");const{vtkErrorMacro:A0}=k;function zx(t){const a=t.split(" ").filter(r=>r.indexOf("=")>-1),n={};for(let r=0;r<a.length;++r){const s=a[r].split("=");s.length===2&&(n[s[0]]=s[1])}return n}function _h(t,e){for(let a=0;a<t.length;a++)e.push(t[a])}function jx(t,e,a,n,r){const i=t[e];if(i===void 0)return-1;if(i.indexOf("endfacet")!==-1||i.indexOf("facet")===-1)return e+1;let s=0,u=2;const c=a.length/3,o=i.split(/[ \t]+/).filter(f=>f).slice(-3).map(Number);for(_h(o,r);t[e+u].indexOf("vertex")!==-1;){const l=t[e+u].split(/[ \t]+/).filter(h=>h).slice(-3).map(Number);_h(l,a),s++,u++}n.push(s);for(let f=0;f<s;f++)n.push(c+f);for(;t[e+u]&&t[e+u].indexOf("endfacet")!==-1;)u++;return e+u+2}function Wx(t,e){e.classHierarchy.push("vtkSTLReader"),e.dataAccessHelper||(e.dataAccessHelper=jr.get("http"));function a(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=r.compression!==void 0?r.compression:e.compression,s=r.progressCallback!==void 0?r.progressCallback:e.progressCallback;return r.binary?e.dataAccessHelper.fetchBinary(n,{compression:i,progressCallback:s}):e.dataAccessHelper.fetchText(t,n,{compression:i,progressCallback:s})}t.setUrl=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{binary:!0};e.url=n;const i=n.split("/");return i.pop(),e.baseURL=i.join("/"),t.loadData(r)},t.loadData=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=a(e.url,n);return r.then(t.parse),r},t.parse=n=>{typeof n=="string"?t.parseAsText(n):t.parseAsArrayBuffer(n)},t.parseAsArrayBuffer=n=>{if(!n)return;if(n!==e.parseData)t.modified();else return;e.parseData=n;let r=!1;if(r=84+new DataView(n,0,80+4).getUint32(80,!0)*50===n.byteLength,!r){t.parseAsText(za.arrayBufferToString(n));return}const u=n.slice(0,80),c=za.arrayBufferToString(u),o=zx(c),f=new DataView(n,84),l=(n.byteLength-84)/50,h=new Float32Array(l*9),p=new Float32Array(l*3),d=new Uint32Array(l*4),y=new Uint16Array(l);let m=0;for(let g=0;g<l;g++){const x=g*50;p[g*3+0]=f.getFloat32(x+0,!0),p[g*3+1]=f.getFloat32(x+4,!0),p[g*3+2]=f.getFloat32(x+8,!0),h[g*9+0]=f.getFloat32(x+12,!0),h[g*9+1]=f.getFloat32(x+16,!0),h[g*9+2]=f.getFloat32(x+20,!0),h[g*9+3]=f.getFloat32(x+24,!0),h[g*9+4]=f.getFloat32(x+28,!0),h[g*9+5]=f.getFloat32(x+32,!0),h[g*9+6]=f.getFloat32(x+36,!0),h[g*9+7]=f.getFloat32(x+40,!0),h[g*9+8]=f.getFloat32(x+44,!0),d[m++]=3,d[m++]=g*3+0,d[m++]=g*3+1,d[m++]=g*3+2,y[g]=f.getUint16(x+48,!0)}const S="SPACE";if(S in o&&o[S]!=="LPS"){const g=o[S],x=new Float32Array(16);switch(x[15]=1,g[0]){case"L":x[0]=1;break;case"R":x[0]=-1;break;default:A0(`Can not convert STL file from ${g} to LPS space: permutations not supported. Use itk.js STL reader instead.`);return}switch(g[1]){case"P":x[5]=1;break;case"A":x[5]=-1;break;default:A0(`Can not convert STL file from ${g} to LPS space: permutations not supported. Use itk.js STL reader instead.`);return}switch(g[2]){case"S":x[10]=1;break;case"I":x[10]=-1;break;default:A0(`Can not convert STL file from ${g} to LPS space: permutations not supported. Use itk.js STL reader instead.`);return}_t.buildFromDegree().setMatrix(x).apply(h).apply(p)}const v=je.newInstance();v.getPoints().setData(h,3),v.getPolys().setData(d),v.getCellData().setScalars(pe.newInstance({name:"Attribute",values:y})),v.getCellData().setNormals(pe.newInstance({name:"Normals",values:p,numberOfComponents:3})),e.output[0]=v},t.parseAsText=n=>{if(!n)return;if(n!==e.parseData)t.modified();else return;e.parseData=n;const r=n.split(`
`);let i=1;const s=[],u=[],c=[];for(;i!==-1;)i=jx(r,i,s,u,c);const o=je.newInstance();o.getPoints().setData(Float32Array.from(s),3),o.getPolys().setData(Uint32Array.from(u)),o.getCellData().setNormals(pe.newInstance({name:"Normals",values:Float32Array.from(c),numberOfComponents:3})),e.output[0]=o},t.requestData=(n,r)=>{t.parse(e.parseData)}}const $x={};function Hx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$x,a),k.obj(t,e),k.get(t,e,["url","baseURL"]),k.setGet(t,e,["dataAccessHelper"]),k.algo(t,e,0,1),Wx(t,e),e.compression||(e.compression=null),e.progressCallback||(e.progressCallback=null)}k.newInstance(Hx,"vtkSTLReader");function Kx(t,e){e.classHierarchy.push("vtkElevationReader"),e.dataAccessHelper||(e.dataAccessHelper=jr.get("http"));function a(n,r){return e.dataAccessHelper.fetchText(t,n,r)}t.setUrl=(n,r)=>(e.url=n,t.loadData(r)),t.loadData=n=>a(e.url,n).then(r=>(t.parseAsText(r),!0)),t.parseAsText=n=>{e.csv=n,e.elevation=[],e.csv.split(`
`).forEach((i,s)=>{e.elevation.push(i.split(",").map(u=>Number(u)))}),t.modified()},t.requestData=(n,r)=>{const i=je.newInstance();if(i.getPoints().setData(new Float32Array(0,0,0,1,1,1),3),e.elevation){const s=e.elevation.length,u=e.elevation[0].length,c=i.getPoints();c.setNumberOfPoints(u*s,3);const o=c.getData(),f=Ln.newInstance({size:5*(u-1)*(s-1)});i.setPolys(f);const l=f.getData();let h=0;const p=new Float32Array(u*s*2),d=pe.newInstance({numberOfComponents:2,values:p,name:"TextureCoordinates"});i.getPointData().setTCoords(d);for(let y=0;y<s;y++)for(let m=0;m<u;m++){const S=y*u+m,v=3*S;o[v+0]=e.origin[0]+m*e.xSpacing*e.xDirection,o[v+1]=e.origin[1]+y*e.ySpacing*e.yDirection,o[v+2]=e.origin[2]+e.elevation[y][m]*e.zScaling,p[S*2]=m/(u-1),p[S*2+1]=1-y/(s-1),m>0&&y>0&&(l[h++]=4,l[h++]=S,l[h++]=S-1,l[h++]=S-1-u,l[h++]=S-u)}}e.output[0]=i},t.isBusy=()=>!!e.requestCount}const Xx={origin:[0,0,0],xSpacing:1,ySpacing:1,zScaling:1,xDirection:1,yDirection:-1,requestCount:0};function qx(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Xx,a),k.obj(t,e),k.get(t,e,["url"]),k.setGet(t,e,["dataAccessHelper","xSpacing","ySpacing","zScaling","xDirection","yDirection"]),k.algo(t,e,0,1),k.event(t,e,"busy"),Kx(t,e)}k.newInstance(qx,"vtkElevationReader");const be={};function V0(t,e,a,n,r){for(let i=0;i<r;i++)a[n+i]=t[e+i]}function Yx(t){be.splitOn=t,be.pieces=[],be.v=[],be.vt=[],be.vn=[],be.f=[[]],be.size=0}function Jx(t){const e=t.split("/").map(i=>Number(i)),a=e[0]-1,n=e[1]?e[1]-1:a,r=e[2]?e[2]-1:a;return[a,n,r]}function Zx(t){if(t[0]==="#")return;const e=t.split(/[ \t]+/);if(e[0]===be.splitOn)e.shift(),be.pieces.push(e.join(" ").trim()),be.f.push([]),be.size++;else if(e[0]==="v")be.v.push(Number(e[1])),be.v.push(Number(e[2])),be.v.push(Number(e[3]));else if(e[0]==="vt")be.vt.push(Number(e[1])),be.vt.push(Number(e[2]));else if(e[0]==="vn")be.vn.push(Number(e[1])),be.vn.push(Number(e[2])),be.vn.push(Number(e[3]));else if(e[0]==="f"){be.size===0&&be.size++;const a=be.f[be.size-1];e.shift();const n=e.filter(i=>i.length>0&&i!=="\r"),r=n.length;a.push(r);for(let i=0;i<r;i++)a.push(Jx(n[i]))}}function Qx(t){const e=!!be.vt.length,a=!!be.vn.length;if(t.splitMode){t.numberOfOutputs=be.size;for(let n=0;n<be.size;n++){const r=be.f[n],i=r.length,s=be.v.length/3,u={};let c;if(t.trackDuplicates){const m=[];let S=0;for(let g=0;g<i;){const x=r[g++];for(let C=0;C<x;C++){const[T,w,_]=r[g++],E=`${T}/${w}/${_}`;u[E]===void 0&&(m[T]===void 0?m[T]=[E]:(m[T].push(E),++S),u[E]=T)}}c=new Uint16Array(s+S);let v=0;for(let g=0;g<m.length;++g){const x=m[g]?m[g].length:0;c[g]=x>1?s+v:g;for(let C=1;C<x;++C){const T=s+v++;c[T]=g,u[m[g][C]]=T}}}const o={},f=je.newInstance({name:be.pieces[n]}),l=[],h=[],p=[],d=[];let y=0;for(;y<i;){const m=r[y];d.push(m);for(let S=0;S<m;S++){const[v,g,x]=r[y+S+1],C=`${v}/${g}/${x}`;if(o[C]===void 0){const T=t.trackDuplicates?u[C]:l.length/3;o[C]=T,V0(be.v,v*3,l,T*3,3),e&&V0(be.vt,g*2,h,T*2,2),a&&V0(be.vn,x*3,p,T*3,3)}d.push(o[C])}y+=m+1}if(f.getPoints().setData(Float32Array.from(l),3),t.trackDuplicates){const m=pe.newInstance({name:"Duplicates",values:c});f.getPointData().addArray(m)}if(f.getPolys().setData(Uint32Array.from(d)),e){const m=pe.newInstance({numberOfComponents:2,values:Float32Array.from(h),name:"TextureCoordinates"});f.getPointData().setTCoords(m)}if(a){const m=pe.newInstance({numberOfComponents:3,values:Float32Array.from(p),name:"Normals"});f.getPointData().setNormals(m)}t.output[n]=f}}else{t.numberOfOutputs=1;const n=je.newInstance();if(n.getPoints().setData(Float32Array.from(be.v),3),e&&be.v.length/3===be.vt.length/2){const c=pe.newInstance({numberOfComponents:2,values:Float32Array.from(be.vt),name:"TextureCoordinates"});n.getPointData().setTCoords(c)}if(a&&be.v.length===be.vn.length){const c=pe.newInstance({numberOfComponents:3,values:Float32Array.from(be.vn),name:"Normals"});n.getPointData().setNormals(c)}const r=[],i=be.f[0],s=i.length;let u=0;for(;u<s;){const c=i[u];r.push(c);for(let o=0;o<c;o++){const[f]=i[u+o+1];r.push(f)}u+=c+1}n.getPolys().setData(Uint32Array.from(r)),t.output[0]=n}}function e7(t,e){e.classHierarchy.push("vtkOBJReader"),e.dataAccessHelper||(e.dataAccessHelper=jr.get("http"));function a(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.dataAccessHelper.fetchText(t,n,r)}t.setUrl=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(n.indexOf(".obj")===-1&&!r.fullpath)e.baseURL=n,e.url=`${n}/index.obj`;else{e.url=n;const i=n.split("/");i.pop(),e.baseURL=i.join("/")}return t.loadData(r)},t.loadData=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a(e.url,n).then(r=>t.isDeleted()?!1:t.parseAsText(r))},t.parseAsText=n=>(n&&(n!==e.parseData&&t.modified(),e.parseData=n,e.numberOfOutputs=0,Yx(e.splitMode),n.split(`
`).forEach(Zx),Qx(e)),!0),t.requestData=(n,r)=>{t.parseAsText(e.parseData)},t.isBusy=()=>!!e.requestCount,t.getNumberOfOutputPorts=()=>e.numberOfOutputs}const t7={numberOfOutputs:1,requestCount:0,splitMode:null,trackDuplicates:!1};function n7(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,t7,a),k.obj(t,e),k.get(t,e,["url","baseURL"]),k.setGet(t,e,["dataAccessHelper","splitMode","trackDuplicates"]),k.algo(t,e,0,1),k.event(t,e,"busy"),e7(t,e)}k.newInstance(n7,"vtkOBJReader");const r7=["chemical json","name","inchi","formula","atoms","bonds","properties"];function a7(t,e){e.classHierarchy.push("vtkMolecule")}const i7={"chemical json":0,name:"",inchi:"",formula:"",atoms:null,bonds:null,properties:null};function Eh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,i7,a),k.obj(t,e),e.atoms||(e.atoms={}),e.bonds||(e.bonds={}),e.properties||(e.properties={}),k.setGet(t,e,r7),a7(t,e)}var o7={newInstance:k.newInstance(Eh,"vtkMolecule"),extend:Eh},s7=[1],u7=[2],c7=[3],l7=[4],f7=[5],h7=[6],p7=[7],g7=[8],d7=[9],v7=[10],y7=[11],m7=[12],x7=[13],S7=[14],C7=[15],T7=[16],w7=[17],_7=[18],E7=[19],D7=[20],b7=[21],O7=[22],N7=[23],M7=[24],R7=[25],L7=[26],k7=[27],F7=[28],A7=[29],V7=[30],B7=[31],U7=[32],G7=[33],I7=[34],P7=[35],z7=[36],j7=[37],W7=[38],$7=[39],H7=[40],K7=[41],X7=[42],q7=[43],Y7=[44],J7=[45],Z7=[46],Q7=[47],eS=[48],tS=[49],nS=[50],rS=[51],aS=[52],iS=[53],oS=[54],sS=[55],uS=[56],cS=[57],lS=[58],fS=[59],hS=[60],pS=[61],gS=[62],dS=[63],vS=[64],yS=[65],mS=[66],xS=[67],SS=[68],CS=[69],TS=[70],wS=[71],_S=[72],ES=[73],DS=[74],bS=[75],OS=[76],NS=[77],MS=[78],RS=[79],LS=[80],kS=[81],FS=[82],AS=[83],VS=[84],BS=[85],US=[86],GS=[87],IS=[88],PS=[89],zS=[90],jS=[91],WS=[92],$S=[93],HS=[94],KS=[95],XS=[96],qS=[97],YS=[98],JS=[99],ZS=[100],QS=[101],eC=[102],tC=[103],nC=[104],rC=[105],aC=[106],iC=[107],oC=[108],sC=[109],uC=[110],cC=[111],lC=[112],fC=[113],hC=[114],pC=[115],gC=[116],dC=[117],vC=[118],yC={H:s7,He:u7,Li:c7,Be:l7,B:f7,C:h7,N:p7,O:g7,F:d7,Ne:v7,Na:y7,Mg:m7,Al:x7,Si:S7,P:C7,S:T7,Cl:w7,Ar:_7,K:E7,Ca:D7,Sc:b7,Ti:O7,V:N7,Cr:M7,Mn:R7,Fe:L7,Co:k7,Ni:F7,Cu:A7,Zn:V7,Ga:B7,Ge:U7,As:G7,Se:I7,Br:P7,Kr:z7,Rb:j7,Sr:W7,Y:$7,Zr:H7,Nb:K7,Mo:X7,Tc:q7,Ru:Y7,Rh:J7,Pd:Z7,Ag:Q7,Cd:eS,In:tS,Sn:nS,Sb:rS,Te:aS,I:iS,Xe:oS,Cs:sS,Ba:uS,La:cS,Ce:lS,Pr:fS,Nd:hS,Pm:pS,Sm:gS,Eu:dS,Gd:vS,Tb:yS,Dy:mS,Ho:xS,Er:SS,Tm:CS,Yb:TS,Lu:wS,Hf:_S,Ta:ES,W:DS,Re:bS,Os:OS,Ir:NS,Pt:MS,Au:RS,Hg:LS,Tl:kS,Pb:FS,Bi:AS,Po:VS,At:BS,Rn:US,Fr:GS,Ra:IS,Ac:PS,Th:zS,Pa:jS,U:WS,Np:$S,Pu:HS,Am:KS,Cm:XS,Bk:qS,Cf:YS,Es:JS,Fm:ZS,Md:QS,No:eC,Lr:tC,Rf:nC,Db:rC,Sg:aC,Bh:iC,Hs:oC,Mt:sC,Ds:uC,Rg:cC,Cn:lC,Uut:fC,Uuq:hC,Uup:pC,Uuh:gC,Uus:dC,Uuo:vC};function mC(t,e){e.classHierarchy.push("vtkPDBReader"),e.dataAccessHelper||(e.dataAccessHelper=jr.get("http"));function a(n,r){return e.dataAccessHelper.fetchText(t,n,r)}t.setUrl=(n,r)=>{if(n.indexOf(".pdb")===-1)e.baseURL=n,e.url=`${n}`;else{e.url=n;const i=n.split("/");i.pop(),e.baseURL=i.join("/")}return t.loadData(r)},t.loadData=n=>a(e.url,n).then(t.parseAsText),t.parseAsText=n=>(e.pdb=n,e.molecule=[],e.molecule=e.pdb.split(`
`),t.modified(),!0),t.requestData=(n,r)=>{const i=o7.newInstance();if(e.molecule){const s=e.molecule.length,u=[],c=[];e.numberOfAtoms=0;let o=0;for(;o<s&&e.molecule[o]!=="END";){const f=e.molecule[o].length,l=e.molecule[o],h=l.substr(0,6).replace(/\s+/g,"");if(h.toUpperCase(),h==="ATOM"||h==="HETATM"){const p=l.substr(12,4).replace(/\s+/g,""),d=l.substr(30,8).replace(/\s+/g,""),y=l.substr(38,8).replace(/\s+/g,""),m=l.substr(46,8).replace(/\s+/g,"");let S="";f>=78&&(S=l.substr(76,2).replace(/\s+/g,"")),S===""&&(S=p.substr(0,2).replace(/\d/g,"")),u.push(d),u.push(y),u.push(m);const[v]=yC[S];c.push(v),e.numberOfAtoms++}o++}i.getAtoms().elements={},i.getAtoms().elements.number=Int8Array.from(c),i.getAtoms().coords={},i.getAtoms().coords["3d"]=Float32Array.from(u)}e.output[0]=i},t.isBusy=()=>!!e.requestCount}const xC={numberOfAtoms:0,requestCount:0};function SC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xC,a),k.obj(t,e),k.get(t,e,["url","baseURL","numberOfAtoms","requestCount"]),k.setGet(t,e,["dataAccessHelper"]),k.algo(t,e,0,1),k.event(t,e,"busy"),mC(t,e)}k.newInstance(SC,"vtkPDBReader");var B0={},CC={get exports(){return B0},set exports(t){B0=t}};(function(t,e){(function(a,n){t.exports=n()})(Rt,function(){return function(a){var n={};function r(i){if(n[i])return n[i].exports;var s=n[i]={i,l:!1,exports:{}};return a[i].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=a,r.c=n,r.d=function(i,s,u){r.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:u})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,s){if(1&s&&(i=r(i)),8&s||4&s&&typeof i=="object"&&i&&i.__esModule)return i;var u=Object.create(null);if(r.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:i}),2&s&&typeof i!="string")for(var c in i)r.d(u,c,function(o){return i[o]}.bind(null,c));return u},r.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(s,"a",s),s},r.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},r.p="",r(r.s=184)}([function(a,n,r){function i(s){for(var u in s)n.hasOwnProperty(u)||(n[u]=s[u])}Object.defineProperty(n,"__esModule",{value:!0}),i(r(240)),i(r(251)),i(r(175)),i(r(107)),i(r(29)),i(r(73)),i(r(106)),i(r(30)),i(r(252)),i(r(52)),i(r(97)),i(r(253)),i(r(37)),i(r(51)),i(r(173)),i(r(176)),i(r(172)),i(r(108)),i(r(254)),i(r(255)),i(r(256)),i(r(72)),i(r(177)),i(r(105)),i(r(17)),i(r(257)),i(r(12)),i(r(174))},function(a,n,r){var i=this&&this.__values||function(g){var x=typeof Symbol=="function"&&Symbol.iterator,C=x&&g[x],T=0;if(C)return C.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&T>=g.length&&(g=void 0),{value:g&&g[T++],done:!g}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(212);n.FixedSizeSet=s.FixedSizeSet;var u=r(213);n.ObjectCache=u.ObjectCache;var c=r(214);n.CompareCache=c.CompareCache;var o=r(215);n.Lazy=o.Lazy;var f=r(216);function l(g,x,C){if(S(g))g.forEach(function(w,_){return x.call(C,_,w)});else for(var T in g)g.hasOwnProperty(T)&&x.call(C,T,g[T])}function h(g){var x,C;if(p(g))return g;if(y(g)){var T=[];try{for(var w=i(g),_=w.next();!_.done;_=w.next()){var E=_.value;T.push(h(E))}}catch(N){x={error:N}}finally{try{_&&!_.done&&(C=w.return)&&C.call(w)}finally{if(x)throw x.error}}return T}if(d(g)){T={};for(var D in g)if(g.hasOwnProperty(D)){var b=g[D];T[D]=h(b)}return T}return g}function p(g){return!!g&&Object.prototype.toString.call(g)==="[object Function]"}function d(g){var x=typeof g;return!!g&&(x==="function"||x==="object")}function y(g){return Array.isArray(g)}function m(g){return g instanceof Set}function S(g){return g instanceof Map}function v(g){if(d(g)){var x=Object.getPrototypeOf(g),C=x.constructor;return x&&C&&typeof C=="function"&&C instanceof C&&Function.prototype.toString.call(C)===Function.prototype.toString.call(Object)}return!1}n.StringWalker=f.StringWalker,n.applyMixin=function(g,x){for(var C=[],T=2;T<arguments.length;T++)C[T-2]=arguments[T];Object.getOwnPropertyNames(x.prototype).forEach(function(w){if(w!=="constructor"){if(C.indexOf(w)!==-1){var _=Object.getOwnPropertyDescriptor(g.prototype,w);_&&Object.defineProperty(g.prototype,"_"+w,_)}var E=Object.getOwnPropertyDescriptor(x.prototype,w);E&&Object.defineProperty(g.prototype,w,E)}})},n.applyDefaults=function g(x,C,T){T===void 0&&(T=!1);var w=h(x||{});return l(C,function(_,E){v(E)?w[_]=g(w[_],E,T):(T||w[_]===void 0)&&(w[_]=E)}),w},n.forEachArray=function(g,x,C){g.forEach(x,C)},n.forEachObject=l,n.arrayLength=function(g){return m(g)?g.size:g.length},n.objectLength=function(g){return S(g)?g.size:Object.keys(g).length},n.getObjectValue=function(g,x){return S(g)?g.get(x):g[x]},n.removeObjectValue=function(g,x){S(g)?g.delete(x):delete g[x]},n.clone=h,n.isBoolean=function(g){return typeof g=="boolean"},n.isNumber=function(g){return typeof g=="number"},n.isString=function(g){return typeof g=="string"},n.isFunction=p,n.isObject=d,n.isArray=y,n.isSet=m,n.isMap=S,n.isEmpty=function(g){if(y(g))return!g.length;if(m(g)||S(g))return!g.size;if(d(g)){for(var x in g)if(g.hasOwnProperty(x))return!1;return!0}return!1},n.isPlainObject=v,n.isIterable=function(g){return g&&typeof g[Symbol.iterator]=="function"},n.getValue=function(g){return p(g.valueOf)?g.valueOf():g},n.utf8Encode=function(g){for(var x=new Uint8Array(4*g.length),C=0,T=0;T<g.length;T++){var w=g.charCodeAt(T);if(w<128)x[C++]=w;else{if(w<2048)x[C++]=w>>6|192;else{if(w>55295&&w<56320){if(++T>=g.length)throw new Error("Incomplete surrogate pair.");var _=g.charCodeAt(T);if(_<56320||_>57343)throw new Error("Invalid surrogate character.");w=65536+((1023&w)<<10)+(1023&_),x[C++]=w>>18|240,x[C++]=w>>12&63|128}else x[C++]=w>>12|224;x[C++]=w>>6&63|128}x[C++]=63&w|128}}return x.subarray(0,C)},n.utf8Decode=function(g){for(var x="",C=0;C<g.length;){var T=g[C++];if(T>127)if(T>191&&T<224){if(C>=g.length)throw new Error("Incomplete 2-byte sequence.");T=(31&T)<<6|63&g[C++]}else if(T>223&&T<240){if(C+1>=g.length)throw new Error("Incomplete 3-byte sequence.");T=(15&T)<<12|(63&g[C++])<<6|63&g[C++]}else{if(!(T>239&&T<248))throw new Error("Unknown multi-byte start.");if(C+2>=g.length)throw new Error("Incomplete 4-byte sequence.");T=(7&T)<<18|(63&g[C++])<<12|(63&g[C++])<<6|63&g[C++]}if(T<=65535)x+=String.fromCharCode(T);else{if(!(T<=1114111))throw new Error("Code point exceeds UTF-16 limit.");T-=65536,x+=String.fromCharCode(T>>10|55296),x+=String.fromCharCode(1023&T|56320)}}return x}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),function(i){i[i.Before=0]="Before",i[i.Equal=1]="Equal",i[i.After=2]="After"}(n.BoundaryPosition||(n.BoundaryPosition={})),function(i){i[i.None=0]="None",i[i.Capturing=1]="Capturing",i[i.AtTarget=2]="AtTarget",i[i.Bubbling=3]="Bubbling"}(n.EventPhase||(n.EventPhase={})),function(i){i[i.Element=1]="Element",i[i.Attribute=2]="Attribute",i[i.Text=3]="Text",i[i.CData=4]="CData",i[i.EntityReference=5]="EntityReference",i[i.Entity=6]="Entity",i[i.ProcessingInstruction=7]="ProcessingInstruction",i[i.Comment=8]="Comment",i[i.Document=9]="Document",i[i.DocumentType=10]="DocumentType",i[i.DocumentFragment=11]="DocumentFragment",i[i.Notation=12]="Notation"}(n.NodeType||(n.NodeType={})),function(i){i[i.Disconnected=1]="Disconnected",i[i.Preceding=2]="Preceding",i[i.Following=4]="Following",i[i.Contains=8]="Contains",i[i.ContainedBy=16]="ContainedBy",i[i.ImplementationSpecific=32]="ImplementationSpecific"}(n.Position||(n.Position={})),function(i){i[i.Accept=1]="Accept",i[i.Reject=2]="Reject",i[i.Skip=3]="Skip"}(n.FilterResult||(n.FilterResult={})),function(i){i[i.All=4294967295]="All",i[i.Element=1]="Element",i[i.Attribute=2]="Attribute",i[i.Text=4]="Text",i[i.CDataSection=8]="CDataSection",i[i.EntityReference=16]="EntityReference",i[i.Entity=32]="Entity",i[i.ProcessingInstruction=64]="ProcessingInstruction",i[i.Comment=128]="Comment",i[i.Document=256]="Document",i[i.DocumentType=512]="DocumentType",i[i.DocumentFragment=1024]="DocumentFragment",i[i.Notation=2048]="Notation"}(n.WhatToShow||(n.WhatToShow={})),function(i){i[i.StartToStart=0]="StartToStart",i[i.StartToEnd=1]="StartToEnd",i[i.EndToEnd=2]="EndToEnd",i[i.EndToStart=3]="EndToStart"}(n.HowToCompare||(n.HowToCompare={}))},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(241);n.Cast=i.Cast;var s=r(150);n.Guard=s.Guard;var u=r(242);n.EmptySet=u.EmptySet},function(a,n,r){var i=r(11),s=r(55).f,u=r(21),c=r(25),o=r(80),f=r(119),l=r(123);a.exports=function(h,p){var d,y,m,S,v,g=h.target,x=h.global,C=h.stat;if(d=x?i:C?i[g]||o(g,{}):(i[g]||{}).prototype)for(y in p){if(S=p[y],m=h.noTargetGet?(v=s(d,y))&&v.value:d[y],!l(x?y:g+(C?".":"#")+y,h.forced)&&m!==void 0){if(typeof S==typeof m)continue;f(S,m)}(h.sham||m&&m.sham)&&u(S,"sham",!0),c(d,y,S,h)}}},function(a,n,r){var i=r(11),s=r(81),u=r(14),c=r(58),o=r(86),f=r(124),l=s("wks"),h=i.Symbol,p=f?h:h&&h.withoutSetter||c;a.exports=function(d){return u(l,d)||(o&&u(h,d)?l[d]=h[d]:l[d]=p("Symbol."+d)),l[d]}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(1),s=r(29),u=function(){function c(){this._features={mutationObservers:!0,customElements:!0,slots:!0,steps:!0},this._window=null,this._compareCache=new i.CompareCache,this._rangeList=new i.FixedSizeSet}return c.prototype.setFeatures=function(o){if(o===void 0&&(o=!0),i.isObject(o))for(var f in o)this._features[f]=o[f]||!1;else for(var f in this._features)this._features[f]=o},Object.defineProperty(c.prototype,"features",{get:function(){return this._features},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"window",{get:function(){return this._window===null&&(this._window=s.create_window()),this._window},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"compareCache",{get:function(){return this._compareCache},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rangeList",{get:function(){return this._rangeList},enumerable:!0,configurable:!0}),Object.defineProperty(c,"instance",{get:function(){return c._instance||(c._instance=new c),c._instance},enumerable:!0,configurable:!0}),c}();n.dom=u.instance},function(a,n,r){var i=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var g={};if(v!=null)for(var x in v)Object.hasOwnProperty.call(v,x)&&(g[x]=v[x]);return g.default=v,g};Object.defineProperty(n,"__esModule",{value:!0});var s=i(r(228));n.base64=s;var u=i(r(146));n.byte=u;var c=i(r(147));n.byteSequence=c;var o=i(r(96));n.codePoint=o;var f=i(r(232));n.json=f;var l=i(r(233));n.list=l;var h=i(r(234));n.map=h;var p=i(r(235));n.namespace=p;var d=i(r(236));n.queue=d;var y=i(r(237));n.set=y;var m=i(r(238));n.stack=m;var S=i(r(239));n.string=S},function(a,n){a.exports=function(r){try{return!!r()}catch{return!0}}},function(a,n,r){var i,s=this&&this.__extends||(i=function(U,B){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,z){F.__proto__=z}||function(F,z){for(var H in z)z.hasOwnProperty(H)&&(F[H]=z[H])})(U,B)},function(U,B){function F(){this.constructor=U}i(U,B),U.prototype=B===null?Object.create(B):(F.prototype=B.prototype,new F)});Object.defineProperty(n,"__esModule",{value:!0});var u=function(U){function B(F,z){z===void 0&&(z="");var H=U.call(this,z)||this;return H.name=F,H}return s(B,U),B}(Error);n.DOMException=u;var c=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"DOMStringSizeError",F)||this}return s(B,U),B}(u);n.DOMStringSizeError=c;var o=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"WrongDocumentError","The object is in the wrong document. "+F)||this}return s(B,U),B}(u);n.WrongDocumentError=o;var f=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"NoDataAllowedError",F)||this}return s(B,U),B}(u);n.NoDataAllowedError=f;var l=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"NoModificationAllowedError","The object can not be modified. "+F)||this}return s(B,U),B}(u);n.NoModificationAllowedError=l;var h=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"NotSupportedError","The operation is not supported. "+F)||this}return s(B,U),B}(u);n.NotSupportedError=h;var p=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"InUseAttributeError",F)||this}return s(B,U),B}(u);n.InUseAttributeError=p;var d=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"InvalidStateError","The object is in an invalid state. "+F)||this}return s(B,U),B}(u);n.InvalidStateError=d;var y=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"InvalidModificationError","The object can not be modified in this way. "+F)||this}return s(B,U),B}(u);n.InvalidModificationError=y;var m=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"NamespaceError","The operation is not allowed by Namespaces in XML. [XMLNS] "+F)||this}return s(B,U),B}(u);n.NamespaceError=m;var S=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"InvalidAccessError","The object does not support the operation or argument. "+F)||this}return s(B,U),B}(u);n.InvalidAccessError=S;var v=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"ValidationError",F)||this}return s(B,U),B}(u);n.ValidationError=v;var g=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"TypeMismatchError",F)||this}return s(B,U),B}(u);n.TypeMismatchError=g;var x=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"SecurityError","The operation is insecure. "+F)||this}return s(B,U),B}(u);n.SecurityError=x;var C=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"NetworkError","A network error occurred. "+F)||this}return s(B,U),B}(u);n.NetworkError=C;var T=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"AbortError","The operation was aborted. "+F)||this}return s(B,U),B}(u);n.AbortError=T;var w=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"URLMismatchError","The given URL does not match another URL. "+F)||this}return s(B,U),B}(u);n.URLMismatchError=w;var _=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"QuotaExceededError","The quota has been exceeded. "+F)||this}return s(B,U),B}(u);n.QuotaExceededError=_;var E=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"TimeoutError","The operation timed out. "+F)||this}return s(B,U),B}(u);n.TimeoutError=E;var D=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"InvalidNodeTypeError","The supplied node is incorrect or has an incorrect ancestor for this operation. "+F)||this}return s(B,U),B}(u);n.InvalidNodeTypeError=D;var b=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"DataCloneError","The object can not be cloned. "+F)||this}return s(B,U),B}(u);n.DataCloneError=b;var N=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"NotImplementedError","The DOM method is not implemented by this module. "+F)||this}return s(B,U),B}(u);n.NotImplementedError=N;var R=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"HierarchyRequestError","The operation would yield an incorrect node tree. "+F)||this}return s(B,U),B}(u);n.HierarchyRequestError=R;var M=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"NotFoundError","The object can not be found here. "+F)||this}return s(B,U),B}(u);n.NotFoundError=M;var A=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"IndexSizeError","The index is not in the allowed range. "+F)||this}return s(B,U),B}(u);n.IndexSizeError=A;var I=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"SyntaxError","The string did not match the expected pattern. "+F)||this}return s(B,U),B}(u);n.SyntaxError=I;var $=function(U){function B(F){return F===void 0&&(F=""),U.call(this,"InvalidCharacterError","The string contains invalid characters. "+F)||this}return s(B,U),B}(u);n.InvalidCharacterError=$},function(a,n,r){var i=r(53),s=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],u=["scalar","sequence","mapping"];a.exports=function(c,o){var f,l;if(o=o||{},Object.keys(o).forEach(function(h){if(s.indexOf(h)===-1)throw new i('Unknown option "'+h+'" is met in definition of "'+c+'" YAML type.')}),this.tag=c,this.kind=o.kind||null,this.resolve=o.resolve||function(){return!0},this.construct=o.construct||function(h){return h},this.instanceOf=o.instanceOf||null,this.predicate=o.predicate||null,this.represent=o.represent||null,this.defaultStyle=o.defaultStyle||null,this.styleAliases=(f=o.styleAliases||null,l={},f!==null&&Object.keys(f).forEach(function(h){f[h].forEach(function(p){l[String(p)]=h})}),l),u.indexOf(this.kind)===-1)throw new i('Unknown kind "'+this.kind+'" is specified for "'+c+'" YAML type.')}},function(a,n,r){(function(i){var s=function(u){return u&&u.Math==Math&&u};a.exports=s(typeof globalThis=="object"&&globalThis)||s(typeof window=="object"&&window)||s(typeof self=="object"&&self)||s(typeof i=="object"&&i)||Function("return this")()}).call(this,r(78))},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.idl_defineConst=function(i,s,u){Object.defineProperty(i,s,{writable:!1,enumerable:!0,configurable:!1,value:u})}},function(a,n){a.exports=function(r){return typeof r=="object"?r!==null:typeof r=="function"}},function(a,n){var r={}.hasOwnProperty;a.exports=function(i,s){return r.call(i,s)}},function(a,n,r){var i=r(16),s=r(115),u=r(18),c=r(56),o=Object.defineProperty;n.f=i?o:function(f,l,h){if(u(f),l=c(l,!0),u(h),s)try{return o(f,l,h)}catch{}if("get"in h||"set"in h)throw TypeError("Accessors not supported");return"value"in h&&(f[l]=h.value),f}},function(a,n,r){var i=r(8);a.exports=!i(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(a,n,r){var i=this&&this.__values||function(g){var x=typeof Symbol=="function"&&Symbol.iterator,C=x&&g[x],T=0;if(C)return C.call(g);if(g&&typeof g.length=="number")return{next:function(){return g&&T>=g.length&&(g=void 0),{value:g&&g[T++],done:!g}}};throw new TypeError(x?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(3),u=r(2);function c(g,x,C){if(C===void 0&&(C=!1),C&&s.Guard.isElementNode(x)&&s.Guard.isShadowRoot(x.shadowRoot)&&x.shadowRoot._firstChild)return x.shadowRoot._firstChild;if(x._firstChild)return x._firstChild;if(x===g)return null;if(x._nextSibling)return x._nextSibling;for(var T=x._parent;T&&T!==g;){if(T._nextSibling)return T._nextSibling;T=T._parent}return null}function o(){var g;return(g={})[Symbol.iterator]=function(){return{next:function(){return{done:!0,value:null}}}},g}function f(g,x,C,T){x===void 0&&(x=!1),C===void 0&&(C=!1);for(var w=x?g:c(g,g,C);w&&T&&!T(w);)w=c(g,w,C);return w}function l(g,x,C,T,w){T===void 0&&(T=!1);for(var _=c(g,x,T);_&&w&&!w(_);)_=c(g,_,T);return _}function h(g,x,C,T){var w;return x===void 0&&(x=!1),C===void 0&&(C=!1),x||g._children.size!==0?((w={})[Symbol.iterator]=function(){var _=x?g:c(g,g,C);return{next:function(){for(;_&&T&&!T(_);)_=c(g,_,C);if(_===null)return{done:!0,value:null};var E={done:!1,value:_};return _=c(g,_,C),E}}},w):o()}function p(g,x,C){x===void 0&&(x=!1);for(var T=x?g:g._parent;T&&C&&!C(T);)T=T._parent;return T}function d(g,x,C,T){for(var w=x._parent;w&&T&&!T(w);)w=w._parent;return w}function y(g){return s.Guard.isDocumentTypeNode(g)?0:s.Guard.isCharacterDataNode(g)?g._data.length:g._children.size}function m(g,x){if(x===void 0&&(x=!1),x){var C=m(g,!1);return s.Guard.isShadowRoot(C)?m(C._host,!0):C}return g._parent?m(g._parent):g}function S(g,x,C,T){C===void 0&&(C=!1),T===void 0&&(T=!1);for(var w=C?g:T&&s.Guard.isShadowRoot(g)?g._host:g._parent;w!==null;){if(w===x)return!0;w=T&&s.Guard.isShadowRoot(w)?w._host:w._parent}return!1}function v(g){for(var x=m(g),C=0,T=f(x);T!==null;){if(C++,T===g)return C;T=l(x,T)}return-1}n.tree_getFirstDescendantNode=f,n.tree_getNextDescendantNode=l,n.tree_getDescendantNodes=h,n.tree_getDescendantElements=function(g,x,C,T){var w;return x===void 0&&(x=!1),C===void 0&&(C=!1),x||g._children.size!==0?((w={})[Symbol.iterator]=function(){var _=h(g,x,C,function(D){return s.Guard.isElementNode(D)})[Symbol.iterator](),E=_.next().value;return{next:function(){for(;E&&T&&!T(E);)E=_.next().value;if(E===null)return{done:!0,value:null};var D={done:!1,value:E};return E=_.next().value,D}}},w):o()},n.tree_getSiblingNodes=function(g,x,C){var T;return x===void 0&&(x=!1),g._parent&&g._parent._children.size!==0?((T={})[Symbol.iterator]=function(){var w=g._parent?g._parent._firstChild:null;return{next:function(){for(;w&&(C&&!C(w)||!x&&w===g);)w=w._nextSibling;if(w===null)return{done:!0,value:null};var _={done:!1,value:w};return w=w._nextSibling,_}}},T):o()},n.tree_getFirstAncestorNode=p,n.tree_getNextAncestorNode=d,n.tree_getAncestorNodes=function(g,x,C){var T;return x===void 0&&(x=!1),x||g._parent?((T={})[Symbol.iterator]=function(){var w=p(g,x,C);return{next:function(){if(w===null)return{done:!0,value:null};var _={done:!1,value:w};return w=d(0,w,x,C),_}}},T):o()},n.tree_getCommonAncestor=function(g,x){if(g===x)return g._parent;for(var C=[],T=[],w=p(g,!0);w!==null;)C.push(w),w=d(0,w);for(var _=p(x,!0);_!==null;)T.push(_),_=d(0,_);for(var E=C.length,D=T.length,b=null,N=Math.min(E,D);N>0;N--){var R=C[--E];if(R!==T[--D])break;b=R}return b},n.tree_getFollowingNode=function(g,x){if(x._firstChild)return x._firstChild;if(x._nextSibling)return x._nextSibling;for(;;){var C=x._parent;if(C===null||C===g)return null;if(C._nextSibling)return C._nextSibling;x=C}},n.tree_getPrecedingNode=function(g,x){return x===g?null:x._previousSibling?(x=x._previousSibling)._lastChild?x._lastChild:x:x._parent},n.tree_isConstrained=function g(x){var C,T,w,_,E,D;switch(x._nodeType){case u.NodeType.Document:var b=!1,N=!1;try{for(var R=i(x._children),M=R.next();!M.done;M=R.next())switch(M.value._nodeType){case u.NodeType.ProcessingInstruction:case u.NodeType.Comment:break;case u.NodeType.DocumentType:if(b||N)return!1;b=!0;break;case u.NodeType.Element:if(N)return!1;N=!0;break;default:return!1}}catch(B){C={error:B}}finally{try{M&&!M.done&&(T=R.return)&&T.call(R)}finally{if(C)throw C.error}}break;case u.NodeType.DocumentFragment:case u.NodeType.Element:try{for(var A=i(x._children),I=A.next();!I.done;I=A.next())switch(I.value._nodeType){case u.NodeType.Element:case u.NodeType.Text:case u.NodeType.ProcessingInstruction:case u.NodeType.CData:case u.NodeType.Comment:break;default:return!1}}catch(B){w={error:B}}finally{try{I&&!I.done&&(_=A.return)&&_.call(A)}finally{if(w)throw w.error}}break;case u.NodeType.DocumentType:case u.NodeType.Text:case u.NodeType.ProcessingInstruction:case u.NodeType.CData:case u.NodeType.Comment:return!x.hasChildNodes()}try{for(var $=i(x._children),U=$.next();!U.done;U=$.next())if(!g(U.value))return!1}catch(B){E={error:B}}finally{try{U&&!U.done&&(D=$.return)&&D.call($)}finally{if(E)throw E.error}}return!0},n.tree_nodeLength=y,n.tree_isEmpty=function(g){return y(g)===0},n.tree_rootNode=m,n.tree_isDescendantOf=function(g,x,C,T){C===void 0&&(C=!1),T===void 0&&(T=!1);for(var w=f(g,C,T);w!==null;){if(w===x)return!0;w=l(g,w,C,T)}return!1},n.tree_isAncestorOf=S,n.tree_isHostIncludingAncestorOf=function g(x,C,T){if(T===void 0&&(T=!1),S(x,C,T))return!0;var w=m(x);return!(!s.Guard.isDocumentFragmentNode(w)||w._host===null||!g(w._host,C,T))},n.tree_isSiblingOf=function(g,x,C){return C===void 0&&(C=!1),g!==x?g._parent!==null&&g._parent===x._parent:!!C},n.tree_isPreceding=function(g,x){var C=v(g),T=v(x);return C!==-1&&T!==-1&&m(g)===m(x)&&T<C},n.tree_isFollowing=function(g,x){var C=v(g),T=v(x);return C!==-1&&T!==-1&&m(g)===m(x)&&T>C},n.tree_isParentOf=function(g,x){return g._parent===x},n.tree_isChildOf=function(g,x){return x._parent===g},n.tree_previousSibling=function(g){return g._previousSibling},n.tree_nextSibling=function(g){return g._nextSibling},n.tree_firstChild=function(g){return g._firstChild},n.tree_lastChild=function(g){return g._lastChild},n.tree_treePosition=v,n.tree_index=function(g){for(var x=0;g._previousSibling!==null;)x++,g=g._previousSibling;return x},n.tree_retarget=function(g,x){for(;;){if(!g||!s.Guard.isNode(g))return g;var C=m(g);if(!s.Guard.isShadowRoot(C)||x&&s.Guard.isNode(x)&&S(C,x,!0,!0))return g;g=C.host}}},function(a,n,r){var i=r(13);a.exports=function(s){if(!i(s))throw TypeError(String(s)+" is not an object");return s}},function(a,n,r){var i=r(24),s=r(130),u=r(49),c=r(43),o=r(88),f=c.set,l=c.getterFor("Array Iterator");a.exports=o(Array,"Array",function(h,p){f(this,{type:"Array Iterator",target:i(h),index:0,kind:p})},function(){var h=l(this),p=h.target,d=h.kind,y=h.index++;return!p||y>=p.length?(h.target=void 0,{value:void 0,done:!0}):d=="keys"?{value:y,done:!1}:d=="values"?{value:p[y],done:!1}:{value:[y,p[y]],done:!1}},"values"),u.Arguments=u.Array,s("keys"),s("values"),s("entries")},function(a,n,r){var i=r(90),s=r(25),u=r(202);i||s(Object.prototype,"toString",u,{unsafe:!0})},function(a,n,r){var i=r(16),s=r(15),u=r(40);a.exports=i?function(c,o,f){return s.f(c,o,u(1,f))}:function(c,o,f){return c[o]=f,c}},function(a,n,r){var i=r(137).charAt,s=r(43),u=r(88),c=s.set,o=s.getterFor("String Iterator");u(String,"String",function(f){c(this,{type:"String Iterator",string:String(f),index:0})},function(){var f,l=o(this),h=l.string,p=l.index;return p>=h.length?{value:void 0,done:!0}:(f=i(h,p),l.index+=f.length,{value:f,done:!1})})},function(a,n,r){var i=r(11),s=r(203),u=r(19),c=r(21),o=r(5),f=o("iterator"),l=o("toStringTag"),h=u.values;for(var p in s){var d=i[p],y=d&&d.prototype;if(y){if(y[f]!==h)try{c(y,f,h)}catch{y[f]=h}if(y[l]||c(y,l,p),s[p]){for(var m in u)if(y[m]!==u[m])try{c(y,m,u[m])}catch{y[m]=u[m]}}}}},function(a,n,r){var i=r(41),s=r(35);a.exports=function(u){return i(s(u))}},function(a,n,r){var i=r(11),s=r(21),u=r(14),c=r(80),o=r(117),f=r(43),l=f.get,h=f.enforce,p=String(String).split("String");(a.exports=function(d,y,m,S){var v=!!S&&!!S.unsafe,g=!!S&&!!S.enumerable,x=!!S&&!!S.noTargetGet;typeof m=="function"&&(typeof y!="string"||u(m,"name")||s(m,"name",y),h(m).source=p.join(typeof y=="string"?y:"")),d!==i?(v?!x&&d[y]&&(g=!0):delete d[y],g?d[y]=m:s(d,y,m)):g?d[y]=m:c(y,m)})(Function.prototype,"toString",function(){return typeof this=="function"&&l(this).source||o(this)})},function(a,n,r){var i=r(47),s=Math.min;a.exports=function(u){return u>0?s(i(u),9007199254740991):0}},function(a,n,r){var i=r(35);a.exports=function(s){return Object(i(s))}},function(a,n,r){var i=r(16),s=r(8),u=r(14),c=Object.defineProperty,o={},f=function(l){throw l};a.exports=function(l,h){if(u(o,l))return o[l];h||(h={});var p=[][l],d=!!u(h,"ACCESSORS")&&h.ACCESSORS,y=u(h,0)?h[0]:f,m=u(h,1)?h[1]:void 0;return o[l]=!!p&&!s(function(){if(d&&!i)return!0;var S={length:-1};d?c(S,1,{enumerable:!0,get:f}):S[1]=1,p.call(S,y,m)})}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(148),s=r(149),u=r(151),c=r(98),o=r(153),f=r(154),l=r(155),h=r(99),p=r(100),d=r(156),y=r(157),m=r(101),S=r(158),v=r(159),g=r(160),x=r(161),C=r(162),T=r(163),w=r(164),_=r(165),E=r(166),D=r(167),b=r(168),N=r(169),R=r(170);n.create_domImplementation=function(M){return i.DOMImplementationImpl._create(M)},n.create_window=function(){return s.WindowImpl._create()},n.create_xmlDocument=function(){return new u.XMLDocumentImpl},n.create_document=function(){return new c.DocumentImpl},n.create_abortController=function(){return new o.AbortControllerImpl},n.create_abortSignal=function(){return f.AbortSignalImpl._create()},n.create_documentType=function(M,A,I,$){return l.DocumentTypeImpl._create(M,A,I,$)},n.create_element=function(M,A,I,$){return h.ElementImpl._create(M,A,I,$)},n.create_htmlElement=function(M,A,I,$){return h.ElementImpl._create(M,A,I,$)},n.create_htmlUnknownElement=function(M,A,I,$){return h.ElementImpl._create(M,A,I,$)},n.create_documentFragment=function(M){return p.DocumentFragmentImpl._create(M)},n.create_shadowRoot=function(M,A){return d.ShadowRootImpl._create(M,A)},n.create_attr=function(M,A){return y.AttrImpl._create(M,A)},n.create_text=function(M,A){return m.TextImpl._create(M,A)},n.create_cdataSection=function(M,A){return S.CDATASectionImpl._create(M,A)},n.create_comment=function(M,A){return v.CommentImpl._create(M,A)},n.create_processingInstruction=function(M,A,I){return g.ProcessingInstructionImpl._create(M,A,I)},n.create_htmlCollection=function(M,A){return A===void 0&&(A=function(){return!0}),x.HTMLCollectionImpl._create(M,A)},n.create_nodeList=function(M){return C.NodeListImpl._create(M)},n.create_nodeListStatic=function(M,A){return T.NodeListStaticImpl._create(M,A)},n.create_namedNodeMap=function(M){return w.NamedNodeMapImpl._create(M)},n.create_range=function(M,A){return _.RangeImpl._create(M,A)},n.create_nodeIterator=function(M,A,I){return E.NodeIteratorImpl._create(M,A,I)},n.create_treeWalker=function(M,A){return D.TreeWalkerImpl._create(M,A)},n.create_nodeFilter=function(){return b.NodeFilterImpl._create()},n.create_mutationRecord=function(M,A,I,$,U,B,F,z,H){return N.MutationRecordImpl._create(M,A,I,$,U,B,F,z,H)},n.create_domTokenList=function(M,A){return R.DOMTokenListImpl._create(M,A)}},function(a,n,r){var i=this&&this.__values||function(y){var m=typeof Symbol=="function"&&Symbol.iterator,S=m&&y[m],v=0;if(S)return S.call(y);if(y&&typeof y.length=="number")return{next:function(){return y&&v>=y.length&&(y=void 0),{value:y&&y[v++],done:!y}}};throw new TypeError(m?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),u=r(17),c=r(3),o=r(72),f=new Map;function l(y,m){if(m!==y._root&&u.tree_isAncestorOf(y._reference,m,!0)){if(y._pointerBeforeReference)for(;;){var S=u.tree_getFollowingNode(y._root,m);if(S!==null&&u.tree_isDescendantOf(y._root,S,!0)&&!u.tree_isDescendantOf(m,S,!0))return void(y._reference=S);if(S===null)return void(y._pointerBeforeReference=!1)}if(m._previousSibling===null)m._parent!==null&&(y._reference=m._parent);else{for(var v=m._previousSibling,g=u.tree_getFirstDescendantNode(m._previousSibling,!0,!1);g!==null;)g!==null&&(v=g),g=u.tree_getNextDescendantNode(m._previousSibling,g,!0,!1);y._reference=v}}}function h(y,m,S,v,g){if(c.Guard.isSlot(y)&&m==="name"&&g===null){if(v===S||v===null&&S===""||v===""&&S===null)return;y._name=v===null||v===""?"":v,o.shadowTree_assignSlotablesForATree(u.tree_rootNode(y))}}function p(y,m,S,v,g){if(c.Guard.isSlotable(y)&&m==="slot"&&g===null){if(v===S||v===null&&S===""||v===""&&S===null)return;y._name=v===null||v===""?"":v,o.shadowTree_isAssigned(y)&&o.shadowTree_assignSlotables(y._assignedSlot),o.shadowTree_assignASlot(y)}}function d(y,m,S,v){m==="id"&&v===null&&(y._uniqueIdentifier=S||void 0)}n.dom_runRemovingSteps=function(y,m){},n.dom_runCloningSteps=function(y,m,S,v){},n.dom_runAdoptingSteps=function(y,m){},n.dom_runAttributeChangeSteps=function(y,m,S,v,g){var x,C;s.dom.features.slots&&(p.call(y,y,m,S,v,g),h.call(y,y,m,S,v,g)),d.call(y,y,m,v,g);try{for(var T=i(y._attributeChangeSteps),w=T.next();!w.done;w=T.next())w.value.call(y,y,m,S,v,g)}catch(_){x={error:_}}finally{try{w&&!w.done&&(C=T.return)&&C.call(T)}finally{if(x)throw x.error}}},n.dom_runInsertionSteps=function(y){},n.dom_runNodeIteratorPreRemovingSteps=function(y,m){l.call(y,y,m)},n.dom_hasSupportedTokens=function(y){return f.has(y)},n.dom_getSupportedTokens=function(y){return f.get(y)||new Set},n.dom_runEventConstructingSteps=function(y){},n.dom_runChildTextContentChangeSteps=function(y){}},function(a,n,r){var i=r(4),s=r(11),u=r(46),c=r(44),o=r(16),f=r(86),l=r(124),h=r(8),p=r(14),d=r(59),y=r(13),m=r(18),S=r(27),v=r(24),g=r(56),x=r(40),C=r(60),T=r(61),w=r(82),_=r(190),E=r(85),D=r(55),b=r(15),N=r(79),R=r(21),M=r(25),A=r(81),I=r(57),$=r(45),U=r(58),B=r(5),F=r(125),z=r(126),H=r(62),X=r(43),Y=r(36).forEach,q=I("hidden"),ee=B("toPrimitive"),re=X.set,ie=X.getterFor("Symbol"),te=Object.prototype,L=s.Symbol,O=u("JSON","stringify"),G=D.f,V=b.f,P=_.f,j=N.f,W=A("symbols"),Z=A("op-symbols"),ne=A("string-to-symbol-registry"),oe=A("symbol-to-string-registry"),ce=A("wks"),Ce=s.QObject,me=!Ce||!Ce.prototype||!Ce.prototype.findChild,$e=o&&h(function(){return C(V({},"a",{get:function(){return V(this,"a",{value:7}).a}})).a!=7})?function(ue,he,fe){var ve=G(te,he);ve&&delete te[he],V(ue,he,fe),ve&&ue!==te&&V(te,he,ve)}:V,Re=function(ue,he){var fe=W[ue]=C(L.prototype);return re(fe,{type:"Symbol",tag:ue,description:he}),o||(fe.description=he),fe},ge=l?function(ue){return typeof ue=="symbol"}:function(ue){return Object(ue)instanceof L},Je=function(ue,he,fe){ue===te&&Je(Z,he,fe),m(ue);var ve=g(he,!0);return m(fe),p(W,ve)?(fe.enumerable?(p(ue,q)&&ue[q][ve]&&(ue[q][ve]=!1),fe=C(fe,{enumerable:x(0,!1)})):(p(ue,q)||V(ue,q,x(1,{})),ue[q][ve]=!0),$e(ue,ve,fe)):V(ue,ve,fe)},K=function(ue,he){m(ue);var fe=v(he),ve=T(fe).concat(Q(fe));return Y(ve,function(ke){o&&!_e.call(fe,ke)||Je(ue,ke,fe[ke])}),ue},_e=function(ue){var he=g(ue,!0),fe=j.call(this,he);return!(this===te&&p(W,he)&&!p(Z,he))&&(!(fe||!p(this,he)||!p(W,he)||p(this,q)&&this[q][he])||fe)},Ee=function(ue,he){var fe=v(ue),ve=g(he,!0);if(fe!==te||!p(W,ve)||p(Z,ve)){var ke=G(fe,ve);return!ke||!p(W,ve)||p(fe,q)&&fe[q][ve]||(ke.enumerable=!0),ke}},de=function(ue){var he=P(v(ue)),fe=[];return Y(he,function(ve){p(W,ve)||p($,ve)||fe.push(ve)}),fe},Q=function(ue){var he=ue===te,fe=P(he?Z:v(ue)),ve=[];return Y(fe,function(ke){!p(W,ke)||he&&!p(te,ke)||ve.push(W[ke])}),ve};f||(M((L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor");var ue=arguments.length&&arguments[0]!==void 0?String(arguments[0]):void 0,he=U(ue),fe=function(ve){this===te&&fe.call(Z,ve),p(this,q)&&p(this[q],he)&&(this[q][he]=!1),$e(this,he,x(1,ve))};return o&&me&&$e(te,he,{configurable:!0,set:fe}),Re(he,ue)}).prototype,"toString",function(){return ie(this).tag}),M(L,"withoutSetter",function(ue){return Re(U(ue),ue)}),N.f=_e,b.f=Je,D.f=Ee,w.f=_.f=de,E.f=Q,F.f=function(ue){return Re(B(ue),ue)},o&&(V(L.prototype,"description",{configurable:!0,get:function(){return ie(this).description}}),c||M(te,"propertyIsEnumerable",_e,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!f,sham:!f},{Symbol:L}),Y(T(ce),function(ue){z(ue)}),i({target:"Symbol",stat:!0,forced:!f},{for:function(ue){var he=String(ue);if(p(ne,he))return ne[he];var fe=L(he);return ne[he]=fe,oe[fe]=he,fe},keyFor:function(ue){if(!ge(ue))throw TypeError(ue+" is not a symbol");if(p(oe,ue))return oe[ue]},useSetter:function(){me=!0},useSimple:function(){me=!1}}),i({target:"Object",stat:!0,forced:!f,sham:!o},{create:function(ue,he){return he===void 0?C(ue):K(C(ue),he)},defineProperty:Je,defineProperties:K,getOwnPropertyDescriptor:Ee}),i({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:de,getOwnPropertySymbols:Q}),i({target:"Object",stat:!0,forced:h(function(){E.f(1)})},{getOwnPropertySymbols:function(ue){return E.f(S(ue))}}),O&&i({target:"JSON",stat:!0,forced:!f||h(function(){var ue=L();return O([ue])!="[null]"||O({a:ue})!="{}"||O(Object(ue))!="{}"})},{stringify:function(ue,he,fe){for(var ve,ke=[ue],xe=1;arguments.length>xe;)ke.push(arguments[xe++]);if(ve=he,(y(he)||ue!==void 0)&&!ge(ue))return d(he)||(he=function(Fe,Be){if(typeof ve=="function"&&(Be=ve.call(this,Fe,Be)),!ge(Be))return Be}),ke[1]=he,O.apply(null,ke)}}),L.prototype[ee]||R(L.prototype,ee,L.prototype.valueOf),H(L,"Symbol"),$[q]=!0},function(a,n,r){var i=r(4),s=r(16),u=r(11),c=r(14),o=r(13),f=r(15).f,l=r(119),h=u.Symbol;if(s&&typeof h=="function"&&(!("description"in h.prototype)||h().description!==void 0)){var p={},d=function(){var g=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),x=this instanceof d?new h(g):g===void 0?h():h(g);return g===""&&(p[x]=!0),x};l(d,h);var y=d.prototype=h.prototype;y.constructor=d;var m=y.toString,S=String(h("test"))=="Symbol(test)",v=/^Symbol\((.*)\)[^)]+$/;f(y,"description",{configurable:!0,get:function(){var g=o(this)?this.valueOf():this,x=m.call(g);if(c(p,g))return"";var C=S?x.slice(7,-1):x.replace(v,"$1");return C===""?void 0:C}}),i({global:!0,forced:!0},{Symbol:d})}},function(a,n,r){r(126)("iterator")},function(a,n,r){var i,s=this&&this.__extends||(i=function(S,v){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,x){g.__proto__=x}||function(g,x){for(var C in x)x.hasOwnProperty(C)&&(g[C]=x[C])})(S,v)},function(S,v){function g(){this.constructor=S}i(S,v),S.prototype=v===null?Object.create(v):(g.prototype=v.prototype,new g)}),u=this&&this.__values||function(S){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&S[v],x=0;if(g)return g.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&x>=S.length&&(S=void 0),{value:S&&S[x++],done:!S}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(6),o=r(2),f=r(70),l=r(3),h=r(9),p=r(0),d=r(152),y=r(12),m=function(S){function v(){var g=S.call(this)||this;return g._parent=null,g._firstChild=null,g._lastChild=null,g._previousSibling=null,g._nextSibling=null,g}return s(v,S),Object.defineProperty(v.prototype,"_childNodes",{get:function(){return this.__childNodes||(this.__childNodes=p.create_nodeList(this))},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverride||c.dom.window._associatedDocument},set:function(g){this._nodeDocumentOverride=g},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"_registeredObserverList",{get:function(){return this.__registeredObserverList||(this.__registeredObserverList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"nodeType",{get:function(){return this._nodeType},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"nodeName",{get:function(){return l.Guard.isElementNode(this)?this._htmlUppercasedQualifiedName:l.Guard.isAttrNode(this)?this._qualifiedName:l.Guard.isExclusiveTextNode(this)?"#text":l.Guard.isCDATASectionNode(this)?"#cdata-section":l.Guard.isProcessingInstructionNode(this)?this._target:l.Guard.isCommentNode(this)?"#comment":l.Guard.isDocumentNode(this)?"#document":l.Guard.isDocumentTypeNode(this)?this._name:l.Guard.isDocumentFragmentNode(this)?"#document-fragment":""},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"baseURI",{get:function(){return d.urlSerializer(this._nodeDocument._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"isConnected",{get:function(){return l.Guard.isElementNode(this)&&p.shadowTree_isConnected(this)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"ownerDocument",{get:function(){return this._nodeType===o.NodeType.Document?null:this._nodeDocument},enumerable:!0,configurable:!0}),v.prototype.getRootNode=function(g){return p.tree_rootNode(this,!!g&&g.composed)},Object.defineProperty(v.prototype,"parentNode",{get:function(){return this._nodeType===o.NodeType.Attribute?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"parentElement",{get:function(){return this._parent&&l.Guard.isElementNode(this._parent)?this._parent:null},enumerable:!0,configurable:!0}),v.prototype.hasChildNodes=function(){return this._firstChild!==null},Object.defineProperty(v.prototype,"childNodes",{get:function(){return this._childNodes},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"nodeValue",{get:function(){return l.Guard.isAttrNode(this)?this._value:l.Guard.isCharacterDataNode(this)?this._data:null},set:function(g){g===null&&(g=""),l.Guard.isAttrNode(this)?p.attr_setAnExistingAttributeValue(this,g):l.Guard.isCharacterDataNode(this)&&p.characterData_replaceData(this,0,this._data.length,g)},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"textContent",{get:function(){return l.Guard.isDocumentFragmentNode(this)||l.Guard.isElementNode(this)?p.text_descendantTextContent(this):l.Guard.isAttrNode(this)?this._value:l.Guard.isCharacterDataNode(this)?this._data:null},set:function(g){g===null&&(g=""),l.Guard.isDocumentFragmentNode(this)||l.Guard.isElementNode(this)?p.node_stringReplaceAll(g,this):l.Guard.isAttrNode(this)?p.attr_setAnExistingAttributeValue(this,g):l.Guard.isCharacterDataNode(this)&&p.characterData_replaceData(this,0,p.tree_nodeLength(this),g)},enumerable:!0,configurable:!0}),v.prototype.normalize=function(){for(var g,x,C,T,w=[],_=p.tree_getFirstDescendantNode(this,!1,!1,function(Y){return l.Guard.isExclusiveTextNode(Y)});_!==null;)w.push(_),_=p.tree_getNextDescendantNode(this,_,!1,!1,function(Y){return l.Guard.isExclusiveTextNode(Y)});for(var E=0;E<w.length;E++){var D=w[E];if(D._parent!==null){var b=p.tree_nodeLength(D);if(b!==0){var N=[],R="";try{for(var M=(g=void 0,u(p.text_contiguousExclusiveTextNodes(D))),A=M.next();!A.done;A=M.next()){var I=A.value;N.push(I),R+=I._data}}catch(Y){g={error:Y}}finally{try{A&&!A.done&&(x=M.return)&&x.call(M)}finally{if(g)throw g.error}}if(p.characterData_replaceData(D,b,0,R),c.dom.rangeList.size!==0)for(var $=D._nextSibling;$!==null&&l.Guard.isExclusiveTextNode($);){var U=$,B=p.tree_index(U);try{for(var F=(C=void 0,u(c.dom.rangeList)),z=F.next();!z.done;z=F.next()){var H=z.value;H._start[0]===U&&(H._start[0]=D,H._start[1]+=b),H._end[0]===U&&(H._end[0]=D,H._end[1]+=b),H._start[0]===U._parent&&H._start[1]===B&&(H._start[0]=D,H._start[1]=b),H._end[0]===U._parent&&H._end[1]===B&&(H._end[0]=D,H._end[1]=b)}}catch(Y){C={error:Y}}finally{try{z&&!z.done&&(T=F.return)&&T.call(F)}finally{if(C)throw C.error}}b+=p.tree_nodeLength($),$=$._nextSibling}for(var X=0;X<N.length;X++)(I=N[X])._parent!==null&&p.mutation_remove(I,I._parent)}else p.mutation_remove(D,D._parent)}}},v.prototype.cloneNode=function(g){if(g===void 0&&(g=!1),l.Guard.isShadowRoot(this))throw new h.NotSupportedError;return p.node_clone(this,null,g)},v.prototype.isEqualNode=function(g){return g===void 0&&(g=null),g!==null&&p.node_equals(this,g)},v.prototype.isSameNode=function(g){return g===void 0&&(g=null),this===g},v.prototype.compareDocumentPosition=function(g){if(g===this)return 0;var x=g,C=this,T=null,w=null;if(l.Guard.isAttrNode(x)&&(x=(T=x)._element),l.Guard.isAttrNode(C)&&(C=(w=C)._element,T&&x&&x===C))for(var _=0;_<C._attributeList.length;_++){var E=C._attributeList[_];if(p.node_equals(E,T))return o.Position.ImplementationSpecific|o.Position.Preceding;if(p.node_equals(E,w))return o.Position.ImplementationSpecific|o.Position.Following}return x===null||C===null||p.tree_rootNode(x)!==p.tree_rootNode(C)?o.Position.Disconnected|o.Position.ImplementationSpecific|(c.dom.compareCache.check(this,g)?o.Position.Preceding:o.Position.Following):!T&&p.tree_isAncestorOf(C,x)||w&&x===C?o.Position.Contains|o.Position.Preceding:!w&&p.tree_isDescendantOf(C,x)||T&&x===C?o.Position.ContainedBy|o.Position.Following:p.tree_isPreceding(C,x)?o.Position.Preceding:o.Position.Following},v.prototype.contains=function(g){return g!==null&&p.tree_isDescendantOf(this,g,!0)},v.prototype.lookupPrefix=function(g){return g?l.Guard.isElementNode(this)?p.node_locateANamespacePrefix(this,g):l.Guard.isDocumentNode(this)?this.documentElement===null?null:p.node_locateANamespacePrefix(this.documentElement,g):l.Guard.isDocumentTypeNode(this)||l.Guard.isDocumentFragmentNode(this)?null:l.Guard.isAttrNode(this)?this._element===null?null:p.node_locateANamespacePrefix(this._element,g):this._parent!==null&&l.Guard.isElementNode(this._parent)?p.node_locateANamespacePrefix(this._parent,g):null:null},v.prototype.lookupNamespaceURI=function(g){return p.node_locateANamespace(this,g||null)},v.prototype.isDefaultNamespace=function(g){return g||(g=null),p.node_locateANamespace(this,null)===g},v.prototype.insertBefore=function(g,x){return p.mutation_preInsert(g,this,x)},v.prototype.appendChild=function(g){return p.mutation_append(g,this)},v.prototype.replaceChild=function(g,x){return p.mutation_replace(x,g,this)},v.prototype.removeChild=function(g){return p.mutation_preRemove(g,this)},v.prototype._getTheParent=function(g){return l.Guard.isSlotable(this)&&p.shadowTree_isAssigned(this)?this._assignedSlot:this._parent},v.ELEMENT_NODE=1,v.ATTRIBUTE_NODE=2,v.TEXT_NODE=3,v.CDATA_SECTION_NODE=4,v.ENTITY_REFERENCE_NODE=5,v.ENTITY_NODE=6,v.PROCESSING_INSTRUCTION_NODE=7,v.COMMENT_NODE=8,v.DOCUMENT_NODE=9,v.DOCUMENT_TYPE_NODE=10,v.DOCUMENT_FRAGMENT_NODE=11,v.NOTATION_NODE=12,v.DOCUMENT_POSITION_DISCONNECTED=1,v.DOCUMENT_POSITION_PRECEDING=2,v.DOCUMENT_POSITION_FOLLOWING=4,v.DOCUMENT_POSITION_CONTAINS=8,v.DOCUMENT_POSITION_CONTAINED_BY=16,v.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32,v}(f.EventTargetImpl);n.NodeImpl=m,m.prototype._children=new l.EmptySet,y.idl_defineConst(m.prototype,"ELEMENT_NODE",1),y.idl_defineConst(m.prototype,"ATTRIBUTE_NODE",2),y.idl_defineConst(m.prototype,"TEXT_NODE",3),y.idl_defineConst(m.prototype,"CDATA_SECTION_NODE",4),y.idl_defineConst(m.prototype,"ENTITY_REFERENCE_NODE",5),y.idl_defineConst(m.prototype,"ENTITY_NODE",6),y.idl_defineConst(m.prototype,"PROCESSING_INSTRUCTION_NODE",7),y.idl_defineConst(m.prototype,"COMMENT_NODE",8),y.idl_defineConst(m.prototype,"DOCUMENT_NODE",9),y.idl_defineConst(m.prototype,"DOCUMENT_TYPE_NODE",10),y.idl_defineConst(m.prototype,"DOCUMENT_FRAGMENT_NODE",11),y.idl_defineConst(m.prototype,"NOTATION_NODE",12),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_DISCONNECTED",1),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_PRECEDING",2),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_FOLLOWING",4),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_CONTAINS",8),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_CONTAINED_BY",16),y.idl_defineConst(m.prototype,"DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC",32)},function(a,n){a.exports=function(r){if(r==null)throw TypeError("Can't call method on "+r);return r}},function(a,n,r){var i=r(87),s=r(41),u=r(27),c=r(26),o=r(128),f=[].push,l=function(h){var p=h==1,d=h==2,y=h==3,m=h==4,S=h==6,v=h==5||S;return function(g,x,C,T){for(var w,_,E=u(g),D=s(E),b=i(x,C,3),N=c(D.length),R=0,M=T||o,A=p?M(g,N):d?M(g,0):void 0;N>R;R++)if((v||R in D)&&(_=b(w=D[R],R,E),h)){if(p)A[R]=_;else if(_)switch(h){case 3:return!0;case 5:return w;case 6:return R;case 2:f.call(A,w)}else if(m)return!1}return S?-1:y||m?m:A}};a.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6)}},function(a,n,r){var i=this&&this.__values||function(E){var D=typeof Symbol=="function"&&Symbol.iterator,b=D&&E[D],N=0;if(b)return b.call(E);if(E&&typeof E.length=="number")return{next:function(){return E&&N>=E.length&&(E=void 0),{value:E&&E[N++],done:!E}}};throw new TypeError(D?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(E,D){var b=typeof Symbol=="function"&&E[Symbol.iterator];if(!b)return E;var N,R,M=b.call(E),A=[];try{for(;(D===void 0||D-- >0)&&!(N=M.next()).done;)A.push(N.value)}catch(I){R={error:I}}finally{try{N&&!N.done&&(b=M.return)&&b.call(M)}finally{if(R)throw R.error}}return A},u=this&&this.__spread||function(){for(var E=[],D=0;D<arguments.length;D++)E=E.concat(s(arguments[D]));return E};Object.defineProperty(n,"__esModule",{value:!0});var c=r(6),o=r(9),f=r(2),l=r(3),h=r(1),p=r(7),d=r(73),y=r(17),m=r(172),S=r(72),v=r(51),g=r(30),x=r(106);function C(E,D,b){var N,R,M,A,I,$,U,B,F=D._nodeType,z=E._nodeType,H=b?b._nodeType:null;if(F!==f.NodeType.Document&&F!==f.NodeType.DocumentFragment&&F!==f.NodeType.Element)throw new o.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+D.nodeName+".");if(y.tree_isHostIncludingAncestorOf(D,E,!0))throw new o.HierarchyRequestError("The node to be inserted cannot be an inclusive ancestor of parent node. Node is "+E.nodeName+", parent node is "+D.nodeName+".");if(b!==null&&b._parent!==D)throw new o.NotFoundError("The reference child node cannot be found under parent node. Child node is "+b.nodeName+", parent node is "+D.nodeName+".");if(z!==f.NodeType.DocumentFragment&&z!==f.NodeType.DocumentType&&z!==f.NodeType.Element&&z!==f.NodeType.Text&&z!==f.NodeType.ProcessingInstruction&&z!==f.NodeType.CData&&z!==f.NodeType.Comment)throw new o.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+E.nodeName+".");if(z===f.NodeType.Text&&F===f.NodeType.Document)throw new o.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+E.nodeName+".");if(z===f.NodeType.DocumentType&&F!==f.NodeType.Document)throw new o.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+D.nodeName+".");if(F===f.NodeType.Document){if(z===f.NodeType.DocumentFragment){var X=0;try{for(var Y=i(E._children),q=Y.next();!q.done;q=Y.next()){var ee=q.value;if(ee._nodeType===f.NodeType.Element)X++;else if(ee._nodeType===f.NodeType.Text)throw new o.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+ee.nodeName+".")}}catch(j){N={error:j}}finally{try{q&&!q.done&&(R=Y.return)&&R.call(Y)}finally{if(N)throw N.error}}if(X>1)throw new o.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+X+" element nodes.");if(X===1){try{for(var re=i(D._children),ie=re.next();!ie.done;ie=re.next())if(ie.value._nodeType===f.NodeType.Element)throw new o.HierarchyRequestError("The document node already has a document element node.")}catch(j){M={error:j}}finally{try{ie&&!ie.done&&(A=re.return)&&A.call(re)}finally{if(M)throw M.error}}if(b){if(H===f.NodeType.DocumentType)throw new o.HierarchyRequestError("Cannot insert an element node before a document type node.");for(var te=b._nextSibling;te;){if(te._nodeType===f.NodeType.DocumentType)throw new o.HierarchyRequestError("Cannot insert an element node before a document type node.");te=te._nextSibling}}}}else if(z===f.NodeType.Element){try{for(var L=i(D._children),O=L.next();!O.done;O=L.next())if(O.value._nodeType===f.NodeType.Element)throw new o.HierarchyRequestError("Document already has a document element node. Node is "+E.nodeName+".")}catch(j){I={error:j}}finally{try{O&&!O.done&&($=L.return)&&$.call(L)}finally{if(I)throw I.error}}if(b){if(H===f.NodeType.DocumentType)throw new o.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+E.nodeName+".");for(te=b._nextSibling;te;){if(te._nodeType===f.NodeType.DocumentType)throw new o.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+E.nodeName+".");te=te._nextSibling}}}else if(z===f.NodeType.DocumentType){try{for(var G=i(D._children),V=G.next();!V.done;V=G.next())if(V.value._nodeType===f.NodeType.DocumentType)throw new o.HierarchyRequestError("Document already has a document type node. Node is "+E.nodeName+".")}catch(j){U={error:j}}finally{try{V&&!V.done&&(B=G.return)&&B.call(G)}finally{if(U)throw U.error}}if(b)for(var P=b._previousSibling;P;){if(P._nodeType===f.NodeType.Element)throw new o.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+E.nodeName+".");P=P._previousSibling}else for(P=D._firstChild;P;){if(P._nodeType===f.NodeType.Element)throw new o.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+E.nodeName+".");P=P._nextSibling}}}}function T(E,D,b){C(E,D,b);var N=b;return N===E&&(N=E._nextSibling),x.document_adopt(E,D._nodeDocument),w(E,D,N),E}function w(E,D,b,N){var R,M;if(b!==null||E._nodeType===f.NodeType.DocumentFragment){var A=E._nodeType===f.NodeType.DocumentFragment?E._children.size:1;if(b!==null&&c.dom.rangeList.size!==0){var I=y.tree_index(b);try{for(var $=i(c.dom.rangeList),U=$.next();!U.done;U=$.next()){var B=U.value;B._start[0]===D&&B._start[1]>I&&(B._start[1]+=A),B._end[0]===D&&B._end[1]>I&&(B._end[1]+=A)}}catch(ie){R={error:ie}}finally{try{U&&!U.done&&(M=$.return)&&M.call($)}finally{if(R)throw R.error}}}var F=E._nodeType===f.NodeType.DocumentFragment?new(Array.bind.apply(Array,u([void 0],E._children))):[E];if(E._nodeType===f.NodeType.DocumentFragment)for(;E._firstChild;)_(E._firstChild,E,!0);c.dom.features.mutationObservers&&E._nodeType===f.NodeType.DocumentFragment&&v.observer_queueTreeMutationRecord(E,[],F,null,null);for(var z=b?b._previousSibling:D._lastChild,H=b===null?-1:y.tree_index(b),X=0;X<F.length;X++){var Y=F[X];if(l.Guard.isElementNode(Y)&&(l.Guard.isDocumentNode(D)&&(D._documentElement=Y),Y._nodeDocument._hasNamespaces||Y._namespace===null&&Y._namespacePrefix===null||(Y._nodeDocument._hasNamespaces=!0)),Y._parent=D,b===null?p.set.append(D._children,Y):(p.set.insert(D._children,Y,H),H++),D._firstChild===null)Y._previousSibling=null,Y._nextSibling=null,D._firstChild=Y,D._lastChild=Y;else{var q=b?b._previousSibling:D._lastChild,ee=b||null;Y._previousSibling=q,Y._nextSibling=ee,q&&(q._nextSibling=Y),ee&&(ee._previousSibling=Y),q||(D._firstChild=Y),ee||(D._lastChild=Y)}c.dom.features.slots&&D._shadowRoot!==null&&l.Guard.isSlotable(Y)&&S.shadowTree_assignASlot(Y),c.dom.features.steps&&l.Guard.isTextNode(Y)&&g.dom_runChildTextContentChangeSteps(D),c.dom.features.slots&&l.Guard.isShadowRoot(y.tree_rootNode(D))&&l.Guard.isSlot(D)&&h.isEmpty(D._assignedNodes)&&S.shadowTree_signalASlotChange(D),c.dom.features.slots&&S.shadowTree_assignSlotablesForATree(y.tree_rootNode(Y));for(var re=y.tree_getFirstDescendantNode(Y,!0,!0);re!==null;)c.dom.features.steps&&g.dom_runInsertionSteps(re),c.dom.features.customElements&&l.Guard.isElementNode(re)&&S.shadowTree_isConnected(re)&&(l.Guard.isCustomElementNode(re)?d.customElement_enqueueACustomElementCallbackReaction(re,"connectedCallback",[]):d.customElement_tryToUpgrade(re)),re=y.tree_getNextDescendantNode(Y,re,!0,!0)}c.dom.features.mutationObservers&&(N||v.observer_queueTreeMutationRecord(D,F,[],z,b))}else(function(ie,te,L){var O=te._lastChild;if(l.Guard.isElementNode(ie)&&(l.Guard.isDocumentNode(te)&&(te._documentElement=ie),ie._nodeDocument._hasNamespaces||ie._namespace===null&&ie._namespacePrefix===null||(ie._nodeDocument._hasNamespaces=!0)),ie._parent=te,te._children.add(ie),te._firstChild===null)ie._previousSibling=null,ie._nextSibling=null,te._firstChild=ie,te._lastChild=ie;else{var G=te._lastChild;ie._previousSibling=G,ie._nextSibling=null,G&&(G._nextSibling=ie),G||(te._firstChild=ie),te._lastChild=ie}c.dom.features.slots&&te._shadowRoot!==null&&l.Guard.isSlotable(ie)&&S.shadowTree_assignASlot(ie),c.dom.features.steps&&l.Guard.isTextNode(ie)&&g.dom_runChildTextContentChangeSteps(te),c.dom.features.slots&&l.Guard.isShadowRoot(y.tree_rootNode(te))&&l.Guard.isSlot(te)&&h.isEmpty(te._assignedNodes)&&S.shadowTree_signalASlotChange(te),c.dom.features.slots&&S.shadowTree_assignSlotablesForATree(y.tree_rootNode(ie)),c.dom.features.steps&&g.dom_runInsertionSteps(ie),c.dom.features.customElements&&l.Guard.isElementNode(ie)&&S.shadowTree_isConnected(ie)&&(l.Guard.isCustomElementNode(ie)?d.customElement_enqueueACustomElementCallbackReaction(ie,"connectedCallback",[]):d.customElement_tryToUpgrade(ie)),c.dom.features.mutationObservers&&(L||v.observer_queueTreeMutationRecord(te,[ie],[],O,null))})(E,D,N)}function _(E,D,b){var N,R,M,A,I,$,U,B;if(c.dom.rangeList.size!==0){var F=y.tree_index(E);try{for(var z=i(c.dom.rangeList),H=z.next();!H.done;H=z.next()){var X=H.value;y.tree_isDescendantOf(E,X._start[0],!0)&&(X._start=[D,F]),y.tree_isDescendantOf(E,X._end[0],!0)&&(X._end=[D,F]),X._start[0]===D&&X._start[1]>F&&X._start[1]--,X._end[0]===D&&X._end[1]>F&&X._end[1]--}}catch(ne){N={error:ne}}finally{try{H&&!H.done&&(R=z.return)&&R.call(z)}finally{if(N)throw N.error}}try{for(var Y=i(c.dom.rangeList),q=Y.next();!q.done;q=Y.next())(X=q.value)._start[0]===D&&X._start[1]>F&&(X._start[1]-=1),X._end[0]===D&&X._end[1]>F&&(X._end[1]-=1)}catch(ne){M={error:ne}}finally{try{q&&!q.done&&(A=Y.return)&&A.call(Y)}finally{if(M)throw M.error}}}if(c.dom.features.steps)try{for(var ee=i(m.nodeIterator_iteratorList()),re=ee.next();!re.done;re=ee.next()){var ie=re.value;ie._root._nodeDocument===E._nodeDocument&&g.dom_runNodeIteratorPreRemovingSteps(ie,E)}}catch(ne){I={error:ne}}finally{try{re&&!re.done&&($=ee.return)&&$.call(ee)}finally{if(I)throw I.error}}var te=E._previousSibling,L=E._nextSibling;l.Guard.isDocumentNode(D)&&l.Guard.isElementNode(E)&&(D._documentElement=null),E._parent=null,D._children.delete(E);var O=E._previousSibling,G=E._nextSibling;E._previousSibling=null,E._nextSibling=null,O&&(O._nextSibling=G),G&&(G._previousSibling=O),O||(D._firstChild=G),G||(D._lastChild=O),c.dom.features.slots&&l.Guard.isSlotable(E)&&E._assignedSlot!==null&&S.shadowTree_isAssigned(E)&&S.shadowTree_assignSlotables(E._assignedSlot),c.dom.features.slots&&l.Guard.isShadowRoot(y.tree_rootNode(D))&&l.Guard.isSlot(D)&&h.isEmpty(D._assignedNodes)&&S.shadowTree_signalASlotChange(D),c.dom.features.slots&&y.tree_getFirstDescendantNode(E,!0,!1,function(ne){return l.Guard.isSlot(ne)})!==null&&(S.shadowTree_assignSlotablesForATree(y.tree_rootNode(D)),S.shadowTree_assignSlotablesForATree(E)),c.dom.features.steps&&g.dom_runRemovingSteps(E,D),c.dom.features.customElements&&l.Guard.isCustomElementNode(E)&&d.customElement_enqueueACustomElementCallbackReaction(E,"disconnectedCallback",[]);for(var V=y.tree_getFirstDescendantNode(E,!1,!0);V!==null;)c.dom.features.steps&&g.dom_runRemovingSteps(V,E),c.dom.features.customElements&&l.Guard.isCustomElementNode(V)&&d.customElement_enqueueACustomElementCallbackReaction(V,"disconnectedCallback",[]),V=y.tree_getNextDescendantNode(E,V,!1,!0);if(c.dom.features.mutationObservers)for(var P=y.tree_getFirstAncestorNode(D,!0);P!==null;){try{for(var j=(U=void 0,i(P._registeredObserverList)),W=j.next();!W.done;W=j.next()){var Z=W.value;Z.options.subtree&&E._registeredObserverList.push({observer:Z.observer,options:Z.options,source:Z})}}catch(ne){U={error:ne}}finally{try{W&&!W.done&&(B=j.return)&&B.call(j)}finally{if(U)throw U.error}}P=y.tree_getNextAncestorNode(D,P,!0)}c.dom.features.mutationObservers&&(b||v.observer_queueTreeMutationRecord(D,[],[E],te,L)),c.dom.features.steps&&l.Guard.isTextNode(E)&&g.dom_runChildTextContentChangeSteps(D)}n.mutation_ensurePreInsertionValidity=C,n.mutation_preInsert=T,n.mutation_insert=w,n.mutation_append=function(E,D){return T(E,D,null)},n.mutation_replace=function(E,D,b){var N,R,M,A,I,$,U,B;if(b._nodeType!==f.NodeType.Document&&b._nodeType!==f.NodeType.DocumentFragment&&b._nodeType!==f.NodeType.Element)throw new o.HierarchyRequestError("Only document, document fragment and element nodes can contain child nodes. Parent node is "+b.nodeName+".");if(y.tree_isHostIncludingAncestorOf(b,D,!0))throw new o.HierarchyRequestError("The node to be inserted cannot be an ancestor of parent node. Node is "+D.nodeName+", parent node is "+b.nodeName+".");if(E._parent!==b)throw new o.NotFoundError("The reference child node cannot be found under parent node. Child node is "+E.nodeName+", parent node is "+b.nodeName+".");if(D._nodeType!==f.NodeType.DocumentFragment&&D._nodeType!==f.NodeType.DocumentType&&D._nodeType!==f.NodeType.Element&&D._nodeType!==f.NodeType.Text&&D._nodeType!==f.NodeType.ProcessingInstruction&&D._nodeType!==f.NodeType.CData&&D._nodeType!==f.NodeType.Comment)throw new o.HierarchyRequestError("Only document fragment, document type, element, text, processing instruction, cdata section or comment nodes can be inserted. Node is "+D.nodeName+".");if(D._nodeType===f.NodeType.Text&&b._nodeType===f.NodeType.Document)throw new o.HierarchyRequestError("Cannot insert a text node as a child of a document node. Node is "+D.nodeName+".");if(D._nodeType===f.NodeType.DocumentType&&b._nodeType!==f.NodeType.Document)throw new o.HierarchyRequestError("A document type node can only be inserted under a document node. Parent node is "+b.nodeName+".");if(b._nodeType===f.NodeType.Document){if(D._nodeType===f.NodeType.DocumentFragment){var F=0;try{for(var z=i(D._children),H=z.next();!H.done;H=z.next()){var X=H.value;if(X._nodeType===f.NodeType.Element)F++;else if(X._nodeType===f.NodeType.Text)throw new o.HierarchyRequestError("Cannot insert text a node as a child of a document node. Node is "+X.nodeName+".")}}catch(Z){N={error:Z}}finally{try{H&&!H.done&&(R=z.return)&&R.call(z)}finally{if(N)throw N.error}}if(F>1)throw new o.HierarchyRequestError("A document node can only have one document element node. Document fragment to be inserted has "+F+" element nodes.");if(F===1){try{for(var Y=i(b._children),q=Y.next();!q.done;q=Y.next())if((O=q.value)._nodeType===f.NodeType.Element&&O!==E)throw new o.HierarchyRequestError("The document node already has a document element node.")}catch(Z){M={error:Z}}finally{try{q&&!q.done&&(A=Y.return)&&A.call(Y)}finally{if(M)throw M.error}}for(var ee=E._nextSibling;ee;){if(ee._nodeType===f.NodeType.DocumentType)throw new o.HierarchyRequestError("Cannot insert an element node before a document type node.");ee=ee._nextSibling}}}else if(D._nodeType===f.NodeType.Element){try{for(var re=i(b._children),ie=re.next();!ie.done;ie=re.next())if((O=ie.value)._nodeType===f.NodeType.Element&&O!==E)throw new o.HierarchyRequestError("Document already has a document element node. Node is "+D.nodeName+".")}catch(Z){I={error:Z}}finally{try{ie&&!ie.done&&($=re.return)&&$.call(re)}finally{if(I)throw I.error}}for(ee=E._nextSibling;ee;){if(ee._nodeType===f.NodeType.DocumentType)throw new o.HierarchyRequestError("Cannot insert an element node before a document type node. Node is "+D.nodeName+".");ee=ee._nextSibling}}else if(D._nodeType===f.NodeType.DocumentType){try{for(var te=i(b._children),L=te.next();!L.done;L=te.next()){var O;if((O=L.value)._nodeType===f.NodeType.DocumentType&&O!==E)throw new o.HierarchyRequestError("Document already has a document type node. Node is "+D.nodeName+".")}}catch(Z){U={error:Z}}finally{try{L&&!L.done&&(B=te.return)&&B.call(te)}finally{if(U)throw U.error}}for(var G=E._previousSibling;G;){if(G._nodeType===f.NodeType.Element)throw new o.HierarchyRequestError("Cannot insert a document type node before an element node. Node is "+D.nodeName+".");G=G._previousSibling}}}var V=E._nextSibling;V===D&&(V=D._nextSibling);var P=E._previousSibling;x.document_adopt(D,b._nodeDocument);var j=[];E._parent!==null&&(j.push(E),_(E,E._parent,!0));var W=[];return D._nodeType===f.NodeType.DocumentFragment?W=Array.from(D._children):W.push(D),w(D,b,V,!0),c.dom.features.mutationObservers&&v.observer_queueTreeMutationRecord(b,W,j,P,V),E},n.mutation_replaceAll=function(E,D){var b,N;E!==null&&x.document_adopt(E,D._nodeDocument);var R=Array.from(D._children),M=[];E&&E._nodeType===f.NodeType.DocumentFragment?M=Array.from(E._children):E!==null&&M.push(E);try{for(var A=i(R),I=A.next();!I.done;I=A.next())_(I.value,D,!0)}catch($){b={error:$}}finally{try{I&&!I.done&&(N=A.return)&&N.call(A)}finally{if(b)throw b.error}}E!==null&&w(E,D,null,!0),c.dom.features.mutationObservers&&v.observer_queueTreeMutationRecord(D,M,R,null,null)},n.mutation_preRemove=function(E,D){if(E._parent!==D)throw new o.NotFoundError("The child node cannot be found under parent node. Child node is "+E.nodeName+", parent node is "+D.nodeName+".");return _(E,D),E},n.mutation_remove=_},function(a,n,r){function i(s){return s==null}a.exports.isNothing=i,a.exports.isObject=function(s){return typeof s=="object"&&s!==null},a.exports.toArray=function(s){return Array.isArray(s)?s:i(s)?[]:[s]},a.exports.repeat=function(s,u){var c,o="";for(c=0;c<u;c+=1)o+=s;return o},a.exports.isNegativeZero=function(s){return s===0&&Number.NEGATIVE_INFINITY===1/s},a.exports.extend=function(s,u){var c,o,f,l;if(u)for(c=0,o=(l=Object.keys(u)).length;c<o;c+=1)s[f=l[c]]=u[f];return s}},function(a,n,r){var i=r(38),s=r(53),u=r(10);function c(f,l,h){var p=[];return f.include.forEach(function(d){h=c(d,l,h)}),f[l].forEach(function(d){h.forEach(function(y,m){y.tag===d.tag&&y.kind===d.kind&&p.push(m)}),h.push(d)}),h.filter(function(d,y){return p.indexOf(y)===-1})}function o(f){this.include=f.include||[],this.implicit=f.implicit||[],this.explicit=f.explicit||[],this.implicit.forEach(function(l){if(l.loadKind&&l.loadKind!=="scalar")throw new s("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=c(this,"implicit",[]),this.compiledExplicit=c(this,"explicit",[]),this.compiledTypeMap=function(){var l,h,p={scalar:{},sequence:{},mapping:{},fallback:{}};function d(y){p[y.kind][y.tag]=p.fallback[y.tag]=y}for(l=0,h=arguments.length;l<h;l+=1)arguments[l].forEach(d);return p}(this.compiledImplicit,this.compiledExplicit)}o.DEFAULT=null,o.create=function(){var f,l;switch(arguments.length){case 1:f=o.DEFAULT,l=arguments[0];break;case 2:f=arguments[0],l=arguments[1];break;default:throw new s("Wrong number of arguments for Schema.create function")}if(f=i.toArray(f),l=i.toArray(l),!f.every(function(h){return h instanceof o}))throw new s("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!l.every(function(h){return h instanceof u}))throw new s("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new o({include:f,explicit:l})},a.exports=o},function(a,n){a.exports=function(r,i){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:i}}},function(a,n,r){var i=r(8),s=r(42),u="".split;a.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(c){return s(c)=="String"?u.call(c,""):Object(c)}:Object},function(a,n){var r={}.toString;a.exports=function(i){return r.call(i).slice(8,-1)}},function(a,n,r){var i,s,u,c=r(186),o=r(11),f=r(13),l=r(21),h=r(14),p=r(57),d=r(45),y=o.WeakMap;if(c){var m=new y,S=m.get,v=m.has,g=m.set;i=function(C,T){return g.call(m,C,T),T},s=function(C){return S.call(m,C)||{}},u=function(C){return v.call(m,C)}}else{var x=p("state");d[x]=!0,i=function(C,T){return l(C,x,T),T},s=function(C){return h(C,x)?C[x]:{}},u=function(C){return h(C,x)}}a.exports={set:i,get:s,has:u,enforce:function(C){return u(C)?s(C):i(C,{})},getterFor:function(C){return function(T){var w;if(!f(T)||(w=s(T)).type!==C)throw TypeError("Incompatible receiver, "+C+" required");return w}}}},function(a,n){a.exports=!1},function(a,n){a.exports={}},function(a,n,r){var i=r(120),s=r(11),u=function(c){return typeof c=="function"?c:void 0};a.exports=function(c,o){return arguments.length<2?u(i[c])||u(s[c]):i[c]&&i[c][o]||s[c]&&s[c][o]}},function(a,n){var r=Math.ceil,i=Math.floor;a.exports=function(s){return isNaN(s=+s)?0:(s>0?i:r)(s)}},function(a,n,r){var i=r(8);a.exports=function(s,u){var c=[][s];return!!c&&i(function(){c.call(null,u||function(){throw 1},1)})}},function(a,n){a.exports={}},function(a,n,r){r(31),r(32),r(33),r(220),r(64),r(19),r(65),r(20),r(68),r(66),r(92),r(144),r(22),r(94),r(23);var i=this&&this.__values||function(d){var y=typeof Symbol=="function"&&Symbol.iterator,m=y&&d[y],S=0;if(m)return m.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&S>=d.length&&(d=void 0),{value:d&&d[S++],done:!d}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(d,y){var m=typeof Symbol=="function"&&d[Symbol.iterator];if(!m)return d;var S,v,g=m.call(d),x=[];try{for(;(y===void 0||y-- >0)&&!(S=g.next()).done;)x.push(S.value)}catch(C){v={error:C}}finally{try{S&&!S.done&&(m=g.return)&&m.call(g)}finally{if(v)throw v.error}}return x},u=this&&this.__spread||function(){for(var d=[],y=0;y<arguments.length;y++)d=d.concat(s(arguments[y]));return d};Object.defineProperty(n,"__esModule",{value:!0});var c=r(2),o=r(69),f=r(95),l=r(7),h=r(0),p=function(){function d(y){this.level=0,this._builderOptions=y}return d.prototype.declaration=function(y,m,S){},d.prototype.docType=function(y,m,S){},d.prototype.comment=function(y){},d.prototype.text=function(y){},d.prototype.instruction=function(y,m){},d.prototype.cdata=function(y){},d.prototype.openTagBegin=function(y){},d.prototype.openTagEnd=function(y,m,S){},d.prototype.closeTag=function(y){},d.prototype.attributes=function(y){var m,S;try{for(var v=i(y),g=v.next();!g.done;g=v.next()){var x=g.value;this.attribute(x[1]===null?x[2]:x[1]+":"+x[2],x[3])}}catch(C){m={error:C}}finally{try{g&&!g.done&&(S=v.return)&&S.call(v)}finally{if(m)throw m.error}}},d.prototype.attribute=function(y,m){},d.prototype.beginElement=function(y){},d.prototype.endElement=function(y){},d.prototype.serializeNode=function(y,m){var S=y._nodeDocument!==void 0&&y._nodeDocument._hasNamespaces;if(this.level=0,this.currentNode=y,S){var v=new f.NamespacePrefixMap;v.set("xml",l.namespace.XML),this._serializeNodeNS(y,null,v,{value:1},m)}else this._serializeNode(y,m)},d.prototype._serializeNodeNS=function(y,m,S,v,g){switch(this.currentNode=y,y.nodeType){case c.NodeType.Element:this._serializeElementNS(y,m,S,v,g);break;case c.NodeType.Document:this._serializeDocumentNS(y,m,S,v,g);break;case c.NodeType.Comment:this._serializeComment(y,g);break;case c.NodeType.Text:this._serializeText(y,g);break;case c.NodeType.DocumentFragment:this._serializeDocumentFragmentNS(y,m,S,v,g);break;case c.NodeType.DocumentType:this._serializeDocumentType(y,g);break;case c.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(y,g);break;case c.NodeType.CData:this._serializeCData(y,g);break;default:throw new Error("Unknown node type: "+y.nodeType)}},d.prototype._serializeNode=function(y,m){switch(this.currentNode=y,y.nodeType){case c.NodeType.Element:this._serializeElement(y,m);break;case c.NodeType.Document:this._serializeDocument(y,m);break;case c.NodeType.Comment:this._serializeComment(y,m);break;case c.NodeType.Text:this._serializeText(y,m);break;case c.NodeType.DocumentFragment:this._serializeDocumentFragment(y,m);break;case c.NodeType.DocumentType:this._serializeDocumentType(y,m);break;case c.NodeType.ProcessingInstruction:this._serializeProcessingInstruction(y,m);break;case c.NodeType.CData:this._serializeCData(y,m);break;default:throw new Error("Unknown node type: "+y.nodeType)}},d.prototype._serializeElementNS=function(y,m,S,v,g){var x,C,T=[];if(g&&(y.localName.indexOf(":")!==-1||!h.xml_isName(y.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var w="",_=!1,E=!1,D=S.copy(),b={},N=this._recordNamespaceInformation(y,D,b),R=m,M=y.namespaceURI;if(R===M)N!==null&&(E=!0),w=M===l.namespace.XML?"xml:"+y.localName:y.localName,this.beginElement(w),this.openTagBegin(w);else{var A=y.prefix,I=null;if(A===null&&M===N||(I=D.get(A,M)),A==="xmlns"){if(g)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");I=A}I!==null?(w=I+":"+y.localName,N!==null&&N!==l.namespace.XML&&(R=N||null),this.beginElement(w),this.openTagBegin(w)):A!==null?(A in b&&(A=this._generatePrefix(M,D,v)),D.set(A,M),w+=A+":"+y.localName,this.beginElement(w),this.openTagBegin(w),T.push([null,"xmlns",A,this._serializeAttributeValue(M,g)]),N!==null&&(R=N||null)):N===null||N!==null&&N!==M?(E=!0,w+=y.localName,R=M,this.beginElement(w),this.openTagBegin(w),T.push([null,null,"xmlns",this._serializeAttributeValue(M,g)])):(w+=y.localName,R=M,this.beginElement(w),this.openTagBegin(w))}T.push.apply(T,u(this._serializeAttributesNS(y,D,v,b,E,g))),this.attributes(T);var $=M===l.namespace.HTML;if($&&y.childNodes.length===0&&d._VoidElementNames.has(y.localName)?(this.openTagEnd(w,!0,!0),this.endElement(w),_=!0):$||y.childNodes.length!==0?this.openTagEnd(w,!1,!1):(this.openTagEnd(w,!0,!1),this.endElement(w),_=!0),!_){if(!($&&y.localName==="template"))try{for(var U=i(y.childNodes),B=U.next();!B.done;B=U.next()){var F=B.value;this.level++,this._serializeNodeNS(F,R,D,v,g),this.level--}}catch(z){x={error:z}}finally{try{B&&!B.done&&(C=U.return)&&C.call(U)}finally{if(x)throw x.error}}this.closeTag(w),this.endElement(w)}},d.prototype._serializeElement=function(y,m){var S,v;if(m&&(y.localName.indexOf(":")!==-1||!h.xml_isName(y.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var g=!1,x=y.localName;this.beginElement(x),this.openTagBegin(x);var C=this._serializeAttributes(y,m);if(this.attributes(C),y.hasChildNodes()?this.openTagEnd(x,!1,!1):(this.openTagEnd(x,!0,!1),this.endElement(x),g=!0),!g){try{for(var T=i(y._children),w=T.next();!w.done;w=T.next()){var _=w.value;this.level++,this._serializeNode(_,m),this.level--}}catch(E){S={error:E}}finally{try{w&&!w.done&&(v=T.return)&&v.call(T)}finally{if(S)throw S.error}}this.closeTag(x),this.endElement(x)}},d.prototype._serializeDocumentNS=function(y,m,S,v,g){var x,C;if(g&&y.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var T=i(y.childNodes),w=T.next();!w.done;w=T.next()){var _=w.value;this._serializeNodeNS(_,m,S,v,g)}}catch(E){x={error:E}}finally{try{w&&!w.done&&(C=T.return)&&C.call(T)}finally{if(x)throw x.error}}},d.prototype._serializeDocument=function(y,m){var S,v;if(m&&y.documentElement===null)throw new Error("Missing document element (well-formed required).");try{for(var g=i(y._children),x=g.next();!x.done;x=g.next()){var C=x.value;this._serializeNode(C,m)}}catch(T){S={error:T}}finally{try{x&&!x.done&&(v=g.return)&&v.call(g)}finally{if(S)throw S.error}}},d.prototype._serializeComment=function(y,m){if(m&&(!h.xml_isLegalChar(y.data)||y.data.indexOf("--")!==-1||y.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");this.comment(y.data)},d.prototype._serializeText=function(y,m){if(m&&!h.xml_isLegalChar(y.data))throw new Error("Text data contains invalid characters (well-formed required).");var S=y.data.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");this.text(S)},d.prototype._serializeDocumentFragmentNS=function(y,m,S,v,g){var x,C;try{for(var T=i(y.childNodes),w=T.next();!w.done;w=T.next()){var _=w.value;this._serializeNodeNS(_,m,S,v,g)}}catch(E){x={error:E}}finally{try{w&&!w.done&&(C=T.return)&&C.call(T)}finally{if(x)throw x.error}}},d.prototype._serializeDocumentFragment=function(y,m){var S,v;try{for(var g=i(y._children),x=g.next();!x.done;x=g.next()){var C=x.value;this._serializeNode(C,m)}}catch(T){S={error:T}}finally{try{x&&!x.done&&(v=g.return)&&v.call(g)}finally{if(S)throw S.error}}},d.prototype._serializeDocumentType=function(y,m){if(m&&!h.xml_isPubidChar(y.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(m&&(!h.xml_isLegalChar(y.systemId)||y.systemId.indexOf('"')!==-1&&y.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");this.docType(y.name,y.publicId,y.systemId)},d.prototype._serializeProcessingInstruction=function(y,m){if(m&&(y.target.indexOf(":")!==-1||/^xml$/i.test(y.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(m&&(!h.xml_isLegalChar(y.data)||y.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");this.instruction(y.target,y.data)},d.prototype._serializeCData=function(y,m){if(m&&y.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");this.cdata(y.data)},d.prototype._serializeAttributesNS=function(y,m,S,v,g,x){var C,T,w=[],_=x?new o.LocalNameSet:void 0;try{for(var E=i(y.attributes),D=E.next();!D.done;D=E.next()){var b=D.value;if(x||g||b.namespaceURI!==null){if(x&&_&&_.has(b.namespaceURI,b.localName))throw new Error("Element contains duplicate attributes (well-formed required).");x&&_&&_.set(b.namespaceURI,b.localName);var N=b.namespaceURI,R=null;if(N!==null)if(R=m.get(b.prefix,N),N===l.namespace.XMLNS){if(b.value===l.namespace.XML||b.prefix===null&&g||b.prefix!==null&&(!(b.localName in v)||v[b.localName]!==b.value)&&m.has(b.localName,b.value))continue;if(x&&b.value===l.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(x&&b.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");b.prefix==="xmlns"&&(R="xmlns")}else R===null&&(R=b.prefix===null||m.hasPrefix(b.prefix)&&!m.has(b.prefix,N)?this._generatePrefix(N,m,S):b.prefix,w.push([null,"xmlns",R,this._serializeAttributeValue(N,x)]));if(x&&(b.localName.indexOf(":")!==-1||!h.xml_isName(b.localName)||b.localName==="xmlns"&&N===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");w.push([N,R,b.localName,this._serializeAttributeValue(b.value,x)])}else w.push([null,null,b.localName,this._serializeAttributeValue(b.value,x)])}}catch(M){C={error:M}}finally{try{D&&!D.done&&(T=E.return)&&T.call(E)}finally{if(C)throw C.error}}return w},d.prototype._serializeAttributes=function(y,m){var S,v,g=[],x=m?{}:void 0;try{for(var C=i(y.attributes),T=C.next();!T.done;T=C.next()){var w=T.value;if(m){if(m&&x&&w.localName in x)throw new Error("Element contains duplicate attributes (well-formed required).");if(m&&x&&(x[w.localName]=!0),m&&(w.localName.indexOf(":")!==-1||!h.xml_isName(w.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");g.push([null,null,w.localName,this._serializeAttributeValue(w.value,m)])}else g.push([null,null,w.localName,this._serializeAttributeValue(w.value,m)])}}catch(_){S={error:_}}finally{try{T&&!T.done&&(v=C.return)&&v.call(C)}finally{if(S)throw S.error}}return g},d.prototype._recordNamespaceInformation=function(y,m,S){var v,g,x=null;try{for(var C=i(y.attributes),T=C.next();!T.done;T=C.next()){var w=T.value,_=w.namespaceURI,E=w.prefix;if(_===l.namespace.XMLNS){if(E===null){x=w.value;continue}var D=w.localName,b=w.value;if(b===l.namespace.XML||(b===""&&(b=null),m.has(D,b)))continue;m.set(D,b),S[D]=b||""}}}catch(N){v={error:N}}finally{try{T&&!T.done&&(g=C.return)&&g.call(C)}finally{if(v)throw v.error}}return x},d.prototype._generatePrefix=function(y,m,S){var v="ns"+S.value.toString();return S.value++,m.set(v,y),v},d.prototype._serializeAttributeValue=function(y,m){if(m&&y!==null&&!h.xml_isLegalChar(y))throw new Error("Invalid characters in attribute value.");return y===null?"":y.replace(/(?!&([^&;]*);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},d._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),d}();n.BaseWriter=p},function(a,n,r){var i=this&&this.__values||function(m){var S=typeof Symbol=="function"&&Symbol.iterator,v=S&&m[S],g=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&g>=m.length&&(m=void 0),{value:m&&m[g++],done:!m}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(m,S){var v=typeof Symbol=="function"&&m[Symbol.iterator];if(!v)return m;var g,x,C=v.call(m),T=[];try{for(;(S===void 0||S-- >0)&&!(g=C.next()).done;)T.push(g.value)}catch(w){x={error:w}}finally{try{g&&!g.done&&(v=C.return)&&v.call(C)}finally{if(x)throw x.error}}return T};Object.defineProperty(n,"__esModule",{value:!0});var u=r(6),c=r(3),o=r(7),f=r(29),l=r(17),h=r(97);function p(){var m=u.dom.window;m._mutationObserverMicrotaskQueued||(m._mutationObserverMicrotaskQueued=!0,Promise.resolve().then(function(){d()}))}function d(){var m,S,v,g,x=u.dom.window;x._mutationObserverMicrotaskQueued=!1;var C=o.set.clone(x._mutationObservers),T=o.set.clone(x._signalSlots);o.set.empty(x._signalSlots);var w=function(R){var M=o.list.clone(R._recordQueue);o.list.empty(R._recordQueue);for(var A=0;A<R._nodeList.length;A++){var I=R._nodeList[A];o.list.remove(I._registeredObserverList,function($){return c.Guard.isTransientRegisteredObserver($)&&$.observer===R})}if(!o.list.isEmpty(M))try{R._callback.call(R,M,R)}catch{}};try{for(var _=i(C),E=_.next();!E.done;E=_.next())w(E.value)}catch(R){m={error:R}}finally{try{E&&!E.done&&(S=_.return)&&S.call(_)}finally{if(m)throw m.error}}if(u.dom.features.slots)try{for(var D=i(T),b=D.next();!b.done;b=D.next()){var N=b.value;h.event_fireAnEvent("slotchange",N,void 0,{bubbles:!0})}}catch(R){v={error:R}}finally{try{b&&!b.done&&(g=D.return)&&g.call(D)}finally{if(v)throw v.error}}}function y(m,S,v,g,x,C,T,w,_){for(var E,D,b=new Map,N=l.tree_getFirstAncestorNode(S,!0);N!==null;){for(var R=0;R<N._registeredObserverList.length;R++){var M=N._registeredObserverList[R],A=M.options;if((N===S||A.subtree)&&(m!=="attributes"||A.attributes)&&(m!=="attributes"||!A.attributeFilter||A.attributeFilter.indexOf(v||"")&&g===null)&&(m!=="characterData"||A.characterData)&&(m!=="childList"||A.childList)){var I=M.observer;b.has(I)||b.set(I,null),(m==="attributes"&&A.attributeOldValue||m==="characterData"&&A.characterDataOldValue)&&b.set(I,x)}}N=l.tree_getNextAncestorNode(S,N,!0)}try{for(var $=i(b),U=$.next();!U.done;U=$.next()){var B=s(U.value,2),F=B[0],z=B[1],H=f.create_mutationRecord(m,S,f.create_nodeListStatic(S,C),f.create_nodeListStatic(S,T),w,_,v,g,z);F._recordQueue.push(H)}}catch(X){E={error:X}}finally{try{U&&!U.done&&(D=$.return)&&D.call($)}finally{if(E)throw E.error}}p()}n.observer_queueAMutationObserverMicrotask=p,n.observer_notifyMutationObservers=d,n.observer_queueMutationRecord=y,n.observer_queueTreeMutationRecord=function(m,S,v,g,x){y("childList",m,null,null,null,S,v,g,x)},n.observer_queueAttributeMutationRecord=function(m,S,v,g){y("attributes",m,S,v,g,[],[],null,null)}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(6),s=r(7),u=r(3),c=r(9),o=r(29),f=r(73),l=r(51),h=r(30),p=r(37),d=r(106);function y(C,T,w){i.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(T,C._localName,C._namespace,C._value),i.dom.features.customElements&&u.Guard.isCustomElementNode(T)&&f.customElement_enqueueACustomElementCallbackReaction(T,"attributeChangedCallback",[C._localName,C._value,w,C._namespace]),i.dom.features.steps&&h.dom_runAttributeChangeSteps(T,C._localName,C._value,w,C._namespace),C._value=w}function m(C,T){i.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(T,C._localName,C._namespace,null),i.dom.features.customElements&&u.Guard.isCustomElementNode(T)&&f.customElement_enqueueACustomElementCallbackReaction(T,"attributeChangedCallback",[C._localName,null,C._value,C._namespace]),i.dom.features.steps&&h.dom_runAttributeChangeSteps(T,C._localName,null,C._value,C._namespace),T._attributeList._asArray().push(C),C._element=T,T._nodeDocument._hasNamespaces||C._namespace===null&&C._namespacePrefix===null&&C._localName!=="xmlns"||(T._nodeDocument._hasNamespaces=!0)}function S(C,T){i.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(T,C._localName,C._namespace,C._value),i.dom.features.customElements&&u.Guard.isCustomElementNode(T)&&f.customElement_enqueueACustomElementCallbackReaction(T,"attributeChangedCallback",[C._localName,C._value,null,C._namespace]),i.dom.features.steps&&h.dom_runAttributeChangeSteps(T,C._localName,C._value,null,C._namespace);var w=T._attributeList._asArray().indexOf(C);T._attributeList._asArray().splice(w,1),C._element=null}function v(C,T,w){i.dom.features.mutationObservers&&l.observer_queueAttributeMutationRecord(w,C._localName,C._namespace,C._value),i.dom.features.customElements&&u.Guard.isCustomElementNode(w)&&f.customElement_enqueueACustomElementCallbackReaction(w,"attributeChangedCallback",[C._localName,C._value,T._value,C._namespace]),i.dom.features.steps&&h.dom_runAttributeChangeSteps(w,C._localName,C._value,T._value,C._namespace);var _=w._attributeList._asArray().indexOf(C);_!==-1&&(w._attributeList._asArray()[_]=T),C._element=null,T._element=w,w._nodeDocument._hasNamespaces||T._namespace===null&&T._namespacePrefix===null&&T._localName!=="xmlns"||(w._nodeDocument._hasNamespaces=!0)}function g(C,T){return T._namespace===s.namespace.HTML&&T._nodeDocument._type==="html"&&(C=C.toLowerCase()),T._attributeList._asArray().find(function(w){return w._qualifiedName===C})||null}function x(C,T,w){var _=C||null;return w._attributeList._asArray().find(function(E){return E._namespace===_&&E._localName===T})||null}n.element_has=function(C,T){return T._attributeList._asArray().indexOf(C)!==-1},n.element_change=y,n.element_append=m,n.element_remove=S,n.element_replace=v,n.element_getAnAttributeByName=g,n.element_getAnAttributeByNamespaceAndLocalName=x,n.element_getAnAttributeValue=function(C,T,w){w===void 0&&(w="");var _=x(w,T,C);return _===null?"":_._value},n.element_setAnAttribute=function(C,T){if(C._element!==null&&C._element!==T)throw new c.InUseAttributeError("This attribute already exists in the document: "+C._qualifiedName+" as a child of "+C._element._qualifiedName+".");var w=x(C._namespace||"",C._localName,T);return w===C?C:(w!==null?v(w,C,T):m(C,T),w)},n.element_setAnAttributeValue=function(C,T,w,_,E){_===void 0&&(_=null),E===void 0&&(E=null);var D=x(E||"",T,C);if(D===null){var b=o.create_attr(C._nodeDocument,T);return b._namespace=E,b._namespacePrefix=_,b._value=w,void m(b,C)}y(D,C,w)},n.element_removeAnAttributeByName=function(C,T){var w=g(C,T);return w!==null&&S(w,T),w},n.element_removeAnAttributeByNamespaceAndLocalName=function(C,T,w){var _=x(C,T,w);return _!==null&&S(_,w),_},n.element_createAnElement=function(C,T,w,_,E,D){_===void 0&&(_=null),E===void 0&&(E=null),D===void 0&&(D=!1);var b=null;if(!i.dom.features.customElements)return(b=o.create_element(C,T,w,_))._customElementState="uncustomized",b._customElementDefinition=null,b._is=E,b;var N=f.customElement_lookUpACustomElementDefinition(C,w,T,E);if(N!==null&&N.name!==N.localName)(b=new(d.document_elementInterface(T,s.namespace.HTML)))._localName=T,b._namespace=s.namespace.HTML,b._namespacePrefix=_,b._customElementState="undefined",b._customElementDefinition=null,b._is=E,b._nodeDocument=C,D?f.customElement_upgrade(N,b):f.customElement_enqueueACustomElementUpgradeReaction(b,N);else if(N!==null)if(D)try{var R=new N.constructor;if(console.assert(R._customElementState!==void 0),console.assert(R._customElementDefinition!==void 0),console.assert(R._namespace===s.namespace.HTML),R._attributeList.length!==0)throw new c.NotSupportedError("Custom element already has attributes.");if(R._children.size!==0)throw new c.NotSupportedError("Custom element already has child nodes.");if(R._parent!==null)throw new c.NotSupportedError("Custom element already has a parent node.");if(R._nodeDocument!==C)throw new c.NotSupportedError("Custom element is already in a document.");if(R._localName!==T)throw new c.NotSupportedError("Custom element has a different local name.");R._namespacePrefix=_,R._is=null}catch{(b=o.create_htmlUnknownElement(C,T,s.namespace.HTML,_))._customElementState="failed",b._customElementDefinition=null,b._is=null}else(b=o.create_htmlElement(C,T,s.namespace.HTML,_))._customElementState="undefined",b._customElementDefinition=null,b._is=null,f.customElement_enqueueACustomElementUpgradeReaction(b,N);else(b=new(d.document_elementInterface(T,w)))._localName=T,b._namespace=w,b._namespacePrefix=_,b._customElementState="uncustomized",b._customElementDefinition=null,b._is=E,b._nodeDocument=C,w!==s.namespace.HTML||E===null&&!f.customElement_isValidCustomElementName(T)||(b._customElementState="undefined");if(b===null)throw new Error("Unable to create element.");return b},n.element_insertAdjacent=function(C,T,w){switch(T.toLowerCase()){case"beforebegin":return C._parent===null?null:p.mutation_preInsert(w,C._parent,C);case"afterbegin":return p.mutation_preInsert(w,C,C._firstChild);case"beforeend":return p.mutation_preInsert(w,C,null);case"afterend":return C._parent===null?null:p.mutation_preInsert(w,C._parent,C._nextSibling);default:throw new c.SyntaxError(`Invalid 'where' argument. "beforebegin", "afterbegin", "beforeend" or "afterend" expected`)}}},function(a,n,r){function i(s,u){Error.call(this),this.name="YAMLException",this.reason=s,this.mark=u,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i.prototype.toString=function(s){var u=this.name+": ";return u+=this.reason||"(unknown reason)",!s&&this.mark&&(u+=" "+this.mark.toString()),u},a.exports=i},function(a,n,r){var i=r(39);a.exports=new i({include:[r(181)],implicit:[r(293),r(294)],explicit:[r(295),r(296),r(297),r(298)]})},function(a,n,r){var i=r(16),s=r(79),u=r(40),c=r(24),o=r(56),f=r(14),l=r(115),h=Object.getOwnPropertyDescriptor;n.f=i?h:function(p,d){if(p=c(p),d=o(d,!0),l)try{return h(p,d)}catch{}if(f(p,d))return u(!s.f.call(p,d),p[d])}},function(a,n,r){var i=r(13);a.exports=function(s,u){if(!i(s))return s;var c,o;if(u&&typeof(c=s.toString)=="function"&&!i(o=c.call(s))||typeof(c=s.valueOf)=="function"&&!i(o=c.call(s))||!u&&typeof(c=s.toString)=="function"&&!i(o=c.call(s)))return o;throw TypeError("Can't convert object to primitive value")}},function(a,n,r){var i=r(81),s=r(58),u=i("keys");a.exports=function(c){return u[c]||(u[c]=s(c))}},function(a,n){var r=0,i=Math.random();a.exports=function(s){return"Symbol("+String(s===void 0?"":s)+")_"+(++r+i).toString(36)}},function(a,n,r){var i=r(42);a.exports=Array.isArray||function(s){return i(s)=="Array"}},function(a,n,r){var i,s=r(18),u=r(188),c=r(84),o=r(45),f=r(189),l=r(116),h=r(57),p=h("IE_PROTO"),d=function(){},y=function(S){return"<script>"+S+"<\/script>"},m=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch{}var S,v;m=i?function(x){x.write(y("")),x.close();var C=x.parentWindow.Object;return x=null,C}(i):((v=l("iframe")).style.display="none",f.appendChild(v),v.src=String("javascript:"),(S=v.contentWindow.document).open(),S.write(y("document.F=Object")),S.close(),S.F);for(var g=c.length;g--;)delete m.prototype[c[g]];return m()};o[p]=!0,a.exports=Object.create||function(S,v){var g;return S!==null?(d.prototype=s(S),g=new d,d.prototype=null,g[p]=S):g=m(),v===void 0?g:u(g,v)}},function(a,n,r){var i=r(121),s=r(84);a.exports=Object.keys||function(u){return i(u,s)}},function(a,n,r){var i=r(15).f,s=r(14),u=r(5)("toStringTag");a.exports=function(c,o,f){c&&!s(c=f?c:c.prototype,u)&&i(c,u,{configurable:!0,value:o})}},function(a,n,r){var i=r(8),s=r(5),u=r(129),c=s("species");a.exports=function(o){return u>=51||!i(function(){var f=[];return(f.constructor={})[c]=function(){return{foo:1}},f[o](Boolean).foo!==1})}},function(a,n,r){var i=r(4),s=r(122).indexOf,u=r(48),c=r(28),o=[].indexOf,f=!!o&&1/[1].indexOf(1,-0)<0,l=u("indexOf"),h=c("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:f||!l||!h},{indexOf:function(p){return f?o.apply(this,arguments)||0:s(this,p,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(16),s=r(15).f,u=Function.prototype,c=u.toString,o=/^\s*function ([^ (]*)/;i&&!("name"in u)&&s(u,"name",{configurable:!0,get:function(){try{return c.call(this).match(o)[1]}catch{return""}}})},function(a,n,r){var i=r(25),s=r(18),u=r(8),c=r(136),o=RegExp.prototype,f=o.toString,l=u(function(){return f.call({source:"a",flags:"b"})!="/a/b"}),h=f.name!="toString";(l||h)&&i(RegExp.prototype,"toString",function(){var p=s(this),d=String(p.source),y=p.flags;return"/"+d+"/"+String(y===void 0&&p instanceof RegExp&&!("flags"in o)?c.call(p):y)},{unsafe:!0})},function(a,n,r){r(31),r(32),r(33),r(19),r(138),r(20),r(66),r(22),r(23);var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}),u=this&&this.__values||function(l){var h=typeof Symbol=="function"&&Symbol.iterator,p=h&&l[h],d=0;if(p)return p.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&d>=l.length&&(l=void 0),{value:l&&l[d++],done:!l}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(1),o=r(2),f=function(l){function h(p,d){var y=l.call(this,p)||this;return y._writerOptions=c.applyDefaults(d,{format:"object",wellFormed:!1,group:!1,verbose:!1}),y}return s(h,l),h.prototype.serialize=function(p){return this._currentList=[],this._currentIndex=0,this._listRegister=[this._currentList],this.serializeNode(p,this._writerOptions.wellFormed),this._process(this._currentList,this._writerOptions)},h.prototype._process=function(p,d){var y,m,S,v,g,x,C;if(p.length===0)return{};for(var T={},w=!1,_=0,E=0,D=0,b=0,N=0;N<p.length;N++){var R=p[N];switch(te=Object.keys(R)[0]){case"@":continue;case"#":_++;break;case"!":E++;break;case"?":D++;break;case"$":b++;break;default:T[te]?w=!0:T[te]=!0}}var M=this._getAttrKey(),A=this._getNodeKey(o.NodeType.Text),I=this._getNodeKey(o.NodeType.Comment),$=this._getNodeKey(o.NodeType.ProcessingInstruction),U=this._getNodeKey(o.NodeType.CData);if(_===1&&p.length===1&&c.isString(p[0]["#"]))return p[0]["#"];if(w){var B={};for(N=0;N<p.length;N++)if(R=p[N],(te=Object.keys(R)[0])==="@"){var F=R["@"];(L=Object.keys(F)).length===1?B[M+L[0]]=F[L[0]]:B[M]=R["@"]}var z=[];for(N=0;N<p.length;N++)switch(R=p[N],te=Object.keys(R)[0]){case"@":break;case"#":z.push(((y={})[A]=R["#"],y));break;case"!":z.push(((m={})[I]=R["!"],m));break;case"?":z.push(((S={})[$]=R["?"],S));break;case"$":z.push(((v={})[U]=R.$,v));break;default:if((G=R)[te].length!==0&&c.isArray(G[te][0])){for(var H=[],X=G[te],Y=0;Y<X.length;Y++)H.push(this._process(X[Y],d));z.push(((g={})[te]=H,g))}else d.verbose?z.push(((x={})[te]=[this._process(G[te],d)],x)):z.push(((C={})[te]=this._process(G[te],d),C))}return B[A]=z,B}var q=1,ee=1,re=1,ie=1;for(B={},N=0;N<p.length;N++){var te;switch(R=p[N],te=Object.keys(R)[0]){case"@":F=R["@"];var L=Object.keys(F);if(d.group&&L.length!==1)B[M]=F;else for(var O in F)B[M+O]=F[O];break;case"#":q=this._processSpecItem(R["#"],B,d.group,A,_,q);break;case"!":ee=this._processSpecItem(R["!"],B,d.group,I,E,ee);break;case"?":re=this._processSpecItem(R["?"],B,d.group,$,D,re);break;case"$":ie=this._processSpecItem(R.$,B,d.group,U,b,ie);break;default:var G;if((G=R)[te].length!==0&&c.isArray(G[te][0])){H=[],X=G[te];for(var V=0;V<X.length;V++)H.push(this._process(X[V],d));B[te]=H}else d.verbose?B[te]=[this._process(G[te],d)]:B[te]=this._process(G[te],d)}}return B},h.prototype._processSpecItem=function(p,d,y,m,S,v){var g,x;if(!y&&c.isArray(p)&&S+p.length>2)try{for(var C=u(p),T=C.next();!T.done;T=C.next()){var w=T.value;d[m+(v++).toString()]=w}}catch(_){g={error:_}}finally{try{T&&!T.done&&(x=C.return)&&x.call(C)}finally{if(g)throw g.error}}else d[S>1?m+(v++).toString():m]=p;return v},h.prototype.beginElement=function(p){var d,y,m=[];if(this._currentList.length===0)this._currentList.push(((d={})[p]=m,d));else{var S=this._currentList[this._currentList.length-1];this._isElementNode(S,p)?S[p].length!==0&&c.isArray(S[p][0])?S[p].push(m):S[p]=[S[p],m]:this._currentList.push(((y={})[p]=m,y))}this._currentIndex++,this._listRegister.length>this._currentIndex?this._listRegister[this._currentIndex]=m:this._listRegister.push(m),this._currentList=m},h.prototype.endElement=function(){this._currentList=this._listRegister[--this._currentIndex]},h.prototype.attribute=function(p,d){var y,m;if(this._currentList.length===0)this._currentList.push({"@":(y={},y[p]=d,y)});else{var S=this._currentList[this._currentList.length-1];this._isAttrNode(S)?S["@"][p]=d:this._currentList.push({"@":(m={},m[p]=d,m)})}},h.prototype.comment=function(p){if(this._currentList.length===0)this._currentList.push({"!":p});else{var d=this._currentList[this._currentList.length-1];this._isCommentNode(d)?c.isArray(d["!"])?d["!"].push(p):d["!"]=[d["!"],p]:this._currentList.push({"!":p})}},h.prototype.text=function(p){if(this._currentList.length===0)this._currentList.push({"#":p});else{var d=this._currentList[this._currentList.length-1];this._isTextNode(d)?c.isArray(d["#"])?d["#"].push(p):d["#"]=[d["#"],p]:this._currentList.push({"#":p})}},h.prototype.instruction=function(p,d){var y=d===""?p:p+" "+d;if(this._currentList.length===0)this._currentList.push({"?":y});else{var m=this._currentList[this._currentList.length-1];this._isInstructionNode(m)?c.isArray(m["?"])?m["?"].push(y):m["?"]=[m["?"],y]:this._currentList.push({"?":y})}},h.prototype.cdata=function(p){if(this._currentList.length===0)this._currentList.push({$:p});else{var d=this._currentList[this._currentList.length-1];this._isCDATANode(d)?c.isArray(d.$)?d.$.push(p):d.$=[d.$,p]:this._currentList.push({$:p})}},h.prototype._isAttrNode=function(p){return"@"in p},h.prototype._isTextNode=function(p){return"#"in p},h.prototype._isCommentNode=function(p){return"!"in p},h.prototype._isInstructionNode=function(p){return"?"in p},h.prototype._isCDATANode=function(p){return"$"in p},h.prototype._isElementNode=function(p,d){return d in p},h.prototype._getAttrKey=function(){return this._builderOptions.convert.att},h.prototype._getNodeKey=function(p){switch(p){case o.NodeType.Comment:return this._builderOptions.convert.comment;case o.NodeType.Text:return this._builderOptions.convert.text;case o.NodeType.ProcessingInstruction:return this._builderOptions.convert.ins;case o.NodeType.CData:return this._builderOptions.convert.cdata;default:throw new Error("Invalid node type.")}},h}(r(50).BaseWriter);n.ObjectWriter=f},function(a,n,r){var i=r(4),s=r(93);i({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(){this._items={},this._nullItems={}}return s.prototype.set=function(u,c){u===null?this._nullItems[c]=!0:(this._items[u]||(this._items[u]={}),this._items[u][c]=!0)},s.prototype.has=function(u,c){return u===null?this._nullItems[c]===!0:!!this._items[u]&&this._items[u][c]===!0},s}();n.LocalNameSet=i},function(a,n,r){var i=this&&this.__read||function(f,l){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var p,d,y=h.call(f),m=[];try{for(;(l===void 0||l-- >0)&&!(p=y.next()).done;)m.push(p.value)}catch(S){d={error:S}}finally{try{p&&!p.done&&(h=y.return)&&h.call(y)}finally{if(d)throw d.error}}return m};Object.defineProperty(n,"__esModule",{value:!0});var s=r(9),u=r(3),c=r(0),o=function(){function f(){}return Object.defineProperty(f.prototype,"_eventListenerList",{get:function(){return this.__eventListenerList||(this.__eventListenerList=[])},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"_eventHandlerMap",{get:function(){return this.__eventHandlerMap||(this.__eventHandlerMap={})},enumerable:!0,configurable:!0}),f.prototype.addEventListener=function(l,h,p){p===void 0&&(p={passive:!1,once:!1,capture:!1});var d,y=i(c.eventTarget_flattenMore(p),3),m=y[0],S=y[1],v=y[2];h&&(d=u.Guard.isEventListener(h)?h:{handleEvent:h},c.eventTarget_addEventListener(this,{type:l,callback:d,capture:m,passive:S,once:v,removed:!1}))},f.prototype.removeEventListener=function(l,h,p){p===void 0&&(p={capture:!1});var d=c.eventTarget_flatten(p);if(h)for(var y=0;y<this._eventListenerList.length;y++){var m=this._eventListenerList[y];if(m.type===l&&m.capture===d){if(u.Guard.isEventListener(h)&&m.callback===h){c.eventTarget_removeEventListener(this,m,y);break}if(h&&m.callback.handleEvent===h){c.eventTarget_removeEventListener(this,m,y);break}}}},f.prototype.dispatchEvent=function(l){if(l._dispatchFlag||!l._initializedFlag)throw new s.InvalidStateError;return l._isTrusted=!1,c.event_dispatch(l,this)},f.prototype._getTheParent=function(l){return null},f}();n.EventTargetImpl=o},function(a,n,r){var i,s=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])})(f,l)},function(f,l){function h(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(34),c=r(0),o=function(f){function l(h){var p=f.call(this)||this;return p._data=h,p}return s(l,f),Object.defineProperty(l.prototype,"data",{get:function(){return this._data},set:function(h){c.characterData_replaceData(this,0,this._data.length,h)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"length",{get:function(){return this._data.length},enumerable:!0,configurable:!0}),l.prototype.substringData=function(h,p){return c.characterData_substringData(this,h,p)},l.prototype.appendData=function(h){return c.characterData_replaceData(this,this._data.length,0,h)},l.prototype.insertData=function(h,p){c.characterData_replaceData(this,h,0,p)},l.prototype.deleteData=function(h,p){c.characterData_replaceData(this,h,p,"")},l.prototype.replaceData=function(h,p,d){c.characterData_replaceData(this,h,p,d)},Object.defineProperty(l.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),l.prototype.before=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];throw new Error("Mixin: ChildNode not implemented.")},l.prototype.after=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];throw new Error("Mixin: ChildNode not implemented.")},l.prototype.replaceWith=function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];throw new Error("Mixin: ChildNode not implemented.")},l.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},l}(u.NodeImpl);n.CharacterDataImpl=o},function(a,n,r){var i=this&&this.__values||function(S){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&S[v],x=0;if(g)return g.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&x>=S.length&&(S=void 0),{value:S&&S[x++],done:!S}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(S,v){var g=typeof Symbol=="function"&&S[Symbol.iterator];if(!g)return S;var x,C,T=g.call(S),w=[];try{for(;(v===void 0||v-- >0)&&!(x=T.next()).done;)w.push(x.value)}catch(_){C={error:_}}finally{try{x&&!x.done&&(g=T.return)&&g.call(T)}finally{if(C)throw C.error}}return w},u=this&&this.__spread||function(){for(var S=[],v=0;v<arguments.length;v++)S=S.concat(s(arguments[v]));return S};Object.defineProperty(n,"__esModule",{value:!0});var c=r(6),o=r(3),f=r(1),l=r(17),h=r(51);function p(S){c.dom.window._signalSlots.add(S),h.observer_queueAMutationObserverMicrotask()}function d(S,v){v===void 0&&(v=!1);var g=o.Cast.asNode(S)._parent;if(g===null)return null;var x=g._shadowRoot||null;if(x===null||v&&x._mode!=="open")return null;for(var C=l.tree_getFirstDescendantNode(x,!1,!0,function(T){return o.Guard.isSlot(T)});C!==null;){if(C._name===S._name)return C;C=l.tree_getNextDescendantNode(x,C,!1,!0,function(T){return o.Guard.isSlot(T)})}return null}function y(S){var v,g,x=[],C=l.tree_rootNode(S);if(!o.Guard.isShadowRoot(C))return x;var T=C._host;try{for(var w=i(T._children),_=w.next();!_.done;_=w.next()){var E=_.value;o.Guard.isSlotable(E)&&d(E)===S&&x.push(E)}}catch(D){v={error:D}}finally{try{_&&!_.done&&(g=w.return)&&g.call(w)}finally{if(v)throw v.error}}return x}function m(S){var v,g,x=y(S);if(x.length===S._assignedNodes.length){for(var C=!0,T=0;T<x.length;T++)if(x[T]!==S._assignedNodes[T]){C=!1;break}C||p(S)}S._assignedNodes=x;try{for(var w=i(x),_=w.next();!_.done;_=w.next())_.value._assignedSlot=S}catch(E){v={error:E}}finally{try{_&&!_.done&&(g=w.return)&&g.call(w)}finally{if(v)throw v.error}}}n.shadowTree_signalASlotChange=p,n.shadowTree_isConnected=function(S){return o.Guard.isDocumentNode(l.tree_rootNode(S,!0))},n.shadowTree_isAssigned=function(S){return S._assignedSlot!==null},n.shadowTree_findASlot=d,n.shadowTree_findSlotables=y,n.shadowTree_findFlattenedSlotables=function S(v){var g,x,C,T,w=[],_=l.tree_rootNode(v);if(!o.Guard.isShadowRoot(_))return w;var E=y(v);if(f.isEmpty(E))try{for(var D=i(v._children),b=D.next();!b.done;b=D.next()){var N=b.value;o.Guard.isSlotable(N)&&E.push(N)}}catch($){g={error:$}}finally{try{b&&!b.done&&(x=D.return)&&x.call(D)}finally{if(g)throw g.error}}try{for(var R=i(E),M=R.next();!M.done;M=R.next()){var A=M.value;if(o.Guard.isSlot(A)&&o.Guard.isShadowRoot(l.tree_rootNode(A))){var I=S(A);w.push.apply(w,u(I))}else w.push(A)}}catch($){C={error:$}}finally{try{M&&!M.done&&(T=R.return)&&T.call(R)}finally{if(C)throw C.error}}return w},n.shadowTree_assignSlotables=m,n.shadowTree_assignSlotablesForATree=function(S){for(var v=l.tree_getFirstDescendantNode(S,!0,!1,function(g){return o.Guard.isSlot(g)});v!==null;)m(v),v=l.tree_getNextDescendantNode(S,v,!0,!1,function(g){return o.Guard.isSlot(g)})},n.shadowTree_assignASlot=function(S){var v=d(S);v!==null&&m(v)}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=/[a-z]([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-([\0-\t\x2D\._a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*/,s=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]),u=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]),c=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),o=new Set(["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"]);n.customElement_isValidCustomElementName=function(f){return!!i.test(f)&&!s.has(f)},n.customElement_isValidElementName=function(f){return u.has(f)},n.customElement_isVoidElementName=function(f){return c.has(f)},n.customElement_isValidShadowHostName=function(f){return o.has(f)},n.customElement_enqueueACustomElementUpgradeReaction=function(f,l){},n.customElement_enqueueACustomElementCallbackReaction=function(f,l,h){},n.customElement_upgrade=function(f,l){},n.customElement_tryToUpgrade=function(f){},n.customElement_lookUpACustomElementDefinition=function(f,l,h,p){return null}},function(a,n,r){r(4)({target:"String",proto:!0},{repeat:r(259)})},function(a,n,r){r(278),r(68),r(179),r(94),Object.defineProperty(n,"__esModule",{value:!0});var i=r(109),s=function(){function u(c){this._builderOptions=c,c.parser&&Object.assign(this,c.parser)}return u.prototype._docType=function(c,o,f,l){return c.dtd({name:o,pubID:f,sysID:l})},u.prototype._comment=function(c,o){return c.com(o)},u.prototype._text=function(c,o){return c.txt(o)},u.prototype._instruction=function(c,o,f){return c.ins(o,f)},u.prototype._cdata=function(c,o){return c.dat(o)},u.prototype._element=function(c,o,f){return o===void 0?c.ele(f):c.ele(o,f)},u.prototype._attribute=function(c,o,f,l){return o===void 0?c.att(f,l):c.att(o,f,l)},u.prototype._sanitize=function(c){return i.sanitizeInput(c,this._builderOptions.invalidCharReplacement)},u.prototype._decodeText=function(c){return c==null?c:c.replace(/&(quot|amp|apos|lt|gt);/g,function(o,f){return u._entityTable[f]}).replace(/&#(?:x([a-fA-F0-9]+)|([0-9]+));/g,function(o,f,l){return String.fromCodePoint(parseInt(f||l,f?16:10))})},u.prototype._decodeAttributeValue=function(c){return this._decodeText(c)},u.prototype.parse=function(c,o){return this._parse(c,o)},u.prototype.docType=function(c,o,f,l){return this._docType(c,o,f,l)},u.prototype.comment=function(c,o){return this._comment(c,o)},u.prototype.text=function(c,o){return this._text(c,o)},u.prototype.instruction=function(c,o,f){return this._instruction(c,o,f)},u.prototype.cdata=function(c,o){return this._cdata(c,o)},u.prototype.element=function(c,o,f){return this._element(c,o,f)},u.prototype.attribute=function(c,o,f,l){return this._attribute(c,o,f,l)},u.prototype.sanitize=function(c){return this._sanitize(c)},u._entityTable={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},u}();n.BaseReader=s},function(a,n,r){var i=r(39);a.exports=i.DEFAULT=new i({include:[r(54)],explicit:[r(299),r(300),r(301)]})},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(185);n.XMLBuilderImpl=i.XMLBuilderImpl;var s=r(304);n.XMLBuilderCBImpl=s.XMLBuilderCBImpl;var u=r(183);n.builder=u.builder,n.create=u.create,n.fragment=u.fragment,n.convert=u.convert;var c=r(309);n.createCB=c.createCB,n.fragmentCB=c.fragmentCB},function(a,n){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}a.exports=r},function(a,n,r){var i={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,u=s&&!i.call({1:2},1);n.f=u?function(c){var o=s(this,c);return!!o&&o.enumerable}:i},function(a,n,r){var i=r(11),s=r(21);a.exports=function(u,c){try{s(i,u,c)}catch{i[u]=c}return c}},function(a,n,r){var i=r(44),s=r(118);(a.exports=function(u,c){return s[u]||(s[u]=c!==void 0?c:{})})("versions",[]).push({version:"3.6.5",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},function(a,n,r){var i=r(121),s=r(84).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(u){return i(u,s)}},function(a,n,r){var i=r(47),s=Math.max,u=Math.min;a.exports=function(c,o){var f=i(c);return f<0?s(f+o,0):u(f,o)}},function(a,n){a.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(a,n){n.f=Object.getOwnPropertySymbols},function(a,n,r){var i=r(8);a.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(a,n,r){var i=r(127);a.exports=function(s,u,c){if(i(s),u===void 0)return s;switch(c){case 0:return function(){return s.call(u)};case 1:return function(o){return s.call(u,o)};case 2:return function(o,f){return s.call(u,o,f)};case 3:return function(o,f,l){return s.call(u,o,f,l)}}return function(){return s.apply(u,arguments)}}},function(a,n,r){var i=r(4),s=r(195),u=r(132),c=r(133),o=r(62),f=r(21),l=r(25),h=r(5),p=r(44),d=r(49),y=r(131),m=y.IteratorPrototype,S=y.BUGGY_SAFARI_ITERATORS,v=h("iterator"),g=function(){return this};a.exports=function(x,C,T,w,_,E,D){s(T,C,w);var b,N,R,M=function(z){if(z===_&&B)return B;if(!S&&z in $)return $[z];switch(z){case"keys":case"values":case"entries":return function(){return new T(this,z)}}return function(){return new T(this)}},A=C+" Iterator",I=!1,$=x.prototype,U=$[v]||$["@@iterator"]||_&&$[_],B=!S&&U||M(_),F=C=="Array"&&$.entries||U;if(F&&(b=u(F.call(new x)),m!==Object.prototype&&b.next&&(p||u(b)===m||(c?c(b,m):typeof b[v]!="function"&&f(b,v,g)),o(b,A,!0,!0),p&&(d[A]=g))),_=="values"&&U&&U.name!=="values"&&(I=!0,B=function(){return U.call(this)}),p&&!D||$[v]===B||f($,v,B),d[C]=B,_)if(N={values:M("values"),keys:E?B:M("keys"),entries:M("entries")},D)for(R in N)(S||I||!(R in $))&&l($,R,N[R]);else i({target:C,proto:!0,forced:S||I},N);return N}},function(a,n,r){var i=r(4),s=r(13),u=r(59),c=r(83),o=r(26),f=r(24),l=r(134),h=r(5),p=r(63),d=r(28),y=p("slice"),m=d("slice",{ACCESSORS:!0,0:0,1:2}),S=h("species"),v=[].slice,g=Math.max;i({target:"Array",proto:!0,forced:!y||!m},{slice:function(x,C){var T,w,_,E=f(this),D=o(E.length),b=c(x,D),N=c(C===void 0?D:C,D);if(u(E)&&(typeof(T=E.constructor)!="function"||T!==Array&&!u(T.prototype)?s(T)&&(T=T[S])===null&&(T=void 0):T=void 0,T===Array||T===void 0))return v.call(E,b,N);for(w=new(T===void 0?Array:T)(g(N-b,0)),_=0;b<N;b++,_++)b in E&&l(w,_,E[b]);return w.length=_,w}})},function(a,n,r){var i={};i[r(5)("toStringTag")]="z",a.exports=String(i)==="[object z]"},function(a,n,r){r(19),r(138),r(20),r(92),r(22),r(23),Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultBuilderOptions={version:"1.0",encoding:void 0,standalone:void 0,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},invalidCharReplacement:void 0,parser:void 0},n.XMLBuilderOptionKeys=new Set(Object.keys(n.DefaultBuilderOptions)),n.DefaultXMLBuilderCBOptions={format:"xml",wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,spaceBeforeSlash:!1,keepNullNodes:!1,keepNullAttributes:!1,ignoreConverters:!1,convert:{att:"@",ins:"?",text:"#",cdata:"$",comment:"!"},defaultNamespace:{ele:void 0,att:void 0},namespaceAlias:{html:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}}},function(a,n,r){var i=r(139),s=r(143);a.exports=i("Set",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},s)},function(a,n,r){var i,s,u=r(136),c=r(221),o=RegExp.prototype.exec,f=String.prototype.replace,l=o,h=(i=/a/,s=/b*/g,o.call(i,"a"),o.call(s,"a"),i.lastIndex!==0||s.lastIndex!==0),p=c.UNSUPPORTED_Y||c.BROKEN_CARET,d=/()??/.exec("")[1]!==void 0;(h||d||p)&&(l=function(y){var m,S,v,g,x=this,C=p&&x.sticky,T=u.call(x),w=x.source,_=0,E=y;return C&&((T=T.replace("y","")).indexOf("g")===-1&&(T+="g"),E=String(y).slice(x.lastIndex),x.lastIndex>0&&(!x.multiline||x.multiline&&y[x.lastIndex-1]!==`
`)&&(w="(?: "+w+")",E=" "+E,_++),S=new RegExp("^(?:"+w+")",T)),d&&(S=new RegExp("^"+w+"$(?!\\s)",T)),h&&(m=x.lastIndex),v=o.call(C?S:x,E),C?v?(v.input=v.input.slice(_),v[0]=v[0].slice(_),v.index=x.lastIndex,x.lastIndex+=v[0].length):x.lastIndex=0:h&&v&&(x.lastIndex=x.global?v.index+v[0].length:m),d&&v&&v.length>1&&f.call(v[0],S,function(){for(g=1;g<arguments.length-2;g++)arguments[g]===void 0&&(v[g]=void 0)}),v}),a.exports=l},function(a,n,r){var i=r(225),s=r(18),u=r(27),c=r(26),o=r(47),f=r(35),l=r(226),h=r(227),p=Math.max,d=Math.min,y=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,S=/\$([$&'`]|\d\d?)/g;i("replace",2,function(v,g,x,C){var T=C.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,w=C.REPLACE_KEEPS_$0,_=T?"$":"$0";return[function(D,b){var N=f(this),R=D==null?void 0:D[v];return R!==void 0?R.call(D,N,b):g.call(String(N),D,b)},function(D,b){if(!T&&w||typeof b=="string"&&b.indexOf(_)===-1){var N=x(g,D,this,b);if(N.done)return N.value}var R=s(D),M=String(this),A=typeof b=="function";A||(b=String(b));var I=R.global;if(I){var $=R.unicode;R.lastIndex=0}for(var U=[];;){var B=h(R,M);if(B===null||(U.push(B),!I))break;String(B[0])===""&&(R.lastIndex=l(M,c(R.lastIndex),$))}for(var F,z="",H=0,X=0;X<U.length;X++){B=U[X];for(var Y=String(B[0]),q=p(d(o(B.index),M.length),0),ee=[],re=1;re<B.length;re++)ee.push((F=B[re])===void 0?F:String(F));var ie=B.groups;if(A){var te=[Y].concat(ee,q,M);ie!==void 0&&te.push(ie);var L=String(b.apply(void 0,te))}else L=E(Y,M,q,ee,ie,b);q>=H&&(z+=M.slice(H,q)+L,H=q+Y.length)}return z+M.slice(H)}];function E(D,b,N,R,M,A){var I=N+D.length,$=R.length,U=S;return M!==void 0&&(M=u(M),U=m),g.call(A,U,function(B,F){var z;switch(F.charAt(0)){case"$":return"$";case"&":return D;case"`":return b.slice(0,N);case"'":return b.slice(I);case"<":z=M[F.slice(1,-1)];break;default:var H=+F;if(H===0)return B;if(H>$){var X=y(H/10);return X===0?B:X<=$?R[X-1]===void 0?F.charAt(1):R[X-1]+F.charAt(1):B}z=R[H-1]}return z===void 0?"":z})}})},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(){this._items={},this._nullItems=[]}return s.prototype.copy=function(){var u=new s;for(var c in this._items)u._items[c]=this._items[c].slice(0);return u._nullItems=this._nullItems.slice(0),u},s.prototype.get=function(u,c){var o=c===null?this._nullItems:this._items[c]||null;if(o===null)return null;for(var f=null,l=0;l<o.length;l++)if((f=o[l])===u)return f;return f},s.prototype.has=function(u,c){var o=c===null?this._nullItems:this._items[c]||null;return o!==null&&o.indexOf(u)!==-1},s.prototype.hasPrefix=function(u){if(this._nullItems.indexOf(u)!==-1)return!0;for(var c in this._items)if(this._items[c].indexOf(u)!==-1)return!0;return!1},s.prototype.set=function(u,c){var o=c===null?this._nullItems:this._items[c]||null;c!==null&&o===null?this._items[c]=[u]:o.push(u)},s}();n.NamespacePrefixMap=i},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.Surrogate=/[\uD800-\uDFFF]/,n.ScalarValue=/[\uD800-\uDFFF]/,n.NonCharacter=/[\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]/,n.ASCIICodePoint=/[\u0000-\u007F]/,n.ASCIITabOrNewLine=/[\t\n\r]/,n.ASCIIWhiteSpace=/[\t\n\f\r ]/,n.C0Control=/[\u0000-\u001F]/,n.C0ControlOrSpace=/[\u0000-\u001F ]/,n.Control=/[\u0000-\u001F\u007F-\u009F]/,n.ASCIIDigit=/[0-9]/,n.ASCIIUpperHexDigit=/[0-9A-F]/,n.ASCIILowerHexDigit=/[0-9a-f]/,n.ASCIIHexDigit=/[0-9A-Fa-f]/,n.ASCIIUpperAlpha=/[A-Z]/,n.ASCIILowerAlpha=/[a-z]/,n.ASCIIAlpha=/[A-Za-z]/,n.ASCIIAlphanumeric=/[0-9A-Za-z]/},function(a,n,r){var i=this&&this.__values||function(b){var N=typeof Symbol=="function"&&Symbol.iterator,R=N&&b[N],M=0;if(R)return R.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&M>=b.length&&(b=void 0),{value:b&&b[M++],done:!b}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(b,N){var R=typeof Symbol=="function"&&b[Symbol.iterator];if(!R)return b;var M,A,I=R.call(b),$=[];try{for(;(N===void 0||N-- >0)&&!(M=I.next()).done;)$.push(M.value)}catch(U){A={error:U}}finally{try{M&&!M.done&&(R=I.return)&&R.call(I)}finally{if(A)throw A.error}}return $},u=this&&this.__spread||function(){for(var b=[],N=0;N<arguments.length;N++)b=b.concat(s(arguments[N]));return b};Object.defineProperty(n,"__esModule",{value:!0});var c=r(6),o=r(2),f=r(3),l=r(171),h=r(104),p=r(9),d=r(17),y=r(72),m=r(30);function S(b,N){N===void 0&&(N=void 0),N===void 0&&(N=null);var R=v(b,N,new Date,{});return R._isTrusted=!0,R}function v(b,N,R,M){var A=new b("");return A._initializedFlag=!0,A._timeStamp=R.getTime(),Object.assign(A,M),c.dom.features.steps&&m.dom_runEventConstructingSteps(A),A}function g(b,N,R,M){var A,I,$,U;R===void 0&&(R=!1),M===void 0&&(M={value:!1});var B=!1;b._dispatchFlag=!0;var F=N;if(R){var z=N._associatedDocument;f.Guard.isDocumentNode(z)&&(F=z)}var H=null,X=d.tree_retarget(b._relatedTarget,N);if(N!==X||N===b._relatedTarget){var Y=[];try{for(var q=i(b._touchTargetList),ee=q.next();!ee.done;ee=q.next()){var re=ee.value;Y.push(d.tree_retarget(re,N))}}catch(ce){A={error:ce}}finally{try{ee&&!ee.done&&(I=q.return)&&I.call(q)}finally{if(A)throw A.error}}x(b,N,F,X,Y,!1);var ie=f.Guard.isMouseEvent(b)&&b._type==="click";ie&&N._activationBehavior!==void 0&&(H=N);for(var te=f.Guard.isSlotable(N)&&y.shadowTree_isAssigned(N)?N:null,L=!1,O=N._getTheParent(b);O!==null&&f.Guard.isNode(O);){if(te!==null){if(!f.Guard.isSlot(O))throw new Error("Parent node of a slotable should be a slot.");te=null;var G=d.tree_rootNode(O,!0);f.Guard.isShadowRoot(G)&&G._mode==="closed"&&(L=!0)}f.Guard.isSlotable(O)&&y.shadowTree_isAssigned(O)&&(te=O),X=d.tree_retarget(b._relatedTarget,O),Y=[];try{for(var V=($=void 0,i(b._touchTargetList)),P=V.next();!P.done;P=V.next())re=P.value,Y.push(d.tree_retarget(re,O))}catch(ce){$={error:ce}}finally{try{P&&!P.done&&(U=V.return)&&U.call(V)}finally{if($)throw $.error}}f.Guard.isWindow(O)||f.Guard.isNode(O)&&f.Guard.isNode(N)&&d.tree_isAncestorOf(d.tree_rootNode(N,!0),O,!0,!0)?(ie&&b._bubbles&&H===null&&O._activationBehavior&&(H=O),x(b,O,null,X,Y,L)):O===X?O=null:(N=O,ie&&H===null&&N._activationBehavior&&(H=N),x(b,O,N,X,Y,L)),O!==null&&(O=O._getTheParent(b)),L=!1}for(var j=null,W=b._path,Z=W.length-1;Z>=0;Z--)if((oe=W[Z]).shadowAdjustedTarget!==null){j=oe;break}if(j!==null)if(f.Guard.isNode(j.shadowAdjustedTarget)&&f.Guard.isShadowRoot(d.tree_rootNode(j.shadowAdjustedTarget,!0)))B=!0;else if(f.Guard.isNode(j.relatedTarget)&&f.Guard.isShadowRoot(d.tree_rootNode(j.relatedTarget,!0)))B=!0;else for(var ne=0;ne<j.touchTargetList.length;ne++){var oe=j.touchTargetList[ne];if(f.Guard.isNode(oe)&&f.Guard.isShadowRoot(d.tree_rootNode(oe,!0))){B=!0;break}}for(H!==null&&H._legacyPreActivationBehavior!==void 0&&H._legacyPreActivationBehavior(b),Z=W.length-1;Z>=0;Z--)(oe=W[Z]).shadowAdjustedTarget!==null?b._eventPhase=o.EventPhase.AtTarget:b._eventPhase=o.EventPhase.Capturing,C(oe,b,"capturing",M);for(Z=0;Z<W.length;Z++){if((oe=W[Z]).shadowAdjustedTarget!==null)b._eventPhase=o.EventPhase.AtTarget;else{if(!b._bubbles)continue;b._eventPhase=o.EventPhase.Bubbling}C(oe,b,"bubbling",M)}}return b._eventPhase=o.EventPhase.None,b._currentTarget=null,b._path=[],b._dispatchFlag=!1,b._stopPropagationFlag=!1,b._stopImmediatePropagationFlag=!1,B&&(b._target=null,b._relatedTarget=null,b._touchTargetList=[]),H!==null&&(b._canceledFlag||H._activationBehavior===void 0?H._legacyCanceledActivationBehavior!==void 0&&H._legacyCanceledActivationBehavior(b):H._activationBehavior(b)),!b._canceledFlag}function x(b,N,R,M,A,I){var $=!1;f.Guard.isNode(N)&&f.Guard.isShadowRoot(d.tree_rootNode(N))&&($=!0);var U=!1;f.Guard.isShadowRoot(N)&&N._mode==="closed"&&(U=!0),b._path.push({invocationTarget:N,invocationTargetInShadowTree:$,shadowAdjustedTarget:R,relatedTarget:M,touchTargetList:A,rootOfClosedTree:U,slotInClosedTree:I})}function C(b,N,R,M){M===void 0&&(M={value:!1});for(var A=N._path,I=-1,$=0;$<A.length;$++)if(A[$]===b){I=$;break}if(I!==-1){var U=A[I];(U.shadowAdjustedTarget!==null||I>0&&(U=A[I-1]).shadowAdjustedTarget!==null)&&(N._target=U.shadowAdjustedTarget)}if(N._relatedTarget=b.relatedTarget,N._touchTargetList=b.touchTargetList,!N._stopPropagationFlag){N._currentTarget=b.invocationTarget;var B=N._currentTarget._eventListenerList,F=new(Array.bind.apply(Array,u([void 0],B)));if(!T(N,F,R,b,M)&&N._isTrusted){var z=N._type;z==="animationend"?N._type="webkitAnimationEnd":z==="animationiteration"?N._type="webkitAnimationIteration":z==="animationstart"?N._type="webkitAnimationStart":z==="transitionend"&&(N._type="webkitTransitionEnd"),T(N,F,R,b,M),N._type=z}}}function T(b,N,R,M,A){A===void 0&&(A={value:!1});for(var I=!1,$=0;$<N.length;$++){var U=N[$];if(!U.removed){if(b._type!==U.type||(I=!0,R==="capturing"&&!U.capture)||R==="bubbling"&&U.capture)continue;if(U.once&&b._currentTarget!==null){for(var B=b._currentTarget,F=-1,z=0;z<B._eventListenerList.length;z++)if(B._eventListenerList[z]===U){F=z;break}F!==-1&&B._eventListenerList.splice(F,1)}var H=void 0,X=void 0;f.Guard.isWindow(H)&&(X=H._currentEvent,M.invocationTargetInShadowTree===!1&&(H._currentEvent=b)),U.passive&&(b._inPassiveListenerFlag=!0);try{U.callback.handleEvent.call(b._currentTarget,b)}catch{A.value=!0}if(U.passive&&(b._inPassiveListenerFlag=!1),f.Guard.isWindow(H)&&(H._currentEvent=X),b._stopImmediatePropagationFlag)return I}}return I}function w(b,N){return null}function _(b,N){return null}function E(b,N){}function D(b,N){}n.event_setTheCanceledFlag=function(b){b._cancelable&&!b._inPassiveListenerFlag&&(b._canceledFlag=!0)},n.event_initialize=function(b,N,R,M){b._initializedFlag=!0,b._stopPropagationFlag=!1,b._stopImmediatePropagationFlag=!1,b._canceledFlag=!1,b._isTrusted=!1,b._target=null,b._type=N,b._bubbles=R,b._cancelable=M},n.event_createAnEvent=S,n.event_innerEventCreationSteps=v,n.event_dispatch=g,n.event_appendToAnEventPath=x,n.event_invoke=C,n.event_innerInvoke=T,n.event_fireAnEvent=function(b,N,R,M,A){R===void 0&&(R=h.EventImpl);var I=S(R);if(I._type=b,M)for(var $ in M)I[$]=M[$];return g(I,N,A)},n.event_createLegacyEvent=function(b){var N=null;switch(b.toLowerCase()){case"beforeunloadevent":case"compositionevent":break;case"customevent":N=l.CustomEventImpl;break;case"devicemotionevent":case"deviceorientationevent":case"dragevent":break;case"event":case"events":N=h.EventImpl}if(N===null)throw new p.NotSupportedError("Event constructor not found for interface "+b+".");var R=new N("");return R._type="",R._timeStamp=new Date().getTime(),R._isTrusted=!1,R._initializedFlag=!1,R},n.event_getterEventHandlerIDLAttribute=function(b,N){return null},n.event_setterEventHandlerIDLAttribute=function(b,N,R){},n.event_determineTheTargetOfAnEventHandler=w,n.event_getTheCurrentValueOfAnEventHandler=_,n.event_activateAnEventHandler=E,n.event_deactivateAnEventHandler=D},function(a,n,r){var i,s=this&&this.__extends||(i=function(x,C){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,w){T.__proto__=w}||function(T,w){for(var _ in w)w.hasOwnProperty(_)&&(T[_]=w[_])})(x,C)},function(x,C){function T(){this.constructor=x}i(x,C),x.prototype=C===null?Object.create(C):(T.prototype=C.prototype,new T)}),u=this&&this.__values||function(x){var C=typeof Symbol=="function"&&Symbol.iterator,T=C&&x[C],w=0;if(T)return T.call(x);if(x&&typeof x.length=="number")return{next:function(){return x&&w>=x.length&&(x=void 0),{value:x&&x[w++],done:!x}}};throw new TypeError(C?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(x,C){var T=typeof Symbol=="function"&&x[Symbol.iterator];if(!T)return x;var w,_,E=T.call(x),D=[];try{for(;(C===void 0||C-- >0)&&!(w=E.next()).done;)D.push(w.value)}catch(b){_={error:b}}finally{try{w&&!w.done&&(T=E.return)&&T.call(E)}finally{if(_)throw _.error}}return D};Object.defineProperty(n,"__esModule",{value:!0});var o=r(6),f=r(2),l=r(9),h=r(34),p=r(3),d=r(1),y=r(7),m=r(152),S=r(0),v=r(12),g=function(x){function C(){var T=x.call(this)||this;return T._children=new Set,T._encoding={name:"UTF-8",labels:["unicode-1-1-utf-8","utf-8","utf8"]},T._contentType="application/xml",T._URL={scheme:"about",username:"",password:"",host:null,port:null,path:["blank"],query:null,fragment:null,_cannotBeABaseURLFlag:!0,_blobURLEntry:null},T._origin=null,T._type="xml",T._mode="no-quirks",T._documentElement=null,T._hasNamespaces=!1,T._nodeDocumentOverwrite=null,T}return s(C,x),Object.defineProperty(C.prototype,"_nodeDocument",{get:function(){return this._nodeDocumentOverwrite||this},set:function(T){this._nodeDocumentOverwrite=T},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"implementation",{get:function(){return this._implementation||(this._implementation=S.create_domImplementation(this))},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"URL",{get:function(){return m.urlSerializer(this._URL)},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"documentURI",{get:function(){return this.URL},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"origin",{get:function(){return"null"},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"compatMode",{get:function(){return this._mode==="quirks"?"BackCompat":"CSS1Compat"},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"characterSet",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"charset",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"inputEncoding",{get:function(){return this._encoding.name},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"contentType",{get:function(){return this._contentType},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"doctype",{get:function(){var T,w;try{for(var _=u(this._children),E=_.next();!E.done;E=_.next()){var D=E.value;if(p.Guard.isDocumentTypeNode(D))return D}}catch(b){T={error:b}}finally{try{E&&!E.done&&(w=_.return)&&w.call(_)}finally{if(T)throw T.error}}return null},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"documentElement",{get:function(){return this._documentElement},enumerable:!0,configurable:!0}),C.prototype.getElementsByTagName=function(T){return S.node_listOfElementsWithQualifiedName(T,this)},C.prototype.getElementsByTagNameNS=function(T,w){return S.node_listOfElementsWithNamespace(T,w,this)},C.prototype.getElementsByClassName=function(T){return S.node_listOfElementsWithClassNames(T,this)},C.prototype.createElement=function(T,w){if(!S.xml_isName(T))throw new l.InvalidCharacterError;this._type==="html"&&(T=T.toLowerCase());var _=null;w!==void 0&&(_=d.isString(w)?w:w.is);var E=this._type==="html"||this._contentType==="application/xhtml+xml"?y.namespace.HTML:null;return S.element_createAnElement(this,T,E,null,_,!0)},C.prototype.createElementNS=function(T,w,_){return S.document_internalCreateElementNS(this,T,w,_)},C.prototype.createDocumentFragment=function(){return S.create_documentFragment(this)},C.prototype.createTextNode=function(T){return S.create_text(this,T)},C.prototype.createCDATASection=function(T){if(this._type==="html")throw new l.NotSupportedError;if(T.indexOf("]]>")!==-1)throw new l.InvalidCharacterError;return S.create_cdataSection(this,T)},C.prototype.createComment=function(T){return S.create_comment(this,T)},C.prototype.createProcessingInstruction=function(T,w){if(!S.xml_isName(T))throw new l.InvalidCharacterError;if(w.indexOf("?>")!==-1)throw new l.InvalidCharacterError;return S.create_processingInstruction(this,T,w)},C.prototype.importNode=function(T,w){if(w===void 0&&(w=!1),p.Guard.isDocumentNode(T)||p.Guard.isShadowRoot(T))throw new l.NotSupportedError;return S.node_clone(T,this,w)},C.prototype.adoptNode=function(T){if(p.Guard.isDocumentNode(T))throw new l.NotSupportedError;if(p.Guard.isShadowRoot(T))throw new l.HierarchyRequestError;return S.document_adopt(T,this),T},C.prototype.createAttribute=function(T){if(!S.xml_isName(T))throw new l.InvalidCharacterError;return this._type==="html"&&(T=T.toLowerCase()),S.create_attr(this,T)},C.prototype.createAttributeNS=function(T,w){var _=c(S.namespace_validateAndExtract(T,w),3),E=_[0],D=_[1],b=_[2],N=S.create_attr(this,b);return N._namespace=E,N._namespacePrefix=D,N},C.prototype.createEvent=function(T){return S.event_createLegacyEvent(T)},C.prototype.createRange=function(){var T=S.create_range();return T._start=[this,0],T._end=[this,0],T},C.prototype.createNodeIterator=function(T,w,_){w===void 0&&(w=f.WhatToShow.All),_===void 0&&(_=null);var E=S.create_nodeIterator(T,T,!0);return E._whatToShow=w,E._iteratorCollection=S.create_nodeList(T),d.isFunction(_)?(E._filter=S.create_nodeFilter(),E._filter.acceptNode=_):E._filter=_,E},C.prototype.createTreeWalker=function(T,w,_){w===void 0&&(w=f.WhatToShow.All),_===void 0&&(_=null);var E=S.create_treeWalker(T,T);return E._whatToShow=w,d.isFunction(_)?(E._filter=S.create_nodeFilter(),E._filter.acceptNode=_):E._filter=_,E},C.prototype._getTheParent=function(T){return T._type==="load"?null:o.dom.window},C.prototype.getElementById=function(T){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(C.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),C.prototype.prepend=function(){for(var T=[],w=0;w<arguments.length;w++)T[w]=arguments[w];throw new Error("Mixin: ParentNode not implemented.")},C.prototype.append=function(){for(var T=[],w=0;w<arguments.length;w++)T[w]=arguments[w];throw new Error("Mixin: ParentNode not implemented.")},C.prototype.querySelector=function(T){throw new Error("Mixin: ParentNode not implemented.")},C.prototype.querySelectorAll=function(T){throw new Error("Mixin: ParentNode not implemented.")},C}(h.NodeImpl);n.DocumentImpl=g,v.idl_defineConst(g.prototype,"_nodeType",f.NodeType.Document)},function(a,n,r){var i,s=this&&this.__extends||(i=function(m,S){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var x in g)g.hasOwnProperty(x)&&(v[x]=g[x])})(m,S)},function(m,S){function v(){this.constructor=m}i(m,S),m.prototype=S===null?Object.create(S):(v.prototype=S.prototype,new v)}),u=this&&this.__values||function(m){var S=typeof Symbol=="function"&&Symbol.iterator,v=S&&m[S],g=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&g>=m.length&&(m=void 0),{value:m&&m[g++],done:!m}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(m,S){var v=typeof Symbol=="function"&&m[Symbol.iterator];if(!v)return m;var g,x,C=v.call(m),T=[];try{for(;(S===void 0||S-- >0)&&!(g=C.next()).done;)T.push(g.value)}catch(w){x={error:w}}finally{try{g&&!g.done&&(v=C.return)&&v.call(C)}finally{if(x)throw x.error}}return T};Object.defineProperty(n,"__esModule",{value:!0});var o=r(2),f=r(34),l=r(9),h=r(7),p=r(0),d=r(12),y=function(m){function S(){var v=m.call(this)||this;return v._children=new Set,v._namespace=null,v._namespacePrefix=null,v._localName="",v._customElementState="undefined",v._customElementDefinition=null,v._is=null,v._shadowRoot=null,v._attributeList=p.create_namedNodeMap(v),v._attributeChangeSteps=[],v._name="",v._assignedSlot=null,v}return s(S,m),Object.defineProperty(S.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"tagName",{get:function(){return this._htmlUppercasedQualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"id",{get:function(){return p.element_getAnAttributeValue(this,"id")},set:function(v){p.element_setAnAttributeValue(this,"id",v)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"className",{get:function(){return p.element_getAnAttributeValue(this,"class")},set:function(v){p.element_setAnAttributeValue(this,"class",v)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"classList",{get:function(){var v=p.element_getAnAttributeByName("class",this);return v===null&&(v=p.create_attr(this._nodeDocument,"class")),p.create_domTokenList(this,v)},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"slot",{get:function(){return p.element_getAnAttributeValue(this,"slot")},set:function(v){p.element_setAnAttributeValue(this,"slot",v)},enumerable:!0,configurable:!0}),S.prototype.hasAttributes=function(){return this._attributeList.length!==0},Object.defineProperty(S.prototype,"attributes",{get:function(){return this._attributeList},enumerable:!0,configurable:!0}),S.prototype.getAttributeNames=function(){var v,g,x=[];try{for(var C=u(this._attributeList),T=C.next();!T.done;T=C.next()){var w=T.value;x.push(w._qualifiedName)}}catch(_){v={error:_}}finally{try{T&&!T.done&&(g=C.return)&&g.call(C)}finally{if(v)throw v.error}}return x},S.prototype.getAttribute=function(v){var g=p.element_getAnAttributeByName(v,this);return g?g._value:null},S.prototype.getAttributeNS=function(v,g){var x=p.element_getAnAttributeByNamespaceAndLocalName(v,g,this);return x?x._value:null},S.prototype.setAttribute=function(v,g){if(!p.xml_isName(v))throw new l.InvalidCharacterError;this._namespace===h.namespace.HTML&&this._nodeDocument._type==="html"&&(v=v.toLowerCase());for(var x=null,C=0;C<this._attributeList.length;C++){var T=this._attributeList[C];if(T._qualifiedName===v){x=T;break}}if(x===null)return(x=p.create_attr(this._nodeDocument,v))._value=g,void p.element_append(x,this);p.element_change(x,this,g)},S.prototype.setAttributeNS=function(v,g,x){var C=c(p.namespace_validateAndExtract(v,g),3),T=C[0],w=C[1],_=C[2];p.element_setAnAttributeValue(this,_,x,w,T)},S.prototype.removeAttribute=function(v){p.element_removeAnAttributeByName(v,this)},S.prototype.removeAttributeNS=function(v,g){p.element_removeAnAttributeByNamespaceAndLocalName(v,g,this)},S.prototype.hasAttribute=function(v){this._namespace===h.namespace.HTML&&this._nodeDocument._type==="html"&&(v=v.toLowerCase());for(var g=0;g<this._attributeList.length;g++)if(this._attributeList[g]._qualifiedName===v)return!0;return!1},S.prototype.toggleAttribute=function(v,g){if(!p.xml_isName(v))throw new l.InvalidCharacterError;this._namespace===h.namespace.HTML&&this._nodeDocument._type==="html"&&(v=v.toLowerCase());for(var x=null,C=0;C<this._attributeList.length;C++){var T=this._attributeList[C];if(T._qualifiedName===v){x=T;break}}return x===null?(g===void 0||g===!0)&&((x=p.create_attr(this._nodeDocument,v))._value="",p.element_append(x,this),!0):g!==void 0&&g!==!1||(p.element_removeAnAttributeByName(v,this),!1)},S.prototype.hasAttributeNS=function(v,g){for(var x=v||null,C=0;C<this._attributeList.length;C++){var T=this._attributeList[C];if(T._namespace===x&&T._localName===g)return!0}return!1},S.prototype.getAttributeNode=function(v){return p.element_getAnAttributeByName(v,this)},S.prototype.getAttributeNodeNS=function(v,g){return p.element_getAnAttributeByNamespaceAndLocalName(v,g,this)},S.prototype.setAttributeNode=function(v){return p.element_setAnAttribute(v,this)},S.prototype.setAttributeNodeNS=function(v){return p.element_setAnAttribute(v,this)},S.prototype.removeAttributeNode=function(v){for(var g=!1,x=0;x<this._attributeList.length;x++)if(this._attributeList[x]===v){g=!0;break}if(!g)throw new l.NotFoundError;return p.element_remove(v,this),v},S.prototype.attachShadow=function(v){if(this._namespace!==h.namespace.HTML)throw new l.NotSupportedError;if(!p.customElement_isValidCustomElementName(this._localName)&&!p.customElement_isValidShadowHostName(this._localName))throw new l.NotSupportedError;if(p.customElement_isValidCustomElementName(this._localName)||this._is!==null){var g=p.customElement_lookUpACustomElementDefinition(this._nodeDocument,this._namespace,this._localName,this._is);if(g!==null&&g.disableShadow===!0)throw new l.NotSupportedError}if(this._shadowRoot!==null)throw new l.NotSupportedError;var x=p.create_shadowRoot(this._nodeDocument,this);return x._mode=v.mode,this._shadowRoot=x,x},Object.defineProperty(S.prototype,"shadowRoot",{get:function(){var v=this._shadowRoot;return v===null||v.mode==="closed"?null:v},enumerable:!0,configurable:!0}),S.prototype.closest=function(v){throw new l.NotImplementedError},S.prototype.matches=function(v){throw new l.NotImplementedError},S.prototype.webkitMatchesSelector=function(v){return this.matches(v)},S.prototype.getElementsByTagName=function(v){return p.node_listOfElementsWithQualifiedName(v,this)},S.prototype.getElementsByTagNameNS=function(v,g){return p.node_listOfElementsWithNamespace(v,g,this)},S.prototype.getElementsByClassName=function(v){return p.node_listOfElementsWithClassNames(v,this)},S.prototype.insertAdjacentElement=function(v,g){return p.element_insertAdjacent(this,v,g)},S.prototype.insertAdjacentText=function(v,g){var x=p.create_text(this._nodeDocument,g);p.element_insertAdjacent(this,v,x)},Object.defineProperty(S.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"_htmlUppercasedQualifiedName",{get:function(){var v=this._qualifiedName;return this._namespace===h.namespace.HTML&&this._nodeDocument._type==="html"&&(v=v.toUpperCase()),v},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),S.prototype.prepend=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];throw new Error("Mixin: ParentNode not implemented.")},S.prototype.append=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];throw new Error("Mixin: ParentNode not implemented.")},S.prototype.querySelector=function(v){throw new Error("Mixin: ParentNode not implemented.")},S.prototype.querySelectorAll=function(v){throw new Error("Mixin: ParentNode not implemented.")},Object.defineProperty(S.prototype,"previousElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"nextElementSibling",{get:function(){throw new Error("Mixin: NonDocumentTypeChildNode not implemented.")},enumerable:!0,configurable:!0}),S.prototype.before=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];throw new Error("Mixin: ChildNode not implemented.")},S.prototype.after=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];throw new Error("Mixin: ChildNode not implemented.")},S.prototype.replaceWith=function(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];throw new Error("Mixin: ChildNode not implemented.")},S.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},Object.defineProperty(S.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),S._create=function(v,g,x,C){x===void 0&&(x=null),C===void 0&&(C=null);var T=new S;return T._localName=g,T._namespace=x,T._namespacePrefix=C,T._nodeDocument=v,T},S}(f.NodeImpl);n.ElementImpl=y,d.idl_defineConst(y.prototype,"_nodeType",o.NodeType.Element)},function(a,n,r){var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(2),c=r(34),o=r(12),f=function(l){function h(p){p===void 0&&(p=null);var d=l.call(this)||this;return d._children=new Set,d._host=p,d}return s(h,l),h.prototype.getElementById=function(p){throw new Error("Mixin: NonElementParentNode not implemented.")},Object.defineProperty(h.prototype,"children",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"firstElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"lastElementChild",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"childElementCount",{get:function(){throw new Error("Mixin: ParentNode not implemented.")},enumerable:!0,configurable:!0}),h.prototype.prepend=function(){for(var p=[],d=0;d<arguments.length;d++)p[d]=arguments[d];throw new Error("Mixin: ParentNode not implemented.")},h.prototype.append=function(){for(var p=[],d=0;d<arguments.length;d++)p[d]=arguments[d];throw new Error("Mixin: ParentNode not implemented.")},h.prototype.querySelector=function(p){throw new Error("Mixin: ParentNode not implemented.")},h.prototype.querySelectorAll=function(p){throw new Error("Mixin: ParentNode not implemented.")},h._create=function(p,d){d===void 0&&(d=null);var y=new h(d);return y._nodeDocument=p,y},h}(c.NodeImpl);n.DocumentFragmentImpl=f,o.idl_defineConst(f.prototype,"_nodeType",u.NodeType.DocumentFragment)},function(a,n,r){var i,s=this&&this.__extends||(i=function(p,d){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,m){y.__proto__=m}||function(y,m){for(var S in m)m.hasOwnProperty(S)&&(y[S]=m[S])})(p,d)},function(p,d){function y(){this.constructor=p}i(p,d),p.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}),u=this&&this.__values||function(p){var d=typeof Symbol=="function"&&Symbol.iterator,y=d&&p[d],m=0;if(y)return y.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&m>=p.length&&(p=void 0),{value:p&&p[m++],done:!p}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(2),o=r(71),f=r(0),l=r(12),h=function(p){function d(y){y===void 0&&(y="");var m=p.call(this,y)||this;return m._name="",m._assignedSlot=null,m}return s(d,p),Object.defineProperty(d.prototype,"wholeText",{get:function(){var y,m,S="";try{for(var v=u(f.text_contiguousTextNodes(this,!0)),g=v.next();!g.done;g=v.next())S+=g.value._data}catch(x){y={error:x}}finally{try{g&&!g.done&&(m=v.return)&&m.call(v)}finally{if(y)throw y.error}}return S},enumerable:!0,configurable:!0}),d.prototype.splitText=function(y){return f.text_split(this,y)},Object.defineProperty(d.prototype,"assignedSlot",{get:function(){throw new Error("Mixin: Slotable not implemented.")},enumerable:!0,configurable:!0}),d._create=function(y,m){m===void 0&&(m="");var S=new d(m);return S._nodeDocument=y,S},d}(o.CharacterDataImpl);n.TextImpl=h,l.idl_defineConst(h.prototype,"_nodeType",c.NodeType.Text)},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(){}return Object.defineProperty(s.prototype,"_startNode",{get:function(){return this._start[0]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_startOffset",{get:function(){return this._start[1]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_endNode",{get:function(){return this._end[0]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_endOffset",{get:function(){return this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"_collapsed",{get:function(){return this._start[0]===this._end[0]&&this._start[1]===this._end[1]},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"startContainer",{get:function(){return this._startNode},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"startOffset",{get:function(){return this._startOffset},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"endContainer",{get:function(){return this._endNode},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"endOffset",{get:function(){return this._endOffset},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"collapsed",{get:function(){return this._collapsed},enumerable:!0,configurable:!0}),s}();n.AbstractRangeImpl=i},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),s=function(){function u(c){this._activeFlag=!1,this._root=c,this._whatToShow=i.WhatToShow.All,this._filter=null}return Object.defineProperty(u.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"whatToShow",{get:function(){return this._whatToShow},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"filter",{get:function(){return this._filter},enumerable:!0,configurable:!0}),u}();n.TraverserImpl=s},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),s=r(0),u=r(12),c=function(){function o(f,l){this._target=null,this._relatedTarget=null,this._touchTargetList=[],this._path=[],this._currentTarget=null,this._eventPhase=i.EventPhase.None,this._stopPropagationFlag=!1,this._stopImmediatePropagationFlag=!1,this._canceledFlag=!1,this._inPassiveListenerFlag=!1,this._composedFlag=!1,this._initializedFlag=!1,this._dispatchFlag=!1,this._isTrusted=!1,this._bubbles=!1,this._cancelable=!1,this._type=f,l&&(this._bubbles=l.bubbles||!1,this._cancelable=l.cancelable||!1,this._composedFlag=l.composed||!1),this._initializedFlag=!0,this._timeStamp=new Date().getTime()}return Object.defineProperty(o.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"srcElement",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"currentTarget",{get:function(){return this._currentTarget},enumerable:!0,configurable:!0}),o.prototype.composedPath=function(){var f=[],l=this._path;if(l.length===0)return f;var h=this._currentTarget;if(h===null)throw new Error("Event currentTarget is null.");f.push(h);for(var p=0,d=0,y=l.length-1;y>=0;){if(l[y].rootOfClosedTree&&d++,l[y].invocationTarget===h){p=y;break}l[y].slotInClosedTree&&d--,y--}var m=d,S=d;for(y=p-1;y>=0;)l[y].rootOfClosedTree&&m++,m<=S&&f.unshift(l[y].invocationTarget),l[y].slotInClosedTree&&--m<S&&(S=m),y--;for(m=d,S=d,y=p+1;y<l.length;)l[y].slotInClosedTree&&m++,m<=S&&f.push(l[y].invocationTarget),l[y].rootOfClosedTree&&--m<S&&(S=m),y++;return f},Object.defineProperty(o.prototype,"eventPhase",{get:function(){return this._eventPhase},enumerable:!0,configurable:!0}),o.prototype.stopPropagation=function(){this._stopPropagationFlag=!0},Object.defineProperty(o.prototype,"cancelBubble",{get:function(){return this._stopPropagationFlag},set:function(f){f&&this.stopPropagation()},enumerable:!0,configurable:!0}),o.prototype.stopImmediatePropagation=function(){this._stopPropagationFlag=!0,this._stopImmediatePropagationFlag=!0},Object.defineProperty(o.prototype,"bubbles",{get:function(){return this._bubbles},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cancelable",{get:function(){return this._cancelable},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"returnValue",{get:function(){return!this._canceledFlag},set:function(f){f||s.event_setTheCanceledFlag(this)},enumerable:!0,configurable:!0}),o.prototype.preventDefault=function(){s.event_setTheCanceledFlag(this)},Object.defineProperty(o.prototype,"defaultPrevented",{get:function(){return this._canceledFlag},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"composed",{get:function(){return this._composedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isTrusted",{get:function(){return this._isTrusted},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"timeStamp",{get:function(){return this._timeStamp},enumerable:!0,configurable:!0}),o.prototype.initEvent=function(f,l,h){l===void 0&&(l=!1),h===void 0&&(h=!1),this._dispatchFlag||s.event_initialize(this,f,l,h)},o.NONE=0,o.CAPTURING_PHASE=1,o.AT_TARGET=2,o.BUBBLING_PHASE=3,o}();n.EventImpl=c,u.idl_defineConst(c.prototype,"NONE",0),u.idl_defineConst(c.prototype,"CAPTURING_PHASE",1),u.idl_defineConst(c.prototype,"AT_TARGET",2),u.idl_defineConst(c.prototype,"BUBBLING_PHASE",3)},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),s=r(9);n.traversal_filter=function(u,c){if(u._activeFlag)throw new s.InvalidStateError;var o=1<<c._nodeType-1;if(!(u.whatToShow&o))return i.FilterResult.Skip;if(!u.filter)return i.FilterResult.Accept;u._activeFlag=!0;var f=i.FilterResult.Reject;try{f=u.filter.acceptNode(c)}catch(l){throw u._activeFlag=!1,l}return u._activeFlag=!1,f}},function(a,n,r){var i=this&&this.__read||function(S,v){var g=typeof Symbol=="function"&&S[Symbol.iterator];if(!g)return S;var x,C,T=g.call(S),w=[];try{for(;(v===void 0||v-- >0)&&!(x=T.next()).done;)w.push(x.value)}catch(_){C={error:_}}finally{try{x&&!x.done&&(g=T.return)&&g.call(T)}finally{if(C)throw C.error}}return w},s=this&&this.__values||function(S){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&S[v],x=0;if(g)return g.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&x>=S.length&&(S=void 0),{value:S&&S[x++],done:!S}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var u=r(6),c=r(3),o=r(1),f=r(99),l=r(73),h=r(17),p=r(173),d=r(30),y=r(52),m=r(37);n.document_elementInterface=function(S,v){return f.ElementImpl},n.document_internalCreateElementNS=function(S,v,g,x){var C=i(p.namespace_validateAndExtract(v,g),3),T=C[0],w=C[1],_=C[2],E=null;return x!==void 0&&(E=o.isString(x)?x:x.is),y.element_createAnElement(S,_,T,w,E,!0)},n.document_adopt=function(S,v){var g,x;if(S._nodeDocument!==v||S._parent!==null){var C=S._nodeDocument;if(S._parent&&m.mutation_remove(S,S._parent),v!==C)for(var T=h.tree_getFirstDescendantNode(S,!0,!0);T!==null;){if(T._nodeDocument=v,c.Guard.isElementNode(T))try{for(var w=(g=void 0,s(T._attributeList._asArray())),_=w.next();!_.done;_=w.next())_.value._nodeDocument=v}catch(E){g={error:E}}finally{try{_&&!_.done&&(x=w.return)&&x.call(w)}finally{if(g)throw g.error}}u.dom.features.customElements&&c.Guard.isElementNode(T)&&T._customElementState==="custom"&&l.customElement_enqueueACustomElementCallbackReaction(T,"adoptedCallback",[C,v]),u.dom.features.steps&&d.dom_runAdoptingSteps(T,C),T=h.tree_getNextDescendantNode(S,T,!0,!0)}}}},function(a,n,r){var i=this&&this.__values||function(h){var p=typeof Symbol=="function"&&Symbol.iterator,d=p&&h[p],y=0;if(d)return d.call(h);if(h&&typeof h.length=="number")return{next:function(){return h&&y>=h.length&&(h=void 0),{value:h&&h[y++],done:!h}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),u=r(3),c=r(9),o=r(17),f=r(51),l=r(30);n.characterData_replaceData=function(h,p,d,y){var m,S,v=o.tree_nodeLength(h);if(p>v)throw new c.IndexSizeError("Offset exceeds character data length. Offset: "+p+", Length: "+v+", Node is "+h.nodeName+".");p+d>v&&(d=v-p),s.dom.features.mutationObservers&&f.observer_queueMutationRecord("characterData",h,null,null,h._data,[],[],null,null);var g=h._data.substring(0,p)+y+h._data.substring(p+d);h._data=g;try{for(var x=i(s.dom.rangeList),C=x.next();!C.done;C=x.next()){var T=C.value;T._start[0]===h&&T._start[1]>p&&T._start[1]<=p+d&&(T._start[1]=p),T._end[0]===h&&T._end[1]>p&&T._end[1]<=p+d&&(T._end[1]=p),T._start[0]===h&&T._start[1]>p+d&&(T._start[1]+=y.length-d),T._end[0]===h&&T._end[1]>p+d&&(T._end[1]+=y.length-d)}}catch(w){m={error:w}}finally{try{C&&!C.done&&(S=x.return)&&S.call(x)}finally{if(m)throw m.error}}s.dom.features.steps&&u.Guard.isTextNode(h)&&h._parent!==null&&l.dom_runChildTextContentChangeSteps(h._parent)},n.characterData_substringData=function(h,p,d){var y=o.tree_nodeLength(h);if(p>y)throw new c.IndexSizeError("Offset exceeds character data length. Offset: "+p+", Length: "+y+", Node is "+h.nodeName+".");return p+d>y?h._data.substr(p):h._data.substr(p,d)}},function(a,n,r){var i=this&&this.__read||function(l,h){var p=typeof Symbol=="function"&&l[Symbol.iterator];if(!p)return l;var d,y,m=p.call(l),S=[];try{for(;(h===void 0||h-- >0)&&!(d=m.next()).done;)S.push(d.value)}catch(v){y={error:v}}finally{try{d&&!d.done&&(p=m.return)&&p.call(m)}finally{if(y)throw y.error}}return S},s=this&&this.__spread||function(){for(var l=[],h=0;h<arguments.length;h++)l=l.concat(i(arguments[h]));return l},u=this&&this.__values||function(l){var h=typeof Symbol=="function"&&Symbol.iterator,p=h&&l[h],d=0;if(p)return p.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&d>=l.length&&(l=void 0),{value:l&&l[d++],done:!l}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(7);function o(l){var h=c.string.splitAStringOnASCIIWhitespace(l);return new Set(h)}function f(l){return s(l).join(" ")}n.orderedSet_parse=o,n.orderedSet_serialize=f,n.orderedSet_sanitize=function(l){return f(o(l))},n.orderedSet_contains=function(l,h,p){var d,y,m,S;try{for(var v=u(h),g=v.next();!g.done;g=v.next()){var x=g.value,C=!1;try{for(var T=(m=void 0,u(l)),w=T.next();!w.done;w=T.next()){var _=w.value;if(p){if(_===x){C=!0;break}}else if(_.toUpperCase()===x.toUpperCase()){C=!0;break}}}catch(E){m={error:E}}finally{try{w&&!w.done&&(S=T.return)&&S.call(T)}finally{if(m)throw m.error}}if(!C)return!1}}catch(E){d={error:E}}finally{try{g&&!g.done&&(y=v.return)&&y.call(v)}finally{if(d)throw d.error}}return!0}},function(a,n,r){r(179),Object.defineProperty(n,"__esModule",{value:!0});var i=r(262),s=r(110),u=r(1);s.dom.setFeatures(!1),n.createDocument=function(){var c=new i.DOMImplementation().createDocument(null,"root",null);return c.documentElement&&c.removeChild(c.documentElement),c},n.sanitizeInput=function(c,o){if(c==null)return c;if(o===void 0)return c+"";var f="";c+="";for(var l=0;l<c.length;l++){var h=c.charCodeAt(l);if(h===9||h===10||h===13||h>=32&&h<=55295||h>=57344&&h<=65533)f+=c.charAt(l);else if(h>=55296&&h<=56319&&l<c.length-1){var p=c.charCodeAt(l+1);p>=56320&&p<=57343?(h=1024*(h-55296)+p-56320+65536,f+=String.fromCodePoint(h),l++):f+=u.isString(o)?o:o(c.charAt(l),l,c)}else f+=u.isString(o)?o:o(c.charAt(l),l,c)}return f}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(1),s=r(153);n.AbortController=s.AbortControllerImpl;var u=r(154);n.AbortSignal=u.AbortSignalImpl;var c=r(102);n.AbstractRange=c.AbstractRangeImpl;var o=r(157);n.Attr=o.AttrImpl;var f=r(158);n.CDATASection=f.CDATASectionImpl;var l=r(71);n.CharacterData=l.CharacterDataImpl;var h=r(263),p=r(159);n.Comment=p.CommentImpl;var d=r(171);n.CustomEvent=d.CustomEventImpl;var y=r(100);n.DocumentFragment=y.DocumentFragmentImpl;var m=r(98);n.Document=m.DocumentImpl;var S=r(264),v=r(155);n.DocumentType=v.DocumentTypeImpl;var g=r(6);n.dom=g.dom;var x=r(148);n.DOMImplementation=x.DOMImplementationImpl;var C=r(170);n.DOMTokenList=C.DOMTokenListImpl;var T=r(99);n.Element=T.ElementImpl;var w=r(104);n.Event=w.EventImpl;var _=r(70);n.EventTarget=_.EventTargetImpl;var E=r(161);n.HTMLCollection=E.HTMLCollectionImpl;var D=r(265);n.MutationObserver=D.MutationObserverImpl;var b=r(169);n.MutationRecord=b.MutationRecordImpl;var N=r(164);n.NamedNodeMap=N.NamedNodeMapImpl;var R=r(168);n.NodeFilter=R.NodeFilterImpl;var M=r(34);n.Node=M.NodeImpl;var A=r(166);n.NodeIterator=A.NodeIteratorImpl;var I=r(162);n.NodeList=I.NodeListImpl;var $=r(163);n.NodeListStatic=$.NodeListStaticImpl;var U=r(266),B=r(267),F=r(268),z=r(160);n.ProcessingInstruction=z.ProcessingInstructionImpl;var H=r(165);n.Range=H.RangeImpl;var X=r(156);n.ShadowRoot=X.ShadowRootImpl;var Y=r(269),q=r(270);n.StaticRange=q.StaticRangeImpl;var ee=r(101);n.Text=ee.TextImpl;var re=r(103);n.Traverser=re.TraverserImpl;var ie=r(167);n.TreeWalker=ie.TreeWalkerImpl;var te=r(149);n.Window=te.WindowImpl;var L=r(151);n.XMLDocument=L.XMLDocumentImpl,i.applyMixin(T.ElementImpl,h.ChildNodeImpl),i.applyMixin(l.CharacterDataImpl,h.ChildNodeImpl),i.applyMixin(v.DocumentTypeImpl,h.ChildNodeImpl),i.applyMixin(m.DocumentImpl,S.DocumentOrShadowRootImpl),i.applyMixin(X.ShadowRootImpl,S.DocumentOrShadowRootImpl),i.applyMixin(T.ElementImpl,U.NonDocumentTypeChildNodeImpl),i.applyMixin(l.CharacterDataImpl,U.NonDocumentTypeChildNodeImpl),i.applyMixin(m.DocumentImpl,B.NonElementParentNodeImpl),i.applyMixin(y.DocumentFragmentImpl,B.NonElementParentNodeImpl),i.applyMixin(m.DocumentImpl,F.ParentNodeImpl),i.applyMixin(y.DocumentFragmentImpl,F.ParentNodeImpl),i.applyMixin(T.ElementImpl,F.ParentNodeImpl),i.applyMixin(ee.TextImpl,Y.SlotableImpl),i.applyMixin(T.ElementImpl,Y.SlotableImpl)},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),function(i){i[i.EOF=0]="EOF",i[i.Declaration=1]="Declaration",i[i.DocType=2]="DocType",i[i.Element=3]="Element",i[i.Text=4]="Text",i[i.CDATA=5]="CDATA",i[i.PI=6]="PI",i[i.Comment=7]="Comment",i[i.ClosingTag=8]="ClosingTag"}(n.TokenType||(n.TokenType={}))},function(a,n,r){r(64),r(20),r(66);var i,s=this&&this.__extends||(i=function(o,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var p in h)h.hasOwnProperty(p)&&(l[p]=h[p])})(o,f)},function(o,f){function l(){this.constructor=o}i(o,f),o.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(1),c=function(o){function f(){return o!==null&&o.apply(this,arguments)||this}return s(f,o),f.prototype._parse=function(l,h){var p=this,d=this._builderOptions,y=null;return u.isFunction(h)?y=this.parse(l,h.apply(this)):u.isArray(h)||u.isSet(h)?u.forEachArray(h,function(m){return y=p.parse(l,m)},this):u.isMap(h)||u.isObject(h)?u.forEachObject(h,function(m,S){if(u.isFunction(S)&&(S=S.apply(p)),d.ignoreConverters||m.indexOf(d.convert.att)!==0)if(d.ignoreConverters||m.indexOf(d.convert.text)!==0)if(d.ignoreConverters||m.indexOf(d.convert.cdata)!==0)if(d.ignoreConverters||m.indexOf(d.convert.comment)!==0)if(d.ignoreConverters||m.indexOf(d.convert.ins)!==0){if(!((u.isArray(S)||u.isSet(S))&&u.isEmpty(S))){if((u.isMap(S)||u.isObject(S))&&u.isEmpty(S))y=p.element(l,void 0,p.sanitize(m))||y;else if(d.keepNullNodes||S!=null)if(u.isArray(S)||u.isSet(S))u.forEachArray(S,function(T){var w={};w[m]=T,y=p.parse(l,w)},p);else if(u.isMap(S)||u.isObject(S))(v=p.element(l,void 0,p.sanitize(m)))&&(y=v,p.parse(v,S));else if(S!=null&&S!==""){var v;(v=p.element(l,void 0,p.sanitize(m)))&&(y=v,p.text(v,p._decodeText(p.sanitize(S))))}else y=p.element(l,void 0,p.sanitize(m))||y}}else if(u.isString(S)){var g=S.indexOf(" "),x=g===-1?S:S.substr(0,g),C=g===-1?"":S.substr(g+1);y=p.instruction(l,p.sanitize(x),p.sanitize(C))||y}else u.isArray(S)||u.isSet(S)?u.forEachArray(S,function(T){var w=T.indexOf(" "),_=w===-1?T:T.substr(0,w),E=w===-1?"":T.substr(w+1);y=p.instruction(l,p.sanitize(_),p.sanitize(E))||y},p):u.forEachObject(S,function(T,w){return y=p.instruction(l,p.sanitize(T),p.sanitize(w))||y},p);else u.isArray(S)||u.isSet(S)?u.forEachArray(S,function(T){return y=p.comment(l,p.sanitize(T))||y},p):y=p.comment(l,p.sanitize(S))||y;else u.isArray(S)||u.isSet(S)?u.forEachArray(S,function(T){return y=p.cdata(l,p.sanitize(T))||y},p):y=p.cdata(l,p.sanitize(S))||y;else y=u.isMap(S)||u.isObject(S)?p.parse(l,S):p.text(l,p._decodeText(p.sanitize(S)))||y;else if(m===d.convert.att){if(u.isArray(S)||u.isSet(S))throw new Error("Invalid attribute: "+S.toString()+". "+l._debugInfo());u.forEachObject(S,function(T,w){y=p.attribute(l,void 0,p.sanitize(T),p._decodeAttributeValue(p.sanitize(w)))||y})}else y=p.attribute(l,void 0,p.sanitize(m.substr(d.convert.att.length)),p._decodeAttributeValue(p.sanitize(S)))||y},this):(d.keepNullNodes||h!=null)&&(y=this.text(l,this._decodeText(this.sanitize(h)))||y),y||l},f}(r(75).BaseReader);n.ObjectReader=c},function(a,n,r){var i=r(39);a.exports=new i({explicit:[r(286),r(287),r(288)]})},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(s){this.level=0,this._builderOptions=s,this._writerOptions=s};n.BaseCBWriter=i},function(a,n,r){var i=r(16),s=r(8),u=r(116);a.exports=!i&&!s(function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7})},function(a,n,r){var i=r(11),s=r(13),u=i.document,c=s(u)&&s(u.createElement);a.exports=function(o){return c?u.createElement(o):{}}},function(a,n,r){var i=r(118),s=Function.toString;typeof i.inspectSource!="function"&&(i.inspectSource=function(u){return s.call(u)}),a.exports=i.inspectSource},function(a,n,r){var i=r(11),s=r(80),u=i["__core-js_shared__"]||s("__core-js_shared__",{});a.exports=u},function(a,n,r){var i=r(14),s=r(187),u=r(55),c=r(15);a.exports=function(o,f){for(var l=s(f),h=c.f,p=u.f,d=0;d<l.length;d++){var y=l[d];i(o,y)||h(o,y,p(f,y))}}},function(a,n,r){var i=r(11);a.exports=i},function(a,n,r){var i=r(14),s=r(24),u=r(122).indexOf,c=r(45);a.exports=function(o,f){var l,h=s(o),p=0,d=[];for(l in h)!i(c,l)&&i(h,l)&&d.push(l);for(;f.length>p;)i(h,l=f[p++])&&(~u(d,l)||d.push(l));return d}},function(a,n,r){var i=r(24),s=r(26),u=r(83),c=function(o){return function(f,l,h){var p,d=i(f),y=s(d.length),m=u(h,y);if(o&&l!=l){for(;y>m;)if((p=d[m++])!=p)return!0}else for(;y>m;m++)if((o||m in d)&&d[m]===l)return o||m||0;return!o&&-1}};a.exports={includes:c(!0),indexOf:c(!1)}},function(a,n,r){var i=r(8),s=/#|\.prototype\./,u=function(h,p){var d=o[c(h)];return d==l||d!=f&&(typeof p=="function"?i(p):!!p)},c=u.normalize=function(h){return String(h).replace(s,".").toLowerCase()},o=u.data={},f=u.NATIVE="N",l=u.POLYFILL="P";a.exports=u},function(a,n,r){var i=r(86);a.exports=i&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(a,n,r){var i=r(5);n.f=i},function(a,n,r){var i=r(120),s=r(14),u=r(125),c=r(15).f;a.exports=function(o){var f=i.Symbol||(i.Symbol={});s(f,o)||c(f,o,{value:u.f(o)})}},function(a,n){a.exports=function(r){if(typeof r!="function")throw TypeError(String(r)+" is not a function");return r}},function(a,n,r){var i=r(13),s=r(59),u=r(5)("species");a.exports=function(c,o){var f;return s(c)&&(typeof(f=c.constructor)!="function"||f!==Array&&!s(f.prototype)?i(f)&&(f=f[u])===null&&(f=void 0):f=void 0),new(f===void 0?Array:f)(o===0?0:o)}},function(a,n,r){var i,s,u=r(11),c=r(193),o=u.process,f=o&&o.versions,l=f&&f.v8;l?s=(i=l.split("."))[0]+i[1]:c&&(!(i=c.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=c.match(/Chrome\/(\d+)/))&&(s=i[1]),a.exports=s&&+s},function(a,n,r){var i=r(5),s=r(60),u=r(15),c=i("unscopables"),o=Array.prototype;o[c]==null&&u.f(o,c,{configurable:!0,value:s(null)}),a.exports=function(f){o[c][f]=!0}},function(a,n,r){var i,s,u,c=r(132),o=r(21),f=r(14),l=r(5),h=r(44),p=l("iterator"),d=!1;[].keys&&("next"in(u=[].keys())?(s=c(c(u)))!==Object.prototype&&(i=s):d=!0),i==null&&(i={}),h||f(i,p)||o(i,p,function(){return this}),a.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:d}},function(a,n,r){var i=r(14),s=r(27),u=r(57),c=r(196),o=u("IE_PROTO"),f=Object.prototype;a.exports=c?Object.getPrototypeOf:function(l){return l=s(l),i(l,o)?l[o]:typeof l.constructor=="function"&&l instanceof l.constructor?l.constructor.prototype:l instanceof Object?f:null}},function(a,n,r){var i=r(18),s=r(197);a.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var u,c=!1,o={};try{(u=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(o,[]),c=o instanceof Array}catch{}return function(f,l){return i(f),s(l),c?u.call(f,l):f.__proto__=l,f}}():void 0)},function(a,n,r){var i=r(56),s=r(15),u=r(40);a.exports=function(c,o,f){var l=i(o);l in c?s.f(c,l,u(0,f)):c[l]=f}},function(a,n,r){var i=r(90),s=r(42),u=r(5)("toStringTag"),c=s(function(){return arguments}())=="Arguments";a.exports=i?s:function(o){var f,l,h;return o===void 0?"Undefined":o===null?"Null":typeof(l=function(p,d){try{return p[d]}catch{}}(f=Object(o),u))=="string"?l:c?s(f):(h=s(f))=="Object"&&typeof f.callee=="function"?"Arguments":h}},function(a,n,r){var i=r(18);a.exports=function(){var s=i(this),u="";return s.global&&(u+="g"),s.ignoreCase&&(u+="i"),s.multiline&&(u+="m"),s.dotAll&&(u+="s"),s.unicode&&(u+="u"),s.sticky&&(u+="y"),u}},function(a,n,r){var i=r(47),s=r(35),u=function(c){return function(o,f){var l,h,p=String(s(o)),d=i(f),y=p.length;return d<0||d>=y?c?"":void 0:(l=p.charCodeAt(d))<55296||l>56319||d+1===y||(h=p.charCodeAt(d+1))<56320||h>57343?c?p.charAt(d):l:c?p.slice(d,d+2):h-56320+(l-55296<<10)+65536}};a.exports={codeAt:u(!1),charAt:u(!0)}},function(a,n,r){var i=r(4),s=r(27),u=r(61);i({target:"Object",stat:!0,forced:r(8)(function(){u(1)})},{keys:function(c){return u(s(c))}})},function(a,n,r){var i=r(4),s=r(11),u=r(123),c=r(25),o=r(140),f=r(141),l=r(142),h=r(13),p=r(8),d=r(208),y=r(62),m=r(209);a.exports=function(S,v,g){var x=S.indexOf("Map")!==-1,C=S.indexOf("Weak")!==-1,T=x?"set":"add",w=s[S],_=w&&w.prototype,E=w,D={},b=function($){var U=_[$];c(_,$,$=="add"?function(B){return U.call(this,B===0?0:B),this}:$=="delete"?function(B){return!(C&&!h(B))&&U.call(this,B===0?0:B)}:$=="get"?function(B){return C&&!h(B)?void 0:U.call(this,B===0?0:B)}:$=="has"?function(B){return!(C&&!h(B))&&U.call(this,B===0?0:B)}:function(B,F){return U.call(this,B===0?0:B,F),this})};if(u(S,typeof w!="function"||!(C||_.forEach&&!p(function(){new w().entries().next()}))))E=g.getConstructor(v,S,x,T),o.REQUIRED=!0;else if(u(S,!0)){var N=new E,R=N[T](C?{}:-0,1)!=N,M=p(function(){N.has(1)}),A=d(function($){new w($)}),I=!C&&p(function(){for(var $=new w,U=5;U--;)$[T](U,U);return!$.has(-0)});A||((E=v(function($,U){l($,E,S);var B=m(new w,$,E);return U!=null&&f(U,B[T],B,x),B})).prototype=_,_.constructor=E),(M||I)&&(b("delete"),b("has"),x&&b("get")),(I||R)&&b(T),C&&_.clear&&delete _.clear}return D[S]=E,i({global:!0,forced:E!=w},D),y(E,S),C||g.setStrong(E,S,x),E}},function(a,n,r){var i=r(45),s=r(13),u=r(14),c=r(15).f,o=r(58),f=r(204),l=o("meta"),h=0,p=Object.isExtensible||function(){return!0},d=function(m){c(m,l,{value:{objectID:"O"+ ++h,weakData:{}}})},y=a.exports={REQUIRED:!1,fastKey:function(m,S){if(!s(m))return typeof m=="symbol"?m:(typeof m=="string"?"S":"P")+m;if(!u(m,l)){if(!p(m))return"F";if(!S)return"E";d(m)}return m[l].objectID},getWeakData:function(m,S){if(!u(m,l)){if(!p(m))return!0;if(!S)return!1;d(m)}return m[l].weakData},onFreeze:function(m){return f&&y.REQUIRED&&p(m)&&!u(m,l)&&d(m),m}};i[l]=!0},function(a,n,r){var i=r(18),s=r(205),u=r(26),c=r(87),o=r(206),f=r(207),l=function(h,p){this.stopped=h,this.result=p};(a.exports=function(h,p,d,y,m){var S,v,g,x,C,T,w,_=c(p,d,y?2:1);if(m)S=h;else{if(typeof(v=o(h))!="function")throw TypeError("Target is not iterable");if(s(v)){for(g=0,x=u(h.length);x>g;g++)if((C=y?_(i(w=h[g])[0],w[1]):_(h[g]))&&C instanceof l)return C;return new l(!1)}S=v.call(h)}for(T=S.next;!(w=T.call(S)).done;)if(typeof(C=f(S,_,w.value,y))=="object"&&C&&C instanceof l)return C;return new l(!1)}).stop=function(h){return new l(!0,h)}},function(a,n){a.exports=function(r,i,s){if(!(r instanceof i))throw TypeError("Incorrect "+(s?s+" ":"")+"invocation");return r}},function(a,n,r){var i=r(15).f,s=r(60),u=r(210),c=r(87),o=r(142),f=r(141),l=r(88),h=r(211),p=r(16),d=r(140).fastKey,y=r(43),m=y.set,S=y.getterFor;a.exports={getConstructor:function(v,g,x,C){var T=v(function(D,b){o(D,T,g),m(D,{type:g,index:s(null),first:void 0,last:void 0,size:0}),p||(D.size=0),b!=null&&f(b,D[C],D,x)}),w=S(g),_=function(D,b,N){var R,M,A=w(D),I=E(D,b);return I?I.value=N:(A.last=I={index:M=d(b,!0),key:b,value:N,previous:R=A.last,next:void 0,removed:!1},A.first||(A.first=I),R&&(R.next=I),p?A.size++:D.size++,M!=="F"&&(A.index[M]=I)),D},E=function(D,b){var N,R=w(D),M=d(b);if(M!=="F")return R.index[M];for(N=R.first;N;N=N.next)if(N.key==b)return N};return u(T.prototype,{clear:function(){for(var D=w(this),b=D.index,N=D.first;N;)N.removed=!0,N.previous&&(N.previous=N.previous.next=void 0),delete b[N.index],N=N.next;D.first=D.last=void 0,p?D.size=0:this.size=0},delete:function(D){var b=w(this),N=E(this,D);if(N){var R=N.next,M=N.previous;delete b.index[N.index],N.removed=!0,M&&(M.next=R),R&&(R.previous=M),b.first==N&&(b.first=R),b.last==N&&(b.last=M),p?b.size--:this.size--}return!!N},forEach:function(D){for(var b,N=w(this),R=c(D,arguments.length>1?arguments[1]:void 0,3);b=b?b.next:N.first;)for(R(b.value,b.key,this);b&&b.removed;)b=b.previous},has:function(D){return!!E(this,D)}}),u(T.prototype,x?{get:function(D){var b=E(this,D);return b&&b.value},set:function(D,b){return _(this,D===0?0:D,b)}}:{add:function(D){return _(this,D=D===0?0:D,D)}}),p&&i(T.prototype,"size",{get:function(){return w(this).size}}),T},setStrong:function(v,g,x){var C=g+" Iterator",T=S(g),w=S(C);l(v,g,function(_,E){m(this,{type:C,target:_,state:T(_),kind:E,last:void 0})},function(){for(var _=w(this),E=_.kind,D=_.last;D&&D.removed;)D=D.previous;return _.target&&(_.last=D=D?D.next:_.state.first)?E=="keys"?{value:D.key,done:!1}:E=="values"?{value:D.value,done:!1}:{value:[D.key,D.value],done:!1}:(_.target=void 0,{value:void 0,done:!0})},x?"entries":"values",!x,!0),h(g)}}},function(a,n,r){var i,s=r(4),u=r(55).f,c=r(26),o=r(222),f=r(35),l=r(224),h=r(44),p="".endsWith,d=Math.min,y=l("endsWith");s({target:"String",proto:!0,forced:!!(h||y||(i=u(String.prototype,"endsWith"),!i||i.writable))&&!y},{endsWith:function(m){var S=String(f(this));o(m);var v=arguments.length>1?arguments[1]:void 0,g=c(S.length),x=v===void 0?g:d(c(v),g),C=String(m);return p?p.call(S,C,x):S.slice(x-C.length,x)===C}})},function(a,n,r){(function(i){/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */var s=r(229),u=r(230),c=r(231);function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(L,O){if(o()<O)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(L=new Uint8Array(O)).__proto__=l.prototype:(L===null&&(L=new l(O)),L.length=O),L}function l(L,O,G){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(L,O,G);if(typeof L=="number"){if(typeof O=="string")throw new Error("If encoding is specified then the first argument must be a string");return d(this,L)}return h(this,L,O,G)}function h(L,O,G,V){if(typeof O=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&O instanceof ArrayBuffer?function(P,j,W,Z){if(j.byteLength,W<0||j.byteLength<W)throw new RangeError("'offset' is out of bounds");if(j.byteLength<W+(Z||0))throw new RangeError("'length' is out of bounds");return j=W===void 0&&Z===void 0?new Uint8Array(j):Z===void 0?new Uint8Array(j,W):new Uint8Array(j,W,Z),l.TYPED_ARRAY_SUPPORT?(P=j).__proto__=l.prototype:P=y(P,j),P}(L,O,G,V):typeof O=="string"?function(P,j,W){if(typeof W=="string"&&W!==""||(W="utf8"),!l.isEncoding(W))throw new TypeError('"encoding" must be a valid string encoding');var Z=0|S(j,W),ne=(P=f(P,Z)).write(j,W);return ne!==Z&&(P=P.slice(0,ne)),P}(L,O,G):function(P,j){if(l.isBuffer(j)){var W=0|m(j.length);return(P=f(P,W)).length===0||j.copy(P,0,0,W),P}if(j){if(typeof ArrayBuffer<"u"&&j.buffer instanceof ArrayBuffer||"length"in j)return typeof j.length!="number"||(Z=j.length)!=Z?f(P,0):y(P,j);if(j.type==="Buffer"&&c(j.data))return y(P,j.data)}var Z;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(L,O)}function p(L){if(typeof L!="number")throw new TypeError('"size" argument must be a number');if(L<0)throw new RangeError('"size" argument must not be negative')}function d(L,O){if(p(O),L=f(L,O<0?0:0|m(O)),!l.TYPED_ARRAY_SUPPORT)for(var G=0;G<O;++G)L[G]=0;return L}function y(L,O){var G=O.length<0?0:0|m(O.length);L=f(L,G);for(var V=0;V<G;V+=1)L[V]=255&O[V];return L}function m(L){if(L>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|L}function S(L,O){if(l.isBuffer(L))return L.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(L)||L instanceof ArrayBuffer))return L.byteLength;typeof L!="string"&&(L=""+L);var G=L.length;if(G===0)return 0;for(var V=!1;;)switch(O){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":case void 0:return re(L).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return ie(L).length;default:if(V)return re(L).length;O=(""+O).toLowerCase(),V=!0}}function v(L,O,G){var V=!1;if((O===void 0||O<0)&&(O=0),O>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(O>>>=0))return"";for(L||(L="utf8");;)switch(L){case"hex":return I(this,O,G);case"utf8":case"utf-8":return R(this,O,G);case"ascii":return M(this,O,G);case"latin1":case"binary":return A(this,O,G);case"base64":return N(this,O,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,O,G);default:if(V)throw new TypeError("Unknown encoding: "+L);L=(L+"").toLowerCase(),V=!0}}function g(L,O,G){var V=L[O];L[O]=L[G],L[G]=V}function x(L,O,G,V,P){if(L.length===0)return-1;if(typeof G=="string"?(V=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,isNaN(G)&&(G=P?0:L.length-1),G<0&&(G=L.length+G),G>=L.length){if(P)return-1;G=L.length-1}else if(G<0){if(!P)return-1;G=0}if(typeof O=="string"&&(O=l.from(O,V)),l.isBuffer(O))return O.length===0?-1:C(L,O,G,V,P);if(typeof O=="number")return O&=255,l.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(L,O,G):Uint8Array.prototype.lastIndexOf.call(L,O,G):C(L,[O],G,V,P);throw new TypeError("val must be string, number or Buffer")}function C(L,O,G,V,P){var j,W=1,Z=L.length,ne=O.length;if(V!==void 0&&((V=String(V).toLowerCase())==="ucs2"||V==="ucs-2"||V==="utf16le"||V==="utf-16le")){if(L.length<2||O.length<2)return-1;W=2,Z/=2,ne/=2,G/=2}function oe($e,Re){return W===1?$e[Re]:$e.readUInt16BE(Re*W)}if(P){var ce=-1;for(j=G;j<Z;j++)if(oe(L,j)===oe(O,ce===-1?0:j-ce)){if(ce===-1&&(ce=j),j-ce+1===ne)return ce*W}else ce!==-1&&(j-=j-ce),ce=-1}else for(G+ne>Z&&(G=Z-ne),j=G;j>=0;j--){for(var Ce=!0,me=0;me<ne;me++)if(oe(L,j+me)!==oe(O,me)){Ce=!1;break}if(Ce)return j}return-1}function T(L,O,G,V){G=Number(G)||0;var P=L.length-G;V?(V=Number(V))>P&&(V=P):V=P;var j=O.length;if(j%2!=0)throw new TypeError("Invalid hex string");V>j/2&&(V=j/2);for(var W=0;W<V;++W){var Z=parseInt(O.substr(2*W,2),16);if(isNaN(Z))return W;L[G+W]=Z}return W}function w(L,O,G,V){return te(re(O,L.length-G),L,G,V)}function _(L,O,G,V){return te(function(P){for(var j=[],W=0;W<P.length;++W)j.push(255&P.charCodeAt(W));return j}(O),L,G,V)}function E(L,O,G,V){return _(L,O,G,V)}function D(L,O,G,V){return te(ie(O),L,G,V)}function b(L,O,G,V){return te(function(P,j){for(var W,Z,ne,oe=[],ce=0;ce<P.length&&!((j-=2)<0);++ce)W=P.charCodeAt(ce),Z=W>>8,ne=W%256,oe.push(ne),oe.push(Z);return oe}(O,L.length-G),L,G,V)}function N(L,O,G){return O===0&&G===L.length?s.fromByteArray(L):s.fromByteArray(L.slice(O,G))}function R(L,O,G){G=Math.min(L.length,G);for(var V=[],P=O;P<G;){var j,W,Z,ne,oe=L[P],ce=null,Ce=oe>239?4:oe>223?3:oe>191?2:1;if(P+Ce<=G)switch(Ce){case 1:oe<128&&(ce=oe);break;case 2:(192&(j=L[P+1]))==128&&(ne=(31&oe)<<6|63&j)>127&&(ce=ne);break;case 3:j=L[P+1],W=L[P+2],(192&j)==128&&(192&W)==128&&(ne=(15&oe)<<12|(63&j)<<6|63&W)>2047&&(ne<55296||ne>57343)&&(ce=ne);break;case 4:j=L[P+1],W=L[P+2],Z=L[P+3],(192&j)==128&&(192&W)==128&&(192&Z)==128&&(ne=(15&oe)<<18|(63&j)<<12|(63&W)<<6|63&Z)>65535&&ne<1114112&&(ce=ne)}ce===null?(ce=65533,Ce=1):ce>65535&&(ce-=65536,V.push(ce>>>10&1023|55296),ce=56320|1023&ce),V.push(ce),P+=Ce}return function(me){var $e=me.length;if($e<=4096)return String.fromCharCode.apply(String,me);for(var Re="",ge=0;ge<$e;)Re+=String.fromCharCode.apply(String,me.slice(ge,ge+=4096));return Re}(V)}n.Buffer=l,n.SlowBuffer=function(L){return+L!=L&&(L=0),l.alloc(+L)},n.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==void 0?i.TYPED_ARRAY_SUPPORT:function(){try{var L=new Uint8Array(1);return L.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},L.foo()===42&&typeof L.subarray=="function"&&L.subarray(1,1).byteLength===0}catch{return!1}}(),n.kMaxLength=o(),l.poolSize=8192,l._augment=function(L){return L.__proto__=l.prototype,L},l.from=function(L,O,G){return h(null,L,O,G)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(L,O,G){return function(V,P,j,W){return p(P),P<=0?f(V,P):j!==void 0?typeof W=="string"?f(V,P).fill(j,W):f(V,P).fill(j):f(V,P)}(null,L,O,G)},l.allocUnsafe=function(L){return d(null,L)},l.allocUnsafeSlow=function(L){return d(null,L)},l.isBuffer=function(L){return!(L==null||!L._isBuffer)},l.compare=function(L,O){if(!l.isBuffer(L)||!l.isBuffer(O))throw new TypeError("Arguments must be Buffers");if(L===O)return 0;for(var G=L.length,V=O.length,P=0,j=Math.min(G,V);P<j;++P)if(L[P]!==O[P]){G=L[P],V=O[P];break}return G<V?-1:V<G?1:0},l.isEncoding=function(L){switch(String(L).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(L,O){if(!c(L))throw new TypeError('"list" argument must be an Array of Buffers');if(L.length===0)return l.alloc(0);var G;if(O===void 0)for(O=0,G=0;G<L.length;++G)O+=L[G].length;var V=l.allocUnsafe(O),P=0;for(G=0;G<L.length;++G){var j=L[G];if(!l.isBuffer(j))throw new TypeError('"list" argument must be an Array of Buffers');j.copy(V,P),P+=j.length}return V},l.byteLength=S,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var L=this.length;if(L%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<L;O+=2)g(this,O,O+1);return this},l.prototype.swap32=function(){var L=this.length;if(L%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<L;O+=4)g(this,O,O+3),g(this,O+1,O+2);return this},l.prototype.swap64=function(){var L=this.length;if(L%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<L;O+=8)g(this,O,O+7),g(this,O+1,O+6),g(this,O+2,O+5),g(this,O+3,O+4);return this},l.prototype.toString=function(){var L=0|this.length;return L===0?"":arguments.length===0?R(this,0,L):v.apply(this,arguments)},l.prototype.equals=function(L){if(!l.isBuffer(L))throw new TypeError("Argument must be a Buffer");return this===L||l.compare(this,L)===0},l.prototype.inspect=function(){var L="",O=n.INSPECT_MAX_BYTES;return this.length>0&&(L=this.toString("hex",0,O).match(/.{2}/g).join(" "),this.length>O&&(L+=" ... ")),"<Buffer "+L+">"},l.prototype.compare=function(L,O,G,V,P){if(!l.isBuffer(L))throw new TypeError("Argument must be a Buffer");if(O===void 0&&(O=0),G===void 0&&(G=L?L.length:0),V===void 0&&(V=0),P===void 0&&(P=this.length),O<0||G>L.length||V<0||P>this.length)throw new RangeError("out of range index");if(V>=P&&O>=G)return 0;if(V>=P)return-1;if(O>=G)return 1;if(this===L)return 0;for(var j=(P>>>=0)-(V>>>=0),W=(G>>>=0)-(O>>>=0),Z=Math.min(j,W),ne=this.slice(V,P),oe=L.slice(O,G),ce=0;ce<Z;++ce)if(ne[ce]!==oe[ce]){j=ne[ce],W=oe[ce];break}return j<W?-1:W<j?1:0},l.prototype.includes=function(L,O,G){return this.indexOf(L,O,G)!==-1},l.prototype.indexOf=function(L,O,G){return x(this,L,O,G,!0)},l.prototype.lastIndexOf=function(L,O,G){return x(this,L,O,G,!1)},l.prototype.write=function(L,O,G,V){if(O===void 0)V="utf8",G=this.length,O=0;else if(G===void 0&&typeof O=="string")V=O,G=this.length,O=0;else{if(!isFinite(O))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");O|=0,isFinite(G)?(G|=0,V===void 0&&(V="utf8")):(V=G,G=void 0)}var P=this.length-O;if((G===void 0||G>P)&&(G=P),L.length>0&&(G<0||O<0)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");for(var j=!1;;)switch(V){case"hex":return T(this,L,O,G);case"utf8":case"utf-8":return w(this,L,O,G);case"ascii":return _(this,L,O,G);case"latin1":case"binary":return E(this,L,O,G);case"base64":return D(this,L,O,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,L,O,G);default:if(j)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),j=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(L,O,G){var V="";G=Math.min(L.length,G);for(var P=O;P<G;++P)V+=String.fromCharCode(127&L[P]);return V}function A(L,O,G){var V="";G=Math.min(L.length,G);for(var P=O;P<G;++P)V+=String.fromCharCode(L[P]);return V}function I(L,O,G){var V=L.length;(!O||O<0)&&(O=0),(!G||G<0||G>V)&&(G=V);for(var P="",j=O;j<G;++j)P+=ee(L[j]);return P}function $(L,O,G){for(var V=L.slice(O,G),P="",j=0;j<V.length;j+=2)P+=String.fromCharCode(V[j]+256*V[j+1]);return P}function U(L,O,G){if(L%1!=0||L<0)throw new RangeError("offset is not uint");if(L+O>G)throw new RangeError("Trying to access beyond buffer length")}function B(L,O,G,V,P,j){if(!l.isBuffer(L))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>P||O<j)throw new RangeError('"value" argument is out of bounds');if(G+V>L.length)throw new RangeError("Index out of range")}function F(L,O,G,V){O<0&&(O=65535+O+1);for(var P=0,j=Math.min(L.length-G,2);P<j;++P)L[G+P]=(O&255<<8*(V?P:1-P))>>>8*(V?P:1-P)}function z(L,O,G,V){O<0&&(O=4294967295+O+1);for(var P=0,j=Math.min(L.length-G,4);P<j;++P)L[G+P]=O>>>8*(V?P:3-P)&255}function H(L,O,G,V,P,j){if(G+V>L.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function X(L,O,G,V,P){return P||H(L,0,G,4),u.write(L,O,G,V,23,4),G+4}function Y(L,O,G,V,P){return P||H(L,0,G,8),u.write(L,O,G,V,52,8),G+8}l.prototype.slice=function(L,O){var G,V=this.length;if((L=~~L)<0?(L+=V)<0&&(L=0):L>V&&(L=V),(O=O===void 0?V:~~O)<0?(O+=V)<0&&(O=0):O>V&&(O=V),O<L&&(O=L),l.TYPED_ARRAY_SUPPORT)(G=this.subarray(L,O)).__proto__=l.prototype;else{var P=O-L;G=new l(P,void 0);for(var j=0;j<P;++j)G[j]=this[j+L]}return G},l.prototype.readUIntLE=function(L,O,G){L|=0,O|=0,G||U(L,O,this.length);for(var V=this[L],P=1,j=0;++j<O&&(P*=256);)V+=this[L+j]*P;return V},l.prototype.readUIntBE=function(L,O,G){L|=0,O|=0,G||U(L,O,this.length);for(var V=this[L+--O],P=1;O>0&&(P*=256);)V+=this[L+--O]*P;return V},l.prototype.readUInt8=function(L,O){return O||U(L,1,this.length),this[L]},l.prototype.readUInt16LE=function(L,O){return O||U(L,2,this.length),this[L]|this[L+1]<<8},l.prototype.readUInt16BE=function(L,O){return O||U(L,2,this.length),this[L]<<8|this[L+1]},l.prototype.readUInt32LE=function(L,O){return O||U(L,4,this.length),(this[L]|this[L+1]<<8|this[L+2]<<16)+16777216*this[L+3]},l.prototype.readUInt32BE=function(L,O){return O||U(L,4,this.length),16777216*this[L]+(this[L+1]<<16|this[L+2]<<8|this[L+3])},l.prototype.readIntLE=function(L,O,G){L|=0,O|=0,G||U(L,O,this.length);for(var V=this[L],P=1,j=0;++j<O&&(P*=256);)V+=this[L+j]*P;return V>=(P*=128)&&(V-=Math.pow(2,8*O)),V},l.prototype.readIntBE=function(L,O,G){L|=0,O|=0,G||U(L,O,this.length);for(var V=O,P=1,j=this[L+--V];V>0&&(P*=256);)j+=this[L+--V]*P;return j>=(P*=128)&&(j-=Math.pow(2,8*O)),j},l.prototype.readInt8=function(L,O){return O||U(L,1,this.length),128&this[L]?-1*(255-this[L]+1):this[L]},l.prototype.readInt16LE=function(L,O){O||U(L,2,this.length);var G=this[L]|this[L+1]<<8;return 32768&G?4294901760|G:G},l.prototype.readInt16BE=function(L,O){O||U(L,2,this.length);var G=this[L+1]|this[L]<<8;return 32768&G?4294901760|G:G},l.prototype.readInt32LE=function(L,O){return O||U(L,4,this.length),this[L]|this[L+1]<<8|this[L+2]<<16|this[L+3]<<24},l.prototype.readInt32BE=function(L,O){return O||U(L,4,this.length),this[L]<<24|this[L+1]<<16|this[L+2]<<8|this[L+3]},l.prototype.readFloatLE=function(L,O){return O||U(L,4,this.length),u.read(this,L,!0,23,4)},l.prototype.readFloatBE=function(L,O){return O||U(L,4,this.length),u.read(this,L,!1,23,4)},l.prototype.readDoubleLE=function(L,O){return O||U(L,8,this.length),u.read(this,L,!0,52,8)},l.prototype.readDoubleBE=function(L,O){return O||U(L,8,this.length),u.read(this,L,!1,52,8)},l.prototype.writeUIntLE=function(L,O,G,V){L=+L,O|=0,G|=0,V||B(this,L,O,G,Math.pow(2,8*G)-1,0);var P=1,j=0;for(this[O]=255&L;++j<G&&(P*=256);)this[O+j]=L/P&255;return O+G},l.prototype.writeUIntBE=function(L,O,G,V){L=+L,O|=0,G|=0,V||B(this,L,O,G,Math.pow(2,8*G)-1,0);var P=G-1,j=1;for(this[O+P]=255&L;--P>=0&&(j*=256);)this[O+P]=L/j&255;return O+G},l.prototype.writeUInt8=function(L,O,G){return L=+L,O|=0,G||B(this,L,O,1,255,0),l.TYPED_ARRAY_SUPPORT||(L=Math.floor(L)),this[O]=255&L,O+1},l.prototype.writeUInt16LE=function(L,O,G){return L=+L,O|=0,G||B(this,L,O,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[O]=255&L,this[O+1]=L>>>8):F(this,L,O,!0),O+2},l.prototype.writeUInt16BE=function(L,O,G){return L=+L,O|=0,G||B(this,L,O,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[O]=L>>>8,this[O+1]=255&L):F(this,L,O,!1),O+2},l.prototype.writeUInt32LE=function(L,O,G){return L=+L,O|=0,G||B(this,L,O,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[O+3]=L>>>24,this[O+2]=L>>>16,this[O+1]=L>>>8,this[O]=255&L):z(this,L,O,!0),O+4},l.prototype.writeUInt32BE=function(L,O,G){return L=+L,O|=0,G||B(this,L,O,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[O]=L>>>24,this[O+1]=L>>>16,this[O+2]=L>>>8,this[O+3]=255&L):z(this,L,O,!1),O+4},l.prototype.writeIntLE=function(L,O,G,V){if(L=+L,O|=0,!V){var P=Math.pow(2,8*G-1);B(this,L,O,G,P-1,-P)}var j=0,W=1,Z=0;for(this[O]=255&L;++j<G&&(W*=256);)L<0&&Z===0&&this[O+j-1]!==0&&(Z=1),this[O+j]=(L/W>>0)-Z&255;return O+G},l.prototype.writeIntBE=function(L,O,G,V){if(L=+L,O|=0,!V){var P=Math.pow(2,8*G-1);B(this,L,O,G,P-1,-P)}var j=G-1,W=1,Z=0;for(this[O+j]=255&L;--j>=0&&(W*=256);)L<0&&Z===0&&this[O+j+1]!==0&&(Z=1),this[O+j]=(L/W>>0)-Z&255;return O+G},l.prototype.writeInt8=function(L,O,G){return L=+L,O|=0,G||B(this,L,O,1,127,-128),l.TYPED_ARRAY_SUPPORT||(L=Math.floor(L)),L<0&&(L=255+L+1),this[O]=255&L,O+1},l.prototype.writeInt16LE=function(L,O,G){return L=+L,O|=0,G||B(this,L,O,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[O]=255&L,this[O+1]=L>>>8):F(this,L,O,!0),O+2},l.prototype.writeInt16BE=function(L,O,G){return L=+L,O|=0,G||B(this,L,O,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[O]=L>>>8,this[O+1]=255&L):F(this,L,O,!1),O+2},l.prototype.writeInt32LE=function(L,O,G){return L=+L,O|=0,G||B(this,L,O,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[O]=255&L,this[O+1]=L>>>8,this[O+2]=L>>>16,this[O+3]=L>>>24):z(this,L,O,!0),O+4},l.prototype.writeInt32BE=function(L,O,G){return L=+L,O|=0,G||B(this,L,O,4,2147483647,-2147483648),L<0&&(L=4294967295+L+1),l.TYPED_ARRAY_SUPPORT?(this[O]=L>>>24,this[O+1]=L>>>16,this[O+2]=L>>>8,this[O+3]=255&L):z(this,L,O,!1),O+4},l.prototype.writeFloatLE=function(L,O,G){return X(this,L,O,!0,G)},l.prototype.writeFloatBE=function(L,O,G){return X(this,L,O,!1,G)},l.prototype.writeDoubleLE=function(L,O,G){return Y(this,L,O,!0,G)},l.prototype.writeDoubleBE=function(L,O,G){return Y(this,L,O,!1,G)},l.prototype.copy=function(L,O,G,V){if(G||(G=0),V||V===0||(V=this.length),O>=L.length&&(O=L.length),O||(O=0),V>0&&V<G&&(V=G),V===G||L.length===0||this.length===0)return 0;if(O<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("sourceStart out of bounds");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),L.length-O<V-G&&(V=L.length-O+G);var P,j=V-G;if(this===L&&G<O&&O<V)for(P=j-1;P>=0;--P)L[P+O]=this[P+G];else if(j<1e3||!l.TYPED_ARRAY_SUPPORT)for(P=0;P<j;++P)L[P+O]=this[P+G];else Uint8Array.prototype.set.call(L,this.subarray(G,G+j),O);return j},l.prototype.fill=function(L,O,G,V){if(typeof L=="string"){if(typeof O=="string"?(V=O,O=0,G=this.length):typeof G=="string"&&(V=G,G=this.length),L.length===1){var P=L.charCodeAt(0);P<256&&(L=P)}if(V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!l.isEncoding(V))throw new TypeError("Unknown encoding: "+V)}else typeof L=="number"&&(L&=255);if(O<0||this.length<O||this.length<G)throw new RangeError("Out of range index");if(G<=O)return this;var j;if(O>>>=0,G=G===void 0?this.length:G>>>0,L||(L=0),typeof L=="number")for(j=O;j<G;++j)this[j]=L;else{var W=l.isBuffer(L)?L:re(new l(L,V).toString()),Z=W.length;for(j=0;j<G-O;++j)this[j+O]=W[j%Z]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function ee(L){return L<16?"0"+L.toString(16):L.toString(16)}function re(L,O){var G;O=O||1/0;for(var V=L.length,P=null,j=[],W=0;W<V;++W){if((G=L.charCodeAt(W))>55295&&G<57344){if(!P){if(G>56319){(O-=3)>-1&&j.push(239,191,189);continue}if(W+1===V){(O-=3)>-1&&j.push(239,191,189);continue}P=G;continue}if(G<56320){(O-=3)>-1&&j.push(239,191,189),P=G;continue}G=65536+(P-55296<<10|G-56320)}else P&&(O-=3)>-1&&j.push(239,191,189);if(P=null,G<128){if((O-=1)<0)break;j.push(G)}else if(G<2048){if((O-=2)<0)break;j.push(G>>6|192,63&G|128)}else if(G<65536){if((O-=3)<0)break;j.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((O-=4)<0)break;j.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return j}function ie(L){return s.toByteArray(function(O){if((O=function(G){return G.trim?G.trim():G.replace(/^\s+|\s+$/g,"")}(O).replace(q,"")).length<2)return"";for(;O.length%4!=0;)O+="=";return O}(L))}function te(L,O,G,V){for(var P=0;P<V&&!(P+G>=O.length||P>=L.length);++P)O[P+G]=L[P];return P}}).call(this,r(78))},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.isASCIIByte=function(i){return i>=0&&i<=127}},function(a,n,r){var i=this&&this.__read||function(u,c){var o=typeof Symbol=="function"&&u[Symbol.iterator];if(!o)return u;var f,l,h=o.call(u),p=[];try{for(;(c===void 0||c-- >0)&&!(f=h.next()).done;)p.push(f.value)}catch(d){l={error:d}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(l)throw l.error}}return p},s=this&&this.__spread||function(){for(var u=[],c=0;c<arguments.length;c++)u=u.concat(i(arguments[c]));return u};Object.defineProperty(n,"__esModule",{value:!0}),n.length=function(u){return u.length},n.byteLowercase=function(u){for(var c=0;c<u.length;c++){var o=u[c];o>=65&&o<=90&&(u[c]=o+32)}},n.byteUppercase=function(u){for(var c=0;c<u.length;c++){var o=u[c];o>=97&&o<=122&&(u[c]=o-32)}},n.byteCaseInsensitiveMatch=function(u,c){if(u.length!==c.length)return!1;for(var o=0;o<u.length;o++){var f=u[o],l=c[o];if(f>=65&&f<=90&&(f+=32),l>=65&&l<=90&&(l+=32),f!==l)return!1}return!0},n.startsWith=function(u,c){for(var o=0;;){if(o>=u.length)return!1;if(o>=c.length)return!0;if(u[o]!==c[o])return!1;o++}},n.byteLessThan=function(u,c){for(var o=0;;){if(o>=u.length)return!1;if(o>=c.length)return!0;var f=u[o],l=c[o];if(f<l)return!0;if(f>l)return!1;o++}},n.isomorphicDecode=function(u){return String.fromCodePoint.apply(String,s(u))}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(6),s=r(7),u=r(0),c=r(12),o=function(){function f(l){this._associatedDocument=l||i.dom.window.document}return f.prototype.createDocumentType=function(l,h,p){return u.namespace_validate(l),u.create_documentType(this._associatedDocument,l,h,p)},f.prototype.createDocument=function(l,h,p){p===void 0&&(p=null);var d=u.create_xmlDocument(),y=null;return h&&(y=u.document_internalCreateElementNS(d,l,h)),p&&d.appendChild(p),y&&d.appendChild(y),d._origin=this._associatedDocument._origin,l===s.namespace.HTML?d._contentType="application/xhtml+xml":l===s.namespace.SVG?d._contentType="image/svg+xml":d._contentType="application/xml",d},f.prototype.createHTMLDocument=function(l){var h=u.create_document();h._type="html",h._contentType="text/html",h.appendChild(u.create_documentType(h,"html","",""));var p=u.element_createAnElement(h,"html",s.namespace.HTML);h.appendChild(p);var d=u.element_createAnElement(h,"head",s.namespace.HTML);if(p.appendChild(d),l!==void 0){var y=u.element_createAnElement(h,"title",s.namespace.HTML);d.appendChild(y);var m=u.create_text(h,l);y.appendChild(m)}var S=u.element_createAnElement(h,"body",s.namespace.HTML);return p.appendChild(S),h._origin=this._associatedDocument._origin,h},f.prototype.hasFeature=function(){return!0},f._create=function(l){return new f(l)},f}();n.DOMImplementationImpl=o,c.idl_defineConst(o.prototype,"_ID","@oozcitak/dom")},function(a,n,r){var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(70),c=r(1),o=r(0),f=function(l){function h(){var p=l.call(this)||this;return p._signalSlots=new Set,p._mutationObserverMicrotaskQueued=!1,p._mutationObservers=new Set,p._iteratorList=new c.FixedSizeSet,p._associatedDocument=o.create_document(),p}return s(h,l),Object.defineProperty(h.prototype,"document",{get:function(){return this._associatedDocument},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"event",{get:function(){return this._currentEvent},enumerable:!0,configurable:!0}),h._create=function(){return new h},h}(u.EventTargetImpl);n.WindowImpl=f},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),s=function(){function u(){}return u.isNode=function(c){return!!c&&c._nodeType!==void 0},u.isDocumentNode=function(c){return u.isNode(c)&&c._nodeType===i.NodeType.Document},u.isDocumentTypeNode=function(c){return u.isNode(c)&&c._nodeType===i.NodeType.DocumentType},u.isDocumentFragmentNode=function(c){return u.isNode(c)&&c._nodeType===i.NodeType.DocumentFragment},u.isAttrNode=function(c){return u.isNode(c)&&c._nodeType===i.NodeType.Attribute},u.isCharacterDataNode=function(c){if(!u.isNode(c))return!1;var o=c._nodeType;return o===i.NodeType.Text||o===i.NodeType.ProcessingInstruction||o===i.NodeType.Comment||o===i.NodeType.CData},u.isTextNode=function(c){return u.isNode(c)&&(c._nodeType===i.NodeType.Text||c._nodeType===i.NodeType.CData)},u.isExclusiveTextNode=function(c){return u.isNode(c)&&c._nodeType===i.NodeType.Text},u.isCDATASectionNode=function(c){return u.isNode(c)&&c._nodeType===i.NodeType.CData},u.isCommentNode=function(c){return u.isNode(c)&&c._nodeType===i.NodeType.Comment},u.isProcessingInstructionNode=function(c){return u.isNode(c)&&c._nodeType===i.NodeType.ProcessingInstruction},u.isElementNode=function(c){return u.isNode(c)&&c._nodeType===i.NodeType.Element},u.isCustomElementNode=function(c){return u.isElementNode(c)&&c._customElementState==="custom"},u.isShadowRoot=function(c){return!!c&&c.host!==void 0},u.isMouseEvent=function(c){return!!c&&c.screenX!==void 0&&c.screenY!=null},u.isSlotable=function(c){return!!c&&c._name!==void 0&&c._assignedSlot!==void 0&&(u.isTextNode(c)||u.isElementNode(c))},u.isSlot=function(c){return!!c&&c._name!==void 0&&c._assignedNodes!==void 0&&u.isElementNode(c)},u.isWindow=function(c){return!!c&&c.navigator!==void 0},u.isEventListener=function(c){return!!c&&c.handleEvent!==void 0},u.isRegisteredObserver=function(c){return!!c&&c.observer!==void 0&&c.options!==void 0},u.isTransientRegisteredObserver=function(c){return!!c&&c.source!==void 0&&u.isRegisteredObserver(c)},u}();n.Guard=s},function(a,n,r){var i,s=this&&this.__extends||(i=function(c,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var h in l)l.hasOwnProperty(h)&&(f[h]=l[h])})(c,o)},function(c,o){function f(){this.constructor=c}i(c,o),c.prototype=o===null?Object.create(o):(f.prototype=o.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var u=function(c){function o(){return c.call(this)||this}return s(o,c),o}(r(98).DocumentImpl);n.XMLDocumentImpl=u},function(a,n,r){var i=this&&this.__values||function(V){var P=typeof Symbol=="function"&&Symbol.iterator,j=P&&V[P],W=0;if(j)return j.call(V);if(V&&typeof V.length=="number")return{next:function(){return V&&W>=V.length&&(V=void 0),{value:V&&V[W++],done:!V}}};throw new TypeError(P?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(V,P){var j=typeof Symbol=="function"&&V[Symbol.iterator];if(!j)return V;var W,Z,ne=j.call(V),oe=[];try{for(;(P===void 0||P-- >0)&&!(W=ne.next()).done;)oe.push(W.value)}catch(ce){Z={error:ce}}finally{try{W&&!W.done&&(j=ne.return)&&j.call(ne)}finally{if(Z)throw Z.error}}return oe};Object.defineProperty(n,"__esModule",{value:!0});var u,c=r(1),o=r(243),f=r(7),l=r(244),h={ftp:21,file:null,http:80,https:443,ws:80,wss:443},p=/[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,d=/[ "<>`]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,y=/[ "<>`#?{}]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,m=/[ "<>`#?{}/:;=@\[\]\\\^\|]|[\0-\x1F\x7F-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,S=/[0-9A-Za-z!\$&-\/:;=\?@_~\xA0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uD83E\uD840-\uD87E\uD880-\uD8BE\uD8C0-\uD8FE\uD900-\uD93E\uD940-\uD97E\uD980-\uD9BE\uD9C0-\uD9FE\uDA00-\uDA3E\uDA40-\uDA7E\uDA80-\uDABE\uDAC0-\uDAFE\uDB00-\uDB3E\uDB40-\uDB7E\uDB80-\uDBBE\uDBC0-\uDBFE][\uDC00-\uDFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDC00-\uDFFD]/,v=/[\0\t\f\r #%/:?@\[\\\]]/;function g(V){u!==void 0&&u.call(null,"Validation Error: "+V)}function x(){return{scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null}}function C(V){return V in h}function T(V){return C(V.scheme)}function w(V){return h[V]||null}function _(V){return V.username!==""||V.password!==""}function E(V,P){var j,W;P===void 0&&(P=!1);var Z=V.scheme+":";if(V.host!==null?(Z+="//",_(V)&&(Z+=V.username,V.password!==""&&(Z+=":"+V.password),Z+="@"),Z+=D(V.host),V.port!==null&&(Z+=":"+V.port)):V.host===null&&V.scheme==="file"&&(Z+="//"),V._cannotBeABaseURLFlag)Z+=V.path[0];else try{for(var ne=i(V.path),oe=ne.next();!oe.done;oe=ne.next())Z+="/"+oe.value}catch(ce){j={error:ce}}finally{try{oe&&!oe.done&&(W=ne.return)&&W.call(ne)}finally{if(j)throw j.error}}return V.query!==null&&(Z+="?"+V.query),P||V.fragment===null||(Z+="#"+V.fragment),Z}function D(V){return c.isNumber(V)?b(V):c.isArray(V)?"["+N(V)+"]":V}function b(V){for(var P="",j=V,W=1;W<=4;W++)P=(j%256).toString()+P,W!==4&&(P="."+P),j=Math.floor(j/256);return P}function N(V){for(var P="",j=null,W=-1,Z=0,ne=0,oe=0;oe<8;oe++)if(V[oe]===0){Z=1;for(var ce=oe+1;ce<8&&V[ce]===0;ce++)Z++;Z>ne&&(ne=Z,W=oe)}ne>1&&(j=W);for(var Ce=!1,me=0;me<8;me++)Ce&&V[me]===0||(Ce&&(Ce=!1),j!==me?(P+=V[me].toString(16),me!==7&&(P+=":")):(P+=me===0?"::":":",Ce=!0));return P}function R(V,P,j,W,Z){var ne,oe,ce,Ce;if(W===void 0){W={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null,_cannotBeABaseURLFlag:!1,_blobURLEntry:null};var me=/^[\u0000-\u001F\u0020]+/,$e=/[\u0000-\u001F\u0020]+$/;(me.test(V)||$e.test(V))&&g("Input string contains leading or trailing control characters or space."),V=(V=V.replace(me,"")).replace($e,"")}var Re=/[\u0009\u000A\u000D]/g;Re.test(V)&&g("Input string contains tab or newline characters."),V=V.replace(Re,"");var ge=Z===void 0?o.ParserState.SchemeStart:Z;P===void 0&&(P=null);for(var Je=j===void 0||j==="replacement"||j==="UTF-16BE"||j==="UTF-16LE"?"UTF-8":j,K="",_e=!1,Ee=!1,de=!1,Q=new c.StringWalker(V);;){switch(ge){case o.ParserState.SchemeStart:if(f.codePoint.ASCIIAlpha.test(Q.c()))K+=Q.c().toLowerCase(),ge=o.ParserState.Scheme;else{if(Z!==void 0)return g("Invalid scheme start character."),null;ge=o.ParserState.NoScheme,Q.pointer--}break;case o.ParserState.Scheme:if(f.codePoint.ASCIIAlphanumeric.test(Q.c())||Q.c()==="+"||Q.c()==="-"||Q.c()===".")K+=Q.c().toLowerCase();else{if(Q.c()!==":"){if(Z===void 0){K="",ge=o.ParserState.NoScheme,Q.pointer=0;continue}return g("Invalid input string."),null}if(Z!==void 0&&(C(W.scheme)&&!C(K)||!C(W.scheme)&&C(K)||(_(W)||W.port!==null)&&K==="file"||W.scheme==="file"&&(W.host===""||W.host===null)))return W;if(W.scheme=K,Z!==void 0)return W.port===w(W.scheme)&&(W.port=null),W;K="",W.scheme==="file"?(Q.remaining().startsWith("//")||g("Invalid file URL scheme, '//' expected."),ge=o.ParserState.File):T(W)&&P!==null&&P.scheme===W.scheme?ge=o.ParserState.SpecialRelativeOrAuthority:T(W)?ge=o.ParserState.SpecialAuthoritySlashes:Q.remaining().startsWith("/")?(ge=o.ParserState.PathOrAuthority,Q.pointer++):(W._cannotBeABaseURLFlag=!0,W.path.push(""),ge=o.ParserState.CannotBeABaseURLPath)}break;case o.ParserState.NoScheme:if(P===null||P._cannotBeABaseURLFlag&&Q.c()!=="#")return g("Invalid input string."),null;P._cannotBeABaseURLFlag&&Q.c()==="#"?(W.scheme=P.scheme,W.path=f.list.clone(P.path),W.query=P.query,W.fragment="",W._cannotBeABaseURLFlag=!0,ge=o.ParserState.Fragment):P.scheme!=="file"?(ge=o.ParserState.Relative,Q.pointer--):(ge=o.ParserState.File,Q.pointer--);break;case o.ParserState.SpecialRelativeOrAuthority:Q.c()==="/"&&Q.remaining().startsWith("/")?(ge=o.ParserState.SpecialAuthorityIgnoreSlashes,Q.pointer++):(g("Invalid input string."),ge=o.ParserState.Relative,Q.pointer--);break;case o.ParserState.PathOrAuthority:Q.c()==="/"?ge=o.ParserState.Authority:(ge=o.ParserState.Path,Q.pointer--);break;case o.ParserState.Relative:if(P===null)throw new Error("Invalid parser state. Base URL is null.");switch(W.scheme=P.scheme,Q.c()){case"":W.username=P.username,W.password=P.password,W.host=P.host,W.port=P.port,W.path=f.list.clone(P.path),W.query=P.query;break;case"/":ge=o.ParserState.RelativeSlash;break;case"?":W.username=P.username,W.password=P.password,W.host=P.host,W.port=P.port,W.path=f.list.clone(P.path),W.query="",ge=o.ParserState.Query;break;case"#":W.username=P.username,W.password=P.password,W.host=P.host,W.port=P.port,W.path=f.list.clone(P.path),W.query=P.query,W.fragment="",ge=o.ParserState.Fragment;break;default:T(W)&&Q.c()==="\\"?(g("Invalid input string."),ge=o.ParserState.RelativeSlash):(W.username=P.username,W.password=P.password,W.host=P.host,W.port=P.port,W.path=f.list.clone(P.path),W.path.length!==0&&W.path.splice(W.path.length-1,1),ge=o.ParserState.Path,Q.pointer--)}break;case o.ParserState.RelativeSlash:if(!T(W)||Q.c()!=="/"&&Q.c()!=="\\")if(Q.c()==="/")ge=o.ParserState.Authority;else{if(P===null)throw new Error("Invalid parser state. Base URL is null.");W.username=P.username,W.password=P.password,W.host=P.host,W.port=P.port,ge=o.ParserState.Path,Q.pointer--}else Q.c()==="\\"&&g("Invalid input string."),ge=o.ParserState.SpecialAuthorityIgnoreSlashes;break;case o.ParserState.SpecialAuthoritySlashes:Q.c()==="/"&&Q.remaining().startsWith("/")?(ge=o.ParserState.SpecialAuthorityIgnoreSlashes,Q.pointer++):(g("Expected '//'."),ge=o.ParserState.SpecialAuthorityIgnoreSlashes,Q.pointer--);break;case o.ParserState.SpecialAuthorityIgnoreSlashes:Q.c()!=="/"&&Q.c()!=="\\"?(ge=o.ParserState.Authority,Q.pointer--):g("Unexpected '/' or '\\'.");break;case o.ParserState.Authority:if(Q.c()==="@"){g("Unexpected '@'."),_e&&(K="%40"+K),_e=!0;try{for(var ue=(ne=void 0,i(K)),he=ue.next();!he.done;he=ue.next()){var fe=he.value;if(fe!==":"||de){var ve=te(fe,m);de?W.password+=ve:W.username+=ve}else de=!0}}catch(It){ne={error:It}}finally{try{he&&!he.done&&(oe=ue.return)&&oe.call(ue)}finally{if(ne)throw ne.error}}K=""}else if(Q.c()===""||Q.c()==="/"||Q.c()==="?"||Q.c()==="#"||T(W)&&Q.c()==="\\"){if(_e&&K==="")return g("Invalid input string."),null;Q.pointer-=K.length+1,K="",ge=o.ParserState.Host}else K+=Q.c();break;case o.ParserState.Host:case o.ParserState.Hostname:if(Z!==void 0&&W.scheme==="file")Q.pointer--,ge=o.ParserState.FileHost;else if(Q.c()!==":"||Ee)if(Q.c()===""||Q.c()==="/"||Q.c()==="?"||Q.c()==="#"||T(W)&&Q.c()==="\\"){if(Q.pointer--,T(W)&&K==="")return g("Invalid input string."),null;if(Z!==void 0&&K===""&&(_(W)||W.port!==null))return g("Invalid input string."),W;if((xe=F(K,!T(W)))===null)return null;if(W.host=xe,K="",ge=o.ParserState.PathStart,Z!==void 0)return W}else Q.c()==="["&&(Ee=!0),Q.c()==="]"&&(Ee=!1),K+=Q.c();else{if(K==="")return g("Invalid input string."),null;if((xe=F(K,!T(W)))===null)return null;if(W.host=xe,K="",ge=o.ParserState.Port,Z===o.ParserState.Hostname)return W}break;case o.ParserState.Port:if(f.codePoint.ASCIIDigit.test(Q.c()))K+=Q.c();else{if(!(Q.c()===""||Q.c()==="/"||Q.c()==="?"||Q.c()==="#"||T(W)&&Q.c()==="\\"||Z))return g("Invalid input string."),null;if(K!==""&&K!==""){var ke=parseInt(K,10);if(ke>Math.pow(2,16)-1)return g("Invalid port number."),null;W.port=ke===w(W.scheme)?null:ke,K=""}if(Z!==void 0)return W;ge=o.ParserState.PathStart,Q.pointer--}break;case o.ParserState.File:if(W.scheme="file",Q.c()==="/"||Q.c()==="\\")Q.c()==="\\"&&g("Invalid input string."),ge=o.ParserState.FileSlash;else if(P!==null&&P.scheme==="file")switch(Q.c()){case"":W.host=P.host,W.path=f.list.clone(P.path),W.query=P.query;break;case"?":W.host=P.host,W.path=f.list.clone(P.path),W.query="",ge=o.ParserState.Query;break;case"#":W.host=P.host,W.path=f.list.clone(P.path),W.query=P.query,W.fragment="",ge=o.ParserState.Fragment;break;default:B(Q.substring())?g("Unexpected windows drive letter in input string."):(W.host=P.host,W.path=f.list.clone(P.path),I(W)),ge=o.ParserState.Path,Q.pointer--}else ge=o.ParserState.Path,Q.pointer--;break;case o.ParserState.FileSlash:Q.c()==="/"||Q.c()==="\\"?(Q.c()==="\\"&&g("Invalid input string."),ge=o.ParserState.FileHost):(P===null||P.scheme!=="file"||B(Q.substring())||($(P.path[0])?W.path.push(P.path[0]):W.host=P.host),ge=o.ParserState.Path,Q.pointer--);break;case o.ParserState.FileHost:if(Q.c()===""||Q.c()==="/"||Q.c()==="\\"||Q.c()==="?"||Q.c()==="#")if(Q.pointer--,Z===void 0&&U(K))g("Unexpected windows drive letter in input string."),ge=o.ParserState.Path;else if(K===""){if(W.host="",Z!==void 0)return W;ge=o.ParserState.PathStart}else{var xe;if((xe=F(K,!T(W)))===null)return null;if(xe==="localhost"&&(xe=""),W.host=xe,Z!==void 0)return W;K="",ge=o.ParserState.PathStart}else K+=Q.c();break;case o.ParserState.PathStart:T(W)?(Q.c()==="\\"&&g("Invalid input string."),ge=o.ParserState.Path,Q.c()!=="/"&&Q.c()!=="\\"&&Q.pointer--):Z===void 0&&Q.c()==="?"?(W.query="",ge=o.ParserState.Query):Z===void 0&&Q.c()==="#"?(W.fragment="",ge=o.ParserState.Fragment):Q.c()!==""&&(ge=o.ParserState.Path,Q.c()!=="/"&&Q.pointer--);break;case o.ParserState.Path:if(Q.c()===""||Q.c()==="/"||T(W)&&Q.c()==="\\"||Z===void 0&&(Q.c()==="?"||Q.c()==="#")){if(T(W)&&Q.c()==="\\"&&g("Invalid input string."),A(K))I(W),Q.c()==="/"||T(W)&&Q.c()==="\\"||W.path.push("");else if(!M(K)||Q.c()==="/"||T(W)&&Q.c()==="\\"){if(!M(K)){if(W.scheme==="file"&&W.path.length===0&&U(K)){W.host!==null&&W.host!==""&&(g("Invalid input string."),W.host="");var Fe=Array.from(K);K=Fe.slice(0,1)+":"+Fe.slice(2)}W.path.push(K)}}else W.path.push("");if(K="",W.scheme==="file"&&(Q.c()===""||Q.c()==="?"||Q.c()==="#"))for(;W.path.length>1&&W.path[0]==="";)g("Invalid input string."),W.path.splice(0,1);Q.c()==="?"&&(W.query="",ge=o.ParserState.Query),Q.c()==="#"&&(W.fragment="",ge=o.ParserState.Fragment)}else S.test(Q.c())||Q.c()==="%"||g("Character is not a URL code point or a percent encoded character."),Q.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(Q.remaining())||g("Percent encoded character must be followed by two hex digits."),K+=te(Q.c(),y);break;case o.ParserState.CannotBeABaseURLPath:Q.c()==="?"?(W.query="",ge=o.ParserState.Query):Q.c()==="#"?(W.fragment="",ge=o.ParserState.Fragment):(Q.c()===""||S.test(Q.c())||Q.c()==="%"||g("Character is not a URL code point or a percent encoded character."),Q.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(Q.remaining())||g("Percent encoded character must be followed by two hex digits."),Q.c()!==""&&(W.path[0]+=te(Q.c(),p)));break;case o.ParserState.Query:if(Je==="UTF-8"||T(W)&&W.scheme!=="ws"&&W.scheme!=="wss"||(Je="UTF-8"),Z===void 0&&Q.c()==="#")W.fragment="",ge=o.ParserState.Fragment;else if(Q.c()!==""){if(S.test(Q.c())||Q.c()==="%"||g("Character is not a URL code point or a percent encoded character."),Q.c()!=="%"||/^[0-9a-fA-F][0-9a-fA-F]/.test(Q.remaining())||g("Percent encoded character must be followed by two hex digits."),Je.toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var Be=c.utf8Encode(Q.c());if(Be.length>=3&&Be[0]===38&&Be[1]===35&&Be[Be.length-1]===59)Be=Be.subarray(2,Be.length-1),W.query+="%26%23"+f.byteSequence.isomorphicDecode(Be)+"%3B";else try{for(var yt=(ce=void 0,i(Be)),Ot=yt.next();!Ot.done;Ot=yt.next()){var tt=Ot.value;tt<33||tt>126||tt===34||tt===35||tt===60||tt===62||tt===39&&T(W)?W.query+=ee(tt):W.query+=String.fromCharCode(tt)}}catch(It){ce={error:It}}finally{try{Ot&&!Ot.done&&(Ce=yt.return)&&Ce.call(yt)}finally{if(ce)throw ce.error}}}break;case o.ParserState.Fragment:Q.c()===""||(Q.c()==="\0"?g("NULL character in input string."):(S.test(Q.c())||Q.c()==="%"||g("Unexpected character in fragment string."),Q.c()!=="%"||/^[A-Za-z0-9][A-Za-z0-9]/.test(Q.remaining())||g("Unexpected character in fragment string."),W.fragment+=te(Q.c(),d)))}if(Q.eof)break;Q.pointer++}return W}function M(V){return V==="."||V.toLowerCase()==="%2e"}function A(V){var P=V.toLowerCase();return P===".."||P===".%2e"||P==="%2e."||P==="%2e%2e"}function I(V){var P=V.path;P.length!==0&&(V.scheme==="file"&&P.length===1&&$(P[0])||V.path.splice(V.path.length-1,1))}function $(V){return V.length>=2&&f.codePoint.ASCIIAlpha.test(V[0])&&V[1]===":"}function U(V){return V.length>=2&&f.codePoint.ASCIIAlpha.test(V[0])&&(V[1]===":"||V[1]==="|")}function B(V){return V.length>=2&&U(V)&&(V.length===2||V[2]==="/"||V[2]==="\\"||V[2]==="?"||V[2]==="#")}function F(V,P){if(P===void 0&&(P=!1),V.startsWith("["))return V.endsWith("]")?X(V.substring(1,V.length-1)):(g("Expected ']' after '['."),null);if(P)return Y(V);var j=G(c.utf8Decode(ie(V)));if(j===null||v.test(j))return g("Invalid domain."),null;var W=H(j);return W===null||c.isNumber(W)?W:j}function z(V,P){P===void 0&&(P={value:!1});var j=10;return V.startsWith("0x")||V.startsWith("0X")?(P.value=!0,V=V.substr(2),j=16):V.length>=2&&V[0]==="0"&&(P.value=!0,V=V.substr(1),j=8),V===""?0:(j===10?/^[0-9]+$/:j===16?/^[0-9A-Fa-f]+$/:/^[0-7]+$/).test(V)?parseInt(V,j):null}function H(V){var P,j,W,Z,ne={value:!1},oe=V.split(".");if(oe[oe.length-1]===""&&(ne.value=!0,oe.length>1&&oe.pop()),oe.length>4)return V;var ce=[];try{for(var Ce=i(oe),me=Ce.next();!me.done;me=Ce.next()){var $e=me.value;if($e===""||(Ee=z($e,ne))===null)return V;ce.push(Ee)}}catch(de){P={error:de}}finally{try{me&&!me.done&&(j=Ce.return)&&j.call(Ce)}finally{if(P)throw P.error}}ne.value&&g("Invalid IP v4 address.");for(var Re=0;Re<ce.length;Re++)if(ce[Re]>255&&(g("Invalid IP v4 address."),Re<ce.length-1))return null;if(ce[ce.length-1]>=Math.pow(256,5-ce.length))return g("Invalid IP v4 address."),null;var ge=ce[ce.length-1];ce.pop();var Je=0;try{for(var K=i(ce),_e=K.next();!_e.done;_e=K.next()){var Ee;ge+=(Ee=_e.value)*Math.pow(256,3-Je),Je++}}catch(de){W={error:de}}finally{try{_e&&!_e.done&&(Z=K.return)&&Z.call(K)}finally{if(W)throw W.error}}return ge}function X(V){var P,j=[0,0,0,0,0,0,0,0],W=0,Z=null,ne=new c.StringWalker(V);if(ne.c()===":"){if(!ne.remaining().startsWith(":"))return g("Invalid IP v6 address."),null;ne.pointer+=2,Z=W+=1}for(;ne.c()!=="";){if(W===8)return g("Invalid IP v6 address."),null;if(ne.c()!==":"){for(var oe=0,ce=0;ce<4&&f.codePoint.ASCIIHexDigit.test(ne.c());)oe=16*oe+parseInt(ne.c(),16),ne.pointer++,ce++;if(ne.c()==="."){if(ce===0||(ne.pointer-=ce,W>6))return g("Invalid IP v6 address."),null;for(var Ce=0;ne.c()!=="";){var me=null;if(Ce>0){if(!(ne.c()==="."&&Ce<4))return g("Invalid IP v6 address."),null;ne.pointer++}if(!f.codePoint.ASCIIDigit.test(ne.c()))return g("Invalid IP v6 address."),null;for(;f.codePoint.ASCIIDigit.test(ne.c());){var $e=parseInt(ne.c(),10);if(me===null)me=$e;else{if(me===0)return g("Invalid IP v6 address."),null;me=10*me+$e}if(me>255)return g("Invalid IP v6 address."),null;ne.pointer++}if(me===null)return g("Invalid IP v6 address."),null;j[W]=256*j[W]+me,++Ce!==2&&Ce!==4||W++}if(Ce!==4)return g("Invalid IP v6 address."),null;break}if(ne.c()===":"){if(ne.pointer++,ne.c()==="")return g("Invalid IP v6 address."),null}else if(ne.c()!=="")return g("Invalid IP v6 address."),null;j[W]=oe,W++}else{if(Z!==null)return g("Invalid IP v6 address."),null;ne.pointer++,Z=++W}}if(Z!==null){var Re=W-Z;for(W=7;W!==0&&Re>0;)P=s([j[Z+Re-1],j[W]],2),j[W]=P[0],j[Z+Re-1]=P[1],W--,Re--}else if(Z===null&&W!==8)return g("Invalid IP v6 address."),null;return j}function Y(V){var P,j;if(/[\x00\t\f\r #/:?@\[\\\]]/.test(V))return g("Invalid host string."),null;var W="";try{for(var Z=i(V),ne=Z.next();!ne.done;ne=Z.next())W+=te(ne.value,p)}catch(oe){P={error:oe}}finally{try{ne&&!ne.done&&(j=Z.return)&&j.call(Z)}finally{if(P)throw P.error}}return W}function q(V){return null}function ee(V){return"%"+("00"+V.toString(16).toUpperCase()).slice(-2)}function re(V){for(var P=function(ce){return ce>=48&&ce<=57||ce>=65&&ce<=70||ce>=97&&ce<=102},j=new Uint8Array(V.length),W=0,Z=0;Z<V.length;Z++){var ne=V[Z];if(ne!==37)j[W]=ne,W++;else if(ne===37&&Z>=V.length-2)j[W]=ne,W++;else if(ne!==37||P(V[Z+1])&&P(V[Z+2])){var oe=parseInt(c.utf8Decode(Uint8Array.of(V[Z+1],V[Z+2])),16);j[W]=oe,W++,Z+=2}else j[W]=ne,W++}return j.subarray(0,W)}function ie(V){return re(c.utf8Encode(V))}function te(V,P){var j,W;if(!P.test(V))return V;var Z=c.utf8Encode(V),ne="";try{for(var oe=i(Z),ce=oe.next();!ce.done;ce=oe.next())ne+=ee(ce.value)}catch(Ce){j={error:Ce}}finally{try{ce&&!ce.done&&(W=oe.return)&&W.call(oe)}finally{if(j)throw j.error}}return ne}function L(V){var P,j,W,Z,ne=[],oe=[];try{for(var ce=i(V),Ce=ce.next();!Ce.done;Ce=ce.next()){var me=Ce.value;me===38?(ne.push(Uint8Array.from(oe)),oe=[]):oe.push(me)}}catch(he){P={error:he}}finally{try{Ce&&!Ce.done&&(j=ce.return)&&j.call(ce)}finally{if(P)throw P.error}}oe.length!==0&&ne.push(Uint8Array.from(oe));var $e=[];try{for(var Re=i(ne),ge=Re.next();!ge.done;ge=Re.next()){var Je=ge.value;if(Je.length!==0){for(var K=Je.indexOf(61),_e=K!==-1?Je.slice(0,K):Je,Ee=K!==-1?Je.slice(K+1):new Uint8Array,de=0;de<_e.length;de++)_e[de]===43&&(_e[de]=32);for(de=0;de<Ee.length;de++)Ee[de]===43&&(Ee[de]=32);var Q=c.utf8Decode(_e),ue=c.utf8Decode(Ee);$e.push([Q,ue])}}}catch(he){W={error:he}}finally{try{ge&&!ge.done&&(Z=Re.return)&&Z.call(Re)}finally{if(W)throw W.error}}return $e}function O(V){var P,j,W="";try{for(var Z=i(V),ne=Z.next();!ne.done;ne=Z.next()){var oe=ne.value;W+=oe===32?"+":oe===42||oe===45||oe===46||oe>=48&&oe<=57||oe>=65&&oe<=90||oe===95||oe>=97&&oe<=122?String.fromCodePoint(oe):ee(oe)}}catch(ce){P={error:ce}}finally{try{ne&&!ne.done&&(j=Z.return)&&j.call(Z)}finally{if(P)throw P.error}}return W}function G(V,P){var j=l.domainToASCII(V);return j===""?(g("Invalid domain name."),null):j}n.setValidationErrorCallback=function(V){u=V},n.newURL=x,n.isSpecialScheme=C,n.isSpecial=T,n.defaultPort=w,n.includesCredentials=_,n.cannotHaveAUsernamePasswordPort=function(V){return V.host===null||V.host===""||V._cannotBeABaseURLFlag||V.scheme==="file"},n.urlSerializer=E,n.hostSerializer=D,n.iPv4Serializer=b,n.iPv6Serializer=N,n.urlParser=function(V,P,j){var W=R(V,P,j);return W===null?null:(W.scheme!=="blob"||(W._blobURLEntry=null),W)},n.basicURLParser=R,n.setTheUsername=function(V,P){var j,W,Z="";try{for(var ne=i(P),oe=ne.next();!oe.done;oe=ne.next())Z+=te(oe.value,m)}catch(ce){j={error:ce}}finally{try{oe&&!oe.done&&(W=ne.return)&&W.call(ne)}finally{if(j)throw j.error}}V.username=Z},n.setThePassword=function(V,P){var j,W,Z="";try{for(var ne=i(P),oe=ne.next();!oe.done;oe=ne.next())Z+=te(oe.value,m)}catch(ce){j={error:ce}}finally{try{oe&&!oe.done&&(W=ne.return)&&W.call(ne)}finally{if(j)throw j.error}}V.password=Z},n.isSingleDotPathSegment=M,n.isDoubleDotPathSegment=A,n.shorten=I,n.isNormalizedWindowsDriveLetter=$,n.isWindowsDriveLetter=U,n.startsWithAWindowsDriveLetter=B,n.hostParser=F,n.iPv4NumberParser=z,n.iPv4Parser=H,n.iPv6Parser=X,n.opaqueHostParser=Y,n.resolveABlobURL=q,n.percentEncode=ee,n.percentDecode=re,n.stringPercentDecode=ie,n.utf8PercentEncode=te,n.hostEquals=function(V,P){return V===P},n.urlEquals=function(V,P,j){return j===void 0&&(j=!1),E(V,j)===E(P,j)},n.urlEncodedStringParser=function(V){return L(c.utf8Encode(V))},n.urlEncodedParser=L,n.urlEncodedByteSerializer=O,n.urlEncodedSerializer=function(V,P){var j,W;if((P===void 0||P==="replacement"||P==="UTF-16BE"||P==="UTF-16LE"?"UTF-8":P).toUpperCase()!=="UTF-8")throw new Error("Only UTF-8 encoding is supported.");var Z="";try{for(var ne=i(V),oe=ne.next();!oe.done;oe=ne.next()){var ce=oe.value,Ce=O(c.utf8Encode(ce[0])),me=ce[1];me=O(c.utf8Encode(me)),Z!==""&&(Z+="&"),Z+=Ce+"="+me}}catch($e){j={error:$e}}finally{try{oe&&!oe.done&&(W=ne.return)&&W.call(ne)}finally{if(j)throw j.error}}return Z},n.origin=function V(P){switch(P.scheme){case"blob":P._blobURLEntry;var j=R(P.path[0]);return j===null?o.OpaqueOrigin:V(j);case"ftp":case"http":case"https":case"ws":case"wss":return[P.scheme,P.host===null?"":P.host,P.port,null];case"file":default:return o.OpaqueOrigin}},n.domainToASCII=G,n.domainToUnicode=function(V,P){var j=l.domainToUnicode(V);return j===""&&g("Invalid domain name."),j},n.asciiSerializationOfAnOrigin=function(V){if(V[0]===""&&V[1]===""&&V[2]===null&&V[3]===null)return"null";var P=V[0]+"://"+D(V[1]);return V[2]!==null&&(P+=":"+V[2].toString()),P}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(0),s=function(){function u(){this._signal=i.create_abortSignal()}return Object.defineProperty(u.prototype,"signal",{get:function(){return this._signal},enumerable:!0,configurable:!0}),u.prototype.abort=function(){i.abort_signalAbort(this._signal)},u}();n.AbortControllerImpl=s},function(a,n,r){var i,s=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])})(f,l)},function(f,l){function h(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(70),c=r(0),o=function(f){function l(){var h=f.call(this)||this;return h._abortedFlag=!1,h._abortAlgorithms=new Set,h}return s(l,f),Object.defineProperty(l.prototype,"aborted",{get:function(){return this._abortedFlag},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"onabort",{get:function(){return c.event_getterEventHandlerIDLAttribute(this,"onabort")},set:function(h){c.event_setterEventHandlerIDLAttribute(this,"onabort",h)},enumerable:!0,configurable:!0}),l._create=function(){return new l},l}(u.EventTargetImpl);n.AbortSignalImpl=o},function(a,n,r){var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(2),c=r(34),o=r(12),f=function(l){function h(p,d,y){var m=l.call(this)||this;return m._name="",m._publicId="",m._systemId="",m._name=p,m._publicId=d,m._systemId=y,m}return s(h,l),Object.defineProperty(h.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"publicId",{get:function(){return this._publicId},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"systemId",{get:function(){return this._systemId},enumerable:!0,configurable:!0}),h.prototype.before=function(){for(var p=[],d=0;d<arguments.length;d++)p[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},h.prototype.after=function(){for(var p=[],d=0;d<arguments.length;d++)p[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},h.prototype.replaceWith=function(){for(var p=[],d=0;d<arguments.length;d++)p[d]=arguments[d];throw new Error("Mixin: ChildNode not implemented.")},h.prototype.remove=function(){throw new Error("Mixin: ChildNode not implemented.")},h._create=function(p,d,y,m){y===void 0&&(y=""),m===void 0&&(m="");var S=new h(d,y,m);return S._nodeDocument=p,S},h}(c.NodeImpl);n.DocumentTypeImpl=f,o.idl_defineConst(f.prototype,"_nodeType",u.NodeType.DocumentType)},function(a,n,r){var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(100),c=r(1),o=r(0),f=function(l){function h(p,d){var y=l.call(this)||this;return y._host=p,y._mode=d,y}return s(h,l),Object.defineProperty(h.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),h.prototype._getTheParent=function(p){return p._composedFlag||c.isEmpty(p._path)||o.tree_rootNode(p._path[0].invocationTarget)!==this?this._host:null},h._create=function(p,d){return new h(d,"closed")},h}(u.DocumentFragmentImpl);n.ShadowRootImpl=f},function(a,n,r){var i,s=this&&this.__extends||(i=function(h,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,y){d.__proto__=y}||function(d,y){for(var m in y)y.hasOwnProperty(m)&&(d[m]=y[m])})(h,p)},function(h,p){function d(){this.constructor=h}i(h,p),h.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(2),c=r(34),o=r(0),f=r(12),l=function(h){function p(d){var y=h.call(this)||this;return y._namespace=null,y._namespacePrefix=null,y._element=null,y._value="",y._localName=d,y}return s(p,h),Object.defineProperty(p.prototype,"ownerElement",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"namespaceURI",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"prefix",{get:function(){return this._namespacePrefix},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"localName",{get:function(){return this._localName},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"name",{get:function(){return this._qualifiedName},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"value",{get:function(){return this._value},set:function(d){o.attr_setAnExistingAttributeValue(this,d)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"_qualifiedName",{get:function(){return this._namespacePrefix!==null?this._namespacePrefix+":"+this._localName:this._localName},enumerable:!0,configurable:!0}),p._create=function(d,y){var m=new p(y);return m._nodeDocument=d,m},p}(c.NodeImpl);n.AttrImpl=l,f.idl_defineConst(l.prototype,"_nodeType",u.NodeType.Attribute),f.idl_defineConst(l.prototype,"specified",!0)},function(a,n,r){var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(101),c=r(2),o=r(12),f=function(l){function h(p){return l.call(this,p)||this}return s(h,l),h._create=function(p,d){d===void 0&&(d="");var y=new h(d);return y._nodeDocument=p,y},h}(u.TextImpl);n.CDATASectionImpl=f,o.idl_defineConst(f.prototype,"_nodeType",c.NodeType.CData)},function(a,n,r){var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(2),c=r(71),o=r(12),f=function(l){function h(p){return p===void 0&&(p=""),l.call(this,p)||this}return s(h,l),h._create=function(p,d){d===void 0&&(d="");var y=new h(d);return y._nodeDocument=p,y},h}(c.CharacterDataImpl);n.CommentImpl=f,o.idl_defineConst(f.prototype,"_nodeType",u.NodeType.Comment)},function(a,n,r){var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(2),c=r(71),o=r(12),f=function(l){function h(p,d){var y=l.call(this,d)||this;return y._target=p,y}return s(h,l),Object.defineProperty(h.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),h._create=function(p,d,y){var m=new h(d,y);return m._nodeDocument=p,m},h}(c.CharacterDataImpl);n.ProcessingInstructionImpl=f,o.idl_defineConst(f.prototype,"_nodeType",u.NodeType.ProcessingInstruction)},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(7),s=r(0),u=r(3),c=r(1),o=function(){function f(l,h){return this._live=!0,this._root=l,this._filter=h,new Proxy(this,this)}return Object.defineProperty(f.prototype,"length",{get:function(){for(var l=this,h=0,p=s.tree_getFirstDescendantNode(this._root,!1,!1,function(d){return u.Guard.isElementNode(d)&&l._filter(d)});p!==null;)h++,p=s.tree_getNextDescendantNode(this._root,p,!1,!1,function(d){return u.Guard.isElementNode(d)&&l._filter(d)});return h},enumerable:!0,configurable:!0}),f.prototype.item=function(l){for(var h=this,p=0,d=s.tree_getFirstDescendantNode(this._root,!1,!1,function(y){return u.Guard.isElementNode(y)&&h._filter(y)});d!==null;){if(p===l)return d;p++,d=s.tree_getNextDescendantNode(this._root,d,!1,!1,function(y){return u.Guard.isElementNode(y)&&h._filter(y)})}return null},f.prototype.namedItem=function(l){var h=this;if(l==="")return null;for(var p=s.tree_getFirstDescendantNode(this._root,!1,!1,function(m){return u.Guard.isElementNode(m)&&h._filter(m)});p!=null;){if(p._uniqueIdentifier===l)return p;if(p._namespace===i.namespace.HTML)for(var d=0;d<p._attributeList.length;d++){var y=p._attributeList[d];if(y._localName==="name"&&y._namespace===null&&y._namespacePrefix===null&&y._value===l)return p}p=s.tree_getNextDescendantNode(this._root,p,!1,!1,function(m){return u.Guard.isElementNode(m)&&h._filter(m)})}return null},f.prototype[Symbol.iterator]=function(){var l=this._root,h=this._filter,p=s.tree_getFirstDescendantNode(l,!1,!1,function(d){return u.Guard.isElementNode(d)&&h(d)});return{next:function(){if(p===null)return{done:!0,value:null};var d={done:!1,value:p};return p=s.tree_getNextDescendantNode(l,p,!1,!1,function(y){return u.Guard.isElementNode(y)&&h(y)}),d}}},f.prototype.get=function(l,h,p){if(!c.isString(h)||f.reservedNames.indexOf(h)!==-1)return Reflect.get(l,h,p);var d=Number(h);return isNaN(d)?l.namedItem(h)||void 0:l.item(d)||void 0},f.prototype.set=function(l,h,p,d){if(!c.isString(h)||f.reservedNames.indexOf(h)!==-1)return Reflect.set(l,h,p,d);var y=Number(h),m=isNaN(y)?l.namedItem(h)||void 0:l.item(y)||void 0;return!(!m||!m._parent)&&(s.mutation_replace(m,p,m._parent),!0)},f._create=function(l,h){return h===void 0&&(h=function(){return!0}),new f(l,h)},f.reservedNames=["_root","_live","_filter","length","item","namedItem","get","set"],f}();n.HTMLCollectionImpl=o},function(a,n,r){var i=this&&this.__values||function(f){var l=typeof Symbol=="function"&&Symbol.iterator,h=l&&f[l],p=0;if(h)return h.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),u=r(1),c=r(0),o=function(){function f(l){return this._live=!0,this._filter=null,this._length=0,this._root=l,new Proxy(this,this)}return Object.defineProperty(f.prototype,"length",{get:function(){return this._root._children.size},enumerable:!0,configurable:!0}),f.prototype.item=function(l){if(l<0||l>this.length-1)return null;if(l<this.length/2){for(var h=0,p=this._root._firstChild;p!==null&&h!==l;)p=p._nextSibling,h++;return p}for(h=this.length-1,p=this._root._lastChild;p!==null&&h!==l;)p=p._previousSibling,h--;return p},f.prototype.keys=function(){var l;return(l={})[Symbol.iterator]=function(){var h=0;return{next:function(){return h===this.length?{done:!0,value:null}:{done:!1,value:h++}}.bind(this)}}.bind(this),l},f.prototype.values=function(){var l;return(l={})[Symbol.iterator]=function(){var h=this[Symbol.iterator]();return{next:function(){return h.next()}}}.bind(this),l},f.prototype.entries=function(){var l;return(l={})[Symbol.iterator]=function(){var h=this[Symbol.iterator](),p=0;return{next:function(){var d=h.next();return d.done?{done:!0,value:null}:{done:!1,value:[p++,d.value]}}}}.bind(this),l},f.prototype[Symbol.iterator]=function(){return this._root._children[Symbol.iterator]()},f.prototype.forEach=function(l,h){var p,d;h===void 0&&(h=s.dom.window);var y=0;try{for(var m=i(this._root._children),S=m.next();!S.done;S=m.next()){var v=S.value;l.call(h,v,y++,this)}}catch(g){p={error:g}}finally{try{S&&!S.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}},f.prototype.get=function(l,h,p){if(!u.isString(h))return Reflect.get(l,h,p);var d=Number(h);return isNaN(d)?Reflect.get(l,h,p):l.item(d)||void 0},f.prototype.set=function(l,h,p,d){if(!u.isString(h))return Reflect.set(l,h,p,d);var y=Number(h);if(isNaN(y))return Reflect.set(l,h,p,d);var m=l.item(y)||void 0;return!!m&&!!m._parent&&(c.mutation_replace(m,p,m._parent),!0)},f._create=function(l){return new f(l)},f}();n.NodeListImpl=o},function(a,n,r){var i=this&&this.__values||function(o){var f=typeof Symbol=="function"&&Symbol.iterator,l=f&&o[f],h=0;if(l)return l.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&h>=o.length&&(o=void 0),{value:o&&o[h++],done:!o}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),u=r(1),c=function(){function o(f){return this._live=!1,this._items=[],this._length=0,this._root=f,this._items=[],this._filter=function(l){return!0},new Proxy(this,this)}return Object.defineProperty(o.prototype,"length",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),o.prototype.item=function(f){return f<0||f>this.length-1?null:this._items[f]},o.prototype.keys=function(){var f;return(f={})[Symbol.iterator]=function(){var l=0;return{next:function(){return l===this.length?{done:!0,value:null}:{done:!1,value:l++}}.bind(this)}}.bind(this),f},o.prototype.values=function(){var f;return(f={})[Symbol.iterator]=function(){var l=this[Symbol.iterator]();return{next:function(){return l.next()}}}.bind(this),f},o.prototype.entries=function(){var f;return(f={})[Symbol.iterator]=function(){var l=this[Symbol.iterator](),h=0;return{next:function(){var p=l.next();return p.done?{done:!0,value:null}:{done:!1,value:[h++,p.value]}}}}.bind(this),f},o.prototype[Symbol.iterator]=function(){var f=this._items[Symbol.iterator]();return{next:function(){return f.next()}}},o.prototype.forEach=function(f,l){var h,p;l===void 0&&(l=s.dom.window);var d=0;try{for(var y=i(this._items),m=y.next();!m.done;m=y.next()){var S=m.value;f.call(l,S,d++,this)}}catch(v){h={error:v}}finally{try{m&&!m.done&&(p=y.return)&&p.call(y)}finally{if(h)throw h.error}}},o.prototype.get=function(f,l,h){if(!u.isString(l))return Reflect.get(f,l,h);var p=Number(l);return isNaN(p)?Reflect.get(f,l,h):f._items[p]||void 0},o.prototype.set=function(f,l,h,p){if(!u.isString(l))return Reflect.set(f,l,h,p);var d=Number(l);return isNaN(d)?Reflect.set(f,l,h,p):d>=0&&d<f._items.length&&(f._items[d]=h,!0)},o._create=function(f,l){var h=new o(f);return h._items=l,h},o}();n.NodeListStaticImpl=c},function(a,n,r){var i,s=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])})(f,l)},function(f,l){function h(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(9),c=r(0),o=function(f){function l(h){var p=f.call(this)||this;return p._element=h,Object.setPrototypeOf(p,l.prototype),p}return s(l,f),l.prototype._asArray=function(){return this},l.prototype.item=function(h){return this[h]||null},l.prototype.getNamedItem=function(h){return c.element_getAnAttributeByName(h,this._element)},l.prototype.getNamedItemNS=function(h,p){return c.element_getAnAttributeByNamespaceAndLocalName(h||"",p,this._element)},l.prototype.setNamedItem=function(h){return c.element_setAnAttribute(h,this._element)},l.prototype.setNamedItemNS=function(h){return c.element_setAnAttribute(h,this._element)},l.prototype.removeNamedItem=function(h){var p=c.element_removeAnAttributeByName(h,this._element);if(p===null)throw new u.NotFoundError;return p},l.prototype.removeNamedItemNS=function(h,p){var d=c.element_removeAnAttributeByNamespaceAndLocalName(h||"",p,this._element);if(d===null)throw new u.NotFoundError;return d},l._create=function(h){return new l(h)},l}(Array);n.NamedNodeMapImpl=o},function(a,n,r){var i,s=this&&this.__extends||(i=function(m,S){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,g){v.__proto__=g}||function(v,g){for(var x in g)g.hasOwnProperty(x)&&(v[x]=g[x])})(m,S)},function(m,S){function v(){this.constructor=m}i(m,S),m.prototype=S===null?Object.create(S):(v.prototype=S.prototype,new v)}),u=this&&this.__values||function(m){var S=typeof Symbol=="function"&&Symbol.iterator,v=S&&m[S],g=0;if(v)return v.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&g>=m.length&&(m=void 0),{value:m&&m[g++],done:!m}}};throw new TypeError(S?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(6),o=r(2),f=r(102),l=r(9),h=r(0),p=r(12),d=r(3),y=function(m){function S(){var v=m.call(this)||this,g=c.dom.window._associatedDocument;return v._start=[g,0],v._end=[g,0],c.dom.rangeList.add(v),v}return s(S,m),Object.defineProperty(S.prototype,"commonAncestorContainer",{get:function(){for(var v=this._start[0];!h.tree_isAncestorOf(this._end[0],v,!0);){if(v._parent===null)throw new Error("Parent node  is null.");v=v._parent}return v},enumerable:!0,configurable:!0}),S.prototype.setStart=function(v,g){h.range_setTheStart(this,v,g)},S.prototype.setEnd=function(v,g){h.range_setTheEnd(this,v,g)},S.prototype.setStartBefore=function(v){var g=v._parent;if(g===null)throw new l.InvalidNodeTypeError;h.range_setTheStart(this,g,h.tree_index(v))},S.prototype.setStartAfter=function(v){var g=v._parent;if(g===null)throw new l.InvalidNodeTypeError;h.range_setTheStart(this,g,h.tree_index(v)+1)},S.prototype.setEndBefore=function(v){var g=v._parent;if(g===null)throw new l.InvalidNodeTypeError;h.range_setTheEnd(this,g,h.tree_index(v))},S.prototype.setEndAfter=function(v){var g=v._parent;if(g===null)throw new l.InvalidNodeTypeError;h.range_setTheEnd(this,g,h.tree_index(v)+1)},S.prototype.collapse=function(v){v?this._end=this._start:this._start=this._end},S.prototype.selectNode=function(v){h.range_select(v,this)},S.prototype.selectNodeContents=function(v){if(d.Guard.isDocumentTypeNode(v))throw new l.InvalidNodeTypeError;var g=h.tree_nodeLength(v);this._start=[v,0],this._end=[v,g]},S.prototype.compareBoundaryPoints=function(v,g){if(v!==o.HowToCompare.StartToStart&&v!==o.HowToCompare.StartToEnd&&v!==o.HowToCompare.EndToEnd&&v!==o.HowToCompare.EndToStart)throw new l.NotSupportedError;if(h.range_root(this)!==h.range_root(g))throw new l.WrongDocumentError;var x,C;switch(v){case o.HowToCompare.StartToStart:x=this._start,C=g._start;break;case o.HowToCompare.StartToEnd:x=this._end,C=g._start;break;case o.HowToCompare.EndToEnd:x=this._end,C=g._end;break;case o.HowToCompare.EndToStart:x=this._start,C=g._end;break;default:throw new l.NotSupportedError}var T=h.boundaryPoint_position(x,C);return T===o.BoundaryPosition.Before?-1:T===o.BoundaryPosition.After?1:0},S.prototype.deleteContents=function(){var v,g,x,C;if(!h.range_collapsed(this)){var T=this._startNode,w=this._startOffset,_=this._endNode,E=this._endOffset;if(T===_&&d.Guard.isCharacterDataNode(T))h.characterData_replaceData(T,w,E-w,"");else{var D,b,N=[];try{for(var R=u(h.range_getContainedNodes(this)),M=R.next();!M.done;M=R.next()){var A=(B=M.value)._parent;A!==null&&h.range_isContained(A,this)||N.push(B)}}catch(F){v={error:F}}finally{try{M&&!M.done&&(g=R.return)&&g.call(R)}finally{if(v)throw v.error}}if(h.tree_isAncestorOf(_,T,!0))D=T,b=w;else{for(var I=T;I._parent!==null&&!h.tree_isAncestorOf(_,I._parent,!0);)I=I._parent;if(I._parent===null)throw new Error("Parent node is null.");D=I._parent,b=h.tree_index(I)+1}d.Guard.isCharacterDataNode(T)&&h.characterData_replaceData(T,w,h.tree_nodeLength(T)-w,"");try{for(var $=u(N),U=$.next();!U.done;U=$.next()){var B;(B=U.value)._parent&&h.mutation_remove(B,B._parent)}}catch(F){x={error:F}}finally{try{U&&!U.done&&(C=$.return)&&C.call($)}finally{if(x)throw x.error}}d.Guard.isCharacterDataNode(_)&&h.characterData_replaceData(_,0,E,""),this._start=[D,b],this._end=[D,b]}}},S.prototype.extractContents=function(){return h.range_extract(this)},S.prototype.cloneContents=function(){return h.range_cloneTheContents(this)},S.prototype.insertNode=function(v){return h.range_insert(v,this)},S.prototype.surroundContents=function(v){var g,x;try{for(var C=u(h.range_getPartiallyContainedNodes(this)),T=C.next();!T.done;T=C.next()){var w=T.value;if(!d.Guard.isTextNode(w))throw new l.InvalidStateError}}catch(E){g={error:E}}finally{try{T&&!T.done&&(x=C.return)&&x.call(C)}finally{if(g)throw g.error}}if(d.Guard.isDocumentNode(v)||d.Guard.isDocumentTypeNode(v)||d.Guard.isDocumentFragmentNode(v))throw new l.InvalidNodeTypeError;var _=h.range_extract(this);v._children.size!==0&&h.mutation_replaceAll(null,v),h.range_insert(v,this),h.mutation_append(_,v),h.range_select(v,this)},S.prototype.cloneRange=function(){return h.create_range(this._start,this._end)},S.prototype.detach=function(){c.dom.rangeList.delete(this)},S.prototype.isPointInRange=function(v,g){if(h.tree_rootNode(v)!==h.range_root(this))return!1;if(d.Guard.isDocumentTypeNode(v))throw new l.InvalidNodeTypeError;if(g>h.tree_nodeLength(v))throw new l.IndexSizeError;var x=[v,g];return h.boundaryPoint_position(x,this._start)!==o.BoundaryPosition.Before&&h.boundaryPoint_position(x,this._end)!==o.BoundaryPosition.After},S.prototype.comparePoint=function(v,g){if(h.tree_rootNode(v)!==h.range_root(this))throw new l.WrongDocumentError;if(d.Guard.isDocumentTypeNode(v))throw new l.InvalidNodeTypeError;if(g>h.tree_nodeLength(v))throw new l.IndexSizeError;var x=[v,g];return h.boundaryPoint_position(x,this._start)===o.BoundaryPosition.Before?-1:h.boundaryPoint_position(x,this._end)===o.BoundaryPosition.After?1:0},S.prototype.intersectsNode=function(v){if(h.tree_rootNode(v)!==h.range_root(this))return!1;var g=v._parent;if(g===null)return!0;var x=h.tree_index(v);return h.boundaryPoint_position([g,x],this._end)===o.BoundaryPosition.Before&&h.boundaryPoint_position([g,x+1],this._start)===o.BoundaryPosition.After},S.prototype.toString=function(){var v,g,x="";if(this._startNode===this._endNode&&d.Guard.isTextNode(this._startNode))return this._startNode._data.substring(this._startOffset,this._endOffset);d.Guard.isTextNode(this._startNode)&&(x+=this._startNode._data.substring(this._startOffset));try{for(var C=u(h.range_getContainedNodes(this)),T=C.next();!T.done;T=C.next()){var w=T.value;d.Guard.isTextNode(w)&&(x+=w._data)}}catch(_){v={error:_}}finally{try{T&&!T.done&&(g=C.return)&&g.call(C)}finally{if(v)throw v.error}}return d.Guard.isTextNode(this._endNode)&&(x+=this._endNode._data.substring(0,this._endOffset)),x},S._create=function(v,g){var x=new S;return v&&(x._start=v),g&&(x._end=g),x},S.START_TO_START=0,S.START_TO_END=1,S.END_TO_END=2,S.END_TO_START=3,S}(f.AbstractRangeImpl);n.RangeImpl=y,p.idl_defineConst(y.prototype,"START_TO_START",0),p.idl_defineConst(y.prototype,"START_TO_END",1),p.idl_defineConst(y.prototype,"END_TO_END",2),p.idl_defineConst(y.prototype,"END_TO_START",3)},function(a,n,r){var i,s=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])})(f,l)},function(f,l){function h(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(103),c=r(0),o=function(f){function l(h,p,d){var y=f.call(this,h)||this;return y._iteratorCollection=void 0,y._reference=p,y._pointerBeforeReference=d,c.nodeIterator_iteratorList().add(y),y}return s(l,f),Object.defineProperty(l.prototype,"referenceNode",{get:function(){return this._reference},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"pointerBeforeReferenceNode",{get:function(){return this._pointerBeforeReference},enumerable:!0,configurable:!0}),l.prototype.nextNode=function(){return c.nodeIterator_traverse(this,!0)},l.prototype.previousNode=function(){return c.nodeIterator_traverse(this,!1)},l.prototype.detach=function(){c.nodeIterator_iteratorList().delete(this)},l._create=function(h,p,d){return new l(h,p,d)},l}(u.TraverserImpl);n.NodeIteratorImpl=o},function(a,n,r){var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(2),c=r(103),o=r(0),f=function(l){function h(p,d){var y=l.call(this,p)||this;return y._current=d,y}return s(h,l),Object.defineProperty(h.prototype,"currentNode",{get:function(){return this._current},set:function(p){this._current=p},enumerable:!0,configurable:!0}),h.prototype.parentNode=function(){for(var p=this._current;p!==null&&p!==this._root;)if((p=p._parent)!==null&&o.traversal_filter(this,p)===u.FilterResult.Accept)return this._current=p,p;return null},h.prototype.firstChild=function(){return o.treeWalker_traverseChildren(this,!0)},h.prototype.lastChild=function(){return o.treeWalker_traverseChildren(this,!1)},h.prototype.nextSibling=function(){return o.treeWalker_traverseSiblings(this,!0)},h.prototype.previousNode=function(){for(var p=this._current;p!==this._root;){for(var d=p._previousSibling;d;){p=d;for(var y=o.traversal_filter(this,p);y!==u.FilterResult.Reject&&p._lastChild;)p=p._lastChild,y=o.traversal_filter(this,p);if(y===u.FilterResult.Accept)return this._current=p,p;d=p._previousSibling}if(p===this._root||p._parent===null)return null;if(p=p._parent,o.traversal_filter(this,p)===u.FilterResult.Accept)return this._current=p,p}return null},h.prototype.previousSibling=function(){return o.treeWalker_traverseSiblings(this,!1)},h.prototype.nextNode=function(){for(var p=this._current,d=u.FilterResult.Accept;;){for(;d!==u.FilterResult.Reject&&p._firstChild;)if(p=p._firstChild,(d=o.traversal_filter(this,p))===u.FilterResult.Accept)return this._current=p,p;for(var y=null,m=p;m!==null;){if(m===this._root)return null;if((y=m._nextSibling)!==null){p=y;break}m=m._parent}if((d=o.traversal_filter(this,p))===u.FilterResult.Accept)return this._current=p,p}},h._create=function(p,d){return new h(p,d)},h}(c.TraverserImpl);n.TreeWalkerImpl=f},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),s=r(12),u=function(){function c(){}return c.prototype.acceptNode=function(o){return i.FilterResult.Accept},c._create=function(){return new c},c.FILTER_ACCEPT=1,c.FILTER_REJECT=2,c.FILTER_SKIP=3,c.SHOW_ALL=4294967295,c.SHOW_ELEMENT=1,c.SHOW_ATTRIBUTE=2,c.SHOW_TEXT=4,c.SHOW_CDATA_SECTION=8,c.SHOW_ENTITY_REFERENCE=16,c.SHOW_ENTITY=32,c.SHOW_PROCESSING_INSTRUCTION=64,c.SHOW_COMMENT=128,c.SHOW_DOCUMENT=256,c.SHOW_DOCUMENT_TYPE=512,c.SHOW_DOCUMENT_FRAGMENT=1024,c.SHOW_NOTATION=2048,c}();n.NodeFilterImpl=u,s.idl_defineConst(u.prototype,"FILTER_ACCEPT",1),s.idl_defineConst(u.prototype,"FILTER_REJECT",2),s.idl_defineConst(u.prototype,"FILTER_SKIP",3),s.idl_defineConst(u.prototype,"SHOW_ALL",4294967295),s.idl_defineConst(u.prototype,"SHOW_ELEMENT",1),s.idl_defineConst(u.prototype,"SHOW_ATTRIBUTE",2),s.idl_defineConst(u.prototype,"SHOW_TEXT",4),s.idl_defineConst(u.prototype,"SHOW_CDATA_SECTION",8),s.idl_defineConst(u.prototype,"SHOW_ENTITY_REFERENCE",16),s.idl_defineConst(u.prototype,"SHOW_ENTITY",32),s.idl_defineConst(u.prototype,"SHOW_PROCESSING_INSTRUCTION",64),s.idl_defineConst(u.prototype,"SHOW_COMMENT",128),s.idl_defineConst(u.prototype,"SHOW_DOCUMENT",256),s.idl_defineConst(u.prototype,"SHOW_DOCUMENT_TYPE",512),s.idl_defineConst(u.prototype,"SHOW_DOCUMENT_FRAGMENT",1024),s.idl_defineConst(u.prototype,"SHOW_NOTATION",2048)},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(u,c,o,f,l,h,p,d,y){this._type=u,this._target=c,this._addedNodes=o,this._removedNodes=f,this._previousSibling=l,this._nextSibling=h,this._attributeName=p,this._attributeNamespace=d,this._oldValue=y}return Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"target",{get:function(){return this._target},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"addedNodes",{get:function(){return this._addedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"removedNodes",{get:function(){return this._removedNodes},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"previousSibling",{get:function(){return this._previousSibling},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"nextSibling",{get:function(){return this._nextSibling},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"attributeName",{get:function(){return this._attributeName},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"attributeNamespace",{get:function(){return this._attributeNamespace},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"oldValue",{get:function(){return this._oldValue},enumerable:!0,configurable:!0}),s._create=function(u,c,o,f,l,h,p,d,y){return new s(u,c,o,f,l,h,p,d,y)},s}();n.MutationRecordImpl=i},function(a,n,r){var i=this&&this.__values||function(l){var h=typeof Symbol=="function"&&Symbol.iterator,p=h&&l[h],d=0;if(p)return p.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&d>=l.length&&(l=void 0),{value:l&&l[d++],done:!l}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),u=r(9),c=r(7),o=r(0),f=function(){function l(h,p){this._element=h,this._attribute=p,this._tokenSet=new Set;var d=p._localName,y=o.element_getAnAttributeValue(h,d),m=this;this._element._attributeChangeSteps.push(function(S,v,g,x,C){v===m._attribute._localName&&C===null&&(x?m._tokenSet=o.orderedSet_parse(x):m._tokenSet.clear())}),s.dom.features.steps&&o.dom_runAttributeChangeSteps(h,d,y,y,null)}return Object.defineProperty(l.prototype,"length",{get:function(){return this._tokenSet.size},enumerable:!0,configurable:!0}),l.prototype.item=function(h){var p,d,y=0;try{for(var m=i(this._tokenSet),S=m.next();!S.done;S=m.next()){var v=S.value;if(y===h)return v;y++}}catch(g){p={error:g}}finally{try{S&&!S.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return null},l.prototype.contains=function(h){return this._tokenSet.has(h)},l.prototype.add=function(){for(var h,p,d=[],y=0;y<arguments.length;y++)d[y]=arguments[y];try{for(var m=i(d),S=m.next();!S.done;S=m.next()){var v=S.value;if(v==="")throw new u.SyntaxError("Cannot add an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(v))throw new u.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.add(v)}}catch(g){h={error:g}}finally{try{S&&!S.done&&(p=m.return)&&p.call(m)}finally{if(h)throw h.error}}o.tokenList_updateSteps(this)},l.prototype.remove=function(){for(var h,p,d=[],y=0;y<arguments.length;y++)d[y]=arguments[y];try{for(var m=i(d),S=m.next();!S.done;S=m.next()){var v=S.value;if(v==="")throw new u.SyntaxError("Cannot remove an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(v))throw new u.InvalidCharacterError("Token cannot contain whitespace.");this._tokenSet.delete(v)}}catch(g){h={error:g}}finally{try{S&&!S.done&&(p=m.return)&&p.call(m)}finally{if(h)throw h.error}}o.tokenList_updateSteps(this)},l.prototype.toggle=function(h,p){if(p===void 0&&(p=void 0),h==="")throw new u.SyntaxError("Cannot toggle an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(h))throw new u.InvalidCharacterError("Token cannot contain whitespace.");return this._tokenSet.has(h)?p!==void 0&&p!==!1||(this._tokenSet.delete(h),o.tokenList_updateSteps(this),!1):(p===void 0||p===!0)&&(this._tokenSet.add(h),o.tokenList_updateSteps(this),!0)},l.prototype.replace=function(h,p){if(h===""||p==="")throw new u.SyntaxError("Cannot replace an empty token.");if(c.codePoint.ASCIIWhiteSpace.test(h)||c.codePoint.ASCIIWhiteSpace.test(p))throw new u.InvalidCharacterError("Token cannot contain whitespace.");return!!this._tokenSet.has(h)&&(c.set.replace(this._tokenSet,h,p),o.tokenList_updateSteps(this),!0)},l.prototype.supports=function(h){return o.tokenList_validationSteps(this,h)},Object.defineProperty(l.prototype,"value",{get:function(){return o.tokenList_serializeSteps(this)},set:function(h){o.element_setAnAttributeValue(this._element,this._attribute._localName,h)},enumerable:!0,configurable:!0}),l.prototype[Symbol.iterator]=function(){var h=this._tokenSet[Symbol.iterator]();return{next:function(){return h.next()}}},l._create=function(h,p){return new l(h,p)},l}();n.DOMTokenListImpl=f},function(a,n,r){var i,s=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])})(f,l)},function(f,l){function h(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(104),c=r(0),o=function(f){function l(h,p){var d=f.call(this,h,p)||this;return d._detail=null,d._detail=p&&p.detail||null,d}return s(l,f),Object.defineProperty(l.prototype,"detail",{get:function(){return this._detail},enumerable:!0,configurable:!0}),l.prototype.initCustomEvent=function(h,p,d,y){p===void 0&&(p=!1),d===void 0&&(d=!1),y===void 0&&(y=null),this._dispatchFlag||(c.event_initialize(this,h,p,d),this._detail=y)},l}(u.EventImpl);n.CustomEventImpl=o},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(6),s=r(2),u=r(105),c=r(17);n.nodeIterator_traverse=function(o,f){for(var l=o._reference,h=o._pointerBeforeReference;;){if(f)if(h)h=!1;else{var p=c.tree_getFollowingNode(o._root,l);if(!p)return null;l=p}else if(h){var d=c.tree_getPrecedingNode(o.root,l);if(!d)return null;l=d}else h=!0;if(u.traversal_filter(o,l)===s.FilterResult.Accept)break}return o._reference=l,o._pointerBeforeReference=h,l},n.nodeIterator_iteratorList=function(){return i.dom.window._iteratorList}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(9),s=r(7),u=r(174);function c(o){if(!u.xml_isName(o))throw new i.InvalidCharacterError("Invalid XML name: "+o);if(!u.xml_isQName(o))throw new i.InvalidCharacterError("Invalid XML qualified name: "+o+".")}n.namespace_validate=c,n.namespace_validateAndExtract=function(o,f){o||(o=null),c(f);var l=f.split(":"),h=l.length===2?l[0]:null,p=l.length===2?l[1]:f;if(h&&o===null)throw new i.NamespaceError("Qualified name includes a prefix but the namespace is null.");if(h==="xml"&&o!==s.namespace.XML)throw new i.NamespaceError('Qualified name includes the "xml" prefix but the namespace is not the XML namespace.');if(o!==s.namespace.XMLNS&&(h==="xmlns"||f==="xmlns"))throw new i.NamespaceError('Qualified name includes the "xmlns" prefix but the namespace is not the XMLNS namespace.');if(o===s.namespace.XMLNS&&h!=="xmlns"&&f!=="xmlns")throw new i.NamespaceError('Qualified name does not include the "xmlns" prefix but the namespace is the XMLNS namespace.');return[o,h,p]},n.namespace_extractQName=function(o){c(o);var f=o.split(":");return[f.length===2?f[0]:null,f.length===2?f[1]:o]}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.xml_isName=function(i){for(var s=0;s<i.length;s++){var u=i.charCodeAt(s);if(!(u>=97&&u<=122||u>=65&&u<=90||u===58||u===95||u>=192&&u<=214||u>=216&&u<=246||u>=248&&u<=767||u>=880&&u<=893||u>=895&&u<=8191||u>=8204&&u<=8205||u>=8304&&u<=8591||u>=11264&&u<=12271||u>=12289&&u<=55295||u>=63744&&u<=64975||u>=65008&&u<=65533)&&(s===0||!(u===45||u===46||u>=48&&u<=57||u===183||u>=768&&u<=879||u>=8255&&u<=8256))){if(u>=55296&&u<=56319&&s<i.length-1){var c=i.charCodeAt(s+1);if(c>=56320&&c<=57343&&(s++,(u=1024*(u-55296)+c-56320+65536)>=65536&&u<=983039))continue}return!1}}return!0},n.xml_isQName=function(i){for(var s=!1,u=0;u<i.length;u++){var c=i.charCodeAt(u);if(!(c>=97&&c<=122||c>=65&&c<=90||c===95||c>=192&&c<=214||c>=216&&c<=246||c>=248&&c<=767||c>=880&&c<=893||c>=895&&c<=8191||c>=8204&&c<=8205||c>=8304&&c<=8591||c>=11264&&c<=12271||c>=12289&&c<=55295||c>=63744&&c<=64975||c>=65008&&c<=65533)&&(u===0||!(c===45||c===46||c>=48&&c<=57||c===183||c>=768&&c<=879||c>=8255&&c<=8256))){if(u===0||c!==58){if(c>=55296&&c<=56319&&u<i.length-1){var o=i.charCodeAt(u+1);if(o>=56320&&o<=57343&&(u++,(c=1024*(c-55296)+o-56320+65536)>=65536&&c<=983039))continue}return!1}if(s||u===i.length-1)return!1;s=!0}}return!0},n.xml_isLegalChar=function(i){for(var s=0;s<i.length;s++){var u=i.charCodeAt(s);if(!(u===9||u===10||u===13||u>=32&&u<=55295||u>=57344&&u<=65533)){if(u>=55296&&u<=56319&&s<i.length-1){var c=i.charCodeAt(s+1);if(c>=56320&&c<=57343&&(s++,(u=1024*(u-55296)+c-56320+65536)>=65536&&u<=1114111))continue}return!1}}return!0},n.xml_isPubidChar=function(i){for(var s=0;s<i.length;s++){var u=i.charCodeAt(s);if(!(u>=97&&u<=122||u>=65&&u<=90||u>=39&&u<=59||u===32||u===13||u===10||u>=35&&u<=37||u===33||u===61||u===63||u===64||u===95))return!1}return!0}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),s=r(17);n.boundaryPoint_position=function u(c,o){var f=c[0],l=c[1],h=o[0],p=o[1];if(console.assert(s.tree_rootNode(f)===s.tree_rootNode(h),"Boundary points must share the same root node."),f===h)return l===p?i.BoundaryPosition.Equal:l<p?i.BoundaryPosition.Before:i.BoundaryPosition.After;if(s.tree_isFollowing(h,f)){var d=u([h,p],[f,l]);if(d===i.BoundaryPosition.Before)return i.BoundaryPosition.After;if(d===i.BoundaryPosition.After)return i.BoundaryPosition.Before}if(s.tree_isAncestorOf(h,f)){for(var y=h;!s.tree_isChildOf(f,y);)y._parent!==null&&(y=y._parent);if(s.tree_index(y)<l)return i.BoundaryPosition.After}return i.BoundaryPosition.Before}},function(a,n,r){var i=this&&this.__values||function(d){var y=typeof Symbol=="function"&&Symbol.iterator,m=y&&d[y],S=0;if(m)return m.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&S>=d.length&&(d=void 0),{value:d&&d[S++],done:!d}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),u=r(3),c=r(7),o=r(29),f=r(108),l=r(30),h=r(37),p=r(52);n.node_stringReplaceAll=function(d,y){var m=null;d!==""&&(m=o.create_text(y._nodeDocument,d)),h.mutation_replaceAll(m,y)},n.node_clone=function d(y,m,S){var v,g,x,C,T;if(m===void 0&&(m=null),S===void 0&&(S=!1),m===null&&(m=y._nodeDocument),u.Guard.isElementNode(y)){T=p.element_createAnElement(m,y._localName,y._namespace,y._namespacePrefix,y._is,!1);try{for(var w=i(y._attributeList),_=w.next();!_.done;_=w.next()){var E=d(_.value,m);p.element_append(E,T)}}catch(A){v={error:A}}finally{try{_&&!_.done&&(g=w.return)&&g.call(w)}finally{if(v)throw v.error}}}else if(u.Guard.isDocumentNode(y)){var D=o.create_document();D._encoding=y._encoding,D._contentType=y._contentType,D._URL=y._URL,D._origin=y._origin,D._type=y._type,D._mode=y._mode,T=D}else if(u.Guard.isDocumentTypeNode(y))T=o.create_documentType(m,y._name,y._publicId,y._systemId);else if(u.Guard.isAttrNode(y)){var b=o.create_attr(m,y.localName);b._namespace=y._namespace,b._namespacePrefix=y._namespacePrefix,b._value=y._value,T=b}else T=u.Guard.isExclusiveTextNode(y)?o.create_text(m,y._data):u.Guard.isCDATASectionNode(y)?o.create_cdataSection(m,y._data):u.Guard.isCommentNode(y)?o.create_comment(m,y._data):u.Guard.isProcessingInstructionNode(y)?o.create_processingInstruction(m,y._target,y._data):u.Guard.isDocumentFragmentNode(y)?o.create_documentFragment(m):Object.create(y);if(u.Guard.isDocumentNode(T)?(T._nodeDocument=T,m=T):T._nodeDocument=m,s.dom.features.steps&&l.dom_runCloningSteps(T,y,m,S),S)try{for(var N=i(y._children),R=N.next();!R.done;R=N.next()){var M=d(R.value,m,!0);h.mutation_append(M,T)}}catch(A){x={error:A}}finally{try{R&&!R.done&&(C=N.return)&&C.call(N)}finally{if(x)throw x.error}}return T},n.node_equals=function d(y,m){var S,v,g,x;if(y._nodeType!==m._nodeType)return!1;if(u.Guard.isDocumentTypeNode(y)&&u.Guard.isDocumentTypeNode(m)){if(y._name!==m._name||y._publicId!==m._publicId||y._systemId!==m._systemId)return!1}else if(u.Guard.isElementNode(y)&&u.Guard.isElementNode(m)){if(y._namespace!==m._namespace||y._namespacePrefix!==m._namespacePrefix||y._localName!==m._localName||y._attributeList.length!==m._attributeList.length)return!1}else if(u.Guard.isAttrNode(y)&&u.Guard.isAttrNode(m)){if(y._namespace!==m._namespace||y._localName!==m._localName||y._value!==m._value)return!1}else if(u.Guard.isProcessingInstructionNode(y)&&u.Guard.isProcessingInstructionNode(m)){if(y._target!==m._target||y._data!==m._data)return!1}else if(u.Guard.isCharacterDataNode(y)&&u.Guard.isCharacterDataNode(m)&&y._data!==m._data)return!1;if(u.Guard.isElementNode(y)&&u.Guard.isElementNode(m)){var C={};try{for(var T=i(y._attributeList),w=T.next();!w.done;w=T.next())C[(D=w.value)._localName]=D}catch(I){S={error:I}}finally{try{w&&!w.done&&(v=T.return)&&v.call(T)}finally{if(S)throw S.error}}try{for(var _=i(m._attributeList),E=_.next();!E.done;E=_.next()){var D,b=E.value;if(!(D=C[b._localName])||!d(D,b))return!1}}catch(I){g={error:I}}finally{try{E&&!E.done&&(x=_.return)&&x.call(_)}finally{if(g)throw g.error}}}if(y._children.size!==m._children.size)return!1;for(var N=y._children[Symbol.iterator](),R=m._children[Symbol.iterator](),M=N.next(),A=R.next();!M.done&&!A.done;){if(!d(M.value,A.value))return!1;M=N.next(),A=R.next()}return!0},n.node_listOfElementsWithQualifiedName=function(d,y){return d==="*"?o.create_htmlCollection(y):y._nodeDocument._type==="html"?o.create_htmlCollection(y,function(m){return m._namespace===c.namespace.HTML&&m._qualifiedName===d.toLowerCase()||m._namespace!==c.namespace.HTML&&m._qualifiedName===d}):o.create_htmlCollection(y,function(m){return m._qualifiedName===d})},n.node_listOfElementsWithNamespace=function(d,y,m){return d===""&&(d=null),d==="*"&&y==="*"?o.create_htmlCollection(m):d==="*"?o.create_htmlCollection(m,function(S){return S._localName===y}):y==="*"?o.create_htmlCollection(m,function(S){return S._namespace===d}):o.create_htmlCollection(m,function(S){return S._localName===y&&S._namespace===d})},n.node_listOfElementsWithClassNames=function(d,y){var m=f.orderedSet_parse(d);if(m.size===0)return o.create_htmlCollection(y,function(){return!1});var S=y._nodeDocument._mode!=="quirks";return o.create_htmlCollection(y,function(v){var g=v.classList;return f.orderedSet_contains(g._tokenSet,m,S)})},n.node_locateANamespacePrefix=function d(y,m){if(y._namespace===m&&y._namespacePrefix!==null)return y._namespacePrefix;for(var S=0;S<y._attributeList.length;S++){var v=y._attributeList[S];if(v._namespacePrefix==="xmlns"&&v._value===m)return v._localName}return y._parent&&u.Guard.isElementNode(y._parent)?d(y._parent,m):null},n.node_locateANamespace=function d(y,m){if(u.Guard.isElementNode(y)){if(y._namespace!==null&&y._namespacePrefix===m)return y._namespace;for(var S=0;S<y._attributeList.length;S++){var v=y._attributeList[S];if(v._namespace===c.namespace.XMLNS&&v._namespacePrefix==="xmlns"&&v._localName===m||m===null&&v._namespace===c.namespace.XMLNS&&v._namespacePrefix===null&&v._localName==="xmlns")return v._value||null}return y.parentElement===null?null:d(y.parentElement,m)}return u.Guard.isDocumentNode(y)?y.documentElement===null?null:d(y.documentElement,m):u.Guard.isDocumentTypeNode(y)||u.Guard.isDocumentFragmentNode(y)?null:u.Guard.isAttrNode(y)?y._element===null?null:d(y._element,m):y._parent&&u.Guard.isElementNode(y._parent)?d(y._parent,m):null}},function(a,n,r){var i=this&&this.__values||function(p){var d=typeof Symbol=="function"&&Symbol.iterator,y=d&&p[d],m=0;if(y)return y.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&m>=p.length&&(p=void 0),{value:p&&p[m++],done:!p}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),u=r(3),c=r(9),o=r(29),f=r(17),l=r(107),h=r(37);n.text_contiguousTextNodes=function(p,d){var y;return d===void 0&&(d=!1),(y={})[Symbol.iterator]=function(){for(var m=p;m&&u.Guard.isTextNode(m._previousSibling);)m=m._previousSibling;return{next:function(){if(m&&!d&&m===p&&(m=u.Guard.isTextNode(m._nextSibling)?m._nextSibling:null),m===null)return{done:!0,value:null};var S={done:!1,value:m};return m=u.Guard.isTextNode(m._nextSibling)?m._nextSibling:null,S}}},y},n.text_contiguousExclusiveTextNodes=function(p,d){var y;return d===void 0&&(d=!1),(y={})[Symbol.iterator]=function(){for(var m=p;m&&u.Guard.isExclusiveTextNode(m._previousSibling);)m=m._previousSibling;return{next:function(){if(m&&!d&&m===p&&(m=u.Guard.isExclusiveTextNode(m._nextSibling)?m._nextSibling:null),m===null)return{done:!0,value:null};var S={done:!1,value:m};return m=u.Guard.isExclusiveTextNode(m._nextSibling)?m._nextSibling:null,S}}},y},n.text_descendantTextContent=function(p){for(var d="",y=f.tree_getFirstDescendantNode(p,!1,!1,function(m){return u.Guard.isTextNode(m)});y!==null;)d+=y._data,y=f.tree_getNextDescendantNode(p,y,!1,!1,function(m){return u.Guard.isTextNode(m)});return d},n.text_split=function(p,d){var y,m,S=p._data.length;if(d>S)throw new c.IndexSizeError;var v=S-d,g=l.characterData_substringData(p,d,v),x=o.create_text(p._nodeDocument,g),C=p._parent;if(C!==null){h.mutation_insert(x,C,p._nextSibling);try{for(var T=i(s.dom.rangeList),w=T.next();!w.done;w=T.next()){var _=w.value;_._start[0]===p&&_._start[1]>d&&(_._start[0]=x,_._start[1]-=d),_._end[0]===p&&_._end[1]>d&&(_._end[0]=x,_._end[1]-=d);var E=f.tree_index(p);_._start[0]===C&&_._start[1]===E+1&&_._start[1]++,_._end[0]===C&&_._end[1]===E+1&&_._end[1]++}}catch(D){y={error:D}}finally{try{w&&!w.done&&(m=T.return)&&m.call(T)}finally{if(y)throw y.error}}}return l.characterData_replaceData(p,d,v,""),x}},function(a,n,r){var i=r(4),s=r(41),u=r(24),c=r(48),o=[].join,f=s!=Object,l=c("join",",");i({target:"Array",proto:!0,forced:f||!l},{join:function(h){return o.call(u(this),h===void 0?",":h)}})},function(a,n,r){var i=r(4),s=r(83),u=String.fromCharCode,c=String.fromCodePoint;i({target:"String",stat:!0,forced:!!c&&c.length!=1},{fromCodePoint:function(o){for(var f,l=[],h=arguments.length,p=0;h>p;){if(f=+arguments[p++],s(f,1114111)!==f)throw RangeError(f+" is not a valid code point");l.push(f<65536?u(f):u(55296+((f-=65536)>>10),f%1024+56320))}return l.join("")}})},function(a,n,r){var i=this&&this.__read||function(c,o){var f=typeof Symbol=="function"&&c[Symbol.iterator];if(!f)return c;var l,h,p=f.call(c),d=[];try{for(;(o===void 0||o-- >0)&&!(l=p.next()).done;)d.push(l.value)}catch(y){h={error:y}}finally{try{l&&!l.done&&(f=p.return)&&f.call(p)}finally{if(h)throw h.error}}return d};Object.defineProperty(n,"__esModule",{value:!0});var s=r(111),u=function(){function c(o,f){this._options={skipWhitespaceOnlyText:!1},this.err={line:-1,col:-1,index:-1,str:""},this._str=o,this._index=0,this._length=o.length,f&&(this._options.skipWhitespaceOnlyText=f.skipWhitespaceOnlyText||!1)}return c.prototype.nextToken=function(){if(this.eof())return{type:s.TokenType.EOF};var o=this.skipIfStartsWith("<")?this.openBracket():this.text();return this._options.skipWhitespaceOnlyText&&o.type===s.TokenType.Text&&c.isWhiteSpaceToken(o)&&(o=this.nextToken()),o},c.prototype.openBracket=function(){return this.skipIfStartsWith("?")?this.skipIfStartsWith("xml")?c.isSpace(this._str[this._index])?this.declaration():(this.seek(-3),this.pi()):this.pi():this.skipIfStartsWith("!")?this.skipIfStartsWith("--")?this.comment():this.skipIfStartsWith("[CDATA[")?this.cdata():this.skipIfStartsWith("DOCTYPE")?this.doctype():void this.throwError("Invalid '!' in opening tag."):this.skipIfStartsWith("/")?this.closeTag():this.openTag()},c.prototype.declaration=function(){for(var o="",f="",l="";!this.eof();){if(this.skipSpace(),this.skipIfStartsWith("?>"))return{type:s.TokenType.Declaration,version:o,encoding:f,standalone:l};var h=i(this.attribute(),2),p=h[0],d=h[1];p==="version"?o=d:p==="encoding"?f=d:p==="standalone"?l=d:this.throwError("Invalid attribute name: "+p)}this.throwError("Missing declaration end symbol `?>`")},c.prototype.doctype=function(){var o="",f="";this.skipSpace();var l=this.takeUntil2("[",">",!0);return this.skipSpace(),this.skipIfStartsWith("PUBLIC")?(o=this.quotedString(),f=this.quotedString()):this.skipIfStartsWith("SYSTEM")&&(f=this.quotedString()),this.skipSpace(),this.skipIfStartsWith("[")&&(this.skipUntil("]"),this.skipIfStartsWith("]")||this.throwError("Missing end bracket of DTD internal subset")),this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing doctype end symbol `>`"),{type:s.TokenType.DocType,name:l,pubId:o,sysId:f}},c.prototype.pi=function(){var o=this.takeUntilStartsWith("?>",!0);if(this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.skipSpace(),this.skipIfStartsWith("?>"))return{type:s.TokenType.PI,target:o,data:""};var f=this.takeUntilStartsWith("?>");return this.eof()&&this.throwError("Missing processing instruction end symbol `?>`"),this.seek(2),{type:s.TokenType.PI,target:o,data:f}},c.prototype.text=function(){var o=this.takeUntil("<");return{type:s.TokenType.Text,data:o}},c.prototype.comment=function(){var o=this.takeUntilStartsWith("-->");return this.eof()&&this.throwError("Missing comment end symbol `-->`"),this.seek(3),{type:s.TokenType.Comment,data:o}},c.prototype.cdata=function(){var o=this.takeUntilStartsWith("]]>");return this.eof()&&this.throwError("Missing CDATA end symbol `]>`"),this.seek(3),{type:s.TokenType.CDATA,data:o}},c.prototype.openTag=function(){this.skipSpace();var o=this.takeUntil2(">","/",!0);if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:s.TokenType.Element,name:o,attributes:[],selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:s.TokenType.Element,name:o,attributes:[],selfClosing:!0};for(var f=[];!this.eof();){if(this.skipSpace(),this.skipIfStartsWith(">"))return{type:s.TokenType.Element,name:o,attributes:f,selfClosing:!1};if(this.skipIfStartsWith("/>"))return{type:s.TokenType.Element,name:o,attributes:f,selfClosing:!0};var l=this.attribute();f.push(l)}this.throwError("Missing opening element tag end symbol `>`")},c.prototype.closeTag=function(){this.skipSpace();var o=this.takeUntil(">",!0);return this.skipSpace(),this.skipIfStartsWith(">")||this.throwError("Missing closing element tag end symbol `>`"),{type:s.TokenType.ClosingTag,name:o}},c.prototype.attribute=function(){this.skipSpace();var o=this.takeUntil("=",!0);return this.skipSpace(),this.skipIfStartsWith("=")||this.throwError("Missing equals sign before attribute value"),[o,this.quotedString()]},c.prototype.quotedString=function(){this.skipSpace();var o=this.take(1);c.isQuote(o)||this.throwError("Missing start quote character before quoted value");var f=this.takeUntil(o);return this.skipIfStartsWith(o)||this.throwError("Missing end quote character after quoted value"),f},c.prototype.eof=function(){return this._index>=this._length},c.prototype.skipIfStartsWith=function(o){var f=o.length;if(f===1)return this._str[this._index]===o&&(this._index++,!0);for(var l=0;l<f;l++)if(this._str[this._index+l]!==o[l])return!1;return this._index+=f,!0},c.prototype.seek=function(o){this._index+=o,this._index<0&&(this._index=0),this._index>this._length&&(this._index=this._length)},c.prototype.skipSpace=function(){for(;!this.eof()&&c.isSpace(this._str[this._index]);)this._index++},c.prototype.take=function(o){if(o===1)return this._str[this._index++];var f=this._index;return this.seek(o),this._str.slice(f,this._index)},c.prototype.takeUntil=function(o,f){f===void 0&&(f=!1);for(var l=this._index;this._index<this._length;){var h=this._str[this._index];if(h===o||f&&c.isSpace(h))break;this._index++}return this._str.slice(l,this._index)},c.prototype.takeUntil2=function(o,f,l){l===void 0&&(l=!1);for(var h=this._index;this._index<this._length;){var p=this._str[this._index];if(p===o||p===f||l&&c.isSpace(p))break;this._index++}return this._str.slice(h,this._index)},c.prototype.takeUntilStartsWith=function(o,f){f===void 0&&(f=!1);for(var l=this._index,h=o.length;this._index<this._length;){for(var p=!0,d=0;d<h;d++){var y=this._str[this._index+d],m=o[d];if(f&&c.isSpace(y))return this._str.slice(l,this._index);if(y!==m){this._index++,p=!1;break}}if(p)return this._str.slice(l,this._index)}return this._index=this._length,this._str.slice(l)},c.prototype.skipUntil=function(o){for(;this._index<this._length&&this._str[this._index]!==o;)this._index++},c.isWhiteSpaceToken=function(o){for(var f=o.data,l=0;l<f.length;l++){var h=f[l];if(h!==" "&&h!==`
`&&h!=="\r"&&h!=="	"&&h!=="\f")return!1}return!0},c.isSpace=function(o){return o===" "||o===`
`||o==="\r"||o==="	"},c.isQuote=function(o){return o==='"'||o==="'"},c.prototype.throwError=function(o){for(var f=/\r\n|\r|\n/g,l=null,h=0,p=0,d=this._str.length;(l=f.exec(this._str))!==null&&l!==null;)if(h++,l.index<this._index&&(p=f.lastIndex),l.index>this._index){d=l.index;break}throw this.err={line:h,col:this._index-p,index:this._index,str:this._str.substring(p,d)},new Error(o+`
Index: `+this.err.index+`
Ln: `+this.err.line+", Col: "+this.err.col+`
Input: `+this.err.str)},c.prototype[Symbol.iterator]=function(){return this._index=0,{next:function(){var o=this.nextToken();return o.type===s.TokenType.EOF?{done:!0,value:null}:{done:!1,value:o}}.bind(this)}},c}();n.XMLStringLexer=u},function(a,n,r){var i=r(39);a.exports=new i({include:[r(182)]})},function(a,n,r){var i=r(39);a.exports=new i({include:[r(113)],implicit:[r(289),r(290),r(291),r(292)]})},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(91),s=r(1),u=r(3),c=r(77),o=r(109);function f(d,y){var m=h(d===void 0||l(d)?d:i.DefaultBuilderOptions),S=l(d)?y:d,v=o.createDocument();p(v,m);var g=new c.XMLBuilderImpl(v);return S!==void 0&&g.ele(S),g}function l(d){if(!s.isPlainObject(d))return!1;for(var y in d)if(d.hasOwnProperty(y)&&!i.XMLBuilderOptionKeys.has(y))return!1;return!0}function h(d){d===void 0&&(d={});var y=s.applyDefaults(d,i.DefaultBuilderOptions);if(y.convert.att.length===0||y.convert.ins.length===0||y.convert.text.length===0||y.convert.cdata.length===0||y.convert.comment.length===0)throw new Error("JS object converter strings cannot be zero length.");return y}function p(d,y,m){var S=d;S._xmlBuilderOptions=y,S._isFragment=m}n.builder=function(d,y){var m=h(l(d)?d:i.DefaultBuilderOptions),S=u.Guard.isNode(d)||s.isArray(d)?d:y;if(S===void 0)throw new Error("Invalid arguments.");if(s.isArray(S)){for(var v=[],g=0;g<S.length;g++){var x=new c.XMLBuilderImpl(S[g]);x.set(m),v.push(x)}return v}var C=new c.XMLBuilderImpl(S);return C.set(m),C},n.create=f,n.fragment=function(d,y){var m=h(d===void 0||l(d)?d:i.DefaultBuilderOptions),S=l(d)?y:d,v=o.createDocument();p(v,m,!0);var g=new c.XMLBuilderImpl(v.createDocumentFragment());return S!==void 0&&g.ele(S),g},n.convert=function(d,y,m){var S,v,g;return l(d)&&y!==void 0?(S=d,v=y,g=m):(S=i.DefaultBuilderOptions,v=d,g=y||void 0),f(S,v).end(g)}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(77);n.builder=i.builder,n.create=i.create,n.fragment=i.fragment,n.convert=i.convert,n.createCB=i.createCB,n.fragmentCB=i.fragmentCB},function(a,n,r){r(31),r(32),r(33),r(191),r(192),r(194),r(64),r(19),r(198),r(199),r(89),r(201),r(65),r(20),r(66),r(22),r(23);var i=this&&this.__read||function(S,v){var g=typeof Symbol=="function"&&S[Symbol.iterator];if(!g)return S;var x,C,T=g.call(S),w=[];try{for(;(v===void 0||v-- >0)&&!(x=T.next()).done;)w.push(x.value)}catch(_){C={error:_}}finally{try{x&&!x.done&&(g=T.return)&&g.call(T)}finally{if(C)throw C.error}}return w},s=this&&this.__values||function(S){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&S[v],x=0;if(g)return g.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&x>=S.length&&(S=void 0),{value:S&&S[x++],done:!S}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var u=r(91),c=r(1),o=r(217),f=r(2),l=r(3),h=r(0),p=r(109),d=r(7),y=r(276),m=function(){function S(v){this._domNode=v}return Object.defineProperty(S.prototype,"node",{get:function(){return this._domNode},enumerable:!0,configurable:!0}),Object.defineProperty(S.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),S.prototype.set=function(v){return this._options=c.applyDefaults(c.applyDefaults(this._options,v,!0),u.DefaultBuilderOptions),this},S.prototype.ele=function(v,g,x){var C,T,w,_,E,D;if(c.isObject(v))return new y.ObjectReader(this._options).parse(this,v);if(v!==null&&/^\s*</.test(v))return new y.XMLReader(this._options).parse(this,v);if(v!==null&&/^\s*[\{\[]/.test(v))return new y.JSONReader(this._options).parse(this,v);if(v!==null&&/^(\s*|(#.*)|(%.*))*---/.test(v))return new y.YAMLReader(this._options).parse(this,v);if((v===null||c.isString(v))&&c.isString(g))_=(C=i([v,g,x],3))[0],E=C[1],D=C[2];else{if(v===null)throw new Error("Element name cannot be null. "+this._debugInfo());_=(T=i([void 0,v,c.isObject(g)?g:void 0],3))[0],E=T[1],D=T[2]}if(D&&(D=c.getValue(D)),_=(w=i(this._extractNamespace(p.sanitizeInput(_,this._options.invalidCharReplacement),p.sanitizeInput(E,this._options.invalidCharReplacement),!0),2))[0],E=w[1],_===void 0){var b=i(h.namespace_extractQName(E),1)[0];_=this.node.lookupNamespaceURI(b)}var N=_!=null?this._doc.createElementNS(_,E):this._doc.createElement(E);this.node.appendChild(N);var R=new S(N),M=this._doc.doctype;if(N===this._doc.documentElement&&M!==null){var A=this._doc.implementation.createDocumentType(this._doc.documentElement.tagName,M.publicId,M.systemId);this._doc.replaceChild(A,M)}return D&&!c.isEmpty(D)&&R.att(D),R},S.prototype.remove=function(){var v=this.up();return v.node.removeChild(this.node),v},S.prototype.att=function(v,g,x){var C,T,w,_,E,D,b=this;if(c.isMap(v)||c.isObject(v))return c.forEachObject(v,function(U,B){return b.att(U,B)},this),this;if(v!=null&&(v=c.getValue(v+"")),g!=null&&(g=c.getValue(g+"")),x!=null&&(x=c.getValue(x+"")),v!==null&&!c.isString(v)||!c.isString(g)||x!==null&&!c.isString(x)){if(!c.isString(v)||g!=null&&!c.isString(g))throw new Error("Attribute name and value not specified. "+this._debugInfo());_=(T=i([void 0,v,g],3))[0],E=T[1],D=T[2]}else _=(C=i([v,g,x],3))[0],E=C[1],D=C[2];if(this._options.keepNullAttributes&&D==null)D="";else if(D==null)return this;if(!l.Guard.isElementNode(this.node))throw new Error("An attribute can only be assigned to an element node.");var N=this.node;_=(w=i(this._extractNamespace(_,E,!1),2))[0],E=w[1],E=p.sanitizeInput(E,this._options.invalidCharReplacement),_=p.sanitizeInput(_,this._options.invalidCharReplacement),D=p.sanitizeInput(D,this._options.invalidCharReplacement);var R=i(h.namespace_extractQName(E),2),M=R[0],A=R[1],I=i(h.namespace_extractQName(N.prefix?N.prefix+":"+N.localName:N.localName),1)[0],$=null;return M==="xmlns"?(_=d.namespace.XMLNS,N.namespaceURI===null&&I===A&&($=D)):M===null&&A==="xmlns"&&I===null&&(_=d.namespace.XMLNS,$=D),$!==null&&(this._updateNamespace($),N=this.node),_!==void 0?N.setAttributeNS(_,E,D):N.setAttribute(E,D),this},S.prototype.removeAtt=function(v,g){var x,C,T=this;if(!l.Guard.isElementNode(this.node))throw new Error("An attribute can only be removed from an element node.");if(v=c.getValue(v),g!==void 0&&(g=c.getValue(g)),v!==null&&g===void 0)C=v;else{if(v!==null&&!c.isString(v)||g===void 0)throw new Error("Attribute namespace must be a string. "+this._debugInfo());x=v,C=g}return c.isArray(C)||c.isSet(C)?c.forEachArray(C,function(w){return x===void 0?T.removeAtt(w):T.removeAtt(x,w)},this):x!==void 0?(C=p.sanitizeInput(C,this._options.invalidCharReplacement),x=p.sanitizeInput(x,this._options.invalidCharReplacement),this.node.removeAttributeNS(x,C)):(C=p.sanitizeInput(C,this._options.invalidCharReplacement),this.node.removeAttribute(C)),this},S.prototype.txt=function(v){if(v==null){if(!this._options.keepNullNodes)return this;v=""}var g=this._doc.createTextNode(p.sanitizeInput(v,this._options.invalidCharReplacement));return this.node.appendChild(g),this},S.prototype.com=function(v){if(v==null){if(!this._options.keepNullNodes)return this;v=""}var g=this._doc.createComment(p.sanitizeInput(v,this._options.invalidCharReplacement));return this.node.appendChild(g),this},S.prototype.dat=function(v){if(v==null){if(!this._options.keepNullNodes)return this;v=""}var g=this._doc.createCDATASection(p.sanitizeInput(v,this._options.invalidCharReplacement));return this.node.appendChild(g),this},S.prototype.ins=function(v,g){var x=this;if(g===void 0&&(g=""),g==null){if(!this._options.keepNullNodes)return this;g=""}if(c.isArray(v)||c.isSet(v))c.forEachArray(v,function(T){var w=(T+="").indexOf(" "),_=w===-1?T:T.substr(0,w),E=w===-1?"":T.substr(w+1);x.ins(_,E)},this);else if(c.isMap(v)||c.isObject(v))c.forEachObject(v,function(T,w){return x.ins(T,w)},this);else{var C=this._doc.createProcessingInstruction(p.sanitizeInput(v,this._options.invalidCharReplacement),p.sanitizeInput(g,this._options.invalidCharReplacement));this.node.appendChild(C)}return this},S.prototype.dec=function(v){return this._options.version=v.version||"1.0",this._options.encoding=v.encoding,this._options.standalone=v.standalone,this},S.prototype.dtd=function(v){var g=p.sanitizeInput(v&&v.name||(this._doc.documentElement?this._doc.documentElement.tagName:"ROOT"),this._options.invalidCharReplacement),x=p.sanitizeInput(v&&v.pubID||"",this._options.invalidCharReplacement),C=p.sanitizeInput(v&&v.sysID||"",this._options.invalidCharReplacement);if(this._doc.documentElement!==null&&g!==this._doc.documentElement.tagName)throw new Error("DocType name does not match document element name.");var T=this._doc.implementation.createDocumentType(g,x,C);return this._doc.doctype!==null?this._doc.replaceChild(T,this._doc.doctype):this._doc.insertBefore(T,this._doc.documentElement),this},S.prototype.import=function(v){var g,x,C=this._domNode,T=this._doc,w=v.node;if(l.Guard.isDocumentNode(w)){var _=w.documentElement;if(_===null)throw new Error("Imported document has no document element node. "+this._debugInfo());var E=T.importNode(_,!0);C.appendChild(E);var D=i(h.namespace_extractQName(E.prefix?E.prefix+":"+E.localName:E.localName),1)[0],b=C.lookupNamespaceURI(D);new S(E)._updateNamespace(b)}else if(l.Guard.isDocumentFragmentNode(w))try{for(var N=s(w.childNodes),R=N.next();!R.done;R=N.next()){var M=R.value;E=T.importNode(M,!0),C.appendChild(E),l.Guard.isElementNode(E)&&(D=i(h.namespace_extractQName(E.prefix?E.prefix+":"+E.localName:E.localName),1)[0],b=C.lookupNamespaceURI(D),new S(E)._updateNamespace(b))}}catch(A){g={error:A}}finally{try{R&&!R.done&&(x=N.return)&&x.call(N)}finally{if(g)throw g.error}}else E=T.importNode(w,!0),C.appendChild(E),l.Guard.isElementNode(E)&&(D=i(h.namespace_extractQName(E.prefix?E.prefix+":"+E.localName:E.localName),1)[0],b=C.lookupNamespaceURI(D),new S(E)._updateNamespace(b));return this},S.prototype.doc=function(){if(this._doc._isFragment){for(var v=this.node;v&&v.nodeType!==f.NodeType.DocumentFragment;)v=v.parentNode;if(v===null)throw new Error("Node has no parent node while searching for document fragment ancestor. "+this._debugInfo());return new S(v)}return new S(this._doc)},S.prototype.root=function(){var v=this._doc.documentElement;if(!v)throw new Error("Document root element is null. "+this._debugInfo());return new S(v)},S.prototype.up=function(){var v=this._domNode.parentNode;if(!v)throw new Error("Parent node is null. "+this._debugInfo());return new S(v)},S.prototype.prev=function(){var v=this._domNode.previousSibling;if(!v)throw new Error("Previous sibling node is null. "+this._debugInfo());return new S(v)},S.prototype.next=function(){var v=this._domNode.nextSibling;if(!v)throw new Error("Next sibling node is null. "+this._debugInfo());return new S(v)},S.prototype.first=function(){var v=this._domNode.firstChild;if(!v)throw new Error("First child node is null. "+this._debugInfo());return new S(v)},S.prototype.last=function(){var v=this._domNode.lastChild;if(!v)throw new Error("Last child node is null. "+this._debugInfo());return new S(v)},S.prototype.each=function(v,g,x,C){g===void 0&&(g=!1),x===void 0&&(x=!1);for(var T=this._getFirstDescendantNode(this._domNode,g,x);T[0];){var w=this._getNextDescendantNode(this._domNode,T[0],x,T[1],T[2]);v.call(C,new S(T[0]),T[1],T[2]),T=w}return this},S.prototype.map=function(v,g,x,C){g===void 0&&(g=!1),x===void 0&&(x=!1);var T=[];return this.each(function(w,_,E){return T.push(v.call(C,w,_,E))},g,x),T},S.prototype.reduce=function(v,g,x,C,T){x===void 0&&(x=!1),C===void 0&&(C=!1);var w=g;return this.each(function(_,E,D){return w=v.call(T,w,_,E,D)},x,C),w},S.prototype.find=function(v,g,x,C){g===void 0&&(g=!1),x===void 0&&(x=!1);for(var T=this._getFirstDescendantNode(this._domNode,g,x);T[0];){var w=new S(T[0]);if(v.call(C,w,T[1],T[2]))return w;T=this._getNextDescendantNode(this._domNode,T[0],x,T[1],T[2])}},S.prototype.filter=function(v,g,x,C){g===void 0&&(g=!1),x===void 0&&(x=!1);var T=[];return this.each(function(w,_,E){v.call(C,w,_,E)&&T.push(w)},g,x),T},S.prototype.every=function(v,g,x,C){g===void 0&&(g=!1),x===void 0&&(x=!1);for(var T=this._getFirstDescendantNode(this._domNode,g,x);T[0];){var w=new S(T[0]);if(!v.call(C,w,T[1],T[2]))return!1;T=this._getNextDescendantNode(this._domNode,T[0],x,T[1],T[2])}return!0},S.prototype.some=function(v,g,x,C){g===void 0&&(g=!1),x===void 0&&(x=!1);for(var T=this._getFirstDescendantNode(this._domNode,g,x);T[0];){var w=new S(T[0]);if(v.call(C,w,T[1],T[2]))return!0;T=this._getNextDescendantNode(this._domNode,T[0],x,T[1],T[2])}return!1},S.prototype.toArray=function(v,g){v===void 0&&(v=!1),g===void 0&&(g=!1);var x=[];return this.each(function(C){return x.push(C)},v,g),x},S.prototype.toString=function(v){return(v=v||{}).format===void 0&&(v.format="xml"),this._serialize(v)},S.prototype.toObject=function(v){return(v=v||{}).format===void 0&&(v.format="object"),this._serialize(v)},S.prototype.end=function(v){return(v=v||{}).format===void 0&&(v.format="xml"),this.doc()._serialize(v)},S.prototype._getFirstDescendantNode=function(v,g,x){return g?[this._domNode,0,0]:x?this._getNextDescendantNode(v,v,x,0,0):[this._domNode.firstChild,0,1]},S.prototype._getNextDescendantNode=function(v,g,x,C,T){if(!x)return v===g?[g.firstChild,0,T+1]:[g.nextSibling,C+1,T];if(g.firstChild)return[g.firstChild,0,T+1];if(g===v)return[null,-1,-1];if(g.nextSibling)return[g.nextSibling,C+1,T];for(var w=g.parentNode;w&&w!==v;){if(w.nextSibling)return[w.nextSibling,h.tree_index(w.nextSibling),T-1];w=w.parentNode,T--}return[null,-1,-1]},S.prototype._serialize=function(v){if(v.format==="xml")return new o.XMLWriter(this._options,v).serialize(this.node);if(v.format==="map")return new o.MapWriter(this._options,v).serialize(this.node);if(v.format==="object")return new o.ObjectWriter(this._options,v).serialize(this.node);if(v.format==="json")return new o.JSONWriter(this._options,v).serialize(this.node);if(v.format==="yaml")return new o.YAMLWriter(this._options,v).serialize(this.node);throw new Error("Invalid writer format: "+v.format+". "+this._debugInfo())},S.prototype._extractNamespace=function(v,g,x){var C=g.indexOf("@");if(C>0&&(v===void 0&&(v=g.slice(C+1)),g=g.slice(0,C)),v===void 0)v=x?this._options.defaultNamespace.ele:this._options.defaultNamespace.att;else if(v!==null&&v[0]==="@"){var T=v.slice(1);if((v=this._options.namespaceAlias[T])===void 0)throw new Error("Namespace alias `"+T+"` is not defined. "+this._debugInfo())}return[v,g]},S.prototype._updateNamespace=function(v){var g,x,C,T,w=this._domNode;if(l.Guard.isElementNode(w)&&v!==null&&w.namespaceURI!==v){var _=i(h.namespace_extractQName(w.prefix?w.prefix+":"+w.localName:w.localName),2),E=_[0],D=_[1],b=h.create_element(this._doc,D,v,E);try{for(var N=s(w.attributes),R=N.next();!R.done;R=N.next()){var M=R.value,A=M.prefix?M.prefix+":"+M.localName:M.localName,I=i(h.namespace_extractQName(A),1)[0],$=M.namespaceURI;$===null&&I!==null&&($=w.lookupNamespaceURI(I)),$===null?b.setAttribute(A,M.value):b.setAttributeNS($,A,M.value)}}catch(Y){g={error:Y}}finally{try{R&&!R.done&&(x=N.return)&&x.call(N)}finally{if(g)throw g.error}}var U=w.parentNode;if(U===null)throw new Error("Parent node is null."+this._debugInfo());U.replaceChild(b,w),this._domNode=b;try{for(var B=s(w.childNodes),F=B.next();!F.done;F=B.next()){var z=F.value.cloneNode(!0);if(b.appendChild(z),l.Guard.isElementNode(z)){var H=i(h.namespace_extractQName(z.prefix?z.prefix+":"+z.localName:z.localName),1)[0],X=b.lookupNamespaceURI(H);new S(z)._updateNamespace(X)}}}catch(Y){C={error:Y}}finally{try{F&&!F.done&&(T=B.return)&&T.call(B)}finally{if(C)throw C.error}}}},Object.defineProperty(S.prototype,"_doc",{get:function(){var v=this.node;if(l.Guard.isDocumentNode(v))return v;var g=v.ownerDocument;if(!g)throw new Error("Owner document is null. "+this._debugInfo());return g},enumerable:!0,configurable:!0}),S.prototype._debugInfo=function(v){var g=this.node,x=g.parentNode;v=v||g.nodeName;var C=x?x.nodeName:"";return C?"node: <"+v+">, parent: <"+C+">":"node: <"+v+">"},Object.defineProperty(S.prototype,"_options",{get:function(){var v=this._doc;if(v._xmlBuilderOptions===void 0)throw new Error("Builder options is not set.");return v._xmlBuilderOptions},set:function(v){this._doc._xmlBuilderOptions=v},enumerable:!0,configurable:!0}),S}();n.XMLBuilderImpl=m},function(a,n,r){var i=r(11),s=r(117),u=i.WeakMap;a.exports=typeof u=="function"&&/native code/.test(s(u))},function(a,n,r){var i=r(46),s=r(82),u=r(85),c=r(18);a.exports=i("Reflect","ownKeys")||function(o){var f=s.f(c(o)),l=u.f;return l?f.concat(l(o)):f}},function(a,n,r){var i=r(16),s=r(15),u=r(18),c=r(61);a.exports=i?Object.defineProperties:function(o,f){u(o);for(var l,h=c(f),p=h.length,d=0;p>d;)s.f(o,l=h[d++],f[l]);return o}},function(a,n,r){var i=r(46);a.exports=i("document","documentElement")},function(a,n,r){var i=r(24),s=r(82).f,u={}.toString,c=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];a.exports.f=function(o){return c&&u.call(o)=="[object Window]"?function(f){try{return s(f)}catch{return c.slice()}}(o):s(i(o))}},function(a,n,r){var i=r(4),s=r(36).every,u=r(48),c=r(28),o=u("every"),f=c("every");i({target:"Array",proto:!0,forced:!o||!f},{every:function(l){return s(this,l,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(4),s=r(36).filter,u=r(63),c=r(28),o=u("filter"),f=c("filter");i({target:"Array",proto:!0,forced:!o||!f},{filter:function(l){return s(this,l,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(46);a.exports=i("navigator","userAgent")||""},function(a,n,r){var i=r(4),s=r(36).find,u=r(130),c=r(28),o=!0,f=c("find");"find"in[]&&Array(1).find(function(){o=!1}),i({target:"Array",proto:!0,forced:o||!f},{find:function(l){return s(this,l,arguments.length>1?arguments[1]:void 0)}}),u("find")},function(a,n,r){var i=r(131).IteratorPrototype,s=r(60),u=r(40),c=r(62),o=r(49),f=function(){return this};a.exports=function(l,h,p){var d=h+" Iterator";return l.prototype=s(i,{next:u(1,p)}),c(l,d,!1,!0),o[d]=f,l}},function(a,n,r){var i=r(8);a.exports=!i(function(){function s(){}return s.prototype.constructor=null,Object.getPrototypeOf(new s)!==s.prototype})},function(a,n,r){var i=r(13);a.exports=function(s){if(!i(s)&&s!==null)throw TypeError("Can't set "+String(s)+" as a prototype");return s}},function(a,n,r){var i=r(4),s=r(36).map,u=r(63),c=r(28),o=u("map"),f=c("map");i({target:"Array",proto:!0,forced:!o||!f},{map:function(l){return s(this,l,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(4),s=r(200).left,u=r(48),c=r(28),o=u("reduce"),f=c("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!f},{reduce:function(l){return s(this,l,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(127),s=r(27),u=r(41),c=r(26),o=function(f){return function(l,h,p,d){i(h);var y=s(l),m=u(y),S=c(y.length),v=f?S-1:0,g=f?-1:1;if(p<2)for(;;){if(v in m){d=m[v],v+=g;break}if(v+=g,f?v<0:S<=v)throw TypeError("Reduce of empty array with no initial value")}for(;f?v>=0:S>v;v+=g)v in m&&(d=h(d,m[v],v,y));return d}};a.exports={left:o(!1),right:o(!0)}},function(a,n,r){var i=r(4),s=r(36).some,u=r(48),c=r(28),o=u("some"),f=c("some");i({target:"Array",proto:!0,forced:!o||!f},{some:function(l){return s(this,l,arguments.length>1?arguments[1]:void 0)}})},function(a,n,r){var i=r(90),s=r(135);a.exports=i?{}.toString:function(){return"[object "+s(this)+"]"}},function(a,n){a.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(a,n,r){var i=r(8);a.exports=!i(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(a,n,r){var i=r(5),s=r(49),u=i("iterator"),c=Array.prototype;a.exports=function(o){return o!==void 0&&(s.Array===o||c[u]===o)}},function(a,n,r){var i=r(135),s=r(49),u=r(5)("iterator");a.exports=function(c){if(c!=null)return c[u]||c["@@iterator"]||s[i(c)]}},function(a,n,r){var i=r(18);a.exports=function(s,u,c,o){try{return o?u(i(c)[0],c[1]):u(c)}catch(l){var f=s.return;throw f!==void 0&&i(f.call(s)),l}}},function(a,n,r){var i=r(5)("iterator"),s=!1;try{var u=0,c={next:function(){return{done:!!u++}},return:function(){s=!0}};c[i]=function(){return this},Array.from(c,function(){throw 2})}catch{}a.exports=function(o,f){if(!f&&!s)return!1;var l=!1;try{var h={};h[i]=function(){return{next:function(){return{done:l=!0}}}},o(h)}catch{}return l}},function(a,n,r){var i=r(13),s=r(133);a.exports=function(u,c,o){var f,l;return s&&typeof(f=c.constructor)=="function"&&f!==o&&i(l=f.prototype)&&l!==o.prototype&&s(u,l),u}},function(a,n,r){var i=r(25);a.exports=function(s,u,c){for(var o in u)i(s,o,u[o],c);return s}},function(a,n,r){var i=r(46),s=r(15),u=r(5),c=r(16),o=u("species");a.exports=function(f){var l=i(f),h=s.f;c&&l&&!l[o]&&h(l,o,{configurable:!0,get:function(){return this}})}},function(a,n,r){var i=this&&this.__generator||function(c,o){var f,l,h,p,d={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(m){return function(S){return function(v){if(f)throw new TypeError("Generator is already executing.");for(;d;)try{if(f=1,l&&(h=2&v[0]?l.return:v[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,v[1])).done)return h;switch(l=0,h&&(v=[2&v[0],h.value]),v[0]){case 0:case 1:h=v;break;case 4:return d.label++,{value:v[1],done:!1};case 5:d.label++,l=v[1],v=[0];continue;case 7:v=d.ops.pop(),d.trys.pop();continue;default:if(h=d.trys,!((h=h.length>0&&h[h.length-1])||v[0]!==6&&v[0]!==2)){d=0;continue}if(v[0]===3&&(!h||v[1]>h[0]&&v[1]<h[3])){d.label=v[1];break}if(v[0]===6&&d.label<h[1]){d.label=h[1],h=v;break}if(h&&d.label<h[2]){d.label=h[2],d.ops.push(v);break}h[2]&&d.ops.pop(),d.trys.pop();continue}v=o.call(c,d)}catch(g){v=[6,g],l=0}finally{f=h=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([m,S])}}},s=this&&this.__values||function(c){var o=typeof Symbol=="function"&&Symbol.iterator,f=o&&c[o],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function c(o){o===void 0&&(o=1e3),this._items=new Set,this._limit=o}return c.prototype.add=function(o){if(this._items.add(o),this._items.size>this._limit){var f=this._items.values().next();f.done||this._items.delete(f.value)}return this},c.prototype.delete=function(o){return this._items.delete(o)},c.prototype.has=function(o){return this._items.has(o)},c.prototype.clear=function(){this._items.clear()},Object.defineProperty(c.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),c.prototype.forEach=function(o,f){var l=this;this._items.forEach(function(h){return o.call(f,h,h,l)})},c.prototype.keys=function(){return i(this,function(o){switch(o.label){case 0:return[5,s(this._items.keys())];case 1:return o.sent(),[2]}})},c.prototype.values=function(){return i(this,function(o){switch(o.label){case 0:return[5,s(this._items.values())];case 1:return o.sent(),[2]}})},c.prototype.entries=function(){return i(this,function(o){switch(o.label){case 0:return[5,s(this._items.entries())];case 1:return o.sent(),[2]}})},c.prototype[Symbol.iterator]=function(){return i(this,function(o){switch(o.label){case 0:return[5,s(this._items)];case 1:return o.sent(),[2]}})},Object.defineProperty(c.prototype,Symbol.toStringTag,{get:function(){return"FixedSizeSet"},enumerable:!0,configurable:!0}),c}();n.FixedSizeSet=u},function(a,n,r){var i=this&&this.__generator||function(c,o){var f,l,h,p,d={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return p={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(m){return function(S){return function(v){if(f)throw new TypeError("Generator is already executing.");for(;d;)try{if(f=1,l&&(h=2&v[0]?l.return:v[0]?l.throw||((h=l.return)&&h.call(l),0):l.next)&&!(h=h.call(l,v[1])).done)return h;switch(l=0,h&&(v=[2&v[0],h.value]),v[0]){case 0:case 1:h=v;break;case 4:return d.label++,{value:v[1],done:!1};case 5:d.label++,l=v[1],v=[0];continue;case 7:v=d.ops.pop(),d.trys.pop();continue;default:if(h=d.trys,!((h=h.length>0&&h[h.length-1])||v[0]!==6&&v[0]!==2)){d=0;continue}if(v[0]===3&&(!h||v[1]>h[0]&&v[1]<h[3])){d.label=v[1];break}if(v[0]===6&&d.label<h[1]){d.label=h[1],h=v;break}if(h&&d.label<h[2]){d.label=h[2],d.ops.push(v);break}h[2]&&d.ops.pop(),d.trys.pop();continue}v=o.call(c,d)}catch(g){v=[6,g],l=0}finally{f=h=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([m,S])}}},s=this&&this.__values||function(c){var o=typeof Symbol=="function"&&Symbol.iterator,f=o&&c[o],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function c(o){o===void 0&&(o=1e3),this._items=new Map,this._limit=o}return c.prototype.get=function(o){return this._items.get(o)},c.prototype.set=function(o,f){if(this._items.set(o,f),this._items.size>this._limit){var l=this._items.keys().next();l.done||this._items.delete(l.value)}},c.prototype.delete=function(o){return this._items.delete(o)},c.prototype.has=function(o){return this._items.has(o)},c.prototype.clear=function(){this._items.clear()},Object.defineProperty(c.prototype,"size",{get:function(){return this._items.size},enumerable:!0,configurable:!0}),c.prototype.forEach=function(o,f){this._items.forEach(function(l,h){return o.call(f,h,l)})},c.prototype.keys=function(){return i(this,function(o){switch(o.label){case 0:return[5,s(this._items.keys())];case 1:return o.sent(),[2]}})},c.prototype.values=function(){return i(this,function(o){switch(o.label){case 0:return[5,s(this._items.values())];case 1:return o.sent(),[2]}})},c.prototype.entries=function(){return i(this,function(o){switch(o.label){case 0:return[5,s(this._items.entries())];case 1:return o.sent(),[2]}})},c.prototype[Symbol.iterator]=function(){return i(this,function(o){switch(o.label){case 0:return[5,s(this._items)];case 1:return o.sent(),[2]}})},Object.defineProperty(c.prototype,Symbol.toStringTag,{get:function(){return"ObjectCache"},enumerable:!0,configurable:!0}),c}();n.ObjectCache=u},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(u){u===void 0&&(u=1e3),this._items=new Map,this._limit=u}return s.prototype.check=function(u,c){if(this._items.get(u)===c)return!0;if(this._items.get(c)===u)return!1;var o=Math.random()<.5;if(o?this._items.set(u,c):this._items.set(c,u),this._items.size>this._limit){var f=this._items.keys().next();f.done||this._items.delete(f.value)}return o},s}();n.CompareCache=i},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(u){this._initialized=!1,this._value=void 0,this._initFunc=u}return Object.defineProperty(s.prototype,"value",{get:function(){return this._initialized||(this._value=this._initFunc(),this._initialized=!0),this._value},enumerable:!0,configurable:!0}),s}();n.Lazy=i},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function s(u){this._pointer=0,this._chars=Array.from(u),this._length=this._chars.length}return Object.defineProperty(s.prototype,"eof",{get:function(){return this._pointer>=this._length},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),s.prototype.codePoint=function(){if(this._codePoint===void 0)if(this.eof)this._codePoint=-1;else{var u=this._chars[this._pointer].codePointAt(0);this._codePoint=u!==void 0?u:-1}return this._codePoint},s.prototype.c=function(){return this._c===void 0&&(this._c=this.eof?"":this._chars[this._pointer]),this._c},s.prototype.remaining=function(){return this._remaining===void 0&&(this._remaining=this.eof?"":this._chars.slice(this._pointer+1).join("")),this._remaining},s.prototype.substring=function(){return this._substring===void 0&&(this._substring=this.eof?"":this._chars.slice(this._pointer).join("")),this._substring},Object.defineProperty(s.prototype,"pointer",{get:function(){return this._pointer},set:function(u){u!==this._pointer&&(this._pointer=u,this._codePoint=void 0,this._c=void 0,this._remaining=void 0,this._substring=void 0)},enumerable:!0,configurable:!0}),s}();n.StringWalker=i},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(218);n.MapWriter=i.MapWriter;var s=r(258);n.XMLWriter=s.XMLWriter;var u=r(67);n.ObjectWriter=u.ObjectWriter;var c=r(260);n.JSONWriter=c.JSONWriter;var o=r(261);n.YAMLWriter=o.YAMLWriter},function(a,n,r){r(19),r(219),r(20),r(22),r(23);var i,s=this&&this.__extends||(i=function(f,l){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])})(f,l)},function(f,l){function h(){this.constructor=f}i(f,l),f.prototype=l===null?Object.create(l):(h.prototype=l.prototype,new h)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(1),c=r(67),o=function(f){function l(h,p){var d=f.call(this,h)||this;return d._writerOptions=u.applyDefaults(p,{format:"map",wellFormed:!1,group:!1,verbose:!1}),d}return s(l,f),l.prototype.serialize=function(h){var p=u.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1,verbose:!1}),d=new c.ObjectWriter(this._builderOptions,p).serialize(h);return this._convertObject(d)},l.prototype._convertObject=function(h){if(u.isArray(h)){for(var p=0;p<h.length;p++)h[p]=this._convertObject(h[p]);return h}if(u.isObject(h)){var d=new Map;for(var y in h)d.set(y,this._convertObject(h[y]));return d}return h},l}(r(50).BaseWriter);n.MapWriter=o},function(a,n,r){var i=r(139),s=r(143);a.exports=i("Map",function(u){return function(){return u(this,arguments.length?arguments[0]:void 0)}},s)},function(a,n,r){var i=r(4),s=r(8),u=r(59),c=r(13),o=r(27),f=r(26),l=r(134),h=r(128),p=r(63),d=r(5),y=r(129),m=d("isConcatSpreadable"),S=y>=51||!s(function(){var x=[];return x[m]=!1,x.concat()[0]!==x}),v=p("concat"),g=function(x){if(!c(x))return!1;var C=x[m];return C!==void 0?!!C:u(x)};i({target:"Array",proto:!0,forced:!S||!v},{concat:function(x){var C,T,w,_,E,D=o(this),b=h(D,0),N=0;for(C=-1,w=arguments.length;C<w;C++)if(g(E=C===-1?D:arguments[C])){if(N+(_=f(E.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(T=0;T<_;T++,N++)T in E&&l(b,N,E[T])}else{if(N>=9007199254740991)throw TypeError("Maximum allowed index exceeded");l(b,N++,E)}return b.length=N,b}})},function(a,n,r){var i=r(8);function s(u,c){return RegExp(u,c)}n.UNSUPPORTED_Y=i(function(){var u=s("a","y");return u.lastIndex=2,u.exec("abcd")!=null}),n.BROKEN_CARET=i(function(){var u=s("^r","gy");return u.lastIndex=2,u.exec("str")!=null})},function(a,n,r){var i=r(223);a.exports=function(s){if(i(s))throw TypeError("The method doesn't accept regular expressions");return s}},function(a,n,r){var i=r(13),s=r(42),u=r(5)("match");a.exports=function(c){var o;return i(c)&&((o=c[u])!==void 0?!!o:s(c)=="RegExp")}},function(a,n,r){var i=r(5)("match");a.exports=function(s){var u=/./;try{"/./"[s](u)}catch{try{return u[i]=!1,"/./"[s](u)}catch{}}return!1}},function(a,n,r){r(68);var i=r(25),s=r(8),u=r(5),c=r(93),o=r(21),f=u("species"),l=!s(function(){var m=/./;return m.exec=function(){var S=[];return S.groups={a:"7"},S},"".replace(m,"$<a>")!=="7"}),h="a".replace(/./,"$0")==="$0",p=u("replace"),d=!!/./[p]&&/./[p]("a","$0")==="",y=!s(function(){var m=/(?:)/,S=m.exec;m.exec=function(){return S.apply(this,arguments)};var v="ab".split(m);return v.length!==2||v[0]!=="a"||v[1]!=="b"});a.exports=function(m,S,v,g){var x=u(m),C=!s(function(){var b={};return b[x]=function(){return 7},""[m](b)!=7}),T=C&&!s(function(){var b=!1,N=/a/;return m==="split"&&((N={}).constructor={},N.constructor[f]=function(){return N},N.flags="",N[x]=/./[x]),N.exec=function(){return b=!0,null},N[x](""),!b});if(!C||!T||m==="replace"&&(!l||!h||d)||m==="split"&&!y){var w=/./[x],_=v(x,""[m],function(b,N,R,M,A){return N.exec===c?C&&!A?{done:!0,value:w.call(N,R,M)}:{done:!0,value:b.call(R,N,M)}:{done:!1}},{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),E=_[0],D=_[1];i(String.prototype,m,E),i(RegExp.prototype,x,S==2?function(b,N){return D.call(b,this,N)}:function(b){return D.call(b,this)})}g&&o(RegExp.prototype[x],"sham",!0)}},function(a,n,r){var i=r(137).charAt;a.exports=function(s,u,c){return u+(c?i(s,u).length:1)}},function(a,n,r){var i=r(42),s=r(93);a.exports=function(u,c){var o=u.exec;if(typeof o=="function"){var f=o.call(u,c);if(typeof f!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return f}if(i(u)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return s.call(u,c)}},function(a,n,r){(function(i){Object.defineProperty(n,"__esModule",{value:!0});var s=r(96);n.forgivingBase64Encode=function(u){return i.from(u).toString("base64")},n.forgivingBase64Decode=function(u){return u===""?"":((u=u.replace(s.ASCIIWhiteSpace,"")).length%4==0&&(u.endsWith("==")?u=u.substr(0,u.length-2):u.endsWith("=")&&(u=u.substr(0,u.length-1))),u.length%4==1?null:/[0-9A-Za-z+/]/.test(u)?i.from(u,"base64").toString("utf8"):null)}}).call(this,r(145).Buffer)},function(a,n,r){n.byteLength=function(p){var d=l(p),y=d[0],m=d[1];return 3*(y+m)/4-m},n.toByteArray=function(p){var d,y,m=l(p),S=m[0],v=m[1],g=new u(function(T,w,_){return 3*(w+_)/4-_}(0,S,v)),x=0,C=v>0?S-4:S;for(y=0;y<C;y+=4)d=s[p.charCodeAt(y)]<<18|s[p.charCodeAt(y+1)]<<12|s[p.charCodeAt(y+2)]<<6|s[p.charCodeAt(y+3)],g[x++]=d>>16&255,g[x++]=d>>8&255,g[x++]=255&d;return v===2&&(d=s[p.charCodeAt(y)]<<2|s[p.charCodeAt(y+1)]>>4,g[x++]=255&d),v===1&&(d=s[p.charCodeAt(y)]<<10|s[p.charCodeAt(y+1)]<<4|s[p.charCodeAt(y+2)]>>2,g[x++]=d>>8&255,g[x++]=255&d),g},n.fromByteArray=function(p){for(var d,y=p.length,m=y%3,S=[],v=0,g=y-m;v<g;v+=16383)S.push(h(p,v,v+16383>g?g:v+16383));return m===1?(d=p[y-1],S.push(i[d>>2]+i[d<<4&63]+"==")):m===2&&(d=(p[y-2]<<8)+p[y-1],S.push(i[d>>10]+i[d>>4&63]+i[d<<2&63]+"=")),S.join("")};for(var i=[],s=[],u=typeof Uint8Array<"u"?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,f=c.length;o<f;++o)i[o]=c[o],s[c.charCodeAt(o)]=o;function l(p){var d=p.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=p.indexOf("=");return y===-1&&(y=d),[y,y===d?0:4-y%4]}function h(p,d,y){for(var m,S,v=[],g=d;g<y;g+=3)m=(p[g]<<16&16711680)+(p[g+1]<<8&65280)+(255&p[g+2]),v.push(i[(S=m)>>18&63]+i[S>>12&63]+i[S>>6&63]+i[63&S]);return v.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(a,n){n.read=function(r,i,s,u,c){var o,f,l=8*c-u-1,h=(1<<l)-1,p=h>>1,d=-7,y=s?c-1:0,m=s?-1:1,S=r[i+y];for(y+=m,o=S&(1<<-d)-1,S>>=-d,d+=l;d>0;o=256*o+r[i+y],y+=m,d-=8);for(f=o&(1<<-d)-1,o>>=-d,d+=u;d>0;f=256*f+r[i+y],y+=m,d-=8);if(o===0)o=1-p;else{if(o===h)return f?NaN:1/0*(S?-1:1);f+=Math.pow(2,u),o-=p}return(S?-1:1)*f*Math.pow(2,o-u)},n.write=function(r,i,s,u,c,o){var f,l,h,p=8*o-c-1,d=(1<<p)-1,y=d>>1,m=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=u?0:o-1,v=u?1:-1,g=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(l=isNaN(i)?1:0,f=d):(f=Math.floor(Math.log(i)/Math.LN2),i*(h=Math.pow(2,-f))<1&&(f--,h*=2),(i+=f+y>=1?m/h:m*Math.pow(2,1-y))*h>=2&&(f++,h/=2),f+y>=d?(l=0,f=d):f+y>=1?(l=(i*h-1)*Math.pow(2,c),f+=y):(l=i*Math.pow(2,y-1)*Math.pow(2,c),f=0));c>=8;r[s+S]=255&l,S+=v,l/=256,c-=8);for(f=f<<c|l,p+=c;p>0;r[s+S]=255&f,S+=v,f/=256,p-=8);r[s+S-v]|=128*g}},function(a,n){var r={}.toString;a.exports=Array.isArray||function(i){return r.call(i)=="[object Array]"}},function(a,n,r){var i=this&&this.__values||function(c){var o=typeof Symbol=="function"&&Symbol.iterator,f=o&&c[o],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(1);function u(c){var o,f;if(c===null||s.isString(c)||s.isNumber(c))return c;if(s.isArray(c)){var l=new Array;try{for(var h=i(c),p=h.next();!p.done;p=h.next()){var d=p.value;l.push(u(d))}}catch(S){o={error:S}}finally{try{p&&!p.done&&(f=h.return)&&f.call(h)}finally{if(o)throw o.error}}return l}if(s.isObject(c)){l=new Map;for(var y in c)if(c.hasOwnProperty(y)){var m=c[y];l.set(y,u(m))}return l}return c}n.parseJSONFromBytes=function(c){var o=s.utf8Decode(c);return JSON.parse.call(void 0,o)},n.serializeJSONToBytes=function(c){var o=JSON.stringify.call(void 0,c);return s.utf8Encode(o)},n.parseJSONIntoInfraValues=function(c){return u(JSON.parse.call(void 0,c))},n.convertAJSONDerivedJavaScriptValueToAnInfraValue=u},function(a,n,r){var i=this&&this.__generator||function(f,l){var h,p,d,y,m={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return y={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function S(v){return function(g){return function(x){if(h)throw new TypeError("Generator is already executing.");for(;m;)try{if(h=1,p&&(d=2&x[0]?p.return:x[0]?p.throw||((d=p.return)&&d.call(p),0):p.next)&&!(d=d.call(p,x[1])).done)return d;switch(p=0,d&&(x=[2&x[0],d.value]),x[0]){case 0:case 1:d=x;break;case 4:return m.label++,{value:x[1],done:!1};case 5:m.label++,p=x[1],x=[0];continue;case 7:x=m.ops.pop(),m.trys.pop();continue;default:if(d=m.trys,!((d=d.length>0&&d[d.length-1])||x[0]!==6&&x[0]!==2)){m=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){m.label=x[1];break}if(x[0]===6&&m.label<d[1]){m.label=d[1],d=x;break}if(d&&m.label<d[2]){m.label=d[2],m.ops.push(x);break}d[2]&&m.ops.pop(),m.trys.pop();continue}x=l.call(f,m)}catch(C){x=[6,C],p=0}finally{h=d=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}([v,g])}}},s=this&&this.__read||function(f,l){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var p,d,y=h.call(f),m=[];try{for(;(l===void 0||l-- >0)&&!(p=y.next()).done;)m.push(p.value)}catch(S){d={error:S}}finally{try{p&&!p.done&&(h=y.return)&&h.call(y)}finally{if(d)throw d.error}}return m},u=this&&this.__spread||function(){for(var f=[],l=0;l<arguments.length;l++)f=f.concat(s(arguments[l]));return f},c=this&&this.__values||function(f){var l=typeof Symbol=="function"&&Symbol.iterator,h=l&&f[l],p=0;if(h)return h.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(1);n.append=function(f,l){f.push(l)},n.extend=function(f,l){f.push.apply(f,u(l))},n.prepend=function(f,l){f.unshift(l)},n.replace=function(f,l,h){var p,d,y=0;try{for(var m=c(f),S=m.next();!S.done;S=m.next()){var v=S.value;if(o.isFunction(l))l.call(null,v)&&(f[y]=h);else if(v===l)return void(f[y]=h);y++}}catch(g){p={error:g}}finally{try{S&&!S.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}},n.insert=function(f,l,h){f.splice(h,0,l)},n.remove=function(f,l){for(var h=f.length;h--;){var p=f[h];if(o.isFunction(l))l.call(null,p)&&f.splice(h,1);else if(p===l)return void f.splice(h,1)}},n.empty=function(f){f.length=0},n.contains=function(f,l){var h,p;try{for(var d=c(f),y=d.next();!y.done;y=d.next()){var m=y.value;if(o.isFunction(l)){if(l.call(null,m))return!0}else if(m===l)return!0}}catch(S){h={error:S}}finally{try{y&&!y.done&&(p=d.return)&&p.call(d)}finally{if(h)throw h.error}}return!1},n.size=function(f,l){var h,p;if(l===void 0)return f.length;var d=0;try{for(var y=c(f),m=y.next();!m.done;m=y.next()){var S=m.value;l.call(null,S)&&d++}}catch(v){h={error:v}}finally{try{m&&!m.done&&(p=y.return)&&p.call(y)}finally{if(h)throw h.error}}return d},n.isEmpty=function(f){return f.length===0},n.forEach=function(f,l){var h,p,d,y,m,S;return i(this,function(v){switch(v.label){case 0:return l!==void 0?[3,2]:[5,c(f)];case 1:return v.sent(),[3,9];case 2:v.trys.push([2,7,8,9]),h=c(f),p=h.next(),v.label=3;case 3:return p.done?[3,6]:(d=p.value,l.call(null,d)?[4,d]:[3,5]);case 4:v.sent(),v.label=5;case 5:return p=h.next(),[3,3];case 6:return[3,9];case 7:return y=v.sent(),m={error:y},[3,9];case 8:try{p&&!p.done&&(S=h.return)&&S.call(h)}finally{if(m)throw m.error}return[7];case 9:return[2]}})},n.clone=function(f){return new(Array.bind.apply(Array,u([void 0],f)))},n.sortInAscendingOrder=function(f,l){return f.sort(function(h,p){return l.call(null,h,p)?-1:1})},n.sortInDescendingOrder=function(f,l){return f.sort(function(h,p){return l.call(null,h,p)?1:-1})}},function(a,n,r){var i=this&&this.__generator||function(f,l){var h,p,d,y,m={label:0,sent:function(){if(1&d[0])throw d[1];return d[1]},trys:[],ops:[]};return y={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function S(v){return function(g){return function(x){if(h)throw new TypeError("Generator is already executing.");for(;m;)try{if(h=1,p&&(d=2&x[0]?p.return:x[0]?p.throw||((d=p.return)&&d.call(p),0):p.next)&&!(d=d.call(p,x[1])).done)return d;switch(p=0,d&&(x=[2&x[0],d.value]),x[0]){case 0:case 1:d=x;break;case 4:return m.label++,{value:x[1],done:!1};case 5:m.label++,p=x[1],x=[0];continue;case 7:x=m.ops.pop(),m.trys.pop();continue;default:if(d=m.trys,!((d=d.length>0&&d[d.length-1])||x[0]!==6&&x[0]!==2)){m=0;continue}if(x[0]===3&&(!d||x[1]>d[0]&&x[1]<d[3])){m.label=x[1];break}if(x[0]===6&&m.label<d[1]){m.label=d[1],d=x;break}if(d&&m.label<d[2]){m.label=d[2],m.ops.push(x);break}d[2]&&m.ops.pop(),m.trys.pop();continue}x=l.call(f,m)}catch(C){x=[6,C],p=0}finally{h=d=0}if(5&x[0])throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}([v,g])}}},s=this&&this.__values||function(f){var l=typeof Symbol=="function"&&Symbol.iterator,h=l&&f[l],p=0;if(h)return h.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(f,l){var h=typeof Symbol=="function"&&f[Symbol.iterator];if(!h)return f;var p,d,y=h.call(f),m=[];try{for(;(l===void 0||l-- >0)&&!(p=y.next()).done;)m.push(p.value)}catch(S){d={error:S}}finally{try{p&&!p.done&&(h=y.return)&&h.call(y)}finally{if(d)throw d.error}}return m},c=this&&this.__spread||function(){for(var f=[],l=0;l<arguments.length;l++)f=f.concat(u(arguments[l]));return f};Object.defineProperty(n,"__esModule",{value:!0});var o=r(1);n.get=function(f,l){return f.get(l)},n.set=function(f,l,h){f.set(l,h)},n.remove=function(f,l){var h,p,d,y;if(o.isFunction(l)){var m=[];try{for(var S=s(f),v=S.next();!v.done;v=S.next()){var g=v.value;l.call(null,g)&&m.push(g[0])}}catch(w){h={error:w}}finally{try{v&&!v.done&&(p=S.return)&&p.call(S)}finally{if(h)throw h.error}}try{for(var x=s(m),C=x.next();!C.done;C=x.next()){var T=C.value;f.delete(T)}}catch(w){d={error:w}}finally{try{C&&!C.done&&(y=x.return)&&y.call(x)}finally{if(d)throw d.error}}}else f.delete(l)},n.contains=function(f,l){var h,p;if(o.isFunction(l)){try{for(var d=s(f),y=d.next();!y.done;y=d.next()){var m=y.value;if(l.call(null,m))return!0}}catch(S){h={error:S}}finally{try{y&&!y.done&&(p=d.return)&&p.call(d)}finally{if(h)throw h.error}}return!1}return f.has(l)},n.keys=function(f){return new Set(f.keys())},n.values=function(f){return c(f.values())},n.size=function(f,l){var h,p;if(l===void 0)return f.size;var d=0;try{for(var y=s(f),m=y.next();!m.done;m=y.next()){var S=m.value;l.call(null,S)&&d++}}catch(v){h={error:v}}finally{try{m&&!m.done&&(p=y.return)&&p.call(y)}finally{if(h)throw h.error}}return d},n.isEmpty=function(f){return f.size===0},n.forEach=function(f,l){var h,p,d,y,m,S;return i(this,function(v){switch(v.label){case 0:return l!==void 0?[3,2]:[5,s(f)];case 1:return v.sent(),[3,9];case 2:v.trys.push([2,7,8,9]),h=s(f),p=h.next(),v.label=3;case 3:return p.done?[3,6]:(d=p.value,l.call(null,d)?[4,d]:[3,5]);case 4:v.sent(),v.label=5;case 5:return p=h.next(),[3,3];case 6:return[3,9];case 7:return y=v.sent(),m={error:y},[3,9];case 8:try{p&&!p.done&&(S=h.return)&&S.call(h)}finally{if(m)throw m.error}return[7];case 9:return[2]}})},n.clone=function(f){return new Map(f)},n.sortInAscendingOrder=function(f,l){var h=new(Array.bind.apply(Array,c([void 0],f)));return h.sort(function(p,d){return l.call(null,p,d)?-1:1}),new Map(h)},n.sortInDescendingOrder=function(f,l){var h=new(Array.bind.apply(Array,c([void 0],f)));return h.sort(function(p,d){return l.call(null,p,d)?1:-1}),new Map(h)}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.HTML="http://www.w3.org/1999/xhtml",n.XML="http://www.w3.org/XML/1998/namespace",n.XMLNS="http://www.w3.org/2000/xmlns/",n.MathML="http://www.w3.org/1998/Math/MathML",n.SVG="http://www.w3.org/2000/svg",n.XLink="http://www.w3.org/1999/xlink"},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.enqueue=function(i,s){i.push(s)},n.dequeue=function(i){return i.shift()||null}},function(a,n,r){var i=this&&this.__generator||function(l,h){var p,d,y,m,S={label:0,sent:function(){if(1&y[0])throw y[1];return y[1]},trys:[],ops:[]};return m={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function v(g){return function(x){return function(C){if(p)throw new TypeError("Generator is already executing.");for(;S;)try{if(p=1,d&&(y=2&C[0]?d.return:C[0]?d.throw||((y=d.return)&&y.call(d),0):d.next)&&!(y=y.call(d,C[1])).done)return y;switch(d=0,y&&(C=[2&C[0],y.value]),C[0]){case 0:case 1:y=C;break;case 4:return S.label++,{value:C[1],done:!1};case 5:S.label++,d=C[1],C=[0];continue;case 7:C=S.ops.pop(),S.trys.pop();continue;default:if(y=S.trys,!((y=y.length>0&&y[y.length-1])||C[0]!==6&&C[0]!==2)){S=0;continue}if(C[0]===3&&(!y||C[1]>y[0]&&C[1]<y[3])){S.label=C[1];break}if(C[0]===6&&S.label<y[1]){S.label=y[1],y=C;break}if(y&&S.label<y[2]){S.label=y[2],S.ops.push(C);break}y[2]&&S.ops.pop(),S.trys.pop();continue}C=h.call(l,S)}catch(T){C=[6,T],d=0}finally{p=y=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}([g,x])}}},s=this&&this.__values||function(l){var h=typeof Symbol=="function"&&Symbol.iterator,p=h&&l[h],d=0;if(p)return p.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&d>=l.length&&(l=void 0),{value:l&&l[d++],done:!l}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(l,h){var p=typeof Symbol=="function"&&l[Symbol.iterator];if(!p)return l;var d,y,m=p.call(l),S=[];try{for(;(h===void 0||h-- >0)&&!(d=m.next()).done;)S.push(d.value)}catch(v){y={error:v}}finally{try{d&&!d.done&&(p=m.return)&&p.call(m)}finally{if(y)throw y.error}}return S},c=this&&this.__spread||function(){for(var l=[],h=0;h<arguments.length;h++)l=l.concat(u(arguments[h]));return l};Object.defineProperty(n,"__esModule",{value:!0});var o=r(1);function f(l,h){var p,d;try{for(var y=s(l),m=y.next();!m.done;m=y.next()){var S=m.value;if(!h.has(S))return!1}}catch(v){p={error:v}}finally{try{m&&!m.done&&(d=y.return)&&d.call(y)}finally{if(p)throw p.error}}return!0}n.append=function(l,h){l.add(h)},n.extend=function(l,h){h.forEach(l.add,l)},n.prepend=function(l,h){var p=new Set(l);l.clear(),l.add(h),p.forEach(l.add,l)},n.replace=function(l,h,p){var d,y,m=new Set;try{for(var S=s(l),v=S.next();!v.done;v=S.next()){var g=v.value;o.isFunction(h)?h.call(null,g)?m.add(p):m.add(g):g===h?m.add(p):m.add(g)}}catch(x){d={error:x}}finally{try{v&&!v.done&&(y=S.return)&&y.call(S)}finally{if(d)throw d.error}}l.clear(),m.forEach(l.add,l)},n.insert=function(l,h,p){var d,y,m=new Set,S=0;try{for(var v=s(l),g=v.next();!g.done;g=v.next()){var x=g.value;S===p&&m.add(h),m.add(x),S++}}catch(C){d={error:C}}finally{try{g&&!g.done&&(y=v.return)&&y.call(v)}finally{if(d)throw d.error}}l.clear(),m.forEach(l.add,l)},n.remove=function(l,h){var p,d,y,m;if(o.isFunction(h)){var S=[];try{for(var v=s(l),g=v.next();!g.done;g=v.next()){var x=g.value;h.call(null,x)&&S.push(x)}}catch(_){p={error:_}}finally{try{g&&!g.done&&(d=v.return)&&d.call(v)}finally{if(p)throw p.error}}try{for(var C=s(S),T=C.next();!T.done;T=C.next()){var w=T.value;l.delete(w)}}catch(_){y={error:_}}finally{try{T&&!T.done&&(m=C.return)&&m.call(C)}finally{if(y)throw y.error}}}else l.delete(h)},n.empty=function(l){l.clear()},n.contains=function(l,h){var p,d;if(!o.isFunction(h))return l.has(h);try{for(var y=s(l),m=y.next();!m.done;m=y.next()){var S=m.value;if(h.call(null,S))return!0}}catch(v){p={error:v}}finally{try{m&&!m.done&&(d=y.return)&&d.call(y)}finally{if(p)throw p.error}}return!1},n.size=function(l,h){var p,d;if(h===void 0)return l.size;var y=0;try{for(var m=s(l),S=m.next();!S.done;S=m.next()){var v=S.value;h.call(null,v)&&y++}}catch(g){p={error:g}}finally{try{S&&!S.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},n.isEmpty=function(l){return l.size===0},n.forEach=function(l,h){var p,d,y,m,S,v;return i(this,function(g){switch(g.label){case 0:return h!==void 0?[3,2]:[5,s(l)];case 1:return g.sent(),[3,9];case 2:g.trys.push([2,7,8,9]),p=s(l),d=p.next(),g.label=3;case 3:return d.done?[3,6]:(y=d.value,h.call(null,y)?[4,y]:[3,5]);case 4:g.sent(),g.label=5;case 5:return d=p.next(),[3,3];case 6:return[3,9];case 7:return m=g.sent(),S={error:m},[3,9];case 8:try{d&&!d.done&&(v=p.return)&&v.call(p)}finally{if(S)throw S.error}return[7];case 9:return[2]}})},n.clone=function(l){return new Set(l)},n.sortInAscendingOrder=function(l,h){var p=new(Array.bind.apply(Array,c([void 0],l)));return p.sort(function(d,y){return h.call(null,d,y)?-1:1}),new Set(p)},n.sortInDescendingOrder=function(l,h){var p=new(Array.bind.apply(Array,c([void 0],l)));return p.sort(function(d,y){return h.call(null,d,y)?1:-1}),new Set(p)},n.isSubsetOf=f,n.isSupersetOf=function(l,h){return f(h,l)},n.intersection=function(l,h){var p,d,y=new Set;try{for(var m=s(l),S=m.next();!S.done;S=m.next()){var v=S.value;h.has(v)&&y.add(v)}}catch(g){p={error:g}}finally{try{S&&!S.done&&(d=m.return)&&d.call(m)}finally{if(p)throw p.error}}return y},n.union=function(l,h){var p=new Set(l);return h.forEach(p.add,p),p},n.range=function(l,h){for(var p=new Set,d=l;d<=h;d++)p.add(d);return p}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.push=function(i,s){i.push(s)},n.pop=function(i){return i.pop()||null}},function(a,n,r){var i=this&&this.__values||function(S){var v=typeof Symbol=="function"&&Symbol.iterator,g=v&&S[v],x=0;if(g)return g.call(S);if(S&&typeof S.length=="number")return{next:function(){return S&&x>=S.length&&(S=void 0),{value:S&&S[x++],done:!S}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(96),u=r(147),c=r(146),o=r(1);function f(S,v){for(var g=0;;){var x=g<S.length?S.charCodeAt(g):null,C=g<v.length?v.charCodeAt(g):null;if(x===null)return!0;if(x!==C)return!1;g++}}function l(S){var v,g,x=Array.from(S),C=new Uint8Array(x.length),T=0;try{for(var w=i(S),_=w.next();!_.done;_=w.next()){var E=_.value.codePointAt(0);console.assert(E!==void 0&&E<=255,"isomorphicEncode requires string bytes to be less than or equal to 0x00FF."),E!==void 0&&E<=255&&(C[T++]=E)}}catch(D){v={error:D}}finally{try{_&&!_.done&&(g=w.return)&&g.call(w)}finally{if(v)throw v.error}}return C}function h(S){return/^[\u0000-\u007F]*$/.test(S)}function p(S){var v,g,x="";try{for(var C=i(S),T=C.next();!T.done;T=C.next()){var w=T.value,_=w.codePointAt(0);x+=_!==void 0&&_>=65&&_<=90?String.fromCodePoint(_+32):w}}catch(E){v={error:E}}finally{try{T&&!T.done&&(g=C.return)&&g.call(C)}finally{if(v)throw v.error}}return x}function d(S){return S.replace(/^[\t\n\f\r ]+/,"").replace(/[\t\n\f\r ]+$/,"")}function y(S,v,g){if(!o.isArray(v))return y(S,Array.from(v),g);for(var x="";g.position<v.length&&S.call(null,v[g.position]);)x+=v[g.position],g.position++;return x}function m(S,v){y(function(g){return s.ASCIIWhiteSpace.test(g)},S,v)}n.isCodeUnitPrefix=f,n.isCodeUnitLessThan=function(S,v){if(f(v,S))return!1;if(f(S,v))return!0;for(var g=0;g<Math.min(S.length,v.length);g++){var x=S.charCodeAt(g),C=v.charCodeAt(g);if(x!==C)return x<C}return!1},n.isomorphicEncode=l,n.isASCIIString=h,n.asciiLowercase=p,n.asciiUppercase=function(S){var v,g,x="";try{for(var C=i(S),T=C.next();!T.done;T=C.next()){var w=T.value,_=w.codePointAt(0);x+=_!==void 0&&_>=97&&_<=122?String.fromCodePoint(_-32):w}}catch(E){v={error:E}}finally{try{T&&!T.done&&(g=C.return)&&g.call(C)}finally{if(v)throw v.error}}return x},n.asciiCaseInsensitiveMatch=function(S,v){return p(S)===p(v)},n.asciiEncode=function(S){return console.assert(h(S),"asciiEncode requires an ASCII string."),l(S)},n.asciiDecode=function(S){var v,g;try{for(var x=i(S),C=x.next();!C.done;C=x.next()){var T=C.value;console.assert(c.isASCIIByte(T),"asciiDecode requires an ASCII byte sequence.")}}catch(w){v={error:w}}finally{try{C&&!C.done&&(g=x.return)&&g.call(x)}finally{if(v)throw v.error}}return u.isomorphicDecode(S)},n.stripNewlines=function(S){return S.replace(/[\n\r]/g,"")},n.normalizeNewlines=function(S){return S.replace(/\r\n/g,`
`).replace(/\r/g,`
`)},n.stripLeadingAndTrailingASCIIWhitespace=d,n.stripAndCollapseASCIIWhitespace=function(S){return d(S.replace(/[\t\n\f\r ]{2,}/g," "))},n.collectASequenceOfCodePoints=y,n.skipASCIIWhitespace=m,n.strictlySplit=function S(v,g){if(!o.isArray(v))return S(Array.from(v),g);var x={position:0},C=[],T=y(function(w){return g!==w},v,x);for(C.push(T);x.position<v.length;)console.assert(v[x.position]===g,"strictlySplit found no delimiter in input string."),x.position++,T=y(function(w){return g!==w},v,x),C.push(T);return C},n.splitAStringOnASCIIWhitespace=function S(v){if(!o.isArray(v))return S(Array.from(v));var g={position:0},x=[];for(m(v,g);g.position<v.length;){var C=y(function(T){return!s.ASCIIWhiteSpace.test(T)},v,g);x.push(C),m(v,g)}return x},n.splitAStringOnCommas=function S(v){if(!o.isArray(v))return S(Array.from(v));for(var g={position:0},x=[];g.position<v.length;){var C=y(function(T){return T!==","},v,g);x.push(d(C)),g.position<v.length&&(console.assert(v[g.position]===",","splitAStringOnCommas found no delimiter in input string."),g.position++)}return x},n.concatenate=function(S,v){return v===void 0&&(v=""),S.length===0?"":S.join(v)}},function(a,n,r){var i=this&&this.__values||function(u){var c=typeof Symbol=="function"&&Symbol.iterator,o=c&&u[c],f=0;if(o)return o.call(u);if(u&&typeof u.length=="number")return{next:function(){return u&&f>=u.length&&(u=void 0),{value:u&&u[f++],done:!u}}};throw new TypeError(c?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(97);n.abort_add=function(u,c){c._abortedFlag||c._abortAlgorithms.add(u)},n.abort_remove=function(u,c){c._abortAlgorithms.delete(u)},n.abort_signalAbort=function(u){var c,o;if(!u._abortedFlag){u._abortedFlag=!0;try{for(var f=i(u._abortAlgorithms),l=f.next();!l.done;l=f.next())l.value.call(u)}catch(h){c={error:h}}finally{try{l&&!l.done&&(o=f.return)&&o.call(f)}finally{if(c)throw c.error}}u._abortAlgorithms.clear(),s.event_fireAnEvent("abort",u)}}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(150),s=function(){function u(){}return u.asNode=function(c){if(i.Guard.isNode(c))return c;throw new Error("Invalid object. Node expected.")},u}();n.Cast=s},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function u(){}return Object.defineProperty(u.prototype,"size",{get:function(){return 0},enumerable:!0,configurable:!0}),u.prototype.add=function(c){throw new Error("Cannot add to an empty set.")},u.prototype.clear=function(){},u.prototype.delete=function(c){return!1},u.prototype.forEach=function(c,o){},u.prototype.has=function(c){return!1},u.prototype[Symbol.iterator]=function(){return new s},u.prototype.entries=function(){return new s},u.prototype.keys=function(){return new s},u.prototype.values=function(){return new s},Object.defineProperty(u.prototype,Symbol.toStringTag,{get:function(){return"EmptySet"},enumerable:!0,configurable:!0}),u}();n.EmptySet=i;var s=function(){function u(){}return u.prototype[Symbol.iterator]=function(){return this},u.prototype.next=function(){return{done:!0,value:null}},u}()},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),function(i){i[i.SchemeStart=0]="SchemeStart",i[i.Scheme=1]="Scheme",i[i.NoScheme=2]="NoScheme",i[i.SpecialRelativeOrAuthority=3]="SpecialRelativeOrAuthority",i[i.PathOrAuthority=4]="PathOrAuthority",i[i.Relative=5]="Relative",i[i.RelativeSlash=6]="RelativeSlash",i[i.SpecialAuthoritySlashes=7]="SpecialAuthoritySlashes",i[i.SpecialAuthorityIgnoreSlashes=8]="SpecialAuthorityIgnoreSlashes",i[i.Authority=9]="Authority",i[i.Host=10]="Host",i[i.Hostname=11]="Hostname",i[i.Port=12]="Port",i[i.File=13]="File",i[i.FileSlash=14]="FileSlash",i[i.FileHost=15]="FileHost",i[i.PathStart=16]="PathStart",i[i.Path=17]="Path",i[i.CannotBeABaseURLPath=18]="CannotBeABaseURLPath",i[i.Query=19]="Query",i[i.Fragment=20]="Fragment"}(n.ParserState||(n.ParserState={})),n.OpaqueOrigin=["","",null,null]},function(a,n,r){var i=r(245),s=r(247);function u(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=C,n.resolve=function(T,w){return C(T,!1,!0).resolve(w)},n.resolveObject=function(T,w){return T?C(T,!1,!0).resolveObject(w):w},n.format=function(T){return s.isString(T)&&(T=C(T)),T instanceof u?T.format():u.prototype.format.call(T)},n.Url=u;var c=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),h=["'"].concat(l),p=["%","/","?",";","#"].concat(h),d=["/","?","#"],y=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,S={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=r(248);function C(T,w,_){if(T&&s.isObject(T)&&T instanceof u)return T;var E=new u;return E.parse(T,w,_),E}u.prototype.parse=function(T,w,_){if(!s.isString(T))throw new TypeError("Parameter 'url' must be a string, not "+typeof T);var E=T.indexOf("?"),D=E!==-1&&E<T.indexOf("#")?"?":"#",b=T.split(D);b[0]=b[0].replace(/\\/g,"/");var N=T=b.join(D);if(N=N.trim(),!_&&T.split("#").length===1){var R=f.exec(N);if(R)return this.path=N,this.href=N,this.pathname=R[1],R[2]?(this.search=R[2],this.query=w?x.parse(this.search.substr(1)):this.search.substr(1)):w&&(this.search="",this.query={}),this}var M=c.exec(N);if(M){var A=(M=M[0]).toLowerCase();this.protocol=A,N=N.substr(M.length)}if(_||M||N.match(/^\/\/[^@\/]+@[^@\/]+/)){var I=N.substr(0,2)==="//";!I||M&&v[M]||(N=N.substr(2),this.slashes=!0)}if(!v[M]&&(I||M&&!g[M])){for(var $,U,B=-1,F=0;F<d.length;F++)(z=N.indexOf(d[F]))!==-1&&(B===-1||z<B)&&(B=z);for((U=B===-1?N.lastIndexOf("@"):N.lastIndexOf("@",B))!==-1&&($=N.slice(0,U),N=N.slice(U+1),this.auth=decodeURIComponent($)),B=-1,F=0;F<p.length;F++){var z;(z=N.indexOf(p[F]))!==-1&&(B===-1||z<B)&&(B=z)}B===-1&&(B=N.length),this.host=N.slice(0,B),N=N.slice(B),this.parseHost(),this.hostname=this.hostname||"";var H=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!H)for(var X=this.hostname.split(/\./),Y=(F=0,X.length);F<Y;F++){var q=X[F];if(q&&!q.match(y)){for(var ee="",re=0,ie=q.length;re<ie;re++)q.charCodeAt(re)>127?ee+="x":ee+=q[re];if(!ee.match(y)){var te=X.slice(0,F),L=X.slice(F+1),O=q.match(m);O&&(te.push(O[1]),L.unshift(O[2])),L.length&&(N="/"+L.join(".")+N),this.hostname=te.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),H||(this.hostname=i.toASCII(this.hostname));var G=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+G,this.href+=this.host,H&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),N[0]!=="/"&&(N="/"+N))}if(!S[A])for(F=0,Y=h.length;F<Y;F++){var P=h[F];if(N.indexOf(P)!==-1){var j=encodeURIComponent(P);j===P&&(j=escape(P)),N=N.split(P).join(j)}}var W=N.indexOf("#");W!==-1&&(this.hash=N.substr(W),N=N.slice(0,W));var Z=N.indexOf("?");if(Z!==-1?(this.search=N.substr(Z),this.query=N.substr(Z+1),w&&(this.query=x.parse(this.query)),N=N.slice(0,Z)):w&&(this.search="",this.query={}),N&&(this.pathname=N),g[A]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){G=this.pathname||"";var ne=this.search||"";this.path=G+ne}return this.href=this.format(),this},u.prototype.format=function(){var T=this.auth||"";T&&(T=(T=encodeURIComponent(T)).replace(/%3A/i,":"),T+="@");var w=this.protocol||"",_=this.pathname||"",E=this.hash||"",D=!1,b="";this.host?D=T+this.host:this.hostname&&(D=T+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(D+=":"+this.port)),this.query&&s.isObject(this.query)&&Object.keys(this.query).length&&(b=x.stringify(this.query));var N=this.search||b&&"?"+b||"";return w&&w.substr(-1)!==":"&&(w+=":"),this.slashes||(!w||g[w])&&D!==!1?(D="//"+(D||""),_&&_.charAt(0)!=="/"&&(_="/"+_)):D||(D=""),E&&E.charAt(0)!=="#"&&(E="#"+E),N&&N.charAt(0)!=="?"&&(N="?"+N),w+D+(_=_.replace(/[?#]/g,function(R){return encodeURIComponent(R)}))+(N=N.replace("#","%23"))+E},u.prototype.resolve=function(T){return this.resolveObject(C(T,!1,!0)).format()},u.prototype.resolveObject=function(T){if(s.isString(T)){var w=new u;w.parse(T,!1,!0),T=w}for(var _=new u,E=Object.keys(this),D=0;D<E.length;D++){var b=E[D];_[b]=this[b]}if(_.hash=T.hash,T.href==="")return _.href=_.format(),_;if(T.slashes&&!T.protocol){for(var N=Object.keys(T),R=0;R<N.length;R++){var M=N[R];M!=="protocol"&&(_[M]=T[M])}return g[_.protocol]&&_.hostname&&!_.pathname&&(_.path=_.pathname="/"),_.href=_.format(),_}if(T.protocol&&T.protocol!==_.protocol){if(!g[T.protocol]){for(var A=Object.keys(T),I=0;I<A.length;I++){var $=A[I];_[$]=T[$]}return _.href=_.format(),_}if(_.protocol=T.protocol,T.host||v[T.protocol])_.pathname=T.pathname;else{for(var U=(T.pathname||"").split("/");U.length&&!(T.host=U.shift()););T.host||(T.host=""),T.hostname||(T.hostname=""),U[0]!==""&&U.unshift(""),U.length<2&&U.unshift(""),_.pathname=U.join("/")}if(_.search=T.search,_.query=T.query,_.host=T.host||"",_.auth=T.auth,_.hostname=T.hostname||T.host,_.port=T.port,_.pathname||_.search){var B=_.pathname||"",F=_.search||"";_.path=B+F}return _.slashes=_.slashes||T.slashes,_.href=_.format(),_}var z=_.pathname&&_.pathname.charAt(0)==="/",H=T.host||T.pathname&&T.pathname.charAt(0)==="/",X=H||z||_.host&&T.pathname,Y=X,q=_.pathname&&_.pathname.split("/")||[],ee=(U=T.pathname&&T.pathname.split("/")||[],_.protocol&&!g[_.protocol]);if(ee&&(_.hostname="",_.port=null,_.host&&(q[0]===""?q[0]=_.host:q.unshift(_.host)),_.host="",T.protocol&&(T.hostname=null,T.port=null,T.host&&(U[0]===""?U[0]=T.host:U.unshift(T.host)),T.host=null),X=X&&(U[0]===""||q[0]==="")),H)_.host=T.host||T.host===""?T.host:_.host,_.hostname=T.hostname||T.hostname===""?T.hostname:_.hostname,_.search=T.search,_.query=T.query,q=U;else if(U.length)q||(q=[]),q.pop(),q=q.concat(U),_.search=T.search,_.query=T.query;else if(!s.isNullOrUndefined(T.search))return ee&&(_.hostname=_.host=q.shift(),(O=!!(_.host&&_.host.indexOf("@")>0)&&_.host.split("@"))&&(_.auth=O.shift(),_.host=_.hostname=O.shift())),_.search=T.search,_.query=T.query,s.isNull(_.pathname)&&s.isNull(_.search)||(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.href=_.format(),_;if(!q.length)return _.pathname=null,_.search?_.path="/"+_.search:_.path=null,_.href=_.format(),_;for(var re=q.slice(-1)[0],ie=(_.host||T.host||q.length>1)&&(re==="."||re==="..")||re==="",te=0,L=q.length;L>=0;L--)(re=q[L])==="."?q.splice(L,1):re===".."?(q.splice(L,1),te++):te&&(q.splice(L,1),te--);if(!X&&!Y)for(;te--;te)q.unshift("..");!X||q[0]===""||q[0]&&q[0].charAt(0)==="/"||q.unshift(""),ie&&q.join("/").substr(-1)!=="/"&&q.push("");var O,G=q[0]===""||q[0]&&q[0].charAt(0)==="/";return ee&&(_.hostname=_.host=G?"":q.length?q.shift():"",(O=!!(_.host&&_.host.indexOf("@")>0)&&_.host.split("@"))&&(_.auth=O.shift(),_.host=_.hostname=O.shift())),(X=X||_.host&&q.length)&&!G&&q.unshift(""),q.length?_.pathname=q.join("/"):(_.pathname=null,_.path=null),s.isNull(_.pathname)&&s.isNull(_.search)||(_.path=(_.pathname?_.pathname:"")+(_.search?_.search:"")),_.auth=T.auth||_.auth,_.slashes=_.slashes||T.slashes,_.href=_.format(),_},u.prototype.parseHost=function(){var T=this.host,w=o.exec(T);w&&((w=w[0])!==":"&&(this.port=w.substr(1)),T=T.substr(0,T.length-w.length)),T&&(this.hostname=T)}},function(a,n,r){(function(i,s){var u;/*! https://mths.be/punycode v1.4.1 by @mathias */(function(c){n&&n.nodeType,i&&i.nodeType;var o=typeof s=="object"&&s;o.global!==o&&o.window!==o&&o.self;var f,l=2147483647,h=/^xn--/,p=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,S=String.fromCharCode;function v(b){throw new RangeError(y[b])}function g(b,N){for(var R=b.length,M=[];R--;)M[R]=N(b[R]);return M}function x(b,N){var R=b.split("@"),M="";return R.length>1&&(M=R[0]+"@",b=R[1]),M+g((b=b.replace(d,".")).split("."),N).join(".")}function C(b){for(var N,R,M=[],A=0,I=b.length;A<I;)(N=b.charCodeAt(A++))>=55296&&N<=56319&&A<I?(64512&(R=b.charCodeAt(A++)))==56320?M.push(((1023&N)<<10)+(1023&R)+65536):(M.push(N),A--):M.push(N);return M}function T(b){return g(b,function(N){var R="";return N>65535&&(R+=S((N-=65536)>>>10&1023|55296),N=56320|1023&N),R+=S(N)}).join("")}function w(b,N){return b+22+75*(b<26)-((N!=0)<<5)}function _(b,N,R){var M=0;for(b=R?m(b/700):b>>1,b+=m(b/N);b>455;M+=36)b=m(b/35);return m(M+36*b/(b+38))}function E(b){var N,R,M,A,I,$,U,B,F,z,H,X=[],Y=b.length,q=0,ee=128,re=72;for((R=b.lastIndexOf("-"))<0&&(R=0),M=0;M<R;++M)b.charCodeAt(M)>=128&&v("not-basic"),X.push(b.charCodeAt(M));for(A=R>0?R+1:0;A<Y;){for(I=q,$=1,U=36;A>=Y&&v("invalid-input"),((B=(H=b.charCodeAt(A++))-48<10?H-22:H-65<26?H-65:H-97<26?H-97:36)>=36||B>m((l-q)/$))&&v("overflow"),q+=B*$,!(B<(F=U<=re?1:U>=re+26?26:U-re));U+=36)$>m(l/(z=36-F))&&v("overflow"),$*=z;re=_(q-I,N=X.length+1,I==0),m(q/N)>l-ee&&v("overflow"),ee+=m(q/N),q%=N,X.splice(q++,0,ee)}return T(X)}function D(b){var N,R,M,A,I,$,U,B,F,z,H,X,Y,q,ee,re=[];for(X=(b=C(b)).length,N=128,R=0,I=72,$=0;$<X;++$)(H=b[$])<128&&re.push(S(H));for(M=A=re.length,A&&re.push("-");M<X;){for(U=l,$=0;$<X;++$)(H=b[$])>=N&&H<U&&(U=H);for(U-N>m((l-R)/(Y=M+1))&&v("overflow"),R+=(U-N)*Y,N=U,$=0;$<X;++$)if((H=b[$])<N&&++R>l&&v("overflow"),H==N){for(B=R,F=36;!(B<(z=F<=I?1:F>=I+26?26:F-I));F+=36)ee=B-z,q=36-z,re.push(S(w(z+ee%q,0))),B=m(ee/q);re.push(S(w(B,0))),I=_(R,Y,M==A),R=0,++M}++R,++N}return re.join("")}f={version:"1.4.1",ucs2:{decode:C,encode:T},decode:E,encode:D,toASCII:function(b){return x(b,function(N){return p.test(N)?"xn--"+D(N):N})},toUnicode:function(b){return x(b,function(N){return h.test(N)?E(N.slice(4).toLowerCase()):N})}},(u=function(){return f}.call(n,r,n,i))===void 0||(i.exports=u)})()}).call(this,r(246)(a),r(78))},function(a,n){a.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(a,n,r){a.exports={isString:function(i){return typeof i=="string"},isObject:function(i){return typeof i=="object"&&i!==null},isNull:function(i){return i===null},isNullOrUndefined:function(i){return i==null}}},function(a,n,r){n.decode=n.parse=r(249),n.encode=n.stringify=r(250)},function(a,n,r){function i(u,c){return Object.prototype.hasOwnProperty.call(u,c)}a.exports=function(u,c,o,f){c=c||"&",o=o||"=";var l={};if(typeof u!="string"||u.length===0)return l;var h=/\+/g;u=u.split(c);var p=1e3;f&&typeof f.maxKeys=="number"&&(p=f.maxKeys);var d=u.length;p>0&&d>p&&(d=p);for(var y=0;y<d;++y){var m,S,v,g,x=u[y].replace(h,"%20"),C=x.indexOf(o);C>=0?(m=x.substr(0,C),S=x.substr(C+1)):(m=x,S=""),v=decodeURIComponent(m),g=decodeURIComponent(S),i(l,v)?s(l[v])?l[v].push(g):l[v]=[l[v],g]:l[v]=g}return l};var s=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"}},function(a,n,r){var i=function(o){switch(typeof o){case"string":return o;case"boolean":return o?"true":"false";case"number":return isFinite(o)?o:"";default:return""}};a.exports=function(o,f,l,h){return f=f||"&",l=l||"=",o===null&&(o=void 0),typeof o=="object"?u(c(o),function(p){var d=encodeURIComponent(i(p))+l;return s(o[p])?u(o[p],function(y){return d+encodeURIComponent(i(y))}).join(f):d+encodeURIComponent(i(o[p]))}).join(f):h?encodeURIComponent(i(h))+l+encodeURIComponent(i(o)):""};var s=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function u(o,f){if(o.map)return o.map(f);for(var l=[],h=0;h<o.length;h++)l.push(f(o[h],h));return l}var c=Object.keys||function(o){var f=[];for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&f.push(l);return f}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(52);n.attr_setAnExistingAttributeValue=function(s,u){s._element===null?s._value=u:i.element_change(s,s._element,u)}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(108),s=r(30),u=r(52);n.tokenList_validationSteps=function(c,o){if(!s.dom_hasSupportedTokens(c._attribute._localName))throw new TypeError("There are no supported tokens defined for attribute name: '"+c._attribute._localName+"'.");return s.dom_getSupportedTokens(c._attribute._localName).has(o.toLowerCase())},n.tokenList_updateSteps=function(c){(c._element.hasAttribute(c._attribute._localName)||c._tokenSet.size!==0)&&u.element_setAnAttributeValue(c._element,c._attribute._localName,i.orderedSet_serialize(c._tokenSet))},n.tokenList_serializeSteps=function(c){return u.element_getAnAttributeValue(c._element,c._attribute._localName)}},function(a,n,r){var i=this&&this.__values||function(c){var o=typeof Symbol=="function"&&Symbol.iterator,f=o&&c[o],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(1);function u(c){return s.isBoolean(c)?c:c.capture||!1}n.eventTarget_flatten=u,n.eventTarget_flattenMore=function(c){var o=u(c),f=!1,l=!1;return s.isBoolean(c)||(f=c.once||!1,l=c.passive||!1),[o,l,f]},n.eventTarget_addEventListener=function(c,o){if(o.callback!==null){for(var f=0;f<c._eventListenerList.length;f++){var l=c._eventListenerList[f];if(l.type===o.type&&l.callback.handleEvent===o.callback.handleEvent&&l.capture===o.capture)return}c._eventListenerList.push(o)}},n.eventTarget_removeEventListener=function(c,o,f){o.removed=!0,c._eventListenerList.splice(f,1)},n.eventTarget_removeAllEventListeners=function(c){var o,f;try{for(var l=i(c._eventListenerList),h=l.next();!h.done;h=l.next())h.value.removed=!0}catch(p){o={error:p}}finally{try{h&&!h.done&&(f=l.return)&&f.call(l)}finally{if(o)throw o.error}}c._eventListenerList.length=0}},function(a,n,r){var i=this&&this.__values||function(c){var o=typeof Symbol=="function"&&Symbol.iterator,f=o&&c[o],l=0;if(f)return f.call(c);if(c&&typeof c.length=="number")return{next:function(){return c&&l>=c.length&&(c=void 0),{value:c&&c[l++],done:!c}}};throw new TypeError(o?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(1),u=r(29);n.parentNode_convertNodesIntoANode=function(c,o){for(var f,l,h=null,p=0;p<c.length;p++){var d=c[p];if(s.isString(d)){var y=u.create_text(o,d);c[p]=y}}if(c.length===1)h=c[0];else{var m=h=u.create_documentFragment(o);try{for(var S=i(c),v=S.next();!v.done;v=S.next())d=v.value,m.appendChild(d)}catch(g){f={error:g}}finally{try{v&&!v.done&&(l=S.return)&&l.call(S)}finally{if(f)throw f.error}}}return h}},function(a,n,r){var i=this&&this.__values||function(w){var _=typeof Symbol=="function"&&Symbol.iterator,E=_&&w[_],D=0;if(E)return E.call(w);if(w&&typeof w.length=="number")return{next:function(){return w&&D>=w.length&&(w=void 0),{value:w&&w[D++],done:!w}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")},s=this&&this.__read||function(w,_){var E=typeof Symbol=="function"&&w[Symbol.iterator];if(!E)return w;var D,b,N=E.call(w),R=[];try{for(;(_===void 0||_-- >0)&&!(D=N.next()).done;)R.push(D.value)}catch(M){b={error:M}}finally{try{D&&!D.done&&(E=N.return)&&E.call(N)}finally{if(b)throw b.error}}return R},u=this&&this.__spread||function(){for(var w=[],_=0;_<arguments.length;_++)w=w.concat(s(arguments[_]));return w};Object.defineProperty(n,"__esModule",{value:!0});var c=r(2),o=r(9),f=r(3),l=r(29),h=r(17),p=r(175),d=r(107),y=r(176),m=r(37),S=r(177);function v(w){return w._startNode===w._endNode&&w._startOffset===w._endOffset}function g(w){return h.tree_rootNode(w._startNode)}function x(w,_){return h.tree_rootNode(w)===g(_)&&p.boundaryPoint_position([w,0],_._start)===c.BoundaryPosition.After&&p.boundaryPoint_position([w,h.tree_nodeLength(w)],_._end)===c.BoundaryPosition.Before}function C(w,_){var E=h.tree_isAncestorOf(_._startNode,w,!0),D=h.tree_isAncestorOf(_._endNode,w,!0);return E&&!D||!E&&D}function T(w){var _,E,D,b,N,R,M=l.create_documentFragment(w._startNode._nodeDocument);if(v(w))return M;var A=w._startNode,I=w._startOffset,$=w._endNode,U=w._endOffset;if(A===$&&f.Guard.isCharacterDataNode(A))return(V=y.node_clone(A))._data=d.characterData_substringData(A,I,U-I),m.mutation_append(V,M),d.characterData_replaceData(A,I,U-I,""),M;for(var B=A;!h.tree_isAncestorOf($,B,!0);){if(B._parent===null)throw new Error("Parent node  is null.");B=B._parent}var F=null;if(!h.tree_isAncestorOf($,A,!0))try{for(var z=i(B._children),H=z.next();!H.done;H=z.next())if(C(ee=H.value,w)){F=ee;break}}catch(ne){_={error:ne}}finally{try{H&&!H.done&&(E=z.return)&&E.call(z)}finally{if(_)throw _.error}}var X=null;if(!h.tree_isAncestorOf(A,$,!0))for(var Y=u(B._children),q=Y.length-1;q>0;q--){var ee;if(C(ee=Y[q],w)){X=ee;break}}var re,ie,te=[];try{for(var L=i(B._children),O=L.next();!O.done;O=L.next())if(x(Z=O.value,w)){if(f.Guard.isDocumentTypeNode(Z))throw new o.HierarchyRequestError;te.push(Z)}}catch(ne){D={error:ne}}finally{try{O&&!O.done&&(b=L.return)&&b.call(L)}finally{if(D)throw D.error}}if(h.tree_isAncestorOf($,A,!0))re=A,ie=I;else{for(var G=A;G._parent!==null&&!h.tree_isAncestorOf($,G._parent);)G=G._parent;if(G._parent===null)throw new Error("Parent node is null.");re=G._parent,ie=1+h.tree_index(G)}if(f.Guard.isCharacterDataNode(F))(V=y.node_clone(A))._data=d.characterData_substringData(A,I,h.tree_nodeLength(A)-I),m.mutation_append(V,M),d.characterData_replaceData(A,I,h.tree_nodeLength(A)-I,"");else if(F!==null){var V=y.node_clone(F);m.mutation_append(V,M);var P=T(l.create_range([A,I],[F,h.tree_nodeLength(F)]));m.mutation_append(P,V)}try{for(var j=i(te),W=j.next();!W.done;W=j.next()){var Z=W.value;m.mutation_append(Z,M)}}catch(ne){N={error:ne}}finally{try{W&&!W.done&&(R=j.return)&&R.call(j)}finally{if(N)throw N.error}}return f.Guard.isCharacterDataNode(X)?((V=y.node_clone($))._data=d.characterData_substringData($,0,U),m.mutation_append(V,M),d.characterData_replaceData($,0,U,"")):X!==null&&(V=y.node_clone(X),m.mutation_append(V,M),P=T(l.create_range([X,0],[$,U])),m.mutation_append(P,V)),w._start=[re,ie],w._end=[re,ie],M}n.range_collapsed=v,n.range_root=g,n.range_isContained=x,n.range_isPartiallyContained=C,n.range_setTheStart=function(w,_,E){if(f.Guard.isDocumentTypeNode(_))throw new o.InvalidNodeTypeError;if(E>h.tree_nodeLength(_))throw new o.IndexSizeError;var D=[_,E];g(w)===h.tree_rootNode(_)&&p.boundaryPoint_position(D,w._end)!==c.BoundaryPosition.After||(w._end=D),w._start=D},n.range_setTheEnd=function(w,_,E){if(f.Guard.isDocumentTypeNode(_))throw new o.InvalidNodeTypeError;if(E>h.tree_nodeLength(_))throw new o.IndexSizeError;var D=[_,E];g(w)===h.tree_rootNode(_)&&p.boundaryPoint_position(D,w._start)!==c.BoundaryPosition.Before||(w._start=D),w._end=D},n.range_select=function(w,_){var E=w._parent;if(E===null)throw new o.InvalidNodeTypeError;var D=h.tree_index(w);_._start=[E,D],_._end=[E,D+1]},n.range_extract=T,n.range_cloneTheContents=function w(_){var E,D,b,N,R,M,A=l.create_documentFragment(_._startNode._nodeDocument);if(v(_))return A;var I=_._startNode,$=_._startOffset,U=_._endNode,B=_._endOffset;I===U&&f.Guard.isCharacterDataNode(I)&&((O=y.node_clone(I))._data=d.characterData_substringData(I,$,B-$),m.mutation_append(O,A));for(var F=I;!h.tree_isAncestorOf(U,F,!0);){if(F._parent===null)throw new Error("Parent node  is null.");F=F._parent}var z=null;if(!h.tree_isAncestorOf(U,I,!0))try{for(var H=i(F._children),X=H.next();!X.done;X=H.next())if(C(re=X.value,_)){z=re;break}}catch(W){E={error:W}}finally{try{X&&!X.done&&(D=H.return)&&D.call(H)}finally{if(E)throw E.error}}var Y=null;if(!h.tree_isAncestorOf(I,U,!0))for(var q=u(F._children),ee=q.length-1;ee>0;ee--){var re;if(C(re=q[ee],_)){Y=re;break}}var ie=[];try{for(var te=i(F._children),L=te.next();!L.done;L=te.next())if(x(j=L.value,_)){if(f.Guard.isDocumentTypeNode(j))throw new o.HierarchyRequestError;ie.push(j)}}catch(W){b={error:W}}finally{try{L&&!L.done&&(N=te.return)&&N.call(te)}finally{if(b)throw b.error}}if(f.Guard.isCharacterDataNode(z))(O=y.node_clone(I))._data=d.characterData_substringData(I,$,h.tree_nodeLength(I)-$),m.mutation_append(O,A);else if(z!==null){var O=y.node_clone(z);m.mutation_append(O,A);var G=w(l.create_range([I,$],[z,h.tree_nodeLength(z)]));m.mutation_append(G,O)}try{for(var V=i(ie),P=V.next();!P.done;P=V.next()){var j=P.value,O=y.node_clone(j);m.mutation_append(O,A)}}catch(W){R={error:W}}finally{try{P&&!P.done&&(M=V.return)&&M.call(V)}finally{if(R)throw R.error}}return f.Guard.isCharacterDataNode(Y)?((O=y.node_clone(U))._data=d.characterData_substringData(U,0,B),m.mutation_append(O,A)):Y!==null&&(O=y.node_clone(Y),A.append(O),G=T(l.create_range([Y,0],[U,B])),m.mutation_append(G,O)),A},n.range_insert=function(w,_){var E,D;if(f.Guard.isProcessingInstructionNode(_._startNode)||f.Guard.isCommentNode(_._startNode)||f.Guard.isTextNode(_._startNode)&&_._startNode._parent===null||_._startNode===w)throw new o.HierarchyRequestError;var b,N=null;if(f.Guard.isTextNode(_._startNode))N=_._startNode;else{var R=0;try{for(var M=i(_._startNode._children),A=M.next();!A.done;A=M.next()){var I=A.value;if(R===_._startOffset){N=I;break}R++}}catch(U){E={error:U}}finally{try{A&&!A.done&&(D=M.return)&&D.call(M)}finally{if(E)throw E.error}}}if(N===null)b=_._startNode;else{if(N._parent===null)throw new Error("Parent node is null.");b=N._parent}m.mutation_ensurePreInsertionValidity(w,b,N),f.Guard.isTextNode(_._startNode)&&(N=S.text_split(_._startNode,_._startOffset)),w===N&&(N=w._nextSibling),w._parent!==null&&m.mutation_remove(w,w._parent);var $=N===null?h.tree_nodeLength(b):h.tree_index(N);f.Guard.isDocumentFragmentNode(w)?$+=h.tree_nodeLength(w):$++,m.mutation_preInsert(w,b,N),v(_)&&(_._end=[b,$])},n.range_getContainedNodes=function(w){var _;return(_={})[Symbol.iterator]=function(){var E=w.commonAncestorContainer,D=h.tree_getFirstDescendantNode(E);return{next:function(){for(;D&&!x(D,w);)D=h.tree_getNextDescendantNode(E,D);if(D===null)return{done:!0,value:null};var b={done:!1,value:D};return D=h.tree_getNextDescendantNode(E,D),b}}},_},n.range_getPartiallyContainedNodes=function(w){var _;return(_={})[Symbol.iterator]=function(){var E=w.commonAncestorContainer,D=h.tree_getFirstDescendantNode(E);return{next:function(){for(;D&&!C(D,w);)D=h.tree_getNextDescendantNode(E,D);if(D===null)return{done:!0,value:null};var b={done:!1,value:D};return D=h.tree_getNextDescendantNode(E,D),b}}},_}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(9);n.selectors_scopeMatchASelectorsString=function(s,u){throw new i.NotSupportedError}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(2),s=r(105);n.treeWalker_traverseChildren=function(u,c){for(var o=c?u._current._firstChild:u._current._lastChild;o!==null;){var f=s.traversal_filter(u,o);if(f===i.FilterResult.Accept)return u._current=o,o;if(f===i.FilterResult.Skip){var l=c?o._firstChild:o._lastChild;if(l!==null){o=l;continue}}for(;o!==null;){var h=c?o._nextSibling:o._previousSibling;if(h!==null){o=h;break}var p=o._parent;if(p===null||p===u._root||p===u._current)return null;o=p}}return null},n.treeWalker_traverseSiblings=function(u,c){var o=u._current;if(o===u._root)return null;for(;;){for(var f=c?o._nextSibling:o._previousSibling;f!==null;){o=f;var l=s.traversal_filter(u,o);if(l===i.FilterResult.Accept)return u._current=o,o;f=c?o._firstChild:o._lastChild,l!==i.FilterResult.Reject&&f!==null||(f=c?o._nextSibling:o._previousSibling)}if((o=o._parent)===null||o===u._root||s.traversal_filter(u,o)===i.FilterResult.Accept)return null}}},function(a,n,r){r(89),r(74);var i,s=this&&this.__extends||(i=function(h,p){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,y){d.__proto__=y}||function(d,y){for(var m in y)y.hasOwnProperty(m)&&(d[m]=y[m])})(h,p)},function(h,p){function d(){this.constructor=h}i(h,p),h.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(1),c=r(2),o=r(50),f=r(3),l=function(h){function p(d,y){var m=h.call(this,d)||this;return m._indentation={},m._lengthToLastNewline=0,m._writerOptions=u.applyDefaults(y,{wellFormed:!1,headless:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,width:0,allowEmptyTags:!1,indentTextOnlyNodes:!1,spaceBeforeSlash:!1}),m}return s(p,h),p.prototype.serialize=function(d){return this._refs={suppressPretty:!1,emptyNode:!1,markup:""},d.nodeType!==c.NodeType.Document||this._writerOptions.headless||this.declaration(this._builderOptions.version,this._builderOptions.encoding,this._builderOptions.standalone),this.serializeNode(d,this._writerOptions.wellFormed),this._writerOptions.prettyPrint&&this._refs.markup.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(this._refs.markup=this._refs.markup.slice(0,-this._writerOptions.newline.length)),this._refs.markup},p.prototype.declaration=function(d,y,m){this._beginLine(),this._refs.markup+='<?xml version="'+d+'"',y!==void 0&&(this._refs.markup+=' encoding="'+y+'"'),m!==void 0&&(this._refs.markup+=' standalone="'+(m?"yes":"no")+'"'),this._refs.markup+="?>",this._endLine()},p.prototype.docType=function(d,y,m){this._beginLine(),this._refs.markup+=y&&m?"<!DOCTYPE "+d+' PUBLIC "'+y+'" "'+m+'">':y?"<!DOCTYPE "+d+' PUBLIC "'+y+'">':m?"<!DOCTYPE "+d+' SYSTEM "'+m+'">':"<!DOCTYPE "+d+">",this._endLine()},p.prototype.openTagBegin=function(d){this._beginLine(),this._refs.markup+="<"+d},p.prototype.openTagEnd=function(d,y,m){if(this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._writerOptions.prettyPrint&&!y&&!m){for(var S=!0,v=!0,g=this.currentNode.firstChild,x=0,C=0;g;){if(f.Guard.isExclusiveTextNode(g))C++;else{if(!f.Guard.isCDATASectionNode(g)){S=!1,v=!1;break}x++}g.data!==""&&(v=!1),g=g.nextSibling}this._refs.suppressPretty=!this._writerOptions.indentTextOnlyNodes&&S&&(x<=1&&C===0||x===0),this._refs.emptyNode=v}(m||y||this._refs.emptyNode)&&this._writerOptions.allowEmptyTags?this._refs.markup+="></"+d+">":this._refs.markup+=m?" />":y||this._refs.emptyNode?this._writerOptions.spaceBeforeSlash?" />":"/>":">",this._endLine()},p.prototype.closeTag=function(d){this._refs.emptyNode||(this._beginLine(),this._refs.markup+="</"+d+">"),this._refs.suppressPretty=!1,this._refs.emptyNode=!1,this._endLine()},p.prototype.attribute=function(d,y){var m=d+'="'+y+'"';this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._refs.markup.length-this._lengthToLastNewline+1+m.length>this._writerOptions.width?(this._endLine(),this._beginLine(),this._refs.markup+=this._indent(1)+m):this._refs.markup+=" "+m},p.prototype.text=function(d){d!==""&&(this._beginLine(),this._refs.markup+=d,this._endLine())},p.prototype.cdata=function(d){d!==""&&(this._beginLine(),this._refs.markup+="<![CDATA["+d+"]]>",this._endLine())},p.prototype.comment=function(d){this._beginLine(),this._refs.markup+="<!--"+d+"-->",this._endLine()},p.prototype.instruction=function(d,y){this._beginLine(),this._refs.markup+="<?"+(y===""?d:d+" "+y)+"?>",this._endLine()},p.prototype._beginLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._indent(this._writerOptions.offset+this.level))},p.prototype._endLine=function(){this._writerOptions.prettyPrint&&!this._refs.suppressPretty&&(this._refs.markup+=this._writerOptions.newline,this._lengthToLastNewline=this._refs.markup.length)},p.prototype._indent=function(d){if(d<=0)return"";if(this._indentation[d]!==void 0)return this._indentation[d];var y=this._writerOptions.indent.repeat(d);return this._indentation[d]=y,y},p}(o.BaseWriter);n.XMLWriter=l},function(a,n,r){var i=r(47),s=r(35);a.exports="".repeat||function(u){var c=String(s(this)),o="",f=i(u);if(f<0||f==1/0)throw RangeError("Wrong number of repetitions");for(;f>0;(f>>>=1)&&(c+=c))1&f&&(o+=c);return o}},function(a,n,r){r(31),r(32),r(33),r(19),r(178),r(20),r(22),r(23);var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}),u=this&&this.__values||function(l){var h=typeof Symbol=="function"&&Symbol.iterator,p=h&&l[h],d=0;if(p)return p.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&d>=l.length&&(l=void 0),{value:l&&l[d++],done:!l}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(67),o=r(1),f=function(l){function h(p,d){var y=l.call(this,p)||this;return y._writerOptions=o.applyDefaults(d,{wellFormed:!1,prettyPrint:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),y}return s(h,l),h.prototype.serialize=function(p){var d=o.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),y=new c.ObjectWriter(this._builderOptions,d).serialize(p);return this._beginLine(this._writerOptions,0)+this._convertObject(y,this._writerOptions)},h.prototype._convertObject=function(p,d,y){var m,S,v=this;y===void 0&&(y=0);var g="",x=this._isLeafNode(p);if(o.isArray(p)){g+="[";var C=p.length,T=0;try{for(var w=u(p),_=w.next();!_.done;_=w.next()){var E=_.value;g+=this._endLine(d,y+1)+this._beginLine(d,y+1)+this._convertObject(E,d,y+1),T<C-1&&(g+=","),T++}}catch(N){m={error:N}}finally{try{_&&!_.done&&(S=w.return)&&S.call(w)}finally{if(m)throw m.error}}g+=this._endLine(d,y)+this._beginLine(d,y),g+="]"}else if(o.isObject(p)){g+="{";var D=o.objectLength(p),b=0;o.forEachObject(p,function(N,R){x&&d.prettyPrint?g+=" ":g+=v._endLine(d,y+1)+v._beginLine(d,y+1),g+=v._key(N),d.prettyPrint&&(g+=" "),g+=v._convertObject(R,d,y+1),b<D-1&&(g+=","),b++},this),x&&d.prettyPrint?g+=" ":g+=this._endLine(d,y)+this._beginLine(d,y),g+="}"}else g+=this._val(p);return g},h.prototype._beginLine=function(p,d){if(!p.prettyPrint)return"";var y=p.offset+d+1;return y>0?new Array(y).join(p.indent):""},h.prototype._endLine=function(p,d){return p.prettyPrint?p.newline:""},h.prototype._key=function(p){return'"'+p+'":'},h.prototype._val=function(p){return JSON.stringify(p)},h.prototype._isLeafNode=function(p){return this._descendantCount(p)<=1},h.prototype._descendantCount=function(p,d){var y=this;return d===void 0&&(d=0),o.isArray(p)?o.forEachArray(p,function(m){return d+=y._descendantCount(m,d)},this):o.isObject(p)?o.forEachObject(p,function(m,S){return d+=y._descendantCount(S,d)},this):d++,d},h}(r(50).BaseWriter);n.JSONWriter=f},function(a,n,r){r(31),r(32),r(33),r(19),r(178),r(89),r(20),r(22),r(23);var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)}),u=this&&this.__values||function(l){var h=typeof Symbol=="function"&&Symbol.iterator,p=h&&l[h],d=0;if(p)return p.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&d>=l.length&&(l=void 0),{value:l&&l[d++],done:!l}}};throw new TypeError(h?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var c=r(67),o=r(1),f=function(l){function h(p,d){var y=l.call(this,p)||this;if(y._writerOptions=o.applyDefaults(d,{wellFormed:!1,indent:"  ",newline:`
`,offset:0,group:!1,verbose:!1}),y._writerOptions.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(y._writerOptions.offset<0)throw new Error("YAML offset should be zero or a positive number.");return y}return s(h,l),h.prototype.serialize=function(p){var d=o.applyDefaults(this._writerOptions,{format:"object",wellFormed:!1}),y=new c.ObjectWriter(this._builderOptions,d).serialize(p),m=this._beginLine(this._writerOptions,0)+"---"+this._endLine(this._writerOptions)+this._convertObject(y,this._writerOptions,0);return m.slice(-this._writerOptions.newline.length)===this._writerOptions.newline&&(m=m.slice(0,-this._writerOptions.newline.length)),m},h.prototype._convertObject=function(p,d,y,m){var S,v,g=this;m===void 0&&(m=!1);var x="";if(o.isArray(p))try{for(var C=u(p),T=C.next();!T.done;T=C.next()){var w=T.value;x+=this._beginLine(d,y,!0),o.isObject(w)?o.isEmpty(w)?x+='""'+this._endLine(d):x+=this._convertObject(w,d,y,!0):x+=this._val(w)+this._endLine(d)}}catch(_){S={error:_}}finally{try{T&&!T.done&&(v=C.return)&&v.call(C)}finally{if(S)throw S.error}}else o.forEachObject(p,function(_,E){m?(x+=g._key(_),m=!1):x+=g._beginLine(d,y)+g._key(_),o.isObject(E)?o.isEmpty(E)?x+=' ""'+g._endLine(d):x+=g._endLine(d)+g._convertObject(E,d,y+1):x+=" "+g._val(E)+g._endLine(d)},this);return x},h.prototype._beginLine=function(p,d,y){y===void 0&&(y=!1);var m=p.offset+d+1,S=new Array(m).join(p.indent);return y?S.substr(0,S.length-2)+"-"+S.substr(-1,1):S},h.prototype._endLine=function(p){return p.newline},h.prototype._key=function(p){return'"'+p+'":'},h.prototype._val=function(p){return JSON.stringify(p)},h}(r(50).BaseWriter);n.YAMLWriter=f},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0}),r(110).dom.setFeatures(!0);var i=r(110);n.DOMImplementation=i.DOMImplementation;var s=r(271);n.DOMParser=s.DOMParser;var u=r(274);n.XMLSerializer=u.XMLSerializer},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(3),s=r(0),u=function(){function c(){}return c.prototype.before=function(){for(var o=[],f=0;f<arguments.length;f++)o[f]=arguments[f];var l=i.Cast.asNode(this),h=l._parent;if(h!==null){for(var p=l._previousSibling,d=!0;d&&p;){d=!1;for(var y=0;y<o.length;y++){var m=o[y];if(m===p){p=p._previousSibling,d=!0;break}}}var S=s.parentNode_convertNodesIntoANode(o,l._nodeDocument);p=p===null?h._firstChild:p._nextSibling,s.mutation_preInsert(S,h,p)}},c.prototype.after=function(){for(var o=[],f=0;f<arguments.length;f++)o[f]=arguments[f];var l=i.Cast.asNode(this),h=l._parent;if(h){for(var p=l._nextSibling,d=!0;d&&p;){d=!1;for(var y=0;y<o.length;y++){var m=o[y];if(m===p){p=p._nextSibling,d=!0;break}}}var S=s.parentNode_convertNodesIntoANode(o,l._nodeDocument);s.mutation_preInsert(S,h,p)}},c.prototype.replaceWith=function(){for(var o=[],f=0;f<arguments.length;f++)o[f]=arguments[f];var l=i.Cast.asNode(this),h=l._parent;if(h){for(var p=l._nextSibling,d=!0;d&&p;){d=!1;for(var y=0;y<o.length;y++){var m=o[y];if(m===p){p=p._nextSibling,d=!0;break}}}var S=s.parentNode_convertNodesIntoANode(o,l._nodeDocument);l._parent===h?s.mutation_replace(l,S,h):s.mutation_preInsert(S,h,p)}},c.prototype.remove=function(){var o=i.Cast.asNode(this),f=o._parent;f&&s.mutation_remove(o,f)},c}();n.ChildNodeImpl=u},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){};n.DocumentOrShadowRootImpl=i},function(a,n,r){var i=this&&this.__values||function(f){var l=typeof Symbol=="function"&&Symbol.iterator,h=l&&f[l],p=0;if(h)return h.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&p>=f.length&&(f=void 0),{value:f&&f[p++],done:!f}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),u=r(3),c=r(7),o=function(){function f(l){this._nodeList=[],this._recordQueue=[],this._callback=l;var h=s.dom.window;c.set.append(h._mutationObservers,this)}return f.prototype.observe=function(l,h){var p,d;if((h=h||{childList:!1,subtree:!1}).attributeOldValue===void 0&&h.attributeFilter===void 0||h.attributes!==void 0||(h.attributes=!0),h.characterDataOldValue!==void 0&&h.characterData===void 0&&(h.characterData=!0),!h.childList&&!h.attributes&&!h.characterData)throw new TypeError;if(h.attributeOldValue&&!h.attributes)throw new TypeError;if(h.attributeFilter!==void 0&&!h.attributes)throw new TypeError;if(h.characterDataOldValue&&!h.characterData)throw new TypeError;var y=!1,m=h,S=function(C){var T,w;if(C.observer===v){y=!0;try{for(var _=(T=void 0,i(v._nodeList)),E=_.next();!E.done;E=_.next()){var D=E.value;c.list.remove(D._registeredObserverList,function(b){return u.Guard.isTransientRegisteredObserver(b)&&b.source===C})}}catch(b){T={error:b}}finally{try{E&&!E.done&&(w=_.return)&&w.call(_)}finally{if(T)throw T.error}}C.options=m}},v=this;try{for(var g=i(l._registeredObserverList),x=g.next();!x.done;x=g.next())S(x.value)}catch(C){p={error:C}}finally{try{x&&!x.done&&(d=g.return)&&d.call(g)}finally{if(p)throw p.error}}y||(l._registeredObserverList.push({observer:this,options:h}),this._nodeList.push(l))},f.prototype.disconnect=function(){var l,h,p=this;try{for(var d=i(this._nodeList),y=d.next();!y.done;y=d.next()){var m=y.value;c.list.remove(m._registeredObserverList,function(S){return S.observer===p})}}catch(S){l={error:S}}finally{try{y&&!y.done&&(h=d.return)&&h.call(d)}finally{if(l)throw l.error}}this._recordQueue=[]},f.prototype.takeRecords=function(){var l=this._recordQueue;return this._recordQueue=[],l},f}();n.MutationObserverImpl=o},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(3),s=function(){function u(){}return Object.defineProperty(u.prototype,"previousElementSibling",{get:function(){for(var c=i.Cast.asNode(this)._previousSibling;c;){if(i.Guard.isElementNode(c))return c;c=c._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"nextElementSibling",{get:function(){for(var c=i.Cast.asNode(this)._nextSibling;c;){if(i.Guard.isElementNode(c))return c;c=c._nextSibling}return null},enumerable:!0,configurable:!0}),u}();n.NonDocumentTypeChildNodeImpl=s},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(3),s=r(0),u=function(){function c(){}return c.prototype.getElementById=function(o){for(var f=s.tree_getFirstDescendantNode(i.Cast.asNode(this),!1,!1,function(l){return i.Guard.isElementNode(l)});f!==null;){if(f._uniqueIdentifier===o)return f;f=s.tree_getNextDescendantNode(i.Cast.asNode(this),f,!1,!1,function(l){return i.Guard.isElementNode(l)})}return null},c}();n.NonElementParentNodeImpl=u},function(a,n,r){var i=this&&this.__values||function(o){var f=typeof Symbol=="function"&&Symbol.iterator,l=f&&o[f],h=0;if(l)return l.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&h>=o.length&&(o=void 0),{value:o&&o[h++],done:!o}}};throw new TypeError(f?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(3),u=r(0),c=function(){function o(){}return Object.defineProperty(o.prototype,"children",{get:function(){return u.create_htmlCollection(s.Cast.asNode(this))},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"firstElementChild",{get:function(){for(var f=s.Cast.asNode(this)._firstChild;f;){if(s.Guard.isElementNode(f))return f;f=f._nextSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"lastElementChild",{get:function(){for(var f=s.Cast.asNode(this)._lastChild;f;){if(s.Guard.isElementNode(f))return f;f=f._previousSibling}return null},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"childElementCount",{get:function(){var f,l,h=0;try{for(var p=i(s.Cast.asNode(this)._children),d=p.next();!d.done;d=p.next()){var y=d.value;s.Guard.isElementNode(y)&&h++}}catch(m){f={error:m}}finally{try{d&&!d.done&&(l=p.return)&&l.call(p)}finally{if(f)throw f.error}}return h},enumerable:!0,configurable:!0}),o.prototype.prepend=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];var h=s.Cast.asNode(this),p=u.parentNode_convertNodesIntoANode(f,h._nodeDocument);u.mutation_preInsert(p,h,h._firstChild)},o.prototype.append=function(){for(var f=[],l=0;l<arguments.length;l++)f[l]=arguments[l];var h=s.Cast.asNode(this),p=u.parentNode_convertNodesIntoANode(f,h._nodeDocument);u.mutation_append(p,h)},o.prototype.querySelector=function(f){var l=s.Cast.asNode(this),h=u.selectors_scopeMatchASelectorsString(f,l);return h.length===0?null:h[0]},o.prototype.querySelectorAll=function(f){var l=s.Cast.asNode(this),h=u.selectors_scopeMatchASelectorsString(f,l);return u.create_nodeListStatic(l,h)},o}();n.ParentNodeImpl=c},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(0),s=function(){function u(){}return Object.defineProperty(u.prototype,"_name",{get:function(){return this.__name||""},set:function(c){this.__name=c},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"_assignedSlot",{get:function(){return this.__assignedSlot||null},set:function(c){this.__assignedSlot=c},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"assignedSlot",{get:function(){return i.shadowTree_findASlot(this,!0)},enumerable:!0,configurable:!0}),u}();n.SlotableImpl=s},function(a,n,r){var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(102),c=r(9),o=r(3),f=function(l){function h(p){var d=l.call(this)||this;if(o.Guard.isDocumentTypeNode(p.startContainer)||o.Guard.isAttrNode(p.startContainer)||o.Guard.isDocumentTypeNode(p.endContainer)||o.Guard.isAttrNode(p.endContainer))throw new c.InvalidNodeTypeError;return d._start=[p.startContainer,p.startOffset],d._end=[p.endContainer,p.endOffset],d}return s(h,l),h}(u.AbstractRangeImpl);n.StaticRangeImpl=f},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(272);n.DOMParser=i.DOMParserImpl},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(0),s=r(273),u=function(){function c(){}return c.prototype.parseFromString=function(o,f){if(f==="text/html")throw new Error("HTML parser not implemented.");try{return(l=new s.XMLParserImpl().parse(o))._contentType=f,l}catch(y){var l,h="http://www.mozilla.org/newlayout/xml/parsererror.xml",p=(l=i.create_xmlDocument()).createElementNS(h,"parsererror"),d=l.createElementNS(h,"error");return d.setAttribute("message",y.message),p.appendChild(d),l.appendChild(p),l}},c}();n.DOMParserImpl=u},function(a,n,r){var i=this&&this.__read||function(p,d){var y=typeof Symbol=="function"&&p[Symbol.iterator];if(!y)return p;var m,S,v=y.call(p),g=[];try{for(;(d===void 0||d-- >0)&&!(m=v.next()).done;)g.push(m.value)}catch(x){S={error:x}}finally{try{m&&!m.done&&(y=v.return)&&y.call(v)}finally{if(S)throw S.error}}return g},s=this&&this.__values||function(p){var d=typeof Symbol=="function"&&Symbol.iterator,y=d&&p[d],m=0;if(y)return y.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&m>=p.length&&(p=void 0),{value:p&&p[m++],done:!p}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var u=r(180),c=r(111),o=r(7),f=r(0),l=r(69),h=function(){function p(){}return p.prototype.parse=function(d){for(var y,m,S,v,g=new u.XMLStringLexer(d,{skipWhitespaceOnlyText:!0}),x=f.create_document(),C=x,T=g.nextToken();T.type!==c.TokenType.EOF;){switch(T.type){case c.TokenType.Declaration:var w=T;if(w.version!=="1.0")throw new Error("Invalid xml version: "+w.version);break;case c.TokenType.DocType:var _=T;if(!f.xml_isPubidChar(_.pubId))throw new Error("DocType public identifier does not match PubidChar construct.");if(!f.xml_isLegalChar(_.sysId)||_.sysId.indexOf('"')!==-1&&_.sysId.indexOf("'")!==-1)throw new Error("DocType system identifier contains invalid characters.");C.appendChild(x.implementation.createDocumentType(_.name,_.pubId,_.sysId));break;case c.TokenType.CDATA:var E=T;if(!f.xml_isLegalChar(E.data)||E.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters.");C.appendChild(x.createCDATASection(E.data));break;case c.TokenType.Comment:var D=T;if(!f.xml_isLegalChar(D.data)||D.data.indexOf("--")!==-1||D.data.endsWith("-"))throw new Error("Comment data contains invalid characters.");C.appendChild(x.createComment(D.data));break;case c.TokenType.PI:var b=T;if(b.target.indexOf(":")!==-1||/^xml$/i.test(b.target))throw new Error("Processing instruction target contains invalid characters.");if(!f.xml_isLegalChar(b.data)||b.data.indexOf("?>")!==-1)throw new Error("Processing instruction data contains invalid characters.");C.appendChild(x.createProcessingInstruction(b.target,b.data));break;case c.TokenType.Text:var N=T;if(!f.xml_isLegalChar(N.data))throw new Error("Text data contains invalid characters.");C.appendChild(x.createTextNode(this._decodeText(N.data)));break;case c.TokenType.Element:var R=T,M=i(f.namespace_extractQName(R.name),2),A=M[0],I=M[1];if(I.indexOf(":")!==-1||!f.xml_isName(I))throw new Error("Node local name contains invalid characters.");if(A==="xmlns")throw new Error("An element cannot have the 'xmlns' prefix.");var $=C.lookupNamespaceURI(A),U={};try{for(var B=(y=void 0,s(R.attributes)),F=B.next();!F.done;F=B.next()){var z=i(F.value,2),H=z[0],X=z[1];if(H==="xmlns")$=X;else{var Y=i(f.namespace_extractQName(H),2),q=Y[0],ee=Y[1];q==="xmlns"&&(ee===A&&($=X),U[ee]=X)}}}catch(P){y={error:P}}finally{try{F&&!F.done&&(m=B.return)&&m.call(B)}finally{if(y)throw y.error}}var re=$!==null?x.createElementNS($,R.name):x.createElement(R.name);C.appendChild(re);var ie=new l.LocalNameSet;try{for(var te=(S=void 0,s(R.attributes)),L=te.next();!L.done;L=te.next()){var O=i(L.value,2),G=(H=O[0],X=O[1],i(f.namespace_extractQName(H),2)),V=(q=G[0],ee=G[1],null);if(q==="xmlns"||q===null&&ee==="xmlns"?V=o.namespace.XMLNS:(V=re.lookupNamespaceURI(q))!==null&&re.isDefaultNamespace(V)?V=null:V===null&&q!==null&&(V=U[q]||null),ie.has(V,ee))throw new Error("Element contains duplicate attributes.");if(ie.set(V,ee),V===o.namespace.XMLNS&&X===o.namespace.XMLNS)throw new Error("XMLNS namespace is reserved.");if(ee.indexOf(":")!==-1||!f.xml_isName(ee))throw new Error("Attribute local name contains invalid characters.");if(q==="xmlns"&&X==="")throw new Error("Empty XML namespace is not allowed.");V!==null?re.setAttributeNS(V,H,this._decodeAttributeValue(X)):re.setAttribute(H,this._decodeAttributeValue(X))}}catch(P){S={error:P}}finally{try{L&&!L.done&&(v=te.return)&&v.call(te)}finally{if(S)throw S.error}}R.selfClosing||(C=re);break;case c.TokenType.ClosingTag:if(T.name!==C.nodeName)throw new Error("Closing tag name does not match opening tag name.");C._parent&&(C=C._parent)}T=g.nextToken()}return x},p.prototype._decodeText=function(d){return d==null?d:d.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},p.prototype._decodeAttributeValue=function(d){return d==null?d:d.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},p}();n.XMLParserImpl=h},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(275);n.XMLSerializer=i.XMLSerializerImpl},function(a,n,r){var i=this&&this.__values||function(p){var d=typeof Symbol=="function"&&Symbol.iterator,y=d&&p[d],m=0;if(y)return y.call(p);if(p&&typeof p.length=="number")return{next:function(){return p&&m>=p.length&&(p=void 0),{value:p&&p[m++],done:!p}}};throw new TypeError(d?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var s=r(2),u=r(69),c=r(95),o=r(9),f=r(7),l=r(0),h=function(){function p(){}return p.prototype.serializeToString=function(d){return this._xmlSerialization(d,!1)},p.prototype._xmlSerialization=function(d,y){if(d._nodeDocument===void 0||d._nodeDocument._hasNamespaces){var m=new c.NamespacePrefixMap;m.set("xml",f.namespace.XML);try{return this._serializeNodeNS(d,null,m,{value:1},y)}catch{throw new o.InvalidStateError}}else try{return this._serializeNode(d,y)}catch{throw new o.InvalidStateError}},p.prototype._serializeNodeNS=function(d,y,m,S,v){switch(d.nodeType){case s.NodeType.Element:return this._serializeElementNS(d,y,m,S,v);case s.NodeType.Document:return this._serializeDocumentNS(d,y,m,S,v);case s.NodeType.Comment:return this._serializeComment(d,v);case s.NodeType.Text:return this._serializeText(d,v);case s.NodeType.DocumentFragment:return this._serializeDocumentFragmentNS(d,y,m,S,v);case s.NodeType.DocumentType:return this._serializeDocumentType(d,v);case s.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(d,v);case s.NodeType.CData:return this._serializeCData(d,v);default:throw new Error("Unknown node type: "+d.nodeType)}},p.prototype._serializeNode=function(d,y){switch(d.nodeType){case s.NodeType.Element:return this._serializeElement(d,y);case s.NodeType.Document:return this._serializeDocument(d,y);case s.NodeType.Comment:return this._serializeComment(d,y);case s.NodeType.Text:return this._serializeText(d,y);case s.NodeType.DocumentFragment:return this._serializeDocumentFragment(d,y);case s.NodeType.DocumentType:return this._serializeDocumentType(d,y);case s.NodeType.ProcessingInstruction:return this._serializeProcessingInstruction(d,y);case s.NodeType.CData:return this._serializeCData(d,y);default:throw new Error("Unknown node type: "+d.nodeType)}},p.prototype._serializeElementNS=function(d,y,m,S,v){var g,x;if(v&&(d.localName.indexOf(":")!==-1||!l.xml_isName(d.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var C="<",T="",w=!1,_=!1,E=m.copy(),D={},b=this._recordNamespaceInformation(d,E,D),N=y,R=d.namespaceURI;if(N===R)b!==null&&(_=!0),C+=T=R===f.namespace.XML?"xml:"+d.localName:d.localName;else{var M=d.prefix,A=null;if(M===null&&R===b||(A=E.get(M,R)),M==="xmlns"){if(v)throw new Error("An element cannot have the 'xmlns' prefix (well-formed required).");A=M}A!==null?(T=A+":"+d.localName,b!==null&&b!==f.namespace.XML&&(N=b||null),C+=T):M!==null?(M in D&&(M=this._generatePrefix(R,E,S)),E.set(M,R),C+=T+=M+":"+d.localName,C+=" xmlns:"+M+'="'+this._serializeAttributeValue(R,v)+'"',b!==null&&(N=b||null)):b===null||b!==null&&b!==R?(_=!0,N=R,C+=T+=d.localName,C+=' xmlns="'+this._serializeAttributeValue(R,v)+'"'):(N=R,C+=T+=d.localName)}C+=this._serializeAttributesNS(d,E,S,D,_,v);var I=R===f.namespace.HTML;if(I&&d.childNodes.length===0&&p._VoidElementNames.has(d.localName)?(C+=" /",w=!0):I||d.childNodes.length!==0||(C+="/",w=!0),C+=">",w)return C;if(!(I&&d.localName==="template"))try{for(var $=i(d._children||d.childNodes),U=$.next();!U.done;U=$.next()){var B=U.value;C+=this._serializeNodeNS(B,N,E,S,v)}}catch(F){g={error:F}}finally{try{U&&!U.done&&(x=$.return)&&x.call($)}finally{if(g)throw g.error}}return C+="</"+T+">"},p.prototype._serializeDocumentNS=function(d,y,m,S,v){var g,x;if(v&&d.documentElement===null)throw new Error("Missing document element (well-formed required).");var C="";try{for(var T=i(d._children||d.childNodes),w=T.next();!w.done;w=T.next()){var _=w.value;C+=this._serializeNodeNS(_,y,m,S,v)}}catch(E){g={error:E}}finally{try{w&&!w.done&&(x=T.return)&&x.call(T)}finally{if(g)throw g.error}}return C},p.prototype._serializeComment=function(d,y){if(y&&(!l.xml_isLegalChar(d.data)||d.data.indexOf("--")!==-1||d.data.endsWith("-")))throw new Error("Comment data contains invalid characters (well-formed required).");return"<!--"+d.data+"-->"},p.prototype._serializeText=function(d,y){if(y&&!l.xml_isLegalChar(d.data))throw new Error("Text data contains invalid characters (well-formed required).");for(var m="",S=0;S<d.data.length;S++){var v=d.data[S];m+=v==="&"?"&amp;":v==="<"?"&lt;":v===">"?"&gt;":v}return m},p.prototype._serializeDocumentFragmentNS=function(d,y,m,S,v){var g,x,C="";try{for(var T=i(d._children||d.childNodes),w=T.next();!w.done;w=T.next()){var _=w.value;C+=this._serializeNodeNS(_,y,m,S,v)}}catch(E){g={error:E}}finally{try{w&&!w.done&&(x=T.return)&&x.call(T)}finally{if(g)throw g.error}}return C},p.prototype._serializeDocumentType=function(d,y){if(y&&!l.xml_isPubidChar(d.publicId))throw new Error("DocType public identifier does not match PubidChar construct (well-formed required).");if(y&&(!l.xml_isLegalChar(d.systemId)||d.systemId.indexOf('"')!==-1&&d.systemId.indexOf("'")!==-1))throw new Error("DocType system identifier contains invalid characters (well-formed required).");return d.publicId&&d.systemId?"<!DOCTYPE "+d.name+' PUBLIC "'+d.publicId+'" "'+d.systemId+'">':d.publicId?"<!DOCTYPE "+d.name+' PUBLIC "'+d.publicId+'">':d.systemId?"<!DOCTYPE "+d.name+' SYSTEM "'+d.systemId+'">':"<!DOCTYPE "+d.name+">"},p.prototype._serializeProcessingInstruction=function(d,y){if(y&&(d.target.indexOf(":")!==-1||/^xml$/i.test(d.target)))throw new Error("Processing instruction target contains invalid characters (well-formed required).");if(y&&(!l.xml_isLegalChar(d.data)||d.data.indexOf("?>")!==-1))throw new Error("Processing instruction data contains invalid characters (well-formed required).");return"<?"+(d.data===""?d.target:d.target+" "+d.data)+"?>"},p.prototype._serializeCData=function(d,y){if(y&&d.data.indexOf("]]>")!==-1)throw new Error("CDATA contains invalid characters (well-formed required).");return"<![CDATA["+d.data+"]]>"},p.prototype._serializeAttributesNS=function(d,y,m,S,v,g){var x,C,T="",w=g?new u.LocalNameSet:void 0;try{for(var _=i(d.attributes),E=_.next();!E.done;E=_.next()){var D=E.value;if(v||g||D.namespaceURI!==null){if(g&&w&&w.has(D.namespaceURI,D.localName))throw new Error("Element contains duplicate attributes (well-formed required).");g&&w&&w.set(D.namespaceURI,D.localName);var b=D.namespaceURI,N=null;if(b!==null)if(N=y.get(D.prefix,b),b===f.namespace.XMLNS){if(D.value===f.namespace.XML||D.prefix===null&&v||D.prefix!==null&&(!(D.localName in S)||S[D.localName]!==D.value)&&y.has(D.localName,D.value))continue;if(g&&D.value===f.namespace.XMLNS)throw new Error("XMLNS namespace is reserved (well-formed required).");if(g&&D.value==="")throw new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required).");D.prefix==="xmlns"&&(N="xmlns")}else N===null&&(T+=" xmlns:"+(N=D.prefix===null||y.hasPrefix(D.prefix)&&!y.has(D.prefix,b)?this._generatePrefix(b,y,m):D.prefix)+'="'+this._serializeAttributeValue(b,g)+'"');if(T+=" ",N!==null&&(T+=N+":"),g&&(D.localName.indexOf(":")!==-1||!l.xml_isName(D.localName)||D.localName==="xmlns"&&b===null))throw new Error("Attribute local name contains invalid characters (well-formed required).");T+=D.localName+'="'+this._serializeAttributeValue(D.value,g)+'"'}else T+=" "+D.localName+'="'+this._serializeAttributeValue(D.value,g)+'"'}}catch(R){x={error:R}}finally{try{E&&!E.done&&(C=_.return)&&C.call(_)}finally{if(x)throw x.error}}return T},p.prototype._recordNamespaceInformation=function(d,y,m){var S,v,g=null;try{for(var x=i(d.attributes),C=x.next();!C.done;C=x.next()){var T=C.value,w=T.namespaceURI,_=T.prefix;if(w===f.namespace.XMLNS){if(_===null){g=T.value;continue}var E=T.localName,D=T.value;if(D===f.namespace.XML||(D===""&&(D=null),y.has(E,D)))continue;y.set(E,D),m[E]=D||""}}}catch(b){S={error:b}}finally{try{C&&!C.done&&(v=x.return)&&v.call(x)}finally{if(S)throw S.error}}return g},p.prototype._generatePrefix=function(d,y,m){var S="ns"+m.value;return m.value++,y.set(S,d),S},p.prototype._serializeAttributeValue=function(d,y){if(y&&d!==null&&!l.xml_isLegalChar(d))throw new Error("Invalid characters in attribute value.");if(d===null)return"";for(var m="",S=0;S<d.length;S++){var v=d[S];m+=v==='"'?"&quot;":v==="&"?"&amp;":v==="<"?"&lt;":v===">"?"&gt;":v}return m},p.prototype._serializeElement=function(d,y){var m,S;if(y&&(d.localName.indexOf(":")!==-1||!l.xml_isName(d.localName)))throw new Error("Node local name contains invalid characters (well-formed required).");var v=!1,g=d.localName,x="<"+g;if(x+=this._serializeAttributes(d,y),d._children.size===0&&(x+="/",v=!0),x+=">",v)return x;try{for(var C=i(d._children),T=C.next();!T.done;T=C.next()){var w=T.value;x+=this._serializeNode(w,y)}}catch(_){m={error:_}}finally{try{T&&!T.done&&(S=C.return)&&S.call(C)}finally{if(m)throw m.error}}return x+="</"+g+">"},p.prototype._serializeDocument=function(d,y){var m,S;if(y&&d.documentElement===null)throw new Error("Missing document element (well-formed required).");var v="";try{for(var g=i(d._children),x=g.next();!x.done;x=g.next()){var C=x.value;v+=this._serializeNode(C,y)}}catch(T){m={error:T}}finally{try{x&&!x.done&&(S=g.return)&&S.call(g)}finally{if(m)throw m.error}}return v},p.prototype._serializeDocumentFragment=function(d,y){var m,S,v="";try{for(var g=i(d._children),x=g.next();!x.done;x=g.next()){var C=x.value;v+=this._serializeNode(C,y)}}catch(T){m={error:T}}finally{try{x&&!x.done&&(S=g.return)&&S.call(g)}finally{if(m)throw m.error}}return v},p.prototype._serializeAttributes=function(d,y){var m,S,v="",g=y?{}:void 0;try{for(var x=i(d.attributes),C=x.next();!C.done;C=x.next()){var T=C.value;if(y&&g&&T.localName in g)throw new Error("Element contains duplicate attributes (well-formed required).");if(y&&g&&(g[T.localName]=!0),y&&(T.localName.indexOf(":")!==-1||!l.xml_isName(T.localName)))throw new Error("Attribute local name contains invalid characters (well-formed required).");v+=" "+T.localName+'="'+this._serializeAttributeValue(T.value,y)+'"'}}catch(w){m={error:w}}finally{try{C&&!C.done&&(S=x.return)&&S.call(x)}finally{if(m)throw m.error}}return v},p._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),p}();n.XMLSerializerImpl=h},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(277);n.XMLReader=i.XMLReader;var s=r(112);n.ObjectReader=s.ObjectReader;var u=r(280);n.JSONReader=u.JSONReader;var c=r(281);n.YAMLReader=c.YAMLReader},function(a,n,r){r(31),r(32),r(33),r(19),r(65),r(20),r(22),r(23);var i,s=this&&this.__extends||(i=function(d,y){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var v in S)S.hasOwnProperty(v)&&(m[v]=S[v])})(d,y)},function(d,y){function m(){this.constructor=d}i(d,y),d.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}),u=this&&this.__read||function(d,y){var m=typeof Symbol=="function"&&d[Symbol.iterator];if(!m)return d;var S,v,g=m.call(d),x=[];try{for(;(y===void 0||y-- >0)&&!(S=g.next()).done;)x.push(S.value)}catch(C){v={error:C}}finally{try{S&&!S.done&&(m=g.return)&&m.call(g)}finally{if(v)throw v.error}}return x},c=this&&this.__values||function(d){var y=typeof Symbol=="function"&&Symbol.iterator,m=y&&d[y],S=0;if(m)return m.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&S>=d.length&&(d=void 0),{value:d&&d[S++],done:!d}}};throw new TypeError(y?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=r(180),f=r(111),l=r(7),h=r(0),p=function(d){function y(){return d!==null&&d.apply(this,arguments)||this}return s(y,d),y.prototype._parse=function(m,S){for(var v,g,x,C,T=new o.XMLStringLexer(S,{skipWhitespaceOnlyText:!0}),w=m,_=m,E=T.nextToken();E.type!==f.TokenType.EOF;){switch(E.type){case f.TokenType.Declaration:var D=E,b=this.sanitize(D.version);if(b!=="1.0")throw new Error("Invalid xml version: "+b);var N={version:b};D.encoding&&(N.encoding=this.sanitize(D.encoding)),D.standalone&&(N.standalone=this.sanitize(D.standalone)==="yes"),_.set(N);break;case f.TokenType.DocType:var R=E;_=this.docType(_,this.sanitize(R.name),this.sanitize(R.pubId),this.sanitize(R.sysId))||_;break;case f.TokenType.CDATA:var M=E;_=this.cdata(_,this.sanitize(M.data))||_;break;case f.TokenType.Comment:var A=E;_=this.comment(_,this.sanitize(A.data))||_;break;case f.TokenType.PI:var I=E;_=this.instruction(_,this.sanitize(I.target),this.sanitize(I.data))||_;break;case f.TokenType.Text:var $=E;_=this.text(_,this._decodeText(this.sanitize($.data)))||_;break;case f.TokenType.Element:var U=E,B=this.sanitize(U.name),F=u(h.namespace_extractQName(B),1)[0],z=_.node.lookupNamespaceURI(F),H={};try{for(var X=(v=void 0,c(U.attributes)),Y=X.next();!Y.done;Y=X.next()){var q=u(Y.value,2),ee=q[0],re=q[1];if(ee=this.sanitize(ee),re=this.sanitize(re),ee==="xmlns")z=re;else{var ie=u(h.namespace_extractQName(ee),2),te=ie[0],L=ie[1];te==="xmlns"&&(L===F&&(z=re),H[L]=re)}}}catch(Z){v={error:Z}}finally{try{Y&&!Y.done&&(g=X.return)&&g.call(X)}finally{if(v)throw v.error}}var O=z!==null?this.element(_,z,B):this.element(_,void 0,B);if(O===void 0)break;_.node===m.node&&(w=O);try{for(var G=(x=void 0,c(U.attributes)),V=G.next();!V.done;V=G.next()){var P=u(V.value,2);ee=P[0],re=P[1],ee=this.sanitize(ee),re=this.sanitize(re);var j=u(h.namespace_extractQName(ee),2),W=(te=j[0],L=j[1],null);te==="xmlns"||te===null&&L==="xmlns"?W=l.namespace.XMLNS:(W=O.node.lookupNamespaceURI(te))!==null&&O.node.isDefaultNamespace(W)?W=null:W===null&&te!==null&&(W=H[te]||null),W!==null?this.attribute(O,W,ee,this._decodeAttributeValue(re)):this.attribute(O,void 0,ee,this._decodeAttributeValue(re))}}catch(Z){x={error:Z}}finally{try{V&&!V.done&&(C=G.return)&&C.call(G)}finally{if(x)throw x.error}}U.selfClosing||(_=O);break;case f.TokenType.ClosingTag:_.node.parentNode&&(_=_.up())}E=T.nextToken()}return w},y}(r(75).BaseReader);n.XMLReader=p},function(a,n,r){var i=r(4),s=r(279);i({target:"Object",stat:!0,forced:Object.assign!==s},{assign:s})},function(a,n,r){var i=r(16),s=r(8),u=r(61),c=r(85),o=r(79),f=r(27),l=r(41),h=Object.assign,p=Object.defineProperty;a.exports=!h||s(function(){if(i&&h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var d={},y={},m=Symbol();return d[m]=7,"abcdefghijklmnopqrst".split("").forEach(function(S){y[S]=S}),h({},d)[m]!=7||u(h({},y)).join("")!="abcdefghijklmnopqrst"})?function(d,y){for(var m=f(d),S=arguments.length,v=1,g=c.f,x=o.f;S>v;)for(var C,T=l(arguments[v++]),w=g?u(T).concat(g(T)):u(T),_=w.length,E=0;_>E;)C=w[E++],i&&!x.call(T,C)||(m[C]=T[C]);return m}:h},function(a,n,r){var i,s=this&&this.__extends||(i=function(o,f){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var p in h)h.hasOwnProperty(p)&&(l[p]=h[p])})(o,f)},function(o,f){function l(){this.constructor=o}i(o,f),o.prototype=f===null?Object.create(f):(l.prototype=f.prototype,new l)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(112),c=function(o){function f(){return o!==null&&o.apply(this,arguments)||this}return s(f,o),f.prototype._parse=function(l,h){return new u.ObjectReader(this._builderOptions).parse(l,JSON.parse(h))},f}(r(75).BaseReader);n.JSONReader=c},function(a,n,r){var i,s=this&&this.__extends||(i=function(l,h){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,d){p.__proto__=d}||function(p,d){for(var y in d)d.hasOwnProperty(y)&&(p[y]=d[y])})(l,h)},function(l,h){function p(){this.constructor=l}i(l,h),l.prototype=h===null?Object.create(h):(p.prototype=h.prototype,new p)});Object.defineProperty(n,"__esModule",{value:!0});var u=r(112),c=r(75),o=r(282),f=function(l){function h(){return l!==null&&l.apply(this,arguments)||this}return s(h,l),h.prototype._parse=function(p,d){var y=o.safeLoad(d);if(y===void 0)throw new Error("Unable to parse YAML document.");return new u.ObjectReader(this._builderOptions).parse(p,y)},h}(c.BaseReader);n.YAMLReader=f},function(a,n,r){var i=r(283);a.exports=i},function(a,n,r){var i=r(284),s=r(303);function u(c){return function(){throw new Error("Function "+c+" is deprecated and cannot be used.")}}a.exports.Type=r(10),a.exports.Schema=r(39),a.exports.FAILSAFE_SCHEMA=r(113),a.exports.JSON_SCHEMA=r(182),a.exports.CORE_SCHEMA=r(181),a.exports.DEFAULT_SAFE_SCHEMA=r(54),a.exports.DEFAULT_FULL_SCHEMA=r(76),a.exports.load=i.load,a.exports.loadAll=i.loadAll,a.exports.safeLoad=i.safeLoad,a.exports.safeLoadAll=i.safeLoadAll,a.exports.dump=s.dump,a.exports.safeDump=s.safeDump,a.exports.YAMLException=r(53),a.exports.MINIMAL_SCHEMA=r(113),a.exports.SAFE_SCHEMA=r(54),a.exports.DEFAULT_SCHEMA=r(76),a.exports.scan=u("scan"),a.exports.parse=u("parse"),a.exports.compose=u("compose"),a.exports.addConstructor=u("addConstructor")},function(a,n,r){var i=r(38),s=r(53),u=r(285),c=r(54),o=r(76),f=Object.prototype.hasOwnProperty,l=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,h=/[\x85\u2028\u2029]/,p=/[,\[\]\{\}]/,d=/^(?:!|!!|![a-z\-]+!)$/i,y=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function m(O){return Object.prototype.toString.call(O)}function S(O){return O===10||O===13}function v(O){return O===9||O===32}function g(O){return O===9||O===32||O===10||O===13}function x(O){return O===44||O===91||O===93||O===123||O===125}function C(O){var G;return 48<=O&&O<=57?O-48:97<=(G=32|O)&&G<=102?G-97+10:-1}function T(O){return O===48?"\0":O===97?"\x07":O===98?"\b":O===116||O===9?"	":O===110?`
`:O===118?"\v":O===102?"\f":O===114?"\r":O===101?"\x1B":O===32?" ":O===34?'"':O===47?"/":O===92?"\\":O===78?"":O===95?" ":O===76?"\u2028":O===80?"\u2029":""}function w(O){return O<=65535?String.fromCharCode(O):String.fromCharCode(55296+(O-65536>>10),56320+(O-65536&1023))}for(var _=new Array(256),E=new Array(256),D=0;D<256;D++)_[D]=T(D)?1:0,E[D]=T(D);function b(O,G){this.input=O,this.filename=G.filename||null,this.schema=G.schema||o,this.onWarning=G.onWarning||null,this.legacy=G.legacy||!1,this.json=G.json||!1,this.listener=G.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=O.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function N(O,G){return new s(G,new u(O.filename,O.input,O.position,O.line,O.position-O.lineStart))}function R(O,G){throw N(O,G)}function M(O,G){O.onWarning&&O.onWarning.call(null,N(O,G))}var A={YAML:function(O,G,V){var P,j,W;O.version!==null&&R(O,"duplication of %YAML directive"),V.length!==1&&R(O,"YAML directive accepts exactly one argument"),(P=/^([0-9]+)\.([0-9]+)$/.exec(V[0]))===null&&R(O,"ill-formed argument of the YAML directive"),j=parseInt(P[1],10),W=parseInt(P[2],10),j!==1&&R(O,"unacceptable YAML version of the document"),O.version=V[0],O.checkLineBreaks=W<2,W!==1&&W!==2&&M(O,"unsupported YAML version of the document")},TAG:function(O,G,V){var P,j;V.length!==2&&R(O,"TAG directive accepts exactly two arguments"),P=V[0],j=V[1],d.test(P)||R(O,"ill-formed tag handle (first argument) of the TAG directive"),f.call(O.tagMap,P)&&R(O,'there is a previously declared suffix for "'+P+'" tag handle'),y.test(j)||R(O,"ill-formed tag prefix (second argument) of the TAG directive"),O.tagMap[P]=j}};function I(O,G,V,P){var j,W,Z,ne;if(G<V){if(ne=O.input.slice(G,V),P)for(j=0,W=ne.length;j<W;j+=1)(Z=ne.charCodeAt(j))===9||32<=Z&&Z<=1114111||R(O,"expected valid JSON character");else l.test(ne)&&R(O,"the stream contains non-printable characters");O.result+=ne}}function $(O,G,V,P){var j,W,Z,ne;for(i.isObject(V)||R(O,"cannot merge mappings; the provided source object is unacceptable"),Z=0,ne=(j=Object.keys(V)).length;Z<ne;Z+=1)W=j[Z],f.call(G,W)||(G[W]=V[W],P[W]=!0)}function U(O,G,V,P,j,W,Z,ne){var oe,ce;if(Array.isArray(j))for(oe=0,ce=(j=Array.prototype.slice.call(j)).length;oe<ce;oe+=1)Array.isArray(j[oe])&&R(O,"nested arrays are not supported inside keys"),typeof j=="object"&&m(j[oe])==="[object Object]"&&(j[oe]="[object Object]");if(typeof j=="object"&&m(j)==="[object Object]"&&(j="[object Object]"),j=String(j),G===null&&(G={}),P==="tag:yaml.org,2002:merge")if(Array.isArray(W))for(oe=0,ce=W.length;oe<ce;oe+=1)$(O,G,W[oe],V);else $(O,G,W,V);else O.json||f.call(V,j)||!f.call(G,j)||(O.line=Z||O.line,O.position=ne||O.position,R(O,"duplicated mapping key")),G[j]=W,delete V[j];return G}function B(O){var G;(G=O.input.charCodeAt(O.position))===10?O.position++:G===13?(O.position++,O.input.charCodeAt(O.position)===10&&O.position++):R(O,"a line break is expected"),O.line+=1,O.lineStart=O.position}function F(O,G,V){for(var P=0,j=O.input.charCodeAt(O.position);j!==0;){for(;v(j);)j=O.input.charCodeAt(++O.position);if(G&&j===35)do j=O.input.charCodeAt(++O.position);while(j!==10&&j!==13&&j!==0);if(!S(j))break;for(B(O),j=O.input.charCodeAt(O.position),P++,O.lineIndent=0;j===32;)O.lineIndent++,j=O.input.charCodeAt(++O.position)}return V!==-1&&P!==0&&O.lineIndent<V&&M(O,"deficient indentation"),P}function z(O){var G,V=O.position;return!((G=O.input.charCodeAt(V))!==45&&G!==46||G!==O.input.charCodeAt(V+1)||G!==O.input.charCodeAt(V+2)||(V+=3,(G=O.input.charCodeAt(V))!==0&&!g(G)))}function H(O,G){G===1?O.result+=" ":G>1&&(O.result+=i.repeat(`
`,G-1))}function X(O,G){var V,P,j=O.tag,W=O.anchor,Z=[],ne=!1;for(O.anchor!==null&&(O.anchorMap[O.anchor]=Z),P=O.input.charCodeAt(O.position);P!==0&&P===45&&g(O.input.charCodeAt(O.position+1));)if(ne=!0,O.position++,F(O,!0,-1)&&O.lineIndent<=G)Z.push(null),P=O.input.charCodeAt(O.position);else if(V=O.line,ee(O,G,3,!1,!0),Z.push(O.result),F(O,!0,-1),P=O.input.charCodeAt(O.position),(O.line===V||O.lineIndent>G)&&P!==0)R(O,"bad indentation of a sequence entry");else if(O.lineIndent<G)break;return!!ne&&(O.tag=j,O.anchor=W,O.kind="sequence",O.result=Z,!0)}function Y(O){var G,V,P,j,W=!1,Z=!1;if((j=O.input.charCodeAt(O.position))!==33)return!1;if(O.tag!==null&&R(O,"duplication of a tag property"),(j=O.input.charCodeAt(++O.position))===60?(W=!0,j=O.input.charCodeAt(++O.position)):j===33?(Z=!0,V="!!",j=O.input.charCodeAt(++O.position)):V="!",G=O.position,W){do j=O.input.charCodeAt(++O.position);while(j!==0&&j!==62);O.position<O.length?(P=O.input.slice(G,O.position),j=O.input.charCodeAt(++O.position)):R(O,"unexpected end of the stream within a verbatim tag")}else{for(;j!==0&&!g(j);)j===33&&(Z?R(O,"tag suffix cannot contain exclamation marks"):(V=O.input.slice(G-1,O.position+1),d.test(V)||R(O,"named tag handle cannot contain such characters"),Z=!0,G=O.position+1)),j=O.input.charCodeAt(++O.position);P=O.input.slice(G,O.position),p.test(P)&&R(O,"tag suffix cannot contain flow indicator characters")}return P&&!y.test(P)&&R(O,"tag name cannot contain such characters: "+P),W?O.tag=P:f.call(O.tagMap,V)?O.tag=O.tagMap[V]+P:V==="!"?O.tag="!"+P:V==="!!"?O.tag="tag:yaml.org,2002:"+P:R(O,'undeclared tag handle "'+V+'"'),!0}function q(O){var G,V;if((V=O.input.charCodeAt(O.position))!==38)return!1;for(O.anchor!==null&&R(O,"duplication of an anchor property"),V=O.input.charCodeAt(++O.position),G=O.position;V!==0&&!g(V)&&!x(V);)V=O.input.charCodeAt(++O.position);return O.position===G&&R(O,"name of an anchor node must contain at least one character"),O.anchor=O.input.slice(G,O.position),!0}function ee(O,G,V,P,j){var W,Z,ne,oe,ce,Ce,me,$e,Re=1,ge=!1,Je=!1;if(O.listener!==null&&O.listener("open",O),O.tag=null,O.anchor=null,O.kind=null,O.result=null,W=Z=ne=V===4||V===3,P&&F(O,!0,-1)&&(ge=!0,O.lineIndent>G?Re=1:O.lineIndent===G?Re=0:O.lineIndent<G&&(Re=-1)),Re===1)for(;Y(O)||q(O);)F(O,!0,-1)?(ge=!0,ne=W,O.lineIndent>G?Re=1:O.lineIndent===G?Re=0:O.lineIndent<G&&(Re=-1)):ne=!1;if(ne&&(ne=ge||j),Re!==1&&V!==4||(me=V===1||V===2?G:G+1,$e=O.position-O.lineStart,Re===1?ne&&(X(O,$e)||function(K,_e,Ee){var de,Q,ue,he,fe,ve=K.tag,ke=K.anchor,xe={},Fe={},Be=null,yt=null,Ot=null,tt=!1,It=!1;for(K.anchor!==null&&(K.anchorMap[K.anchor]=xe),fe=K.input.charCodeAt(K.position);fe!==0;){if(de=K.input.charCodeAt(K.position+1),ue=K.line,he=K.position,fe!==63&&fe!==58||!g(de)){if(!ee(K,Ee,2,!1,!0))break;if(K.line===ue){for(fe=K.input.charCodeAt(K.position);v(fe);)fe=K.input.charCodeAt(++K.position);if(fe===58)g(fe=K.input.charCodeAt(++K.position))||R(K,"a whitespace character is expected after the key-value separator within a block mapping"),tt&&(U(K,xe,Fe,Be,yt,null),Be=yt=Ot=null),It=!0,tt=!1,Q=!1,Be=K.tag,yt=K.result;else{if(!It)return K.tag=ve,K.anchor=ke,!0;R(K,"can not read an implicit mapping pair; a colon is missed")}}else{if(!It)return K.tag=ve,K.anchor=ke,!0;R(K,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else fe===63?(tt&&(U(K,xe,Fe,Be,yt,null),Be=yt=Ot=null),It=!0,tt=!0,Q=!0):tt?(tt=!1,Q=!0):R(K,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),K.position+=1,fe=de;if((K.line===ue||K.lineIndent>_e)&&(ee(K,_e,4,!0,Q)&&(tt?yt=K.result:Ot=K.result),tt||(U(K,xe,Fe,Be,yt,Ot,ue,he),Be=yt=Ot=null),F(K,!0,-1),fe=K.input.charCodeAt(K.position)),K.lineIndent>_e&&fe!==0)R(K,"bad indentation of a mapping entry");else if(K.lineIndent<_e)break}return tt&&U(K,xe,Fe,Be,yt,null),It&&(K.tag=ve,K.anchor=ke,K.kind="mapping",K.result=xe),It}(O,$e,me))||function(K,_e){var Ee,de,Q,ue,he,fe,ve,ke,xe,Fe,Be=!0,yt=K.tag,Ot=K.anchor,tt={};if((Fe=K.input.charCodeAt(K.position))===91)Q=93,fe=!1,de=[];else{if(Fe!==123)return!1;Q=125,fe=!0,de={}}for(K.anchor!==null&&(K.anchorMap[K.anchor]=de),Fe=K.input.charCodeAt(++K.position);Fe!==0;){if(F(K,!0,_e),(Fe=K.input.charCodeAt(K.position))===Q)return K.position++,K.tag=yt,K.anchor=Ot,K.kind=fe?"mapping":"sequence",K.result=de,!0;Be||R(K,"missed comma between flow collection entries"),xe=null,ue=he=!1,Fe===63&&g(K.input.charCodeAt(K.position+1))&&(ue=he=!0,K.position++,F(K,!0,_e)),Ee=K.line,ee(K,_e,1,!1,!0),ke=K.tag,ve=K.result,F(K,!0,_e),Fe=K.input.charCodeAt(K.position),!he&&K.line!==Ee||Fe!==58||(ue=!0,Fe=K.input.charCodeAt(++K.position),F(K,!0,_e),ee(K,_e,1,!1,!0),xe=K.result),fe?U(K,de,tt,ke,ve,xe):ue?de.push(U(K,null,tt,ke,ve,xe)):de.push(ve),F(K,!0,_e),(Fe=K.input.charCodeAt(K.position))===44?(Be=!0,Fe=K.input.charCodeAt(++K.position)):Be=!1}R(K,"unexpected end of the stream within a flow collection")}(O,me)?Je=!0:(Z&&function(K,_e){var Ee,de,Q,ue,he,fe=1,ve=!1,ke=!1,xe=_e,Fe=0,Be=!1;if((ue=K.input.charCodeAt(K.position))===124)de=!1;else{if(ue!==62)return!1;de=!0}for(K.kind="scalar",K.result="";ue!==0;)if((ue=K.input.charCodeAt(++K.position))===43||ue===45)fe===1?fe=ue===43?3:2:R(K,"repeat of a chomping mode identifier");else{if(!((Q=48<=(he=ue)&&he<=57?he-48:-1)>=0))break;Q===0?R(K,"bad explicit indentation width of a block scalar; it cannot be less than one"):ke?R(K,"repeat of an indentation width identifier"):(xe=_e+Q-1,ke=!0)}if(v(ue)){do ue=K.input.charCodeAt(++K.position);while(v(ue));if(ue===35)do ue=K.input.charCodeAt(++K.position);while(!S(ue)&&ue!==0)}for(;ue!==0;){for(B(K),K.lineIndent=0,ue=K.input.charCodeAt(K.position);(!ke||K.lineIndent<xe)&&ue===32;)K.lineIndent++,ue=K.input.charCodeAt(++K.position);if(!ke&&K.lineIndent>xe&&(xe=K.lineIndent),S(ue))Fe++;else{if(K.lineIndent<xe){fe===3?K.result+=i.repeat(`
`,ve?1+Fe:Fe):fe===1&&ve&&(K.result+=`
`);break}for(de?v(ue)?(Be=!0,K.result+=i.repeat(`
`,ve?1+Fe:Fe)):Be?(Be=!1,K.result+=i.repeat(`
`,Fe+1)):Fe===0?ve&&(K.result+=" "):K.result+=i.repeat(`
`,Fe):K.result+=i.repeat(`
`,ve?1+Fe:Fe),ve=!0,ke=!0,Fe=0,Ee=K.position;!S(ue)&&ue!==0;)ue=K.input.charCodeAt(++K.position);I(K,Ee,K.position,!1)}}return!0}(O,me)||function(K,_e){var Ee,de,Q;if((Ee=K.input.charCodeAt(K.position))!==39)return!1;for(K.kind="scalar",K.result="",K.position++,de=Q=K.position;(Ee=K.input.charCodeAt(K.position))!==0;)if(Ee===39){if(I(K,de,K.position,!0),(Ee=K.input.charCodeAt(++K.position))!==39)return!0;de=K.position,K.position++,Q=K.position}else S(Ee)?(I(K,de,Q,!0),H(K,F(K,!1,_e)),de=Q=K.position):K.position===K.lineStart&&z(K)?R(K,"unexpected end of the document within a single quoted scalar"):(K.position++,Q=K.position);R(K,"unexpected end of the stream within a single quoted scalar")}(O,me)||function(K,_e){var Ee,de,Q,ue,he,fe,ve;if((fe=K.input.charCodeAt(K.position))!==34)return!1;for(K.kind="scalar",K.result="",K.position++,Ee=de=K.position;(fe=K.input.charCodeAt(K.position))!==0;){if(fe===34)return I(K,Ee,K.position,!0),K.position++,!0;if(fe===92){if(I(K,Ee,K.position,!0),S(fe=K.input.charCodeAt(++K.position)))F(K,!1,_e);else if(fe<256&&_[fe])K.result+=E[fe],K.position++;else if((he=(ve=fe)===120?2:ve===117?4:ve===85?8:0)>0){for(Q=he,ue=0;Q>0;Q--)(he=C(fe=K.input.charCodeAt(++K.position)))>=0?ue=(ue<<4)+he:R(K,"expected hexadecimal character");K.result+=w(ue),K.position++}else R(K,"unknown escape sequence");Ee=de=K.position}else S(fe)?(I(K,Ee,de,!0),H(K,F(K,!1,_e)),Ee=de=K.position):K.position===K.lineStart&&z(K)?R(K,"unexpected end of the document within a double quoted scalar"):(K.position++,de=K.position)}R(K,"unexpected end of the stream within a double quoted scalar")}(O,me)?Je=!0:function(K){var _e,Ee,de;if((de=K.input.charCodeAt(K.position))!==42)return!1;for(de=K.input.charCodeAt(++K.position),_e=K.position;de!==0&&!g(de)&&!x(de);)de=K.input.charCodeAt(++K.position);return K.position===_e&&R(K,"name of an alias node must contain at least one character"),Ee=K.input.slice(_e,K.position),K.anchorMap.hasOwnProperty(Ee)||R(K,'unidentified alias "'+Ee+'"'),K.result=K.anchorMap[Ee],F(K,!0,-1),!0}(O)?(Je=!0,O.tag===null&&O.anchor===null||R(O,"alias node should not have any properties")):function(K,_e,Ee){var de,Q,ue,he,fe,ve,ke,xe,Fe=K.kind,Be=K.result;if(g(xe=K.input.charCodeAt(K.position))||x(xe)||xe===35||xe===38||xe===42||xe===33||xe===124||xe===62||xe===39||xe===34||xe===37||xe===64||xe===96||(xe===63||xe===45)&&(g(de=K.input.charCodeAt(K.position+1))||Ee&&x(de)))return!1;for(K.kind="scalar",K.result="",Q=ue=K.position,he=!1;xe!==0;){if(xe===58){if(g(de=K.input.charCodeAt(K.position+1))||Ee&&x(de))break}else if(xe===35){if(g(K.input.charCodeAt(K.position-1)))break}else{if(K.position===K.lineStart&&z(K)||Ee&&x(xe))break;if(S(xe)){if(fe=K.line,ve=K.lineStart,ke=K.lineIndent,F(K,!1,-1),K.lineIndent>=_e){he=!0,xe=K.input.charCodeAt(K.position);continue}K.position=ue,K.line=fe,K.lineStart=ve,K.lineIndent=ke;break}}he&&(I(K,Q,ue,!1),H(K,K.line-fe),Q=ue=K.position,he=!1),v(xe)||(ue=K.position+1),xe=K.input.charCodeAt(++K.position)}return I(K,Q,ue,!1),!!K.result||(K.kind=Fe,K.result=Be,!1)}(O,me,V===1)&&(Je=!0,O.tag===null&&(O.tag="?")),O.anchor!==null&&(O.anchorMap[O.anchor]=O.result)):Re===0&&(Je=ne&&X(O,$e))),O.tag!==null&&O.tag!=="!")if(O.tag==="?"){for(O.result!==null&&O.kind!=="scalar"&&R(O,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+O.kind+'"'),oe=0,ce=O.implicitTypes.length;oe<ce;oe+=1)if((Ce=O.implicitTypes[oe]).resolve(O.result)){O.result=Ce.construct(O.result),O.tag=Ce.tag,O.anchor!==null&&(O.anchorMap[O.anchor]=O.result);break}}else f.call(O.typeMap[O.kind||"fallback"],O.tag)?(Ce=O.typeMap[O.kind||"fallback"][O.tag],O.result!==null&&Ce.kind!==O.kind&&R(O,"unacceptable node kind for !<"+O.tag+'> tag; it should be "'+Ce.kind+'", not "'+O.kind+'"'),Ce.resolve(O.result)?(O.result=Ce.construct(O.result),O.anchor!==null&&(O.anchorMap[O.anchor]=O.result)):R(O,"cannot resolve a node with !<"+O.tag+"> explicit tag")):R(O,"unknown tag !<"+O.tag+">");return O.listener!==null&&O.listener("close",O),O.tag!==null||O.anchor!==null||Je}function re(O){var G,V,P,j,W=O.position,Z=!1;for(O.version=null,O.checkLineBreaks=O.legacy,O.tagMap={},O.anchorMap={};(j=O.input.charCodeAt(O.position))!==0&&(F(O,!0,-1),j=O.input.charCodeAt(O.position),!(O.lineIndent>0||j!==37));){for(Z=!0,j=O.input.charCodeAt(++O.position),G=O.position;j!==0&&!g(j);)j=O.input.charCodeAt(++O.position);for(P=[],(V=O.input.slice(G,O.position)).length<1&&R(O,"directive name must not be less than one character in length");j!==0;){for(;v(j);)j=O.input.charCodeAt(++O.position);if(j===35){do j=O.input.charCodeAt(++O.position);while(j!==0&&!S(j));break}if(S(j))break;for(G=O.position;j!==0&&!g(j);)j=O.input.charCodeAt(++O.position);P.push(O.input.slice(G,O.position))}j!==0&&B(O),f.call(A,V)?A[V](O,V,P):M(O,'unknown document directive "'+V+'"')}F(O,!0,-1),O.lineIndent===0&&O.input.charCodeAt(O.position)===45&&O.input.charCodeAt(O.position+1)===45&&O.input.charCodeAt(O.position+2)===45?(O.position+=3,F(O,!0,-1)):Z&&R(O,"directives end mark is expected"),ee(O,O.lineIndent-1,4,!1,!0),F(O,!0,-1),O.checkLineBreaks&&h.test(O.input.slice(W,O.position))&&M(O,"non-ASCII line breaks are interpreted as content"),O.documents.push(O.result),O.position===O.lineStart&&z(O)?O.input.charCodeAt(O.position)===46&&(O.position+=3,F(O,!0,-1)):O.position<O.length-1&&R(O,"end of the stream or a document separator is expected")}function ie(O,G){G=G||{},(O=String(O)).length!==0&&(O.charCodeAt(O.length-1)!==10&&O.charCodeAt(O.length-1)!==13&&(O+=`
`),O.charCodeAt(0)===65279&&(O=O.slice(1)));var V=new b(O,G),P=O.indexOf("\0");for(P!==-1&&(V.position=P,R(V,"null byte is not allowed in input")),V.input+="\0";V.input.charCodeAt(V.position)===32;)V.lineIndent+=1,V.position+=1;for(;V.position<V.length-1;)re(V);return V.documents}function te(O,G,V){G!==null&&typeof G=="object"&&V===void 0&&(V=G,G=null);var P=ie(O,V);if(typeof G!="function")return P;for(var j=0,W=P.length;j<W;j+=1)G(P[j])}function L(O,G){var V=ie(O,G);if(V.length!==0){if(V.length===1)return V[0];throw new s("expected a single document in the stream, but found more")}}a.exports.loadAll=te,a.exports.load=L,a.exports.safeLoadAll=function(O,G,V){return typeof G=="object"&&G!==null&&V===void 0&&(V=G,G=null),te(O,G,i.extend({schema:c},V))},a.exports.safeLoad=function(O,G){return L(O,i.extend({schema:c},G))}},function(a,n,r){var i=r(38);function s(u,c,o,f,l){this.name=u,this.buffer=c,this.position=o,this.line=f,this.column=l}s.prototype.getSnippet=function(u,c){var o,f,l,h,p;if(!this.buffer)return null;for(u=u||4,c=c||75,o="",f=this.position;f>0&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(f-1))===-1;)if(f-=1,this.position-f>c/2-1){o=" ... ",f+=5;break}for(l="",h=this.position;h<this.buffer.length&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(h))===-1;)if((h+=1)-this.position>c/2-1){l=" ... ",h-=5;break}return p=this.buffer.slice(f,h),i.repeat(" ",u)+o+p+l+`
`+i.repeat(" ",u+this.position-f+o.length)+"^"},s.prototype.toString=function(u){var c,o="";return this.name&&(o+='in "'+this.name+'" '),o+="at line "+(this.line+1)+", column "+(this.column+1),u||(c=this.getSnippet())&&(o+=`:
`+c),o},a.exports=s},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:str",{kind:"scalar",construct:function(s){return s!==null?s:""}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(s){return s!==null?s:[]}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:map",{kind:"mapping",construct:function(s){return s!==null?s:{}}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(s){if(s===null)return!0;var u=s.length;return u===1&&s==="~"||u===4&&(s==="null"||s==="Null"||s==="NULL")},construct:function(){return null},predicate:function(s){return s===null},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(s){if(s===null)return!1;var u=s.length;return u===4&&(s==="true"||s==="True"||s==="TRUE")||u===5&&(s==="false"||s==="False"||s==="FALSE")},construct:function(s){return s==="true"||s==="True"||s==="TRUE"},predicate:function(s){return Object.prototype.toString.call(s)==="[object Boolean]"},represent:{lowercase:function(s){return s?"true":"false"},uppercase:function(s){return s?"TRUE":"FALSE"},camelcase:function(s){return s?"True":"False"}},defaultStyle:"lowercase"})},function(a,n,r){var i=r(38),s=r(10);function u(o){return 48<=o&&o<=55}function c(o){return 48<=o&&o<=57}a.exports=new s("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(o){if(o===null)return!1;var f,l,h=o.length,p=0,d=!1;if(!h)return!1;if((f=o[p])!=="-"&&f!=="+"||(f=o[++p]),f==="0"){if(p+1===h)return!0;if((f=o[++p])==="b"){for(p++;p<h;p++)if((f=o[p])!=="_"){if(f!=="0"&&f!=="1")return!1;d=!0}return d&&f!=="_"}if(f==="x"){for(p++;p<h;p++)if((f=o[p])!=="_"){if(!(48<=(l=o.charCodeAt(p))&&l<=57||65<=l&&l<=70||97<=l&&l<=102))return!1;d=!0}return d&&f!=="_"}for(;p<h;p++)if((f=o[p])!=="_"){if(!u(o.charCodeAt(p)))return!1;d=!0}return d&&f!=="_"}if(f==="_")return!1;for(;p<h;p++)if((f=o[p])!=="_"){if(f===":")break;if(!c(o.charCodeAt(p)))return!1;d=!0}return!(!d||f==="_")&&(f!==":"||/^(:[0-5]?[0-9])+$/.test(o.slice(p)))},construct:function(o){var f,l,h=o,p=1,d=[];return h.indexOf("_")!==-1&&(h=h.replace(/_/g,"")),(f=h[0])!=="-"&&f!=="+"||(f==="-"&&(p=-1),f=(h=h.slice(1))[0]),h==="0"?0:f==="0"?h[1]==="b"?p*parseInt(h.slice(2),2):h[1]==="x"?p*parseInt(h,16):p*parseInt(h,8):h.indexOf(":")!==-1?(h.split(":").forEach(function(y){d.unshift(parseInt(y,10))}),h=0,l=1,d.forEach(function(y){h+=y*l,l*=60}),p*h):p*parseInt(h,10)},predicate:function(o){return Object.prototype.toString.call(o)==="[object Number]"&&o%1==0&&!i.isNegativeZero(o)},represent:{binary:function(o){return o>=0?"0b"+o.toString(2):"-0b"+o.toString(2).slice(1)},octal:function(o){return o>=0?"0"+o.toString(8):"-0"+o.toString(8).slice(1)},decimal:function(o){return o.toString(10)},hexadecimal:function(o){return o>=0?"0x"+o.toString(16).toUpperCase():"-0x"+o.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},function(a,n,r){var i=r(38),s=r(10),u=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),c=/^[-+]?[0-9]+e/;a.exports=new s("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(o){return o!==null&&!(!u.test(o)||o[o.length-1]==="_")},construct:function(o){var f,l,h,p;return l=(f=o.replace(/_/g,"").toLowerCase())[0]==="-"?-1:1,p=[],"+-".indexOf(f[0])>=0&&(f=f.slice(1)),f===".inf"?l===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:f===".nan"?NaN:f.indexOf(":")>=0?(f.split(":").forEach(function(d){p.unshift(parseFloat(d,10))}),f=0,h=1,p.forEach(function(d){f+=d*h,h*=60}),l*f):l*parseFloat(f,10)},predicate:function(o){return Object.prototype.toString.call(o)==="[object Number]"&&(o%1!=0||i.isNegativeZero(o))},represent:function(o,f){var l;if(isNaN(o))switch(f){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===o)switch(f){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===o)switch(f){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(i.isNegativeZero(o))return"-0.0";return l=o.toString(10),c.test(l)?l.replace("e",".e"):l},defaultStyle:"lowercase"})},function(a,n,r){var i=r(10),s=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),u=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");a.exports=new i("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(c){return c!==null&&(s.exec(c)!==null||u.exec(c)!==null)},construct:function(c){var o,f,l,h,p,d,y,m,S=0,v=null;if((o=s.exec(c))===null&&(o=u.exec(c)),o===null)throw new Error("Date resolve error");if(f=+o[1],l=+o[2]-1,h=+o[3],!o[4])return new Date(Date.UTC(f,l,h));if(p=+o[4],d=+o[5],y=+o[6],o[7]){for(S=o[7].slice(0,3);S.length<3;)S+="0";S=+S}return o[9]&&(v=6e4*(60*+o[10]+ +(o[11]||0)),o[9]==="-"&&(v=-v)),m=new Date(Date.UTC(f,l,h,p,d,y,S)),v&&m.setTime(m.getTime()-v),m},instanceOf:Date,represent:function(c){return c.toISOString()}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(s){return s==="<<"||s===null}})},function(a,n,r){var i;try{i=r(145).Buffer}catch{}var s=r(10),u=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;a.exports=new s("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(c){if(c===null)return!1;var o,f,l=0,h=c.length,p=u;for(f=0;f<h;f++)if(!((o=p.indexOf(c.charAt(f)))>64)){if(o<0)return!1;l+=6}return l%8==0},construct:function(c){var o,f,l=c.replace(/[\r\n=]/g,""),h=l.length,p=u,d=0,y=[];for(o=0;o<h;o++)o%4==0&&o&&(y.push(d>>16&255),y.push(d>>8&255),y.push(255&d)),d=d<<6|p.indexOf(l.charAt(o));return(f=h%4*6)===0?(y.push(d>>16&255),y.push(d>>8&255),y.push(255&d)):f===18?(y.push(d>>10&255),y.push(d>>2&255)):f===12&&y.push(d>>4&255),i?i.from?i.from(y):new i(y):y},predicate:function(c){return i&&i.isBuffer(c)},represent:function(c){var o,f,l="",h=0,p=c.length,d=u;for(o=0;o<p;o++)o%3==0&&o&&(l+=d[h>>18&63],l+=d[h>>12&63],l+=d[h>>6&63],l+=d[63&h]),h=(h<<8)+c[o];return(f=p%3)===0?(l+=d[h>>18&63],l+=d[h>>12&63],l+=d[h>>6&63],l+=d[63&h]):f===2?(l+=d[h>>10&63],l+=d[h>>4&63],l+=d[h<<2&63],l+=d[64]):f===1&&(l+=d[h>>2&63],l+=d[h<<4&63],l+=d[64],l+=d[64]),l}})},function(a,n,r){var i=r(10),s=Object.prototype.hasOwnProperty,u=Object.prototype.toString;a.exports=new i("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(c){if(c===null)return!0;var o,f,l,h,p,d=[],y=c;for(o=0,f=y.length;o<f;o+=1){if(l=y[o],p=!1,u.call(l)!=="[object Object]")return!1;for(h in l)if(s.call(l,h)){if(p)return!1;p=!0}if(!p||d.indexOf(h)!==-1)return!1;d.push(h)}return!0},construct:function(c){return c!==null?c:[]}})},function(a,n,r){var i=r(10),s=Object.prototype.toString;a.exports=new i("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(u){if(u===null)return!0;var c,o,f,l,h,p=u;for(h=new Array(p.length),c=0,o=p.length;c<o;c+=1){if(f=p[c],s.call(f)!=="[object Object]"||(l=Object.keys(f)).length!==1)return!1;h[c]=[l[0],f[l[0]]]}return!0},construct:function(u){if(u===null)return[];var c,o,f,l,h,p=u;for(h=new Array(p.length),c=0,o=p.length;c<o;c+=1)f=p[c],l=Object.keys(f),h[c]=[l[0],f[l[0]]];return h}})},function(a,n,r){var i=r(10),s=Object.prototype.hasOwnProperty;a.exports=new i("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(u){if(u===null)return!0;var c,o=u;for(c in o)if(s.call(o,c)&&o[c]!==null)return!1;return!0},construct:function(u){return u!==null?u:{}}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(s){return s===void 0},represent:function(){return""}})},function(a,n,r){var i=r(10);a.exports=new i("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(s){if(s===null||s.length===0)return!1;var u=s,c=/\/([gim]*)$/.exec(s),o="";return!(u[0]==="/"&&(c&&(o=c[1]),o.length>3||u[u.length-o.length-1]!=="/"))},construct:function(s){var u=s,c=/\/([gim]*)$/.exec(s),o="";return u[0]==="/"&&(c&&(o=c[1]),u=u.slice(1,u.length-o.length-1)),new RegExp(u,o)},predicate:function(s){return Object.prototype.toString.call(s)==="[object RegExp]"},represent:function(s){var u="/"+s.source+"/";return s.global&&(u+="g"),s.multiline&&(u+="m"),s.ignoreCase&&(u+="i"),u}})},function(a,n,r){var i;try{i=r(302)}catch{typeof window<"u"&&(i=window.esprima)}var s=r(10);a.exports=new s("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(u){if(u===null)return!1;try{var c="("+u+")",o=i.parse(c,{range:!0});return o.type==="Program"&&o.body.length===1&&o.body[0].type==="ExpressionStatement"&&(o.body[0].expression.type==="ArrowFunctionExpression"||o.body[0].expression.type==="FunctionExpression")}catch{return!1}},construct:function(u){var c,o="("+u+")",f=i.parse(o,{range:!0}),l=[];if(f.type!=="Program"||f.body.length!==1||f.body[0].type!=="ExpressionStatement"||f.body[0].expression.type!=="ArrowFunctionExpression"&&f.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return f.body[0].expression.params.forEach(function(h){l.push(h.name)}),c=f.body[0].expression.body.range,f.body[0].expression.body.type==="BlockStatement"?new Function(l,o.slice(c[0]+1,c[1]-1)):new Function(l,"return "+o.slice(c[0],c[1]))},predicate:function(u){return Object.prototype.toString.call(u)==="[object Function]"},represent:function(u){return u.toString()}})},function(a,n,r){var i;i=function(){return function(s){var u={};function c(o){if(u[o])return u[o].exports;var f=u[o]={exports:{},id:o,loaded:!1};return s[o].call(f.exports,f,f.exports,c),f.loaded=!0,f.exports}return c.m=s,c.c=u,c.p="",c(0)}([function(s,u,c){Object.defineProperty(u,"__esModule",{value:!0});var o=c(1),f=c(3),l=c(8),h=c(15);function p(y,m,S){var v=null,g=function(D,b){S&&S(D,b),v&&v.visit(D,b)},x=typeof S=="function"?g:null,C=!1;if(m){C=typeof m.comment=="boolean"&&m.comment;var T=typeof m.attachComment=="boolean"&&m.attachComment;(C||T)&&((v=new o.CommentHandler).attach=T,m.comment=!0,x=g)}var w,_=!1;m&&typeof m.sourceType=="string"&&(_=m.sourceType==="module"),w=m&&typeof m.jsx=="boolean"&&m.jsx?new f.JSXParser(y,m,x):new l.Parser(y,m,x);var E=_?w.parseModule():w.parseScript();return C&&v&&(E.comments=v.comments),w.config.tokens&&(E.tokens=w.tokens),w.config.tolerant&&(E.errors=w.errorHandler.errors),E}u.parse=p,u.parseModule=function(y,m,S){var v=m||{};return v.sourceType="module",p(y,v,S)},u.parseScript=function(y,m,S){var v=m||{};return v.sourceType="script",p(y,v,S)},u.tokenize=function(y,m,S){var v,g=new h.Tokenizer(y,m);v=[];try{for(;;){var x=g.getNextToken();if(!x)break;S&&(x=S(x)),v.push(x)}}catch(C){g.errorHandler.tolerate(C)}return g.errorHandler.tolerant&&(v.errors=g.errors()),v};var d=c(2);u.Syntax=d.Syntax,u.version="4.0.1"},function(s,u,c){Object.defineProperty(u,"__esModule",{value:!0});var o=c(2),f=function(){function l(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return l.prototype.insertInnerComments=function(h,p){if(h.type===o.Syntax.BlockStatement&&h.body.length===0){for(var d=[],y=this.leading.length-1;y>=0;--y){var m=this.leading[y];p.end.offset>=m.start&&(d.unshift(m.comment),this.leading.splice(y,1),this.trailing.splice(y,1))}d.length&&(h.innerComments=d)}},l.prototype.findTrailingComments=function(h){var p=[];if(this.trailing.length>0){for(var d=this.trailing.length-1;d>=0;--d){var y=this.trailing[d];y.start>=h.end.offset&&p.unshift(y.comment)}return this.trailing.length=0,p}var m=this.stack[this.stack.length-1];if(m&&m.node.trailingComments){var S=m.node.trailingComments[0];S&&S.range[0]>=h.end.offset&&(p=m.node.trailingComments,delete m.node.trailingComments)}return p},l.prototype.findLeadingComments=function(h){for(var p,d=[];this.stack.length>0&&(S=this.stack[this.stack.length-1])&&S.start>=h.start.offset;)p=S.node,this.stack.pop();if(p){for(var y=(p.leadingComments?p.leadingComments.length:0)-1;y>=0;--y){var m=p.leadingComments[y];m.range[1]<=h.start.offset&&(d.unshift(m),p.leadingComments.splice(y,1))}return p.leadingComments&&p.leadingComments.length===0&&delete p.leadingComments,d}for(y=this.leading.length-1;y>=0;--y){var S;(S=this.leading[y]).start<=h.start.offset&&(d.unshift(S.comment),this.leading.splice(y,1))}return d},l.prototype.visitNode=function(h,p){if(!(h.type===o.Syntax.Program&&h.body.length>0)){this.insertInnerComments(h,p);var d=this.findTrailingComments(p),y=this.findLeadingComments(p);y.length>0&&(h.leadingComments=y),d.length>0&&(h.trailingComments=d),this.stack.push({node:h,start:p.start.offset})}},l.prototype.visitComment=function(h,p){var d=h.type[0]==="L"?"Line":"Block",y={type:d,value:h.value};if(h.range&&(y.range=h.range),h.loc&&(y.loc=h.loc),this.comments.push(y),this.attach){var m={comment:{type:d,value:h.value,range:[p.start.offset,p.end.offset]},start:p.start.offset};h.loc&&(m.comment.loc=h.loc),h.type=d,this.leading.push(m),this.trailing.push(m)}},l.prototype.visit=function(h,p){h.type==="LineComment"||h.type==="BlockComment"?this.visitComment(h,p):this.attach&&this.visitNode(h,p)},l}();u.CommentHandler=f},function(s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(s,u,c){var o,f=this&&this.__extends||(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,C){x.__proto__=C}||function(x,C){for(var T in C)C.hasOwnProperty(T)&&(x[T]=C[T])},function(x,C){function T(){this.constructor=x}o(x,C),x.prototype=C===null?Object.create(C):(T.prototype=C.prototype,new T)});Object.defineProperty(u,"__esModule",{value:!0});var l=c(4),h=c(5),p=c(6),d=c(7),y=c(8),m=c(13),S=c(14);function v(x){var C;switch(x.type){case p.JSXSyntax.JSXIdentifier:C=x.name;break;case p.JSXSyntax.JSXNamespacedName:var T=x;C=v(T.namespace)+":"+v(T.name);break;case p.JSXSyntax.JSXMemberExpression:var w=x;C=v(w.object)+"."+v(w.property)}return C}m.TokenName[100]="JSXIdentifier",m.TokenName[101]="JSXText";var g=function(x){function C(T,w,_){return x.call(this,T,w,_)||this}return f(C,x),C.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():x.prototype.parsePrimaryExpression.call(this)},C.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},C.prototype.finishJSX=function(){this.nextToken()},C.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},C.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},C.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},C.prototype.scanXHTMLEntity=function(T){for(var w="&",_=!0,E=!1,D=!1,b=!1;!this.scanner.eof()&&_&&!E;){var N=this.scanner.source[this.scanner.index];if(N===T)break;if(E=N===";",w+=N,++this.scanner.index,!E)switch(w.length){case 2:D=N==="#";break;case 3:D&&(_=(b=N==="x")||l.Character.isDecimalDigit(N.charCodeAt(0)),D=D&&!b);break;default:_=(_=_&&!(D&&!l.Character.isDecimalDigit(N.charCodeAt(0))))&&!(b&&!l.Character.isHexDigit(N.charCodeAt(0)))}}if(_&&E&&w.length>2){var R=w.substr(1,w.length-2);D&&R.length>1?w=String.fromCharCode(parseInt(R.substr(1),10)):b&&R.length>2?w=String.fromCharCode(parseInt("0"+R.substr(1),16)):D||b||!S.XHTMLEntities[R]||(w=S.XHTMLEntities[R])}return w},C.prototype.lexJSX=function(){var T=this.scanner.source.charCodeAt(this.scanner.index);if(T===60||T===62||T===47||T===58||T===61||T===123||T===125)return{type:7,value:N=this.scanner.source[this.scanner.index++],lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index};if(T===34||T===39){for(var w=this.scanner.index,_=this.scanner.source[this.scanner.index++],E="";!this.scanner.eof()&&(R=this.scanner.source[this.scanner.index++])!==_;)E+=R==="&"?this.scanXHTMLEntity(_):R;return{type:8,value:E,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}if(T===46){var D=this.scanner.source.charCodeAt(this.scanner.index+1),b=this.scanner.source.charCodeAt(this.scanner.index+2),N=D===46&&b===46?"...":".";return w=this.scanner.index,this.scanner.index+=N.length,{type:7,value:N,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}if(T===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(l.Character.isIdentifierStart(T)&&T!==92){for(w=this.scanner.index,++this.scanner.index;!this.scanner.eof();){var R=this.scanner.source.charCodeAt(this.scanner.index);if(l.Character.isIdentifierPart(R)&&R!==92)++this.scanner.index;else{if(R!==45)break;++this.scanner.index}}return{type:100,value:this.scanner.source.slice(w,this.scanner.index),lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:w,end:this.scanner.index}}return this.scanner.lex()},C.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var T=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(T)),T},C.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var T=this.scanner.index,w="";!this.scanner.eof();){var _=this.scanner.source[this.scanner.index];if(_==="{"||_==="<")break;++this.scanner.index,w+=_,l.Character.isLineTerminator(_.charCodeAt(0))&&(++this.scanner.lineNumber,_==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var E={type:101,value:w,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:T,end:this.scanner.index};return w.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(E)),E},C.prototype.peekJSXToken=function(){var T=this.scanner.saveState();this.scanner.scanComments();var w=this.lexJSX();return this.scanner.restoreState(T),w},C.prototype.expectJSX=function(T){var w=this.nextJSXToken();w.type===7&&w.value===T||this.throwUnexpectedToken(w)},C.prototype.matchJSX=function(T){var w=this.peekJSXToken();return w.type===7&&w.value===T},C.prototype.parseJSXIdentifier=function(){var T=this.createJSXNode(),w=this.nextJSXToken();return w.type!==100&&this.throwUnexpectedToken(w),this.finalize(T,new h.JSXIdentifier(w.value))},C.prototype.parseJSXElementName=function(){var T=this.createJSXNode(),w=this.parseJSXIdentifier();if(this.matchJSX(":")){var _=w;this.expectJSX(":");var E=this.parseJSXIdentifier();w=this.finalize(T,new h.JSXNamespacedName(_,E))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var D=w;this.expectJSX(".");var b=this.parseJSXIdentifier();w=this.finalize(T,new h.JSXMemberExpression(D,b))}return w},C.prototype.parseJSXAttributeName=function(){var T,w=this.createJSXNode(),_=this.parseJSXIdentifier();if(this.matchJSX(":")){var E=_;this.expectJSX(":");var D=this.parseJSXIdentifier();T=this.finalize(w,new h.JSXNamespacedName(E,D))}else T=_;return T},C.prototype.parseJSXStringLiteralAttribute=function(){var T=this.createJSXNode(),w=this.nextJSXToken();w.type!==8&&this.throwUnexpectedToken(w);var _=this.getTokenRaw(w);return this.finalize(T,new d.Literal(w.value,_))},C.prototype.parseJSXExpressionAttribute=function(){var T=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(T,new h.JSXExpressionContainer(w))},C.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},C.prototype.parseJSXNameValueAttribute=function(){var T=this.createJSXNode(),w=this.parseJSXAttributeName(),_=null;return this.matchJSX("=")&&(this.expectJSX("="),_=this.parseJSXAttributeValue()),this.finalize(T,new h.JSXAttribute(w,_))},C.prototype.parseJSXSpreadAttribute=function(){var T=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var w=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(T,new h.JSXSpreadAttribute(w))},C.prototype.parseJSXAttributes=function(){for(var T=[];!this.matchJSX("/")&&!this.matchJSX(">");){var w=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();T.push(w)}return T},C.prototype.parseJSXOpeningElement=function(){var T=this.createJSXNode();this.expectJSX("<");var w=this.parseJSXElementName(),_=this.parseJSXAttributes(),E=this.matchJSX("/");return E&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(T,new h.JSXOpeningElement(w,E,_))},C.prototype.parseJSXBoundaryElement=function(){var T=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var w=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(T,new h.JSXClosingElement(w))}var _=this.parseJSXElementName(),E=this.parseJSXAttributes(),D=this.matchJSX("/");return D&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(T,new h.JSXOpeningElement(_,D,E))},C.prototype.parseJSXEmptyExpression=function(){var T=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(T,new h.JSXEmptyExpression)},C.prototype.parseJSXExpressionContainer=function(){var T,w=this.createJSXNode();return this.expectJSX("{"),this.matchJSX("}")?(T=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),T=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(w,new h.JSXExpressionContainer(T))},C.prototype.parseJSXChildren=function(){for(var T=[];!this.scanner.eof();){var w=this.createJSXChildNode(),_=this.nextJSXText();if(_.start<_.end){var E=this.getTokenRaw(_),D=this.finalize(w,new h.JSXText(_.value,E));T.push(D)}if(this.scanner.source[this.scanner.index]!=="{")break;var b=this.parseJSXExpressionContainer();T.push(b)}return T},C.prototype.parseComplexJSXElement=function(T){for(var w=[];!this.scanner.eof();){T.children=T.children.concat(this.parseJSXChildren());var _=this.createJSXChildNode(),E=this.parseJSXBoundaryElement();if(E.type===p.JSXSyntax.JSXOpeningElement){var D=E;if(D.selfClosing){var b=this.finalize(_,new h.JSXElement(D,[],null));T.children.push(b)}else w.push(T),T={node:_,opening:D,closing:null,children:[]}}if(E.type===p.JSXSyntax.JSXClosingElement){T.closing=E;var N=v(T.opening.name);if(N!==v(T.closing.name)&&this.tolerateError("Expected corresponding JSX closing tag for %0",N),!(w.length>0))break;b=this.finalize(T.node,new h.JSXElement(T.opening,T.children,T.closing)),(T=w[w.length-1]).children.push(b),w.pop()}}return T},C.prototype.parseJSXElement=function(){var T=this.createJSXNode(),w=this.parseJSXOpeningElement(),_=[],E=null;if(!w.selfClosing){var D=this.parseComplexJSXElement({node:T,opening:w,closing:E,children:_});_=D.children,E=D.closing}return this.finalize(T,new h.JSXElement(w,_,E))},C.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var T=this.parseJSXElement();return this.finishJSX(),T},C.prototype.isStartOfExpression=function(){return x.prototype.isStartOfExpression.call(this)||this.match("<")},C}(y.Parser);u.JSXParser=g},function(s,u){Object.defineProperty(u,"__esModule",{value:!0});var c={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};u.Character={fromCodePoint:function(o){return o<65536?String.fromCharCode(o):String.fromCharCode(55296+(o-65536>>10))+String.fromCharCode(56320+(o-65536&1023))},isWhiteSpace:function(o){return o===32||o===9||o===11||o===12||o===160||o>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(o)>=0},isLineTerminator:function(o){return o===10||o===13||o===8232||o===8233},isIdentifierStart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o===92||o>=128&&c.NonAsciiIdentifierStart.test(u.Character.fromCodePoint(o))},isIdentifierPart:function(o){return o===36||o===95||o>=65&&o<=90||o>=97&&o<=122||o>=48&&o<=57||o===92||o>=128&&c.NonAsciiIdentifierPart.test(u.Character.fromCodePoint(o))},isDecimalDigit:function(o){return o>=48&&o<=57},isHexDigit:function(o){return o>=48&&o<=57||o>=65&&o<=70||o>=97&&o<=102},isOctalDigit:function(o){return o>=48&&o<=55}}},function(s,u,c){Object.defineProperty(u,"__esModule",{value:!0});var o=c(6),f=function(C){this.type=o.JSXSyntax.JSXClosingElement,this.name=C};u.JSXClosingElement=f;var l=function(C,T,w){this.type=o.JSXSyntax.JSXElement,this.openingElement=C,this.children=T,this.closingElement=w};u.JSXElement=l;var h=function(){this.type=o.JSXSyntax.JSXEmptyExpression};u.JSXEmptyExpression=h;var p=function(C){this.type=o.JSXSyntax.JSXExpressionContainer,this.expression=C};u.JSXExpressionContainer=p;var d=function(C){this.type=o.JSXSyntax.JSXIdentifier,this.name=C};u.JSXIdentifier=d;var y=function(C,T){this.type=o.JSXSyntax.JSXMemberExpression,this.object=C,this.property=T};u.JSXMemberExpression=y;var m=function(C,T){this.type=o.JSXSyntax.JSXAttribute,this.name=C,this.value=T};u.JSXAttribute=m;var S=function(C,T){this.type=o.JSXSyntax.JSXNamespacedName,this.namespace=C,this.name=T};u.JSXNamespacedName=S;var v=function(C,T,w){this.type=o.JSXSyntax.JSXOpeningElement,this.name=C,this.selfClosing=T,this.attributes=w};u.JSXOpeningElement=v;var g=function(C){this.type=o.JSXSyntax.JSXSpreadAttribute,this.argument=C};u.JSXSpreadAttribute=g;var x=function(C,T){this.type=o.JSXSyntax.JSXText,this.value=C,this.raw=T};u.JSXText=x},function(s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(s,u,c){Object.defineProperty(u,"__esModule",{value:!0});var o=c(2),f=function(ae){this.type=o.Syntax.ArrayExpression,this.elements=ae};u.ArrayExpression=f;var l=function(ae){this.type=o.Syntax.ArrayPattern,this.elements=ae};u.ArrayPattern=l;var h=function(ae,le,Oe){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=ae,this.body=le,this.generator=!1,this.expression=Oe,this.async=!1};u.ArrowFunctionExpression=h;var p=function(ae,le,Oe){this.type=o.Syntax.AssignmentExpression,this.operator=ae,this.left=le,this.right=Oe};u.AssignmentExpression=p;var d=function(ae,le){this.type=o.Syntax.AssignmentPattern,this.left=ae,this.right=le};u.AssignmentPattern=d;var y=function(ae,le,Oe){this.type=o.Syntax.ArrowFunctionExpression,this.id=null,this.params=ae,this.body=le,this.generator=!1,this.expression=Oe,this.async=!0};u.AsyncArrowFunctionExpression=y;var m=function(ae,le,Oe){this.type=o.Syntax.FunctionDeclaration,this.id=ae,this.params=le,this.body=Oe,this.generator=!1,this.expression=!1,this.async=!0};u.AsyncFunctionDeclaration=m;var S=function(ae,le,Oe){this.type=o.Syntax.FunctionExpression,this.id=ae,this.params=le,this.body=Oe,this.generator=!1,this.expression=!1,this.async=!0};u.AsyncFunctionExpression=S;var v=function(ae){this.type=o.Syntax.AwaitExpression,this.argument=ae};u.AwaitExpression=v;var g=function(ae,le,Oe){var Vt=ae==="||"||ae==="&&";this.type=Vt?o.Syntax.LogicalExpression:o.Syntax.BinaryExpression,this.operator=ae,this.left=le,this.right=Oe};u.BinaryExpression=g;var x=function(ae){this.type=o.Syntax.BlockStatement,this.body=ae};u.BlockStatement=x;var C=function(ae){this.type=o.Syntax.BreakStatement,this.label=ae};u.BreakStatement=C;var T=function(ae,le){this.type=o.Syntax.CallExpression,this.callee=ae,this.arguments=le};u.CallExpression=T;var w=function(ae,le){this.type=o.Syntax.CatchClause,this.param=ae,this.body=le};u.CatchClause=w;var _=function(ae){this.type=o.Syntax.ClassBody,this.body=ae};u.ClassBody=_;var E=function(ae,le,Oe){this.type=o.Syntax.ClassDeclaration,this.id=ae,this.superClass=le,this.body=Oe};u.ClassDeclaration=E;var D=function(ae,le,Oe){this.type=o.Syntax.ClassExpression,this.id=ae,this.superClass=le,this.body=Oe};u.ClassExpression=D;var b=function(ae,le){this.type=o.Syntax.MemberExpression,this.computed=!0,this.object=ae,this.property=le};u.ComputedMemberExpression=b;var N=function(ae,le,Oe){this.type=o.Syntax.ConditionalExpression,this.test=ae,this.consequent=le,this.alternate=Oe};u.ConditionalExpression=N;var R=function(ae){this.type=o.Syntax.ContinueStatement,this.label=ae};u.ContinueStatement=R;var M=function(){this.type=o.Syntax.DebuggerStatement};u.DebuggerStatement=M;var A=function(ae,le){this.type=o.Syntax.ExpressionStatement,this.expression=ae,this.directive=le};u.Directive=A;var I=function(ae,le){this.type=o.Syntax.DoWhileStatement,this.body=ae,this.test=le};u.DoWhileStatement=I;var $=function(){this.type=o.Syntax.EmptyStatement};u.EmptyStatement=$;var U=function(ae){this.type=o.Syntax.ExportAllDeclaration,this.source=ae};u.ExportAllDeclaration=U;var B=function(ae){this.type=o.Syntax.ExportDefaultDeclaration,this.declaration=ae};u.ExportDefaultDeclaration=B;var F=function(ae,le,Oe){this.type=o.Syntax.ExportNamedDeclaration,this.declaration=ae,this.specifiers=le,this.source=Oe};u.ExportNamedDeclaration=F;var z=function(ae,le){this.type=o.Syntax.ExportSpecifier,this.exported=le,this.local=ae};u.ExportSpecifier=z;var H=function(ae){this.type=o.Syntax.ExpressionStatement,this.expression=ae};u.ExpressionStatement=H;var X=function(ae,le,Oe){this.type=o.Syntax.ForInStatement,this.left=ae,this.right=le,this.body=Oe,this.each=!1};u.ForInStatement=X;var Y=function(ae,le,Oe){this.type=o.Syntax.ForOfStatement,this.left=ae,this.right=le,this.body=Oe};u.ForOfStatement=Y;var q=function(ae,le,Oe,Vt){this.type=o.Syntax.ForStatement,this.init=ae,this.test=le,this.update=Oe,this.body=Vt};u.ForStatement=q;var ee=function(ae,le,Oe,Vt){this.type=o.Syntax.FunctionDeclaration,this.id=ae,this.params=le,this.body=Oe,this.generator=Vt,this.expression=!1,this.async=!1};u.FunctionDeclaration=ee;var re=function(ae,le,Oe,Vt){this.type=o.Syntax.FunctionExpression,this.id=ae,this.params=le,this.body=Oe,this.generator=Vt,this.expression=!1,this.async=!1};u.FunctionExpression=re;var ie=function(ae){this.type=o.Syntax.Identifier,this.name=ae};u.Identifier=ie;var te=function(ae,le,Oe){this.type=o.Syntax.IfStatement,this.test=ae,this.consequent=le,this.alternate=Oe};u.IfStatement=te;var L=function(ae,le){this.type=o.Syntax.ImportDeclaration,this.specifiers=ae,this.source=le};u.ImportDeclaration=L;var O=function(ae){this.type=o.Syntax.ImportDefaultSpecifier,this.local=ae};u.ImportDefaultSpecifier=O;var G=function(ae){this.type=o.Syntax.ImportNamespaceSpecifier,this.local=ae};u.ImportNamespaceSpecifier=G;var V=function(ae,le){this.type=o.Syntax.ImportSpecifier,this.local=ae,this.imported=le};u.ImportSpecifier=V;var P=function(ae,le){this.type=o.Syntax.LabeledStatement,this.label=ae,this.body=le};u.LabeledStatement=P;var j=function(ae,le){this.type=o.Syntax.Literal,this.value=ae,this.raw=le};u.Literal=j;var W=function(ae,le){this.type=o.Syntax.MetaProperty,this.meta=ae,this.property=le};u.MetaProperty=W;var Z=function(ae,le,Oe,Vt,yu){this.type=o.Syntax.MethodDefinition,this.key=ae,this.computed=le,this.value=Oe,this.kind=Vt,this.static=yu};u.MethodDefinition=Z;var ne=function(ae){this.type=o.Syntax.Program,this.body=ae,this.sourceType="module"};u.Module=ne;var oe=function(ae,le){this.type=o.Syntax.NewExpression,this.callee=ae,this.arguments=le};u.NewExpression=oe;var ce=function(ae){this.type=o.Syntax.ObjectExpression,this.properties=ae};u.ObjectExpression=ce;var Ce=function(ae){this.type=o.Syntax.ObjectPattern,this.properties=ae};u.ObjectPattern=Ce;var me=function(ae,le,Oe,Vt,yu,oD){this.type=o.Syntax.Property,this.key=le,this.computed=Oe,this.value=Vt,this.kind=ae,this.method=yu,this.shorthand=oD};u.Property=me;var $e=function(ae,le,Oe,Vt){this.type=o.Syntax.Literal,this.value=ae,this.raw=le,this.regex={pattern:Oe,flags:Vt}};u.RegexLiteral=$e;var Re=function(ae){this.type=o.Syntax.RestElement,this.argument=ae};u.RestElement=Re;var ge=function(ae){this.type=o.Syntax.ReturnStatement,this.argument=ae};u.ReturnStatement=ge;var Je=function(ae){this.type=o.Syntax.Program,this.body=ae,this.sourceType="script"};u.Script=Je;var K=function(ae){this.type=o.Syntax.SequenceExpression,this.expressions=ae};u.SequenceExpression=K;var _e=function(ae){this.type=o.Syntax.SpreadElement,this.argument=ae};u.SpreadElement=_e;var Ee=function(ae,le){this.type=o.Syntax.MemberExpression,this.computed=!1,this.object=ae,this.property=le};u.StaticMemberExpression=Ee;var de=function(){this.type=o.Syntax.Super};u.Super=de;var Q=function(ae,le){this.type=o.Syntax.SwitchCase,this.test=ae,this.consequent=le};u.SwitchCase=Q;var ue=function(ae,le){this.type=o.Syntax.SwitchStatement,this.discriminant=ae,this.cases=le};u.SwitchStatement=ue;var he=function(ae,le){this.type=o.Syntax.TaggedTemplateExpression,this.tag=ae,this.quasi=le};u.TaggedTemplateExpression=he;var fe=function(ae,le){this.type=o.Syntax.TemplateElement,this.value=ae,this.tail=le};u.TemplateElement=fe;var ve=function(ae,le){this.type=o.Syntax.TemplateLiteral,this.quasis=ae,this.expressions=le};u.TemplateLiteral=ve;var ke=function(){this.type=o.Syntax.ThisExpression};u.ThisExpression=ke;var xe=function(ae){this.type=o.Syntax.ThrowStatement,this.argument=ae};u.ThrowStatement=xe;var Fe=function(ae,le,Oe){this.type=o.Syntax.TryStatement,this.block=ae,this.handler=le,this.finalizer=Oe};u.TryStatement=Fe;var Be=function(ae,le){this.type=o.Syntax.UnaryExpression,this.operator=ae,this.argument=le,this.prefix=!0};u.UnaryExpression=Be;var yt=function(ae,le,Oe){this.type=o.Syntax.UpdateExpression,this.operator=ae,this.argument=le,this.prefix=Oe};u.UpdateExpression=yt;var Ot=function(ae,le){this.type=o.Syntax.VariableDeclaration,this.declarations=ae,this.kind=le};u.VariableDeclaration=Ot;var tt=function(ae,le){this.type=o.Syntax.VariableDeclarator,this.id=ae,this.init=le};u.VariableDeclarator=tt;var It=function(ae,le){this.type=o.Syntax.WhileStatement,this.test=ae,this.body=le};u.WhileStatement=It;var aD=function(ae,le){this.type=o.Syntax.WithStatement,this.object=ae,this.body=le};u.WithStatement=aD;var iD=function(ae,le){this.type=o.Syntax.YieldExpression,this.argument=ae,this.delegate=le};u.YieldExpression=iD},function(s,u,c){Object.defineProperty(u,"__esModule",{value:!0});var o=c(9),f=c(10),l=c(11),h=c(7),p=c(12),d=c(2),y=c(13),m=function(){function S(v,g,x){g===void 0&&(g={}),this.config={range:typeof g.range=="boolean"&&g.range,loc:typeof g.loc=="boolean"&&g.loc,source:null,tokens:typeof g.tokens=="boolean"&&g.tokens,comment:typeof g.comment=="boolean"&&g.comment,tolerant:typeof g.tolerant=="boolean"&&g.tolerant},this.config.loc&&g.source&&g.source!==null&&(this.config.source=String(g.source)),this.delegate=x,this.errorHandler=new f.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new p.Scanner(v,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return S.prototype.throwError=function(v){for(var g=[],x=1;x<arguments.length;x++)g[x-1]=arguments[x];var C=Array.prototype.slice.call(arguments,1),T=v.replace(/%(\d)/g,function(D,b){return o.assert(b<C.length,"Message reference must be in range"),C[b]}),w=this.lastMarker.index,_=this.lastMarker.line,E=this.lastMarker.column+1;throw this.errorHandler.createError(w,_,E,T)},S.prototype.tolerateError=function(v){for(var g=[],x=1;x<arguments.length;x++)g[x-1]=arguments[x];var C=Array.prototype.slice.call(arguments,1),T=v.replace(/%(\d)/g,function(D,b){return o.assert(b<C.length,"Message reference must be in range"),C[b]}),w=this.lastMarker.index,_=this.scanner.lineNumber,E=this.lastMarker.column+1;this.errorHandler.tolerateError(w,_,E,T)},S.prototype.unexpectedTokenError=function(v,g){var x,C=g||l.Messages.UnexpectedToken;if(v?(g||(C=v.type===2?l.Messages.UnexpectedEOS:v.type===3?l.Messages.UnexpectedIdentifier:v.type===6?l.Messages.UnexpectedNumber:v.type===8?l.Messages.UnexpectedString:v.type===10?l.Messages.UnexpectedTemplate:l.Messages.UnexpectedToken,v.type===4&&(this.scanner.isFutureReservedWord(v.value)?C=l.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(v.value)&&(C=l.Messages.StrictReservedWord))),x=v.value):x="ILLEGAL",C=C.replace("%0",x),v&&typeof v.lineNumber=="number"){var T=v.start,w=v.lineNumber,_=this.lastMarker.index-this.lastMarker.column,E=v.start-_+1;return this.errorHandler.createError(T,w,E,C)}return T=this.lastMarker.index,w=this.lastMarker.line,E=this.lastMarker.column+1,this.errorHandler.createError(T,w,E,C)},S.prototype.throwUnexpectedToken=function(v,g){throw this.unexpectedTokenError(v,g)},S.prototype.tolerateUnexpectedToken=function(v,g){this.errorHandler.tolerate(this.unexpectedTokenError(v,g))},S.prototype.collectComments=function(){if(this.config.comment){var v=this.scanner.scanComments();if(v.length>0&&this.delegate)for(var g=0;g<v.length;++g){var x=v[g],C=void 0;C={type:x.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(x.slice[0],x.slice[1])},this.config.range&&(C.range=x.range),this.config.loc&&(C.loc=x.loc);var T={start:{line:x.loc.start.line,column:x.loc.start.column,offset:x.range[0]},end:{line:x.loc.end.line,column:x.loc.end.column,offset:x.range[1]}};this.delegate(C,T)}}else this.scanner.scanComments()},S.prototype.getTokenRaw=function(v){return this.scanner.source.slice(v.start,v.end)},S.prototype.convertToken=function(v){var g={type:y.TokenName[v.type],value:this.getTokenRaw(v)};if(this.config.range&&(g.range=[v.start,v.end]),this.config.loc&&(g.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),v.type===9){var x=v.pattern,C=v.flags;g.regex={pattern:x,flags:C}}return g},S.prototype.nextToken=function(){var v=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var g=this.scanner.lex();return this.hasLineTerminator=v.lineNumber!==g.lineNumber,g&&this.context.strict&&g.type===3&&this.scanner.isStrictModeReservedWord(g.value)&&(g.type=4),this.lookahead=g,this.config.tokens&&g.type!==2&&this.tokens.push(this.convertToken(g)),v},S.prototype.nextRegexToken=function(){this.collectComments();var v=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(v))),this.lookahead=v,this.nextToken(),v},S.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},S.prototype.startNode=function(v,g){g===void 0&&(g=0);var x=v.start-v.lineStart,C=v.lineNumber;return x<0&&(x+=g,C--),{index:v.start,line:C,column:x}},S.prototype.finalize=function(v,g){if(this.config.range&&(g.range=[v.index,this.lastMarker.index]),this.config.loc&&(g.loc={start:{line:v.line,column:v.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(g.loc.source=this.config.source)),this.delegate){var x={start:{line:v.line,column:v.column,offset:v.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(g,x)}return g},S.prototype.expect=function(v){var g=this.nextToken();g.type===7&&g.value===v||this.throwUnexpectedToken(g)},S.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var v=this.lookahead;v.type===7&&v.value===","?this.nextToken():v.type===7&&v.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(v)):this.tolerateUnexpectedToken(v,l.Messages.UnexpectedToken)}else this.expect(",")},S.prototype.expectKeyword=function(v){var g=this.nextToken();g.type===4&&g.value===v||this.throwUnexpectedToken(g)},S.prototype.match=function(v){return this.lookahead.type===7&&this.lookahead.value===v},S.prototype.matchKeyword=function(v){return this.lookahead.type===4&&this.lookahead.value===v},S.prototype.matchContextualKeyword=function(v){return this.lookahead.type===3&&this.lookahead.value===v},S.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var v=this.lookahead.value;return v==="="||v==="*="||v==="**="||v==="/="||v==="%="||v==="+="||v==="-="||v==="<<="||v===">>="||v===">>>="||v==="&="||v==="^="||v==="|="},S.prototype.isolateCoverGrammar=function(v){var g=this.context.isBindingElement,x=this.context.isAssignmentTarget,C=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var T=v.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=g,this.context.isAssignmentTarget=x,this.context.firstCoverInitializedNameError=C,T},S.prototype.inheritCoverGrammar=function(v){var g=this.context.isBindingElement,x=this.context.isAssignmentTarget,C=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var T=v.call(this);return this.context.isBindingElement=this.context.isBindingElement&&g,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&x,this.context.firstCoverInitializedNameError=C||this.context.firstCoverInitializedNameError,T},S.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type===2||this.match("}")||this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},S.prototype.parsePrimaryExpression=function(){var v,g,x,C=this.createNode();switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),v=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(C,new h.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,l.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,g=this.nextToken(),x=this.getTokenRaw(g),v=this.finalize(C,new h.Literal(g.value,x));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,g=this.nextToken(),x=this.getTokenRaw(g),v=this.finalize(C,new h.Literal(g.value==="true",x));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,g=this.nextToken(),x=this.getTokenRaw(g),v=this.finalize(C,new h.Literal(null,x));break;case 10:v=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,v=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":v=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":v=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,g=this.nextRegexToken(),x=this.getTokenRaw(g),v=this.finalize(C,new h.RegexLiteral(g.regex,x,g.pattern,g.flags));break;default:v=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?v=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?v=this.finalize(C,new h.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?v=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),v=this.finalize(C,new h.ThisExpression)):v=this.matchKeyword("class")?this.parseClassExpression():this.throwUnexpectedToken(this.nextToken()));break;default:v=this.throwUnexpectedToken(this.nextToken())}return v},S.prototype.parseSpreadElement=function(){var v=this.createNode();this.expect("...");var g=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(v,new h.SpreadElement(g))},S.prototype.parseArrayInitializer=function(){var v=this.createNode(),g=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),g.push(null);else if(this.match("...")){var x=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),g.push(x)}else g.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(v,new h.ArrayExpression(g))},S.prototype.parsePropertyMethod=function(v){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var g=this.context.strict,x=this.context.allowStrictDirective;this.context.allowStrictDirective=v.simple;var C=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&v.firstRestricted&&this.tolerateUnexpectedToken(v.firstRestricted,v.message),this.context.strict&&v.stricted&&this.tolerateUnexpectedToken(v.stricted,v.message),this.context.strict=g,this.context.allowStrictDirective=x,C},S.prototype.parsePropertyMethodFunction=function(){var v=this.createNode(),g=this.context.allowYield;this.context.allowYield=!0;var x=this.parseFormalParameters(),C=this.parsePropertyMethod(x);return this.context.allowYield=g,this.finalize(v,new h.FunctionExpression(null,x.params,C,!1))},S.prototype.parsePropertyMethodAsyncFunction=function(){var v=this.createNode(),g=this.context.allowYield,x=this.context.await;this.context.allowYield=!1,this.context.await=!0;var C=this.parseFormalParameters(),T=this.parsePropertyMethod(C);return this.context.allowYield=g,this.context.await=x,this.finalize(v,new h.AsyncFunctionExpression(null,C.params,T))},S.prototype.parseObjectPropertyKey=function(){var v,g=this.createNode(),x=this.nextToken();switch(x.type){case 8:case 6:this.context.strict&&x.octal&&this.tolerateUnexpectedToken(x,l.Messages.StrictOctalLiteral);var C=this.getTokenRaw(x);v=this.finalize(g,new h.Literal(x.value,C));break;case 3:case 1:case 5:case 4:v=this.finalize(g,new h.Identifier(x.value));break;case 7:x.value==="["?(v=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):v=this.throwUnexpectedToken(x);break;default:v=this.throwUnexpectedToken(x)}return v},S.prototype.isPropertyKey=function(v,g){return v.type===d.Syntax.Identifier&&v.name===g||v.type===d.Syntax.Literal&&v.value===g},S.prototype.parseObjectProperty=function(v){var g,x=this.createNode(),C=this.lookahead,T=null,w=null,_=!1,E=!1,D=!1,b=!1;if(C.type===3){var N=C.value;this.nextToken(),_=this.match("["),T=(b=!(this.hasLineTerminator||N!=="async"||this.match(":")||this.match("(")||this.match("*")||this.match(",")))?this.parseObjectPropertyKey():this.finalize(x,new h.Identifier(N))}else this.match("*")?this.nextToken():(_=this.match("["),T=this.parseObjectPropertyKey());var R=this.qualifiedPropertyName(this.lookahead);if(C.type===3&&!b&&C.value==="get"&&R)g="get",_=this.match("["),T=this.parseObjectPropertyKey(),this.context.allowYield=!1,w=this.parseGetterMethod();else if(C.type===3&&!b&&C.value==="set"&&R)g="set",_=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseSetterMethod();else if(C.type===7&&C.value==="*"&&R)g="init",_=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseGeneratorMethod(),E=!0;else if(T||this.throwUnexpectedToken(this.lookahead),g="init",this.match(":")&&!b)!_&&this.isPropertyKey(T,"__proto__")&&(v.value&&this.tolerateError(l.Messages.DuplicateProtoProperty),v.value=!0),this.nextToken(),w=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))w=b?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),E=!0;else if(C.type===3)if(N=this.finalize(x,new h.Identifier(C.value)),this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),D=!0;var M=this.isolateCoverGrammar(this.parseAssignmentExpression);w=this.finalize(x,new h.AssignmentPattern(N,M))}else D=!0,w=N;else this.throwUnexpectedToken(this.nextToken());return this.finalize(x,new h.Property(g,T,_,w,E,D))},S.prototype.parseObjectInitializer=function(){var v=this.createNode();this.expect("{");for(var g=[],x={value:!1};!this.match("}");)g.push(this.parseObjectProperty(x)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(v,new h.ObjectExpression(g))},S.prototype.parseTemplateHead=function(){o.assert(this.lookahead.head,"Template literal must start with a template head");var v=this.createNode(),g=this.nextToken(),x=g.value,C=g.cooked;return this.finalize(v,new h.TemplateElement({raw:x,cooked:C},g.tail))},S.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var v=this.createNode(),g=this.nextToken(),x=g.value,C=g.cooked;return this.finalize(v,new h.TemplateElement({raw:x,cooked:C},g.tail))},S.prototype.parseTemplateLiteral=function(){var v=this.createNode(),g=[],x=[],C=this.parseTemplateHead();for(x.push(C);!C.tail;)g.push(this.parseExpression()),C=this.parseTemplateElement(),x.push(C);return this.finalize(v,new h.TemplateLiteral(x,g))},S.prototype.reinterpretExpressionAsPattern=function(v){switch(v.type){case d.Syntax.Identifier:case d.Syntax.MemberExpression:case d.Syntax.RestElement:case d.Syntax.AssignmentPattern:break;case d.Syntax.SpreadElement:v.type=d.Syntax.RestElement,this.reinterpretExpressionAsPattern(v.argument);break;case d.Syntax.ArrayExpression:v.type=d.Syntax.ArrayPattern;for(var g=0;g<v.elements.length;g++)v.elements[g]!==null&&this.reinterpretExpressionAsPattern(v.elements[g]);break;case d.Syntax.ObjectExpression:for(v.type=d.Syntax.ObjectPattern,g=0;g<v.properties.length;g++)this.reinterpretExpressionAsPattern(v.properties[g].value);break;case d.Syntax.AssignmentExpression:v.type=d.Syntax.AssignmentPattern,delete v.operator,this.reinterpretExpressionAsPattern(v.left)}},S.prototype.parseGroupExpression=function(){var v;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),v={type:"ArrowParameterPlaceHolder",params:[],async:!1};else{var g=this.lookahead,x=[];if(this.match("..."))v=this.parseRestElement(x),this.expect(")"),this.match("=>")||this.expect("=>"),v={type:"ArrowParameterPlaceHolder",params:[v],async:!1};else{var C=!1;if(this.context.isBindingElement=!0,v=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var T=[];for(this.context.isAssignmentTarget=!1,T.push(v);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var w=0;w<T.length;w++)this.reinterpretExpressionAsPattern(T[w]);C=!0,v={type:"ArrowParameterPlaceHolder",params:T,async:!1}}else if(this.match("...")){for(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),T.push(this.parseRestElement(x)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1,w=0;w<T.length;w++)this.reinterpretExpressionAsPattern(T[w]);C=!0,v={type:"ArrowParameterPlaceHolder",params:T,async:!1}}else T.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(C)break}C||(v=this.finalize(this.startNode(g),new h.SequenceExpression(T)))}if(!C){if(this.expect(")"),this.match("=>")&&(v.type===d.Syntax.Identifier&&v.name==="yield"&&(C=!0,v={type:"ArrowParameterPlaceHolder",params:[v],async:!1}),!C)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),v.type===d.Syntax.SequenceExpression)for(w=0;w<v.expressions.length;w++)this.reinterpretExpressionAsPattern(v.expressions[w]);else this.reinterpretExpressionAsPattern(v);v={type:"ArrowParameterPlaceHolder",params:v.type===d.Syntax.SequenceExpression?v.expressions:[v],async:!1}}this.context.isBindingElement=!1}}}return v},S.prototype.parseArguments=function(){this.expect("(");var v=[];if(!this.match(")"))for(;;){var g=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(v.push(g),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),v},S.prototype.isIdentifierName=function(v){return v.type===3||v.type===4||v.type===1||v.type===5},S.prototype.parseIdentifierName=function(){var v=this.createNode(),g=this.nextToken();return this.isIdentifierName(g)||this.throwUnexpectedToken(g),this.finalize(v,new h.Identifier(g.value))},S.prototype.parseNewExpression=function(){var v,g=this.createNode(),x=this.parseIdentifierName();if(o.assert(x.name==="new","New expression must start with `new`"),this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var C=this.parseIdentifierName();v=new h.MetaProperty(x,C)}else this.throwUnexpectedToken(this.lookahead);else{var T=this.isolateCoverGrammar(this.parseLeftHandSideExpression),w=this.match("(")?this.parseArguments():[];v=new h.NewExpression(T,w),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(g,v)},S.prototype.parseAsyncArgument=function(){var v=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,v},S.prototype.parseAsyncArguments=function(){this.expect("(");var v=[];if(!this.match(")"))for(;;){var g=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(v.push(g),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),v},S.prototype.parseLeftHandSideExpressionAllowCall=function(){var v,g=this.lookahead,x=this.matchContextualKeyword("async"),C=this.context.allowIn;for(this.context.allowIn=!0,this.matchKeyword("super")&&this.context.inFunctionBody?(v=this.createNode(),this.nextToken(),v=this.finalize(v,new h.Super),this.match("(")||this.match(".")||this.match("[")||this.throwUnexpectedToken(this.lookahead)):v=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var T=this.parseIdentifierName();v=this.finalize(this.startNode(g),new h.StaticMemberExpression(v,T))}else if(this.match("(")){var w=x&&g.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var _=w?this.parseAsyncArguments():this.parseArguments();if(v=this.finalize(this.startNode(g),new h.CallExpression(v,_)),w&&this.match("=>")){for(var E=0;E<_.length;++E)this.reinterpretExpressionAsPattern(_[E]);v={type:"ArrowParameterPlaceHolder",params:_,async:!0}}}else if(this.match("["))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("["),T=this.isolateCoverGrammar(this.parseExpression),this.expect("]"),v=this.finalize(this.startNode(g),new h.ComputedMemberExpression(v,T));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var D=this.parseTemplateLiteral();v=this.finalize(this.startNode(g),new h.TaggedTemplateExpression(v,D))}return this.context.allowIn=C,v},S.prototype.parseSuper=function(){var v=this.createNode();return this.expectKeyword("super"),this.match("[")||this.match(".")||this.throwUnexpectedToken(this.lookahead),this.finalize(v,new h.Super)},S.prototype.parseLeftHandSideExpression=function(){o.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var v=this.startNode(this.lookahead),g=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var x=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),g=this.finalize(v,new h.ComputedMemberExpression(g,x))}else if(this.match("."))this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("."),x=this.parseIdentifierName(),g=this.finalize(v,new h.StaticMemberExpression(g,x));else{if(this.lookahead.type!==10||!this.lookahead.head)break;var C=this.parseTemplateLiteral();g=this.finalize(v,new h.TaggedTemplateExpression(g,C))}return g},S.prototype.parseUpdateExpression=function(){var v,g=this.lookahead;if(this.match("++")||this.match("--")){var x=this.startNode(g),C=this.nextToken();v=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&v.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(v.name)&&this.tolerateError(l.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment);var T=!0;v=this.finalize(x,new h.UpdateExpression(C.value,v,T)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(v=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&v.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(v.name)&&this.tolerateError(l.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var w=this.nextToken().value;T=!1,v=this.finalize(this.startNode(g),new h.UpdateExpression(w,v,T))}return v},S.prototype.parseAwaitExpression=function(){var v=this.createNode();this.nextToken();var g=this.parseUnaryExpression();return this.finalize(v,new h.AwaitExpression(g))},S.prototype.parseUnaryExpression=function(){var v;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var g=this.startNode(this.lookahead),x=this.nextToken();v=this.inheritCoverGrammar(this.parseUnaryExpression),v=this.finalize(g,new h.UnaryExpression(x.value,v)),this.context.strict&&v.operator==="delete"&&v.argument.type===d.Syntax.Identifier&&this.tolerateError(l.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else v=this.context.await&&this.matchContextualKeyword("await")?this.parseAwaitExpression():this.parseUpdateExpression();return v},S.prototype.parseExponentiationExpression=function(){var v=this.lookahead,g=this.inheritCoverGrammar(this.parseUnaryExpression);if(g.type!==d.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var x=g,C=this.isolateCoverGrammar(this.parseExponentiationExpression);g=this.finalize(this.startNode(v),new h.BinaryExpression("**",x,C))}return g},S.prototype.binaryPrecedence=function(v){var g=v.value;return v.type===7?this.operatorPrecedence[g]||0:v.type===4&&(g==="instanceof"||this.context.allowIn&&g==="in")?7:0},S.prototype.parseBinaryExpression=function(){var v=this.lookahead,g=this.inheritCoverGrammar(this.parseExponentiationExpression),x=this.lookahead,C=this.binaryPrecedence(x);if(C>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var T=[v,this.lookahead],w=g,_=this.isolateCoverGrammar(this.parseExponentiationExpression),E=[w,x.value,_],D=[C];!((C=this.binaryPrecedence(this.lookahead))<=0);){for(;E.length>2&&C<=D[D.length-1];){_=E.pop();var b=E.pop();D.pop(),w=E.pop(),T.pop();var N=this.startNode(T[T.length-1]);E.push(this.finalize(N,new h.BinaryExpression(b,w,_)))}E.push(this.nextToken().value),D.push(C),T.push(this.lookahead),E.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var R=E.length-1;g=E[R];for(var M=T.pop();R>1;){var A=T.pop(),I=M&&M.lineStart;N=this.startNode(A,I),b=E[R-1],g=this.finalize(N,new h.BinaryExpression(b,E[R-2],g)),R-=2,M=A}}return g},S.prototype.parseConditionalExpression=function(){var v=this.lookahead,g=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var x=this.context.allowIn;this.context.allowIn=!0;var C=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=x,this.expect(":");var T=this.isolateCoverGrammar(this.parseAssignmentExpression);g=this.finalize(this.startNode(v),new h.ConditionalExpression(g,C,T)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return g},S.prototype.checkPatternParam=function(v,g){switch(g.type){case d.Syntax.Identifier:this.validateParam(v,g,g.name);break;case d.Syntax.RestElement:this.checkPatternParam(v,g.argument);break;case d.Syntax.AssignmentPattern:this.checkPatternParam(v,g.left);break;case d.Syntax.ArrayPattern:for(var x=0;x<g.elements.length;x++)g.elements[x]!==null&&this.checkPatternParam(v,g.elements[x]);break;case d.Syntax.ObjectPattern:for(x=0;x<g.properties.length;x++)this.checkPatternParam(v,g.properties[x].value)}v.simple=v.simple&&g instanceof h.Identifier},S.prototype.reinterpretAsCoverFormalsList=function(v){var g,x=[v],C=!1;switch(v.type){case d.Syntax.Identifier:break;case"ArrowParameterPlaceHolder":x=v.params,C=v.async;break;default:return null}g={simple:!0,paramSet:{}};for(var T=0;T<x.length;++T)(w=x[T]).type===d.Syntax.AssignmentPattern?w.right.type===d.Syntax.YieldExpression&&(w.right.argument&&this.throwUnexpectedToken(this.lookahead),w.right.type=d.Syntax.Identifier,w.right.name="yield",delete w.right.argument,delete w.right.delegate):C&&w.type===d.Syntax.Identifier&&w.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(g,w),x[T]=w;if(this.context.strict||!this.context.allowYield)for(T=0;T<x.length;++T){var w;(w=x[T]).type===d.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(g.message===l.Messages.StrictParamDupe){var _=this.context.strict?g.stricted:g.firstRestricted;this.throwUnexpectedToken(_,g.message)}return{simple:g.simple,params:x,stricted:g.stricted,firstRestricted:g.firstRestricted,message:g.message}},S.prototype.parseAssignmentExpression=function(){var v;if(!this.context.allowYield&&this.matchKeyword("yield"))v=this.parseYieldExpression();else{var g=this.lookahead,x=g;if(v=this.parseConditionalExpression(),x.type===3&&x.lineNumber===this.lookahead.lineNumber&&x.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var C=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(C),v={type:"ArrowParameterPlaceHolder",params:[C],async:!0}}if(v.type==="ArrowParameterPlaceHolder"||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var T=v.async,w=this.reinterpretAsCoverFormalsList(v);if(w){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var _=this.context.strict,E=this.context.allowStrictDirective;this.context.allowStrictDirective=w.simple;var D=this.context.allowYield,b=this.context.await;this.context.allowYield=!0,this.context.await=T;var N=this.startNode(g);this.expect("=>");var R=void 0;if(this.match("{")){var M=this.context.allowIn;this.context.allowIn=!0,R=this.parseFunctionSourceElements(),this.context.allowIn=M}else R=this.isolateCoverGrammar(this.parseAssignmentExpression);var A=R.type!==d.Syntax.BlockStatement;this.context.strict&&w.firstRestricted&&this.throwUnexpectedToken(w.firstRestricted,w.message),this.context.strict&&w.stricted&&this.tolerateUnexpectedToken(w.stricted,w.message),v=T?this.finalize(N,new h.AsyncArrowFunctionExpression(w.params,R,A)):this.finalize(N,new h.ArrowFunctionExpression(w.params,R,A)),this.context.strict=_,this.context.allowStrictDirective=E,this.context.allowYield=D,this.context.await=b}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(l.Messages.InvalidLHSInAssignment),this.context.strict&&v.type===d.Syntax.Identifier){var I=v;this.scanner.isRestrictedWord(I.name)&&this.tolerateUnexpectedToken(x,l.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(I.name)&&this.tolerateUnexpectedToken(x,l.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(v):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1);var $=(x=this.nextToken()).value,U=this.isolateCoverGrammar(this.parseAssignmentExpression);v=this.finalize(this.startNode(g),new h.AssignmentExpression($,v,U)),this.context.firstCoverInitializedNameError=null}}return v},S.prototype.parseExpression=function(){var v=this.lookahead,g=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var x=[];for(x.push(g);this.lookahead.type!==2&&this.match(",");)this.nextToken(),x.push(this.isolateCoverGrammar(this.parseAssignmentExpression));g=this.finalize(this.startNode(v),new h.SequenceExpression(x))}return g},S.prototype.parseStatementListItem=function(){var v;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,l.Messages.IllegalExportDeclaration),v=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,l.Messages.IllegalImportDeclaration),v=this.parseImportDeclaration();break;case"const":v=this.parseLexicalDeclaration({inFor:!1});break;case"function":v=this.parseFunctionDeclaration();break;case"class":v=this.parseClassDeclaration();break;case"let":v=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:v=this.parseStatement()}else v=this.parseStatement();return v},S.prototype.parseBlock=function(){var v=this.createNode();this.expect("{");for(var g=[];!this.match("}");)g.push(this.parseStatementListItem());return this.expect("}"),this.finalize(v,new h.BlockStatement(g))},S.prototype.parseLexicalBinding=function(v,g){var x=this.createNode(),C=this.parsePattern([],v);this.context.strict&&C.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(C.name)&&this.tolerateError(l.Messages.StrictVarName);var T=null;return v==="const"?this.matchKeyword("in")||this.matchContextualKeyword("of")||(this.match("=")?(this.nextToken(),T=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(l.Messages.DeclarationMissingInitializer,"const")):(!g.inFor&&C.type!==d.Syntax.Identifier||this.match("="))&&(this.expect("="),T=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(x,new h.VariableDeclarator(C,T))},S.prototype.parseBindingList=function(v,g){for(var x=[this.parseLexicalBinding(v,g)];this.match(",");)this.nextToken(),x.push(this.parseLexicalBinding(v,g));return x},S.prototype.isLexicalDeclaration=function(){var v=this.scanner.saveState();this.scanner.scanComments();var g=this.scanner.lex();return this.scanner.restoreState(v),g.type===3||g.type===7&&g.value==="["||g.type===7&&g.value==="{"||g.type===4&&g.value==="let"||g.type===4&&g.value==="yield"},S.prototype.parseLexicalDeclaration=function(v){var g=this.createNode(),x=this.nextToken().value;o.assert(x==="let"||x==="const","Lexical declaration must be either let or const");var C=this.parseBindingList(x,v);return this.consumeSemicolon(),this.finalize(g,new h.VariableDeclaration(C,x))},S.prototype.parseBindingRestElement=function(v,g){var x=this.createNode();this.expect("...");var C=this.parsePattern(v,g);return this.finalize(x,new h.RestElement(C))},S.prototype.parseArrayPattern=function(v,g){var x=this.createNode();this.expect("[");for(var C=[];!this.match("]");)if(this.match(","))this.nextToken(),C.push(null);else{if(this.match("...")){C.push(this.parseBindingRestElement(v,g));break}C.push(this.parsePatternWithDefault(v,g)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(x,new h.ArrayPattern(C))},S.prototype.parsePropertyPattern=function(v,g){var x,C,T=this.createNode(),w=!1,_=!1;if(this.lookahead.type===3){var E=this.lookahead;x=this.parseVariableIdentifier();var D=this.finalize(T,new h.Identifier(E.value));if(this.match("=")){v.push(E),_=!0,this.nextToken();var b=this.parseAssignmentExpression();C=this.finalize(this.startNode(E),new h.AssignmentPattern(D,b))}else this.match(":")?(this.expect(":"),C=this.parsePatternWithDefault(v,g)):(v.push(E),_=!0,C=D)}else w=this.match("["),x=this.parseObjectPropertyKey(),this.expect(":"),C=this.parsePatternWithDefault(v,g);return this.finalize(T,new h.Property("init",x,w,C,!1,_))},S.prototype.parseObjectPattern=function(v,g){var x=this.createNode(),C=[];for(this.expect("{");!this.match("}");)C.push(this.parsePropertyPattern(v,g)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(x,new h.ObjectPattern(C))},S.prototype.parsePattern=function(v,g){var x;return this.match("[")?x=this.parseArrayPattern(v,g):this.match("{")?x=this.parseObjectPattern(v,g):(!this.matchKeyword("let")||g!=="const"&&g!=="let"||this.tolerateUnexpectedToken(this.lookahead,l.Messages.LetInLexicalBinding),v.push(this.lookahead),x=this.parseVariableIdentifier(g)),x},S.prototype.parsePatternWithDefault=function(v,g){var x=this.lookahead,C=this.parsePattern(v,g);if(this.match("=")){this.nextToken();var T=this.context.allowYield;this.context.allowYield=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=T,C=this.finalize(this.startNode(x),new h.AssignmentPattern(C,w))}return C},S.prototype.parseVariableIdentifier=function(v){var g=this.createNode(),x=this.nextToken();return x.type===4&&x.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(x,l.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(x):x.type!==3?this.context.strict&&x.type===4&&this.scanner.isStrictModeReservedWord(x.value)?this.tolerateUnexpectedToken(x,l.Messages.StrictReservedWord):(this.context.strict||x.value!=="let"||v!=="var")&&this.throwUnexpectedToken(x):(this.context.isModule||this.context.await)&&x.type===3&&x.value==="await"&&this.tolerateUnexpectedToken(x),this.finalize(g,new h.Identifier(x.value))},S.prototype.parseVariableDeclaration=function(v){var g=this.createNode(),x=this.parsePattern([],"var");this.context.strict&&x.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(x.name)&&this.tolerateError(l.Messages.StrictVarName);var C=null;return this.match("=")?(this.nextToken(),C=this.isolateCoverGrammar(this.parseAssignmentExpression)):x.type===d.Syntax.Identifier||v.inFor||this.expect("="),this.finalize(g,new h.VariableDeclarator(x,C))},S.prototype.parseVariableDeclarationList=function(v){var g={inFor:v.inFor},x=[];for(x.push(this.parseVariableDeclaration(g));this.match(",");)this.nextToken(),x.push(this.parseVariableDeclaration(g));return x},S.prototype.parseVariableStatement=function(){var v=this.createNode();this.expectKeyword("var");var g=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(v,new h.VariableDeclaration(g,"var"))},S.prototype.parseEmptyStatement=function(){var v=this.createNode();return this.expect(";"),this.finalize(v,new h.EmptyStatement)},S.prototype.parseExpressionStatement=function(){var v=this.createNode(),g=this.parseExpression();return this.consumeSemicolon(),this.finalize(v,new h.ExpressionStatement(g))},S.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(l.Messages.StrictFunction),this.parseStatement()},S.prototype.parseIfStatement=function(){var v,g=this.createNode(),x=null;this.expectKeyword("if"),this.expect("(");var C=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),v=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),v=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),x=this.parseIfClause())),this.finalize(g,new h.IfStatement(C,v,x))},S.prototype.parseDoWhileStatement=function(){var v=this.createNode();this.expectKeyword("do");var g=this.context.inIteration;this.context.inIteration=!0;var x=this.parseStatement();this.context.inIteration=g,this.expectKeyword("while"),this.expect("(");var C=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(v,new h.DoWhileStatement(x,C))},S.prototype.parseWhileStatement=function(){var v,g=this.createNode();this.expectKeyword("while"),this.expect("(");var x=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),v=this.finalize(this.createNode(),new h.EmptyStatement);else{this.expect(")");var C=this.context.inIteration;this.context.inIteration=!0,v=this.parseStatement(),this.context.inIteration=C}return this.finalize(g,new h.WhileStatement(x,v))},S.prototype.parseForStatement=function(){var v,g,x,C=null,T=null,w=null,_=!0,E=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){C=this.createNode(),this.nextToken();var D=this.context.allowIn;this.context.allowIn=!1;var b=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=D,b.length===1&&this.matchKeyword("in")){var N=b[0];N.init&&(N.id.type===d.Syntax.ArrayPattern||N.id.type===d.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(l.Messages.ForInOfLoopInitializer,"for-in"),C=this.finalize(C,new h.VariableDeclaration(b,"var")),this.nextToken(),v=C,g=this.parseExpression(),C=null}else b.length===1&&b[0].init===null&&this.matchContextualKeyword("of")?(C=this.finalize(C,new h.VariableDeclaration(b,"var")),this.nextToken(),v=C,g=this.parseAssignmentExpression(),C=null,_=!1):(C=this.finalize(C,new h.VariableDeclaration(b,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){C=this.createNode();var R=this.nextToken().value;this.context.strict||this.lookahead.value!=="in"?(D=this.context.allowIn,this.context.allowIn=!1,b=this.parseBindingList(R,{inFor:!0}),this.context.allowIn=D,b.length===1&&b[0].init===null&&this.matchKeyword("in")?(C=this.finalize(C,new h.VariableDeclaration(b,R)),this.nextToken(),v=C,g=this.parseExpression(),C=null):b.length===1&&b[0].init===null&&this.matchContextualKeyword("of")?(C=this.finalize(C,new h.VariableDeclaration(b,R)),this.nextToken(),v=C,g=this.parseAssignmentExpression(),C=null,_=!1):(this.consumeSemicolon(),C=this.finalize(C,new h.VariableDeclaration(b,R)))):(C=this.finalize(C,new h.Identifier(R)),this.nextToken(),v=C,g=this.parseExpression(),C=null)}else{var M=this.lookahead;if(D=this.context.allowIn,this.context.allowIn=!1,C=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=D,this.matchKeyword("in"))this.context.isAssignmentTarget&&C.type!==d.Syntax.AssignmentExpression||this.tolerateError(l.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(C),v=C,g=this.parseExpression(),C=null;else if(this.matchContextualKeyword("of"))this.context.isAssignmentTarget&&C.type!==d.Syntax.AssignmentExpression||this.tolerateError(l.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(C),v=C,g=this.parseAssignmentExpression(),C=null,_=!1;else{if(this.match(",")){for(var A=[C];this.match(",");)this.nextToken(),A.push(this.isolateCoverGrammar(this.parseAssignmentExpression));C=this.finalize(this.startNode(M),new h.SequenceExpression(A))}this.expect(";")}}if(v===void 0&&(this.match(";")||(T=this.parseExpression()),this.expect(";"),this.match(")")||(w=this.parseExpression())),!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),x=this.finalize(this.createNode(),new h.EmptyStatement);else{this.expect(")");var I=this.context.inIteration;this.context.inIteration=!0,x=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=I}return v===void 0?this.finalize(E,new h.ForStatement(C,T,w,x)):_?this.finalize(E,new h.ForInStatement(v,g,x)):this.finalize(E,new h.ForOfStatement(v,g,x))},S.prototype.parseContinueStatement=function(){var v=this.createNode();this.expectKeyword("continue");var g=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var x=this.parseVariableIdentifier();g=x;var C="$"+x.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,C)||this.throwError(l.Messages.UnknownLabel,x.name)}return this.consumeSemicolon(),g!==null||this.context.inIteration||this.throwError(l.Messages.IllegalContinue),this.finalize(v,new h.ContinueStatement(g))},S.prototype.parseBreakStatement=function(){var v=this.createNode();this.expectKeyword("break");var g=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var x=this.parseVariableIdentifier(),C="$"+x.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,C)||this.throwError(l.Messages.UnknownLabel,x.name),g=x}return this.consumeSemicolon(),g!==null||this.context.inIteration||this.context.inSwitch||this.throwError(l.Messages.IllegalBreak),this.finalize(v,new h.BreakStatement(g))},S.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(l.Messages.IllegalReturn);var v=this.createNode();this.expectKeyword("return");var g=(this.match(";")||this.match("}")||this.hasLineTerminator||this.lookahead.type===2)&&this.lookahead.type!==8&&this.lookahead.type!==10?null:this.parseExpression();return this.consumeSemicolon(),this.finalize(v,new h.ReturnStatement(g))},S.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(l.Messages.StrictModeWith);var v,g=this.createNode();this.expectKeyword("with"),this.expect("(");var x=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),v=this.finalize(this.createNode(),new h.EmptyStatement)):(this.expect(")"),v=this.parseStatement()),this.finalize(g,new h.WithStatement(x,v))},S.prototype.parseSwitchCase=function(){var v,g=this.createNode();this.matchKeyword("default")?(this.nextToken(),v=null):(this.expectKeyword("case"),v=this.parseExpression()),this.expect(":");for(var x=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)x.push(this.parseStatementListItem());return this.finalize(g,new h.SwitchCase(v,x))},S.prototype.parseSwitchStatement=function(){var v=this.createNode();this.expectKeyword("switch"),this.expect("(");var g=this.parseExpression();this.expect(")");var x=this.context.inSwitch;this.context.inSwitch=!0;var C=[],T=!1;for(this.expect("{");!this.match("}");){var w=this.parseSwitchCase();w.test===null&&(T&&this.throwError(l.Messages.MultipleDefaultsInSwitch),T=!0),C.push(w)}return this.expect("}"),this.context.inSwitch=x,this.finalize(v,new h.SwitchStatement(g,C))},S.prototype.parseLabelledStatement=function(){var v,g=this.createNode(),x=this.parseExpression();if(x.type===d.Syntax.Identifier&&this.match(":")){this.nextToken();var C=x,T="$"+C.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,T)&&this.throwError(l.Messages.Redeclaration,"Label",C.name),this.context.labelSet[T]=!0;var w=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),w=this.parseClassDeclaration();else if(this.matchKeyword("function")){var _=this.lookahead,E=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(_,l.Messages.StrictFunction):E.generator&&this.tolerateUnexpectedToken(_,l.Messages.GeneratorInLegacyContext),w=E}else w=this.parseStatement();delete this.context.labelSet[T],v=new h.LabeledStatement(C,w)}else this.consumeSemicolon(),v=new h.ExpressionStatement(x);return this.finalize(g,v)},S.prototype.parseThrowStatement=function(){var v=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(l.Messages.NewlineAfterThrow);var g=this.parseExpression();return this.consumeSemicolon(),this.finalize(v,new h.ThrowStatement(g))},S.prototype.parseCatchClause=function(){var v=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var g=[],x=this.parsePattern(g),C={},T=0;T<g.length;T++){var w="$"+g[T].value;Object.prototype.hasOwnProperty.call(C,w)&&this.tolerateError(l.Messages.DuplicateBinding,g[T].value),C[w]=!0}this.context.strict&&x.type===d.Syntax.Identifier&&this.scanner.isRestrictedWord(x.name)&&this.tolerateError(l.Messages.StrictCatchVariable),this.expect(")");var _=this.parseBlock();return this.finalize(v,new h.CatchClause(x,_))},S.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},S.prototype.parseTryStatement=function(){var v=this.createNode();this.expectKeyword("try");var g=this.parseBlock(),x=this.matchKeyword("catch")?this.parseCatchClause():null,C=this.matchKeyword("finally")?this.parseFinallyClause():null;return x||C||this.throwError(l.Messages.NoCatchOrFinally),this.finalize(v,new h.TryStatement(g,x,C))},S.prototype.parseDebuggerStatement=function(){var v=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(v,new h.DebuggerStatement)},S.prototype.parseStatement=function(){var v;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:v=this.parseExpressionStatement();break;case 7:var g=this.lookahead.value;v=g==="{"?this.parseBlock():g==="("?this.parseExpressionStatement():g===";"?this.parseEmptyStatement():this.parseExpressionStatement();break;case 3:v=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":v=this.parseBreakStatement();break;case"continue":v=this.parseContinueStatement();break;case"debugger":v=this.parseDebuggerStatement();break;case"do":v=this.parseDoWhileStatement();break;case"for":v=this.parseForStatement();break;case"function":v=this.parseFunctionDeclaration();break;case"if":v=this.parseIfStatement();break;case"return":v=this.parseReturnStatement();break;case"switch":v=this.parseSwitchStatement();break;case"throw":v=this.parseThrowStatement();break;case"try":v=this.parseTryStatement();break;case"var":v=this.parseVariableStatement();break;case"while":v=this.parseWhileStatement();break;case"with":v=this.parseWithStatement();break;default:v=this.parseExpressionStatement()}break;default:v=this.throwUnexpectedToken(this.lookahead)}return v},S.prototype.parseFunctionSourceElements=function(){var v=this.createNode();this.expect("{");var g=this.parseDirectivePrologues(),x=this.context.labelSet,C=this.context.inIteration,T=this.context.inSwitch,w=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)g.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=x,this.context.inIteration=C,this.context.inSwitch=T,this.context.inFunctionBody=w,this.finalize(v,new h.BlockStatement(g))},S.prototype.validateParam=function(v,g,x){var C="$"+x;this.context.strict?(this.scanner.isRestrictedWord(x)&&(v.stricted=g,v.message=l.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(v.paramSet,C)&&(v.stricted=g,v.message=l.Messages.StrictParamDupe)):v.firstRestricted||(this.scanner.isRestrictedWord(x)?(v.firstRestricted=g,v.message=l.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(x)?(v.firstRestricted=g,v.message=l.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(v.paramSet,C)&&(v.stricted=g,v.message=l.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(v.paramSet,C,{value:!0,enumerable:!0,writable:!0,configurable:!0}):v.paramSet[C]=!0},S.prototype.parseRestElement=function(v){var g=this.createNode();this.expect("...");var x=this.parsePattern(v);return this.match("=")&&this.throwError(l.Messages.DefaultRestParameter),this.match(")")||this.throwError(l.Messages.ParameterAfterRestParameter),this.finalize(g,new h.RestElement(x))},S.prototype.parseFormalParameter=function(v){for(var g=[],x=this.match("...")?this.parseRestElement(g):this.parsePatternWithDefault(g),C=0;C<g.length;C++)this.validateParam(v,g[C],g[C].value);v.simple=v.simple&&x instanceof h.Identifier,v.params.push(x)},S.prototype.parseFormalParameters=function(v){var g;if(g={simple:!0,params:[],firstRestricted:v},this.expect("("),!this.match(")"))for(g.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(g),!this.match(")"))&&(this.expect(","),!this.match(")")););return this.expect(")"),{simple:g.simple,params:g.params,stricted:g.stricted,firstRestricted:g.firstRestricted,message:g.message}},S.prototype.matchAsyncFunction=function(){var v=this.matchContextualKeyword("async");if(v){var g=this.scanner.saveState();this.scanner.scanComments();var x=this.scanner.lex();this.scanner.restoreState(g),v=g.lineNumber===x.lineNumber&&x.type===4&&x.value==="function"}return v},S.prototype.parseFunctionDeclaration=function(v){var g=this.createNode(),x=this.matchContextualKeyword("async");x&&this.nextToken(),this.expectKeyword("function");var C,T=!x&&this.match("*");T&&this.nextToken();var w=null,_=null;if(!v||!this.match("(")){var E=this.lookahead;w=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(E.value)&&this.tolerateUnexpectedToken(E,l.Messages.StrictFunctionName):this.scanner.isRestrictedWord(E.value)?(_=E,C=l.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(E.value)&&(_=E,C=l.Messages.StrictReservedWord)}var D=this.context.await,b=this.context.allowYield;this.context.await=x,this.context.allowYield=!T;var N=this.parseFormalParameters(_),R=N.params,M=N.stricted;_=N.firstRestricted,N.message&&(C=N.message);var A=this.context.strict,I=this.context.allowStrictDirective;this.context.allowStrictDirective=N.simple;var $=this.parseFunctionSourceElements();return this.context.strict&&_&&this.throwUnexpectedToken(_,C),this.context.strict&&M&&this.tolerateUnexpectedToken(M,C),this.context.strict=A,this.context.allowStrictDirective=I,this.context.await=D,this.context.allowYield=b,x?this.finalize(g,new h.AsyncFunctionDeclaration(w,R,$)):this.finalize(g,new h.FunctionDeclaration(w,R,$,T))},S.prototype.parseFunctionExpression=function(){var v=this.createNode(),g=this.matchContextualKeyword("async");g&&this.nextToken(),this.expectKeyword("function");var x,C=!g&&this.match("*");C&&this.nextToken();var T,w=null,_=this.context.await,E=this.context.allowYield;if(this.context.await=g,this.context.allowYield=!C,!this.match("(")){var D=this.lookahead;w=this.context.strict||C||!this.matchKeyword("yield")?this.parseVariableIdentifier():this.parseIdentifierName(),this.context.strict?this.scanner.isRestrictedWord(D.value)&&this.tolerateUnexpectedToken(D,l.Messages.StrictFunctionName):this.scanner.isRestrictedWord(D.value)?(T=D,x=l.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(D.value)&&(T=D,x=l.Messages.StrictReservedWord)}var b=this.parseFormalParameters(T),N=b.params,R=b.stricted;T=b.firstRestricted,b.message&&(x=b.message);var M=this.context.strict,A=this.context.allowStrictDirective;this.context.allowStrictDirective=b.simple;var I=this.parseFunctionSourceElements();return this.context.strict&&T&&this.throwUnexpectedToken(T,x),this.context.strict&&R&&this.tolerateUnexpectedToken(R,x),this.context.strict=M,this.context.allowStrictDirective=A,this.context.await=_,this.context.allowYield=E,g?this.finalize(v,new h.AsyncFunctionExpression(w,N,I)):this.finalize(v,new h.FunctionExpression(w,N,I,C))},S.prototype.parseDirective=function(){var v=this.lookahead,g=this.createNode(),x=this.parseExpression(),C=x.type===d.Syntax.Literal?this.getTokenRaw(v).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(g,C?new h.Directive(x,C):new h.ExpressionStatement(x))},S.prototype.parseDirectivePrologues=function(){for(var v=null,g=[];;){var x=this.lookahead;if(x.type!==8)break;var C=this.parseDirective();g.push(C);var T=C.directive;if(typeof T!="string")break;T==="use strict"?(this.context.strict=!0,v&&this.tolerateUnexpectedToken(v,l.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(x,l.Messages.IllegalLanguageModeDirective)):!v&&x.octal&&(v=x)}return g},S.prototype.qualifiedPropertyName=function(v){switch(v.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return v.value==="["}return!1},S.prototype.parseGetterMethod=function(){var v=this.createNode(),g=this.context.allowYield;this.context.allowYield=!0;var x=this.parseFormalParameters();x.params.length>0&&this.tolerateError(l.Messages.BadGetterArity);var C=this.parsePropertyMethod(x);return this.context.allowYield=g,this.finalize(v,new h.FunctionExpression(null,x.params,C,!1))},S.prototype.parseSetterMethod=function(){var v=this.createNode(),g=this.context.allowYield;this.context.allowYield=!0;var x=this.parseFormalParameters();x.params.length!==1?this.tolerateError(l.Messages.BadSetterArity):x.params[0]instanceof h.RestElement&&this.tolerateError(l.Messages.BadSetterRestParameter);var C=this.parsePropertyMethod(x);return this.context.allowYield=g,this.finalize(v,new h.FunctionExpression(null,x.params,C,!1))},S.prototype.parseGeneratorMethod=function(){var v=this.createNode(),g=this.context.allowYield;this.context.allowYield=!0;var x=this.parseFormalParameters();this.context.allowYield=!1;var C=this.parsePropertyMethod(x);return this.context.allowYield=g,this.finalize(v,new h.FunctionExpression(null,x.params,C,!0))},S.prototype.isStartOfExpression=function(){var v=!0,g=this.lookahead.value;switch(this.lookahead.type){case 7:v=g==="["||g==="("||g==="{"||g==="+"||g==="-"||g==="!"||g==="~"||g==="++"||g==="--"||g==="/"||g==="/=";break;case 4:v=g==="class"||g==="delete"||g==="function"||g==="let"||g==="new"||g==="super"||g==="this"||g==="typeof"||g==="void"||g==="yield"}return v},S.prototype.parseYieldExpression=function(){var v=this.createNode();this.expectKeyword("yield");var g=null,x=!1;if(!this.hasLineTerminator){var C=this.context.allowYield;this.context.allowYield=!1,(x=this.match("*"))?(this.nextToken(),g=this.parseAssignmentExpression()):this.isStartOfExpression()&&(g=this.parseAssignmentExpression()),this.context.allowYield=C}return this.finalize(v,new h.YieldExpression(g,x))},S.prototype.parseClassElement=function(v){var g=this.lookahead,x=this.createNode(),C="",T=null,w=null,_=!1,E=!1,D=!1,b=!1;if(this.match("*"))this.nextToken();else if(_=this.match("["),(T=this.parseObjectPropertyKey()).name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(g=this.lookahead,D=!0,_=this.match("["),this.match("*")?this.nextToken():T=this.parseObjectPropertyKey()),g.type===3&&!this.hasLineTerminator&&g.value==="async"){var N=this.lookahead.value;N!==":"&&N!=="("&&N!=="*"&&(b=!0,g=this.lookahead,T=this.parseObjectPropertyKey(),g.type===3&&g.value==="constructor"&&this.tolerateUnexpectedToken(g,l.Messages.ConstructorIsAsync))}var R=this.qualifiedPropertyName(this.lookahead);return g.type===3?g.value==="get"&&R?(C="get",_=this.match("["),T=this.parseObjectPropertyKey(),this.context.allowYield=!1,w=this.parseGetterMethod()):g.value==="set"&&R&&(C="set",_=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseSetterMethod()):g.type===7&&g.value==="*"&&R&&(C="init",_=this.match("["),T=this.parseObjectPropertyKey(),w=this.parseGeneratorMethod(),E=!0),!C&&T&&this.match("(")&&(C="init",w=b?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),E=!0),C||this.throwUnexpectedToken(this.lookahead),C==="init"&&(C="method"),_||(D&&this.isPropertyKey(T,"prototype")&&this.throwUnexpectedToken(g,l.Messages.StaticPrototype),!D&&this.isPropertyKey(T,"constructor")&&((C!=="method"||!E||w&&w.generator)&&this.throwUnexpectedToken(g,l.Messages.ConstructorSpecialMethod),v.value?this.throwUnexpectedToken(g,l.Messages.DuplicateConstructor):v.value=!0,C="constructor")),this.finalize(x,new h.MethodDefinition(T,_,w,C,D))},S.prototype.parseClassElementList=function(){var v=[],g={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():v.push(this.parseClassElement(g));return this.expect("}"),v},S.prototype.parseClassBody=function(){var v=this.createNode(),g=this.parseClassElementList();return this.finalize(v,new h.ClassBody(g))},S.prototype.parseClassDeclaration=function(v){var g=this.createNode(),x=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var C=v&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),T=null;this.matchKeyword("extends")&&(this.nextToken(),T=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var w=this.parseClassBody();return this.context.strict=x,this.finalize(g,new h.ClassDeclaration(C,T,w))},S.prototype.parseClassExpression=function(){var v=this.createNode(),g=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var x=this.lookahead.type===3?this.parseVariableIdentifier():null,C=null;this.matchKeyword("extends")&&(this.nextToken(),C=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var T=this.parseClassBody();return this.context.strict=g,this.finalize(v,new h.ClassExpression(x,C,T))},S.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var v=this.createNode(),g=this.parseDirectivePrologues();this.lookahead.type!==2;)g.push(this.parseStatementListItem());return this.finalize(v,new h.Module(g))},S.prototype.parseScript=function(){for(var v=this.createNode(),g=this.parseDirectivePrologues();this.lookahead.type!==2;)g.push(this.parseStatementListItem());return this.finalize(v,new h.Script(g))},S.prototype.parseModuleSpecifier=function(){var v=this.createNode();this.lookahead.type!==8&&this.throwError(l.Messages.InvalidModuleSpecifier);var g=this.nextToken(),x=this.getTokenRaw(g);return this.finalize(v,new h.Literal(g.value,x))},S.prototype.parseImportSpecifier=function(){var v,g,x=this.createNode();return this.lookahead.type===3?(g=v=this.parseVariableIdentifier(),this.matchContextualKeyword("as")&&(this.nextToken(),g=this.parseVariableIdentifier())):(g=v=this.parseIdentifierName(),this.matchContextualKeyword("as")?(this.nextToken(),g=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(x,new h.ImportSpecifier(g,v))},S.prototype.parseNamedImports=function(){this.expect("{");for(var v=[];!this.match("}");)v.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),v},S.prototype.parseImportDefaultSpecifier=function(){var v=this.createNode(),g=this.parseIdentifierName();return this.finalize(v,new h.ImportDefaultSpecifier(g))},S.prototype.parseImportNamespaceSpecifier=function(){var v=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(l.Messages.NoAsAfterImportNamespace),this.nextToken();var g=this.parseIdentifierName();return this.finalize(v,new h.ImportNamespaceSpecifier(g))},S.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(l.Messages.IllegalImportDeclaration);var v,g=this.createNode();this.expectKeyword("import");var x=[];if(this.lookahead.type===8)v=this.parseModuleSpecifier();else{if(this.match("{")?x=x.concat(this.parseNamedImports()):this.match("*")?x.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(x.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?x.push(this.parseImportNamespaceSpecifier()):this.match("{")?x=x.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var C=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause;this.throwError(C,this.lookahead.value)}this.nextToken(),v=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(g,new h.ImportDeclaration(x,v))},S.prototype.parseExportSpecifier=function(){var v=this.createNode(),g=this.parseIdentifierName(),x=g;return this.matchContextualKeyword("as")&&(this.nextToken(),x=this.parseIdentifierName()),this.finalize(v,new h.ExportSpecifier(g,x))},S.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(l.Messages.IllegalExportDeclaration);var v,g=this.createNode();if(this.expectKeyword("export"),this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var x=this.parseFunctionDeclaration(!0);v=this.finalize(g,new h.ExportDefaultDeclaration(x))}else this.matchKeyword("class")?(x=this.parseClassDeclaration(!0),v=this.finalize(g,new h.ExportDefaultDeclaration(x))):this.matchContextualKeyword("async")?(x=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression(),v=this.finalize(g,new h.ExportDefaultDeclaration(x))):(this.matchContextualKeyword("from")&&this.throwError(l.Messages.UnexpectedToken,this.lookahead.value),x=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression(),this.consumeSemicolon(),v=this.finalize(g,new h.ExportDefaultDeclaration(x)));else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var C=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause;this.throwError(C,this.lookahead.value)}this.nextToken();var T=this.parseModuleSpecifier();this.consumeSemicolon(),v=this.finalize(g,new h.ExportAllDeclaration(T))}else if(this.lookahead.type===4){switch(x=void 0,this.lookahead.value){case"let":case"const":x=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":x=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}v=this.finalize(g,new h.ExportNamedDeclaration(x,[],null))}else if(this.matchAsyncFunction())x=this.parseFunctionDeclaration(),v=this.finalize(g,new h.ExportNamedDeclaration(x,[],null));else{var w=[],_=null,E=!1;for(this.expect("{");!this.match("}");)E=E||this.matchKeyword("default"),w.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}"),this.matchContextualKeyword("from")?(this.nextToken(),_=this.parseModuleSpecifier(),this.consumeSemicolon()):E?(C=this.lookahead.value?l.Messages.UnexpectedToken:l.Messages.MissingFromClause,this.throwError(C,this.lookahead.value)):this.consumeSemicolon(),v=this.finalize(g,new h.ExportNamedDeclaration(null,w,_))}return v},S}();u.Parser=m},function(s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.assert=function(c,o){if(!c)throw new Error("ASSERT: "+o)}},function(s,u){Object.defineProperty(u,"__esModule",{value:!0});var c=function(){function o(){this.errors=[],this.tolerant=!1}return o.prototype.recordError=function(f){this.errors.push(f)},o.prototype.tolerate=function(f){if(!this.tolerant)throw f;this.recordError(f)},o.prototype.constructError=function(f,l){var h=new Error(f);try{throw h}catch(p){Object.create&&Object.defineProperty&&(h=Object.create(p),Object.defineProperty(h,"column",{value:l}))}return h},o.prototype.createError=function(f,l,h,p){var d="Line "+l+": "+p,y=this.constructError(d,h);return y.index=f,y.lineNumber=l,y.description=p,y},o.prototype.throwError=function(f,l,h,p){throw this.createError(f,l,h,p)},o.prototype.tolerateError=function(f,l,h,p){var d=this.createError(f,l,h,p);if(!this.tolerant)throw d;this.recordError(d)},o}();u.ErrorHandler=c},function(s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(s,u,c){Object.defineProperty(u,"__esModule",{value:!0});var o=c(9),f=c(4),l=c(11);function h(y){return"0123456789abcdef".indexOf(y.toLowerCase())}function p(y){return"01234567".indexOf(y)}var d=function(){function y(m,S){this.source=m,this.errorHandler=S,this.trackComment=!1,this.isModule=!1,this.length=m.length,this.index=0,this.lineNumber=m.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return y.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},y.prototype.restoreState=function(m){this.index=m.index,this.lineNumber=m.lineNumber,this.lineStart=m.lineStart},y.prototype.eof=function(){return this.index>=this.length},y.prototype.throwUnexpectedToken=function(m){return m===void 0&&(m=l.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},y.prototype.tolerateUnexpectedToken=function(m){m===void 0&&(m=l.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},y.prototype.skipSingleLineComment=function(m){var S,v,g=[];for(this.trackComment&&(g=[],S=this.index-m,v={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{}});!this.eof();){var x=this.source.charCodeAt(this.index);if(++this.index,f.Character.isLineTerminator(x)){if(this.trackComment){v.end={line:this.lineNumber,column:this.index-this.lineStart-1};var C={multiLine:!1,slice:[S+m,this.index-1],range:[S,this.index-1],loc:v};g.push(C)}return x===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,g}}return this.trackComment&&(v.end={line:this.lineNumber,column:this.index-this.lineStart},C={multiLine:!1,slice:[S+m,this.index],range:[S,this.index],loc:v},g.push(C)),g},y.prototype.skipMultiLineComment=function(){var m,S,v=[];for(this.trackComment&&(v=[],m=this.index-2,S={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var g=this.source.charCodeAt(this.index);if(f.Character.isLineTerminator(g))g===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(g===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){S.end={line:this.lineNumber,column:this.index-this.lineStart};var x={multiLine:!0,slice:[m+2,this.index-2],range:[m,this.index],loc:S};v.push(x)}return v}++this.index}else++this.index}return this.trackComment&&(S.end={line:this.lineNumber,column:this.index-this.lineStart},x={multiLine:!0,slice:[m+2,this.index],range:[m,this.index],loc:S},v.push(x)),this.tolerateUnexpectedToken(),v},y.prototype.scanComments=function(){var m;this.trackComment&&(m=[]);for(var S=this.index===0;!this.eof();){var v=this.source.charCodeAt(this.index);if(f.Character.isWhiteSpace(v))++this.index;else if(f.Character.isLineTerminator(v))++this.index,v===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,S=!0;else if(v===47)if((v=this.source.charCodeAt(this.index+1))===47){this.index+=2;var g=this.skipSingleLineComment(2);this.trackComment&&(m=m.concat(g)),S=!0}else{if(v!==42)break;this.index+=2,g=this.skipMultiLineComment(),this.trackComment&&(m=m.concat(g))}else if(S&&v===45){if(this.source.charCodeAt(this.index+1)!==45||this.source.charCodeAt(this.index+2)!==62)break;this.index+=3,g=this.skipSingleLineComment(3),this.trackComment&&(m=m.concat(g))}else{if(v!==60||this.isModule||this.source.slice(this.index+1,this.index+4)!=="!--")break;this.index+=4,g=this.skipSingleLineComment(4),this.trackComment&&(m=m.concat(g))}}return m},y.prototype.isFutureReservedWord=function(m){switch(m){case"enum":case"export":case"import":case"super":return!0;default:return!1}},y.prototype.isStrictModeReservedWord=function(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},y.prototype.isRestrictedWord=function(m){return m==="eval"||m==="arguments"},y.prototype.isKeyword=function(m){switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try"||m==="let";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}},y.prototype.codePointAt=function(m){var S=this.source.charCodeAt(m);if(S>=55296&&S<=56319){var v=this.source.charCodeAt(m+1);v>=56320&&v<=57343&&(S=1024*(S-55296)+v-56320+65536)}return S},y.prototype.scanHexEscape=function(m){for(var S=m==="u"?4:2,v=0,g=0;g<S;++g){if(this.eof()||!f.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;v=16*v+h(this.source[this.index++])}return String.fromCharCode(v)},y.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],S=0;for(m==="}"&&this.throwUnexpectedToken();!this.eof()&&(m=this.source[this.index++],f.Character.isHexDigit(m.charCodeAt(0)));)S=16*S+h(m);return(S>1114111||m!=="}")&&this.throwUnexpectedToken(),f.Character.fromCodePoint(S)},y.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var S=this.source.charCodeAt(this.index);if(S===92)return this.index=m,this.getComplexIdentifier();if(S>=55296&&S<57343)return this.index=m,this.getComplexIdentifier();if(!f.Character.isIdentifierPart(S))break;++this.index}return this.source.slice(m,this.index)},y.prototype.getComplexIdentifier=function(){var m,S=this.codePointAt(this.index),v=f.Character.fromCodePoint(S);for(this.index+=v.length,S===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,m=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape("u"))!==null&&m!=="\\"&&f.Character.isIdentifierStart(m.charCodeAt(0))||this.throwUnexpectedToken(),v=m);!this.eof()&&(S=this.codePointAt(this.index),f.Character.isIdentifierPart(S));)v+=m=f.Character.fromCodePoint(S),this.index+=m.length,S===92&&(v=v.substr(0,v.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,m=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape("u"))!==null&&m!=="\\"&&f.Character.isIdentifierPart(m.charCodeAt(0))||this.throwUnexpectedToken(),v+=m);return v},y.prototype.octalToDecimal=function(m){var S=m!=="0",v=p(m);return!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(S=!0,v=8*v+p(this.source[this.index++]),"0123".indexOf(m)>=0&&!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(v=8*v+p(this.source[this.index++]))),{code:v,octal:S}},y.prototype.scanIdentifier=function(){var m,S=this.index,v=this.source.charCodeAt(S)===92?this.getComplexIdentifier():this.getIdentifier();if((m=v.length===1?3:this.isKeyword(v)?4:v==="null"?5:v==="true"||v==="false"?1:3)!=3&&S+v.length!==this.index){var g=this.index;this.index=S,this.tolerateUnexpectedToken(l.Messages.InvalidEscapedReservedWord),this.index=g}return{type:m,value:v,lineNumber:this.lineNumber,lineStart:this.lineStart,start:S,end:this.index}},y.prototype.scanPunctuator=function(){var m=this.index,S=this.source[this.index];switch(S){case"(":case"{":S==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,S="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:(S=this.source.substr(this.index,4))===">>>="?this.index+=4:(S=S.substr(0,3))==="==="||S==="!=="||S===">>>"||S==="<<="||S===">>="||S==="**="?this.index+=3:(S=S.substr(0,2))==="&&"||S==="||"||S==="=="||S==="!="||S==="+="||S==="-="||S==="*="||S==="/="||S==="++"||S==="--"||S==="<<"||S===">>"||S==="&="||S==="|="||S==="^="||S==="%="||S==="<="||S===">="||S==="=>"||S==="**"?this.index+=2:(S=this.source[this.index],"<>=!+-*%&|^/".indexOf(S)>=0&&++this.index)}return this.index===m&&this.throwUnexpectedToken(),{type:7,value:S,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanHexLiteral=function(m){for(var S="";!this.eof()&&f.Character.isHexDigit(this.source.charCodeAt(this.index));)S+=this.source[this.index++];return S.length===0&&this.throwUnexpectedToken(),f.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+S,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanBinaryLiteral=function(m){for(var S,v="";!this.eof()&&((S=this.source[this.index])==="0"||S==="1");)v+=this.source[this.index++];return v.length===0&&this.throwUnexpectedToken(),this.eof()||(S=this.source.charCodeAt(this.index),(f.Character.isIdentifierStart(S)||f.Character.isDecimalDigit(S))&&this.throwUnexpectedToken()),{type:6,value:parseInt(v,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanOctalLiteral=function(m,S){var v="",g=!1;for(f.Character.isOctalDigit(m.charCodeAt(0))?(g=!0,v="0"+this.source[this.index++]):++this.index;!this.eof()&&f.Character.isOctalDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];return g||v.length!==0||this.throwUnexpectedToken(),(f.Character.isIdentifierStart(this.source.charCodeAt(this.index))||f.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(v,8),octal:g,lineNumber:this.lineNumber,lineStart:this.lineStart,start:S,end:this.index}},y.prototype.isImplicitOctalLiteral=function(){for(var m=this.index+1;m<this.length;++m){var S=this.source[m];if(S==="8"||S==="9")return!1;if(!f.Character.isOctalDigit(S.charCodeAt(0)))return!0}return!0},y.prototype.scanNumericLiteral=function(){var m=this.index,S=this.source[m];o.assert(f.Character.isDecimalDigit(S.charCodeAt(0))||S===".","Numeric literal must start with a decimal digit or a decimal point");var v="";if(S!=="."){if(v=this.source[this.index++],S=this.source[this.index],v==="0"){if(S==="x"||S==="X")return++this.index,this.scanHexLiteral(m);if(S==="b"||S==="B")return++this.index,this.scanBinaryLiteral(m);if(S==="o"||S==="O")return this.scanOctalLiteral(S,m);if(S&&f.Character.isOctalDigit(S.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(S,m)}for(;f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];S=this.source[this.index]}if(S==="."){for(v+=this.source[this.index++];f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];S=this.source[this.index]}if(S==="e"||S==="E")if(v+=this.source[this.index++],(S=this.source[this.index])!=="+"&&S!=="-"||(v+=this.source[this.index++]),f.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;f.Character.isDecimalDigit(this.source.charCodeAt(this.index));)v+=this.source[this.index++];else this.throwUnexpectedToken();return f.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(v),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanStringLiteral=function(){var m=this.index,S=this.source[m];o.assert(S==="'"||S==='"',"String literal must starts with a quote"),++this.index;for(var v=!1,g="";!this.eof();){var x=this.source[this.index++];if(x===S){S="";break}if(x==="\\")if((x=this.source[this.index++])&&f.Character.isLineTerminator(x.charCodeAt(0)))++this.lineNumber,x==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(x){case"u":if(this.source[this.index]==="{")++this.index,g+=this.scanUnicodeCodePointEscape();else{var C=this.scanHexEscape(x);C===null&&this.throwUnexpectedToken(),g+=C}break;case"x":var T=this.scanHexEscape(x);T===null&&this.throwUnexpectedToken(l.Messages.InvalidHexEscapeSequence),g+=T;break;case"n":g+=`
`;break;case"r":g+="\r";break;case"t":g+="	";break;case"b":g+="\b";break;case"f":g+="\f";break;case"v":g+="\v";break;case"8":case"9":g+=x,this.tolerateUnexpectedToken();break;default:if(x&&f.Character.isOctalDigit(x.charCodeAt(0))){var w=this.octalToDecimal(x);v=w.octal||v,g+=String.fromCharCode(w.code)}else g+=x}else{if(f.Character.isLineTerminator(x.charCodeAt(0)))break;g+=x}}return S!==""&&(this.index=m,this.throwUnexpectedToken()),{type:8,value:g,octal:v,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.scanTemplate=function(){var m="",S=!1,v=this.index,g=this.source[v]==="`",x=!1,C=2;for(++this.index;!this.eof();){var T=this.source[this.index++];if(T==="`"){C=1,x=!0,S=!0;break}if(T==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,S=!0;break}m+=T}else if(T==="\\")if(T=this.source[this.index++],f.Character.isLineTerminator(T.charCodeAt(0)))++this.lineNumber,T==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(T){case"n":m+=`
`;break;case"r":m+="\r";break;case"t":m+="	";break;case"u":if(this.source[this.index]==="{")++this.index,m+=this.scanUnicodeCodePointEscape();else{var w=this.index,_=this.scanHexEscape(T);_!==null?m+=_:(this.index=w,m+=T)}break;case"x":var E=this.scanHexEscape(T);E===null&&this.throwUnexpectedToken(l.Messages.InvalidHexEscapeSequence),m+=E;break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:T==="0"?(f.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(l.Messages.TemplateOctalLiteral),m+="\0"):f.Character.isOctalDigit(T.charCodeAt(0))?this.throwUnexpectedToken(l.Messages.TemplateOctalLiteral):m+=T}else f.Character.isLineTerminator(T.charCodeAt(0))?(++this.lineNumber,T==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,m+=`
`):m+=T}return S||this.throwUnexpectedToken(),g||this.curlyStack.pop(),{type:10,value:this.source.slice(v+1,this.index-C),cooked:m,head:g,tail:x,lineNumber:this.lineNumber,lineStart:this.lineStart,start:v,end:this.index}},y.prototype.testRegExp=function(m,S){var v=m,g=this;S.indexOf("u")>=0&&(v=v.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(x,C,T){var w=parseInt(C||T,16);return w>1114111&&g.throwUnexpectedToken(l.Messages.InvalidRegExp),w<=65535?String.fromCharCode(w):"￿"}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"￿"));try{RegExp(v)}catch{this.throwUnexpectedToken(l.Messages.InvalidRegExp)}try{return new RegExp(m,S)}catch{return null}},y.prototype.scanRegExpBody=function(){var m=this.source[this.index];o.assert(m==="/","Regular expression literal must start with a slash");for(var S=this.source[this.index++],v=!1,g=!1;!this.eof();)if(S+=m=this.source[this.index++],m==="\\")m=this.source[this.index++],f.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(l.Messages.UnterminatedRegExp),S+=m;else if(f.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(l.Messages.UnterminatedRegExp);else if(v)m==="]"&&(v=!1);else{if(m==="/"){g=!0;break}m==="["&&(v=!0)}return g||this.throwUnexpectedToken(l.Messages.UnterminatedRegExp),S.substr(1,S.length-2)},y.prototype.scanRegExpFlags=function(){for(var m="";!this.eof();){var S=this.source[this.index];if(!f.Character.isIdentifierPart(S.charCodeAt(0)))break;if(++this.index,S!=="\\"||this.eof())m+=S;else if((S=this.source[this.index])==="u"){++this.index;var v=this.index,g=this.scanHexEscape("u");if(g!==null)for(m+=g;v<this.index;++v)this.source[v];else this.index=v,m+="u";this.tolerateUnexpectedToken()}else this.tolerateUnexpectedToken()}return m},y.prototype.scanRegExp=function(){var m=this.index,S=this.scanRegExpBody(),v=this.scanRegExpFlags();return{type:9,value:"",pattern:S,flags:v,regex:this.testRegExp(S,v),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},y.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return f.Character.isIdentifierStart(m)?this.scanIdentifier():m===40||m===41||m===59?this.scanPunctuator():m===39||m===34?this.scanStringLiteral():m===46?f.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():f.Character.isDecimalDigit(m)?this.scanNumericLiteral():m===96||m===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():m>=55296&&m<57343&&f.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},y}();u.Scanner=d},function(s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.TokenName={},u.TokenName[1]="Boolean",u.TokenName[2]="<end>",u.TokenName[3]="Identifier",u.TokenName[4]="Keyword",u.TokenName[5]="Null",u.TokenName[6]="Numeric",u.TokenName[7]="Punctuator",u.TokenName[8]="String",u.TokenName[9]="RegularExpression",u.TokenName[10]="Template"},function(s,u){Object.defineProperty(u,"__esModule",{value:!0}),u.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",lang:"⟨",rang:"⟩"}},function(s,u,c){Object.defineProperty(u,"__esModule",{value:!0});var o=c(10),f=c(12),l=c(13),h=function(){function d(){this.values=[],this.curly=this.paren=-1}return d.prototype.beforeFunctionExpression=function(y){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(y)>=0},d.prototype.isRegexStart=function(){var y=this.values[this.values.length-1],m=y!==null;switch(y){case"this":case"]":m=!1;break;case")":var S=this.values[this.paren-1];m=S==="if"||S==="while"||S==="for"||S==="with";break;case"}":if(m=!1,this.values[this.curly-3]==="function")m=!!(v=this.values[this.curly-4])&&!this.beforeFunctionExpression(v);else if(this.values[this.curly-4]==="function"){var v;m=!(v=this.values[this.curly-5])||!this.beforeFunctionExpression(v)}}return m},d.prototype.push=function(y){y.type===7||y.type===4?(y.value==="{"?this.curly=this.values.length:y.value==="("&&(this.paren=this.values.length),this.values.push(y.value)):this.values.push(null)},d}(),p=function(){function d(y,m){this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=!!m&&typeof m.tolerant=="boolean"&&m.tolerant,this.scanner=new f.Scanner(y,this.errorHandler),this.scanner.trackComment=!!m&&typeof m.comment=="boolean"&&m.comment,this.trackRange=!!m&&typeof m.range=="boolean"&&m.range,this.trackLoc=!!m&&typeof m.loc=="boolean"&&m.loc,this.buffer=[],this.reader=new h}return d.prototype.errors=function(){return this.errorHandler.errors},d.prototype.getNextToken=function(){if(this.buffer.length===0){var y=this.scanner.scanComments();if(this.scanner.trackComment)for(var m=0;m<y.length;++m){var S=y[m],v=this.scanner.source.slice(S.slice[0],S.slice[1]),g={type:S.multiLine?"BlockComment":"LineComment",value:v};this.trackRange&&(g.range=S.range),this.trackLoc&&(g.loc=S.loc),this.buffer.push(g)}if(!this.scanner.eof()){var x=void 0;this.trackLoc&&(x={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var C=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart()?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(C);var T={type:l.TokenName[C.type],value:this.scanner.source.slice(C.start,C.end)};if(this.trackRange&&(T.range=[C.start,C.end]),this.trackLoc&&(x.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},T.loc=x),C.type===9){var w=C.pattern,_=C.flags;T.regex={pattern:w,flags:_}}this.buffer.push(T)}}return this.buffer.shift()},d}();u.Tokenizer=p}])},a.exports=i()},function(a,n,r){var i=r(38),s=r(53),u=r(76),c=r(54),o=Object.prototype.toString,f=Object.prototype.hasOwnProperty,l={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},h=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function p(M){var A,I,$;if(A=M.toString(16).toUpperCase(),M<=255)I="x",$=2;else if(M<=65535)I="u",$=4;else{if(!(M<=4294967295))throw new s("code point within a string may not be greater than 0xFFFFFFFF");I="U",$=8}return"\\"+I+i.repeat("0",$-A.length)+A}function d(M){this.schema=M.schema||u,this.indent=Math.max(1,M.indent||2),this.noArrayIndent=M.noArrayIndent||!1,this.skipInvalid=M.skipInvalid||!1,this.flowLevel=i.isNothing(M.flowLevel)?-1:M.flowLevel,this.styleMap=function(A,I){var $,U,B,F,z,H,X;if(I===null)return{};for($={},B=0,F=(U=Object.keys(I)).length;B<F;B+=1)z=U[B],H=String(I[z]),z.slice(0,2)==="!!"&&(z="tag:yaml.org,2002:"+z.slice(2)),(X=A.compiledTypeMap.fallback[z])&&f.call(X.styleAliases,H)&&(H=X.styleAliases[H]),$[z]=H;return $}(this.schema,M.styles||null),this.sortKeys=M.sortKeys||!1,this.lineWidth=M.lineWidth||80,this.noRefs=M.noRefs||!1,this.noCompatMode=M.noCompatMode||!1,this.condenseFlow=M.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function y(M,A){for(var I,$=i.repeat(" ",A),U=0,B=-1,F="",z=M.length;U<z;)(B=M.indexOf(`
`,U))===-1?(I=M.slice(U),U=z):(I=M.slice(U,B+1),U=B+1),I.length&&I!==`
`&&(F+=$),F+=I;return F}function m(M,A){return`
`+i.repeat(" ",M.indent*A)}function S(M){return M===32||M===9}function v(M){return 32<=M&&M<=126||161<=M&&M<=55295&&M!==8232&&M!==8233||57344<=M&&M<=65533&&M!==65279||65536<=M&&M<=1114111}function g(M,A){return v(M)&&M!==65279&&M!==44&&M!==91&&M!==93&&M!==123&&M!==125&&M!==58&&(M!==35||A&&function(I){return v(I)&&!S(I)&&I!==65279&&I!==13&&I!==10}(A))}function x(M){return/^\n* /.test(M)}function C(M,A,I,$,U){var B,F,z,H,X=!1,Y=!1,q=$!==-1,ee=-1,re=v(H=M.charCodeAt(0))&&H!==65279&&!S(H)&&H!==45&&H!==63&&H!==58&&H!==44&&H!==91&&H!==93&&H!==123&&H!==125&&H!==35&&H!==38&&H!==42&&H!==33&&H!==124&&H!==61&&H!==62&&H!==39&&H!==34&&H!==37&&H!==64&&H!==96&&!S(M.charCodeAt(M.length-1));if(A)for(B=0;B<M.length;B++){if(!v(F=M.charCodeAt(B)))return 5;z=B>0?M.charCodeAt(B-1):null,re=re&&g(F,z)}else{for(B=0;B<M.length;B++){if((F=M.charCodeAt(B))===10)X=!0,q&&(Y=Y||B-ee-1>$&&M[ee+1]!==" ",ee=B);else if(!v(F))return 5;z=B>0?M.charCodeAt(B-1):null,re=re&&g(F,z)}Y=Y||q&&B-ee-1>$&&M[ee+1]!==" "}return X||Y?I>9&&x(M)?5:Y?4:3:re&&!U(M)?1:2}function T(M,A,I,$){M.dump=function(){if(A.length===0)return"''";if(!M.noCompatMode&&h.indexOf(A)!==-1)return"'"+A+"'";var U=M.indent*Math.max(1,I),B=M.lineWidth===-1?-1:Math.max(Math.min(M.lineWidth,40),M.lineWidth-U),F=$||M.flowLevel>-1&&I>=M.flowLevel;switch(C(A,F,M.indent,B,function(z){return function(H,X){var Y,q;for(Y=0,q=H.implicitTypes.length;Y<q;Y+=1)if(H.implicitTypes[Y].resolve(X))return!0;return!1}(M,z)})){case 1:return A;case 2:return"'"+A.replace(/'/g,"''")+"'";case 3:return"|"+w(A,M.indent)+_(y(A,U));case 4:return">"+w(A,M.indent)+_(y(function(z,H){for(var X,Y,q=/(\n+)([^\n]*)/g,ee=(ie=z.indexOf(`
`),ie=ie!==-1?ie:z.length,q.lastIndex=ie,E(z.slice(0,ie),H)),re=z[0]===`
`||z[0]===" ",ie;Y=q.exec(z);){var te=Y[1],L=Y[2];X=L[0]===" ",ee+=te+(re||X||L===""?"":`
`)+E(L,H),re=X}return ee}(A,B),U));case 5:return'"'+function(z){for(var H,X,Y,q="",ee=0;ee<z.length;ee++)(H=z.charCodeAt(ee))>=55296&&H<=56319&&(X=z.charCodeAt(ee+1))>=56320&&X<=57343?(q+=p(1024*(H-55296)+X-56320+65536),ee++):(Y=l[H],q+=!Y&&v(H)?z[ee]:Y||p(H));return q}(A)+'"';default:throw new s("impossible error: invalid scalar style")}}()}function w(M,A){var I=x(M)?String(A):"",$=M[M.length-1]===`
`;return I+($&&(M[M.length-2]===`
`||M===`
`)?"+":$?"":"-")+`
`}function _(M){return M[M.length-1]===`
`?M.slice(0,-1):M}function E(M,A){if(M===""||M[0]===" ")return M;for(var I,$,U=/ [^ ]/g,B=0,F=0,z=0,H="";I=U.exec(M);)(z=I.index)-B>A&&($=F>B?F:z,H+=`
`+M.slice(B,$),B=$+1),F=z;return H+=`
`,M.length-B>A&&F>B?H+=M.slice(B,F)+`
`+M.slice(F+1):H+=M.slice(B),H.slice(1)}function D(M,A,I){var $,U,B,F,z,H;for(B=0,F=(U=I?M.explicitTypes:M.implicitTypes).length;B<F;B+=1)if(((z=U[B]).instanceOf||z.predicate)&&(!z.instanceOf||typeof A=="object"&&A instanceof z.instanceOf)&&(!z.predicate||z.predicate(A))){if(M.tag=I?z.tag:"?",z.represent){if(H=M.styleMap[z.tag]||z.defaultStyle,o.call(z.represent)==="[object Function]")$=z.represent(A,H);else{if(!f.call(z.represent,H))throw new s("!<"+z.tag+'> tag resolver accepts not "'+H+'" style');$=z.represent[H](A,H)}M.dump=$}return!0}return!1}function b(M,A,I,$,U,B){M.tag=null,M.dump=I,D(M,I,!1)||D(M,I,!0);var F=o.call(M.dump);$&&($=M.flowLevel<0||M.flowLevel>A);var z,H,X=F==="[object Object]"||F==="[object Array]";if(X&&(H=(z=M.duplicates.indexOf(I))!==-1),(M.tag!==null&&M.tag!=="?"||H||M.indent!==2&&A>0)&&(U=!1),H&&M.usedDuplicates[z])M.dump="*ref_"+z;else{if(X&&H&&!M.usedDuplicates[z]&&(M.usedDuplicates[z]=!0),F==="[object Object]")$&&Object.keys(M.dump).length!==0?(function(q,ee,re,ie){var te,L,O,G,V,P,j="",W=q.tag,Z=Object.keys(re);if(q.sortKeys===!0)Z.sort();else if(typeof q.sortKeys=="function")Z.sort(q.sortKeys);else if(q.sortKeys)throw new s("sortKeys must be a boolean or a function");for(te=0,L=Z.length;te<L;te+=1)P="",ie&&te===0||(P+=m(q,ee)),G=re[O=Z[te]],b(q,ee+1,O,!0,!0,!0)&&((V=q.tag!==null&&q.tag!=="?"||q.dump&&q.dump.length>1024)&&(q.dump&&q.dump.charCodeAt(0)===10?P+="?":P+="? "),P+=q.dump,V&&(P+=m(q,ee)),b(q,ee+1,G,!0,V)&&(q.dump&&q.dump.charCodeAt(0)===10?P+=":":P+=": ",j+=P+=q.dump));q.tag=W,q.dump=j||"{}"}(M,A,M.dump,U),H&&(M.dump="&ref_"+z+M.dump)):(function(q,ee,re){var ie,te,L,O,G,V="",P=q.tag,j=Object.keys(re);for(ie=0,te=j.length;ie<te;ie+=1)G="",ie!==0&&(G+=", "),q.condenseFlow&&(G+='"'),O=re[L=j[ie]],b(q,ee,L,!1,!1)&&(q.dump.length>1024&&(G+="? "),G+=q.dump+(q.condenseFlow?'"':"")+":"+(q.condenseFlow?"":" "),b(q,ee,O,!1,!1)&&(V+=G+=q.dump));q.tag=P,q.dump="{"+V+"}"}(M,A,M.dump),H&&(M.dump="&ref_"+z+" "+M.dump));else if(F==="[object Array]"){var Y=M.noArrayIndent&&A>0?A-1:A;$&&M.dump.length!==0?(function(q,ee,re,ie){var te,L,O="",G=q.tag;for(te=0,L=re.length;te<L;te+=1)b(q,ee+1,re[te],!0,!0)&&(ie&&te===0||(O+=m(q,ee)),q.dump&&q.dump.charCodeAt(0)===10?O+="-":O+="- ",O+=q.dump);q.tag=G,q.dump=O||"[]"}(M,Y,M.dump,U),H&&(M.dump="&ref_"+z+M.dump)):(function(q,ee,re){var ie,te,L="",O=q.tag;for(ie=0,te=re.length;ie<te;ie+=1)b(q,ee,re[ie],!1,!1)&&(ie!==0&&(L+=","+(q.condenseFlow?"":" ")),L+=q.dump);q.tag=O,q.dump="["+L+"]"}(M,Y,M.dump),H&&(M.dump="&ref_"+z+" "+M.dump))}else{if(F!=="[object String]"){if(M.skipInvalid)return!1;throw new s("unacceptable kind of an object to dump "+F)}M.tag!=="?"&&T(M,M.dump,A,B)}M.tag!==null&&M.tag!=="?"&&(M.dump="!<"+M.tag+"> "+M.dump)}return!0}function N(M,A){var I,$,U=[],B=[];for(function F(z,H,X){var Y,q,ee;if(z!==null&&typeof z=="object")if((q=H.indexOf(z))!==-1)X.indexOf(q)===-1&&X.push(q);else if(H.push(z),Array.isArray(z))for(q=0,ee=z.length;q<ee;q+=1)F(z[q],H,X);else for(Y=Object.keys(z),q=0,ee=Y.length;q<ee;q+=1)F(z[Y[q]],H,X)}(M,U,B),I=0,$=B.length;I<$;I+=1)A.duplicates.push(U[B[I]]);A.usedDuplicates=new Array($)}function R(M,A){var I=new d(A=A||{});return I.noRefs||N(M,I),b(I,0,M,!0,!0)?I.dump+`
`:""}a.exports.dump=R,a.exports.safeDump=function(M,A){return R(M,i.extend({schema:c},A))}},function(a,n,r){r(31),r(32),r(33),r(64),r(19),r(65),r(20),r(68),r(92),r(144),r(22),r(94),r(23);var i,s=this&&this.__extends||(i=function(C,T){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,_){w.__proto__=_}||function(w,_){for(var E in _)_.hasOwnProperty(E)&&(w[E]=_[E])})(C,T)},function(C,T){function w(){this.constructor=C}i(C,T),C.prototype=T===null?Object.create(T):(w.prototype=T.prototype,new w)}),u=this&&this.__values||function(C){var T=typeof Symbol=="function"&&Symbol.iterator,w=T&&C[T],_=0;if(w)return w.call(C);if(C&&typeof C.length=="number")return{next:function(){return C&&_>=C.length&&(C=void 0),{value:C&&C[_++],done:!C}}};throw new TypeError(T?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(C,T){var w=typeof Symbol=="function"&&C[Symbol.iterator];if(!w)return C;var _,E,D=w.call(C),b=[];try{for(;(T===void 0||T-- >0)&&!(_=D.next()).done;)b.push(_.value)}catch(N){E={error:N}}finally{try{_&&!_.done&&(w=D.return)&&w.call(D)}finally{if(E)throw E.error}}return b};Object.defineProperty(n,"__esModule",{value:!0});var o=r(91),f=r(1),l=r(183),h=r(0),p=r(7),d=r(95),y=r(69),m=r(3),S=r(305),v=r(306),g=r(307),x=function(C){function T(w,_){_===void 0&&(_=!1);var E=C.call(this)||this;return E._hasDeclaration=!1,E._docTypeName="",E._hasDocumentElement=!1,E._currentElementSerialized=!1,E._openTags=[],E._ended=!1,E._fragment=_,E._options=f.applyDefaults(w||{},o.DefaultXMLBuilderCBOptions),E._builderOptions={defaultNamespace:E._options.defaultNamespace,namespaceAlias:E._options.namespaceAlias},E._options.format==="json"?E._writer=new v.JSONCBWriter(E._options):E._options.format==="yaml"?E._writer=new g.YAMLCBWriter(E._options):E._writer=new S.XMLCBWriter(E._options),E._options.data!==void 0&&E.on("data",E._options.data),E._options.end!==void 0&&E.on("end",E._options.end),E._options.error!==void 0&&E.on("error",E._options.error),E._prefixMap=new d.NamespacePrefixMap,E._prefixMap.set("xml",p.namespace.XML),E._prefixIndex={value:1},E._push(E._writer.frontMatter()),E}return s(T,C),T.prototype.ele=function(w,_,E){var D,b;if(f.isObject(w)||f.isString(w)&&(/^\s*</.test(w)||/^\s*[\{\[]/.test(w)||/^(\s*|(#.*)|(%.*))*---/.test(w))){var N=l.fragment().set(this._options);try{N.ele(w)}catch(I){return this.emit("error",I),this}try{for(var R=u(N.node.childNodes),M=R.next();!M.done;M=R.next()){var A=M.value;this._fromNode(A)}}catch(I){D={error:I}}finally{try{M&&!M.done&&(b=R.return)&&b.call(R)}finally{if(D)throw D.error}}return this}if(this._serializeOpenTag(!0),!this._fragment&&this._hasDocumentElement&&this._writer.level===0)return this.emit("error",new Error("Document cannot have multiple document element nodes.")),this;try{this._currentElement=l.fragment(this._builderOptions).ele(w,_,E)}catch(I){return this.emit("error",I),this}return this._fragment||this._hasDocumentElement||this._docTypeName===""||this._currentElement.node._qualifiedName===this._docTypeName?(this._currentElementSerialized=!1,this._fragment||(this._hasDocumentElement=!0),this):(this.emit("error",new Error("Document element name does not match DocType declaration name.")),this)},T.prototype.att=function(w,_,E){if(this._currentElement===void 0)return this.emit("error",new Error("Cannot insert an attribute node as child of a document node.")),this;try{this._currentElement.att(w,_,E)}catch(D){return this.emit("error",D),this}return this},T.prototype.com=function(w){var _;this._serializeOpenTag(!0);try{_=l.fragment(this._builderOptions).com(w).first().node}catch(E){return this.emit("error",E),this}return!this._options.wellFormed||h.xml_isLegalChar(_.data)&&_.data.indexOf("--")===-1&&!_.data.endsWith("-")?(this._push(this._writer.comment(_.data)),this):(this.emit("error",new Error("Comment data contains invalid characters (well-formed required).")),this)},T.prototype.txt=function(w){if(!this._fragment&&this._currentElement===void 0)return this.emit("error",new Error("Cannot insert a text node as child of a document node.")),this;var _;this._serializeOpenTag(!0);try{_=l.fragment(this._builderOptions).txt(w).first().node}catch(D){return this.emit("error",D),this}if(this._options.wellFormed&&!h.xml_isLegalChar(_.data))return this.emit("error",new Error("Text data contains invalid characters (well-formed required).")),this;var E=_.data.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this._push(this._writer.text(E)),this},T.prototype.ins=function(w,_){var E;_===void 0&&(_=""),this._serializeOpenTag(!0);try{E=l.fragment(this._builderOptions).ins(w,_).first().node}catch(D){return this.emit("error",D),this}return this._options.wellFormed&&(E.target.indexOf(":")!==-1||/^xml$/i.test(E.target))?(this.emit("error",new Error("Processing instruction target contains invalid characters (well-formed required).")),this):this._options.wellFormed&&!h.xml_isLegalChar(E.data)?(this.emit("error",Error("Processing instruction data contains invalid characters (well-formed required).")),this):(this._push(this._writer.instruction(E.target,E.data)),this)},T.prototype.dat=function(w){var _;this._serializeOpenTag(!0);try{_=l.fragment(this._builderOptions).dat(w).first().node}catch(E){return this.emit("error",E),this}return this._push(this._writer.cdata(_.data)),this},T.prototype.dec=function(w){return w===void 0&&(w={version:"1.0"}),this._fragment?(this.emit("error",Error("Cannot insert an XML declaration into a document fragment.")),this):this._hasDeclaration?(this.emit("error",Error("XML declaration is already inserted.")),this):(this._push(this._writer.declaration(w.version||"1.0",w.encoding,w.standalone)),this._hasDeclaration=!0,this)},T.prototype.dtd=function(w){if(this._fragment)return this.emit("error",Error("Cannot insert a DocType declaration into a document fragment.")),this;if(this._docTypeName!=="")return this.emit("error",new Error("DocType declaration is already inserted.")),this;if(this._hasDocumentElement)return this.emit("error",new Error("Cannot insert DocType declaration after document element.")),this;var _;try{_=l.create().dtd(w).first().node}catch(E){return this.emit("error",E),this}return this._options.wellFormed&&!h.xml_isPubidChar(_.publicId)?(this.emit("error",new Error("DocType public identifier does not match PubidChar construct (well-formed required).")),this):this._options.wellFormed&&(!h.xml_isLegalChar(_.systemId)||_.systemId.indexOf('"')!==-1&&_.systemId.indexOf("'")!==-1)?(this.emit("error",new Error("DocType system identifier contains invalid characters (well-formed required).")),this):(this._docTypeName=w.name,this._push(this._writer.docType(w.name,_.publicId,_.systemId)),this)},T.prototype.import=function(w){var _,E,D=l.fragment().set(this._options);try{D.import(w)}catch(M){return this.emit("error",M),this}try{for(var b=u(D.node.childNodes),N=b.next();!N.done;N=b.next()){var R=N.value;this._fromNode(R)}}catch(M){_={error:M}}finally{try{N&&!N.done&&(E=b.return)&&E.call(b)}finally{if(_)throw _.error}}return this},T.prototype.up=function(){return this._serializeOpenTag(!1),this._serializeCloseTag(),this},T.prototype.end=function(){for(this._serializeOpenTag(!1);this._openTags.length>0;)this._serializeCloseTag();return this._push(null),this},T.prototype._serializeOpenTag=function(w){if(!this._currentElementSerialized&&this._currentElement!==void 0){var _=this._currentElement.node;if(!this._options.wellFormed||_.localName.indexOf(":")===-1&&h.xml_isName(_.localName)){var E="",D=!1,b=this._prefixMap.copy(),N={},R=this._recordNamespaceInformation(_,b,N),M=this._openTags.length===0?null:this._openTags[this._openTags.length-1][1],A=_.namespaceURI;if(A===null&&(A=M),M===A)R!==null&&(D=!0),E=A===p.namespace.XML?"xml:"+_.localName:_.localName,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E));else{var I=_.prefix,$=null;if(I===null&&A===R||($=b.get(I,A)),I==="xmlns"){if(this._options.wellFormed)return void this.emit("error",new Error("An element cannot have the 'xmlns' prefix (well-formed required)."));$=I}$!==null?(E=$+":"+_.localName,R!==null&&R!==p.namespace.XML&&(M=R||null),this._writer.beginElement(E),this._push(this._writer.openTagBegin(E))):I!==null?(I in N&&(I=this._generatePrefix(A,b,this._prefixIndex)),b.set(I,A),E+=I+":"+_.localName,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E)),this._push(this._writer.attribute("xmlns:"+I,this._serializeAttributeValue(A,this._options.wellFormed))),R!==null&&(M=R||null)):R===null||R!==null&&R!==A?(D=!0,E+=_.localName,M=A,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E)),this._push(this._writer.attribute("xmlns",this._serializeAttributeValue(A,this._options.wellFormed)))):(E+=_.localName,M=A,this._writer.beginElement(E),this._push(this._writer.openTagBegin(E)))}this._serializeAttributes(_,b,this._prefixIndex,N,D,this._options.wellFormed);var U=A===p.namespace.HTML;U&&!w&&T._VoidElementNames.has(_.localName)?(this._push(this._writer.openTagEnd(E,!0,!0)),this._writer.endElement(E)):U||w?this._push(this._writer.openTagEnd(E,!1,!1)):(this._push(this._writer.openTagEnd(E,!0,!1)),this._writer.endElement(E)),this._currentElementSerialized=!0,this._openTags.push([E,M,this._prefixMap,w]),this._isPrefixMapModified(this._prefixMap,b)&&(this._prefixMap=b),this._writer.level++}else this.emit("error",new Error("Node local name contains invalid characters (well-formed required)."))}},T.prototype._serializeCloseTag=function(){this._writer.level--;var w=this._openTags.pop();if(w!==void 0){var _=c(w,4),E=_[0],D=(_[1],_[2]),b=_[3];this._prefixMap=D,b&&(this._push(this._writer.closeTag(E)),this._writer.endElement(E))}else this.emit("error",new Error("Last element is undefined."))},T.prototype._push=function(w){w===null?(this._ended=!0,this.emit("end")):this._ended?this.emit("error",new Error("Cannot push to ended stream.")):w.length!==0&&(this._writer.hasData=!0,this.emit("data",w,this._writer.level))},T.prototype._fromNode=function(w){var _,E,D,b;if(m.Guard.isElementNode(w)){var N=w.prefix?w.prefix+":"+w.localName:w.localName;w.namespaceURI!==null?this.ele(w.namespaceURI,N):this.ele(N);try{for(var R=u(w.attributes),M=R.next();!M.done;M=R.next()){var A=M.value,I=A.prefix?A.prefix+":"+A.localName:A.localName;A.namespaceURI!==null?this.att(A.namespaceURI,I,A.value):this.att(I,A.value)}}catch(F){_={error:F}}finally{try{M&&!M.done&&(E=R.return)&&E.call(R)}finally{if(_)throw _.error}}try{for(var $=u(w.childNodes),U=$.next();!U.done;U=$.next()){var B=U.value;this._fromNode(B)}}catch(F){D={error:F}}finally{try{U&&!U.done&&(b=$.return)&&b.call($)}finally{if(D)throw D.error}}this.up()}else m.Guard.isExclusiveTextNode(w)&&w.data?this.txt(w.data):m.Guard.isCommentNode(w)?this.com(w.data):m.Guard.isCDATASectionNode(w)?this.dat(w.data):m.Guard.isProcessingInstructionNode(w)&&this.ins(w.target,w.data)},T.prototype._serializeAttributes=function(w,_,E,D,b,N){var R,M,A=N?new y.LocalNameSet:void 0;try{for(var I=u(w.attributes),$=I.next();!$.done;$=I.next()){var U=$.value;if(N||b||U.namespaceURI!==null){if(N&&A&&A.has(U.namespaceURI,U.localName))return void this.emit("error",new Error("Element contains duplicate attributes (well-formed required)."));N&&A&&A.set(U.namespaceURI,U.localName);var B=U.namespaceURI,F=null;if(B!==null)if(F=_.get(U.prefix,B),B===p.namespace.XMLNS){if(U.value===p.namespace.XML||U.prefix===null&&b||U.prefix!==null&&(!(U.localName in D)||D[U.localName]!==U.value)&&_.has(U.localName,U.value))continue;if(N&&U.value===p.namespace.XMLNS)return void this.emit("error",new Error("XMLNS namespace is reserved (well-formed required)."));if(N&&U.value==="")return void this.emit("error",new Error("Namespace prefix declarations cannot be used to undeclare a namespace (well-formed required)."));U.prefix==="xmlns"&&(F="xmlns")}else F===null&&(F=U.prefix===null||_.hasPrefix(U.prefix)&&!_.has(U.prefix,B)?this._generatePrefix(B,_,E):U.prefix,this._push(this._writer.attribute("xmlns:"+F,this._serializeAttributeValue(B,this._options.wellFormed))));if(N&&(U.localName.indexOf(":")!==-1||!h.xml_isName(U.localName)||U.localName==="xmlns"&&B===null))return void this.emit("error",new Error("Attribute local name contains invalid characters (well-formed required)."));this._push(this._writer.attribute((F!==null?F+":":"")+U.localName,this._serializeAttributeValue(U.value,this._options.wellFormed)))}else this._push(this._writer.attribute(U.localName,this._serializeAttributeValue(U.value,this._options.wellFormed)))}}catch(z){R={error:z}}finally{try{$&&!$.done&&(M=I.return)&&M.call(I)}finally{if(R)throw R.error}}},T.prototype._serializeAttributeValue=function(w,_){return _&&w!==null&&!h.xml_isLegalChar(w)?(this.emit("error",new Error("Invalid characters in attribute value.")),""):w===null?"":w.replace(/(?!&(lt|gt|amp|apos|quot);)&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},T.prototype._recordNamespaceInformation=function(w,_,E){var D,b,N=null;try{for(var R=u(w.attributes),M=R.next();!M.done;M=R.next()){var A=M.value,I=A.namespaceURI,$=A.prefix;if(I===p.namespace.XMLNS){if($===null){N=A.value;continue}var U=A.localName,B=A.value;if(B===p.namespace.XML||(B===""&&(B=null),_.has(U,B)))continue;_.set(U,B),E[U]=B||""}}}catch(F){D={error:F}}finally{try{M&&!M.done&&(b=R.return)&&b.call(R)}finally{if(D)throw D.error}}return N},T.prototype._generatePrefix=function(w,_,E){var D="ns"+E.value;return E.value++,_.set(D,w),D},T.prototype._isPrefixMapModified=function(w,_){var E=w._items,D=_._items,b=w._nullItems,N=_._nullItems;for(var R in D){var M=E[R];if(M===void 0)return!0;var A=D[R];if(M.length!==A.length)return!0;for(var I=0;I<M.length;I++)if(M[I]!==A[I])return!0}if(b.length!==N.length)return!0;for(I=0;I<b.length;I++)if(b[I]!==N[I])return!0;return!1},T._VoidElementNames=new Set(["area","base","basefont","bgsound","br","col","embed","frame","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"]),T}(r(308).EventEmitter);n.XMLBuilderCBImpl=x},function(a,n,r){r(74);var i,s=this&&this.__extends||(i=function(c,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var h in l)l.hasOwnProperty(h)&&(f[h]=l[h])})(c,o)},function(c,o){function f(){this.constructor=c}i(c,o),c.prototype=o===null?Object.create(o):(f.prototype=o.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var u=function(c){function o(f){var l=c.call(this,f)||this;return l._lineLength=0,l}return s(o,c),o.prototype.frontMatter=function(){return""},o.prototype.declaration=function(f,l,h){var p=this._beginLine()+"<?xml";return p+=' version="'+f+'"',l!==void 0&&(p+=' encoding="'+l+'"'),h!==void 0&&(p+=' standalone="'+(h?"yes":"no")+'"'),p+="?>"},o.prototype.docType=function(f,l,h){var p=this._beginLine();return p+=l&&h?"<!DOCTYPE "+f+' PUBLIC "'+l+'" "'+h+'">':l?"<!DOCTYPE "+f+' PUBLIC "'+l+'">':h?"<!DOCTYPE "+f+' SYSTEM "'+h+'">':"<!DOCTYPE "+f+">"},o.prototype.comment=function(f){return this._beginLine()+"<!--"+f+"-->"},o.prototype.text=function(f){return this._beginLine()+f},o.prototype.instruction=function(f,l){return l?this._beginLine()+"<?"+f+" "+l+"?>":this._beginLine()+"<?"+f+"?>"},o.prototype.cdata=function(f){return this._beginLine()+"<![CDATA["+f+"]]>"},o.prototype.openTagBegin=function(f){return this._lineLength+=1+f.length,this._beginLine()+"<"+f},o.prototype.openTagEnd=function(f,l,h){return h?" />":l?this._writerOptions.allowEmptyTags?"></"+f+">":this._writerOptions.spaceBeforeSlash?" />":"/>":">"},o.prototype.closeTag=function(f){return this._beginLine()+"</"+f+">"},o.prototype.attribute=function(f,l){var h=f+'="'+l+'"';return this._writerOptions.prettyPrint&&this._writerOptions.width>0&&this._lineLength+1+h.length>this._writerOptions.width?(h=this._beginLine()+this._indent(1)+h,this._lineLength=h.length,h):(this._lineLength+=1+h.length," "+h)},o.prototype.beginElement=function(f){},o.prototype.endElement=function(f){},o.prototype._beginLine=function(){if(this._writerOptions.prettyPrint){var f=(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level);return this._lineLength=f.length,f}return""},o.prototype._indent=function(f){return f<=0?"":this._writerOptions.indent.repeat(f)},o}(r(114).BaseCBWriter);n.XMLCBWriter=u},function(a,n,r){r(74);var i,s=this&&this.__extends||(i=function(c,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var h in l)l.hasOwnProperty(h)&&(f[h]=l[h])})(c,o)},function(c,o){function f(){this.constructor=c}i(c,o),c.prototype=o===null?Object.create(o):(f.prototype=o.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var u=function(c){function o(f){var l=c.call(this,f)||this;return l._hasChildren=[],l._additionalLevel=0,l}return s(o,c),o.prototype.frontMatter=function(){return""},o.prototype.declaration=function(f,l,h){return""},o.prototype.docType=function(f,l,h){return""},o.prototype.comment=function(f){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.comment)+this._sep()+this._val(f)+this._sep()+"}"},o.prototype.text=function(f){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.text)+this._sep()+this._val(f)+this._sep()+"}"},o.prototype.instruction=function(f,l){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.ins)+this._sep()+this._val(l?f+" "+l:f)+this._sep()+"}"},o.prototype.cdata=function(f){return this._comma()+this._beginLine()+"{"+this._sep()+this._key(this._builderOptions.convert.cdata)+this._sep()+this._val(f)+this._sep()+"}"},o.prototype.attribute=function(f,l){return this._comma()+this._beginLine(1)+"{"+this._sep()+this._key(this._builderOptions.convert.att+f)+this._sep()+this._val(l)+this._sep()+"}"},o.prototype.openTagBegin=function(f){var l=this._comma()+this._beginLine()+"{"+this._sep()+this._key(f)+this._sep()+"{";return this._additionalLevel++,this.hasData=!0,l+=this._beginLine()+this._key(this._builderOptions.convert.text)+this._sep()+"[",this._hasChildren.push(!1),l},o.prototype.openTagEnd=function(f,l,h){if(l){var p=this._sep()+"]";return this._additionalLevel--,p+=this._beginLine()+"}"+this._sep()+"}"}return""},o.prototype.closeTag=function(f){var l=this._beginLine()+"]";return this._additionalLevel--,l+=this._beginLine()+"}"+this._sep()+"}"},o.prototype.beginElement=function(f){},o.prototype.endElement=function(f){this._hasChildren.pop()},o.prototype._beginLine=function(f){return f===void 0&&(f=0),this._writerOptions.prettyPrint?(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level+f):""},o.prototype._indent=function(f){return f+this._additionalLevel<=0?"":this._writerOptions.indent.repeat(f+this._additionalLevel)},o.prototype._comma=function(){var f=this._hasChildren[this._hasChildren.length-1]?",":"";return this._hasChildren.length>0&&(this._hasChildren[this._hasChildren.length-1]=!0),f},o.prototype._sep=function(){return this._writerOptions.prettyPrint?" ":""},o.prototype._key=function(f){return'"'+f+'":'},o.prototype._val=function(f){return JSON.stringify(f)},o}(r(114).BaseCBWriter);n.JSONCBWriter=u},function(a,n,r){r(74);var i,s=this&&this.__extends||(i=function(c,o){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,l){f.__proto__=l}||function(f,l){for(var h in l)l.hasOwnProperty(h)&&(f[h]=l[h])})(c,o)},function(c,o){function f(){this.constructor=c}i(c,o),c.prototype=o===null?Object.create(o):(f.prototype=o.prototype,new f)});Object.defineProperty(n,"__esModule",{value:!0});var u=function(c){function o(f){var l=c.call(this,f)||this;if(l._rootWritten=!1,l._additionalLevel=0,f.indent.length<2)throw new Error("YAML indententation string must be at least two characters long.");if(f.offset<0)throw new Error("YAML offset should be zero or a positive number.");return l}return s(o,c),o.prototype.frontMatter=function(){return this._beginLine()+"---"},o.prototype.declaration=function(f,l,h){return""},o.prototype.docType=function(f,l,h){return""},o.prototype.comment=function(f){return this._beginLine()+this._key(this._builderOptions.convert.comment)+" "+this._val(f)},o.prototype.text=function(f){return this._beginLine()+this._key(this._builderOptions.convert.text)+" "+this._val(f)},o.prototype.instruction=function(f,l){return this._beginLine()+this._key(this._builderOptions.convert.ins)+" "+this._val(l?f+" "+l:f)},o.prototype.cdata=function(f){return this._beginLine()+this._key(this._builderOptions.convert.cdata)+" "+this._val(f)},o.prototype.attribute=function(f,l){this._additionalLevel++;var h=this._beginLine()+this._key(this._builderOptions.convert.att+f)+" "+this._val(l);return this._additionalLevel--,h},o.prototype.openTagBegin=function(f){var l=this._beginLine()+this._key(f);return this._rootWritten||(this._rootWritten=!0),this.hasData=!0,this._additionalLevel++,l+=this._beginLine(!0)+this._key(this._builderOptions.convert.text)},o.prototype.openTagEnd=function(f,l,h){return l?" "+this._val(""):""},o.prototype.closeTag=function(f){return this._additionalLevel--,""},o.prototype.beginElement=function(f){},o.prototype.endElement=function(f){},o.prototype._beginLine=function(f){return f===void 0&&(f=!1),(this.hasData?this._writerOptions.newline:"")+this._indent(this._writerOptions.offset+this.level,f)},o.prototype._indent=function(f,l){if(f+this._additionalLevel<=0)return"";var h=this._writerOptions.indent.repeat(f+this._additionalLevel);return!l&&this._rootWritten?h.substr(0,h.length-2)+"-"+h.substr(-1,1):h},o.prototype._key=function(f){return'"'+f+'":'},o.prototype._val=function(f){return JSON.stringify(f)},o}(r(114).BaseCBWriter);n.YAMLCBWriter=u},function(a,n,r){var i,s=typeof Reflect=="object"?Reflect:null,u=s&&typeof s.apply=="function"?s.apply:function(g,x,C){return Function.prototype.apply.call(g,x,C)};i=s&&typeof s.ownKeys=="function"?s.ownKeys:Object.getOwnPropertySymbols?function(g){return Object.getOwnPropertyNames(g).concat(Object.getOwnPropertySymbols(g))}:function(g){return Object.getOwnPropertyNames(g)};var c=Number.isNaN||function(g){return g!=g};function o(){o.init.call(this)}a.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var f=10;function l(g){if(typeof g!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof g)}function h(g){return g._maxListeners===void 0?o.defaultMaxListeners:g._maxListeners}function p(g,x,C,T){var w,_,E,D;if(l(C),(_=g._events)===void 0?(_=g._events=Object.create(null),g._eventsCount=0):(_.newListener!==void 0&&(g.emit("newListener",x,C.listener?C.listener:C),_=g._events),E=_[x]),E===void 0)E=_[x]=C,++g._eventsCount;else if(typeof E=="function"?E=_[x]=T?[C,E]:[E,C]:T?E.unshift(C):E.push(C),(w=h(g))>0&&E.length>w&&!E.warned){E.warned=!0;var b=new Error("Possible EventEmitter memory leak detected. "+E.length+" "+String(x)+" listeners added. Use emitter.setMaxListeners() to increase limit");b.name="MaxListenersExceededWarning",b.emitter=g,b.type=x,b.count=E.length,D=b,console&&console.warn&&console.warn(D)}return g}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(g,x,C){var T={fired:!1,wrapFn:void 0,target:g,type:x,listener:C},w=d.bind(T);return w.listener=C,T.wrapFn=w,w}function m(g,x,C){var T=g._events;if(T===void 0)return[];var w=T[x];return w===void 0?[]:typeof w=="function"?C?[w.listener||w]:[w]:C?function(_){for(var E=new Array(_.length),D=0;D<E.length;++D)E[D]=_[D].listener||_[D];return E}(w):v(w,w.length)}function S(g){var x=this._events;if(x!==void 0){var C=x[g];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}function v(g,x){for(var C=new Array(x),T=0;T<x;++T)C[T]=g[T];return C}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(g){if(typeof g!="number"||g<0||c(g))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+g+".");f=g}}),o.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(g){if(typeof g!="number"||g<0||c(g))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+g+".");return this._maxListeners=g,this},o.prototype.getMaxListeners=function(){return h(this)},o.prototype.emit=function(g){for(var x=[],C=1;C<arguments.length;C++)x.push(arguments[C]);var T=g==="error",w=this._events;if(w!==void 0)T=T&&w.error===void 0;else if(!T)return!1;if(T){var _;if(x.length>0&&(_=x[0]),_ instanceof Error)throw _;var E=new Error("Unhandled error."+(_?" ("+_.message+")":""));throw E.context=_,E}var D=w[g];if(D===void 0)return!1;if(typeof D=="function")u(D,this,x);else{var b=D.length,N=v(D,b);for(C=0;C<b;++C)u(N[C],this,x)}return!0},o.prototype.addListener=function(g,x){return p(this,g,x,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(g,x){return p(this,g,x,!0)},o.prototype.once=function(g,x){return l(x),this.on(g,y(this,g,x)),this},o.prototype.prependOnceListener=function(g,x){return l(x),this.prependListener(g,y(this,g,x)),this},o.prototype.removeListener=function(g,x){var C,T,w,_,E;if(l(x),(T=this._events)===void 0)return this;if((C=T[g])===void 0)return this;if(C===x||C.listener===x)--this._eventsCount==0?this._events=Object.create(null):(delete T[g],T.removeListener&&this.emit("removeListener",g,C.listener||x));else if(typeof C!="function"){for(w=-1,_=C.length-1;_>=0;_--)if(C[_]===x||C[_].listener===x){E=C[_].listener,w=_;break}if(w<0)return this;w===0?C.shift():function(D,b){for(;b+1<D.length;b++)D[b]=D[b+1];D.pop()}(C,w),C.length===1&&(T[g]=C[0]),T.removeListener!==void 0&&this.emit("removeListener",g,E||x)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(g){var x,C,T;if((C=this._events)===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[g]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete C[g]),this;if(arguments.length===0){var w,_=Object.keys(C);for(T=0;T<_.length;++T)(w=_[T])!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(x=C[g])=="function")this.removeListener(g,x);else if(x!==void 0)for(T=x.length-1;T>=0;T--)this.removeListener(g,x[T]);return this},o.prototype.listeners=function(g){return m(this,g,!0)},o.prototype.rawListeners=function(g){return m(this,g,!1)},o.listenerCount=function(g,x){return typeof g.listenerCount=="function"?g.listenerCount(x):S.call(g,x)},o.prototype.listenerCount=S,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(a,n,r){Object.defineProperty(n,"__esModule",{value:!0});var i=r(77);n.createCB=function(s){return new i.XMLBuilderCBImpl(s)},n.fragmentCB=function(s){return new i.XMLBuilderCBImpl(s,!0)}}])})})(CC);function TC(t,e){e.classHierarchy.push("vtkStringArray"),t.getComponent=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.values[a*e.numberOfComponents+n]},t.setComponent=(a,n,r)=>{r!==e.values[a*e.numberOfComponents+n]&&(e.values[a*e.numberOfComponents+n]=r,t.modified())},t.getData=()=>e.values,t.getTuple=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=e.numberOfComponents||1;n.length&&(n.length=r);const i=a*r;for(let s=0;s<r;s++)n[s]=e.values[i+s];return n},t.getTupleLocation=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:1)*e.numberOfComponents},t.getNumberOfComponents=()=>e.numberOfComponents,t.getNumberOfValues=()=>e.values.length,t.getNumberOfTuples=()=>e.values.length/e.numberOfComponents,t.getDataType=()=>e.dataType,t.newClone=()=>bh({name:e.name,numberOfComponents:e.numberOfComponents}),t.getName=()=>(e.name||t.setName(`vtkStringArray${t.getMTime()}`),e.name),t.setData=(a,n)=>{e.values=a,e.size=a.length,n&&(e.numberOfComponents=n),e.size%e.numberOfComponents!==0&&(e.numberOfComponents=1),t.modified()}}const wC={name:"",numberOfComponents:1,size:0,dataType:"string"};function Dh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,wC,a),!e.empty&&!e.values&&!e.size)throw new TypeError("Cannot create vtkStringArray object without: size > 0, values");e.values?Array.isArray(e.values)&&(e.values=[...e.values]):e.values=[],e.values&&(e.size=e.values.length),k.obj(t,e),k.set(t,e,["name"]),TC(t,e)}const bh=k.newInstance(Dh,"vtkStringArray");var _C={newInstance:bh,extend:Dh};function EC(t,e){return[...t.getElementsByTagName(e)]}function Oh(t,e){return EC(t,e)[0]}function DC(t){return B0.create(t)}function bC(t){const e=/^\s*<AppendedData\s+encoding="raw">\s*_/m,a=/\n\s*<\/AppendedData>/m;return za.extractBinary(t,e,a)}const Vn={Int8:Int8Array,UInt8:Uint8Array,Int16:Int16Array,UInt16:Uint16Array,Int32:Int32Array,UInt32:Uint32Array,Int64:Int32Array,UInt64:Uint32Array,Float32:Float32Array,Float64:Float64Array},ja={Int8:1,UInt8:1,Int16:2,UInt16:2,Int32:4,UInt32:4,Int64:8,UInt64:8,Float32:4,Float64:8};function U0(t){const e=t.length-1;return t.filter((a,n)=>n<e&&n%2===0)}function G0(t,e,a){if(!["UInt64","UInt32"].includes(a))throw new Error(`Cannot handle a header type of ${a}`);let n=Vn[a],r=Vn[e],i=!1;a==="UInt64"&&(n=Vn.UInt32),/^U?Int64$/.test(e)&&(i=!0,r=Vn[e.replace("64","32")]);const{byteOffset:s}=t,u=ja[e],c=ja[a];let o;s%c===0?o=new n(t.buffer,s,1):o=new n(t.buffer.slice(s,s+c));const f=Number(o[0]);let l,h=f/u;i&&(h*=2);const p=s+c;return p%u===0?l=new r(t.buffer,p,h):l=new r(t.buffer.slice(p,p+f)),i&&(l=U0(l)),l}function OC(t,e){if(e==="UInt64"){let o=new Uint32Array(t.buffer,0,6);const f=o[0],l=o[2],h=o[4],p=[8,f,l,h];o=new Uint32Array(t.buffer,3*8,f*2);for(let d=0;d<f;d++)p.push(o[d*2]);return p}let a=new Uint32Array(t.buffer,0,3);const n=4,r=a[0],i=a[1],s=a[2],u=[n,r,i,s];a=new Uint32Array(t.buffer,3*4,r);for(let c=0;c<r;c++)u.push(a[c]);return u}function NC(t,e){const[a]=t;return(t.length-1)*a}function MC(t,e){const a=Qt(t);e.uint8.set(a,e.offset),e.offset+=a.length}function I0(t,e){const a=OC(t,e),n=a[1],r=a[2],i=a[3];let s=0;n>0&&(i===0?s=n*r:s=(n-1)*r+i);const u=new ArrayBuffer(s),c={offset:0,uint8:new Uint8Array(u)};let o=NC(a);for(;o<t.length&&t[o]!==120;)o++;for(let f=0;f<n;f++){const l=a[4+f],h=new Uint8Array(t.buffer,o,l);MC(h,c),o+=l}return c.uint8}function Wa(t,e,a,n,r,i){const s=e.getAttribute("type"),u=e.getAttribute("Name"),c=e.getAttribute("format"),o=Number(e.getAttribute("NumberOfComponents")||"1");let f=null;if(c==="ascii"){f=new Vn[s](t*o);let l=0;e.firstChild.nodeValue.split(/[\\t \\n]+/).forEach(h=>{h.trim().length&&(f[l++]=Number(h))})}else if(c==="binary"){const l=new Uint8Array(dr.toArrayBuffer(e.firstChild.nodeValue.trim()));if(a==="vtkZLibDataCompressor"){const h=I0(l,r);f=new Vn[s](h.buffer),/^U?Int64$/.test(s)&&(f=U0(f))}else f=new Vn[s](l.buffer,ja[r]),s.indexOf("Int64")!==-1&&(f=U0(f))}else if(c==="appended"){const l=Number(e.getAttribute("offset"));f=G0(new Uint8Array(i,l),s,r)}else console.error("Format not supported",c);return{name:u,values:f,numberOfComponents:o}}function P0(t){return new TextDecoder().decode(t).split("\0").slice(0,-1)}function RC(t,e,a,n,r){const i=t.getAttribute("Name"),s=t.getAttribute("format"),u=Number(t.getAttribute("NumberOfComponents")||"1"),o=Number(t.getAttribute("NumberOfTuples")||"1")*u,f=[];if(s==="ascii"){const l=t.firstChild.nodeValue.trim().split(/\s+/);let h=0;const p=[];for(;f.length<o;){const d=Number(l[h++]);d===0?(f.push(p.join("")),p.length=0):p.push(String.fromCharCode(d))}}else if(s==="binary"){const l=new Uint8Array(dr.toArrayBuffer(t.firstChild.nodeValue.trim()));if(e==="vtkZLibDataCompressor"){const h=I0(l,n);f.push(...P0(h))}else{const h=G0(l,"UInt8",n);f.push(...P0(h))}}else if(s==="appended"){const l=Number(t.getAttribute("offset")),h=G0(new Uint8Array(r,l),"UInt8",n);f.push(...P0(h))}else k.vtkErrorMacro(`Format not supported: ${s}`);return{name:i,values:f,numberOfComponents:u}}function LC(t,e,a,n,r,i){const s={},u=e.getElementsByTagName("DataArray");for(let d=0;d<u.length;d++){const y=u[d];s[y.getAttribute("Name")]=y}const c=Wa(t,s.offsets,a,n,r,i).values,o=c[c.length-1],f=Wa(o,s.connectivity,a,n,r,i).values,l=new Uint32Array(t+o);let h=0,p=0;return c.forEach(d=>{const y=d-p;l[h++]=y;for(let m=0;m<y;m++)l[h++]=f[p+m];p=d}),l}function kC(t,e,a,n,r,i,s){if(e){const u=["Scalars","Vectors","Normals","Tensors","TCoords"],c={};u.forEach(l=>{const h=e.getAttribute(l);h&&(c[h]=a[`set${l}`])});const o=e.getElementsByTagName("DataArray"),f=o.length;for(let l=0;l<f;l++){const h=o[l],p=pe.newInstance(Wa(t,h,n,r,i,s)),d=p.getName();(c[d]||a.addArray)(p)}}}function FC(t,e,a,n,r){const i=[...t.getElementsByTagName("DataArray")].map(u=>pe.newInstance(Wa(Number(u.getAttribute("NumberOfTuples")),u,e,a,n,r))),s=[...t.getElementsByTagName("Array")].filter(u=>u.getAttribute("type")==="String").map(u=>_C.newInstance(RC(u,e,a,n,r)));return[...i,...s]}function AC(t,e){e.classHierarchy.push("vtkXMLReader"),e.dataAccessHelper||(e.dataAccessHelper=jr.get("http"));function a(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.dataAccessHelper.fetchBinary(n,r)}t.setUrl=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e.url=n;const i=n.split("/");return i.pop(),e.baseURL=i.join("/"),t.loadData(r)},t.loadData=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return a(e.url,n).then(t.parseAsArrayBuffer)},t.parseAsArrayBuffer=n=>{if(!n)return!1;if(n!==e.rawDataBuffer)t.modified();else return!0;const{text:r,binaryBuffer:i}=bC(n);e.rawDataBuffer=n,e.binaryBuffer=i;const u=DC(r).root(),c=u.node,o=c.getAttribute("type"),f=c.getAttribute("compressor"),l=c.getAttribute("byte_order"),h=c.getAttribute("header_type")||"UInt32";if(f&&f!=="vtkZLibDataCompressor")return console.error("Invalid compressor",f),!1;if(l&&l!=="LittleEndian")return console.error("Only LittleEndian encoding is supported"),!1;if(o!==e.dataType)return console.error("Invalid data type",o,"expecting",e.dataType),!1;if(Oh(c,"AppendedData")){const y=Oh(c,"AppendedData"),m=y.getAttribute("encoding"),S=u.filter(w=>{const{node:_}=w;return _.nodeType===Node.ELEMENT_NODE&&_.getAttribute("format")==="appended"&&_.hasAttribute("offset")},!1,!0).map(w=>({node:w.node,offset:Number(w.node.getAttribute("offset"))}));S.sort((w,_)=>w.offset-_.offset);let v=e.binaryBuffer;m==="base64"&&(v=y.textContent.trim().substr(1));const g=[];for(let w=0;w<S.length;++w){const _=S[w].offset;let E=0;w===S.length-1?E=v.length||v.byteLength:E=S[w+1].offset,m==="base64"?g.push(new Uint8Array(dr.toArrayBuffer(v.substring(_,E)))):g.push(new Uint8Array(v.slice(_,E)))}if(f==="vtkZLibDataCompressor")for(let w=0;w<g.length;++w){const _=g[w],E=I0(_,h),D=new Uint8Array(E.length+ja[h]);new Vn[h](D.buffer,0,1)[0]=E.length,D.set(E,ja[h]),g[w]=D}const x=g.reduce((w,_)=>w+_.length,0),C=new ArrayBuffer(x),T=new Uint8Array(C);for(let w=0,_=0;w<g.length;++w)S[w].node.setAttribute("offset",_),T.set(g[w],_),_+=g[w].length;if(e.binaryBuffer=C,!e.binaryBuffer)return console.error("Processing appended data format: requires binaryBuffer to parse"),!1}t.parseXML(c,o,f,l,h);const d=c.getElementsByTagName(o)[0].getElementsByTagName("FieldData")[0];if(d){const y=FC(d,f,l,h,e.binaryBuffer);for(let m=0;m<e.output.length;m++){const S=e.output[m].getFieldData();for(let v=0;v<y.length;v++)S.addArray(y[v])}}return!0},t.requestData=(n,r)=>{t.parseAsArrayBuffer(e.rawDataBuffer)}}const VC={};function BC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VC,a),k.obj(t,e),k.get(t,e,["url","baseURL"]),k.setGet(t,e,["dataAccessHelper"]),k.algo(t,e,0,1),AC(t,e)}var Bn={extend:BC,processDataArray:Wa,processFieldData:kC,processCells:LC};function UC(t,e){e.classHierarchy.push("vtkXMLImageDataReader"),t.parseXML=(a,n,r,i,s)=>{var p;const u=a.getElementsByTagName(e.dataType)[0],c=u.getAttribute("Origin").split(" ").map(d=>Number(d)),o=u.getAttribute("Spacing").split(" ").map(d=>Number(d)),f=(p=u.getAttribute("Direction"))==null?void 0:p.split(" ").map(d=>Number(d)),l=u.getElementsByTagName("Piece"),h=l.length;for(let d=0;d<h;d++){const y=l[d],m=y.getAttribute("Extent").split(" ").map(v=>Number(v)),S=Ys.newInstance({origin:c,spacing:o,direction:f,extent:m});Bn.processFieldData(S.getNumberOfPoints(),y.getElementsByTagName("PointData")[0],S.getPointData(),r,i,s,e.binaryBuffer),Bn.processFieldData(S.getNumberOfCells(),y.getElementsByTagName("CellData")[0],S.getCellData(),r,i,s,e.binaryBuffer),e.output[d]=S}}}const GC={dataType:"ImageData"};function IC(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GC,a),Bn.extend(t,e,a),UC(t,e)}k.newInstance(IC,"vtkXMLImageDataReader");function PC(t,e,a,n,r,i,s){const u=Number(a.getAttribute(`NumberOf${e}`));if(u>0){const c=a.getElementsByTagName(e)[0].getElementsByTagName("DataArray")[0],{values:o,numberOfComponents:f}=Bn.processDataArray(u,c,n,r,i,s);t[`get${e}`]().setData(o,f)}return u}function zC(t,e,a,n,r,i,s){const u=Number(a.getAttribute(`NumberOf${e}`));if(u>0){const c=Bn.processCells(u,a.getElementsByTagName(e)[0],n,r,i,s);t[`get${e}`]().setData(c)}return u}function jC(t,e){e.classHierarchy.push("vtkXMLPolyDataReader"),t.parseXML=(a,n,r,i,s)=>{const c=a.getElementsByTagName(e.dataType)[0].getElementsByTagName("Piece"),o=c.length;for(let f=0;f<o;f++){const l=je.newInstance(),h=c[f],p=PC(l,"Points",h,r,i,s,e.binaryBuffer);let d=0;["Verts","Lines","Strips","Polys"].forEach(y=>{d+=zC(l,y,h,r,i,s,e.binaryBuffer)}),Bn.processFieldData(p,h.getElementsByTagName("PointData")[0],l.getPointData(),r,i,s,e.binaryBuffer),Bn.processFieldData(d,h.getElementsByTagName("CellData")[0],l.getCellData(),r,i,s,e.binaryBuffer),e.output[f]=l}}}const WC={dataType:"PolyData"};function $C(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WC,a),Bn.extend(t,e,a),jC(t,e)}k.newInstance($C,"vtkXMLPolyDataReader");const HC={props:{port:{type:Number,default:0},vtkClass:{type:String,default:"vtkConeSource"},state:{type:Object,default:()=>({})}},setup(t){const e=se.ref(null),a=se.inject("downstream"),n=se.inject("representation");se.provide("downstream",e),se.onMounted(()=>{e.value=xt({vtkClass:t.vtkClass,...t.state}),a.value.setInputConnection(e.value.getOutputPort(),t.port)}),se.onBeforeUnmount(()=>{e.value&&(e.value.delete(),e.value=null)}),se.watch(()=>t.vtkClass,r=>{e.value=xt({vtkClass:r,...t.state}),a.setInputConnection(e.value.getOutputPort(),t.port)}),se.watch(()=>t.state,r=>{e.value.set(r),n&&n.dataChanged()})},template:'<div :class="`vtk-algorithm-${vtkClass}`"><slot></slot></div>'},{vtkWarningMacro:po}=k;function KC(t,e){e.classHierarchy.push("vtkCalculator"),t.setFormula=a=>a===e.formula?!1:(e.formula=a,t.modified(),!0),t.getFormula=()=>e.formula,t.augmentInputArrays=(a,n)=>{const r=n.slice(0);return(a===ct.POINT||a===ct.VERTEX)&&r.push({location:ct.COORDINATE}),r},t.createSimpleFormulaObject=function(a,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return{getArrays:u=>({input:u[0].isA("vtkImageData")?n.map(c=>({location:a,name:c})):t.augmentInputArrays(a,n.map(c=>({location:a,name:c}))),output:[{location:a,name:r,attribute:"outputAttributeType"in s?s.outputAttributeType:gf.SCALARS,numberOfComponents:"numberOfOutputComponents"in s?s.numberOfOutputComponents:1}]}),evaluate:(u,c)=>{const o=new Array(u.length),f=u.map((y,m)=>{const S=y.getNumberOfComponents(),v=y.getData();return S===1?g=>v[g]:g=>y.getTuple(g,o[m])}),l=c[0],h=l.getData(),p=l.getNumberOfComponents();let d=new Array(p);if(p===1)h.forEach((y,m)=>{h[m]=i(...f.map(S=>S(m)),m,d)});else{const y=l.getNumberOfTuples();for(let m=0;m<y;++m)d=i(...f.map(S=>S(m)),m,d),l.setTuple(m,d)}}}},t.setFormulaSimple=function(a,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};return t.setFormula(t.createSimpleFormulaObject(a,n,r,i,s))},t.prepareArrays=(a,n,r)=>{const i=[],s=[];return a.input.forEach(u=>{if(u.location===ct.COORDINATE)i.push(n.getPoints());else{const c=[[ct.UNIFORM,f=>f.getFieldData()],[ct.POINT,f=>f.getPointData()],[ct.CELL,f=>f.getCellData()],[ct.VERTEX,f=>f.getVertexData()],[ct.EDGE,f=>f.getEdgeData()],[ct.ROW,f=>f.getRowData()]].reduce((f,l)=>(f[l[0]]=l[1],f),{}),o="location"in u&&u.location in c?c[u.location](n):null;o?u.name?i.push(o.getArrayByName(u.name)):"index"in u?i.push(o.getArrayByIndex(u.index)):"attribute"in u&&u.location!==ct.UNIFORM?i.push(o.getActiveAttribute(u.attribute)):(po(`No matching array for specifier "${JSON.stringify(u)}".`),i.push(null)):(po(`Specifier "${JSON.stringify(u)}" did not provide a usable location.`),i.push(null))}}),a.output.forEach(u=>{const c={...u},o="numberOfComponents"in c?c.numberOfComponents:1;if(u.location===ct.UNIFORM&&"tuples"in c&&(c.size=o*c.tuples),u.location===ct.COORDINATE){const f=n.getPoints(),l=vn.newInstance({dataType:f.getDataType()});l.setNumberOfPoints(f.getNumberOfPoints(),f.getNumberOfComponents()),r.setPoints(l),s.push(l)}else{const f=[[ct.UNIFORM,p=>p.getFieldData(),(p,d)=>"tuples"in d?d.tuples:0],[ct.POINT,p=>p.getPointData(),p=>p.getNumberOfPoints()],[ct.CELL,p=>p.getCellData(),p=>p.getNumberOfCells()],[ct.VERTEX,p=>p.getVertexData(),p=>p.getNumberOfVertices()],[ct.EDGE,p=>p.getEdgeData(),p=>p.getNumberOfEdges()],[ct.ROW,p=>p.getRowData(),p=>p.getNumberOfRows()]].reduce((p,d)=>(p[d[0]]={getData:d[1],getSize:d[2]},p),{});let l=null,h=0;if("location"in u&&u.location in f&&(l=f[u.location].getData(r),h=f[u.location].getSize(n,c)),h<=0)po(`Output array size could not be determined for ${JSON.stringify(u)}.`),s.push(null);else if(l){c.size=o*h;const p=pe.newInstance(c),d=l.addArray(p);"attribute"in c&&u.location!==ct.UNIFORM&&l.setActiveAttributeByIndex(d,c.attribute),s.push(p)}else po(`Specifier "${JSON.stringify(u)}" did not provide a usable location.`),s.push(null)}}),{arraysIn:i,arraysOut:s}},t.requestData=(a,n)=>{if(!e.formula)return 0;const r=e.formula.getArrays(a),i=xt({vtkClass:a[0].getClassName()});i.shallowCopy(a[0]),n[0]=i;const s=t.prepareArrays(r,a[0],n[0]);return e.formula.evaluate(s.arraysIn,s.arraysOut),1}}const XC={formula:{getArrays:()=>({input:[],output:[]}),evaluate:()=>null}};function Nh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,XC,a),k.obj(t,e),k.algo(t,e,1,1),KC(t,e)}var qC={newInstance:k.newInstance(Nh,"vtkCalculator"),extend:Nh};const{FieldDataTypes:Mh}=nr,YC={props:{port:{type:Number,default:0},name:{type:String,default:"scalars"},location:{type:String,default:"POINT"},arrays:{type:Array,default:()=>[]},formula:{type:Function,default:t=>t[0]}},setup(t){const e=se.ref(qC.newInstance()),a=se.inject("downstream");se.provide("downstream",e),se.onMounted(()=>{e.value.setFormulaSimple(Mh[t.location],t.arrays,t.name,t.formula),a.value.setInputConnection(e.value.getOutputPort(),t.port)}),se.onBeforeUnmount(()=>{e.value&&(e.value.delete(),e.value=null)}),se.onUpdated(()=>{e.value.setFormulaSimple(Mh[t.location],t.arrays,t.name,t.formula)})},template:'<div class="vtk-calculator"><slot></slot></div>'},Rh={setup(){const t=se.inject("dataset");se.provide("fields",t==null?void 0:t.getCellData())},template:'<div class="vtk-cell-data"><slot></slot></div>'},JC={int32:Int32Array,int16:Int16Array,int8:Int8Array,uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array,float32:Float32Array,float64:Float64Array};function Lh(t,e){if(!t)return null;if(Array.isArray(t))return e.from(t);if(t.dtype){const{bvals:a,dtype:n}=t,r=dr.toArrayBuffer(a);return new JC[n](r)}return t}const kh={props:{name:{type:String,default:"scalars"},registration:{type:String,default:"addArray"},type:{type:String,default:"Float32Array"},values:{type:[Array,Object,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]},numberOfComponents:{type:Number,default:1}},setup(t){const e=se.inject("dataset"),a=se.inject("fields"),n=se.inject("representation"),r=pe.newInstance({empty:!0}),i=ln(()=>{const f=St[t.type];r.setData(Lh(t.values,f),t.numberOfComponents),e&&e.modified(),n&&n.dataChanged()},1),{name:s,type:u,values:c,numberOfComponents:o}=se.toRefs(t);se.watch(s,r.setName),se.watch(u,i),se.watch(c,i),se.watch(o,i),se.onMounted(()=>{a&&a[t.registration](r),t.name&&r.setName(t.name),t.values&&(t.values.bvals||t.values.length)&&i()}),se.onBeforeUnmount(()=>{a&&a.removeArray(r),r.delete()}),se.provide("array",r)},template:'<div class="vtk-data-array" :name="name" />'},ZC={setup(){const t=se.inject("dataset");se.provide("fields",t==null?void 0:t.getFieldData())},template:'<div class="vtk-field-data"><slot></slot></div>'};var QC=[{Name:"KAAMS",IndexedColors:[1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,1,0,1,0,1,1,.63,.63,1,.67,.5,.33,1,.5,.75,.53,.35,.7,1,.75,.5],Annotations:[0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11]},{ColorSpace:"Diverging",Name:"Cool to Warm",NanColor:[1,1,0],RGBPoints:[0,.23137254902,.298039215686,.752941176471,.5,.865,.865,.865,1,.705882352941,.0156862745098,.149019607843]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Cool to Warm (Extended)",NanColor:[.25,0,0],RGBPoints:[0,0,0,.34902,.03125,.039216,.062745,.380392,.0625,.062745,.117647,.411765,.09375,.090196,.184314,.45098,.125,.12549,.262745,.501961,.15625,.160784,.337255,.541176,.1875,.2,.396078,.568627,.21875,.239216,.454902,.6,.25,.286275,.521569,.65098,.28125,.337255,.592157,.701961,.3125,.388235,.654902,.74902,.34375,.466667,.737255,.819608,.375,.572549,.819608,.878431,.40625,.654902,.866667,.909804,.4375,.752941,.917647,.941176,.46875,.823529,.956863,.968627,.5,.988235,.960784,.901961,.5,.941176,.984314,.988235,.52,.988235,.945098,.85098,.54,.980392,.898039,.784314,.5625,.968627,.835294,.698039,.59375,.94902,.733333,.588235,.625,.929412,.65098,.509804,.65625,.909804,.564706,.435294,.6875,.878431,.458824,.352941,.71875,.839216,.388235,.286275,.75,.760784,.294118,.211765,.78125,.701961,.211765,.168627,.8125,.65098,.156863,.129412,.84375,.6,.094118,.094118,.875,.54902,.066667,.098039,.90625,.501961,.05098,.12549,.9375,.45098,.054902,.172549,.96875,.4,.054902,.192157,1,.34902,.070588,.211765]},{ColorSpace:"Diverging",Name:"Warm to Cool",NanColor:[1,1,0],RGBPoints:[0,.705882352941,.0156862745098,.149019607843,.5,.865,.865,.865,1,.23137254902,.298039215686,.752941176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Warm to Cool (Extended)",NanColor:[.250004,0,0],RGBPoints:[0,.34902,0,.129412,.025,.4,.00392157,.101961,.05,.470588,.0156863,.0901961,.075,.54902,.027451,.0705882,.1,.619608,.0627451,.0431373,.125,.690196,.12549,.0627451,.15,.741176,.184314,.0745098,.175,.788235,.266667,.0941176,.2,.811765,.345098,.113725,.225,.831373,.411765,.133333,.25,.85098,.47451,.145098,.275,.870588,.54902,.156863,.3,.878431,.619608,.168627,.325,.890196,.658824,.196078,.35,.909804,.717647,.235294,.375,.929412,.776471,.278431,.395522,.94902,.823529,.321569,.418905,.968627,.87451,.407843,.444278,.980392,.917647,.509804,.470149,.988235,.956863,.643137,.483582,.992157,.964706,.713725,.499,.988235,.980392,.870588,.5,1,1,1,.501,.913725,.988235,.937255,.516418,.827451,.980392,.886275,.531343,.764706,.980392,.866667,.546766,.658824,.980392,.843137,.564179,.572549,.964706,.835294,.587562,.423529,.941176,.87451,.60597,.262745,.901961,.862745,.629851,.0705882,.854902,.870588,.651741,.0509804,.8,.85098,.681592,.0235294,.709804,.831373,.712935,.0313725,.615686,.811765,.75,.0313725,.537255,.788235,.775,.0392157,.466667,.768627,.8,.0509804,.396078,.741176,.825,.054902,.317647,.709804,.85,.054902,.243137,.678431,.875,.0431373,.164706,.639216,.9,.0313725,.0980392,.6,.925,.0392157,.0392157,.560784,.95,.105882,.0509804,.509804,.975,.113725,.0235294,.45098,1,.12549,0,.380392]},{ColorSpace:"RGB",Name:"Rainbow Desaturated",NanColor:[1,1,0],RGBPoints:[0,.278431372549,.278431372549,.858823529412,.143,0,0,.360784313725,.285,0,1,1,.429,0,.501960784314,0,.571,1,1,0,.714,1,.380392156863,0,.857,.419607843137,0,0,1,.878431372549,.301960784314,.301960784314]},{ColorSpace:"RGB",Name:"Cold and Hot",NanColor:[1,1,0],RGBPoints:[0,0,1,1,.45,0,0,1,.5,0,0,.501960784314,.55,1,0,0,1,1,1,0]},{ColorSpace:"RGB",Name:"Black-Body Radiation",NanColor:[0,.498039215686,1],RGBPoints:[0,0,0,0,.4,.901960784314,0,0,.8,.901960784314,.901960784314,0,1,1,1,1]},{ColorSpace:"RGB",Name:"X Ray",NanColor:[1,0,0],RGBPoints:[0,1,1,1,1,0,0,0]},{ColorSpace:"RGB",Name:"Grayscale",NanColor:[1,0,0],RGBPoints:[0,0,0,0,1,1,1,1]},{ColorSpace:"RGB",Name:"BkRd",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,1,0,0]},{ColorSpace:"RGB",Name:"BkGn",NanColor:[1,0,1],RGBPoints:[0,0,0,0,1,0,1,0]},{ColorSpace:"RGB",Name:"BkBu",NanColor:[1,1,0],RGBPoints:[0,0,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"BkMa",NanColor:[0,1,0],RGBPoints:[0,0,0,0,1,1,0,1]},{ColorSpace:"RGB",Name:"BkCy",NanColor:[0,1,1],RGBPoints:[0,0,0,0,1,0,1,1]},{ColorSpace:"RGB",Name:"Black, Blue and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,0,0,.501960784314,.666,0,.501960784314,1,1,1,1,1]},{ColorSpace:"RGB",Name:"Black, Orange and White",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.333,.501960784314,0,0,.666,1,.501960784314,0,1,1,1,1]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear YGB 1211g",NanColor:[.25,0,0],RGBPoints:[0,1,.988235,.968627,.02,1,.952941,.878431,.05,.968627,.905882,.776471,.1,.94902,.898039,.647059,.15,.901961,.878431,.556863,.2,.847059,.858824,.482353,.25,.690196,.819608,.435294,.3,.513725,.768627,.384314,.35,.337255,.721569,.337255,.4,.278431,.658824,.392157,.45,.231373,.639216,.435294,.5,.203922,.6,.486275,.55,.172549,.568627,.537255,.6,.141176,.517647,.54902,.65,.133333,.458824,.541176,.7,.12549,.396078,.529412,.75,.117647,.321569,.521569,.8,.121569,.258824,.509804,.85,.133333,.227451,.501961,.9,.145098,.192157,.490196,.95,.188235,.164706,.470588,1,.258824,.196078,.439216]},{ColorSpace:"CIELAB",Creator:"Francesca Samsel",Name:"Linear Green (Gr4L)",NanColor:[.25,0,0],RGBPoints:[0,.054902,.109804,.121569,.05,.07451,.172549,.180392,.1,.086275,.231373,.219608,.15,.094118,.278431,.25098,.2,.109804,.34902,.278431,.25,.113725,.4,.278431,.3,.117647,.45098,.270588,.35,.117647,.490196,.243137,.4,.113725,.521569,.203922,.45,.109804,.54902,.152941,.5,.082353,.588235,.082353,.55,.109804,.631373,.05098,.6,.211765,.678431,.082353,.65,.317647,.721569,.113725,.7,.431373,.760784,.160784,.75,.556863,.8,.239216,.8,.666667,.839216,.294118,.85,.784314,.878431,.396078,.9,.886275,.921569,.533333,.95,.960784,.94902,.670588,1,1,.984314,.901961]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Linear Blue (8_31f)",NanColor:[.25,0,0],RGBPoints:[0,.960784,1,.980392,.05,.815686,.960784,.913725,.1,.670588,.929412,.870588,.15,.556863,.901961,.843137,.2,.478431,.870588,.823529,.25,.439216,.831373,.803922,.3,.4,.8,.788235,.35,.376471,.768627,.768627,.4,.34902,.709804,.729412,.45,.32549,.654902,.690196,.5,.301961,.607843,.658824,.55,.247059,.545098,.619608,.6,.239216,.494118,.580392,.65,.227451,.439216,.541176,.7,.227451,.403922,.521569,.75,.231373,.368627,.501961,.8,.227451,.321569,.470588,.85,.219608,.282353,.439216,.9,.192157,.235294,.4,.95,.160784,.184314,.34902,1,.133333,.12549,.301961]},{ColorSpace:"HSV",Name:"Blue to Red Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,0,0,1,1,1,0,0]},{ColorSpace:"HSV",Name:"Red to Blue Rainbow",NanColor:[.498039215686,.498039215686,.498039215686],RGBPoints:[0,1,0,0,1,0,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended White",NanColor:[1,1,0],RGBPoints:[0,1,1,1,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Grey",NanColor:[1,1,0],RGBPoints:[0,.317647058824,.341176470588,.43137254902,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Rainbow Blended Black",NanColor:[1,1,0],RGBPoints:[0,0,0,0,.17,0,0,1,.34,0,1,1,.5,0,1,0,.67,1,1,0,.84,1,0,0,1,.878431372549,0,1]},{ColorSpace:"RGB",Name:"Blue to Yellow",NanColor:[1,0,0],RGBPoints:[0,.0392156862745,.0392156862745,.949019607843,1,.949019607843,.949019607843,.0392156862745]},{ColorSpace:"HSV",Name:"blot",RGBPoints:[0,0,0,1,.166,0,0,1,.167,1,0,1,.332,1,0,1,.333,0,1,1,.5,0,1,1,.501,0,1,0,.666,0,1,0,.667,1,1,0,.832,1,1,0,.833,1,0,0,1,1,0,0]},{ColorSpace:"Lab",Name:"CIELab Blue to Red",NanColor:[1,1,0],RGBPoints:[0,0,.6,.749019607843,1,.76862745098,.466666666667,.341176470588]},{ColorSpace:"RGB",Name:"jet",RGBPoints:[-1,0,0,.5625,-.777778,0,0,1,-.269841,0,1,1,-.015873,.5,1,.5,.238095,1,1,0,.746032,1,0,0,1,.5,0,0]},{ColorSpace:"RGB",Name:"rainbow",RGBPoints:[-1,0,0,1,-.5,0,1,1,0,0,1,0,.5,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"erdc_rainbow_bright",RGBPoints:[-1,.32549,.14902,.960784,-.866221,.297047,.375586,.963836,-.732441,.180302,.536818,.964627,-.598662,.1302,.649207,.929647,-.464883,.0445143,.749654,.855998,-.331104,.0271325,.830713,.721527,-.197324,.259504,.866145,.543555,-.0635452,.428364,.890725,.329819,.0702341,.568503,.898508,.187623,.204013,.738259,.890317,.0825461,.337793,.84546,.86136,.0147555,.471572,.912191,.808018,0,.605351,.962848,.710445,0,.73913,.999469,.600258,.0176284,.87291,.994156,.445975,.193912,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"erdc_rainbow_dark",RGBPoints:[-1,0,0,.423499,-.866221,0,.119346,.529237,-.732441,0,.238691,.634976,-.598662,0,.346852,.68788,-.464883,0,.45022,.718141,-.331104,0,.553554,.664839,-.197324,0,.651082,.519303,-.0635452,.115841,.72479,.352857,.0702341,.326771,.781195,.140187,.204013,.522765,.798524,.0284624,.337793,.703162,.788685,.00885756,.471572,.845118,.751133,0,.605351,.955734,.690825,0,.73913,.995402,.567916,.0618524,.87291,.987712,.403398,.164851,1,.980407,.247105,.262699]},{ColorSpace:"Lab",Name:"nic_CubicL",RGBPoints:[-1,.479965,.0118108,.5307,-.87451,.522213,.0551282,.706919,-.74902,.50839,.237278,.867764,-.623529,.451617,.373834,.987255,-.498039,.39365,.497255,.97506,-.372549,.328631,.599639,.891843,-.247059,.250043,.690286,.778553,-.121569,.249656,.764905,.645857,.00392157,.297954,.821466,.50449,.129412,.337509,.872595,.358447,.254902,.430011,.913789,.297079,.380392,.587191,.931381,.333353,.505882,.727937,.93591,.353742,.631373,.826403,.921081,.365066,.756863,.893201,.846317,.372662,.882353,.965347,.73884,.378506,1,.983235,.597451,.366856]},{ColorSpace:"Lab",Name:"nic_CubicYF",RGBPoints:[-1,.5151,.0482,.6697,-.87451,.520711,.168955,.800574,-.74902,.493694,.278596,.911824,-.623529,.440026,.369475,.984978,-.498039,.398932,.457593,.987053,-.372549,.350651,.540644,.929608,-.247059,.298827,.615625,.857729,-.121569,.239928,.685061,.769531,.00392157,.228832,.739349,.673287,.129412,.263297,.78608,.569988,.254902,.298107,.828337,.460214,.380392,.33092,.864071,.352674,.505882,.38306,.898169,.287309,.631373,.49023,.917481,.307961,.756863,.62372,.926026,.332309,.882353,.717458,.92527,.342476,1,.8,.9255,.3529]},{ColorSpace:"Lab",Name:"gist_earth",RGBPoints:[-1,0,0,0,-.87451,.239216,.027451,.415686,-.74902,.0901961,.254902,.556863,-.623529,.0941176,.352941,.54902,-.498039,.105882,.435294,.533333,-.372549,.12549,.52549,.501961,-.247059,.156863,.596078,.443137,-.121569,.196078,.65098,.380392,.00392157,.282353,.717647,.301961,.129412,.466667,.772549,.27451,.254902,.678431,.784314,.309804,.380392,.901961,.756863,.376471,.505882,.992157,.705882,.521569,.631373,1,.721569,.701961,.756863,1,.784314,.784314,.882353,1,.866667,.866667,1,1,1,1]},{ColorSpace:"Lab",Name:"2hot",RGBPoints:[-1,.0416667,0,0,-.873016,.208333,0,0,-.746032,.375,0,0,-.619048,.541667,0,0,-.492063,.708333,0,0,-.365079,.854137,0,0,-.238095,.937488,.039062,0,-.111111,1,.208333,0,.015873,1,.375,0,.142857,1,.541667,0,.269841,1,.708333,0,.396825,1,.858805,.03125,.52381,1,.947392,.15625,.650794,1,1,.3125,.777778,1,1,.5625,.904762,1,1,.8125,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_red2yellow_BW",RGBPoints:[-1,754296e-12,0,109827e-10,-.87451,.18285,.0264094,0,-.74902,.3066,0,0,-.623529,.422841,0,0,-.498039,.522945,0,0,-.372549,.605721,0,0,-.247059,.672502,.14168,0,-.121569,.728167,.244025,0,.00392157,.781215,.333454,0,.129412,.825,.423586,0,.254902,.855893,.516793,0,.380392,.880491,.608846,0,.505882,.910305,.695505,0,.631373,.94109,.779067,.223528,.756863,.967873,.858572,.473521,.882353,.986815,.933211,.751583,1,1,1,.999997]},{ColorSpace:"Lab",Name:"erdc_marine2gold_BW",RGBPoints:[-1,111641e-12,0,162551e-11,-.87451,.0413146,.0619808,.209857,-.74902,.0185557,.101341,.350684,-.623529,.00486405,.149847,.461054,-.498039,.0836345,.210845,.517906,-.372549,.173222,.276134,.541793,-.247059,.259857,.343877,.535869,-.121569,.362299,.408124,.504293,.00392157,.468266,.468276,.468257,.129412,.582781,.527545,.374914,.254902,.691591,.585251,.274266,.380392,.784454,.645091,.247332,.505882,.862299,.710383,.27518,.631373,.920863,.782923,.351563,.756863,.955792,.859699,.533541,.882353,.976162,.93433,.780671,1,1,1,.999983]},{ColorSpace:"Lab",Name:"erdc_blue2gold_BW",RGBPoints:[-1,0,0,0,-.87451,.0742735,.0440331,.230013,-.74902,.125276,.0258685,.415826,-.623529,.143879,.0163031,.591346,-.498039,.212261,.0627855,.705239,-.372549,.306048,.141178,.763636,-.247059,.391537,.232286,.773263,-.121569,.461734,.336633,.708321,.00392157,.54209,.427581,.590007,.129412,.61704,.508623,.460978,.254902,.702703,.579586,.309117,.380392,.790336,.644811,.170397,.505882,.870173,.710733,.117134,.631373,.93656,.781991,.157144,.756863,.965672,.862068,.409836,.882353,.985751,.936296,.714162,1,1,1,.999999]},{ColorSpace:"Lab",Name:"erdc_sapphire2gold_BW",RGBPoints:[-1,.107704,.107708,.107694,-.87451,.1851,.112354,.308554,-.74902,.236782,.114233,.48788,-.623529,.28296,.126187,.639464,-.498039,.344787,.171643,.739713,-.372549,.413325,.242371,.76913,-.247059,.481863,.3131,.719841,-.121569,.550402,.383829,.612222,.00392157,.61894,.454558,.51126,.129412,.687478,.525287,.39993,.254902,.756017,.596016,.289923,.380392,.824555,.666745,.255498,.505882,.892979,.736822,.27696,.631373,.938851,.804966,.351734,.756863,.966491,.874853,.53572,.882353,.982105,.94153,.782579,1,1,1,.999986]},{ColorSpace:"Lab",Name:"erdc_red2purple_BW",RGBPoints:[-1,0,0,0,-.87451,.167793,.0166271,.0431278,-.74902,.262608,.0107595,.0791181,-.623529,.351902,.0101858,.100926,-.498039,.441257,.0160835,.131919,-.372549,.5221,.0555972,.195625,-.247059,.593852,.104294,.310234,-.121569,.654628,.158115,.448486,.00392157,.707443,.220914,.570253,.129412,.749504,.293268,.67897,.254902,.781587,.370517,.779269,.380392,.809951,.451099,.855831,.505882,.84424,.531462,.900451,.631373,.865174,.620901,.91606,.756863,.875041,.714054,.910284,.882353,.880764,.80554,.896276,1,.887572,.887591,.887556]},{ColorSpace:"Lab",Name:"erdc_purple2pink_BW",RGBPoints:[-1,0,0,0,-.87451,.117562,.0291202,.175876,-.74902,.178368,.0458476,.285454,-.623529,.237731,.0680173,.387717,-.498039,.300877,.0956291,.484802,-.372549,.370929,.136858,.554985,-.247059,.449033,.189273,.58863,-.121569,.529971,.245796,.598587,.00392157,.609914,.300643,.610244,.129412,.697079,.351286,.616371,.254902,.785858,.401991,.617376,.380392,.862517,.45745,.64463,.505882,.91359,.525462,.705336,.631373,.932583,.61064,.767412,.756863,.922478,.706966,.817522,.882353,.901302,.803071,.856311,1,.887571,.887591,.887549]},{ColorSpace:"Lab",Name:"erdc_pbj_lin",RGBPoints:[-1,0,0,0,-.87451,.091821,.0611476,.10617,-.74902,.160311,.0900022,.192713,-.623529,.22484,.12126,.272128,-.498039,.291263,.157469,.340828,-.372549,.360015,.200388,.388903,-.247059,.437497,.250058,.387201,-.121569,.512636,.304969,.355955,.00392157,.582603,.360874,.33488,.129412,.655126,.416374,.306351,.254902,.725889,.473329,.279051,.380392,.778125,.537928,.302697,.505882,.815894,.606931,.382431,.631373,.839159,.679308,.497608,.756863,.854748,.751666,.631792,.882353,.869483,.822508,.768592,1,.887572,.887589,.887565]},{ColorSpace:"Lab",Name:"erdc_blue2green_muted",RGBPoints:[-1,.107704,.107708,.107695,-.87451,.141522,.13066,.270741,-.74902,.180123,.146119,.42308,-.623529,.210161,.169674,.551795,-.498039,.239701,.212939,.634969,-.372549,.253916,.282947,.653641,-.247059,.242791,.366933,.608521,-.121569,.226302,.446776,.52693,.00392157,.236237,.514689,.458798,.129412,.274641,.577589,.376069,.254902,.349625,.633993,.288131,.380392,.4437,.683677,.260497,.505882,.536247,.731214,.285424,.631373,.628472,.777128,.349151,.756863,.718259,.819287,.496825,.882353,.804768,.856164,.703299,1,.887571,.887591,.887548]},{ColorSpace:"Lab",Name:"erdc_blue2green_BW",RGBPoints:[-1,363578e-12,0,529374e-11,-.87451,.0539915,.0577948,.212806,-.74902,.0620393,.0758942,.388959,-.623529,.0697499,.102032,.54177,-.498039,.113295,.156156,.64334,-.372549,.152047,.243196,.670283,-.247059,.158096,.344084,.622864,-.121569,.151142,.43922,.532767,.00392157,.17155,.521588,.457719,.129412,.225861,.599141,.363997,.254902,.32328,.67007,.259083,.380392,.442344,.733697,.223754,.505882,.558409,.794941,.257411,.631373,.673875,.854344,.340822,.756863,.787244,.909326,.524717,.882353,.896483,.958063,.775914,1,1,1,.999982]},{ColorSpace:"Lab",Name:"GREEN-WHITE_LINEAR",RGBPoints:[-1,0,0,0,-.87451,0,.062745,0,-.74902,0,.12549,0,-.623529,0,.188235,0,-.498039,0,.25098,0,-.372549,0,.313725,0,-.247059,0,.376471,0,-.121569,.094118,.439216,0,.00392157,.196078,.501961,0,.129412,.294118,.564706,0,.254902,.396078,.627451,0,.380392,.498039,.690196,0,.505882,.6,.752941,.145098,.631373,.701961,.815686,.364706,.756863,.8,.878431,.580392,.882353,.901961,.941176,.796078,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_green2yellow_BW",RGBPoints:[-1,0,0,0,-.87451,0,.105542,.0603919,-.74902,0,.159454,.104148,-.623529,0,.219502,.15542,-.498039,0,.282276,.203811,-.372549,0,.346331,.235652,-.247059,0,.411765,.235428,-.121569,0,.477177,.217977,.00392157,.0593644,.541635,.21361,.129412,.233081,.604722,.210591,.254902,.369803,.664942,.226536,.380392,.498446,.722367,.288237,.505882,.601929,.782244,.380815,.631373,.703207,.840497,.512134,.756863,.803186,.896433,.674462,.882353,.903834,.950266,.846715,1,1,1,.999981]},{ColorSpace:"Lab",Name:"blue2cyan",RGBPoints:[-1,0,0,0,-.87451,0,.152941,.364706,-.74902,0,.254902,.470588,-.623529,0,.34902,.572549,-.498039,0,.443137,.670588,-.372549,0,.537255,.772549,-.247059,0,.627451,.870588,-.121569,0,.717647,.964706,.00392157,.0784314,.772549,1,.129412,.207843,.858824,1,.254902,.32549,.941176,1,.380392,.45098,1,1,.505882,.560784,1,1,.631373,.662745,1,1,.756863,.760784,1,1,.882353,.870588,1,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_blue2cyan_BW",RGBPoints:[-1,405298e-12,0,59012e-10,-.87451,.0207526,.0740933,.18093,-.74902,0,.121033,.30343,-.623529,0,.166892,.416095,-.498039,0,.216768,.524796,-.372549,.0164769,.275471,.608585,-.247059,.0544527,.344824,.659267,-.121569,.0880643,.419118,.688675,.00392157,.127938,.492556,.720256,.129412,.149476,.566946,.756918,.254902,.188961,.641333,.792122,.380392,.245482,.715336,.827609,.505882,.329216,.786235,.874761,.631373,.453558,.852803,.918466,.756863,.626281,.910493,.954,.882353,.82257,.958709,.980146,1,1,1,.999989]},{ColorSpace:"Lab",Name:"erdc_blue_BW",RGBPoints:[-1,0,0,0,-.87451,.0425591,.0763529,.150682,-.74902,.0569472,.119154,.275403,-.623529,.0635978,.164772,.395427,-.498039,.0774342,.213851,.510014,-.372549,.106815,.267034,.615102,-.247059,.122093,.324649,.720068,-.121569,.160851,.387068,.806956,.00392157,.213754,.453516,.878012,.129412,.26722,.524656,.932436,.254902,.326844,.599279,.968038,.380392,.403403,.674712,.984784,.505882,.499703,.745519,1,.631373,.615055,.813983,1,.756863,.74405,.879228,1,.882353,.877909,.941913,1,1,1,1,.999996]},{ColorSpace:"Lab",Name:"BLUE-WHITE",RGBPoints:[-1,0,0,0,-.87451,0,0,.082353,-.74902,0,0,.168627,-.623529,0,0,.254902,-.498039,0,0,.337255,-.372549,0,0,.423529,-.247059,0,0,.509804,-.121569,0,.101961,.592157,.00392157,0,.203922,.678431,.129412,0,.301961,.764706,.254902,0,.403922,.85098,.380392,0,.505882,.933333,.505882,0,.603922,1,.631373,.254902,.705882,1,.756863,.509804,.807843,1,.882353,.764706,.905882,1,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_purple_BW",RGBPoints:[-1,4264e-11,0,620844e-12,-.87451,.100579,.0593111,.145666,-.74902,.167794,.0889224,.254953,-.623529,.231446,.123339,.360511,-.498039,.296699,.163027,.461278,-.372549,.363211,.209286,.55306,-.247059,.431136,.260776,.637195,-.121569,.498202,.320012,.705799,.00392157,.567456,.380459,.778091,.129412,.629381,.445284,.8448,.254902,.688373,.517374,.895694,.380392,.74891,.590906,.93976,.505882,.805017,.667956,.977626,.631373,.850914,.752618,.992396,.756863,.89724,.838454,.994093,.882353,.948461,.922603,.994449,1,1,1,.999967]},{ColorSpace:"Lab",Name:"erdc_magenta_BW",RGBPoints:[-1,0,0,254023e-10,-.87451,.128696,.0456782,.11635,-.74902,.228133,.0476299,.201452,-.623529,.327273,.0374065,.282107,-.498039,.420953,.0408166,.35709,-.372549,.511562,.0642203,.430511,-.247059,.599552,.102686,.504257,-.121569,.684646,.150536,.579429,.00392157,.765817,.205978,.656062,.129412,.839176,.27229,.731807,.254902,.89536,.357594,.797309,.380392,.930238,.457825,.846984,.505882,.945921,.564536,.880571,.631373,.948995,.670753,.902279,.756863,.947124,.772819,.918171,.882353,.947265,.869424,.934352,1,.954719,.95475,.954726]},{ColorSpace:"Lab",Name:"magenta",RGBPoints:[-1,0,0,0,-.87451,.364706,0,.152941,-.74902,.470588,0,.254902,-.623529,.572549,0,.34902,-.498039,.670588,0,.443137,-.372549,.772549,0,.537255,-.247059,.870588,0,.627451,-.121569,.964706,0,.717647,.00392157,1,.0784314,.772549,.129412,1,.207843,.858824,.254902,1,.32549,.941176,.380392,1,.45098,1,.505882,1,.560784,1,.631373,1,.662745,1,.756863,1,.760784,1,.882353,1,.870588,1,1,1,1,1]},{ColorSpace:"Lab",Name:"RED-PURPLE",RGBPoints:[-1,0,0,0,-.87451,.188235,0,.007843,-.74902,.345098,0,.035294,-.623529,.439216,0,.098039,-.498039,.533333,0,.152941,-.372549,.627451,.015686,.211765,-.247059,.721569,.031373,.266667,-.121569,.8,.047059,.329412,.00392157,.862745,.047059,.403922,.129412,.941176,.062745,.466667,.254902,.988235,.078431,.54902,.380392,.988235,.141176,.643137,.505882,.988235,.25098,.729412,.631373,.988235,.376471,.811765,.756863,.988235,.54902,.886275,.882353,.988235,.752941,.952941,1,.996078,.996078,.996078]},{ColorSpace:"Lab",Name:"erdc_red_BW",RGBPoints:[-1,0,0,0,-.87451,.147204,.0480135,.0401815,-.74902,.253411,.0617478,.0301333,-.623529,.356059,.0746331,.0446897,-.498039,.457731,.0934935,.0636931,-.372549,.557199,.122714,.0860013,-.247059,.665179,.144238,.105585,-.121569,.763833,.187056,.138326,.00392157,.847035,.254558,.189407,.129412,.905663,.345937,.258215,.254902,.941431,.447111,.346277,.380392,.962608,.546927,.457571,.505882,.987833,.637276,.569944,.631373,.994202,.732176,.687958,.756863,.993304,.826268,.800567,.882353,.994413,.917205,.906393,1,1,1,.999979]},{ColorSpace:"Lab",Name:"RED_TEMPERATURE",RGBPoints:[-1,0,0,0,-.87451,.090196,0,0,-.74902,.180392,0,0,-.623529,.270588,0,0,-.498039,.360784,0,0,-.372549,.45098,0,0,-.247059,.545098,0,0,-.121569,.635294,0,0,.00392157,.72549,.058824,0,.129412,.815686,.176471,0,.254902,.905882,.294118,0,.380392,1,.411765,0,.505882,1,.533333,.027451,.631373,1,.65098,.27451,.756863,1,.768627,.521569,.882353,1,.886275,.768627,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_orange_BW",RGBPoints:[-1,0,0,253806e-10,-.87451,.135871,.0593824,0,-.74902,.224328,.0907216,0,-.623529,.318083,.119647,0,-.498039,.414443,.150246,0,-.372549,.511077,.184884,0,-.247059,.605501,.226033,0,-.121569,.695274,.275491,0,.00392157,.777826,.334445,0,.129412,.851498,.402441,0,.254902,.915899,.47759,602975e-9,.380392,.971984,.557882,.0361443,.505882,1,.641287,.135967,.631373,1,.725198,.27997,.756863,1,.808205,.438135,.882353,1,.89306,.587036,1,1,.977928,.721599]},{ColorSpace:"Lab",Name:"heated_object",RGBPoints:[-1,0,0,0,-.87451,.34902,.0862745,0,-.74902,.45098,.172549,0,-.623529,.52549,.231373,0,-.498039,.580392,.278431,0,-.372549,.623529,.313725,0,-.247059,.670588,.352941,0,-.121569,.717647,.392157,0,.00392157,.772549,.439216,0,.129412,.839216,.494118,0,.254902,.901961,.541176,0,.380392,.968627,.6,0,.505882,1,.658824,0,.631373,1,.721569,0,.756863,1,.827451,.298039,.882353,1,.976471,.72549,1,1,1,1]},{ColorSpace:"Lab",Name:"erdc_gold_BW",RGBPoints:[-1,0,0,190933e-10,-.87451,.128363,.0636265,0,-.74902,.193795,.111057,0,-.623529,.25976,.15987,0,-.498039,.328546,.210589,0,-.372549,.399726,.26332,0,-.247059,.472969,.318261,0,-.121569,.546245,.375827,0,.00392157,.61745,.436719,0,.129412,.685545,.501113,0,.254902,.749578,.568799,0,.380392,.80962,.6394,0,.505882,.865572,.712699,.10257,.631373,.917709,.787569,.233665,.756863,.966914,.863138,.369608,.882353,1,.939405,.496104,1,.999225,1,.612275]},{ColorSpace:"Lab",Name:"erdc_brown_BW",RGBPoints:[-1,33216e-11,0,483629e-11,-.87451,.14693,.0518172,0,-.74902,.225806,.0814996,0,-.623529,.301681,.111452,0,-.498039,.370487,.150664,0,-.372549,.43108,.199477,0,-.247059,.4849,.255107,0,-.121569,.536798,.313486,0,.00392157,.59286,.371167,0,.129412,.653119,.428135,0,.254902,.714589,.485917,.0379541,.380392,.774667,.54565,.116634,.505882,.831222,.608047,.183895,.631373,.880305,.674199,.260298,.756863,.922314,.742472,.367086,.882353,.959408,.811222,.497258,1,.993548,.875183,.622093]},{ColorSpace:"Lab",Name:"copper_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0784314,.0501961,.0313725,-.74902,.156863,.100392,.0627451,-.623529,.235294,.150588,.0941176,-.498039,.313725,.200784,.12549,-.372549,.392157,.25098,.156863,-.247059,.470588,.301176,.188235,-.121569,.54902,.351373,.219608,.00392157,.627451,.401569,.25098,.129412,.705882,.451765,.282353,.254902,.784314,.501961,.313725,.380392,.862745,.552157,.345098,.505882,.941176,.602353,.376471,.631373,1,.652549,.407843,.756863,1,.702745,.439216,.882353,1,.752941,.470588,1,1,.8,.5]},{ColorSpace:"Lab",Name:"pink_Matlab",RGBPoints:[-1,0,0,0,-.87451,.312416,.204524,.204524,-.74902,.441822,.289241,.289241,-.623529,.54112,.354246,.354246,-.498039,.624831,.409048,.409048,-.372549,.698582,.45733,.45733,-.247059,.764404,.502282,.500979,-.121569,.791292,.591516,.54112,.00392157,.817297,.66895,.578481,.129412,.842499,.738308,.613572,.254902,.866968,.801687,.646762,.380392,.890766,.86041,.678329,.505882,.913944,.913944,.711254,.631373,.936549,.936549,.79459,.756863,.958621,.958621,.869979,.882353,.980196,.980196,.939336,1,1,1,1]},{ColorSpace:"Lab",Name:"bone_Matlab",RGBPoints:[-1,0,0,0,-.87451,.054902,.054902,.075817,-.74902,.109804,.109804,.151634,-.623529,.164706,.164706,.227451,-.498039,.219608,.219608,.303268,-.372549,.27451,.27451,.379085,-.247059,.329412,.329902,.454412,-.121569,.384314,.405719,.509314,.00392157,.439216,.481536,.564216,.129412,.494118,.557353,.619118,.254902,.54902,.63317,.67402,.380392,.603922,.708987,.728922,.505882,.660294,.783824,.783824,.631373,.746569,.838725,.838725,.756863,.832843,.893627,.893627,.882353,.919118,.948529,.948529,1,1,1,1]},{ColorSpace:"Lab",Name:"gray_Matlab",RGBPoints:[-1,0,0,0,-.87451,.0627451,.0627451,.0627451,-.74902,.12549,.12549,.12549,-.623529,.188235,.188235,.188235,-.498039,.25098,.25098,.25098,-.372549,.313725,.313725,.313725,-.247059,.376471,.376471,.376471,-.121569,.439216,.439216,.439216,.00392157,.501961,.501961,.501961,.129412,.564706,.564706,.564706,.254902,.627451,.627451,.627451,.380392,.690196,.690196,.690196,.505882,.752941,.752941,.752941,.631373,.815686,.815686,.815686,.756863,.878431,.878431,.878431,.882353,.941176,.941176,.941176,1,1,1,1]},{ColorSpace:"Lab",Name:"Purples",RGBPoints:[-1,.247059,0,.490196,-.87451,.288397,.07677,.525629,-.74902,.32975,.153587,.561092,-.623529,.373057,.236263,.600461,-.498039,.416363,.319,.639923,-.372549,.459669,.405613,.685198,-.247059,.503345,.491534,.730058,-.121569,.562399,.54862,.757616,.00392157,.621453,.606075,.785544,.129412,.680508,.674971,.824914,.254902,.739562,.743406,.863899,.380392,.798616,.800492,.893426,.505882,.85684,.856655,.922491,.631373,.898178,.894056,.942176,.756863,.938654,.930919,.961646,.882353,.964245,.958478,.977393,1,.988235,.984314,.992157]},{ColorSpace:"Lab",Name:"Blues",RGBPoints:[-1,.031373,.188235,.419608,-.87451,.031373,.253195,.516063,-.74902,.031757,.318139,.612149,-.623529,.080969,.38113,.661361,-.498039,.130427,.444152,.710327,-.372549,.195386,.509112,.743791,-.247059,.260715,.573841,.777209,-.121569,.341423,.628958,.808704,.00392157,.422745,.684075,.839892,.129412,.523137,.739193,.861546,.254902,.622684,.793464,.883429,.380392,.701423,.826928,.910988,.505882,.778685,.8603,.937993,.631373,.825928,.891795,.953741,.756863,.87328,.923291,.969489,.882353,.922491,.954787,.985236,1,.968627,.984314,1]},{ColorSpace:"Lab",Name:"Greens",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546082,.271326,-.372549,.197232,.609073,.31857,-.247059,.257255,.671742,.365859,-.121569,.357647,.720953,.415071,.00392157,.45767,.769919,.465021,.129412,.546251,.811257,.537855,.254902,.634295,.852211,.610688,.380392,.709097,.883706,.683522,.505882,.78316,.914833,.755894,.631373,.842215,.938454,.818885,.756863,.899977,.961538,.880692,.882353,.935409,.975317,.92203,1,.968627,.988235,.960784]},{ColorSpace:"Lab",Name:"PuBu",RGBPoints:[-1,.301961,0,.294118,-.87451,.404321,.029527,.390573,-.74902,.50599,.059592,.486782,-.623529,.519769,.158016,.551742,-.498039,.533456,.256194,.616301,-.372549,.54133,.33887,.655671,-.247059,.54902,.421592,.695087,-.121569,.54902,.506236,.736424,.00392157,.550127,.590573,.777701,.129412,.585559,.665375,.81707,.254902,.622145,.739023,.855825,.380392,.687105,.784298,.879446,.505882,.752065,.829758,.903253,.631373,.817024,.87897,.930811,.756863,.880907,.927213,.957832,.882353,.926182,.958708,.975548,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"BuPu",RGBPoints:[-1,.007843,.219608,.345098,-.87451,.01178,.286536,.449427,-.74902,.015702,.35328,.553479,-.623529,.01767,.396586,.622376,-.498039,.021115,.4402,.690688,-.372549,.11757,.503191,.722184,-.247059,.214625,.565859,.753633,-.121569,.336671,.615071,.78316,.00392157,.457978,.663975,.812503,.129412,.556401,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821638,.903068,.631373,.873387,.864944,.92669,.756863,.927536,.907605,.949988,.882353,.964937,.9391,.967705,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGn",RGBPoints:[-1,.031373,.25098,.505882,-.87451,.031373,.329719,.590527,-.74902,.031911,.408397,.674787,-.623529,.100807,.479262,.710219,-.498039,.169704,.550219,.745744,-.372549,.238601,.62699,.787082,-.247059,.307958,.703114,.826759,-.121569,.39654,.752326,.797232,.00392157,.485121,.801046,.767705,.129412,.573702,.83451,.738178,.254902,.661592,.867743,.711034,.380392,.732457,.895302,.74253,.505882,.801845,.922307,.774579,.631373,.841215,.938055,.817885,.756863,.880907,.95391,.861084,.882353,.926182,.971626,.902422,1,.968627,.988235,.941176]},{ColorSpace:"Lab",Name:"GnBu",RGBPoints:[-1,0,.266667,.105882,-.87451,0,.347374,.139346,-.74902,538e-6,.427912,.172933,-.623529,.069435,.486967,.222145,-.498039,.138178,.546175,.272095,-.372549,.197232,.615071,.368551,-.247059,.256609,.683276,.464867,-.121569,.329443,.722645,.555417,.00392157,.403137,.762138,.645413,.129412,.503529,.805444,.718247,.254902,.603922,.848597,.790465,.380392,.704314,.887966,.847551,.505882,.802307,.926321,.903714,.631373,.851519,.944037,.941115,.756863,.899977,.961538,.976901,.882353,.935409,.975317,.984775,1,.968627,.988235,.992157]},{ColorSpace:"Lab",Name:"GnBuPu",RGBPoints:[-1,.003922,.27451,.211765,-.87451,.003922,.349312,.280661,-.74902,.003937,.423852,.349773,-.623529,.005905,.46519,.446228,-.498039,.009443,.506344,.542837,-.372549,.111803,.535871,.649135,-.247059,.214025,.565859,.753633,-.121569,.310481,.615071,.78316,.00392157,.407797,.663975,.812503,.129412,.531811,.703345,.836125,.254902,.65421,.742714,.859669,.380392,.736886,.782084,.881323,.505882,.81827,.821176,.902884,.631373,.873387,.854641,.922568,.756863,.927536,.888535,.942361,.882353,.964937,.929873,.964014,1,1,.968627,.984314]},{ColorSpace:"Lab",Name:"BuGnYl",RGBPoints:[-1,.031373,.113725,.345098,-.87451,.088458,.159,.463206,-.74902,.145052,.204567,.5807,-.623529,.139146,.287243,.620069,-.498039,.13318,.370196,.659562,-.372549,.123337,.470588,.706805,-.247059,.115386,.570335,.753126,-.121569,.186251,.643168,.761,.00392157,.258716,.71514,.768074,.129412,.380761,.760415,.750358,.254902,.503576,.806075,.732795,.380392,.645306,.861192,.719016,.505882,.783899,.91511,.705606,.631373,.858701,.944637,.6997,.756863,.931349,.973303,.698424,.882353,.966782,.987082,.777163,1,1,1,.85098]},{ColorSpace:"Lab",Name:"PuRd",RGBPoints:[-1,.286275,0,.415686,-.87451,.38273,.001968,.441276,-.74902,.479231,.003922,.466774,-.623529,.581592,.003922,.480554,-.498039,.683799,.00549,.494887,-.372549,.776317,.105882,.544098,-.247059,.867866,.206321,.592618,-.121569,.919047,.308681,.612303,.00392157,.968812,.411226,.632603,.129412,.974717,.519493,.671972,.254902,.980546,.626451,.71065,.380392,.984483,.701253,.732303,.505882,.988328,.77504,.755617,.631373,.990296,.828189,.812703,.756863,.992372,.880907,.869035,.882353,.996309,.926182,.912341,1,1,.968627,.952941]},{ColorSpace:"Lab",Name:"RdPu",RGBPoints:[-1,.403922,0,.121569,-.87451,.500377,0,.192434,-.74902,.596909,277e-6,.263037,-.623529,.703206,.035709,.300438,-.498039,.808612,.071296,.338854,-.372549,.857824,.116571,.441215,-.247059,.905513,.163552,.54293,-.121569,.889765,.281661,.617732,.00392157,.873156,.39897,.691611,.129412,.82985,.491488,.736886,.254902,.789081,.583237,.781853,.380392,.810734,.656071,.819254,.505882,.833126,.729181,.85684,.631373,.870527,.80792,.898178,.756863,.907605,.884398,.938331,.882353,.9391,.921799,.958016,1,.968627,.956863,.976471]},{ColorSpace:"Lab",Name:"Oranges",RGBPoints:[-1,.498039,.152941,.015686,-.87451,.57481,.182468,.013718,-.74902,.651765,.212042,.011734,-.623529,.752157,.247474,.007797,-.498039,.851719,.283368,.004475,-.372549,.898962,.348328,.039908,-.247059,.945652,.413426,.076401,-.121569,.969273,.484291,.157109,.00392157,.992157,.554971,.238185,.129412,.992157,.619931,.330704,.254902,.992157,.684967,.423837,.380392,.992157,.751895,.532103,.505882,.992249,.817716,.639354,.631373,.994218,.861023,.725967,.756863,.996186,.903576,.810965,.882353,.998155,.933103,.868051,1,1,.960784,.921569]},{ColorSpace:"Lab",Name:"Reds",RGBPoints:[-1,.403922,0,.05098,-.87451,.525967,.029527,.066728,-.74902,.647643,.058962,.082476,-.623529,.722445,.076678,.098224,-.498039,.797186,.095194,.114187,-.372549,.868051,.164091,.143714,-.247059,.937809,.233541,.173933,-.121569,.96143,.326059,.232987,.00392157,.984375,.418147,.292657,.129412,.986344,.496886,.371396,.254902,.988235,.575702,.450673,.380392,.988235,.656409,.543191,.505882,.98842,.736747,.635894,.631373,.992357,.809581,.732349,.756863,.996186,.880692,.826759,.882353,.998155,.92203,.885813,1,1,.960784,.941176]},{ColorSpace:"Lab",Name:"RdOr",RGBPoints:[-1,.498039,0,0,-.87451,.6004,0,0,-.74902,.702514,738e-6,477e-6,-.623529,.773379,.095225,.061499,-.498039,.843875,.189865,.12283,-.372549,.891119,.294195,.203537,-.247059,.937855,.397924,.283137,-.121569,.963445,.476663,.316601,.00392157,.988297,.555771,.351665,.129412,.990265,.646321,.436309,.254902,.992157,.735256,.519646,.380392,.992157,.784468,.570827,.505882,.992249,.833218,.623483,.631373,.994218,.872587,.706159,.756863,.996186,.911419,.788189,.882353,.998155,.940946,.859054,1,1,.968627,.92549]},{ColorSpace:"Lab",Name:"BrOrYl",RGBPoints:[-1,.4,.145098,.023529,-.87451,.500392,.174625,.019592,-.74902,.600784,.204291,.015656,-.623529,.701176,.251534,.011719,-.498039,.800984,.299146,.008397,-.372549,.863975,.370012,.043829,-.247059,.926321,.441107,.0794,-.121569,.961753,.521815,.120738,.00392157,.996078,.602645,.163122,.129412,.996078,.68729,.237924,.254902,.996078,.771011,.314879,.380392,.996078,.832034,.444798,.505882,.996171,.892042,.572595,.631373,.998139,.931411,.65724,.756863,1,.969489,.741669,.882353,1,.985236,.822376,1,1,1,.898039]},{ColorSpace:"Lab",Name:"RdOrYl",RGBPoints:[-1,.501961,0,.14902,-.87451,.622038,0,.14902,-.74902,.741761,4e-4,.148866,-.623529,.816563,.05158,.129181,-.498039,.890965,.10356,.110235,-.372549,.940177,.205921,.137793,-.247059,.988281,.308789,.165536,-.121569,.99025,.432803,.200969,.00392157,.992218,.555217,.236278,.129412,.994187,.628051,.267774,.254902,.996078,.701038,.301269,.380392,.996078,.777809,.383945,.505882,.996171,.852826,.466621,.631373,.998139,.892195,.549296,.756863,1,.931349,.632188,.882353,1,.966782,.7188,1,1,1,.8]},{ColorSpace:"Lab",Name:"CIELab_blue2red",RGBPoints:[-1,0,.6,.74902,1,.76863,.46667,.34118]},{ColorSpace:"Lab",Name:"blue2yellow",RGBPoints:[-1,0,0,1,0,.5,.5,.5,1,1,1,0]},{ColorSpace:"Lab",Name:"erdc_blue2gold",RGBPoints:[-1,.175119,.0438468,1,-.874016,.22383,.159771,.94557,-.748031,.27254,.233611,.891216,-.622047,.321251,.296526,.836857,-.496063,.369962,.354296,.782359,-.370079,.418672,.409139,.72754,-.244094,.467383,.462152,.672148,-.11811,.51609,.51396,.615825,.00787402,.572863,.55452,.559172,.133858,.630269,.593822,.517729,.259843,.689588,.624668,.47446,.385827,.745394,.656113,.428638,.511811,.798624,.688104,.379105,.637795,.849926,.720593,.323834,.76378,.899765,.753543,.258657,.889764,.948487,.78692,.171778,1,.990413,.816451,.00729848]},{ColorSpace:"Lab",Name:"erdc_blue2yellow",RGBPoints:[-1,.0830122,0,.495617,-.87451,.141973,.0551288,.57363,-.74902,.193048,.110258,.604561,-.623529,.234231,.165386,.57643,-.498039,.275413,.220515,.548299,-.372549,.316596,.275644,.520169,-.247059,.357778,.330773,.492038,-.121569,.398961,.385901,.463908,.00392157,.449929,.438487,.426815,.129412,.511572,.488299,.379944,.254902,.581222,.53603,.325741,.380392,.650871,.583761,.271538,.505882,.720521,.631493,.217335,.631373,.79017,.679224,.163132,.756863,.85982,.726955,.108929,.882353,.910254,.774159,.14112,1,.927513,.81759,.306289]},{ColorSpace:"Lab",Name:"erdc_cyan2orange",RGBPoints:[-1,.0471513,.213874,.414329,-.87451,.0674702,.256648,.439027,-.74902,.0959957,.299331,.462089,-.623529,.132428,.341872,.483212,-.498039,.188743,.38277,.500597,-.372549,.268511,.420229,.512179,-.247059,.352945,.455602,.519101,-.121569,.43893,.489368,.521538,.00392157,.522445,.522495,.522436,.129412,.600089,.555682,.53205,.254902,.67988,.587981,.539163,.380392,.761011,.619586,.544439,.505882,.84278,.650741,.548567,.631373,.910713,.687347,.557822,.756863,.952232,.734972,.577775,.882353,.975642,.789858,.604868,1,.990752,.843643,.632857]},{ColorSpace:"Lab",Name:"erdc_purple2green",RGBPoints:[-1,.235006,.0483128,.530899,-.87451,.302968,.108419,.552391,-.74902,.360241,.166059,.569502,-.623529,.406746,.226782,.579373,-.498039,.444073,.28964,.582094,-.372549,.473648,.353774,.577947,-.247059,.497636,.418154,.567911,-.121569,.519086,.481741,.553968,.00392157,.542884,.542914,.542875,.129412,.566303,.603989,.527499,.254902,.595218,.662965,.516857,.380392,.628641,.720701,.510673,.505882,.665373,.777849,.508165,.631373,.704182,.834921,.508303,.756863,.743846,.892328,.50999,.882353,.783158,.950422,.512181,1,.818617,1,.513888]},{ColorSpace:"Lab",Name:"erdc_purple2green_dark",RGBPoints:[-1,.107656,0,.428682,-.87451,.1924,0,.449799,-.74902,.255118,.0648939,.466726,-.623529,.304256,.133066,.476703,-.498039,.343202,.19716,.479793,-.372549,.373876,.260353,.476241,-.247059,.398497,.322872,.466953,-.121569,.420016,.384252,.453785,.00392157,.44319,.443216,.443186,.129412,.465553,.502139,.428233,.254902,.492959,.559151,.417591,.380392,.524654,.615092,.411016,.505882,.55959,.670583,.40779,.631373,.596614,.726102,.406948,.756863,.634544,.782032,.407439,.882353,.672183,.838703,.408237,1,.706131,.892759,.408452]},{ColorSpace:"Lab",Name:"coolwarm",RGBPoints:[-1,.229806,.298718,.753683,-.875,.303869,.406535,.844959,-.75,.383013,.509419,.917388,-.625,.466667,.604563,.968155,-.5,.552953,.688929,.995376,-.375,.639176,.7596,.998151,-.25,.722193,.813953,.976575,-.125,.798692,.849786,.931689,0,.865395,.86541,.865396,.125,.924128,.827385,.774508,.25,.958853,.769768,.678008,.375,.969954,.694267,.579375,.5,.958003,.602842,.481776,.625,.923945,.497309,.38797,.75,.869187,.378313,.300267,.875,.795632,.241284,.220526,1,.705673,.0155562,.150233]},{ColorSpace:"Lab",Name:"BuRd",RGBPoints:[-1,.019608,.188235,.380392,-.87451,.088504,.321107,.564937,-.74902,.163399,.444983,.697501,-.623529,.247059,.555709,.754095,-.498039,.420684,.676432,.818685,-.372549,.606459,.789773,.880277,-.247059,.761476,.868512,.924567,-.121569,.878047,.925721,.951942,.00392157,.969089,.966474,.964937,.129412,.983852,.897578,.846828,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"Spectral_lowBlue",RGBPoints:[-1,.368627,.309804,.635294,-.87451,.260361,.450058,.70173,-.74902,.248058,.591311,.717186,-.623529,.376009,.734025,.658132,-.498039,.537947,.814764,.64506,-.372549,.702345,.879585,.636678,-.247059,.84752,.938639,.607151,-.121569,.940408,.976163,.656055,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.937793,.398539,.270127,.756863,.861515,.282891,.299654,.882353,.746482,.144637,.288812,1,.619608,.003922,.258824]},{ColorSpace:"Lab",Name:"GnRP",RGBPoints:[-1,0,.266667,.105882,-.87451,.066436,.394617,.174779,-.74902,.168858,.524567,.25767,-.623529,.323875,.657439,.361015,-.498039,.504883,.772318,.506344,-.372549,.678431,.870127,.654902,-.247059,.803922,.921799,.780392,-.121569,.897116,.951942,.882814,.00392157,.967397,.965936,.967474,.129412,.928028,.879815,.930565,.254902,.866052,.780777,.882891,.380392,.77501,.665129,.821376,.505882,.675663,.537024,.737024,.631373,.57847,.396155,.645982,.756863,.492349,.223914,.547559,.882353,.375548,.096886,.423299,1,.25098,0,.294118]},{ColorSpace:"Lab",Name:"GYPi",RGBPoints:[-1,.152941,.392157,.098039,-.87451,.246444,.505344,.117724,-.74902,.351942,.614533,.161399,-.623529,.474971,.717878,.240138,-.498039,.611995,.811226,.392849,-.372549,.746328,.893118,.565321,-.247059,.859516,.94233,.747405,-.121569,.928105,.96386,.875663,.00392157,.969089,.966859,.968012,.129412,.983852,.910265,.948328,.254902,.979239,.833218,.914648,.380392,.949712,.729873,.862976,.505882,.905652,.58293,.763552,.631373,.85521,.410073,.652211,.756863,.793695,.183699,.531642,.882353,.683737,.063899,.420761,1,.556863,.003922,.321569]},{ColorSpace:"Lab",Name:"GnYlRd",RGBPoints:[-1,0,.407843,.215686,-.87451,.063975,.525952,.277201,-.74902,.177932,.633064,.332718,-.623529,.364937,.724106,.379469,-.498039,.527951,.797155,.40223,-.372549,.678431,.862822,.433449,-.247059,.803922,.916955,.514648,-.121569,.909419,.961861,.625067,.00392157,.999923,.997616,.745021,.129412,.997463,.921338,.61707,.254902,.995002,.824606,.499885,.380392,.992541,.701576,.39654,.505882,.973472,.547405,.318108,.631373,.939023,.389927,.245521,.756863,.867666,.239831,.176624,.882353,.762399,.110727,.151326,1,.647059,0,.14902]},{ColorSpace:"Lab",Name:"GBBr",RGBPoints:[-1,0,.235294,.188235,-.87451,.002461,.338639,.301423,-.74902,.055902,.448981,.417609,-.623529,.183852,.56955,.538178,-.498039,.357785,.700115,.660746,-.372549,.540177,.819531,.77624,-.247059,.714879,.890888,.864821,-.121569,.851134,.934564,.922645,.00392157,.960861,.959785,.95694,.129412,.963322,.927797,.83391,.254902,.939946,.868897,.68935,.380392,.883353,.775394,.517109,.505882,.808074,.625836,.324106,.631373,.717647,.476355,.15494,.756863,.592157,.358247,.06882,.882353,.458593,.26436,.031142,1,.329412,.188235,.019608]},{ColorSpace:"Lab",Name:"PuOr",RGBPoints:[-1,.498039,.231373,.031373,-.87451,.62599,.30273,.026451,-.74902,.746943,.387082,.037524,-.623529,.85767,.490427,.071972,-.498039,.936409,.617762,.236371,-.372549,.992695,.743099,.43291,-.247059,.995156,.841523,.63714,-.121569,.985313,.913802,.813687,.00392157,.966244,.966398,.967705,.129412,.889965,.89504,.938178,.254902,.806151,.804306,.894656,.380392,.712649,.688658,.833141,.505882,.594233,.554325,.744637,.631373,.474894,.404229,.652364,.756863,.366628,.217224,.563783,.882353,.266436,.089965,.434833,1,.176471,0,.294118]},{ColorSpace:"Lab",Name:"PRGn",RGBPoints:[-1,.25098,0,.294118,-.87451,.383852,.103345,.431911,-.74902,.497732,.234679,.55371,-.623529,.583852,.40692,.652134,-.498039,.681968,.545175,.742561,-.372549,.7807,.672357,.825221,-.247059,.871742,.788005,.886736,-.121569,.930488,.885198,.932872,.00392157,.966321,.968089,.965859,.129412,.892503,.950865,.877278,.254902,.796078,.91857,.772549,.380392,.670588,.866897,.647059,.505882,.493195,.765398,.496655,.631373,.314187,.649135,.354556,.756863,.15917,.516263,.251211,.882353,.062284,.386621,.170473,1,0,.266667,.105882]},{ColorSpace:"Lab",Name:"PiYG",RGBPoints:[-1,.556863,.003922,.321569,-.87451,.692195,.067897,.427374,-.74902,.797539,.197847,.539177,-.623529,.859054,.424221,.659746,-.498039,.908574,.592618,.770319,-.372549,.951557,.736332,.866205,-.247059,.981084,.839677,.917878,-.121569,.98293,.913802,.949558,.00392157,.96732,.968474,.965629,.129412,.92549,.963552,.869666,.254902,.852441,.939254,.736025,.380392,.739254,.890042,.553941,.505882,.60323,.805536,.382238,.631373,.467282,.711419,.235217,.756863,.344252,.608074,.156478,.882353,.2406,.49827,.116494,1,.152941,.392157,.098039]},{ColorSpace:"Lab",Name:"OrPu",RGBPoints:[-1,.176471,0,.294118,-.87451,.272434,.095963,.444214,-.74902,.373395,.228912,.56932,-.623529,.481661,.415917,.657901,-.498039,.601922,.562937,.750481,-.372549,.718493,.695886,.836986,-.247059,.811995,.811534,.898501,-.121569,.894733,.8995,.940023,.00392157,.969166,.966859,.963629,.129412,.98639,.910265,.803691,.254902,.995002,.835371,.624375,.380392,.992541,.736947,.420146,.505882,.931949,.609458,.224221,.631373,.85075,.483968,.069819,.756863,.740023,.380623,.035371,.882353,.617993,.29827,.026759,1,.498039,.231373,.031373]},{ColorSpace:"Lab",Name:"BrBG",RGBPoints:[-1,.329412,.188235,.019608,-.87451,.467205,.269435,.031911,-.74902,.6,.365629,.074202,-.623529,.72549,.483737,.160323,-.498039,.812995,.635832,.336409,-.372549,.88689,.781238,.527874,-.247059,.943483,.87474,.700115,-.121569,.963168,.929796,.841599,.00392157,.957247,.959938,.959554,.129412,.84406,.932872,.920185,.254902,.70396,.886428,.859285,.380392,.529258,.815071,.770704,.505882,.346251,.691811,.653057,.631373,.175855,.562015,.530642,.756863,.047905,.441446,.410073,.882353,.002307,.33218,.294348,1,0,.235294,.188235]},{ColorSpace:"Lab",Name:"GyRd",RGBPoints:[-1,.101961,.101961,.101961,-.87451,.227451,.227451,.227451,-.74902,.359939,.359939,.359939,-.623529,.502653,.502653,.502653,-.498039,.631373,.631373,.631373,-.372549,.749865,.749865,.749865,-.247059,.843368,.843368,.843368,-.121569,.926105,.926105,.926105,.00392157,.999846,.997232,.995694,.129412,.994925,.908651,.857901,.254902,.982468,.800692,.706113,.380392,.960323,.66782,.536332,.505882,.894579,.503806,.399769,.631373,.81707,.33218,.281046,.756863,.728489,.155017,.197386,.882353,.576932,.055363,.14925,1,.403922,0,.121569]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen",RGBPoints:[-1,.297553,0,.489074,-.87451,.40259,.151146,.567754,-.74902,.516038,.284843,.658231,-.623529,.629783,.423646,.750938,-.498039,.735198,.563697,.835956,-.372549,.82408,.695541,.903582,-.247059,.889091,.807454,.944862,-.121569,.92334,.886917,.951839,.00392157,.921045,.921084,.921003,.129412,.877324,.907455,.845381,.254902,.797649,.849713,.734695,.380392,.691646,.75964,.600532,.505882,.568981,.649159,.453807,.631373,.438945,.529756,.304259,.756863,.30973,.412001,.158303,.882353,.187078,.305111,.00251458,1,.101655,.220836,0]},{ColorSpace:"Lab",Name:"erdc_divHi_purpleGreen_dim",RGBPoints:[-1,.404088,.131038,.592767,-.87451,.486469,.230957,.651243,-.74902,.575165,.339335,.717723,-.623529,.662741,.454332,.784263,-.498039,.742071,.570213,.842918,-.372549,.806935,.678992,.886227,-.247059,.852219,.771315,.90763,-.121569,.873345,.837327,.901572,.00392157,.866783,.86682,.866745,.129412,.82839,.858225,.796812,.254902,.762578,.814287,.700202,.380392,.676429,.744229,.585735,.505882,.577033,.65732,.461526,.631373,.47128,.562476,.33476,.756863,.365461,.467957,.21076,.882353,.264758,.381138,.0878313,1,.182591,.312249,0]},{ColorSpace:"Lab",Name:"erdc_divLow_icePeach",RGBPoints:[-1,.480048,.817441,.998056,-.87451,.425898,.726921,.883187,-.74902,.366682,.629445,.761936,-.623529,.308756,.531002,.640217,-.498039,.258021,.43705,.523433,-.372549,.219244,.352381,.416348,-.247059,.195127,.281032,.322979,-.121569,.186286,.22627,.246525,.00392157,.192352,.19236,.192364,.129412,.255927,.214469,.191756,.254902,.340459,.254426,.206666,.380392,.444655,.309315,.234029,.505882,.565353,.376004,.270969,.631373,.697917,.450748,.314293,.756863,.836657,.529064,.360227,.882353,.972695,.614884,.413123,1,1,.705904,.472699]},{ColorSpace:"Lab",Name:"erdc_divLow_purpleGreen",RGBPoints:[-1,.956034,.666487,.952663,-.87451,.874457,.572698,.936352,-.74902,.753465,.488253,.909063,-.623529,.63309,.413507,.763833,-.498039,.514491,.345878,.620015,-.372549,.405008,.288141,.484376,-.247059,.311388,.241986,.363556,-.121569,.238722,.209044,.263449,.00392157,.192352,.192366,.192362,.129412,.200379,.233201,.168618,.254902,.230151,.291737,.165227,.380392,.279481,.366076,.178607,.505882,.344927,.453267,.205703,.631373,.421554,.549449,.242643,.756863,.503334,.649999,.284377,.882353,.583497,.749672,.324969,1,.650705,.837228,.356264]},{ColorSpace:"Lab",Name:"Haze_green",RGBPoints:[-1,1,.835294,.886275,-.87451,.937255,.756863,.870443,-.74902,.875817,.666376,.857807,-.623529,.778359,.583007,.808134,-.498039,.676253,.494118,.745098,-.372549,.561365,.390123,.682353,-.247059,.438344,.262745,.621496,-.121569,.321133,.141031,.558751,.00392157,.203922,.0217865,.495861,.129412,.265505,.129412,.433261,.254902,.311692,.255338,.37008,.380392,.356282,.377342,.310821,.505882,.39971,.488889,.258243,.631373,.442556,.604357,.205519,.756863,.48671,.71968,.152941,.882353,.529847,.830356,.100944,1,.572549,.933333,.054902]},{ColorSpace:"Lab",Name:"Haze_lime",RGBPoints:[-1,.704034,.784196,1,-.87451,.633111,.691418,.956078,-.74902,.564021,.600606,.912157,-.623529,.496827,.51189,.868235,-.498039,.43157,.425416,.824314,-.372549,.368248,.341347,.780392,-.247059,.306767,.259855,.736471,-.121569,.246862,.181069,.692549,.00392157,.191619,.109542,.648627,.129412,.257404,.194031,.604706,.254902,.321794,.278775,.560784,.380392,.387909,.364617,.516863,.505882,.456569,.451881,.472941,.631373,.527424,.540773,.42902,.756863,.599759,.631427,.385098,.882353,.673065,.723898,.341176,1,.742751,.812252,.3]},{ColorSpace:"RGB",Name:"Haze",RGBPoints:[-1,1,.835294,.996078,-.00392157,.023529,.141176,.498039,.00392157,.015686,.137255,.494118,1,.984314,.764706,0]},{ColorSpace:"Lab",Name:"Haze_cyan",RGBPoints:[-1,.956863,1,.835294,-.87451,.933188,.921714,.760784,-.74902,.870588,.803486,.671605,-.623529,.807843,.684096,.583297,-.498039,.745098,.569208,.494118,-.372549,.682353,.437763,.390123,-.247059,.621496,.288163,.262745,-.121569,.558751,.144517,.141031,.00392157,.495861,.0217865,.0413943,.129412,.433261,.137255,.129412,.254902,.37008,.263181,.255338,.380392,.306318,.381845,.372694,.505882,.243137,.503994,.494263,.631373,.180392,.629484,.619753,.756863,.117647,.754975,.747131,.882353,.054902,.876398,.866812,1,0,.988235,.976471]},{ColorSpace:"Lab",Name:"nic_Edge",RGBPoints:[-1,.191208,.191208,.191208,-.87451,.239484,.00545035,.614821,-.74902,.220593,.0617459,.863547,-.623529,.17509,.278988,.97794,-.498039,.143526,.576069,.998553,-.372549,.166456,.871883,.96594,-.247059,.376202,.993555,.981833,-.121569,.681996,.991297,.999239,.00392157,.954172,.952734,.94374,.129412,.999735,.99301,.662896,.254902,.979399,.991466,.357973,.380392,.968771,.854967,.162659,.505882,.999245,.556697,.144323,.631373,.973959,.26223,.177946,.756863,.852358,.0526707,.222974,.882353,.593889,.00912724,.238855,1,.191208,.191208,.191208]},{ColorSpace:"Lab",Name:"erdc_iceFire_H",RGBPoints:[-1,405432e-12,0,590122e-11,-.87451,0,.120401,.302675,-.74902,0,.216583,.524574,-.623529,.0552475,.345025,.6595,-.498039,.128047,.492588,.720288,-.372549,.188955,.641309,.792092,-.247059,.327673,.784935,.873434,-.121569,.60824,.892164,.935547,.00392157,.881371,.912178,.818099,.129412,.951407,.835621,.449279,.254902,.904481,.690489,0,.380392,.85407,.510864,0,.505882,.777093,.33018,88199e-8,.631373,.672862,.139087,.00269398,.756863,.508815,0,0,.882353,.299417,366289e-9,547829e-9,1,.0157519,.00332021,455569e-13]},{ColorSpace:"Lab",Name:"erdc_iceFire_L",RGBPoints:[-1,.870485,.913768,.832905,-.87451,.586919,.887865,.934003,-.74902,.31583,.776442,.867858,-.623529,.18302,.632034,.787722,-.498039,.117909,.484134,.713825,-.372549,.0507239,.335979,.654741,-.247059,0,.209874,.511832,-.121569,0,.114689,.28935,.00392157,.0157519,.00332021,455569e-13,.129412,.312914,0,0,.254902,.520865,0,0,.380392,.680105,.15255,.0025996,.505882,.785109,.339479,797922e-9,.631373,.857354,.522494,0,.756863,.910974,.699774,0,.882353,.951921,.842817,.478545,1,.881371,.912178,.818099]},{ColorSpace:"RGB",Name:"hsv",RGBPoints:[-1,1,0,0,-.666666,1,0,1,-.333333,0,0,1,0,0,1,1,.33333,0,1,0,.66666,1,1,0,1,1,0,0]},{ColorSpace:"Lab",Name:"hue_L60",RGBPoints:[-1,.964784,.400592,.349549,-.87451,.964915,.372498,.53785,-.74902,.892353,.401039,.759569,-.623529,.79263,.446956,.903017,-.498039,.682208,.49954,.966673,-.372549,.56392,.553082,.968836,-.247059,.442031,.606396,.901601,-.121569,.305499,.65701,.765784,.00392157,.197251,.687914,.620914,.129412,.193882,.701887,.472654,.254902,.249866,.706123,.320005,.380392,.35132,.697417,.202919,.505882,.498097,.669467,.125232,.631373,.637477,.626239,.107431,.756863,.762115,.56872,.155812,.882353,.889434,.481116,.240445,1,.964784,.400592,.349549]},{IndexedColors:[0,0,0,.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,.6509803921568628,.3372549019607843,.1568627450980392],Name:"Spectrum",NanColor:[.6509803921568628,.3372549019607843,.1568627450980392]},{IndexedColors:[.4745098039215686,.09019607843137255,.09019607843137255,.7098039215686275,.00392156862745098,.00392156862745098,.9372549019607843,.2784313725490196,.09803921568627451,.9764705882352941,.5137254901960784,.1411764705882353,1,.7058823529411765,0,1,.8980392156862745,.02352941176470588],Name:"Warm",NanColor:[1,.8980392156862745,.02352941176470588]},{IndexedColors:[.4588235294117647,.6941176470588235,.00392156862745098,.3450980392156863,.5019607843137255,.1607843137254902,.3137254901960784,.8431372549019608,.7490196078431373,.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.6039215686274509,.407843137254902,1,.3725490196078431,.2,.5019607843137255],Name:"Cool",NanColor:[.3725490196078431,.2,.5019607843137255]},{IndexedColors:[.2313725490196079,.407843137254902,.6705882352941176,.1098039215686274,.5843137254901961,.803921568627451,.3058823529411765,.8509803921568627,.9176470588235294,.4509803921568628,.6039215686274509,.8352941176470589,.2588235294117647,.2392156862745098,.6627450980392157,.3137254901960784,.3294117647058823,.5294117647058824,.06274509803921569,.1647058823529412,.3215686274509804],Name:"Blues",NanColor:[.06274509803921569,.1647058823529412,.3215686274509804]},{IndexedColors:[.1098039215686274,.5843137254901961,.803921568627451,.2313725490196079,.407843137254902,.6705882352941176,.4,.2431372549019608,.7176470588235294,.6352941176470588,.3294117647058823,.8117647058823529,.8705882352941177,.3803921568627451,.807843137254902,.8627450980392157,.3803921568627451,.5843137254901961,.2392156862745098,.06274509803921569,.3215686274509804],Name:"Wild Flower",NanColor:[.2392156862745098,.06274509803921569,.3215686274509804]},{IndexedColors:[.396078431372549,.4862745098039216,.2156862745098039,.4588235294117647,.6941176470588235,.00392156862745098,.6980392156862745,.7294117647058823,.1882352941176471,1,.8980392156862745,.02352941176470588,1,.7058823529411765,0,.9764705882352941,.5137254901960784,.1411764705882353],Name:"Citrus",NanColor:[.9764705882352941,.5137254901960784,.1411764705882353]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (11)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.4980392156862745,.2313725490196079,.03137254901960784,.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333,.1764705882352941,0,.2941176470588235],Name:"Brewer Diverging Purple-Orange (10)",NanColor:[.1764705882352941,0,.2941176470588235]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (9)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.8784313725490196,.5098039215686274,.0784313725490196,.9921568627450981,.7215686274509804,.3882352941176471,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6980392156862745,.6705882352941176,.8235294117647058,.5019607843137255,.4509803921568628,.6745098039215687,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (8)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.9686274509803922,.9686274509803922,.9686274509803922,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (7)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.7019607843137254,.3450980392156863,.02352941176470588,.9450980392156862,.6392156862745098,.2509803921568627,.996078431372549,.8784313725490196,.7137254901960784,.8470588235294118,.8549019607843137,.9215686274509803,.6,.5568627450980392,.7647058823529411,.3294117647058823,.1529411764705882,.5333333333333333],Name:"Brewer Diverging Purple-Orange (6)",NanColor:[.3294117647058823,.1529411764705882,.5333333333333333]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.9686274509803922,.9686274509803922,.9686274509803922,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (5)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9019607843137255,.3803921568627451,.00392156862745098,.9921568627450981,.7215686274509804,.3882352941176471,.6980392156862745,.6705882352941176,.8235294117647058,.3686274509803922,.2352941176470588,.6],Name:"Brewer Diverging Purple-Orange (4)",NanColor:[.3686274509803922,.2352941176470588,.6]},{IndexedColors:[.9450980392156862,.6392156862745098,.2509803921568627,.9686274509803922,.9686274509803922,.9686274509803922,.6,.5568627450980392,.7647058823529411],Name:"Brewer Diverging Purple-Orange (3)",NanColor:[.6,.5568627450980392,.7647058823529411]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (11)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.6196078431372549,.00392156862745098,.2588235294117647,.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353,.3686274509803922,.3098039215686275,.6352941176470588],Name:"Brewer Diverging Spectral (10)",NanColor:[.3686274509803922,.3098039215686275,.6352941176470588]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (9)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9568627450980393,.4274509803921568,.2627450980392157,.9921568627450981,.6823529411764706,.3803921568627451,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6705882352941176,.8666666666666667,.6431372549019608,.4,.7607843137254902,.6470588235294118,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (8)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,1,1,.7490196078431373,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (7)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8352941176470589,.2431372549019608,.3098039215686275,.9882352941176471,.5529411764705883,.3490196078431372,.996078431372549,.8784313725490196,.5450980392156862,.9019607843137255,.9607843137254902,.596078431372549,.6,.8352941176470589,.5803921568627451,.196078431372549,.5333333333333333,.7411764705882353],Name:"Brewer Diverging Spectral (6)",NanColor:[.196078431372549,.5333333333333333,.7411764705882353]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,1,1,.7490196078431373,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (5)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.8431372549019608,.09803921568627451,.1098039215686274,.9921568627450981,.6823529411764706,.3803921568627451,.6705882352941176,.8666666666666667,.6431372549019608,.1686274509803922,.5137254901960784,.7294117647058823],Name:"Brewer Diverging Spectral (4)",NanColor:[.1686274509803922,.5137254901960784,.7294117647058823]},{IndexedColors:[.9882352941176471,.5529411764705883,.3490196078431372,1,1,.7490196078431373,.6,.8352941176470589,.5803921568627451],Name:"Brewer Diverging Spectral (3)",NanColor:[.6,.8352941176470589,.5803921568627451]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (11)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.3294117647058823,.1882352941176471,.0196078431372549,.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922,0,.2352941176470588,.1882352941176471],Name:"Brewer Diverging Brown-Blue-Green (10)",NanColor:[0,.2352941176470588,.1882352941176471]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (9)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.7490196078431373,.5058823529411764,.1764705882352941,.8745098039215686,.7607843137254902,.4901960784313725,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.5019607843137255,.803921568627451,.7568627450980392,.207843137254902,.592156862745098,.5607843137254902,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (8)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.9607843137254902,.9607843137254902,.9607843137254902,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (7)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.5490196078431373,.3176470588235294,.0392156862745098,.8470588235294118,.7019607843137254,.396078431372549,.9647058823529412,.9098039215686274,.7647058823529411,.7803921568627451,.9176470588235294,.8980392156862745,.3529411764705883,.7058823529411765,.6745098039215687,.00392156862745098,.4,.3686274509803922],Name:"Brewer Diverging Brown-Blue-Green (6)",NanColor:[.00392156862745098,.4,.3686274509803922]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.9607843137254902,.9607843137254902,.9607843137254902,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (5)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.6509803921568628,.3803921568627451,.1019607843137255,.8745098039215686,.7607843137254902,.4901960784313725,.5019607843137255,.803921568627451,.7568627450980392,.00392156862745098,.5215686274509804,.4431372549019608],Name:"Brewer Diverging Brown-Blue-Green (4)",NanColor:[.00392156862745098,.5215686274509804,.4431372549019608]},{IndexedColors:[.8470588235294118,.7019607843137254,.396078431372549,.9607843137254902,.9607843137254902,.9607843137254902,.3529411764705883,.7058823529411765,.6745098039215687],Name:"Brewer Diverging Brown-Blue-Green (3)",NanColor:[.3529411764705883,.7058823529411765,.6745098039215687]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.4274509803921568,.1725490196078431,0,.2666666666666667,.1058823529411765],Name:"Brewer Sequential Blue-Green (9)",NanColor:[0,.2666666666666667,.1058823529411765]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8980392156862745,.9607843137254902,.9764705882352941,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (8)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.8,.9254901960784314,.9019607843137255,.4,.7607843137254902,.6431372549019608,.2549019607843137,.6823529411764706,.4627450980392157,.1372549019607843,.5450980392156862,.2705882352941176,0,.3450980392156863,.1411764705882353],Name:"Brewer Sequential Blue-Green (7)",NanColor:[0,.3450980392156863,.1411764705882353]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.8,.9254901960784314,.9019607843137255,.6,.8470588235294118,.788235294117647,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (6)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1725490196078431,.6352941176470588,.3725490196078431,0,.4274509803921568,.1725490196078431],Name:"Brewer Sequential Blue-Green (5)",NanColor:[0,.4274509803921568,.1725490196078431]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.6980392156862745,.8862745098039215,.8862745098039215,.4,.7607843137254902,.6431372549019608,.1372549019607843,.5450980392156862,.2705882352941176],Name:"Brewer Sequential Blue-Green (4)",NanColor:[.1372549019607843,.5450980392156862,.2705882352941176]},{IndexedColors:[.8980392156862745,.9607843137254902,.9764705882352941,.6,.8470588235294118,.788235294117647,.1725490196078431,.6352941176470588,.3725490196078431],Name:"Brewer Sequential Blue-Green (3)",NanColor:[.1725490196078431,.6352941176470588,.3725490196078431]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.6,.203921568627451,.01568627450980392,.4,.1450980392156863,.02352941176470588],Name:"Brewer Sequential Yellow-Orange-Brown (9)",NanColor:[.4,.1450980392156863,.02352941176470588]},{IndexedColors:[1,1,.8980392156862745,1,.9686274509803922,.7372549019607844,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (8)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.9254901960784314,.4392156862745098,.0784313725490196,.8,.2980392156862745,.00784313725490196,.5490196078431373,.1764705882352941,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (7)",NanColor:[.5490196078431373,.1764705882352941,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8901960784313725,.5686274509803921,.996078431372549,.7686274509803922,.3098039215686275,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (6)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8509803921568627,.3725490196078431,.05490196078431372,.6,.203921568627451,.01568627450980392],Name:"Brewer Sequential Yellow-Orange-Brown (5)",NanColor:[.6,.203921568627451,.01568627450980392]},{IndexedColors:[1,1,.8313725490196079,.996078431372549,.8509803921568627,.5568627450980392,.996078431372549,.6,.1607843137254902,.8,.2980392156862745,.00784313725490196],Name:"Brewer Sequential Yellow-Orange-Brown (4)",NanColor:[.8,.2980392156862745,.00784313725490196]},{IndexedColors:[1,.9686274509803922,.7372549019607844,.996078431372549,.7686274509803922,.3098039215686275,.8509803921568627,.3725490196078431,.05490196078431372],Name:"Brewer Sequential Yellow-Orange-Brown (3)",NanColor:[.8509803921568627,.3725490196078431,.05490196078431372]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.5058823529411764,.05882352941176471,.4862745098039216,.3019607843137255,0,.2941176470588235],Name:"Brewer Sequential Blue-Purple (9)",NanColor:[.3019607843137255,0,.2941176470588235]},{IndexedColors:[.9686274509803922,.9882352941176471,.9921568627450981,.8784313725490196,.9254901960784314,.9568627450980393,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (8)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5490196078431373,.4196078431372549,.6941176470588235,.5333333333333333,.2549019607843137,.615686274509804,.4313725490196079,.00392156862745098,.4196078431372549],Name:"Brewer Sequential Blue-Purple (7)",NanColor:[.4313725490196079,.00392156862745098,.4196078431372549]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7490196078431373,.8274509803921568,.9019607843137255,.6196078431372549,.7372549019607844,.8549019607843137,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (6)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.3372549019607843,.6549019607843137,.5058823529411764,.05882352941176471,.4862745098039216],Name:"Brewer Sequential Blue-Purple (5)",NanColor:[.5058823529411764,.05882352941176471,.4862745098039216]},{IndexedColors:[.9294117647058824,.9725490196078431,.984313725490196,.7019607843137254,.803921568627451,.8901960784313725,.5490196078431373,.5882352941176471,.7764705882352941,.5333333333333333,.2549019607843137,.615686274509804],Name:"Brewer Sequential Blue-Purple (4)",NanColor:[.5333333333333333,.2549019607843137,.615686274509804]},{IndexedColors:[.8784313725490196,.9254901960784314,.9568627450980393,.6196078431372549,.7372549019607844,.8549019607843137,.5333333333333333,.3372549019607843,.6549019607843137],Name:"Brewer Sequential Blue-Purple (3)",NanColor:[.5333333333333333,.3372549019607843,.6549019607843137]},{IndexedColors:[.4980392156862745,.788235294117647,.4980392156862745,.7450980392156863,.6823529411764706,.8313725490196079,.9921568627450981,.7529411764705882,.5254901960784314,1,1,.6,.2196078431372549,.4235294117647059,.6901960784313725,.9411764705882353,.00784313725490196,.4980392156862745,.7490196078431373,.3568627450980392,.09019607843137255,.4,.4,.4],Name:"Brewer Qualitative Accent",NanColor:[.4,.4,.4]},{IndexedColors:[.1058823529411765,.6196078431372549,.4666666666666667,.8509803921568627,.3725490196078431,.00784313725490196,.4588235294117647,.4392156862745098,.7019607843137254,.9058823529411765,.1607843137254902,.5411764705882353,.4,.6509803921568628,.1176470588235294,.9019607843137255,.6705882352941176,.00784313725490196,.6509803921568628,.4627450980392157,.1137254901960784,.4,.4,.4],Name:"Brewer Qualitative Dark2",NanColor:[.4,.4,.4]},{IndexedColors:[.4,.7607843137254902,.6470588235294118,.9882352941176471,.5529411764705883,.3843137254901961,.5529411764705883,.6274509803921569,.796078431372549,.9058823529411765,.5411764705882353,.7647058823529411,.6509803921568628,.8470588235294118,.3294117647058823,1,.8509803921568627,.1843137254901961,.8980392156862745,.7686274509803922,.5803921568627451,.7019607843137254,.7019607843137254,.7019607843137254],Name:"Brewer Qualitative Set2",NanColor:[.7019607843137254,.7019607843137254,.7019607843137254]},{IndexedColors:[.7019607843137254,.8862745098039215,.803921568627451,.9921568627450981,.803921568627451,.6745098039215687,.796078431372549,.8352941176470589,.9098039215686274,.9568627450980393,.792156862745098,.8941176470588236,.9019607843137255,.9607843137254902,.788235294117647,1,.9490196078431372,.6823529411764706,.9450980392156862,.8862745098039215,.8,.8,.8,.8],Name:"Brewer Qualitative Pastel2",NanColor:[.8,.8,.8]},{IndexedColors:[.984313725490196,.7058823529411765,.6823529411764706,.7019607843137254,.803921568627451,.8901960784313725,.8,.9215686274509803,.7725490196078432,.8705882352941177,.796078431372549,.8941176470588236,.996078431372549,.8509803921568627,.6509803921568628,1,1,.8,.8980392156862745,.8470588235294118,.7411764705882353,.9921568627450981,.8549019607843137,.9254901960784314,.9490196078431372,.9490196078431372,.9490196078431372],Name:"Brewer Qualitative Pastel1",NanColor:[.9490196078431372,.9490196078431372,.9490196078431372]},{IndexedColors:[.8941176470588236,.1019607843137255,.1098039215686274,.2156862745098039,.4941176470588236,.7215686274509804,.3019607843137255,.6862745098039216,.2901960784313726,.596078431372549,.3058823529411765,.6392156862745098,1,.4980392156862745,0,1,1,.2,.6509803921568628,.3372549019607843,.1568627450980392,.9686274509803922,.5058823529411764,.7490196078431373,.6,.6,.6],Name:"Brewer Qualitative Set1",NanColor:[.6,.6,.6]},{IndexedColors:[.6509803921568628,.807843137254902,.8901960784313725,.1215686274509804,.4705882352941176,.7058823529411765,.6980392156862745,.8745098039215686,.5411764705882353,.2,.6274509803921569,.1725490196078431,.984313725490196,.6039215686274509,.6,.8901960784313725,.1019607843137255,.1098039215686274,.9921568627450981,.7490196078431373,.4352941176470588,1,.4980392156862745,0,.792156862745098,.6980392156862745,.8392156862745098,.4156862745098039,.2392156862745098,.6039215686274509,1,1,.6],Name:"Brewer Qualitative Paired",NanColor:[1,1,.6]},{IndexedColors:[.5529411764705883,.8274509803921568,.7803921568627451,1,1,.7019607843137254,.7450980392156863,.7294117647058823,.8549019607843137,.984313725490196,.5019607843137255,.4470588235294118,.5019607843137255,.6941176470588235,.8274509803921568,.9921568627450981,.7058823529411765,.3843137254901961,.7019607843137254,.8705882352941177,.4117647058823529,.9882352941176471,.803921568627451,.8980392156862745,.8509803921568627,.8509803921568627,.8509803921568627,.7372549019607844,.5019607843137255,.7411764705882353,.8,.9215686274509803,.7725490196078432,1,.9294117647058824,.4352941176470588],Name:"Brewer Qualitative Set3",NanColor:[1,.9294117647058824,.4352941176470588]},{IndexedColors:[1,0,0,1,.862745,0,0,.695201,0],Name:"Traffic Lights",NanColor:[.803922,0,.803922]},{IndexedColors:[.908659,.604013,.581857,1,.862745,0,0,.695201,0],Name:"Traffic Lights For Deuteranopes",NanColor:[.803922,0,.803922]},{IndexedColors:[.4196078431372549,0,.07058823529411765,.9019607843137255,.9411764705882353,.0196078431372549,.01568627450980392,.6196078431372549,.00784313725490196],Name:"Traffic Lights For Deuteranopes 2",NanColor:[.803922,0,.803922]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Muted Blue-Green",NanColor:[.25,0,0],RGBPoints:[0,.109804,.27451,.301961,.02,.129412,.309804,.341176,.05,.14902,.341176,.380392,.1,.188235,.403922,.458824,.15,.227451,.447059,.521569,.2,.290196,.494118,.588235,.25,.368627,.552941,.670588,.3,.458824,.619608,.74902,.35,.588235,.713725,.85098,.4,.72549,.815686,.941176,.45,.831373,.882353,.980392,.475,.909804,.933333,1,.5,.980392,.984314,1,.5,.996078,1,.94902,.5,1,1,.980392,.5,.980392,.984314,1,.525,.972549,.988235,.890196,.55,.917647,.960784,.835294,.6,.835294,.921569,.772549,.65,.768627,.901961,.737255,.7,.670588,.831373,.654902,.75,.576471,.760784,.584314,.8,.498039,.678431,.521569,.85,.392157,.560784,.427451,.9,.294118,.45098,.333333,.95,.211765,.34902,.254902,1,.152941,.278431,.196078]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Green-Blue Asymmetric Divergent (62Blbc)",NanColor:[.25,0,0],RGBPoints:[0,.121569,.2,.145098,.05,.196078,.301961,.223529,.1,.258824,.4,.278431,.2,.341176,.54902,.341176,.25,.419608,.619608,.376471,.3,.545098,.701961,.392157,.35,.643137,.780392,.403922,.4,.729412,.819608,.45098,.45,.811765,.870588,.521569,.5,.898039,.909804,.564706,.55,.941176,.92549,.686275,.6,.960784,.94902,.776471,.64,1,1,1,.65,.890196,.988235,.972549,.7,.721569,.894118,.901961,.75,.631373,.823529,.839216,.8,.517647,.662745,.701961,.85,.384314,.494118,.54902,.9,.298039,.360784,.45098,.95,.223529,.25098,.34902,.99,.156863,.172549,.25098,1,.137255,.137255,.188235]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Asymmtrical Earth Tones (6_21b)",NanColor:[.25,0,0],RGBPoints:[0,.141176,.14902,.2,.05,.215686,.258824,.321569,.1,.243137,.368627,.380392,.15,.27451,.439216,.4,.2,.32549,.501961,.384314,.25,.403922,.6,.419608,.3,.486275,.701961,.454902,.35,.556863,.74902,.494118,.4,.670588,.8,.545098,.5,.854902,.901961,.631373,.55,.92549,.941176,.694118,.6,.960784,.94902,.776471,.65,.988235,.968627,.909804,.7,.839216,.815686,.772549,.75,.701961,.662745,.615686,.8,.6,.529412,.478431,.85,.501961,.403922,.360784,.9,.439216,.313725,.290196,1,.301961,.164706,.176471]},{ColorSpace:"Lab",Creator:"Francesca Samsel",Name:"Yellow 15",NanColor:[.25,0,0],RGBPoints:[0,1,1,.988235,.002,1,1,.988235,.05,.984314,.988235,.843137,.1,.988235,.988235,.741176,.15,.980392,.968627,.654902,.2,.980392,.945098,.576471,.25,.968627,.905882,.486275,.3,.968627,.862745,.388235,.35,.960784,.803922,.286275,.4,.94902,.741176,.219608,.45,.941176,.678431,.14902,.5,.929412,.607843,.094118,.55,.921569,.545098,.054902,.6,.909804,.486275,.035294,.65,.890196,.411765,.019608,.7,.8,.305882,0,.75,.760784,.239216,0,.8,.678431,.180392,.011765,.85,.6,.121569,.023529,.9,.501961,.054902,.031373,.95,.4,.039216,.058824,1,.301961,.047059,.090196]},{ColorSpace:"Diverging",Name:"Magma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002258,.001295,.018331,.007843,.003279,.002305,.023708,.011765,.004512,.00349,.029965,.015686,.00595,.004843,.03713,.019608,.007588,.006356,.044973,.023529,.009426,.008022,.052844,.027451,.011465,.009828,.06075,.031373,.013708,.011771,.068667,.035294,.016156,.01384,.076603,.039216,.018815,.016026,.084584,.043137,.021692,.01832,.09261,.047059,.024792,.020715,.100676,.05098,.028123,.023201,.108787,.054902,.031696,.025765,.116965,.058824,.03552,.028397,.125209,.062745,.039608,.03109,.133515,.066667,.04383,.03383,.141886,.070588,.048062,.036607,.150327,.07451,.05232,.039407,.158841,.078431,.056615,.04216,.167446,.082353,.060949,.044794,.176129,.086275,.06533,.047318,.184892,.090196,.069764,.049726,.193735,.094118,.074257,.052017,.20266,.098039,.078815,.054184,.211667,.101961,.083446,.056225,.220755,.105882,.088155,.058133,.229922,.109804,.092949,.059904,.239164,.113725,.097833,.061531,.248477,.117647,.102815,.06301,.257854,.121569,.107899,.064335,.267289,.12549,.113094,.065492,.276784,.129412,.118405,.066479,.286321,.133333,.123833,.067295,.295879,.137255,.12938,.067935,.305443,.141176,.135053,.068391,.315,.145098,.140858,.068654,.324538,.14902,.146785,.068738,.334011,.152941,.152839,.068637,.343404,.156863,.159018,.068354,.352688,.160784,.165308,.067911,.361816,.164706,.171713,.067305,.370771,.168627,.178212,.066576,.379497,.172549,.184801,.065732,.387973,.176471,.19146,.064818,.396152,.180392,.198177,.063862,.404009,.184314,.204935,.062907,.411514,.188235,.211718,.061992,.418647,.192157,.218512,.061158,.425392,.196078,.225302,.060445,.431742,.2,.232077,.059889,.437695,.203922,.238826,.059517,.443256,.207843,.245543,.059352,.448436,.211765,.25222,.059415,.453248,.215686,.258857,.059706,.45771,.219608,.265447,.060237,.46184,.223529,.271994,.060994,.46566,.227451,.278493,.061978,.46919,.231373,.284951,.063168,.472451,.235294,.291366,.064553,.475462,.239216,.29774,.066117,.478243,.243137,.304081,.067835,.480812,.247059,.310382,.069702,.483186,.25098,.316654,.07169,.48538,.254902,.322899,.073782,.487408,.258824,.329114,.075972,.489287,.262745,.335308,.078236,.491024,.266667,.341482,.080564,.492631,.270588,.347636,.082946,.494121,.27451,.353773,.085373,.495501,.278431,.359898,.087831,.496778,.282353,.366012,.090314,.49796,.286275,.372116,.092816,.499053,.290196,.378211,.095332,.500067,.294118,.384299,.097855,.501002,.298039,.390384,.100379,.501864,.301961,.396467,.102902,.502658,.305882,.402548,.10542,.503386,.309804,.408629,.10793,.504052,.313725,.414709,.110431,.504662,.317647,.420791,.11292,.505215,.321569,.426877,.115395,.505714,.32549,.432967,.117855,.50616,.329412,.439062,.120298,.506555,.333333,.445163,.122724,.506901,.337255,.451271,.125132,.507198,.341176,.457386,.127522,.507448,.345098,.463508,.129893,.507652,.34902,.46964,.132245,.507809,.352941,.47578,.134577,.507921,.356863,.481929,.136891,.507989,.360784,.488088,.139186,.508011,.364706,.494258,.141462,.507988,.368627,.500438,.143719,.50792,.372549,.506629,.145958,.507806,.376471,.512831,.148179,.507648,.380392,.519045,.150383,.507443,.384314,.52527,.152569,.507192,.388235,.531507,.154739,.506895,.392157,.537755,.156894,.506551,.396078,.544015,.159033,.506159,.4,.550287,.161158,.505719,.403922,.556571,.163269,.50523,.407843,.562866,.165368,.504692,.411765,.569172,.167454,.504105,.415686,.57549,.16953,.503466,.419608,.581819,.171596,.502777,.423529,.588158,.173652,.502035,.427451,.594508,.175701,.501241,.431373,.600868,.177743,.500394,.435294,.607238,.179779,.499492,.439216,.613617,.181811,.498536,.443137,.620005,.18384,.497524,.447059,.626401,.185867,.496456,.45098,.632805,.187893,.495332,.454902,.639216,.189921,.49415,.458824,.645633,.191952,.49291,.462745,.652056,.193986,.491611,.466667,.658483,.196027,.490253,.470588,.664915,.198075,.488836,.47451,.671349,.200133,.487358,.478431,.677786,.202203,.485819,.482353,.684224,.204286,.484219,.486275,.690661,.206384,.482558,.490196,.697098,.208501,.480835,.494118,.703532,.210638,.479049,.498039,.709962,.212797,.477201,.501961,.716387,.214982,.47529,.505882,.722805,.217194,.473316,.509804,.729216,.219437,.471279,.513725,.735616,.221713,.46918,.517647,.742004,.224025,.467018,.521569,.748378,.226377,.464794,.52549,.754737,.228772,.462509,.529412,.761077,.231214,.460162,.533333,.767398,.233705,.457755,.537255,.773695,.236249,.455289,.541176,.779968,.238851,.452765,.545098,.786212,.241514,.450184,.54902,.792427,.244242,.447543,.552941,.798608,.24704,.444848,.556863,.804752,.249911,.442102,.560784,.810855,.252861,.439305,.564706,.816914,.255895,.436461,.568627,.822926,.259016,.433573,.572549,.828886,.262229,.430644,.576471,.834791,.26554,.427671,.580392,.840636,.268953,.424666,.584314,.846416,.272473,.421631,.588235,.852126,.276106,.418573,.592157,.857763,.279857,.415496,.596078,.86332,.283729,.412403,.6,.868793,.287728,.409303,.603922,.874176,.291859,.406205,.607843,.879464,.296125,.403118,.611765,.884651,.30053,.400047,.615686,.889731,.305079,.397002,.619608,.8947,.309773,.393995,.623529,.899552,.314616,.391037,.627451,.904281,.31961,.388137,.631373,.908884,.324755,.385308,.635294,.913354,.330052,.382563,.639216,.917689,.3355,.379915,.643137,.921884,.341098,.377376,.647059,.925937,.346844,.374959,.65098,.929845,.352734,.372677,.654902,.933606,.358764,.370541,.658824,.937221,.364929,.368567,.662745,.940687,.371224,.366762,.666667,.944006,.377643,.365136,.670588,.94718,.384178,.363701,.67451,.95021,.39082,.362468,.678431,.953099,.397563,.361438,.682353,.955849,.4044,.360619,.686275,.958464,.411324,.360014,.690196,.960949,.418323,.35963,.694118,.96331,.42539,.359469,.698039,.965549,.432519,.359529,.701961,.967671,.439703,.35981,.705882,.96968,.446936,.360311,.709804,.971582,.45421,.36103,.713725,.973381,.46152,.361965,.717647,.975082,.468861,.363111,.721569,.97669,.476226,.364466,.72549,.97821,.483612,.366025,.729412,.979645,.491014,.367783,.733333,.981,.498428,.369734,.737255,.982279,.505851,.371874,.741176,.983485,.51328,.374198,.745098,.984622,.520713,.376698,.74902,.985693,.528148,.379371,.752941,.9867,.535582,.38221,.756863,.987646,.543015,.38521,.760784,.988533,.550446,.388365,.764706,.989363,.557873,.391671,.768627,.990138,.565296,.395122,.772549,.990871,.572706,.398714,.776471,.991558,.580107,.402441,.780392,.992196,.587502,.406299,.784314,.992785,.594891,.410283,.788235,.993326,.602275,.41439,.792157,.993834,.609644,.418613,.796078,.994309,.616999,.42295,.8,.994738,.62435,.427397,.803922,.995122,.631696,.431951,.807843,.99548,.639027,.436607,.811765,.99581,.646344,.441361,.815686,.996096,.653659,.446213,.819608,.996341,.660969,.45116,.823529,.99658,.668256,.456192,.827451,.996775,.675541,.461314,.831373,.996925,.682828,.466526,.835294,.997077,.690088,.471811,.839216,.997186,.697349,.477182,.843137,.997254,.704611,.482635,.847059,.997325,.711848,.488154,.85098,.997351,.719089,.493755,.854902,.997351,.726324,.499428,.858824,.997341,.733545,.505167,.862745,.997285,.740772,.510983,.866667,.997228,.747981,.516859,.870588,.997138,.75519,.522806,.87451,.997019,.762398,.528821,.878431,.996898,.769591,.534892,.882353,.996727,.776795,.541039,.886275,.996571,.783977,.547233,.890196,.996369,.791167,.553499,.894118,.996162,.798348,.55982,.898039,.995932,.805527,.566202,.901961,.99568,.812706,.572645,.905882,.995424,.819875,.57914,.909804,.995131,.827052,.585701,.913725,.994851,.834213,.592307,.917647,.994524,.841387,.598983,.921569,.994222,.84854,.605696,.92549,.993866,.855711,.612482,.929412,.993545,.862859,.619299,.933333,.99317,.870024,.626189,.937255,.992831,.877168,.633109,.941176,.99244,.88433,.640099,.945098,.992089,.89147,.647116,.94902,.991688,.898627,.654202,.952941,.991332,.905763,.661309,.956863,.99093,.912915,.668481,.960784,.99057,.920049,.675675,.964706,.990175,.927196,.682926,.968627,.989815,.934329,.690198,.972549,.989434,.94147,.697519,.976471,.989077,.948604,.704863,.980392,.988717,.955742,.712242,.984314,.988367,.962878,.719649,.988235,.988033,.970012,.727077,.992157,.987691,.977154,.734536,.996078,.987387,.984288,.742002,1,.987053,.991438,.749504]},{ColorSpace:"Diverging",Name:"Inferno (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.001462,466e-6,.013866,.003922,.002267,.00127,.01857,.007843,.003299,.002249,.024239,.011765,.004547,.003392,.030909,.015686,.006006,.004692,.038558,.019608,.007676,.006136,.046836,.023529,.009561,.007713,.055143,.027451,.011663,.009417,.06346,.031373,.013995,.011225,.071862,.035294,.016561,.013136,.080282,.039216,.019373,.015133,.088767,.043137,.022447,.017199,.097327,.047059,.025793,.019331,.10593,.05098,.029432,.021503,.114621,.054902,.033385,.023702,.123397,.058824,.037668,.025921,.132232,.062745,.042253,.028139,.141141,.066667,.046915,.030324,.150164,.070588,.051644,.032474,.159254,.07451,.056449,.034569,.168414,.078431,.06134,.03659,.177642,.082353,.066331,.038504,.186962,.086275,.071429,.040294,.196354,.090196,.076637,.041905,.205799,.094118,.081962,.043328,.215289,.098039,.087411,.044556,.224813,.101961,.09299,.045583,.234358,.105882,.098702,.046402,.243904,.109804,.104551,.047008,.25343,.113725,.110536,.047399,.262912,.117647,.116656,.047574,.272321,.121569,.122908,.047536,.281624,.12549,.129285,.047293,.290788,.129412,.135778,.046856,.299776,.133333,.142378,.046242,.308553,.137255,.149073,.045468,.317085,.141176,.15585,.044559,.325338,.145098,.162689,.043554,.333277,.14902,.169575,.042489,.340874,.152941,.176493,.041402,.348111,.156863,.183429,.040329,.354971,.160784,.190367,.039309,.361447,.164706,.197297,.0384,.367535,.168627,.204209,.037632,.373238,.172549,.211095,.03703,.378563,.176471,.217949,.036615,.383522,.180392,.224763,.036405,.388129,.184314,.231538,.036405,.3924,.188235,.238273,.036621,.396353,.192157,.244967,.037055,.400007,.196078,.25162,.037705,.403378,.2,.258234,.038571,.406485,.203922,.26481,.039647,.409345,.207843,.271347,.040922,.411976,.211765,.27785,.042353,.414392,.215686,.284321,.043933,.416608,.219608,.290763,.045644,.418637,.223529,.297178,.04747,.420491,.227451,.303568,.049396,.422182,.231373,.309935,.051407,.423721,.235294,.316282,.05349,.425116,.239216,.32261,.055634,.426377,.243137,.328921,.057827,.427511,.247059,.335217,.06006,.428524,.25098,.3415,.062325,.429425,.254902,.347771,.064616,.430217,.258824,.354032,.066925,.430906,.262745,.360284,.069247,.431497,.266667,.366529,.071579,.431994,.270588,.372768,.073915,.4324,.27451,.379001,.076253,.432719,.278431,.385228,.078591,.432955,.282353,.391453,.080927,.433109,.286275,.397674,.083257,.433183,.290196,.403894,.08558,.433179,.294118,.410113,.087896,.433098,.298039,.416331,.090203,.432943,.301961,.422549,.092501,.432714,.305882,.428768,.09479,.432412,.309804,.434987,.097069,.432039,.313725,.441207,.099338,.431594,.317647,.447428,.101597,.43108,.321569,.453651,.103848,.430498,.32549,.459875,.106089,.429846,.329412,.4661,.108322,.429125,.333333,.472328,.110547,.428334,.337255,.478558,.112764,.427475,.341176,.484789,.114974,.426548,.345098,.491022,.117179,.425552,.34902,.497257,.119379,.424488,.352941,.503493,.121575,.423356,.356863,.50973,.123769,.422156,.360784,.515967,.12596,.420887,.364706,.522206,.12815,.419549,.368627,.528444,.130341,.418142,.372549,.534683,.132534,.416667,.376471,.54092,.134729,.415123,.380392,.547157,.136929,.413511,.384314,.553392,.139134,.411829,.388235,.559624,.141346,.410078,.392157,.565854,.143567,.408258,.396078,.572081,.145797,.406369,.4,.578304,.148039,.404411,.403922,.584521,.150294,.402385,.407843,.590734,.152563,.40029,.411765,.59694,.154848,.398125,.415686,.603139,.157151,.395891,.419608,.60933,.159474,.393589,.423529,.615513,.161817,.391219,.427451,.621685,.164184,.388781,.431373,.627847,.166575,.386276,.435294,.633998,.168992,.383704,.439216,.640135,.171438,.381065,.443137,.64626,.173914,.378359,.447059,.652369,.176421,.375586,.45098,.658463,.178962,.372748,.454902,.66454,.181539,.369846,.458824,.670599,.184153,.366879,.462745,.676638,.186807,.363849,.466667,.682656,.189501,.360757,.470588,.688653,.192239,.357603,.47451,.694627,.195021,.354388,.478431,.700576,.197851,.351113,.482353,.7065,.200728,.347777,.486275,.712396,.203656,.344383,.490196,.718264,.206636,.340931,.494118,.724103,.20967,.337424,.498039,.729909,.212759,.333861,.501961,.735683,.215906,.330245,.505882,.741423,.219112,.326576,.509804,.747127,.222378,.322856,.513725,.752794,.225706,.319085,.517647,.758422,.229097,.315266,.521569,.76401,.232554,.311399,.52549,.769556,.236077,.307485,.529412,.775059,.239667,.303526,.533333,.780517,.243327,.299523,.537255,.785929,.247056,.295477,.541176,.791293,.250856,.29139,.545098,.796607,.254728,.287264,.54902,.801871,.258674,.283099,.552941,.807082,.262692,.278898,.556863,.812239,.266786,.274661,.560784,.817341,.270954,.27039,.564706,.822386,.275197,.266085,.568627,.827372,.279517,.26175,.572549,.832299,.283913,.257383,.576471,.837165,.288385,.252988,.580392,.841969,.292933,.248564,.584314,.846709,.297559,.244113,.588235,.851384,.30226,.239636,.592157,.855992,.307038,.235133,.596078,.860533,.311892,.230606,.6,.865006,.316822,.226055,.603922,.869409,.321827,.221482,.607843,.873741,.326906,.216886,.611765,.878001,.33206,.212268,.615686,.882188,.337287,.207628,.619608,.886302,.342586,.202968,.623529,.890341,.347957,.198286,.627451,.894305,.353399,.193584,.631373,.898192,.358911,.18886,.635294,.902003,.364492,.184116,.639216,.905735,.37014,.17935,.643137,.90939,.375856,.174563,.647059,.912966,.381636,.169755,.65098,.916462,.387481,.164924,.654902,.919879,.393389,.16007,.658824,.923215,.399359,.155193,.662745,.92647,.405389,.150292,.666667,.929644,.411479,.145367,.670588,.932737,.417627,.140417,.67451,.935747,.423831,.13544,.678431,.938675,.430091,.130438,.682353,.941521,.436405,.125409,.686275,.944285,.442772,.120354,.690196,.946965,.449191,.115272,.694118,.949562,.45566,.110164,.698039,.952075,.462178,.105031,.701961,.954506,.468744,.099874,.705882,.956852,.475356,.094695,.709804,.959114,.482014,.089499,.713725,.961293,.488716,.084289,.717647,.963387,.495462,.079073,.721569,.965397,.502249,.073859,.72549,.967322,.509078,.068659,.729412,.969163,.515946,.063488,.733333,.970919,.522853,.058367,.737255,.97259,.529798,.053324,.741176,.974176,.53678,.048392,.745098,.975677,.543798,.043618,.74902,.977092,.55085,.03905,.752941,.978422,.557937,.034931,.756863,.979666,.565057,.031409,.760784,.980824,.572209,.028508,.764706,.981895,.579392,.02625,.768627,.982881,.586606,.024661,.772549,.983779,.593849,.02377,.776471,.984591,.601122,.023606,.780392,.985315,.608422,.024202,.784314,.985952,.61575,.025592,.788235,.986502,.623105,.027814,.792157,.986964,.630485,.030908,.796078,.987337,.63789,.034916,.8,.987622,.64532,.039886,.803922,.987819,.652773,.045581,.807843,.987926,.66025,.05175,.811765,.987945,.667748,.058329,.815686,.987874,.675267,.065257,.819608,.987714,.682807,.072489,.823529,.987464,.690366,.07999,.827451,.987124,.697944,.087731,.831373,.986694,.70554,.095694,.835294,.986175,.713153,.103863,.839216,.985566,.720782,.112229,.843137,.984865,.728427,.120785,.847059,.984075,.736087,.129527,.85098,.983196,.743758,.138453,.854902,.982228,.751442,.147565,.858824,.981173,.759135,.156863,.862745,.980032,.766837,.166353,.866667,.978806,.774545,.176037,.870588,.977497,.782258,.185923,.87451,.976108,.789974,.196018,.878431,.974638,.797692,.206332,.882353,.973088,.805409,.216877,.886275,.971468,.813122,.227658,.890196,.969783,.820825,.238686,.894118,.968041,.828515,.249972,.898039,.966243,.836191,.261534,.901961,.964394,.843848,.273391,.905882,.962517,.851476,.285546,.909804,.960626,.859069,.29801,.913725,.95872,.866624,.31082,.917647,.956834,.874129,.323974,.921569,.954997,.881569,.337475,.92549,.953215,.888942,.351369,.929412,.951546,.896226,.365627,.933333,.950018,.903409,.380271,.937255,.948683,.910473,.395289,.941176,.947594,.917399,.410665,.945098,.946809,.924168,.426373,.94902,.946392,.930761,.442367,.952941,.946403,.937159,.458592,.956863,.946903,.943348,.47497,.960784,.947937,.949318,.491426,.964706,.949545,.955063,.50786,.968627,.95174,.960587,.524203,.972549,.954529,.965896,.540361,.976471,.957896,.971003,.556275,.980392,.961812,.975924,.571925,.984314,.966249,.980678,.587206,.988235,.971162,.985282,.602154,.992157,.976511,.989753,.61676,.996078,.982257,.994109,.631017,1,.988362,.998364,.644924]},{ColorSpace:"Diverging",Name:"Plasma (matplotlib)",NanColor:[0,1,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Nathaniel J. Smith & Stefan van der Walt",RGBPoints:[0,.050383,.029803,.527975,.003922,.063536,.028426,.533124,.007843,.075353,.027206,.538007,.011765,.086222,.026125,.542658,.015686,.096379,.025165,.547103,.019608,.10598,.024309,.551368,.023529,.115124,.023556,.555468,.027451,.123903,.022878,.559423,.031373,.132381,.022258,.56325,.035294,.140603,.021687,.566959,.039216,.148607,.021154,.570562,.043137,.156421,.020651,.574065,.047059,.16407,.020171,.577478,.05098,.171574,.019706,.580806,.054902,.17895,.019252,.584054,.058824,.186213,.018803,.587228,.062745,.193374,.018354,.59033,.066667,.200445,.017902,.593364,.070588,.207435,.017442,.596333,.07451,.21435,.016973,.599239,.078431,.221197,.016497,.602083,.082353,.227983,.016007,.604867,.086275,.234715,.015502,.607592,.090196,.241396,.014979,.610259,.094118,.248032,.014439,.612868,.098039,.254627,.013882,.615419,.101961,.261183,.013308,.617911,.105882,.267703,.012716,.620346,.109804,.274191,.012109,.622722,.113725,.280648,.011488,.625038,.117647,.287076,.010855,.627295,.121569,.293478,.010213,.62949,.12549,.299855,.009561,.631624,.129412,.30621,.008902,.633694,.133333,.312543,.008239,.6357,.137255,.318856,.007576,.63764,.141176,.32515,.006915,.639512,.145098,.331426,.006261,.641316,.14902,.337683,.005618,.643049,.152941,.343925,.004991,.64471,.156863,.35015,.004382,.646298,.160784,.356359,.003798,.64781,.164706,.362553,.003243,.649245,.168627,.368733,.002724,.650601,.172549,.374897,.002245,.651876,.176471,.381047,.001814,.653068,.180392,.387183,.001434,.654177,.184314,.393304,.001114,.655199,.188235,.399411,859e-6,.656133,.192157,.405503,678e-6,.656977,.196078,.41158,577e-6,.65773,.2,.417642,564e-6,.65839,.203922,.423689,646e-6,.658956,.207843,.429719,831e-6,.659425,.211765,.435734,.001127,.659797,.215686,.441732,.00154,.660069,.219608,.447714,.00208,.66024,.223529,.453677,.002755,.66031,.227451,.459623,.003574,.660277,.231373,.46555,.004545,.660139,.235294,.471457,.005678,.659897,.239216,.477344,.00698,.659549,.243137,.48321,.00846,.659095,.247059,.489055,.010127,.658534,.25098,.494877,.01199,.657865,.254902,.500678,.014055,.657088,.258824,.506454,.016333,.656202,.262745,.512206,.018833,.655209,.266667,.517933,.021563,.654109,.270588,.523633,.024532,.652901,.27451,.529306,.027747,.651586,.278431,.534952,.031217,.650165,.282353,.54057,.03495,.64864,.286275,.546157,.038954,.64701,.290196,.551715,.043136,.645277,.294118,.557243,.047331,.643443,.298039,.562738,.051545,.641509,.301961,.568201,.055778,.639477,.305882,.573632,.060028,.637349,.309804,.579029,.064296,.635126,.313725,.584391,.068579,.632812,.317647,.589719,.072878,.630408,.321569,.595011,.07719,.627917,.32549,.600266,.081516,.625342,.329412,.605485,.085854,.622686,.333333,.610667,.090204,.619951,.337255,.615812,.094564,.61714,.341176,.620919,.098934,.614257,.345098,.625987,.103312,.611305,.34902,.631017,.107699,.608287,.352941,.636008,.112092,.605205,.356863,.640959,.116492,.602065,.360784,.645872,.120898,.598867,.364706,.650746,.125309,.595617,.368627,.65558,.129725,.592317,.372549,.660374,.134144,.588971,.376471,.665129,.138566,.585582,.380392,.669845,.142992,.582154,.384314,.674522,.147419,.578688,.388235,.67916,.151848,.575189,.392157,.683758,.156278,.57166,.396078,.688318,.160709,.568103,.4,.69284,.165141,.564522,.403922,.697324,.169573,.560919,.407843,.701769,.174005,.557296,.411765,.706178,.178437,.553657,.415686,.710549,.182868,.550004,.419608,.714883,.187299,.546338,.423529,.719181,.191729,.542663,.427451,.723444,.196158,.538981,.431373,.72767,.200586,.535293,.435294,.731862,.205013,.531601,.439216,.736019,.209439,.527908,.443137,.740143,.213864,.524216,.447059,.744232,.218288,.520524,.45098,.748289,.222711,.516834,.454902,.752312,.227133,.513149,.458824,.756304,.231555,.509468,.462745,.760264,.235976,.505794,.466667,.764193,.240396,.502126,.470588,.76809,.244817,.498465,.47451,.771958,.249237,.494813,.478431,.775796,.253658,.491171,.482353,.779604,.258078,.487539,.486275,.783383,.2625,.483918,.490196,.787133,.266922,.480307,.494118,.790855,.271345,.476706,.498039,.794549,.27577,.473117,.501961,.798216,.280197,.469538,.505882,.801855,.284626,.465971,.509804,.805467,.289057,.462415,.513725,.809052,.293491,.45887,.517647,.812612,.297928,.455338,.521569,.816144,.302368,.451816,.52549,.819651,.306812,.448306,.529412,.823132,.311261,.444806,.533333,.826588,.315714,.441316,.537255,.830018,.320172,.437836,.541176,.833422,.324635,.434366,.545098,.836801,.329105,.430905,.54902,.840155,.33358,.427455,.552941,.843484,.338062,.424013,.556863,.846788,.342551,.420579,.560784,.850066,.347048,.417153,.564706,.853319,.351553,.413734,.568627,.856547,.356066,.410322,.572549,.85975,.360588,.406917,.576471,.862927,.365119,.403519,.580392,.866078,.36966,.400126,.584314,.869203,.374212,.396738,.588235,.872303,.378774,.393355,.592157,.875376,.383347,.389976,.596078,.878423,.387932,.3866,.6,.881443,.392529,.383229,.603922,.884436,.397139,.37986,.607843,.887402,.401762,.376494,.611765,.89034,.406398,.37313,.615686,.89325,.411048,.369768,.619608,.896131,.415712,.366407,.623529,.898984,.420392,.363047,.627451,.901807,.425087,.359688,.631373,.904601,.429797,.356329,.635294,.907365,.434524,.35297,.639216,.910098,.439268,.34961,.643137,.9128,.444029,.346251,.647059,.915471,.448807,.34289,.65098,.918109,.453603,.339529,.654902,.920714,.458417,.336166,.658824,.923287,.463251,.332801,.662745,.925825,.468103,.329435,.666667,.928329,.472975,.326067,.670588,.930798,.477867,.322697,.67451,.933232,.48278,.319325,.678431,.93563,.487712,.315952,.682353,.93799,.492667,.312575,.686275,.940313,.497642,.309197,.690196,.942598,.502639,.305816,.694118,.944844,.507658,.302433,.698039,.947051,.512699,.299049,.701961,.949217,.517763,.295662,.705882,.951344,.52285,.292275,.709804,.953428,.52796,.288883,.713725,.95547,.533093,.28549,.717647,.957469,.53825,.282096,.721569,.959424,.543431,.278701,.72549,.961336,.548636,.275305,.729412,.963203,.553865,.271909,.733333,.965024,.559118,.268513,.737255,.966798,.564396,.265118,.741176,.968526,.5697,.261721,.745098,.970205,.575028,.258325,.74902,.971835,.580382,.254931,.752941,.973416,.585761,.25154,.756863,.974947,.591165,.248151,.760784,.976428,.596595,.244767,.764706,.977856,.602051,.241387,.768627,.979233,.607532,.238013,.772549,.980556,.613039,.234646,.776471,.981826,.618572,.231287,.780392,.983041,.624131,.227937,.784314,.984199,.629718,.224595,.788235,.985301,.63533,.221265,.792157,.986345,.640969,.217948,.796078,.987332,.646633,.214648,.8,.98826,.652325,.211364,.803922,.989128,.658043,.2081,.807843,.989935,.663787,.204859,.811765,.990681,.669558,.201642,.815686,.991365,.675355,.198453,.819608,.991985,.681179,.195295,.823529,.992541,.68703,.19217,.827451,.993032,.692907,.189084,.831373,.993456,.69881,.186041,.835294,.993814,.704741,.183043,.839216,.994103,.710698,.180097,.843137,.994324,.716681,.177208,.847059,.994474,.722691,.174381,.85098,.994553,.728728,.171622,.854902,.994561,.734791,.168938,.858824,.994495,.74088,.166335,.862745,.994355,.746995,.163821,.866667,.994141,.753137,.161404,.870588,.993851,.759304,.159092,.87451,.993482,.765499,.156891,.878431,.993033,.77172,.154808,.882353,.992505,.777967,.152855,.886275,.991897,.784239,.151042,.890196,.991209,.790537,.149377,.894118,.990439,.796859,.14787,.898039,.989587,.803205,.146529,.901961,.988648,.809579,.145357,.905882,.987621,.815978,.144363,.909804,.986509,.822401,.143557,.913725,.985314,.828846,.142945,.917647,.984031,.835315,.142528,.921569,.982653,.841812,.142303,.92549,.98119,.848329,.142279,.929412,.979644,.854866,.142453,.933333,.977995,.861432,.142808,.937255,.976265,.868016,.143351,.941176,.974443,.874622,.144061,.945098,.97253,.88125,.144923,.94902,.970533,.887896,.145919,.952941,.968443,.894564,.147014,.956863,.966271,.901249,.14818,.960784,.964021,.90795,.14937,.964706,.961681,.914672,.15052,.968627,.959276,.921407,.151566,.972549,.956808,.928152,.152409,.976471,.954287,.934908,.152921,.980392,.951726,.941671,.152925,.984314,.949151,.948435,.152178,.988235,.946602,.95519,.150328,.992157,.944152,.961916,.146861,.996078,.941896,.96859,.140956,1,.940015,.975158,.131326]},{ColorSpace:"Diverging",Name:"Viridis (matplotlib)",NanColor:[1,0,0],Source:"https://github.com/BIDS/colormap/blob/master/colormaps.py",License:"CC0",Creator:"Eric Firing",RGBPoints:[0,.267004,.004874,.329415,.003922,.26851,.009605,.335427,.007843,.269944,.014625,.341379,.011765,.271305,.019942,.347269,.015686,.272594,.025563,.353093,.019608,.273809,.031497,.358853,.023529,.274952,.037752,.364543,.027451,.276022,.044167,.370164,.031373,.277018,.050344,.375715,.035294,.277941,.056324,.381191,.039216,.278791,.062145,.386592,.043137,.279566,.067836,.391917,.047059,.280267,.073417,.397163,.05098,.280894,.078907,.402329,.054902,.281446,.08432,.407414,.058824,.281924,.089666,.412415,.062745,.282327,.094955,.417331,.066667,.282656,.100196,.42216,.070588,.28291,.105393,.426902,.07451,.283091,.110553,.431554,.078431,.283197,.11568,.436115,.082353,.283229,.120777,.440584,.086275,.283187,.125848,.44496,.090196,.283072,.130895,.449241,.094118,.282884,.13592,.453427,.098039,.282623,.140926,.457517,.101961,.28229,.145912,.46151,.105882,.281887,.150881,.465405,.109804,.281412,.155834,.469201,.113725,.280868,.160771,.472899,.117647,.280255,.165693,.476498,.121569,.279574,.170599,.479997,.12549,.278826,.17549,.483397,.129412,.278012,.180367,.486697,.133333,.277134,.185228,.489898,.137255,.276194,.190074,.493001,.141176,.275191,.194905,.496005,.145098,.274128,.199721,.498911,.14902,.273006,.20452,.501721,.152941,.271828,.209303,.504434,.156863,.270595,.214069,.507052,.160784,.269308,.218818,.509577,.164706,.267968,.223549,.512008,.168627,.26658,.228262,.514349,.172549,.265145,.232956,.516599,.176471,.263663,.237631,.518762,.180392,.262138,.242286,.520837,.184314,.260571,.246922,.522828,.188235,.258965,.251537,.524736,.192157,.257322,.25613,.526563,.196078,.255645,.260703,.528312,.2,.253935,.265254,.529983,.203922,.252194,.269783,.531579,.207843,.250425,.27429,.533103,.211765,.248629,.278775,.534556,.215686,.246811,.283237,.535941,.219608,.244972,.287675,.53726,.223529,.243113,.292092,.538516,.227451,.241237,.296485,.539709,.231373,.239346,.300855,.540844,.235294,.237441,.305202,.541921,.239216,.235526,.309527,.542944,.243137,.233603,.313828,.543914,.247059,.231674,.318106,.544834,.25098,.229739,.322361,.545706,.254902,.227802,.326594,.546532,.258824,.225863,.330805,.547314,.262745,.223925,.334994,.548053,.266667,.221989,.339161,.548752,.270588,.220057,.343307,.549413,.27451,.21813,.347432,.550038,.278431,.21621,.351535,.550627,.282353,.214298,.355619,.551184,.286275,.212395,.359683,.55171,.290196,.210503,.363727,.552206,.294118,.208623,.367752,.552675,.298039,.206756,.371758,.553117,.301961,.204903,.375746,.553533,.305882,.203063,.379716,.553925,.309804,.201239,.38367,.554294,.313725,.19943,.387607,.554642,.317647,.197636,.391528,.554969,.321569,.19586,.395433,.555276,.32549,.1941,.399323,.555565,.329412,.192357,.403199,.555836,.333333,.190631,.407061,.556089,.337255,.188923,.41091,.556326,.341176,.187231,.414746,.556547,.345098,.185556,.41857,.556753,.34902,.183898,.422383,.556944,.352941,.182256,.426184,.55712,.356863,.180629,.429975,.557282,.360784,.179019,.433756,.55743,.364706,.177423,.437527,.557565,.368627,.175841,.44129,.557685,.372549,.174274,.445044,.557792,.376471,.172719,.448791,.557885,.380392,.171176,.45253,.557965,.384314,.169646,.456262,.55803,.388235,.168126,.459988,.558082,.392157,.166617,.463708,.558119,.396078,.165117,.467423,.558141,.4,.163625,.471133,.558148,.403922,.162142,.474838,.55814,.407843,.160665,.47854,.558115,.411765,.159194,.482237,.558073,.415686,.157729,.485932,.558013,.419608,.15627,.489624,.557936,.423529,.154815,.493313,.55784,.427451,.153364,.497,.557724,.431373,.151918,.500685,.557587,.435294,.150476,.504369,.55743,.439216,.149039,.508051,.55725,.443137,.147607,.511733,.557049,.447059,.14618,.515413,.556823,.45098,.144759,.519093,.556572,.454902,.143343,.522773,.556295,.458824,.141935,.526453,.555991,.462745,.140536,.530132,.555659,.466667,.139147,.533812,.555298,.470588,.13777,.537492,.554906,.47451,.136408,.541173,.554483,.478431,.135066,.544853,.554029,.482353,.133743,.548535,.553541,.486275,.132444,.552216,.553018,.490196,.131172,.555899,.552459,.494118,.129933,.559582,.551864,.498039,.128729,.563265,.551229,.501961,.127568,.566949,.550556,.505882,.126453,.570633,.549841,.509804,.125394,.574318,.549086,.513725,.124395,.578002,.548287,.517647,.123463,.581687,.547445,.521569,.122606,.585371,.546557,.52549,.121831,.589055,.545623,.529412,.121148,.592739,.544641,.533333,.120565,.596422,.543611,.537255,.120092,.600104,.54253,.541176,.119738,.603785,.5414,.545098,.119512,.607464,.540218,.54902,.119423,.611141,.538982,.552941,.119483,.614817,.537692,.556863,.119699,.61849,.536347,.560784,.120081,.622161,.534946,.564706,.120638,.625828,.533488,.568627,.12138,.629492,.531973,.572549,.122312,.633153,.530398,.576471,.123444,.636809,.528763,.580392,.12478,.640461,.527068,.584314,.126326,.644107,.525311,.588235,.128087,.647749,.523491,.592157,.130067,.651384,.521608,.596078,.132268,.655014,.519661,.6,.134692,.658636,.517649,.603922,.137339,.662252,.515571,.607843,.14021,.665859,.513427,.611765,.143303,.669459,.511215,.615686,.146616,.67305,.508936,.619608,.150148,.676631,.506589,.623529,.153894,.680203,.504172,.627451,.157851,.683765,.501686,.631373,.162016,.687316,.499129,.635294,.166383,.690856,.496502,.639216,.170948,.694384,.493803,.643137,.175707,.6979,.491033,.647059,.180653,.701402,.488189,.65098,.185783,.704891,.485273,.654902,.19109,.708366,.482284,.658824,.196571,.711827,.479221,.662745,.202219,.715272,.476084,.666667,.20803,.718701,.472873,.670588,.214,.722114,.469588,.67451,.220124,.725509,.466226,.678431,.226397,.728888,.462789,.682353,.232815,.732247,.459277,.686275,.239374,.735588,.455688,.690196,.24607,.73891,.452024,.694118,.252899,.742211,.448284,.698039,.259857,.745492,.444467,.701961,.266941,.748751,.440573,.705882,.274149,.751988,.436601,.709804,.281477,.755203,.432552,.713725,.288921,.758394,.428426,.717647,.296479,.761561,.424223,.721569,.304148,.764704,.419943,.72549,.311925,.767822,.415586,.729412,.319809,.770914,.411152,.733333,.327796,.77398,.40664,.737255,.335885,.777018,.402049,.741176,.344074,.780029,.397381,.745098,.35236,.783011,.392636,.74902,.360741,.785964,.387814,.752941,.369214,.788888,.382914,.756863,.377779,.791781,.377939,.760784,.386433,.794644,.372886,.764706,.395174,.797475,.367757,.768627,.404001,.800275,.362552,.772549,.412913,.803041,.357269,.776471,.421908,.805774,.35191,.780392,.430983,.808473,.346476,.784314,.440137,.811138,.340967,.788235,.449368,.813768,.335384,.792157,.458674,.816363,.329727,.796078,.468053,.818921,.323998,.8,.477504,.821444,.318195,.803922,.487026,.823929,.312321,.807843,.496615,.826376,.306377,.811765,.506271,.828786,.300362,.815686,.515992,.831158,.294279,.819608,.525776,.833491,.288127,.823529,.535621,.835785,.281908,.827451,.545524,.838039,.275626,.831373,.555484,.840254,.269281,.835294,.565498,.84243,.262877,.839216,.575563,.844566,.256415,.843137,.585678,.846661,.249897,.847059,.595839,.848717,.243329,.85098,.606045,.850733,.236712,.854902,.616293,.852709,.230052,.858824,.626579,.854645,.223353,.862745,.636902,.856542,.21662,.866667,.647257,.8584,.209861,.870588,.657642,.860219,.203082,.87451,.668054,.861999,.196293,.878431,.678489,.863742,.189503,.882353,.688944,.865448,.182725,.886275,.699415,.867117,.175971,.890196,.709898,.868751,.169257,.894118,.720391,.87035,.162603,.898039,.730889,.871916,.156029,.901961,.741388,.873449,.149561,.905882,.751884,.874951,.143228,.909804,.762373,.876424,.137064,.913725,.772852,.877868,.131109,.917647,.783315,.879285,.125405,.921569,.79376,.880678,.120005,.92549,.804182,.882046,.114965,.929412,.814576,.883393,.110347,.933333,.82494,.88472,.106217,.937255,.83527,.886029,.102646,.941176,.845561,.887322,.099702,.945098,.85581,.888601,.097452,.94902,.866013,.889868,.095953,.952941,.876168,.891125,.09525,.956863,.886271,.892374,.095374,.960784,.89632,.893616,.096335,.964706,.906311,.894855,.098125,.968627,.916242,.896091,.100717,.972549,.926106,.89733,.104071,.976471,.935904,.89857,.108131,.980392,.945636,.899815,.112838,.984314,.9553,.901065,.118128,.988235,.964894,.902323,.123941,.992157,.974417,.90359,.130215,.996078,.983868,.904867,.136897,1,.993248,.906157,.143936]},{ShowIndexedColorActiveValues:1,IndexedColors:[.07,.5,.7,1,1,1,.85,1,1,.8,.5,1,.76,1,0,1,.71,.71,.5,.5,.5,.05,.05,1,1,.05,.05,.7,1,1,.7,.89,.96,.67,.36,.95,.54,1,0,.75,.65,.65,.5,.6,.6,1,.5,0,1,1,.19,.12,.94,.12,.5,.82,.89,.56,.25,.83,.24,1,0,.9,.9,.9,.75,.76,.78,.65,.65,.67,.54,.6,.78,.61,.48,.78,.5,.48,.78,.44,.48,.78,.36,.48,.76,1,.48,.38,.49,.5,.69,.76,.56,.56,.4,.56,.56,.74,.5,.89,1,.63,0,.65,.16,.16,.36,.72,.82,.44,.18,.69,0,1,0,.58,1,1,.58,.88,.88,.45,.76,.79,.33,.71,.71,.23,.62,.62,.14,.56,.56,.04,.49,.55,0,.41,.52,.88,.88,1,1,.85,.56,.65,.46,.45,.4,.5,.5,.62,.39,.71,.83,.48,0,.58,0,.58,.26,.62,.69,.34,.09,.56,0,.79,0,.44,.83,1,1,1,.78,.85,1,.78,.78,1,.78,.64,1,.78,.56,1,.78,.38,1,.78,.27,1,.78,.19,1,.78,.12,1,.78,0,1,.61,0,.9,.46,0,.83,.32,0,.75,.22,0,.67,.14,.3,.76,1,.3,.65,1,.13,.58,.84,.15,.49,.67,.15,.4,.59,.09,.33,.53,.96,.93,.82,.8,.82,.12,.71,.71,.76,.65,.33,.3,.34,.35,.38,.62,.31,.71,.67,.36,0,.46,.31,.27,.26,.51,.59,.26,0,.4,0,.49,0,.44,.67,.98,0,.73,1,0,.63,1,0,.56,1,0,.5,1,0,.42,1,.33,.36,.95,.47,.36,.89,.54,.31,.89,.63,.21,.83,.7,.12,.83,.7,.12,.73,.7,.05,.65,.74,.05,.53,.78,0,.4,.8,0,.35,.82,0,.31,.85,0,.27,.88,0,.22,.9,0,.18,.91,0,.15,.92,0,.14,.93,0,.13,.94,0,.12,.95,0,.11,.96,0,.1,.97,0,.09,.98,0,.08,.99,0,.07,1,0,.06],Annotations:[0,"Xx",1,"H",2,"He",3,"Li",4,"Be",5,"B",6,"C",7,"N",8,"O",9,"F",10,"Ne",11,"Na",12,"Mg",13,"Al",14,"Si",15,"P",16,"S",17,"Cl",18,"Ar",19,"K",20,"Ca",21,"Sc",22,"Ti",23,"V",24,"Cr",25,"Mn",26,"Fe",27,"Co",28,"Ni",29,"Cu",30,"Zn",31,"Ga",32,"Ge",33,"As",34,"Se",35,"Br",36,"Kr",37,"Rb",38,"Sr",39,"Y",40,"Zr",41,"Nb",42,"Mo",43,"Tc",44,"Ru",45,"Rh",46,"Pd",47,"Ag",48,"Cd",49,"In",50,"Sn",51,"Sb",52,"Te",53,"I",54,"Xe",55,"Cs",56,"Ba",57,"La",58,"Ce",59,"Pr",60,"Nd",61,"Pm",62,"Sm",63,"Eu",64,"Gd",65,"Tb",66,"Dy",67,"Ho",68,"Er",69,"Tm",70,"Yb",71,"Lu",72,"Hf",73,"Ta",74,"W",75,"Re",76,"Os",77,"Ir",78,"Pt",79,"Au",80,"Hg",81,"Tl",82,"Pb",83,"Bi",84,"Po",85,"At",86,"Rn",87,"Fr",88,"Ra",89,"Ac",90,"Th",91,"Pa",92,"U",93,"Np",94,"Pu",95,"Am",96,"Cm",97,"Bk",98,"Cf",99,"Es",100,"Fm",101,"Md",102,"No",103,"Lr",104,"Rf",105,"Db",106,"Sg",107,"Bh",108,"Hs",109,"Mt",110,"Ds",111,"Rg",112,"Cn",113,"Uut",114,"Uuq",115,"Uup",116,"Uuh",117,"Uus",118,"Uuo"],Name:"BlueObeliskElements"}];const Xr=Object.create(null);QC.filter(t=>t.RGBPoints).filter(t=>t.ColorSpace!=="CIELAB").forEach(t=>{Xr[t.Name]=t});const qr=Object.keys(Xr);qr.sort();function eT(t){return Xr[t]}function tT(t){!t.RGBPoints||t.ColorSpace==="CIELAB"||(Xr[t.Name]||(qr.push(t.Name),qr.sort()),Xr[t.Name]=t)}function nT(t){const e=qr.indexOf(t);e>-1&&qr.splice(e,1),delete Xr[t]}var z0={addPreset:tT,removePresetByName:nT,getPresetByName:eT,rgbPresetNames:qr},Fh={ColorSpace:{RGB:0,HSV:1,LAB:2,DIVERGING:3},Scale:{LINEAR:0,LOG10:1}};const{ColorSpace:tn,Scale:Ah}=Fh,{ScalarMappingTarget:go}=ji,{vtkDebugMacro:rT,vtkErrorMacro:wn,vtkWarningMacro:aT}=k;function Vh(t,e){const a=t[0],n=t[1],r=t[2],i=Math.sqrt(a*a+n*n+r*r),s=i>.001?Math.acos(a/i):0,u=s>.001?Math.atan2(r,n):0;e[0]=i,e[1]=s,e[2]=u}function iT(t,e){const a=t[0],n=t[1],r=t[2];e[0]=a*Math.cos(n),e[1]=a*Math.sin(n)*Math.cos(r),e[2]=a*Math.sin(n)*Math.sin(r)}function Bh(t,e){if(t[0]>=e-.1)return t[2];const a=t[1]*Math.sqrt(e*e-t[0]*t[0])/(t[0]*Math.sin(t[1]));return t[2]>-.3*Math.PI?t[2]+a:t[2]-a}function oT(t,e){let a=t-e;for(a<0&&(a=-a);a>=2*Math.PI;)a-=2*Math.PI;return a>Math.PI&&(a=2*Math.PI-a),a}function Uh(t,e,a,n){const r=[],i=[];Zn(e,r),Zn(a,i);const s=[],u=[];Vh(r,s),Vh(i,u);let c=t;if(s[1]>.05&&u[1]>.05&&oT(s[2],u[2])>.33*Math.PI){let l=Math.max(s[0],u[0]);l=Math.max(88,l),t<.5?(u[0]=l,u[1]=0,u[2]=0,c*=2):(s[0]=l,s[1]=0,s[2]=0,c=2*c-1)}s[1]<.05&&u[1]>.05?s[2]=Bh(u,s[0]):u[1]<.05&&s[1]>.05&&(u[2]=Bh(s,u[0]));const o=[];o[0]=(1-c)*s[0]+c*u[0],o[1]=(1-c)*s[1]+c*u[1],o[2]=(1-c)*s[2]+c*u[2];const f=[];iT(o,f),Ni(f,n)}function sT(t,e){e.classHierarchy.push("vtkColorTransferFunction"),t.getSize=()=>e.nodes.length,t.addRGBPoint=(a,n,r,i)=>t.addRGBPointLong(a,n,r,i,.5,0),t.addRGBPointLong=function(a,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;if(s<0||s>1)return wn("Midpoint outside range [0.0, 1.0]"),-1;if(u<0||u>1)return wn("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(a);const c={x:a,r:n,g:r,b:i,midpoint:s,sharpness:u};e.nodes.push(c),t.sortAndUpdateRange();let o=0;for(;o<e.nodes.length&&e.nodes[o].x!==a;o++);return o<e.nodes.length?o:-1},t.addHSVPoint=(a,n,r,i)=>t.addHSVPointLong(a,n,r,i,.5,0),t.addHSVPointLong=function(a,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.5,u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0;const c=[];return Jn([n,r,i],c),t.addRGBPoint(a,c[0],c[1],c[2],s,u)},t.setNodes=a=>{if(e.nodes!==a){const n=JSON.stringify(e.nodes);e.nodes=a;const r=JSON.stringify(e.nodes);if(t.sortAndUpdateRange()||n!==r)return t.modified(),!0}return!1},t.sortAndUpdateRange=()=>{const a=JSON.stringify(e.nodes);e.nodes.sort((i,s)=>i.x-s.x);const n=JSON.stringify(e.nodes),r=t.updateRange();return!r&&a!==n?(t.modified(),!0):r},t.updateRange=()=>{const a=[2];a[0]=e.mappingRange[0],a[1]=e.mappingRange[1];const n=e.nodes.length;return n?(e.mappingRange[0]=e.nodes[0].x,e.mappingRange[1]=e.nodes[n-1].x):(e.mappingRange[0]=0,e.mappingRange[1]=0),a[0]===e.mappingRange[0]&&a[1]===e.mappingRange[1]?!1:(t.modified(),!0)},t.removePoint=a=>{let n=0;for(;n<e.nodes.length&&e.nodes[n].x!==a;n++);const r=n;if(n>=e.nodes.length)return-1;let i=!1;return e.nodes.splice(n,1),(n===0||n===e.nodes.length)&&(i=t.updateRange()),i||t.modified(),r},t.movePoint=(a,n)=>{if(a!==n){t.removePoint(n);for(let r=0;r<e.nodes.length;r++)if(e.nodes[r].x===a){e.nodes[r].x=n,t.sortAndUpdateRange();break}}},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addRGBSegment=(a,n,r,i,s,u,c,o)=>{t.sortAndUpdateRange();for(let f=0;f<e.nodes.length;)e.nodes[f].x>=a&&e.nodes[f].x<=s?e.nodes.splice(f,1):f++;t.addRGBPointLong(a,n,r,i,.5,0),t.addRGBPointLong(s,u,c,o,.5,0),t.modified()},t.addHSVSegment=(a,n,r,i,s,u,c,o)=>{const f=[n,r,i],l=[u,c,o],h=[],p=[];Jn(f,h),Jn(l,p),t.addRGBSegment(a,h[0],h[1],h[2],s,p[0],p[1],p[2])},t.mapValue=a=>{const n=[];return t.getColor(a,n),[Math.floor(255*n[0]+.5),Math.floor(255*n[1]+.5),Math.floor(255*n[2]+.5),255]},t.getColor=(a,n)=>{if(e.indexedLookup){const r=t.getSize(),i=t.getAnnotatedValueIndexInternal(a);if(i<0||r===0){const s=t.getNanColorByReference();n[0]=s[0],n[1]=s[1],n[2]=s[2]}else{const s=[];t.getNodeValue(i%r,s),n[0]=s[1],n[1]=s[2],n[2]=s[3]}return}t.getTable(a,a,1,n)},t.getRedValue=a=>{const n=[];return t.getColor(a,n),n[0]},t.getGreenValue=a=>{const n=[];return t.getColor(a,n),n[1]},t.getBlueValue=a=>{const n=[];return t.getColor(a,n),n[2]},t.getTable=(a,n,r,i)=>{const s=Number(a),u=Number(n);if(Ri(s)||Ri(u)){for(let E=0;E<r;E++)i[E*3+0]=e.nanColor[0],i[E*3+1]=e.nanColor[1],i[E*3+2]=e.nanColor[2];return}let c=0;const o=e.nodes.length;let f=0,l=0,h=0;o!==0&&(f=e.nodes[o-1].r,l=e.nodes[o-1].g,h=e.nodes[o-1].b);let p=0,d=0,y=0;const m=[0,0,0],S=[0,0,0];let v=0,g=0;const x=[];let C=e.scale===Ah.LOG10;C&&(C=e.mappingRange[0]>0);let T=0,w=0,_=0;C&&(T=Math.log10(s),w=Math.log10(u));for(let E=0;E<r;E++){const D=3*E;if(r>1?C?(_=T+E/(r-1)*(w-T),p=10**_):p=s+E/(r-1)*(u-s):C?(_=.5*(T+w),p=10**_):p=.5*(s+u),e.discretize){const b=e.mappingRange;if(p>=b[0]&&p<=b[1]){const N=e.numberOfValues,R=b[1]-b[0];if(N<=1)p=b[0]+R/2;else{const M=(p-b[0])/R,A=ws(N*M);p=b[0]+A/(N-1)*R}}}for(;c<o&&p>e.nodes[c].x;)c++,c<o&&(d=e.nodes[c-1].x,y=e.nodes[c].x,C&&(d=Math.log10(d),y=Math.log10(y)),m[0]=e.nodes[c-1].r,S[0]=e.nodes[c].r,m[1]=e.nodes[c-1].g,S[1]=e.nodes[c].g,m[2]=e.nodes[c-1].b,S[2]=e.nodes[c].b,v=e.nodes[c-1].midpoint,g=e.nodes[c-1].sharpness,v<1e-5&&(v=1e-5),v>.99999&&(v=.99999));if(p>e.mappingRange[1])i[D]=0,i[D+1]=0,i[D+2]=0,e.clamping&&(t.getUseAboveRangeColor()?(i[D]=e.aboveRangeColor[0],i[D+1]=e.aboveRangeColor[1],i[D+2]=e.aboveRangeColor[2]):(i[D]=f,i[D+1]=l,i[D+2]=h));else if(p<e.mappingRange[0]||xl(p)&&p<0)i[D]=0,i[D+1]=0,i[D+2]=0,e.clamping&&(t.getUseBelowRangeColor()?(i[D]=e.belowRangeColor[0],i[D+1]=e.belowRangeColor[1],i[D+2]=e.belowRangeColor[2]):o>0&&(i[D]=e.nodes[0].r,i[D+1]=e.nodes[0].g,i[D+2]=e.nodes[0].b));else if(c===0&&(Math.abs(p-s)<1e-6||e.discretize))o>0?(i[D]=e.nodes[0].r,i[D+1]=e.nodes[0].g,i[D+2]=e.nodes[0].b):(i[D]=0,i[D+1]=0,i[D+2]=0);else{let b=0;if(C?b=(_-d)/(y-d):b=(p-d)/(y-d),b<v?b=.5*b/v:b=.5+.5*(b-v)/(1-v),g>.99)if(b<.5){i[D]=m[0],i[D+1]=m[1],i[D+2]=m[2];continue}else{i[D]=S[0],i[D+1]=S[1],i[D+2]=S[2];continue}if(g<.01){if(e.colorSpace===tn.RGB)i[D]=(1-b)*m[0]+b*S[0],i[D+1]=(1-b)*m[1]+b*S[1],i[D+2]=(1-b)*m[2]+b*S[2];else if(e.colorSpace===tn.HSV){const F=[],z=[];_a(m,F),_a(S,z),e.hSVWrap&&(F[0]-z[0]>.5||z[0]-F[0]>.5)&&(F[0]>z[0]?F[0]-=1:z[0]-=1);const H=[];H[0]=(1-b)*F[0]+b*z[0],H[0]<0&&(H[0]+=1),H[1]=(1-b)*F[1]+b*z[1],H[2]=(1-b)*F[2]+b*z[2],Jn(H,x),i[D]=x[0],i[D+1]=x[1],i[D+2]=x[2]}else if(e.colorSpace===tn.LAB){const F=[],z=[];Zn(m,F),Zn(S,z);const H=[];H[0]=(1-b)*F[0]+b*z[0],H[1]=(1-b)*F[1]+b*z[1],H[2]=(1-b)*F[2]+b*z[2],Ni(H,x),i[D]=x[0],i[D+1]=x[1],i[D+2]=x[2]}else e.colorSpace===tn.DIVERGING?(Uh(b,m,S,x),i[D]=x[0],i[D+1]=x[1],i[D+2]=x[2]):wn("ColorSpace set to invalid value.",e.colorSpace);continue}b<.5?b=.5*(b*2)**(1+10*g):b>.5&&(b=1-.5*((1-b)*2)**(1+10*g));const N=b*b,R=N*b,M=2*R-3*N+1,A=-2*R+3*N,I=R-2*N+b,$=R-N;let U,B;if(e.colorSpace===tn.RGB)for(let F=0;F<3;F++)U=S[F]-m[F],B=(1-g)*U,i[D+F]=M*m[F]+A*S[F]+I*B+$*B;else if(e.colorSpace===tn.HSV){const F=[],z=[];_a(m,F),_a(S,z),e.hSVWrap&&(F[0]-z[0]>.5||z[0]-F[0]>.5)&&(F[0]>z[0]?F[0]-=1:z[0]-=1);const H=[];for(let X=0;X<3;X++)U=z[X]-F[X],B=(1-g)*U,H[X]=M*F[X]+A*z[X]+I*B+$*B,X===0&&H[X]<0&&(H[X]+=1);Jn(H,x),i[D]=x[0],i[D+1]=x[1],i[D+2]=x[2]}else if(e.colorSpace===tn.LAB){const F=[],z=[];Zn(m,F),Zn(S,z);const H=[];for(let X=0;X<3;X++)U=z[X]-F[X],B=(1-g)*U,H[X]=M*F[X]+A*z[X]+I*B+$*B;Ni(H,x),i[D]=x[0],i[D+1]=x[1],i[D+2]=x[2]}else e.colorSpace===tn.DIVERGING?(Uh(b,m,S,x),i[D]=x[0],i[D+1]=x[1],i[D+2]=x[2]):wn("ColorSpace set to invalid value.");for(let F=0;F<3;F++)i[D+F]=i[D+F]<0?0:i[D+F],i[D+F]=i[D+F]>1?1:i[D+F]}}},t.getUint8Table=function(a,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.getMTime()<=e.buildTime&&e.tableSize===r&&e.tableWithAlpha!==i)return e.table;if(e.nodes.length===0)return wn("Attempting to lookup a value with no points in the function"),e.table;const s=i?4:3;(e.tableSize!==r||e.tableWithAlpha!==i)&&(e.table=new Uint8Array(r*s),e.tableSize=r,e.tableWithAlpha=i);const u=[];t.getTable(a,n,r,u);for(let c=0;c<r;c++)e.table[c*s+0]=Math.floor(u[c*3+0]*255+.5),e.table[c*s+1]=Math.floor(u[c*3+1]*255+.5),e.table[c*s+2]=Math.floor(u[c*3+2]*255+.5),i&&(e.table[c*s+3]=255);return e.buildTime.modified(),e.table},t.buildFunctionFromArray=a=>{t.removeAllPoints();const n=a.getNumberOfComponents();for(let r=0;r<a.getNumberOfTuples();r++)switch(n){case 3:{e.nodes.push({x:r,r:a.getComponent(r,0),g:a.getComponent(r,1),b:a.getComponent(r,2),midpoint:.5,sharpness:0});break}case 4:{e.nodes.push({x:a.getComponent(r,0),r:a.getComponent(r,1),g:a.getComponent(r,2),b:a.getComponent(r,3),midpoint:.5,sharpness:0});break}case 5:{e.nodes.push({x:r,r:a.getComponent(r,0),g:a.getComponent(r,1),b:a.getComponent(r,2),midpoint:a.getComponent(r,4),sharpness:a.getComponent(r,5)});break}case 6:{e.nodes.push({x:a.getComponent(r,0),r:a.getComponent(r,1),g:a.getComponent(r,2),b:a.getComponent(r,3),midpoint:a.getComponent(r,4),sharpness:a.getComponent(r,5)});break}}t.sortAndUpdateRange()},t.buildFunctionFromTable=(a,n,r,i)=>{let s=0;t.removeAllPoints(),r>1&&(s=(n-a)/(r-1));for(let u=0;u<r;u++){const c={x:a+s*u,r:i[u*3],g:i[u*3+1],b:i[u*3+2],sharpness:0,midpoint:.5};e.nodes.push(c)}t.sortAndUpdateRange()},t.getNodeValue=(a,n)=>a<0||a>=e.nodes.length?(wn("Index out of range!"),-1):(n[0]=e.nodes[a].x,n[1]=e.nodes[a].r,n[2]=e.nodes[a].g,n[3]=e.nodes[a].b,n[4]=e.nodes[a].midpoint,n[5]=e.nodes[a].sharpness,1),t.setNodeValue=(a,n)=>{if(a<0||a>=e.nodes.length)return wn("Index out of range!"),-1;const r=e.nodes[a].x;return e.nodes[a].x=n[0],e.nodes[a].r=n[1],e.nodes[a].g=n[2],e.nodes[a].b=n[3],e.nodes[a].midpoint=n[4],e.nodes[a].sharpness=n[5],r!==n[0]?t.sortAndUpdateRange():t.modified(),1},t.getNumberOfAvailableColors=()=>e.indexedLookup&&t.getSize()?t.getSize():e.tableSize?e.tableSize:16777216,t.getIndexedColor=(a,n)=>{const r=t.getSize();if(r>0&&a>=0){const s=[];t.getNodeValue(a%r,s);for(let u=0;u<3;++u)n[u]=s[u+1];n[3]=1;return}const i=t.getNanColorByReference();n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=1},t.fillFromDataPointer=(a,n)=>{if(!(a<=0||!n)){t.removeAllPoints();for(let r=0;r<a;r++)t.addRGBPoint(n[r*4],n[r*4+1],n[r*4+2],n[r*4+3])}},t.setMappingRange=(a,n)=>{const r=[a,n],i=t.getRange();if(i[1]===r[1]&&i[0]===r[0])return;if(r[1]===r[0]){wn("attempt to set zero width color range");return}const s=(r[1]-r[0])/(i[1]-i[0]),u=r[0]-i[0]*s;for(let c=0;c<e.nodes.length;++c)e.nodes[c].x=e.nodes[c].x*s+u;e.mappingRange[0]=r[0],e.mappingRange[1]=r[1],t.modified()},t.adjustRange=a=>{const n=t.getRange(),r=[];n[0]<a[0]?(t.getColor(a[0],r),t.addRGBPoint(a[0],r[0],r[1],r[2])):(t.getColor(n[0],r),t.addRGBPoint(a[0],r[0],r[1],r[2])),n[1]>a[1]?(t.getColor(a[1],r),t.addRGBPoint(a[1],r[0],r[1],r[2])):(t.getColor(n[1],r),t.addRGBPoint(a[1],r[0],r[1],r[2])),t.sortAndUpdateRange();for(let i=0;i<e.nodes.length;)e.nodes[i].x>=a[0]&&e.nodes[i].x<=a[1]?e.nodes.splice(i,1):++i;return 1},t.estimateMinNumberOfSamples=(a,n)=>{const r=t.findMinimumXDistance();return Math.ceil((n-a)/r)},t.findMinimumXDistance=()=>{if(e.nodes.length<2)return-1;let a=Number.MAX_VALUE;for(let n=0;n<e.nodes.length-1;n++){const r=e.nodes[n+1].x-e.nodes[n].x;r<a&&(a=r)}return a},t.mapScalarsThroughTable=(a,n,r,i)=>{if(t.getSize()===0){rT("Transfer Function Has No Points!");return}e.indexedLookup?t.mapDataIndexed(a,n,r,i):t.mapData(a,n,r,i)},t.mapData=(a,n,r,i)=>{if(t.getSize()===0){aT("Transfer Function Has No Points!");return}const s=Math.floor(t.getAlpha()*255+.5),u=a.getNumberOfTuples(),c=a.getNumberOfComponents(),o=n.getData(),f=a.getData(),l=[];if(r===go.RGBA)for(let h=0;h<u;h++){const p=f[h*c+i];t.getColor(p,l),o[h*4]=Math.floor(l[0]*255+.5),o[h*4+1]=Math.floor(l[1]*255+.5),o[h*4+2]=Math.floor(l[2]*255+.5),o[h*4+3]=s}if(r===go.RGB)for(let h=0;h<u;h++){const p=f[h*c+i];t.getColor(p,l),o[h*3]=Math.floor(l[0]*255+.5),o[h*3+1]=Math.floor(l[1]*255+.5),o[h*3+2]=Math.floor(l[2]*255+.5)}if(r===go.LUMINANCE)for(let h=0;h<u;h++){const p=f[h*c+i];t.getColor(p,l),o[h]=Math.floor(l[0]*76.5+l[1]*150.45+l[2]*28.05+.5)}if(r===go.LUMINANCE_ALPHA)for(let h=0;h<u;h++){const p=f[h*c+i];t.getColor(p,l),o[h*2]=Math.floor(l[0]*76.5+l[1]*150.45+l[2]*28.05+.5),o[h*2+1]=s}},t.applyColorMap=a=>{const n=JSON.stringify(e.colorSpace);a.ColorSpace&&(e.colorSpace=tn[a.ColorSpace.toUpperCase()],e.colorSpace===void 0&&(wn(`ColorSpace ${a.ColorSpace} not supported, using RGB instead`),e.colorSpace=tn.RGB));let r=n!==JSON.stringify(e.colorSpace);const i=r||JSON.stringify(e.nanColor);if(a.NanColor)for(e.nanColor=[].concat(a.NanColor);e.nanColor.length<4;)e.nanColor.push(1);r=r||i!==JSON.stringify(e.nanColor);const s=r||JSON.stringify(e.nodes);if(a.RGBPoints){const o=a.RGBPoints.length;e.nodes=[];const f=.5,l=0;for(let h=0;h<o;h+=4)e.nodes.push({x:a.RGBPoints[h],r:a.RGBPoints[h+1],g:a.RGBPoints[h+2],b:a.RGBPoints[h+3],midpoint:f,sharpness:l})}const u=t.sortAndUpdateRange(),c=!u&&(r||s!==JSON.stringify(e.nodes));return c&&t.modified(),u||c}}const uT={clamping:!0,colorSpace:tn.RGB,hSVWrap:!0,scale:Ah.LINEAR,nanColor:null,belowRangeColor:null,aboveRangeColor:null,useAboveRangeColor:!1,useBelowRangeColor:!1,allowDuplicateScalars:!1,table:null,tableSize:0,buildTime:null,nodes:null,discretize:!1,numberOfValues:256};function Gh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,uT,a),ji.extend(t,e,a),e.table=[],e.nodes=[],e.nanColor=[.5,0,0,1],e.belowRangeColor=[0,0,0,1],e.aboveRangeColor=[1,1,1,1],e.buildTime={},k.obj(e.buildTime),k.get(t,e,["buildTime","mappingRange"]),k.setGet(t,e,["useAboveRangeColor","useBelowRangeColor","colorSpace","discretize","numberOfValues"]),k.setArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"],4),k.getArray(t,e,["nanColor","belowRangeColor","aboveRangeColor"]),sT(t,e)}var j0={newInstance:k.newInstance(Gh,"vtkColorTransferFunction"),extend:Gh,...Fh};const Ih={id:{type:String},colorMapPreset:{type:String,default:"erdc_rainbow_bright"},colorDataRange:{type:Array,default:()=>[0,1]},actor:{type:Object},mapper:{type:Object},property:{type:Object}};let cT=class{constructor(e,a,n,r){this.refs={presetName:a,colorRange:n},this.view=r,this.actor=pn.newInstance(),this.lookupTable=j0.newInstance(),this.mapper=e({lookupTable:this.lookupTable,useLookupTableScalarRange:!0}),this.actor.setMapper(this.mapper),this.property=this.actor.getProperty()}updateColorMapPreset(){const e=z0.getPresetByName(this.refs.presetName.value);this.lookupTable.applyColorMap(e),this.updateColorDataRange()}updateColorDataRange(){this.lookupTable.setMappingRange(...this.refs.colorRange.value),this.lookupTable.updateRange(),this.dataChanged()}dataChanged(){this.view&&se.nextTick(this.view.render)}};function Ph(t,e){const a=se.inject("view"),{colorMapPreset:n,colorDataRange:r}=se.toRefs(t),i=new cT(e,n,r,a),s=se.ref(i.mapper);se.provide("representation",i),se.provide("downstream",s),se.onMounted(()=>{["actor","mapper","property"].forEach(u=>{i[u].set(t[u])}),i.actor.set({representationId:t.id},!0),i.updateColorMapPreset(),a.renderer.addActor(i.actor)}),se.onBeforeUnmount(()=>{var u;(u=a==null?void 0:a.renderer)==null||u.removeActor(i.actor),i.actor.delete(),i.actor=null,i.mapper.delete(),i.mapper=null,i.lookupTable.delete(),i.lookupTable=null}),["actor","mapper","property"].forEach(u=>{se.watch(()=>t[u],c=>{i[u].set(c)&&i.dataChanged()})}),["colorMapPreset","colorDataRange"].forEach(u=>{se.watch(()=>t[u],()=>i[`update${br(u)}`]())}),se.watch(()=>t.id,u=>i.actor.set({representationId:u},!0))}const lT={props:Ih,setup(t){Ph(t,dn.newInstance)},template:'<div class="vtk-geometry-representation"><slot></slot></div>'};var zh={OrientationModes:{DIRECTION:0,ROTATION:1,MATRIX:2},ScaleModes:{SCALE_BY_CONSTANT:0,SCALE_BY_MAGNITUDE:1,SCALE_BY_COMPONENTS:2}};const{OrientationModes:Un,ScaleModes:_n}=zh,{vtkErrorMacro:fT}=k;function hT(t,e){e.classHierarchy.push("vtkGlyph3DMapper"),t.getOrientationModeAsString=()=>k.enumToString(Un,e.orientationMode),t.setOrientationModeToDirection=()=>t.setOrientationMode(Un.DIRECTION),t.setOrientationModeToRotation=()=>t.setOrientationMode(Un.ROTATION),t.setOrientationModeToMatrix=()=>t.setOrientationMode(Un.MATRIX),t.getOrientationArrayData=()=>{const a=t.getInputData(0);return!a||!a.getPointData()?null:e.orientationArray?a.getPointData().getArray(e.orientationArray):a.getPointData().getVectors()},t.getScaleModeAsString=()=>k.enumToString(_n,e.scaleMode),t.setScaleModeToScaleByMagnitude=()=>t.setScaleMode(_n.SCALE_BY_MAGNITUDE),t.setScaleModeToScaleByComponents=()=>t.setScaleMode(_n.SCALE_BY_COMPONENTS),t.setScaleModeToScaleByConstant=()=>t.setScaleMode(_n.SCALE_BY_CONSTANT),t.getScaleArrayData=()=>{const a=t.getInputData(0);return!a||!a.getPointData()?null:e.scaleArray?a.getPointData().getArray(e.scaleArray):a.getPointData().getScalars()},t.getBounds=()=>{const a=t.getInputData(0),n=t.getInputData(1);return!a||!n?fn():(t.buildArrays(),e.bounds)},t.buildArrays=()=>{const a=t.getInputData(0),n=t.getInputData(1);if(e.buildTime.getMTime()<n.getMTime()||e.buildTime.getMTime()<a.getMTime()||e.buildTime.getMTime()<t.getMTime()){const r=a.getPoints().getData();let i=t.getScaleArrayData(),s=null,u=0;i&&(s=i.getData(),u=i.getNumberOfComponents()),e.scaling&&i&&e.scaleMode===_n.SCALE_BY_COMPONENTS&&i.getNumberOfComponents()!==3&&(fT("Cannot scale by components since scale array does not have 3 components."),i=null);const c=n.getBounds(),o=[];Le.getCorners(c,o),e.bounds[0]=Le.INIT_BOUNDS[0],e.bounds[1]=Le.INIT_BOUNDS[1],e.bounds[2]=Le.INIT_BOUNDS[2],e.bounds[3]=Le.INIT_BOUNDS[3],e.bounds[4]=Le.INIT_BOUNDS[4],e.bounds[5]=Le.INIT_BOUNDS[5];const f=new Float64Array(3),l=t.getOrientationArrayData(),h=Se(new Float64Array(16)),p=[],d=[],y=r.length/3;e.matrixArray=new Float32Array(16*y);const m=e.matrixArray.buffer;e.normalArray=new Float32Array(9*y);const S=e.normalArray.buffer,v=[],g=[];for(let T=0;T<y;++T){const w=new Float32Array(m,T*64,16);if(p[0]=r[T*3],p[1]=r[T*3+1],p[2]=r[T*3+2],Ze(w,h,p),l)switch(l.getTuple(T,g),e.orientationMode){case Un.MATRIX:{const E=[...g.slice(0,3),0,...g.slice(3,6),0,...g.slice(6,9),0,0,0,0,1];Ge(w,w,E);break}case Un.ROTATION:ni(w,w,g[2]),ti(w,w,g[0]),na(w,w,g[1]);break;case Un.DIRECTION:if(g[1]===0&&g[2]===0)g[0]<0&&na(w,w,3.1415926);else{const E=kt(g),D=[];D[0]=(g[0]+E)/2,D[1]=g[1]/2,D[2]=g[2]/2,mt(w,w,3.1415926,D)}break}if(e.scaling){if(d[0]=e.scaleFactor,d[1]=e.scaleFactor,d[2]=e.scaleFactor,i)switch(e.scaleMode){case _n.SCALE_BY_MAGNITUDE:for(let E=0;E<u;++E)v[E]=s[T*u+E];d[0]*=kt(v,u),d[1]=d[0],d[2]=d[0];break;case _n.SCALE_BY_COMPONENTS:for(let E=0;E<u;++E)v[E]=s[T*u+E];d[0]*=v[0],d[1]*=v[1],d[2]*=v[2];break;case _n.SCALE_BY_CONSTANT:}d[0]===0&&(d[0]=1e-10),d[1]===0&&(d[1]=1e-10),d[2]===0&&(d[2]=1e-10),Dn(w,w,d)}for(let E=0;E<8;++E)Te(f,o[E],w),f[0]<e.bounds[0]&&(e.bounds[0]=f[0]),f[1]<e.bounds[2]&&(e.bounds[2]=f[1]),f[2]<e.bounds[4]&&(e.bounds[4]=f[2]),f[0]>e.bounds[1]&&(e.bounds[1]=f[0]),f[1]>e.bounds[3]&&(e.bounds[3]=f[1]),f[2]>e.bounds[5]&&(e.bounds[5]=f[2]);const _=new Float32Array(S,T*36,9);ta(_,w),xr(_,_),ei(_,_)}const x=t.getAbstractScalars(a,e.scalarMode,e.arrayAccessMode,e.arrayId,e.colorByArrayName).scalars;e.useLookupTableScalarRange||t.getLookupTable().setRange(e.scalarRange[0],e.scalarRange[1]),e.colorArray=null;const C=t.getLookupTable();C&&x&&(C.build(),e.colorArray=C.mapScalars(x,e.colorMode,0)),e.buildTime.modified()}},t.getPrimitiveCount=()=>{const a=t.getInputData(1),n=t.getInputData().getPoints().getNumberOfValues()/3;return{points:n*a.getPoints().getNumberOfValues()/3,verts:n*(a.getVerts().getNumberOfValues()-a.getVerts().getNumberOfCells()),lines:n*(a.getLines().getNumberOfValues()-2*a.getLines().getNumberOfCells()),triangles:n*(a.getPolys().getNumberOfValues()-3*a.getLines().getNumberOfCells())}},t.setSourceConnection=a=>t.setInputConnection(a,1)}const pT={orient:!0,orientationMode:Un.DIRECTION,orientationArray:null,scaling:!0,scaleFactor:1,scaleMode:_n.SCALE_BY_MAGNITUDE,scaleArray:null,matrixArray:null,normalArray:null,colorArray:null};function jh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,pT,a),dn.extend(t,e,a),k.algo(t,e,2,0),e.buildTime={},k.obj(e.buildTime,{mtime:0}),e.boundsTime={},k.obj(e.boundsTime,{mtime:0}),k.setGet(t,e,["orient","orientationMode","orientationArray","scaleArray","scaleFactor","scaleMode","scaling"]),k.get(t,e,["colorArray","matrixArray","normalArray","buildTime"]),hT(t,e)}var Wh={newInstance:k.newInstance(jh,"vtkGlyph3DMapper"),extend:jh,...zh};const gT={props:Ih,setup(t){Ph(t,Wh.newInstance)},template:'<div class="vtk-glyph-representation"><slot></slot></div>'},dT=[Array,Float32Array,Float64Array,Object],vo=[Array,Uint8Array,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Object],$h={props:{port:{type:Number,default:0},points:{type:dT},verts:{type:vo},lines:{type:vo},polys:{type:vo},strips:{type:vo},connectivity:{type:String,default:"manual"}},setup(t){const e=se.computed(()=>t.points&&t.points.length>196608?Uint32Array:Uint16Array),a=se.inject("downstream"),n=se.inject("representation"),r=je.newInstance(),i=ln(()=>{if(t.connectivity!=="manual"){const h=t.points.length/3;switch(t.connectivity){case"points":{const p=new Uint32Array(h+1);p[0]=h;for(let d=0;d<h;d++)p[d+1]=d;r.getVerts().setData(p)}break;case"triangles":{const p=new Uint32Array(h+h/3);let d=0;for(let y=0;y<h;y+=3)p[d++]=3,p[d++]=y+0,p[d++]=y+1,p[d++]=y+2;r.getPolys().setData(p)}break;case"strips":{const p=new Uint32Array(h+1);p[0]=h;for(let d=0;d<h;d++)p[d+1]=d;r.getStrips().setData(p)}break}}r.modified(),n&&n.dataChanged()},1);function s(h,p,d,y){const m=Lh(h,d);m&&(r[p]().setData(m,y||1),i())}const{points:u,verts:c,lines:o,polys:f,strips:l}=se.toRefs(t);se.watch(u,h=>s(h,"getPoints",Float64Array,3)),se.watch(c,h=>s(h,"getVerts",e.value)),se.watch(o,h=>s(h,"getLines",e.value)),se.watch(f,h=>s(h,"getPolys",e.value)),se.watch(l,h=>s(h,"getStrips",e.value)),se.watch(a,()=>{a.value&&a.value.setInputData(r,t.port)}),se.onMounted(()=>{s(t.points,"getPoints",Float64Array,3),s(t.verts,"getVerts",e.value),s(t.lines,"getLines",e.value),s(t.polys,"getPolys",e.value),s(t.strips,"getStrips",e.value),a.value&&a.value.setInputData(r,t.port)}),se.onBeforeUnmount(()=>{r.delete()}),se.provide("dataset",r)},template:'<div class="vtk-polydata"><slot></slot></div>'},Hh={setup(){const t=se.inject("dataset");se.provide("fields",t==null?void 0:t.getPointData())},template:'<div class="vtk-point-data"><slot></slot></div>'},vT={props:{port:{type:Number,default:0},state:{type:Object}},components:{VtkPolydata:$h,VtkCellData:Rh,VtkPointData:Hh,VtkDataArray:kh},template:`
    <vtk-polydata v-if="state" v-bind="state.mesh">
      <vtk-point-data>
        <vtk-data-array
          v-if="state.field && state.field.location == 'PointData'"
          registration="setScalars"
          v-bind="state.field"
        />
        <vtk-data-array
          v-if="state.pointArrays"
          v-for="array, idx in state.pointArrays"
          :key="array.name"
          v-bind="array"
        />
      </vtk-point-data>
      <vtk-cell-data>
        <vtk-data-array
          v-if="state.field && state.field.location == 'CellData'"
          registration="setScalars"
          v-bind="state.field"
        />
        <vtk-data-array
          v-if="state.cellArrays"
          v-for="array, idx in state.cellArrays"
          :key="array.name"
          v-bind="array"
        />
      </vtk-cell-data>
    </vtk-polydata>
  `},yT={props:{port:{type:Number,default:0},vtkClass:{type:String,default:""},url:{type:String},parseAsText:{type:String},parseAsArrayBuffer:{type:String},renderOnUpdate:{type:Boolean,default:!1},resetCameraOnUpdate:{type:Boolean,default:!1}},setup(t){const e=se.ref(null),a=se.inject("downstream"),n=se.inject("representation"),r=se.inject("view");function i(){e.value&&(n&&n.dataChanged(),t.resetCameraOnUpdate&&r.resetCamera(),t.renderOnUpdate&&r.render())}const{vtkClass:s,url:u,parseAsText:c,parseAsArrayBuffer:o}=se.toRefs(t);se.watch(s,f=>{let l=e.value;e.value=xt({vtkClass:f}),a.setInputConnection(e.value.getOutputPort(),t.port),l&&l.delete()}),se.watch(u,async f=>{await e.value.setUrl(f),i()}),se.watch(c,f=>{e.value.parseAsText(f),i()}),se.watch(o,f=>{e.value.parseAsArrayBuffer(dr.toArrayBuffer(f)),i()}),se.onMounted(async()=>{let f=!1;e.value=xt({vtkClass:t.vtkClass}),a.value.setInputConnection(e.value.getOutputPort(),t.port),t.url&&(await e.value.setUrl(t.url),f=!0),t.parseAsText&&(e.value.parseAsText(t.parseAsText),f=!0),t.parseAsArrayBuffer&&(e.value.parseAsArrayBuffer(dr.toArrayBuffer(t.parseAsArrayBuffer)),f=!0),f&&i()}),se.onBeforeUnmount(()=>{e.value&&(e.value.delete(),e.value=null)})}},{vtkErrorMacro:mT}=k;function xT(t,e){e.classHierarchy.push("vtkCanvasView");function a(){e._renderable&&(e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none")}t.onModified(a),t.setContainer=n=>{e.el&&e.el!==n&&(e.canvas.parentNode!==e.el&&mT("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==n&&(e.el=n,e.el&&e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage),t.modified())},t.setBackgroundImage=n=>{e.bgImage.src=n.src},t.setUseBackgroundImage=n=>{e.useBackgroundImage=n,e.useBackgroundImage&&e.el&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)},t.setViewStream=n=>e.viewStream===n?!1:(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=n,e.viewStream&&(t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(r=>t.setBackgroundImage(r.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()),!0),t.delete=k.chain(t.setViewStream,t.delete),e._renderable=t,e._renderers=[t],t.traverseAllPasses=()=>{},t.isInViewport=()=>!0,t.getInteractive=()=>!0}const ST={canvas:null,size:[300,300],cursorVisibility:!0,cursor:"pointer",useOffScreen:!1,useBackgroundImage:!1};function Kh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ST,a),e.canvas=document.createElement("canvas"),e.canvas.style.width="100%",e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",k.obj(t,e,a),k.get(t,e,["useBackgroundImage","_renderable"]),k.setGet(t,e,["canvas","cursor","useOffScreen","interactor"]),k.setGetArray(t,e,["size"],2),k.getArray(t,e,["_renderers"]),k.moveToProtected(t,e,["renderable","renderers"]),xT(t,e)}var CT={newInstance:k.newInstance(Kh,"vtkCanvasView"),extend:Kh};function TT(t){return{subscribeToImageStream:e=>t.subscribe("viewport.image.push.subscription",e),unsubscribeToImageStream:e=>t.unsubscribe(e),registerView:e=>t.call("viewport.image.push.observer.add",[e]),unregisterView:e=>t.call("viewport.image.push.observer.remove",[e]),enableView:(e,a)=>t.call("viewport.image.push.enabled",[e,a]),render:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{size:[400,400],view:-1};return t.call("viewport.image.push",[e])},resetCamera:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.camera.reset",[e])},invalidateCache:e=>t.call("viewport.image.push.invalidate.cache",[e]),setQuality:function(e,a){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return t.call("viewport.image.push.quality",[e,a,n])},setSize:function(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:400,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:400;return t.call("viewport.image.push.original.size",[e,a,n])},setServerAnimationFPS:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30;return t.call("viewport.image.animation.fps.max",[e])},getServerAnimationFPS:()=>t.call("viewport.image.animation.fps.get",[]),startAnimation:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.image.animation.start",[e])},stopAnimation:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1;return t.call("viewport.image.animation.stop",[e])},updateCamera:function(e,a,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return t.call("viewport.camera.update",[e??-1,a,n,r,i])},updateCameraParameters:function(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return t.call("viewport.camera.update.params",[e,a,n])}}}function wT(t,e){e.classHierarchy.push("vtkViewStream"),e.imageDecodingPool=[new Image,new Image],e.eventPool=[],e.nextPoolImageIndex=0,e.urlToRevoke=[],e.activeURL=null,e.fps=[],e.lastTime=Date.now(),e.lastImageEvent=null;function a(i){const s=Number(this.dataset.id);t.invokeImageReady(e.eventPool[s])}function n(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2;for(;e.imageDecodingPool.length<i;)e.imageDecodingPool.push(new Image);for(let s=0;s<e.imageDecodingPool.length;s++)e.imageDecodingPool[s].dataset.id=s,e.imageDecodingPool[s].onload=a}function r(i){e.eventPool[e.nextPoolImageIndex]=i,i.image=e.imageDecodingPool[e.nextPoolImageIndex++],e.nextPoolImageIndex%=e.imageDecodingPool.length,i.image.src=i.url}t.pushCamera=()=>{const i=e.camera.getReferenceByName("focalPoint"),s=e.camera.getReferenceByName("viewUp"),u=e.camera.getReferenceByName("position"),c=e.camera.getParallelProjection(),o=e.camera.getViewAngle(),f=e.camera.getParallelScale();let l=null;return e.useCameraParameters?l=e.protocol.updateCameraParameters(e.viewId,{focalPoint:i,viewUp:s,position:u,parallelProjection:c,viewAngle:o,parallelScale:f},!1):l=e.protocol.updateCamera(e.viewId,i,s,u,!1),e.isAnimating&&setTimeout(t.pushCamera,1e3/e.cameraUpdateRate),l},t.invalidateCache=()=>e.protocol.invalidateCache(e.viewId),t.render=()=>e.protocol.render({view:e.viewId,size:e.size}),t.resetCamera=()=>e.protocol.resetCamera(e.viewId),t.startAnimation=()=>e.protocol.startAnimation(e.viewId),t.stopAnimation=()=>e.protocol.stopAnimation(e.viewId),t.setSize=(i,s)=>{let u=!1;return(e.size[0]!==i||e.size[1]!==s)&&(e.size=[i,s],u=!0),u&&(t.modified(),e.protocol)?e.protocol.setSize(e.viewId,i,s):Promise.resolve(!1)},t.startInteraction=()=>{const i=[e.protocol.setQuality(e.viewId,e.interactiveQuality,e.interactiveRatio)];return e.camera&&(i.push(t.startAnimation()),e.isAnimating=!0,i.push(t.pushCamera())),Promise.all(i)},t.endInteraction=()=>{const i=[];return i.push(e.protocol.setQuality(e.viewId,e.stillQuality,e.stillRatio)),e.camera?(i.push(t.stopAnimation()),e.isAnimating=!1,i.push(t.pushCamera())):i.push(t.render()),Promise.all(i)},t.setViewId=i=>e.viewId===i||!e.protocol?!1:(e.viewId&&e.protocol.unregisterView(e.viewId),e.viewId=i,e.viewId&&e.protocol.registerView(e.viewId).then(s=>{let{viewId:u}=s;e.viewId=u}),!0),t.processMessage=i=>{if(i.id!=e.viewId)return;const s=new Blob([i.image],{type:e.mimeType});if(e.activeURL)for(e.urlToRevoke.push(e.activeURL),e.activeURL=null;e.urlToRevoke.length>60;){const o=e.urlToRevoke.shift();window.URL.revokeObjectURL(o)}e.activeURL=URL.createObjectURL(s);const u=Date.now(),c=Math.floor(1e4/(u-e.lastTime))/10;for(e.fps.push(c),e.lastTime=u,e.lastImageEvent={url:e.activeURL,fps:c,metadata:{size:i.size,id:i.id,memory:i.memsize,workTime:i.workTime}},e.decodeImage?r(e.lastImageEvent):t.invokeImageReady(e.lastImageEvent);e.fps.length>e.fpsWindowSize;)e.fps.shift()},t.delete=k.chain(()=>{for(e.unregisterViewStream(t),t.setViewId(null);e.urlToRevoke.length;)window.URL.revokeObjectURL(e.urlToRevoke.pop())},t.delete),n()}const _T={cameraUpdateRate:30,decodeImage:!0,fpsWindowSize:250,interactiveQuality:80,interactiveRatio:1,isAnimating:!1,mimeType:"image/jpeg",size:[-1,-1],stillQuality:100,stillRatio:1,useCameraParameters:!1,viewId:null};function Xh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,_T,a),k.obj(t,e),k.event(t,e,"ImageReady"),k.get(t,e,["viewId","size","fps","lastImageEvent"]),k.setGet(t,e,["camera","cameraUpdateRate","decodeImage","fpsWindowSize","interactiveQuality","interactiveRatio","stillQuality","stillRatio","useCameraParameters"]),wT(t,e),Object.assign(t,e.sharedAPI)}var ET={newInstance:k.newInstance(Xh,"vtkViewStream"),extend:Xh};function DT(t,e){e.classHierarchy.push("vtkImageStream");function a(n){const r=n[0];if(!(!r||!r.image))for(let i=0;i<e.viewStreams.length;i++)e.viewStreams[i].processMessage(r)}t.setServerAnimationFPS=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:30,r=!1;return e.serverAnimationFPS!==n&&(e.serverAnimationFPS=n,r=!0),e.protocol?(r&&t.modified(),e.protocol.setServerAnimationFPS(n)):Promise.resolve(!0)},t.connect=function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:TT;e.connected||!n||!r||(e.protocol=r(n),e.protocol.subscribeToImageStream(a).promise.then(i=>{e.renderTopicSubscription=i,e.connected=!0}).catch(i=>{e.connected=!1,console.error(i)}))},t.disconnect=()=>{e.protocol&&e.connected&&e.renderTopicSubscription&&(e.protocol.unsubscribeToImageStream(e.renderTopicSubscription),e.renderTopicSubscription=null),e.connected=!1},t.registerViewStream=n=>{e.viewStreams.push(n)},t.unregisterViewStream=n=>{e.viewStreams=e.viewStreams.filter(r=>r!==n)},t.createViewStream=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"-1",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[400,400];const{setServerAnimationFPS:i,getServerAnimationFPS:s,unregisterViewStream:u}=t,c=ET.newInstance({protocol:e.protocol,unregisterViewStream:u,sharedAPI:{setServerAnimationFPS:i,getServerAnimationFPS:s}});return c.setViewId(n),c.setSize(r[0],r[1]),t.registerViewStream(c),c},t.delete=k.chain(()=>{for(;e.viewStreams.length;)e.viewStreams.pop().delete();t.disconnect()},t.delete)}const bT={viewStreams:[],serverAnimationFPS:-1};function qh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bT,a),k.obj(t,e),k.get(t,e,["serverAnimationFPS","protocol"]),DT(t,e)}var OT={newInstance:k.newInstance(qh,"vtkImageStream"),extend:qh},Yh={Device:{Unknown:0,LeftController:1,RightController:2},Input:{Unknown:0,Trigger:1,TrackPad:2,Grip:3,Thumbstick:4,A:5,B:6,ApplicationMenu:7},Axis:{Unknown:0,TouchpadX:1,TouchpadY:2,ThumbstickX:3,ThumbstickY:4}};const{Device:yo,Input:yr}=Yh,{vtkWarningMacro:mo,vtkErrorMacro:xo,normalizeWheel:NT,vtkOnceErrorMacro:MT}=k,Yr={ctrlKey:!1,altKey:!1,shiftKey:!1},W0={"xr-standard":[yr.Trigger,yr.Grip,yr.TrackPad,yr.Thumbstick,yr.A,yr.B]},$0=["StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"];function $a(t){t.cancelable&&t.preventDefault()}function So(t){const e=Object.create(null);return t.forEach(a=>{let{pointerId:n,position:r}=a;e[n]=r}),e}function RT(t,e){e.classHierarchy.push("vtkRenderWindowInteractor");const a={...t},n=new Set,r=new Map;let i=1;t.start=()=>{!e.initialized&&(t.initialize(),!e.initialized)||t.startEventLoop()},t.setRenderWindow=y=>{xo("you want to call setView(view) instead of setRenderWindow on a vtk.js interactor")},t.setInteractorStyle=y=>{e.interactorStyle!==y&&(e.interactorStyle!=null&&e.interactorStyle.setInteractor(null),e.interactorStyle=y,e.interactorStyle!=null&&e.interactorStyle.getInteractor()!==t&&e.interactorStyle.setInteractor(t))},t.initialize=()=>{e.initialized=!0,t.enable(),t.render()},t.enable=()=>t.setEnabled(!0),t.disable=()=>t.setEnabled(!1),t.startEventLoop=()=>mo("empty event loop");function s(y,m){e._forcedRenderer||(e.currentRenderer=t.findPokedRenderer(y,m))}t.getCurrentRenderer=()=>(e.currentRenderer||s(0,0),e.currentRenderer);function u(y){const m=e._view.getCanvas(),S=m.getBoundingClientRect(),v=m.width/S.width,g=m.height/S.height,x={x:v*(y.clientX-S.left),y:g*(S.height-y.clientY+S.top),z:0};return(r.size<=1||!e.currentRenderer)&&s(x.x,x.y),x}const c=e._getScreenEventPositionFor||u;function o(y){return{controlKey:y.ctrlKey,altKey:y.altKey,shiftKey:y.shiftKey}}function f(y){const m=o(y);return{key:y.key,keyCode:y.charCode,...m}}function l(y){return y.pointerType||""}const h=()=>{if(e.container===null)return;const{container:y}=e;y.addEventListener("contextmenu",$a),y.addEventListener("wheel",t.handleWheel),y.addEventListener("DOMMouseScroll",t.handleWheel),y.addEventListener("pointerenter",t.handlePointerEnter),y.addEventListener("pointerleave",t.handlePointerLeave),y.addEventListener("pointermove",t.handlePointerMove,{passive:!1}),y.addEventListener("pointerdown",t.handlePointerDown,{passive:!1}),y.addEventListener("pointerup",t.handlePointerUp),y.addEventListener("pointercancel",t.handlePointerCancel),document.addEventListener("keypress",t.handleKeyPress),document.addEventListener("keydown",t.handleKeyDown),document.addEventListener("keyup",t.handleKeyUp),document.addEventListener("pointerlockchange",t.handlePointerLockChange),y.style.touchAction="none",y.style.userSelect="none",y.style.webkitTapHighlightColor="rgba(0,0,0,0)"};t.bindEvents=y=>{if(y===null)return;a.setContainer(y)&&h()};const p=()=>{clearTimeout(e.moveTimeoutID),clearTimeout(e.wheelTimeoutID),e.moveTimeoutID=0,e.wheelTimeoutID=0,i=1;const{container:y}=e;y&&(y.removeEventListener("contextmenu",$a),y.removeEventListener("wheel",t.handleWheel),y.removeEventListener("DOMMouseScroll",t.handleWheel),y.removeEventListener("pointerenter",t.handlePointerEnter),y.removeEventListener("pointerleave",t.handlePointerLeave),y.removeEventListener("pointermove",t.handlePointerMove,{passive:!1}),y.removeEventListener("pointerdown",t.handlePointerDown,{passive:!1}),y.removeEventListener("pointerup",t.handlePointerUp),y.removeEventListener("pointercancel",t.handlePointerCancel)),document.removeEventListener("keypress",t.handleKeyPress),document.removeEventListener("keydown",t.handleKeyDown),document.removeEventListener("keyup",t.handleKeyUp),document.removeEventListener("pointerlockchange",t.handlePointerLockChange),r.clear()};t.unbindEvents=()=>{p(),a.setContainer(null)},t.handleKeyPress=y=>{const m=f(y);t.keyPressEvent(m)},t.handleKeyDown=y=>{const m=f(y);t.keyDownEvent(m)},t.handleKeyUp=y=>{const m=f(y);t.keyUpEvent(m)},t.handlePointerEnter=y=>{const m={...o(y),position:c(y),deviceType:l(y)};t.pointerEnterEvent(m),m.deviceType==="mouse"&&t.mouseEnterEvent(m)},t.handlePointerLeave=y=>{const m={...o(y),position:c(y),deviceType:l(y)};t.pointerLeaveEvent(m),m.deviceType==="mouse"&&t.mouseLeaveEvent(m)},t.handlePointerDown=y=>{if(!(y.button>2||t.isPointerLocked()))switch(e.preventDefaultOnPointerDown&&$a(y),y.target.hasPointerCapture(y.pointerId)&&y.target.releasePointerCapture(y.pointerId),e.container.setPointerCapture(y.pointerId),r.has(y.pointerId)&&mo("[RenderWindowInteractor] duplicate pointerId detected"),r.set(y.pointerId,{pointerId:y.pointerId,position:c(y)}),y.pointerType){case"pen":case"touch":t.handleTouchStart(y);break;case"mouse":default:t.handleMouseDown(y);break}},t.handlePointerUp=y=>{if(r.has(y.pointerId))switch(e.preventDefaultOnPointerUp&&$a(y),r.delete(y.pointerId),e.container.releasePointerCapture(y.pointerId),y.pointerType){case"pen":case"touch":t.handleTouchEnd(y);break;case"mouse":default:t.handleMouseUp(y);break}},t.handlePointerCancel=y=>{if(r.has(y.pointerId))switch(r.delete(y.pointerId),y.pointerType){case"pen":case"touch":t.handleTouchEnd(y);break;case"mouse":default:t.handleMouseUp(y);break}},t.handlePointerMove=y=>{if(r.has(y.pointerId)){const m=r.get(y.pointerId);m.position=c(y)}switch(y.pointerType){case"pen":case"touch":t.handleTouchMove(y);break;case"mouse":default:t.handleMouseMove(y);break}},t.handleMouseDown=y=>{const m={...o(y),position:c(y),deviceType:l(y)};switch(y.button){case 0:t.leftButtonPressEvent(m);break;case 1:t.middleButtonPressEvent(m);break;case 2:t.rightButtonPressEvent(m);break;default:xo(`Unknown mouse button pressed: ${y.button}`);break}},t.requestPointerLock=()=>{e.container&&e.container.requestPointerLock()},t.exitPointerLock=()=>{var y;return(y=document.exitPointerLock)==null?void 0:y.call(document)},t.isPointerLocked=()=>!!e.container&&document.pointerLockElement===e.container,t.handlePointerLockChange=()=>{t.isPointerLocked()?t.startPointerLockEvent():t.endPointerLockEvent()};function d(){e._view&&e.enabled&&e.enableRender&&(e.inRender=!0,e._view.traverseAllPasses(),e.inRender=!1),t.invokeRenderEvent()}t.requestAnimation=y=>{if(y===void 0){xo("undefined requester, can not start animating");return}if(n.has(y)){mo("requester is already registered for animating");return}n.add(y),!e.animationRequest&&n.size===1&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.extendAnimation=y=>{const m=Date.now()+y;e._animationExtendedEnd=Math.max(e._animationExtendedEnd,m),!e.animationRequest&&n.size===0&&!e.xrAnimation&&(e._animationStartTime=Date.now(),e._animationFrameCount=0,e.animationRequest=requestAnimationFrame(t.handleAnimation),t.startAnimationEvent())},t.isAnimating=()=>e.xrAnimation||e.animationRequest!==null,t.cancelAnimation=function(y){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!n.has(y)){if(!m){const S=y&&y.getClassName?y.getClassName():y;mo(`${S} did not request an animation`)}return}n.delete(y),e.animationRequest&&n.size===0&&Date.now()>e._animationExtendedEnd&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.switchToXRAnimation=()=>{e.animationRequest&&(cancelAnimationFrame(e.animationRequest),e.animationRequest=null),e.xrAnimation=!0},t.returnFromXRAnimation=()=>{e.xrAnimation=!1,n.size!==0&&(e.recentAnimationFrameRate=10,e.animationRequest=requestAnimationFrame(t.handleAnimation))},t.updateXRGamepads=(y,m,S)=>{y.inputSources.forEach(v=>{const g=v.gripSpace==null?null:m.getPose(v.gripSpace,S),x=v.gamepad,C=v.handedness;if(x){x.index in e.lastGamepadValues||(e.lastGamepadValues[x.index]={left:{buttons:{}},right:{buttons:{}},none:{buttons:{}}});for(let T=0;T<x.buttons.length;++T)T in e.lastGamepadValues[x.index][C].buttons||(e.lastGamepadValues[x.index][C].buttons[T]=!1),e.lastGamepadValues[x.index][C].buttons[T]!==x.buttons[T].pressed&&g!=null&&(t.button3DEvent({gamepad:x,position:g.transform.position,orientation:g.transform.orientation,pressed:x.buttons[T].pressed,device:v.handedness==="left"?yo.LeftController:yo.RightController,input:W0[x.mapping]&&W0[x.mapping][T]?W0[x.mapping][T]:yr.Trigger}),e.lastGamepadValues[x.index][C].buttons[T]=x.buttons[T].pressed),e.lastGamepadValues[x.index][C].buttons[T]&&g!=null&&t.move3DEvent({gamepad:x,position:g.transform.position,orientation:g.transform.orientation,device:v.handedness==="left"?yo.LeftController:yo.RightController})}})},t.handleMouseMove=y=>{const m={...o(y),position:c(y),deviceType:l(y)};e.moveTimeoutID===0?t.startMouseMoveEvent(m):(t.mouseMoveEvent(m),clearTimeout(e.moveTimeoutID)),e.moveTimeoutID=setTimeout(()=>{t.endMouseMoveEvent(),e.moveTimeoutID=0},200)},t.handleAnimation=()=>{const y=Date.now();e._animationFrameCount++,y-e._animationStartTime>1e3&&e._animationFrameCount>1&&(e.recentAnimationFrameRate=1e3*(e._animationFrameCount-1)/(y-e._animationStartTime),e.lastFrameTime=1/e.recentAnimationFrameRate,t.animationFrameRateUpdateEvent(),e._animationStartTime=y,e._animationFrameCount=1),t.animationEvent(),d(),n.size>0||Date.now()<e._animationExtendedEnd?e.animationRequest=requestAnimationFrame(t.handleAnimation):(cancelAnimationFrame(e.animationRequest),e.animationRequest=null,t.endAnimationEvent(),t.render())},t.handleWheel=y=>{$a(y);const m={...NT(y),...o(y),position:c(y),deviceType:l(y)};e.wheelTimeoutID===0&&(Math.abs(m.spinY)>=.3?i=Math.abs(m.spinY):i=1),m.spinY/=i,e.wheelTimeoutID===0?(t.startMouseWheelEvent(m),t.mouseWheelEvent(m)):(t.mouseWheelEvent(m),clearTimeout(e.wheelTimeoutID)),e.mouseScrollDebounceByPass?(t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0):e.wheelTimeoutID=setTimeout(()=>{t.extendAnimation(600),t.endMouseWheelEvent(),e.wheelTimeoutID=0},200)},t.handleMouseUp=y=>{const m={...o(y),position:c(y),deviceType:l(y)};switch(y.button){case 0:t.leftButtonReleaseEvent(m);break;case 1:t.middleButtonReleaseEvent(m);break;case 2:t.rightButtonReleaseEvent(m);break;default:xo(`Unknown mouse button released: ${y.button}`);break}},t.handleTouchStart=y=>{const m=[...r.values()];if(e.recognizeGestures&&m.length>1){const S=So(r);if(m.length===2){const v={...o(Yr),position:m[0].position,deviceType:l(y)};t.leftButtonReleaseEvent(v)}t.recognizeGesture("TouchStart",S)}else if(m.length===1){const S={...o(Yr),position:c(y),deviceType:l(y)};t.leftButtonPressEvent(S)}},t.handleTouchMove=y=>{const m=[...r.values()];if(e.recognizeGestures&&m.length>1){const S=So(r);t.recognizeGesture("TouchMove",S)}else if(m.length===1){const S={...o(Yr),position:m[0].position,deviceType:l(y)};t.mouseMoveEvent(S)}},t.handleTouchEnd=y=>{const m=[...r.values()];if(e.recognizeGestures)if(m.length===0){const S={...o(Yr),position:c(y),deviceType:l(y)};t.leftButtonReleaseEvent(S)}else if(m.length===1){const S=So(r);t.recognizeGesture("TouchEnd",S);const v={...o(Yr),position:m[0].position,deviceType:l(y)};t.leftButtonPressEvent(v)}else{const S=So(r);t.recognizeGesture("TouchMove",S)}else if(m.length===1){const S={...o(Yr),position:m[0].position,deviceType:l(y)};t.leftButtonReleaseEvent(S)}},t.setView=y=>{e._view!==y&&(e._view=y,e._view.getRenderable().setInteractor(t),t.modified())},t.getFirstRenderer=()=>{var y,m,S;return(S=(m=(y=e._view)==null?void 0:y.getRenderable())==null?void 0:m.getRenderersByReference())==null?void 0:S[0]},t.findPokedRenderer=function(){var T,w;let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!e._view)return null;const S=(w=(T=e._view)==null?void 0:T.getRenderable())==null?void 0:w.getRenderers();if(!S||S.length===0)return null;S.sort((_,E)=>_.getLayer()-E.getLayer());let v=null,g=null,x=null,C=S.length;for(;C--;){const _=S[C];if(e._view.isInViewport(y,m,_)&&_.getInteractive()){x=_;break}v===null&&_.getInteractive()&&(v=_),g===null&&e._view.isInViewport(y,m,_)&&(g=_)}return x===null&&(x=v),x===null&&(x=g),x==null&&(x=S[0]),x},t.render=()=>{!t.isAnimating()&&!e.inRender&&d()},$0.forEach(y=>{const m=y.charAt(0).toLowerCase()+y.slice(1);t[`${m}Event`]=S=>{if(!e.enabled)return;if(!t.getCurrentRenderer()){MT(`
          Can not forward events without a current renderer on the interactor.
        `);return}const g={type:y,pokedRenderer:e.currentRenderer,firstRenderer:t.getFirstRenderer(),...S};t[`invoke${y}`](g)}}),t.recognizeGesture=(y,m)=>{if(Object.keys(m).length>2)return;if(e.startingEventPositions||(e.startingEventPositions={}),y==="TouchStart"){Object.keys(m).forEach(D=>{e.startingEventPositions[D]=m[D]}),e.currentGesture="Start";return}if(y==="TouchEnd"){e.currentGesture==="Pinch"&&(t.render(),t.endPinchEvent()),e.currentGesture==="Rotate"&&(t.render(),t.endRotateEvent()),e.currentGesture==="Pan"&&(t.render(),t.endPanEvent()),e.currentGesture="Start",e.startingEventPositions={};return}let S=0;const v=[],g=[];Object.keys(m).forEach(D=>{v[S]=m[D],g[S]=e.startingEventPositions[D],S++});const x=Math.sqrt((g[0].x-g[1].x)*(g[0].x-g[1].x)+(g[0].y-g[1].y)*(g[0].y-g[1].y)),C=Math.sqrt((v[0].x-v[1].x)*(v[0].x-v[1].x)+(v[0].y-v[1].y)*(v[0].y-v[1].y));let T=ma(Math.atan2(g[1].y-g[0].y,g[1].x-g[0].x)),w=ma(Math.atan2(v[1].y-v[0].y,v[1].x-v[0].x)),_=w-T;w=w+180>=360?w-180:w+180,T=T+180>=360?T-180:T+180,Math.abs(w-T)<Math.abs(_)&&(_=w-T);const E=[];if(E[0]=(v[0].x-g[0].x+v[1].x-g[1].x)/2,E[1]=(v[0].y-g[0].y+v[1].y-g[1].y)/2,y==="TouchMove")if(e.currentGesture==="Start"){let D=.01*Math.sqrt(e.container.clientWidth*e.container.clientWidth+e.container.clientHeight*e.container.clientHeight);D<15&&(D=15);const b=Math.abs(C-x),N=C*3.1415926*Math.abs(_)/360,R=Math.sqrt(E[0]*E[0]+E[1]*E[1]);if(b>D&&b>N&&b>R){e.currentGesture="Pinch";const M={scale:1,touches:m};t.startPinchEvent(M)}else if(N>D&&N>R){e.currentGesture="Rotate";const M={rotation:0,touches:m};t.startRotateEvent(M)}else if(R>D){e.currentGesture="Pan";const M={translation:[0,0],touches:m};t.startPanEvent(M)}}else{if(e.currentGesture==="Rotate"){const D={rotation:_,touches:m};t.rotateEvent(D)}if(e.currentGesture==="Pinch"){const D={scale:C/x,touches:m};t.pinchEvent(D)}if(e.currentGesture==="Pan"){const D={translation:E,touches:m};t.panEvent(D)}}},t.handleVisibilityChange=()=>{e._animationStartTime=Date.now(),e._animationFrameCount=0},t.setCurrentRenderer=y=>{e._forcedRenderer=!!y,e.currentRenderer=y},t.setContainer=y=>{p();const m=a.setContainer(y??null);return m&&h(),m},t.delete=()=>{for(;n.size;)t.cancelAnimation(n.values().next().value);typeof document.hidden<"u"&&document.removeEventListener("visibilitychange",t.handleVisibilityChange),e.container&&t.setContainer(null),a.delete()},typeof document.hidden<"u"&&document.addEventListener("visibilitychange",t.handleVisibilityChange,!1)}const LT={renderWindow:null,interactorStyle:null,picker:null,pickingManager:null,initialized:!1,enabled:!1,enableRender:!0,currentRenderer:null,lightFollowCamera:!0,desiredUpdateRate:30,stillUpdateRate:2,container:null,recognizeGestures:!0,currentGesture:"Start",animationRequest:null,lastFrameTime:.1,recentAnimationFrameRate:10,wheelTimeoutID:0,moveTimeoutID:0,lastGamepadValues:{},preventDefaultOnPointerDown:!1,preventDefaultOnPointerUp:!1,mouseScrollDebounceByPass:!1};function Jh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,LT,a),k.obj(t,e),e._animationExtendedEnd=0,k.event(t,e,"RenderEvent"),$0.forEach(n=>k.event(t,e,n)),k.get(t,e,["initialized","interactorStyle","lastFrameTime","recentAnimationFrameRate","_view"]),k.setGet(t,e,["container","lightFollowCamera","enabled","enableRender","recognizeGestures","desiredUpdateRate","stillUpdateRate","picker","preventDefaultOnPointerDown","preventDefaultOnPointerUp","mouseScrollDebounceByPass"]),k.moveToProtected(t,e,["view"]),RT(t,e)}var Co={newInstance:k.newInstance(Jh,"vtkRenderWindowInteractor"),extend:Jh,handledEvents:$0,...Yh};const{vtkErrorMacro:kT,VOID:FT}=k;function AT(t,e,a,n){return t.getRenderWindow().getViews()[0].worldToDisplay(e,a,n,t)}function VT(t,e,a,n){return t.getRenderWindow().getViews()[0].displayToWorld(e,a,n,t)}const BT={computeWorldToDisplay:AT,computeDisplayToWorld:VT};function UT(t,e){e.classHierarchy.push("vtkInteractorObserver");const a={...t};function n(){for(;e.subscribedEvents.length;)e.subscribedEvents.pop().unsubscribe()}function r(){Co.handledEvents.forEach(i=>{t[`handle${i}`]&&e.subscribedEvents.push(e._interactor[`on${i}`](s=>e.processEvents?t[`handle${i}`](s):FT,e.priority))})}t.setInteractor=i=>{i!==e._interactor&&(n(),e._interactor=i,i&&e.enabled&&r(),t.modified())},t.setEnabled=i=>{i!==e.enabled&&(n(),i&&(e._interactor?r():kT(`
          The interactor must be set before subscribing to events
        `)),e.enabled=i,t.modified())},t.computeDisplayToWorld=(i,s,u,c)=>i?e._interactor.getView().displayToWorld(s,u,c,i):null,t.computeWorldToDisplay=(i,s,u,c)=>i?e._interactor.getView().worldToDisplay(s,u,c,i):null,t.setPriority=i=>{a.setPriority(i)&&e._interactor&&(n(),r())}}const GT={enabled:!0,priority:0,processEvents:!0,subscribedEvents:[]};function Zh(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,GT,a),k.obj(t,e),k.event(t,e,"InteractionEvent"),k.event(t,e,"StartInteractionEvent"),k.event(t,e,"EndInteractionEvent"),k.get(t,e,["_interactor","enabled"]),k.setGet(t,e,["priority","processEvents"]),k.moveToProtected(t,e,["interactor"]),UT(t,e)}var IT={newInstance:k.newInstance(Zh,"vtkInteractorObserver"),extend:Zh,...BT},Qh={States:{IS_START:0,IS_NONE:0,IS_ROTATE:1,IS_PAN:2,IS_SPIN:3,IS_DOLLY:4,IS_CAMERA_POSE:11,IS_WINDOW_LEVEL:1024,IS_SLICE:1025}};const{States:cn}=Qh,H0={Rotate:cn.IS_ROTATE,Pan:cn.IS_PAN,Spin:cn.IS_SPIN,Dolly:cn.IS_DOLLY,CameraPose:cn.IS_CAMERA_POSE,WindowLevel:cn.IS_WINDOW_LEVEL,Slice:cn.IS_SLICE};function PT(t,e){e.classHierarchy.push("vtkInteractorStyle"),Object.keys(H0).forEach(a=>{k.event(t,e,`Start${a}Event`),t[`start${a}`]=()=>{e.state===cn.IS_NONE&&(e.state=H0[a],e._interactor.requestAnimation(t),t.invokeStartInteractionEvent({type:"StartInteractionEvent"}),t[`invokeStart${a}Event`]({type:`Start${a}Event`}))},k.event(t,e,`End${a}Event`),t[`end${a}`]=()=>{e.state===H0[a]&&(e.state=cn.IS_NONE,e._interactor.cancelAnimation(t),t.invokeEndInteractionEvent({type:"EndInteractionEvent"}),t[`invokeEnd${a}Event`]({type:`End${a}Event`}),e._interactor.render())}}),t.handleKeyPress=a=>{const n=e._interactor;let r=null;switch(a.key){case"r":case"R":a.pokedRenderer.resetCamera(),n.render();break;case"w":case"W":r=a.pokedRenderer.getActors(),r.forEach(i=>{const s=i.getProperty();s.setRepresentationToWireframe&&s.setRepresentationToWireframe()}),n.render();break;case"s":case"S":r=a.pokedRenderer.getActors(),r.forEach(i=>{const s=i.getProperty();s.setRepresentationToSurface&&s.setRepresentationToSurface()}),n.render();break;case"v":case"V":r=a.pokedRenderer.getActors(),r.forEach(i=>{const s=i.getProperty();s.setRepresentationToPoints&&s.setRepresentationToPoints()}),n.render();break}}}const zT={state:cn.IS_NONE,handleObservers:1,autoAdjustCameraClippingRange:1};function ep(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,zT,a),IT.extend(t,e,a),PT(t,e)}var K0={newInstance:k.newInstance(ep,"vtkInteractorStyle"),extend:ep,...Qh};const Ha={type:"StartInteractionEvent"},tp={type:"InteractionEvent"},Ka={type:"EndInteractionEvent"};function jT(t,e){e.classHierarchy.push("vtkInteractorStyleRemoteMouse");function a(n){const{buttonLeft:r,buttonMiddle:i,buttonRight:s}=e,u=n.shiftKey?1:0,c=n.controlKey?1:0,o=n.altKey?1:0,f=n.metaKey?1:0,l=r||i||s?"down":"up",[h,p]=e._interactor.getView().getSizeByReference();let{x:d,y}=n.position;return d/=h,y/=p,{action:l,x:d,y,buttonLeft:r,buttonMiddle:i,buttonRight:s,shiftKey:u,altKey:o,ctrlKey:c,metaKey:f,...e.remoteEventAddOn}}t.handleLeftButtonPress=n=>{e.previousPosition=n.position,e.buttonLeft=1,t.onButtonDown(1,n)},t.handleMiddleButtonPress=n=>{e.previousPosition=n.position,e.buttonMiddle=1,t.onButtonDown(2,n)},t.handleRightButtonPress=n=>{e.previousPosition=n.position,e.buttonRight=1,t.onButtonDown(3,n)},t.handleLeftButtonRelease=n=>{e.buttonLeft=0,t.onButtonUp(1,n)},t.handleMiddleButtonRelease=n=>{e.buttonMiddle=0,t.onButtonUp(2,n)},t.handleRightButtonRelease=n=>{e.buttonRight=0,t.onButtonUp(3,n)},t.onButtonDown=(n,r)=>{e._interactor.requestAnimation(t.onButtonDown),t.invokeStartInteractionEvent(Ha),t.invokeRemoteMouseEvent(a(r))},t.onButtonUp=(n,r)=>{t.invokeRemoteMouseEvent(a(r)),t.invokeEndInteractionEvent(Ka),e._interactor.cancelAnimation(t.onButtonDown)},t.handleStartMouseWheel=n=>{e._interactor.requestAnimation(t.handleStartMouseWheel),t.invokeStartInteractionEvent(Ha),t.invokeRemoteWheelEvent({type:"StartMouseWheel",...a(n),spinY:n.spinY})},t.handleMouseWheel=n=>{let r=!0;if(e.wheelThrottleDelay){const i=Date.now();r=e.wheelThrottleDelay<i-e.wheelLastThrottleTime,r&&(e.wheelLastThrottleTime=i)}r&&(t.invokeRemoteWheelEvent({type:"MouseWheel",...a(n),spinY:n.spinY}),t.invokeInteractionEvent(tp))},t.handleEndMouseWheel=()=>{t.invokeRemoteWheelEvent({type:"EndMouseWheel",...e.remoteEventAddOn}),e._interactor.cancelAnimation(t.handleStartMouseWheel),t.invokeEndInteractionEvent(Ka)},t.handleMouseMove=n=>{const r=Date.now();e.throttleDelay<r-e.lastThrottleTime&&(e.sendMouseMove||e.buttonLeft||e.buttonMiddle||e.buttonRight)&&(e.lastThrottleTime=r,t.invokeRemoteMouseEvent(a(n))),t.invokeInteractionEvent(tp)},t.handleKeyPress=()=>{},t.handleStartPinch=n=>{t.startDolly();const{scale:r}=n;e._interactor.requestAnimation(t.handleStartPinch),t.invokeStartInteractionEvent(Ha),t.invokeRemoteGestureEvent({type:"StartPinch",scale:r,...e.remoteEventAddOn})},t.handlePinch=n=>{const{scale:r}=n;t.invokeRemoteGestureEvent({type:"Pinch",scale:r,...e.remoteEventAddOn})},t.handleEndPinch=()=>{t.endDolly(),t.invokeRemoteGestureEvent({type:"EndPinch",...e.remoteEventAddOn}),e._interactor.cancelAnimation(t.handleStartPinch),t.invokeEndInteractionEvent(Ka)},t.handleStartRotate=n=>{t.startRotate();const{rotation:r}=n;e._interactor.requestAnimation(t.handleStartRotate),t.invokeStartInteractionEvent(Ha),t.invokeRemoteGestureEvent({type:"StartRotate",rotation:r,...e.remoteEventAddOn})},t.handleRotate=n=>{const{rotation:r}=n;t.invokeRemoteGestureEvent({type:"Rotate",rotation:r,...e.remoteEventAddOn})},t.handleEndRotate=()=>{t.endRotate(),t.invokeRemoteGestureEvent({type:"EndRotate",...e.remoteEventAddOn}),e._interactor.cancelAnimation(t.handleStartRotate),t.invokeEndInteractionEvent(Ka)},t.handleStartPan=n=>{t.startPan();const{translation:r}=n;e._interactor.requestAnimation(t.handleStartPan),t.invokeStartInteractionEvent(Ha),t.invokeRemoteGestureEvent({type:"StartPan",translation:r,...e.remoteEventAddOn})},t.handlePan=n=>{const{translation:r}=n;t.invokeRemoteGestureEvent({type:"Pan",translation:r,...e.remoteEventAddOn})},t.handleEndPan=()=>{t.endPan(),t.invokeRemoteGestureEvent({type:"EndPan",...e.remoteEventAddOn}),e._interactor.cancelAnimation(t.handleStartPan),t.invokeEndInteractionEvent(Ka)}}const WT={buttonLeft:0,buttonMiddle:0,buttonRight:0,sendMouseMove:!1,throttleDelay:33.3,lastThrottleTime:0,wheelThrottleDelay:0,wheelLastThrottleTime:0};function np(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,WT,a),K0.extend(t,e,a),k.setGet(t,e,["sendMouseMove","remoteEventAddOn","throttleDelay","wheelThrottleDelay"]),k.event(t,e,"RemoteMouseEvent"),k.event(t,e,"RemoteWheelEvent"),k.event(t,e,"RemoteGestureEvent"),jT(t,e)}var $T={newInstance:k.newInstance(np,"vtkInteractorStyleRemoteMouse"),extend:np};const To=OT.newInstance(),HT=To.connect,KT=To.disconnect;function XT(t,e){e.classHierarchy.push("vtkRemoteView"),e.canvasView=CT.newInstance(),e.interactorStyle=$T.newInstance(),e.interactor=Co.newInstance(),e.interactor.setView(e.canvasView),e.interactor.initialize(),e.interactor.setInteractorStyle(e.interactorStyle),e.interactorStyle.onRemoteMouseEvent(n=>{e.session&&e.rpcMouseEvent&&e.session.call(e.rpcMouseEvent,[n])}),e.interactorStyle.onRemoteWheelEvent(n=>{e.session&&e.rpcWheelEvent&&e.session.call(e.rpcWheelEvent,[n])}),e.interactorStyle.onRemoteGestureEvent(n=>{e.session&&e.rpcGestureEvent&&e.session.call(e.rpcGestureEvent,[n])}),t.delete=k.chain(()=>{e.session=null,e.canvasView&&(e.canvasView.setViewStream(null),e.canvasView.delete()),e.interactor&&e.interactor.delete(),e.viewStream&&e.viewStream.delete()},t.delete),t.setViewStream=n=>{e.viewStream=n,e.canvasView.setViewStream(e.viewStream),e.viewStream.setStillQuality(e.stillQuality),e.viewStream.setStillRatio(e.stillRatio),e.viewStream.setInteractiveQuality(e.interactiveQuality),e.viewStream.setInteractiveRatio(e.interactiveRatio),e.interactor.onStartAnimation(e.viewStream.startInteraction),e.interactor.onEndAnimation(e.viewStream.endInteraction),t.setViewId(n.getViewId())},t.setViewId=n=>{e.viewStream||t.setViewStream(To.createViewStream(n)),e.viewStream.setViewId(n),e.interactorStyle.setRemoteEventAddOn({view:n}),t.modified()},t.setContainer=n=>{e.container&&e.interactor.unbindEvents(n),e.container=n,e.canvasView.setContainer(e.container),n&&(e.interactor.bindEvents(n),t.resize())},t.resize=()=>{if(e.container&&e.canvasView){const{width:n,height:r}=e.container.getBoundingClientRect();e.canvasView.setSize(n,r),t.render()}},t.render=()=>{e.viewStream&&e.viewStream.render()},t.resetCamera=()=>{e.viewStream&&e.viewStream.resetCamera()};const a={modified:t.modified};k.set(a,e,["interactiveQuality","interactiveRatio","stillQuality","stillRatio"]),t.setInteractiveQuality=n=>{const r=a.setInteractiveQuality(n);return e.viewStream&&r&&e.viewStream.setInteractiveQuality(e.interactiveQuality),r},t.setInteractiveRatio=n=>{const r=a.setInteractiveRatio(n);return e.viewStream&&r&&e.viewStream.setInteractiveRatio(e.interactiveRatio),r},t.setStillQuality=n=>{const r=a.setStillQuality(n);return e.viewStream&&r&&e.viewStream.setStillQuality(e.stillQuality),r},t.setStillRatio=n=>{const r=a.setStillRatio(n);return e.viewStream&&r&&e.viewStream.setStillRatio(e.stillRatio),r},e.viewStream&&t.setViewStream(e.viewStream)}const qT={viewId:"-1",interactiveQuality:60,interactiveRatio:1/window.devicePixelRatio,stillQuality:100,stillRatio:1,rpcMouseEvent:"viewport.mouse.interaction",rpcGestureEvent:null,rpcWheelEvent:null};function rp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,qT,a),k.obj(t,e,a),k.get(t,e,["container","viewStream","canvasView","interactor","interactorStyle","interactiveQuality","interactiveRatio","stillQuality","stillRatio"]),k.setGet(t,e,["session","rpcMouseEvent","rpcGestureEvent","rpcWheelEvent"]),XT(t,e)}var YT={newInstance:k.newInstance(rp,"vtkRemoteView"),extend:rp,SHARED_IMAGE_STREAM:To,connectImageStream:HT,disconnectImageStream:KT};function JT(t,e){e.classHierarchy.push("vtkCompositeMouseManipulator"),t.startInteraction=()=>{},t.endInteraction=()=>{},t.onButtonDown=(a,n,r)=>{},t.onButtonUp=a=>{},t.onMouseMove=(a,n,r)=>{},t.onStartScroll=(a,n,r)=>{},t.onScroll=(a,n,r)=>{},t.onEndScroll=a=>{},t.isDragEnabled=()=>e.dragEnabled,t.isScrollEnabled=()=>e.scrollEnabled}const ZT={button:1,shift:!1,control:!1,alt:!1,dragEnabled:!0,scrollEnabled:!1};function QT(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ZT,a),k.setGet(t,e,["button","shift","control","alt"]),k.set(t,e,["dragEnabled","scrollEnabled"]),JT(t,e)}var Jr={extend:QT};const ew=[-2,-1,-2,-1],tw={position:"absolute",zIndex:1,border:"2px solid #F44336",backgroundColor:"rgba(0, 0, 0, 0.1)",borderRadius:"4px",boxSizing:"border-box"};function nw(t,e){Object.keys(e).forEach(a=>{t.style[a]=e[a]})}function rw(t,e){e.classHierarchy.push("vtkMouseBoxSelectionManipulator");let a=null,n=null,r=null,i=null,s=null,u=!1;function c(){return!r||!i?ew:[Math.min(r.x,i.x),Math.max(r.x,i.x),Math.min(r.y,i.y),Math.max(r.y,i.y)]}function o(){if(!a||!n)return;const[f,l]=a.getSize(),{width:h,height:p}=n.getBoundingClientRect(),[d,y,m,S]=c();s.style.left=`${h*d/f}px`,s.style.top=`${p-p*S/l}px`,s.style.width=`${h*(y-d)/f}px`,s.style.height=`${p*(S-m)/l}px`}t.onButtonDown=(f,l,h)=>{r=h,e.renderSelection&&(a||(a=f.getView()),!n&&(a!=null&&a.getContainer)&&(n=a.getContainer()),n||(n=e.container),s||(s=document.createElement("div"),nw(s,e.selectionStyle)),o(),n&&!u&&(u=!0,n.appendChild(s)))},t.onMouseMove=(f,l,h)=>{r&&h&&(i=h,t.invokeBoxSelectInput({view:a,container:n,selection:c()}),e.renderSelection&&o())},t.onButtonUp=(f,l)=>{!r||!i&&!e.boxChangeOnClick||(i||(i=r),t.invokeBoxSelectChange({view:a,container:n,selection:c()}),u&&(s.parentElement.removeChild(s),u=!1),a=null,n=null,r=null,i=null)}}function aw(t){return{boxChangeOnClick:!1,renderSelection:!0,...t,selectionStyle:{...tw,...t.selectionStyle}}}function ap(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,aw(a)),ot(t,e),Jr.extend(t,e,a),Or(t,e,"BoxSelectChange"),Or(t,e,"BoxSelectInput"),lt(t,e,["renderSelection","boxChangeOnClick","selectionStyle","container"]),rw(t,e)}var ip={newInstance:Ke(ap,"vtkMouseBoxSelectionManipulator"),extend:ap};const{vtkDebugMacro:X0}=k,{States:iw}=K0,Xa={type:"StartInteractionEvent"},Gn={type:"InteractionEvent"},qa={type:"EndInteractionEvent"};function q0(t,e,a,n,r,i){const s=t.getActiveCamera();let u=s.getFocalPoint();u=e.getInteractorStyle().computeWorldToDisplay(t,u[0],u[1],u[2]);const c=u[2],o=e.getInteractorStyle().computeDisplayToWorld(t,a,n,c),f=e.getInteractorStyle().computeDisplayToWorld(t,r,i,c),l=[f[0]-o[0],f[1]-o[1],f[2]-o[2]];u=s.getFocalPoint();const h=s.getPosition();s.setFocalPoint(l[0]+u[0],l[1]+u[1],l[2]+u[2]),s.setPosition(l[0]+h[0],l[1]+h[1],l[2]+h[2])}function ow(t,e,a,n){const r=a.getActiveCamera();if(r.getParallelProjection()){const i=n.getView(),s=i.getViewportSize(a),u=a.getViewport(),c=i.getSize(),o=s[0],f=s[1],l=o/2,h=f/2,p=e.x-u[0]*c[0],d=e.y-u[1]*c[1];q0(a,n,l,h,p,d),r.setParallelScale(r.getParallelScale()/t),q0(a,n,p,d,l,h)}else{let i=r.getFocalPoint();const s=r.getViewPlaneNormal();i=n.getInteractorStyle().computeWorldToDisplay(a,i[0],i[1],i[2]);const u=n.getInteractorStyle().computeDisplayToWorld(a,e.x,e.y,i[2]);r.setFocalPoint(u[0],u[1],u[2]),r.dolly(t),a.resetCameraClippingRange();const c=r.getPosition();i=r.getFocalPoint();const o=[0,0,0];let f=s[0]*(i[0]-c[0])+s[1]*(i[1]-c[1])+s[2]*(i[2]-c[2]);f/=s[0]**2+s[1]**2+s[2]**2,o[0]=c[0]+s[0]*f,o[1]=c[1]+s[1]*f,o[2]=c[2]+s[2]*f,r.setFocalPoint(o[0],o[1],o[2]),a.resetCameraClippingRange()}}function sw(t,e,a){if(Number.isNaN(a))return;const n=e.getActiveCamera();n.getParallelProjection()?n.setParallelScale(n.getParallelScale()/a):(n.dolly(a),e.resetCameraClippingRange()),t.getLightFollowCamera()&&e.updateLightsGeometryToFollowCamera()}const uw={dollyToPosition:ow,translateCamera:q0,dollyByFactor:sw};function cw(t,e){e.classHierarchy.push("vtkInteractorStyleManipulator"),e.mouseManipulators=[],e.keyboardManipulators=[],e.vrManipulators=[],e.gestureManipulators=[],e.currentManipulator=null,e.currentWheelManipulator=null,e.centerOfRotation=[0,0,0],e.rotationFactor=1,t.removeAllManipulators=()=>{t.removeAllMouseManipulators(),t.removeAllKeyboardManipulators(),t.removeAllVRManipulators(),t.removeAllGestureManipulators()},t.removeAllMouseManipulators=()=>{e.mouseManipulators=[]},t.removeAllKeyboardManipulators=()=>{e.keyboardManipulators=[]},t.removeAllVRManipulators=()=>{e.vrManipulators=[]},t.removeAllGestureManipulators=()=>{e.gestureManipulators=[]};const a=(r,i)=>{const s=i.indexOf(r);return s===-1?!1:(i.splice(s,1),t.modified(),!0)};t.removeMouseManipulator=r=>a(r,e.mouseManipulators),t.removeKeyboardManipulator=r=>a(r,e.keyboardManipulators),t.removeVRManipulator=r=>a(r,e.vrManipulators),t.removeGestureManipulator=r=>a(r,e.gestureManipulators);const n=(r,i)=>i.indexOf(r)!==-1?!1:(i.push(r),t.modified(),!0);t.addMouseManipulator=r=>n(r,e.mouseManipulators),t.addKeyboardManipulator=r=>n(r,e.keyboardManipulators),t.addVRManipulator=r=>n(r,e.vrManipulators),t.addGestureManipulator=r=>n(r,e.gestureManipulators),t.getNumberOfMouseManipulators=()=>e.mouseManipulators.length,t.getNumberOfKeyboardManipulators=()=>e.keyboardManipulators.length,t.getNumberOfVRManipulators=()=>e.vrManipulators.length,t.getNumberOfGestureManipulators=()=>e.gestureManipulators.length,t.resetCurrentManipulator=()=>{e.currentManipulator=null,e.currentWheelManipulator=null},t.handleLeftButtonPress=r=>{e.previousPosition=r.position,t.onButtonDown(1,r)},t.handleMiddleButtonPress=r=>{e.previousPosition=r.position,t.onButtonDown(2,r)},t.handleRightButtonPress=r=>{e.previousPosition=r.position,t.onButtonDown(3,r)},t.handleButton3D=r=>{r&&(e.currentManipulator=t.findVRManipulator(r.device,r.input,r.pressed),e.currentManipulator?(e.currentManipulator.onButton3D(t,r.pokedRenderer,e.state,r.device,r.input,r.pressed),r.pressed?t.startCameraPose():t.endCameraPose()):X0("No manipulator found"))},t.handleMove3D=r=>{e.currentManipulator&&e.state===iw.IS_CAMERA_POSE&&e.currentManipulator.onMove3D(t,r.pokedRenderer,e.state,r)},t.onButtonDown=(r,i)=>{e.currentManipulator||(e.currentManipulator=t.findMouseManipulator(r,i.shiftKey,i.controlKey,i.altKey),e.currentManipulator?(e.currentManipulator.setCenter&&e.currentManipulator.setCenter(e.centerOfRotation),e.currentManipulator.setRotationFactor&&e.currentManipulator.setRotationFactor(e.rotationFactor),e.currentManipulator.startInteraction(),e.currentManipulator.onButtonDown(e._interactor,i.pokedRenderer,i.position),e._interactor.requestAnimation(t.onButtonDown),t.invokeStartInteractionEvent(Xa)):X0("No manipulator found"))},t.findMouseManipulator=(r,i,s,u)=>{let c=null,o=e.mouseManipulators.length;for(;o--;){const f=e.mouseManipulators[o];f&&f.getButton()===r&&f.getShift()===i&&f.getControl()===s&&f.getAlt()===u&&f.isDragEnabled()&&(c=f)}return c},t.findVRManipulator=(r,i)=>{let s=null,u=e.vrManipulators.length;for(;u--;){const c=e.vrManipulators[u];c&&c.getDevice()===r&&c.getInput()===i&&(s=c)}return s},t.handleLeftButtonRelease=()=>{t.onButtonUp(1)},t.handleMiddleButtonRelease=()=>{t.onButtonUp(2)},t.handleRightButtonRelease=()=>{t.onButtonUp(3)},t.onButtonUp=r=>{e.currentManipulator&&e.currentManipulator.getButton&&e.currentManipulator.getButton()===r&&(e.currentManipulator.onButtonUp(e._interactor),e.currentManipulator.endInteraction(),e.currentManipulator=null,e._interactor.cancelAnimation(t.onButtonDown),t.invokeEndInteractionEvent(qa))},t.handleStartMouseWheel=r=>{if(e.currentWheelManipulator)return;let i=null,s=e.mouseManipulators.length;for(;s--;){const u=e.mouseManipulators[s];u&&u.isScrollEnabled()&&u.getShift()===r.shiftKey&&u.getControl()===r.controlKey&&u.getAlt()===r.altKey&&(i=u)}i?(e.currentWheelManipulator=i,e.currentWheelManipulator.onStartScroll(e._interactor,r.pokedRenderer,r.spinY),e.currentWheelManipulator.startInteraction(),e._interactor.requestAnimation(t.handleStartMouseWheel),t.invokeStartInteractionEvent(Xa)):X0("No manipulator found")},t.handleEndMouseWheel=()=>{e.currentWheelManipulator&&e.currentWheelManipulator.onEndScroll&&(e.currentWheelManipulator.onEndScroll(e._interactor),e.currentWheelManipulator.endInteraction(),e.currentWheelManipulator=null,e._interactor.cancelAnimation(t.handleStartMouseWheel),t.invokeEndInteractionEvent(qa))},t.handleMouseWheel=r=>{e.currentWheelManipulator&&e.currentWheelManipulator.onScroll&&(e.currentWheelManipulator.onScroll(e._interactor,r.pokedRenderer,r.spinY,e.cachedMousePosition),t.invokeInteractionEvent(Gn))},t.handleMouseMove=r=>{e.cachedMousePosition=r.position,e.currentManipulator&&e.currentManipulator.onMouseMove&&(e.currentManipulator.onMouseMove(e._interactor,r.pokedRenderer,r.position),t.invokeInteractionEvent(Gn))},t.handleKeyPress=r=>{e.keyboardManipulators.filter(i=>i.onKeyPress).forEach(i=>{i.onKeyPress(e._interactor,r.pokedRenderer,r.key),t.invokeInteractionEvent(Gn)})},t.handleKeyDown=r=>{e.keyboardManipulators.filter(i=>i.onKeyDown).forEach(i=>{i.onKeyDown(e._interactor,r.pokedRenderer,r.key),t.invokeInteractionEvent(Gn)})},t.handleKeyUp=r=>{e.keyboardManipulators.filter(i=>i.onKeyUp).forEach(i=>{i.onKeyUp(e._interactor,r.pokedRenderer,r.key),t.invokeInteractionEvent(Gn)})},t.handleStartPinch=r=>{t.startDolly();let i=e.gestureManipulators.length;for(;i--;){const s=e.gestureManipulators[i];s&&s.isPinchEnabled()&&(s.onStartPinch(e._interactor,r.scale),s.startInteraction())}e._interactor.requestAnimation(t.handleStartPinch),t.invokeStartInteractionEvent(Xa)},t.handleEndPinch=()=>{t.endDolly();let r=e.gestureManipulators.length;for(;r--;){const i=e.gestureManipulators[r];i&&i.isPinchEnabled()&&(i.onEndPinch(e._interactor),i.endInteraction())}e._interactor.cancelAnimation(t.handleStartPinch),t.invokeEndInteractionEvent(qa)},t.handleStartRotate=r=>{t.startRotate();let i=e.gestureManipulators.length;for(;i--;){const s=e.gestureManipulators[i];s&&s.isRotateEnabled()&&(s.onStartRotate(e._interactor,r.rotation),s.startInteraction())}e._interactor.requestAnimation(t.handleStartRotate),t.invokeStartInteractionEvent(Xa)},t.handleEndRotate=()=>{t.endRotate();let r=e.gestureManipulators.length;for(;r--;){const i=e.gestureManipulators[r];i&&i.isRotateEnabled()&&(i.onEndRotate(e._interactor),i.endInteraction())}e._interactor.cancelAnimation(t.handleStartRotate),t.invokeEndInteractionEvent(qa)},t.handleStartPan=r=>{t.startPan();let i=e.gestureManipulators.length;for(;i--;){const s=e.gestureManipulators[i];s&&s.isPanEnabled()&&(s.onStartPan(e._interactor,r.translation),s.startInteraction())}e._interactor.requestAnimation(t.handleStartPan),t.invokeStartInteractionEvent(Xa)},t.handleEndPan=()=>{t.endPan();let r=e.gestureManipulators.length;for(;r--;){const i=e.gestureManipulators[r];i&&i.isPanEnabled()&&(i.onEndPan(e._interactor),i.endInteraction())}e._interactor.cancelAnimation(t.handleStartPan),t.invokeEndInteractionEvent(qa)},t.handlePinch=r=>{let i=e.gestureManipulators.length,s=0;for(;i--;){const u=e.gestureManipulators[i];u&&u.isPinchEnabled()&&(u.onPinch(e._interactor,r.pokedRenderer,r.scale),s++)}s&&t.invokeInteractionEvent(Gn)},t.handlePan=r=>{let i=e.gestureManipulators.length,s=0;for(;i--;){const u=e.gestureManipulators[i];u&&u.isPanEnabled()&&(u.onPan(e._interactor,r.pokedRenderer,r.translation),s++)}s&&t.invokeInteractionEvent(Gn)},t.handleRotate=r=>{let i=e.gestureManipulators.length,s=0;for(;i--;){const u=e.gestureManipulators[i];u&&u.isRotateEnabled()&&(u.onRotate(e._interactor,r.pokedRenderer,r.rotation),s++)}s&&t.invokeInteractionEvent(Gn)}}const lw={cachedMousePosition:null,currentManipulator:null,currentWheelManipulator:null,centerOfRotation:[0,0,0],rotationFactor:1};function op(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lw,a),K0.extend(t,e,a),k.setGet(t,e,["rotationFactor"]),k.get(t,e,["mouseManipulators","keyboardManipulators","vrManipulators","gestureManipulators"]),k.setGetArray(t,e,["centerOfRotation"],3),cw(t,e)}var Zr={newInstance:k.newInstance(op,"vtkInteractorStyleManipulator"),extend:op,...uw};const sp={props:{viewId:{type:String,default:"-1"},wsClient:{type:Object},interactiveRatio:{type:[Number,String]},interactiveQuality:{type:[Number,String]},stillRatio:{type:[Number,String]},stillQuality:{type:[Number,String]},enablePicking:{type:Boolean,default:!1},interactorEvents:{type:Array,default:()=>["EndAnimation"]},boxSelection:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},pickingModes:{type:Array,default:()=>[]}},emits:["onImageCapture","BoxSelection","select","hover","click","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],setup(t,{emit:e}){const a=se.ref(!1),n=se.ref(null),r=se.inject("trame"),i=t.wsClient||(r==null?void 0:r.client);let s=null;if(!i)throw new Error("VtkRemoteView can not be created without a wsClient");const u=i.getImageStream().createViewStream(t.viewId);u.get("protocol").protocol.setQuality(t.viewId,5,.1);const c=YT.newInstance({rpcWheelEvent:"viewport.mouse.zoom.wheel",viewStream:u});t.interactiveRatio&&c.setInteractiveRatio(Number(t.interactiveRatio)),t.interactiveQuality&&c.setInteractiveQuality(Number(t.interactiveQuality)),t.stillRatio&&c.setStillRatio(Number(t.stillRatio)),t.stillQuality&&c.setStillQuality(Number(t.stillQuality));const o=c.render,f=c.resetCamera,l=c.setInteractiveQuality,h=c.setInteractiveRatio,p=c.setStillQuality,d=c.setStillRatio,y=c.getInteractiveQuality,m=c.getInteractiveRatio,S=c.getStillQuality,v=c.getStillRatio,g=c.getInteractor(),x=[];t.interactorEvents.forEach(N=>{const R=`on${N}`;x.push(g[R](M=>e(N,M)))});const C=Zr.newInstance({enabled:t.boxSelection}),T=ip.newInstance({button:1});C.addMouseManipulator(T),x.push(T.onBoxSelectChange(({container:N,selection:R})=>{if(N){const{width:M,height:A}=N.getBoundingClientRect(),I={selection:R,size:[M,A],mode:"remote"};e("BoxSelection",I),t.pickingModes.includes("select")&&e("select",{...I,action:"select"})}})),C.setInteractor(g);function w(){const N=c.getCanvasView(),[R,M]=N.getSize();N.setSize(R+2,M+2),se.nextTick(c.resize)}const _=async()=>{const N=c.getCanvasView().get("bgImage").bgImage.src,M=await(await fetch(N)).blob();return e("onImageCapture",M),M};se.onMounted(async()=>{const N=se.unref(n);c.getCanvasView().setUseBackgroundImage(0),c.setContainer(N),T.setContainer(N),T.setBoxChangeOnClick(t.enablePicking);const R=i.getConnection().getSession();c.setSession(R),c.setViewId(t.viewId),await se.nextTick();const{width:M,height:A}=N.getBoundingClientRect(),I=M<10||A<10?10:0;c.getCanvasView().setSize(Math.round(M+I),Math.round(A+I)),await new Promise($=>{const U=u.onImageReady(({image:B,metadata:F})=>{const[z,H]=F.size;if(z!==B.width||H!==B.height){u.render();return}const X=u.getStillRatio()*Math.round(I+M),Y=u.getStillRatio()*Math.round(I+A);z===X&&H===Y?(U.unsubscribe(),c.getCanvasView().setBackgroundImage(B),$()):u.render()});u.endInteraction()}),c.getCanvasView().setUseBackgroundImage(1),a.value=!0,window.ResizeObserver?(s=new ResizeObserver(c.resize),s.observe(N)):window.addEventListener("resize",c.resize)}),se.onBeforeUnmount(()=>{for(s?(s.disconnect(),s=null):window.removeEventListener("resize",c.resize);x.length;)x.pop().unsubscribe();C.setEnabled(!1),C.delete(),T.delete(),c.delete()}),se.watch(()=>t.viewId,N=>{a.value&&(c.setViewId(se.unref(N)),c.resize())}),se.watch(()=>t.visible,N=>{se.unref(N)&&w()}),se.watch(()=>t.enablePicking,N=>{c.getInteractorStyle().setSendMouseMove(N),T.setBoxChangeOnClick(N)}),se.watch(()=>t.interactiveRatio,N=>{c.setInteractiveRatio(N)}),se.watch(()=>t.interactiveQuality,N=>{c.setInteractiveQuality(N)}),se.watch(()=>t.stillRatio,N=>{c.setStillRatio(N)}),se.watch(()=>t.stillQuality,N=>{c.setStillQuality(N)}),se.watch(()=>[t.pickingModes.includes("select"),t.boxSelection],([N,R])=>{C.setEnabled(N||R),c.getInteractorStyle().setEnabled(!N||t.enablePicking)});function E(N){const R=n.value;if(!R)return;const M=R.getBoundingClientRect(),[A,I]=c.getCanvasView().getSize(),$=A/M.width,U=I/M.height;return{position:{x:$*(N.clientX-M.left),y:U*(M.height-N.clientY+M.top),z:0},size:[A,I],scale:[$,U]}}function D(N){t.pickingModes.includes("click")&&e("click",{mode:"remote",action:"click",...E(N)})}function b(N){t.pickingModes.includes("hover")&&e("hover",{mode:"remote",action:"hover",...E(N)})}return{connected:a,vtkContainer:n,onClick:D,onMouseMove:b,render:o,resetCamera:f,resize:w,setInteractiveQuality:l,setInteractiveRatio:h,setStillQuality:p,setStillRatio:d,getInteractiveQuality:y,getInteractiveRatio:m,getStillQuality:S,getStillRatio:v,captureImage:_}},template:`
    <div style="position:relative;width:100%;height:100%;z-index:0;" @click="onClick" @mousemove="onMouseMove">
      <div ref="vtkContainer" style="position:absolute;width:100%;height:100%;overflow:hidden;" />
      <slot style="display: none;"></slot>
    </div>
  `},fw="WebGL",wo=Object.create(null);function up(t,e){wo[t]=e}function hw(){return Object.keys(wo)}function cp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return wo[t]&&wo[t](e)}function pw(t,e){e.classHierarchy.push("vtkRenderWindow"),t.addRenderer=a=>{t.hasRenderer(a)||(a.setRenderWindow(t),e.renderers.push(a),t.modified())},t.removeRenderer=a=>{e.renderers=e.renderers.filter(n=>n!==a),t.modified()},t.hasRenderer=a=>e.renderers.indexOf(a)!==-1,t.newAPISpecificView=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return cp(a||e.defaultViewAPI,n)},t.addView=a=>{t.hasView(a)||(a.setRenderable(t),e._views.push(a),t.modified())},t.removeView=a=>{e._views=e._views.filter(n=>n!==a),t.modified()},t.hasView=a=>e._views.indexOf(a)!==-1,t.preRender=()=>{e.renderers.forEach(a=>{a.isActiveCameraCreated()||a.resetCamera()})},t.render=()=>{t.preRender(),e.interactor?e.interactor.render():e._views.forEach(a=>a.traverseAllPasses())},t.getStatistics=()=>{const a={propCount:0,invisiblePropCount:0,gpuMemoryMB:0};return e._views.forEach(n=>{a.gpuMemoryMB+=n.getGraphicsMemoryInfo()/1e6}),e.renderers.forEach(n=>{const r=n.getViewProps(),i=e._views[0].getViewNodeFor(n);r.forEach(s=>{if(s.getVisibility()){a.propCount+=1;const u=s.getMapper&&s.getMapper();if(u&&u.getPrimitiveCount){const c=i.getViewNodeFor(u);if(c){a.gpuMemoryMB+=c.getAllocatedGPUMemoryInBytes()/1e6;const o=u.getPrimitiveCount();Object.keys(o).forEach(f=>{a[f]||(a[f]=0),a[f]+=o[f]})}}}else a.invisiblePropCount+=1})}),a.str=Object.keys(a).map(n=>`${n}: ${a[n]}`).join(`
`),a},t.captureImages=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k.setImmediate(t.render),e._views.map(r=>r.captureNextImage?r.captureNextImage(a,n):void 0).filter(r=>!!r)}}const gw={defaultViewAPI:fw,renderers:[],views:[],interactor:null,neverRendered:!0,numberOfLayers:1};function lp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,gw,a),k.obj(t,e),k.setGet(t,e,["interactor","numberOfLayers","_views","defaultViewAPI"]),k.get(t,e,["neverRendered"]),k.getArray(t,e,["renderers"]),k.moveToProtected(t,e,["views"]),k.event(t,e,"completion"),pw(t,e)}var Y0={newInstance:k.newInstance(lp,"vtkRenderWindow"),extend:lp,registerViewConstructor:up,listViewAPIs:hw,newAPISpecificView:cp};const{vtkDebugMacro:_o}=k;function dw(t,e){e.classHierarchy.push("vtkCamera");const a=new Float64Array(3),n=new Float64Array([0,0,-1]),r=new Float64Array([0,1,0]),i=Se(new Float64Array(16)),s=Se(new Float64Array(16)),u=new Float64Array(3),c=new Float64Array(3),o=new Float64Array(3),f=Se(new Float64Array(16)),l=Se(new Float64Array(16)),h=new Float64Array(3),p=new Float64Array(3);function d(){e.viewPlaneNormal[0]=-e.directionOfProjection[0],e.viewPlaneNormal[1]=-e.directionOfProjection[1],e.viewPlaneNormal[2]=-e.directionOfProjection[2]}t.orthogonalizeViewUp=()=>{const y=t.getViewMatrix();e.viewUp[0]=y[4],e.viewUp[1]=y[5],e.viewUp[2]=y[6],t.modified()},t.setPosition=(y,m,S)=>{y===e.position[0]&&m===e.position[1]&&S===e.position[2]||(e.position[0]=y,e.position[1]=m,e.position[2]=S,t.computeDistance(),t.modified())},t.setFocalPoint=(y,m,S)=>{y===e.focalPoint[0]&&m===e.focalPoint[1]&&S===e.focalPoint[2]||(e.focalPoint[0]=y,e.focalPoint[1]=m,e.focalPoint[2]=S,t.computeDistance(),t.modified())},t.setDistance=y=>{if(e.distance===y)return;e.distance=y,e.distance<1e-20&&(e.distance=1e-20,_o("Distance is set to minimum."));const m=e.directionOfProjection;e.focalPoint[0]=e.position[0]+m[0]*e.distance,e.focalPoint[1]=e.position[1]+m[1]*e.distance,e.focalPoint[2]=e.position[2]+m[2]*e.distance,t.modified()},t.computeDistance=()=>{const y=e.focalPoint[0]-e.position[0],m=e.focalPoint[1]-e.position[1],S=e.focalPoint[2]-e.position[2];if(e.distance=Math.sqrt(y*y+m*m+S*S),e.distance<1e-20){e.distance=1e-20,_o("Distance is set to minimum.");const v=e.directionOfProjection;e.focalPoint[0]=e.position[0]+v[0]*e.distance,e.focalPoint[1]=e.position[1]+v[1]*e.distance,e.focalPoint[2]=e.position[2]+v[2]*e.distance}e.directionOfProjection[0]=y/e.distance,e.directionOfProjection[1]=m/e.distance,e.directionOfProjection[2]=S/e.distance,d()},t.dolly=y=>{if(y<=0)return;const m=e.distance/y;t.setPosition(e.focalPoint[0]-m*e.directionOfProjection[0],e.focalPoint[1]-m*e.directionOfProjection[1],e.focalPoint[2]-m*e.directionOfProjection[2])},t.roll=y=>{const m=e.position,S=e.focalPoint,v=e.viewUp,g=new Float64Array([v[0],v[1],v[2],0]);Se(f);const x=new Float64Array([S[0]-m[0],S[1]-m[1],S[2]-m[2]]);mt(f,f,qe(y),x),ii(g,g,f),e.viewUp[0]=g[0],e.viewUp[1]=g[1],e.viewUp[2]=g[2],t.modified()},t.azimuth=y=>{const m=e.focalPoint;Se(l),Ze(l,l,m),mt(l,l,qe(y),e.viewUp),Ze(l,l,[-m[0],-m[1],-m[2]]),Te(h,e.position,l),t.setPosition(h[0],h[1],h[2])},t.yaw=y=>{const m=e.position;Se(l),Ze(l,l,m),mt(l,l,qe(y),e.viewUp),Ze(l,l,[-m[0],-m[1],-m[2]]),Te(p,e.focalPoint,l),t.setFocalPoint(p[0],p[1],p[2])},t.elevation=y=>{const m=e.focalPoint,S=t.getViewMatrix(),v=[-S[0],-S[1],-S[2]];Se(l),Ze(l,l,m),mt(l,l,qe(y),v),Ze(l,l,[-m[0],-m[1],-m[2]]),Te(h,e.position,l),t.setPosition(h[0],h[1],h[2])},t.pitch=y=>{const m=e.position,S=t.getViewMatrix(),v=[S[0],S[1],S[2]];Se(l),Ze(l,l,m),mt(l,l,qe(y),v),Ze(l,l,[-m[0],-m[1],-m[2]]),Te(p,e.focalPoint,l),t.setFocalPoint(...p)},t.zoom=y=>{y<=0||(e.parallelProjection?e.parallelScale/=y:e.viewAngle/=y,t.modified())},t.translate=(y,m,S)=>{const v=[y,m,S];Ca(e.position,v,e.position),Ca(e.focalPoint,v,e.focalPoint),t.computeDistance(),t.modified()},t.applyTransform=y=>{const m=[...e.viewUp,1],S=[],v=[],g=[];m[0]+=e.position[0],m[1]+=e.position[1],m[2]+=e.position[2],ii(S,[...e.position,1],y),ii(v,[...e.focalPoint,1],y),ii(g,m,y),g[0]-=S[0],g[1]-=S[1],g[2]-=S[2],t.setPosition(...S.slice(0,3)),t.setFocalPoint(...v.slice(0,3)),t.setViewUp(...g.slice(0,3))},t.getThickness=()=>e.clippingRange[1]-e.clippingRange[0],t.setThickness=y=>{let m=y;m<1e-20&&(m=1e-20,_o("Thickness is set to minimum.")),t.setClippingRange(e.clippingRange[0],e.clippingRange[0]+m)},t.setThicknessFromFocalPoint=y=>{let m=y;m<1e-20&&(m=1e-20,_o("Thickness is set to minimum.")),t.setClippingRange(e.distance-m/2,e.distance+m/2)},t.setRoll=y=>{},t.getRoll=()=>{},t.setObliqueAngles=(y,m)=>{},t.getOrientation=()=>{},t.getOrientationWXYZ=()=>{},t.getFrustumPlanes=y=>{},t.getCameraLightTransformMatrix=y=>(dt(y,e.cameraLightTransform),y),t.computeCameraLightTransform=()=>{dt(i,t.getViewMatrix()),Nt(i,i),Bo(s,[e.distance,e.distance,e.distance]),Ge(i,i,s),Se(e.cameraLightTransform),Ze(e.cameraLightTransform,i,[0,0,-1])},t.deepCopy=y=>{},t.physicalOrientationToWorldDirection=y=>{const m=Gu(y[0],y[1],y[2],y[3]),S=zn(),v=Gu(0,0,1,0);return Ud(S,m),Uu(v,m,v),Uu(v,v,S),[v[0],v[1],v[2]]},t.getPhysicalToWorldMatrix=y=>{t.getWorldToPhysicalMatrix(y),Nt(y,y)},t.getWorldToPhysicalMatrix=y=>{Se(y);const m=[3];ut(e.physicalViewNorth,e.physicalViewUp,m),y[0]=m[0],y[1]=m[1],y[2]=m[2],y[4]=e.physicalViewUp[0],y[5]=e.physicalViewUp[1],y[6]=e.physicalViewUp[2],y[8]=-e.physicalViewNorth[0],y[9]=-e.physicalViewNorth[1],y[10]=-e.physicalViewNorth[2],ze(y,y),He(u,1/e.physicalScale,1/e.physicalScale,1/e.physicalScale),Dn(y,y,u),Ze(y,y,e.physicalTranslation)},t.computeViewParametersFromViewMatrix=y=>{Nt(i,y),Te(u,a,i),t.computeDistance();const m=e.distance;t.setPosition(u[0],u[1],u[2]),Te(c,n,i),bn(c,c,u),jt(c,c),t.setDirectionOfProjection(c[0],c[1],c[2]),Te(o,r,i),bn(o,o,u),jt(o,o),t.setViewUp(o[0],o[1],o[2]),t.setDistance(m)},t.computeViewParametersFromPhysicalMatrix=y=>{t.getWorldToPhysicalMatrix(i),Ge(i,y,i),t.computeViewParametersFromViewMatrix(i)},t.setViewMatrix=y=>{e.viewMatrix=y,e.viewMatrix&&(dt(i,e.viewMatrix),t.computeViewParametersFromViewMatrix(i),ze(e.viewMatrix,e.viewMatrix))},t.getViewMatrix=()=>{if(e.viewMatrix)return e.viewMatrix;Mu(i,e.position,e.focalPoint,e.viewUp),ze(i,i);const y=new Float64Array(16);return dt(y,i),y},t.setProjectionMatrix=y=>{e.projectionMatrix=y},t.getProjectionMatrix=(y,m,S)=>{const v=new Float64Array(16);if(Se(v),e.projectionMatrix){const C=1/e.physicalScale;return He(u,C,C,C),dt(v,e.projectionMatrix),Dn(v,v,u),ze(v,v),v}Se(i);const g=e.clippingRange[1]-e.clippingRange[0],x=[e.clippingRange[0]+(m+1)*g/2,e.clippingRange[0]+(S+1)*g/2];if(e.parallelProjection){const C=e.parallelScale*y,T=e.parallelScale,w=(e.windowCenter[0]-1)*C,_=(e.windowCenter[0]+1)*C,E=(e.windowCenter[1]-1)*T,D=(e.windowCenter[1]+1)*T;Nu(i,w,_,E,D,x[0],x[1]),ze(i,i)}else{if(e.useOffAxisProjection)throw new Error("Off-Axis projection is not supported at this time");{const C=Math.tan(qe(e.viewAngle)/2);let T,w;e.useHorizontalViewAngle===!0?(T=e.clippingRange[0]*C,w=e.clippingRange[0]*C/y):(T=e.clippingRange[0]*C*y,w=e.clippingRange[0]*C);const _=(e.windowCenter[0]-1)*T,E=(e.windowCenter[0]+1)*T,D=(e.windowCenter[1]-1)*w,b=(e.windowCenter[1]+1)*w,N=x[0],R=x[1];i[0]=2*N/(E-_),i[5]=2*N/(b-D),i[2]=(_+E)/(E-_),i[6]=(D+b)/(b-D),i[10]=-(N+R)/(R-N),i[14]=-1,i[11]=-2*N*R/(R-N),i[15]=0}}return dt(v,i),v},t.getCompositeProjectionMatrix=(y,m,S)=>{const v=t.getViewMatrix(),g=t.getProjectionMatrix(y,m,S);return Ge(g,v,g),g},t.setDirectionOfProjection=(y,m,S)=>{if(e.directionOfProjection[0]===y&&e.directionOfProjection[1]===m&&e.directionOfProjection[2]===S)return;e.directionOfProjection[0]=y,e.directionOfProjection[1]=m,e.directionOfProjection[2]=S;const v=e.directionOfProjection;e.focalPoint[0]=e.position[0]+v[0]*e.distance,e.focalPoint[1]=e.position[1]+v[1]*e.distance,e.focalPoint[2]=e.position[2]+v[2]*e.distance,d()},t.setDeviceAngles=(y,m,S,v)=>{const g=[3];ut(e.physicalViewNorth,e.physicalViewUp,g);const x=Se(new Float64Array(16));mt(x,x,qe(y),e.physicalViewUp),mt(x,x,qe(m),g),mt(x,x,qe(S),e.physicalViewNorth),mt(x,x,qe(-v),e.physicalViewUp);const C=new Float64Array([-e.physicalViewUp[0],-e.physicalViewUp[1],-e.physicalViewUp[2]]),T=new Float64Array(e.physicalViewNorth);Te(C,C,x),Te(T,T,x),t.setDirectionOfProjection(C[0],C[1],C[2]),t.setViewUp(T[0],T[1],T[2]),t.modified()},t.setOrientationWXYZ=(y,m,S,v)=>{const g=Se(new Float64Array(16));if(y!==0&&(m!==0||S!==0||v!==0)){const T=qe(y),w=zn();Go(w,[m,S,v],T),Uo(g,w)}const x=new Float64Array(3);Te(x,[0,0,-1],g);const C=new Float64Array(3);Te(C,[0,1,0],g),t.setDirectionOfProjection(...x),t.setViewUp(...C),t.modified()},t.computeClippingRange=y=>{let m=null,S=null;m=e.viewPlaneNormal,S=e.position;const v=-m[0],g=-m[1],x=-m[2],C=-(v*S[0]+g*S[1]+x*S[2]),T=[v*y[0]+g*y[2]+x*y[4]+C,1e-18];for(let w=0;w<2;w++)for(let _=0;_<2;_++)for(let E=0;E<2;E++){const D=v*y[E]+g*y[2+_]+x*y[4+w]+C;T[0]=D<T[0]?D:T[0],T[1]=D>T[1]?D:T[1]}return T}}const vw={position:[0,0,1],focalPoint:[0,0,0],viewUp:[0,1,0],directionOfProjection:[0,0,-1],parallelProjection:!1,useHorizontalViewAngle:!1,viewAngle:30,parallelScale:1,clippingRange:[.01,1000.01],windowCenter:[0,0],viewPlaneNormal:[0,0,1],useOffAxisProjection:!1,screenBottomLeft:[-.5,-.5,-.5],screenBottomRight:[.5,-.5,-.5],screenTopRight:[.5,.5,-.5],freezeFocalPoint:!1,projectionMatrix:null,viewMatrix:null,cameraLightTransform:Vo(),physicalTranslation:[0,0,0],physicalScale:1,physicalViewUp:[0,1,0],physicalViewNorth:[0,0,-1]};function fp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,vw,a),k.obj(t,e),k.get(t,e,["distance"]),k.setGet(t,e,["parallelProjection","useHorizontalViewAngle","viewAngle","parallelScale","useOffAxisProjection","freezeFocalPoint","physicalScale"]),k.getArray(t,e,["directionOfProjection","viewPlaneNormal","position","focalPoint"]),k.setGetArray(t,e,["clippingRange","windowCenter"],2),k.setGetArray(t,e,["viewUp","screenBottomLeft","screenBottomRight","screenTopRight","physicalTranslation","physicalViewUp","physicalViewNorth"],3),dw(t,e)}var J0={newInstance:k.newInstance(fp,"vtkCamera"),extend:fp};const yw=["HeadLight","CameraLight","SceneLight"];function mw(t,e){e.classHierarchy.push("vtkLight");const a=new Float64Array(3);t.getTransformedPosition=()=>(e.transformMatrix?Te(a,e.position,e.transformMatrix):He(a,e.position[0],e.position[1],e.position[2]),a),t.getTransformedFocalPoint=()=>(e.transformMatrix?Te(a,e.focalPoint,e.transformMatrix):He(a,e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),a),t.getDirection=()=>(e.directionMTime<e.mtime&&(Bu(e.direction,e.focalPoint,e.position),nt(e.direction),e.directionMTime=e.mtime),e.direction),t.setDirection=n=>{const r=new Float64Array(3);Bu(r,e.position,n),e.focalPoint=r},t.setDirectionAngle=(n,r)=>{const i=qe(n),s=qe(r);t.setPosition(Math.cos(i)*Math.sin(s),Math.sin(i),Math.cos(i)*Math.cos(s)),t.setFocalPoint(0,0,0),t.setPositional(0)},t.setLightTypeToHeadLight=()=>{t.setLightType("HeadLight")},t.setLightTypeToCameraLight=()=>{t.setLightType("CameraLight")},t.setLightTypeToSceneLight=()=>{t.setTransformMatrix(null),t.setLightType("SceneLight")},t.lightTypeIsHeadLight=()=>e.lightType==="HeadLight",t.lightTypeIsSceneLight=()=>e.lightType==="SceneLight",t.lightTypeIsCameraLight=()=>e.lightType==="CameraLight"}const xw={switch:!0,intensity:1,color:[1,1,1],position:[0,0,1],focalPoint:[0,0,0],positional:!1,exponent:1,coneAngle:30,coneFalloff:5,attenuationValues:[1,0,0],transformMatrix:null,lightType:"SceneLight",shadowAttenuation:1,direction:[0,0,0],directionMTime:0};function hp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,xw,a),k.obj(t,e),k.setGet(t,e,["intensity","switch","positional","exponent","coneAngle","coneFalloff","transformMatrix","lightType","shadowAttenuation","attenuationValues"]),k.setGetArray(t,e,["color","position","focalPoint","attenuationValues"],3),mw(t,e)}var pp={newInstance:k.newInstance(hp,"vtkLight"),extend:hp,LIGHT_TYPES:yw};const{vtkErrorMacro:Eo}=k;function Sw(t){return()=>Eo(`vtkViewport::${t} - NOT IMPLEMENTED`)}function Cw(t,e){e.classHierarchy.push("vtkViewport"),t.getViewProps=()=>e.props,t.hasViewProp=n=>e.props.includes(n),t.addViewProp=n=>{n&&!t.hasViewProp(n)&&e.props.push(n)},t.removeViewProp=n=>{const r=e.props.filter(i=>i!==n);e.props.length!==r.length&&(e.props=r)},t.removeAllViewProps=()=>{e.props=[]};function a(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];r.push(n);const i=n.getNestedProps();if(i&&i.length)for(let s=0;s<i.length;s++)a(i[s],r);return r}t.getViewPropsWithNestedProps=()=>{const n=[];for(let r=0;r<e.props.length;r++)a(e.props[r],n);return n},t.addActor2D=t.addViewProp,t.removeActor2D=n=>{t.removeViewProp(n)},t.getActors2D=()=>(e.actors2D=[],e.props.forEach(n=>{e.actors2D=e.actors2D.concat(n.getActors2D())}),e.actors2D),t.displayToView=()=>Eo("call displayToView on your view instead"),t.viewToDisplay=()=>Eo("callviewtodisplay on your view instead"),t.getSize=()=>Eo("call getSize on your View instead"),t.normalizedDisplayToProjection=(n,r,i)=>{const s=t.normalizedDisplayToNormalizedViewport(n,r,i);return t.normalizedViewportToProjection(s[0],s[1],s[2])},t.normalizedDisplayToNormalizedViewport=(n,r,i)=>{const s=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[(n-e.viewport[0])/s[0],(r-e.viewport[1])/s[1],i]},t.normalizedViewportToProjection=(n,r,i)=>[n*2-1,r*2-1,i*2-1],t.projectionToNormalizedDisplay=(n,r,i)=>{const s=t.projectionToNormalizedViewport(n,r,i);return t.normalizedViewportToNormalizedDisplay(s[0],s[1],s[2])},t.normalizedViewportToNormalizedDisplay=(n,r,i)=>{const s=[e.viewport[2]-e.viewport[0],e.viewport[3]-e.viewport[1]];return[n*s[0]+e.viewport[0],r*s[1]+e.viewport[1],i]},t.projectionToNormalizedViewport=(n,r,i)=>[(n+1)*.5,(r+1)*.5,(i+1)*.5],t.PickPropFrom=Sw("PickPropFrom")}const Tw={background:[0,0,0],background2:[.2,.2,.2],gradientBackground:!1,viewport:[0,0,1,1],aspect:[1,1],pixelAspect:[1,1],props:[],actors2D:[]};function gp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Tw,a),k.obj(t,e),k.event(t,e,"event"),k.setGetArray(t,e,["viewport"],4),k.setGetArray(t,e,["background","background2"],3),Cw(t,e)}var ww={newInstance:k.newInstance(gp,"vtkViewport"),extend:gp};const{vtkDebugMacro:Ya,vtkErrorMacro:In,vtkWarningMacro:_w}=wt;function dp(t){return()=>In(`vtkRenderer::${t} - NOT IMPLEMENTED`)}function Ew(t,e){e.classHierarchy.push("vtkRenderer");const a={type:"ComputeVisiblePropBoundsEvent",renderer:t},n={type:"ResetCameraClippingRangeEvent",renderer:t},r={type:"ResetCameraEvent",renderer:t};t.updateCamera=()=>(e.activeCamera||(Ya("No cameras are on, creating one."),t.getActiveCameraAndResetIfCreated()),e.activeCamera.render(t),!0),t.updateLightsGeometryToFollowCamera=()=>{const i=t.getActiveCameraAndResetIfCreated();e.lights.forEach(s=>{s.lightTypeIsSceneLight()||(s.lightTypeIsHeadLight()?(s.setPositionFrom(i.getPositionByReference()),s.setFocalPointFrom(i.getFocalPointByReference()),s.modified(i.getMTime())):s.lightTypeIsCameraLight()?s.setTransformMatrix(i.getCameraLightTransformMatrix(Vo())):In("light has unknown light type",s.get()))})},t.updateLightGeometry=()=>e.lightFollowCamera?t.updateLightsGeometryToFollowCamera():!0,t.allocateTime=dp("allocateTime"),t.updateGeometry=dp("updateGeometry"),t.getVTKWindow=()=>e._renderWindow,t.setLayer=i=>{Ya(t.getClassName(),t,"setting Layer to ",i),e.layer!==i&&(e.layer=i,t.modified()),t.setPreserveColorBuffer(!!i)},t.setActiveCamera=i=>e.activeCamera===i?!1:(e.activeCamera=i,t.modified(),t.invokeEvent({type:"ActiveCameraEvent",camera:i}),!0),t.makeCamera=()=>{const i=J0.newInstance();return t.invokeEvent({type:"CreateCameraEvent",camera:i}),i},t.getActiveCamera=()=>(e.activeCamera||(e.activeCamera=t.makeCamera()),e.activeCamera),t.getActiveCameraAndResetIfCreated=()=>(e.activeCamera||(t.getActiveCamera(),t.resetCamera()),e.activeCamera),t.getActors=()=>(e.actors=[],e.props.forEach(i=>{e.actors=e.actors.concat(i.getActors())}),e.actors),t.addActor=t.addViewProp,t.removeActor=i=>{e.actors=e.actors.filter(s=>s!==i),t.removeViewProp(i),t.modified()},t.removeAllActors=()=>{t.getActors().forEach(s=>{t.removeViewProp(s)}),e.actors=[],t.modified()},t.getVolumes=()=>(e.volumes=[],e.props.forEach(i=>{e.volumes=e.volumes.concat(i.getVolumes())}),e.volumes),t.addVolume=t.addViewProp,t.removeVolume=i=>{e.volumes=e.volumes.filter(s=>s!==i),t.removeViewProp(i),t.modified()},t.removeAllVolumes=()=>{t.getVolumes().forEach(s=>{t.removeViewProp(s)}),e.volumes=[],t.modified()},t.hasLight=i=>e.lights.includes(i),t.addLight=i=>{i&&!t.hasLight(i)&&(e.lights.push(i),t.modified())},t.removeLight=i=>{e.lights=e.lights.filter(s=>s!==i),t.modified()},t.removeAllLights=()=>{e.lights=[],t.modified()},t.setLightCollection=i=>{e.lights=i,t.modified()},t.makeLight=pp.newInstance,t.createLight=()=>{e.automaticLightCreation&&(e._createdLight&&(t.removeLight(e._createdLight),e._createdLight.delete(),e._createdLight=null),e._createdLight=t.makeLight(),t.addLight(e._createdLight),e._createdLight.setLightTypeToHeadLight(),e._createdLight.setPosition(t.getActiveCamera().getPosition()),e._createdLight.setFocalPoint(t.getActiveCamera().getFocalPoint()))},t.normalizedDisplayToWorld=(i,s,u,c)=>{let o=t.normalizedDisplayToProjection(i,s,u);return o=t.projectionToView(o[0],o[1],o[2],c),t.viewToWorld(o[0],o[1],o[2])},t.worldToNormalizedDisplay=(i,s,u,c)=>{let o=t.worldToView(i,s,u);return o=t.viewToProjection(o[0],o[1],o[2],c),t.projectionToNormalizedDisplay(o[0],o[1],o[2])},t.viewToWorld=(i,s,u)=>{if(e.activeCamera===null)return In("ViewToWorld: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const c=e.activeCamera.getViewMatrix();Nt(c,c),ze(c,c);const o=new Float64Array([i,s,u]);return Te(o,o,c),o},t.projectionToView=(i,s,u,c)=>{if(e.activeCamera===null)return In("ProjectionToView: no active camera, cannot compute projection to view, returning 0,0,0"),[0,0,0];const o=e.activeCamera.getProjectionMatrix(c,-1,1);Nt(o,o),ze(o,o);const f=new Float64Array([i,s,u]);return Te(f,f,o),f},t.worldToView=(i,s,u)=>{if(e.activeCamera===null)return In("WorldToView: no active camera, cannot compute view to world, returning 0,0,0"),[0,0,0];const c=e.activeCamera.getViewMatrix();ze(c,c);const o=new Float64Array([i,s,u]);return Te(o,o,c),o},t.viewToProjection=(i,s,u,c)=>{if(e.activeCamera===null)return In("ViewToProjection: no active camera, cannot compute view to projection, returning 0,0,0"),[0,0,0];const o=e.activeCamera.getProjectionMatrix(c,-1,1);ze(o,o);const f=new Float64Array([i,s,u]);return Te(f,f,o),f},t.computeVisiblePropBounds=()=>{e.allBounds[0]=Le.INIT_BOUNDS[0],e.allBounds[1]=Le.INIT_BOUNDS[1],e.allBounds[2]=Le.INIT_BOUNDS[2],e.allBounds[3]=Le.INIT_BOUNDS[3],e.allBounds[4]=Le.INIT_BOUNDS[4],e.allBounds[5]=Le.INIT_BOUNDS[5];let i=!0;t.invokeEvent(a);for(let s=0;s<e.props.length;++s){const u=e.props[s];if(u.getVisibility()&&u.getUseBounds()){const c=u.getBounds();c&&Mi(c)&&(i=!1,c[0]<e.allBounds[0]&&(e.allBounds[0]=c[0]),c[1]>e.allBounds[1]&&(e.allBounds[1]=c[1]),c[2]<e.allBounds[2]&&(e.allBounds[2]=c[2]),c[3]>e.allBounds[3]&&(e.allBounds[3]=c[3]),c[4]<e.allBounds[4]&&(e.allBounds[4]=c[4]),c[5]>e.allBounds[5]&&(e.allBounds[5]=c[5]))}}return i&&(Fr(e.allBounds),Ya("Can't compute bounds, no 3D props are visible")),e.allBounds},t.resetCamera=function(){const s=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds(),u=[0,0,0];if(!Mi(s))return Ya("Cannot reset camera!"),!1;let c=null;if(t.getActiveCamera())c=e.activeCamera.getViewPlaneNormal();else return In("Trying to reset non-existent camera"),!1;e.activeCamera.setViewAngle(30),u[0]=(s[0]+s[1])/2,u[1]=(s[2]+s[3])/2,u[2]=(s[4]+s[5])/2;let o=s[1]-s[0],f=s[3]-s[2],l=s[5]-s[4];o*=o,f*=f,l*=l;let h=o+f+l;h=h===0?1:h,h=Math.sqrt(h)*.5;const p=qe(e.activeCamera.getViewAngle()),d=h,y=h/Math.sin(p*.5),m=e.activeCamera.getViewUp();return Math.abs(we(m,c))>.999&&(_w("Resetting view-up since view plane normal is parallel"),e.activeCamera.setViewUp(-m[2],m[0],m[1])),e.activeCamera.setFocalPoint(u[0],u[1],u[2]),e.activeCamera.setPosition(u[0]+y*c[0],u[1]+y*c[1],u[2]+y*c[2]),t.resetCameraClippingRange(s),e.activeCamera.setParallelScale(d),e.activeCamera.setPhysicalScale(h),e.activeCamera.setPhysicalTranslation(-u[0],-u[1],-u[2]),t.invokeEvent(r),!0},t.resetCameraClippingRange=function(){const s=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||t.computeVisiblePropBounds();if(!Mi(s))return Ya("Cannot reset camera clipping range!"),!1;if(t.getActiveCameraAndResetIfCreated(),!e.activeCamera)return In("Trying to reset clipping range of non-existent camera"),!1;const u=e.activeCamera.computeClippingRange(s);let c=0;if(e.activeCamera.getParallelProjection())c=.2*e.activeCamera.getParallelScale();else{const o=qe(e.activeCamera.getViewAngle());c=.2*Math.tan(o/2)*u[1]}return u[1]-u[0]<c&&(c=c-u[1]+u[0],u[1]+=c/2,u[0]-=c/2),u[0]<0&&(u[0]=0),u[0]=.99*u[0]-(u[1]-u[0])*e.clippingRangeExpansion,u[1]=1.01*u[1]+(u[1]-u[0])*e.clippingRangeExpansion,u[0]=u[0]>=u[1]?.01*u[1]:u[0],e.nearClippingPlaneTolerance||(e.nearClippingPlaneTolerance=.01),u[0]<e.nearClippingPlaneTolerance*u[1]&&(u[0]=e.nearClippingPlaneTolerance*u[1]),e.activeCamera.setClippingRange(u[0],u[1]),t.invokeEvent(n),!1},t.setRenderWindow=i=>{i!==e._renderWindow&&(e._vtkWindow=i,e._renderWindow=i)},t.visibleActorCount=()=>e.props.filter(i=>i.getVisibility()).length,t.visibleVolumeCount=t.visibleActorCount,t.getMTime=()=>{let i=e.mtime;const s=e.activeCamera?e.activeCamera.getMTime():0;s>i&&(i=s);const u=e._createdLight?e._createdLight.getMTime():0;return u>i&&(i=u),i},t.getTransparent=()=>!!e.preserveColorBuffer,t.isActiveCameraCreated=()=>!!e.activeCamera}const Dw={pickedProp:null,activeCamera:null,allBounds:[],ambient:[1,1,1],allocatedRenderTime:100,timeFactor:1,automaticLightCreation:!0,twoSidedLighting:!0,lastRenderTimeInSeconds:-1,renderWindow:null,lights:[],actors:[],volumes:[],lightFollowCamera:!0,numberOfPropsRendered:0,propArray:null,pathArray:null,layer:0,preserveColorBuffer:!1,preserveDepthBuffer:!1,computeVisiblePropBounds:fn(),interactive:!0,nearClippingPlaneTolerance:0,clippingRangeExpansion:.05,erase:!0,draw:!0,useShadows:!1,useDepthPeeling:!1,occlusionRatio:0,maximumNumberOfPeels:4,selector:null,delegate:null,texturedBackground:!1,backgroundTexture:null,environmentTexture:null,environmentTextureDiffuseStrength:1,environmentTextureSpecularStrength:1,useEnvironmentTextureAsBackground:!1,pass:0};function vp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(Object.assign(e,Dw,a),ww.extend(t,e,a),e.background||(e.background=[0,0,0,1]);e.background.length<3;)e.background.push(0);e.background.length===3&&e.background.push(1),Lt(t,e,["_renderWindow","allocatedRenderTime","timeFactor","lastRenderTimeInSeconds","numberOfPropsRendered","lastRenderingUsedDepthPeeling","selector"]),lt(t,e,["twoSidedLighting","lightFollowCamera","automaticLightCreation","erase","draw","nearClippingPlaneTolerance","clippingRangeExpansion","backingStore","interactive","layer","preserveColorBuffer","preserveDepthBuffer","useDepthPeeling","occlusionRatio","maximumNumberOfPeels","delegate","backgroundTexture","texturedBackground","environmentTexture","environmentTextureDiffuseStrength","environmentTextureSpecularStrength","useEnvironmentTextureAsBackground","useShadows","pass"]),ua(t,e,["actors","volumes","lights"]),pi(t,e,["background"],4,1),ca(t,e,["renderWindow"]),Ew(t,e)}var yp={newInstance:Ke(vp,"vtkRenderer"),extend:vp};const{vtkErrorMacro:Do}=k;function bw(t,e){e.classHierarchy.push("vtkPiecewiseFunction"),t.getSize=()=>e.nodes.length,t.getType=()=>{let a,n=0,r=0;e.nodes.length>0&&(n=e.nodes[0].y);for(let i=1;i<e.nodes.length;i++){if(a=e.nodes[i].y,a!==n)if(a>n)switch(r){case 0:case 1:r=1;break;case 2:default:r=3;break}else switch(r){case 0:case 2:r=2;break;case 1:default:r=3;break}if(n=a,r===3)break}switch(r){case 0:return"Constant";case 1:return"NonDecreasing";case 2:return"NonIncreasing";case 3:default:return"Varied"}},t.getDataPointer=()=>{const a=e.nodes.length;if(e.function=null,a>0){e.function=[];for(let n=0;n<a;n++)e.function[2*n]=e.nodes[n].x,e.function[2*n+1]=e.nodes[n].y}return e.function},t.getFirstNonZeroValue=()=>{if(e.nodes.length===0)return 0;let a=1,n=0,r=0;for(;r<e.nodes.length;r++)if(e.nodes[r].y!==0){a=0;break}return a?n=Number.MAX_VALUE:r>0?n=e.nodes[r-1].x:e.clamping?n=-Number.MAX_VALUE:n=e.nodes[0].x,n},t.getNodeValue=(a,n)=>{const r=e.nodes.length;return a<0||a>=r?(Do("Index out of range!"),-1):(n[0]=e.nodes[a].x,n[1]=e.nodes[a].y,n[2]=e.nodes[a].midpoint,n[3]=e.nodes[a].sharpness,1)},t.setNodeValue=(a,n)=>{const r=e.nodes.length;if(a<0||a>=r)return Do("Index out of range!"),-1;const i=e.nodes[a].x;return e.nodes[a].x=n[0],e.nodes[a].y=n[1],e.nodes[a].midpoint=n[2],e.nodes[a].sharpness=n[3],i!==n[0]?t.sortAndUpdateRange():t.modified(),1},t.addPoint=(a,n)=>t.addPointLong(a,n,.5,0),t.addPointLong=(a,n,r,i)=>{if(r<0||r>1)return Do("Midpoint outside range [0.0, 1.0]"),-1;if(i<0||i>1)return Do("Sharpness outside range [0.0, 1.0]"),-1;e.allowDuplicateScalars||t.removePoint(a);const s={x:a,y:n,midpoint:r,sharpness:i};e.nodes.push(s),t.sortAndUpdateRange();let u;for(u=0;u<e.nodes.length&&e.nodes[u].x!==a;u++);return u<e.nodes.length?u:-1},t.setNodes=a=>{e.nodes!==a&&(e.nodes=a,t.sortAndUpdateRange())},t.sortAndUpdateRange=()=>{e.nodes.sort((n,r)=>n.x-r.x),t.updateRange()||t.modified()},t.updateRange=()=>{const a=e.range.slice(),n=e.nodes.length;return n?(e.range[0]=e.nodes[0].x,e.range[1]=e.nodes[n-1].x):(e.range[0]=0,e.range[1]=0),a[0]===e.range[0]&&a[1]===e.range[1]?!1:(t.modified(),!0)},t.removePoint=a=>{let n;for(n=0;n<e.nodes.length&&e.nodes[n].x!==a;n++);if(n>=e.nodes.length)return-1;const r=n;let i=!1;return e.nodes.splice(n,1),(n===0||n===e.nodes.length)&&(i=t.updateRange()),i||t.modified(),r},t.removeAllPoints=()=>{e.nodes=[],t.sortAndUpdateRange()},t.addSegment=(a,n,r,i)=>{t.sortAndUpdateRange();for(let s=0;s<e.nodes.length;)e.nodes[s].x>=a&&e.nodes[s].x<=r?e.nodes.splice(s,1):s++;t.addPoint(a,n,.5,0),t.addPoint(r,i,.5,0)},t.getValue=a=>{const n=[];return t.getTable(a,a,1,n),n[0]},t.adjustRange=a=>{if(a.length<2)return 0;const n=t.getRange();n[0]<a[0]?t.addPoint(a[0],t.getValue(a[0])):t.addPoint(a[0],t.getValue(n[0])),n[1]>a[1]?t.addPoint(a[1],t.getValue(a[1])):t.addPoint(a[1],t.getValue(n[1])),t.sortAndUpdateRange();for(let r=0;r<e.nodes.length;)e.nodes[r].x>=a[0]&&e.nodes[r].x<=a[1]?e.nodes.splice(r,1):++r;return t.sortAndUpdateRange(),1},t.estimateMinNumberOfSamples=(a,n)=>{const r=t.findMinimumXDistance();return Math.ceil((n-a)/r)},t.findMinimumXDistance=()=>{const a=e.nodes.length;if(a<2)return-1;let n=e.nodes[1].x-e.nodes[0].x;for(let r=0;r<a-1;r++){const i=e.nodes[r+1].x-e.nodes[r].x;i<n&&(n=i)}return n},t.getTable=function(a,n,r,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1,u,c=0;const o=e.nodes.length;let f=0;o!==0&&(f=e.nodes[o-1].y);let l=0,h=0,p=0,d=0,y=0,m=0,S=0;for(u=0;u<r;u++){const v=s*u;for(r>1?l=a+u/(r-1)*(n-a):l=.5*(a+n);c<o&&l>e.nodes[c].x;)c++,c<o&&(h=e.nodes[c-1].x,p=e.nodes[c].x,d=e.nodes[c-1].y,y=e.nodes[c].y,m=e.nodes[c-1].midpoint,S=e.nodes[c-1].sharpness,m<1e-5&&(m=1e-5),m>.99999&&(m=.99999));if(c>=o)i[v]=e.clamping?f:0;else if(c===0)i[v]=e.clamping?e.nodes[0].y:0;else{let g=(l-h)/(p-h);if(g<m?g=.5*g/m:g=.5+.5*(g-m)/(1-m),S>.99)if(g<.5){i[v]=d;continue}else{i[v]=y;continue}if(S<.01){i[v]=(1-g)*d+g*y;continue}g<.5?g=.5*(g*2)**(1+10*S):g>.5&&(g=1-.5*((1-g)*2)**(1+10*S));const x=g*g,C=x*g,T=2*C-3*x+1,w=-2*C+3*x,_=C-2*x+g,E=C-x,D=y-d,b=(1-S)*D;i[v]=T*d+w*y+_*b+E*b;const N=d<y?d:y,R=d>y?d:y;i[v]=i[v]<N?N:i[v],i[v]=i[v]>R?R:i[v]}}}}const Ow={range:[0,0],clamping:!0,allowDuplicateScalars:!1};function mp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Ow,a),k.obj(t,e),e.nodes=[],k.setGet(t,e,["allowDuplicateScalars","clamping"]),k.setArray(t,e,["range"],2),k.getArray(t,e,["range"]),bw(t,e)}var bo={newInstance:k.newInstance(mp,"vtkPiecewiseFunction"),extend:mp};const{InterpolationType:Ja,OpacityMode:Nw}=H1,{vtkErrorMacro:Z0}=k,Oo=4;function Mw(t,e){e.classHierarchy.push("vtkVolumeProperty"),t.getMTime=()=>{let r=e.mtime,i;for(let s=0;s<Oo;s++)e.componentData[s].colorChannels===1?e.componentData[s].grayTransferFunction&&(i=e.componentData[s].grayTransferFunction.getMTime(),r=r>i?r:i):e.componentData[s].colorChannels===3&&e.componentData[s].rGBTransferFunction&&(i=e.componentData[s].rGBTransferFunction.getMTime(),r=r>i?r:i),e.componentData[s].scalarOpacity&&(i=e.componentData[s].scalarOpacity.getMTime(),r=r>i?r:i),e.componentData[s].gradientOpacity&&(e.componentData[s].disableGradientOpacity||(i=e.componentData[s].gradientOpacity.getMTime(),r=r>i?r:i));return r},t.getColorChannels=r=>r<0||r>3?(Z0("Bad index - must be between 0 and 3"),0):e.componentData[r].colorChannels,t.setGrayTransferFunction=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=!1;return e.componentData[r].grayTransferFunction!==i&&(e.componentData[r].grayTransferFunction=i,s=!0),e.componentData[r].colorChannels!==1&&(e.componentData[r].colorChannels=1,s=!0),s&&t.modified(),s},t.getGrayTransferFunction=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[r].grayTransferFunction===null&&(e.componentData[r].grayTransferFunction=bo.newInstance(),e.componentData[r].grayTransferFunction.addPoint(0,0),e.componentData[r].grayTransferFunction.addPoint(1024,1),e.componentData[r].colorChannels!==1&&(e.componentData[r].colorChannels=1),t.modified()),e.componentData[r].grayTransferFunction},t.setRGBTransferFunction=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=!1;return e.componentData[r].rGBTransferFunction!==i&&(e.componentData[r].rGBTransferFunction=i,s=!0),e.componentData[r].colorChannels!==3&&(e.componentData[r].colorChannels=3,s=!0),s&&t.modified(),s},t.getRGBTransferFunction=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[r].rGBTransferFunction===null&&(e.componentData[r].rGBTransferFunction=j0.newInstance(),e.componentData[r].rGBTransferFunction.addRGBPoint(0,0,0,0),e.componentData[r].rGBTransferFunction.addRGBPoint(1024,1,1,1),e.componentData[r].colorChannels!==3&&(e.componentData[r].colorChannels=3),t.modified()),e.componentData[r].rGBTransferFunction},t.setScalarOpacity=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return e.componentData[r].scalarOpacity!==i?(e.componentData[r].scalarOpacity=i,t.modified(),!0):!1},t.getScalarOpacity=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[r].scalarOpacity===null&&(e.componentData[r].scalarOpacity=bo.newInstance(),e.componentData[r].scalarOpacity.addPoint(0,1),e.componentData[r].scalarOpacity.addPoint(1024,1),t.modified()),e.componentData[r].scalarOpacity},t.setComponentWeight=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(r<0||r>=Oo)return Z0("Invalid index"),!1;const s=Math.min(1,Math.max(0,i));return e.componentData[r].componentWeight!==s?(e.componentData[r].componentWeight=s,t.modified(),!0):!1},t.getComponentWeight=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return r<0||r>=Oo?(Z0("Invalid index"),0):e.componentData[r].componentWeight},t.setInterpolationTypeToNearest=()=>t.setInterpolationType(Ja.NEAREST),t.setInterpolationTypeToLinear=()=>t.setInterpolationType(Ja.LINEAR),t.setInterpolationTypeToFastLinear=()=>t.setInterpolationType(Ja.FAST_LINEAR),t.getInterpolationTypeAsString=()=>k.enumToString(Ja,e.interpolationType),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode"].forEach(r=>{const i=k.capitalize(r);t[`set${i}`]=(s,u)=>e.componentData[s][`${r}`]!==u?(e.componentData[s][`${r}`]=u,t.modified(),!0):!1}),["useGradientOpacity","scalarOpacityUnitDistance","gradientOpacityMinimumValue","gradientOpacityMinimumOpacity","gradientOpacityMaximumValue","gradientOpacityMaximumOpacity","opacityMode"].forEach(r=>{const i=k.capitalize(r);t[`get${i}`]=s=>e.componentData[s][`${r}`]})}const Rw={independentComponents:!0,interpolationType:Ja.FAST_LINEAR,shade:!1,ambient:.1,diffuse:.7,specular:.2,specularPower:10,useLabelOutline:!1,labelOutlineThickness:[1],labelOutlineOpacity:1};function xp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,Rw,a),k.obj(t,e),!e.componentData){e.componentData=[];for(let n=0;n<Oo;++n)e.componentData.push({colorChannels:1,grayTransferFunction:null,rGBTransferFunction:null,scalarOpacity:null,scalarOpacityUnitDistance:1,opacityMode:Nw.FRACTIONAL,gradientOpacityMinimumValue:0,gradientOpacityMinimumOpacity:0,gradientOpacityMaximumValue:1,gradientOpacityMaximumOpacity:1,useGradientOpacity:!1,componentWeight:1})}k.setGet(t,e,["independentComponents","interpolationType","shade","ambient","diffuse","specular","specularPower","useLabelOutline","labelOutlineOpacity"]),k.setGetArray(t,e,["labelOutlineThickness"]),Mw(t,e)}var Sp={newInstance:k.newInstance(xp,"vtkVolumeProperty"),extend:xp,...H1};const{vtkDebugMacro:Lw}=k;function kw(t,e){e.classHierarchy.push("vtkVolume"),t.getVolumes=()=>t,t.makeProperty=Sp.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const a=e.mapper.getBounds();if(!a||a.length!==6)return a;if(a[0]>a[1])return e.mapperBounds=a.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),a;const n=r=>r[0].map((i,s)=>r.map(u=>u[s]));if(!e.mapperBounds||!n([a,e.mapperBounds]).reduce((r,i)=>r&&i[0]===i[1],!0)||t.getMTime()>e.boundsMTime.getMTime()){Lw("Recomputing bounds..."),e.mapperBounds=a.map(s=>s);const r=[];Le.getCorners(a,r),t.computeMatrix();const i=new Float64Array(16);ze(i,e.matrix),r.forEach(s=>Te(s,s,i)),e.bounds[0]=e.bounds[2]=e.bounds[4]=Number.MAX_VALUE,e.bounds[1]=e.bounds[3]=e.bounds[5]=-Number.MAX_VALUE,e.bounds=e.bounds.map((s,u)=>u%2===0?r.reduce((c,o)=>c>o[u/2]?o[u/2]:c,s):r.reduce((c,o)=>c<o[(u-1)/2]?o[(u-1)/2]:c,s)),e.boundsMTime.modified()}return e.bounds},t.getMTime=()=>{let a=e.mtime;if(e.property!==null){const n=e.property.getMTime();a=n>a?n:a}return a},t.getRedrawMTime=()=>{let a=e.mtime;if(e.mapper!==null){let n=e.mapper.getMTime();a=n>a?n:a,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),n=e.mapper.getInput().getMTime(),a=n>a?n:a)}return a}}const Fw={mapper:null,property:null,bounds:[1,-1,1,-1,1,-1]};function Cp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Fw,a),Ws.extend(t,e,a),e.boundsMTime={},k.obj(e.boundsMTime),k.set(t,e,["property"]),k.setGet(t,e,["mapper"]),k.getArray(t,e,["bounds"],6),kw(t,e)}var Aw={newInstance:k.newInstance(Cp,"vtkVolume"),extend:Cp};const{BlendMode:Pn,FilterMode:Za}=n8;function Vw(t,e,a,n,r){let i=null;return r?(i=r,i.removeAllPoints()):i=bo.newInstance(),i.addPointLong(-1024,0,1,1),i.addPoint(t,e),i.addPoint(a,n),i}const Bw={createRadonTransferFunction:Vw};function Uw(t,e){e.classHierarchy.push("vtkVolumeMapper");const a={...t};t.getBounds=()=>{const n=t.getInputData();return n?(e.static||t.update(),e.bounds=n.getBounds()):e.bounds=fn(),e.bounds},t.update=()=>{t.getInputData()},t.setBlendModeToComposite=()=>{t.setBlendMode(Pn.COMPOSITE_BLEND)},t.setBlendModeToMaximumIntensity=()=>{t.setBlendMode(Pn.MAXIMUM_INTENSITY_BLEND)},t.setBlendModeToMinimumIntensity=()=>{t.setBlendMode(Pn.MINIMUM_INTENSITY_BLEND)},t.setBlendModeToAverageIntensity=()=>{t.setBlendMode(Pn.AVERAGE_INTENSITY_BLEND)},t.setBlendModeToAdditiveIntensity=()=>{t.setBlendMode(Pn.ADDITIVE_INTENSITY_BLEND)},t.setBlendModeToRadonTransform=()=>{t.setBlendMode(Pn.RADON_TRANSFORM_BLEND)},t.getBlendModeAsString=()=>k.enumToString(Pn,e.blendMode),t.setAverageIPScalarRange=(n,r)=>{console.warn("setAverageIPScalarRange is deprecated use setIpScalarRange"),t.setIpScalarRange(n,r)},t.getFilterModeAsString=()=>k.enumToString(Za,e.filterMode),t.setFilterModeToOff=()=>{t.setFilterMode(Za.OFF)},t.setFilterModeToNormalized=()=>{t.setFilterMode(Za.NORMALIZED)},t.setFilterModeToRaw=()=>{t.setFilterMode(Za.RAW)},t.setGlobalIlluminationReach=n=>a.setGlobalIlluminationReach(Ht(n,0,1)),t.setVolumetricScatteringBlending=n=>a.setVolumetricScatteringBlending(Ht(n,0,1)),t.setVolumeShadowSamplingDistFactor=n=>a.setVolumeShadowSamplingDistFactor(n>=1?n:1),t.setAnisotropy=n=>a.setAnisotropy(Ht(n,-.99,.99)),t.setLAOKernelSize=n=>a.setLAOKernelSize(ws(Ht(n,1,32))),t.setLAOKernelRadius=n=>a.setLAOKernelRadius(n>=1?n:1)}const Gw={bounds:[1,-1,1,-1,1,-1],sampleDistance:1,imageSampleDistance:1,maximumSamplesPerRay:1e3,autoAdjustSampleDistances:!0,initialInteractionScale:1,interactionSampleDistanceFactor:1,blendMode:Pn.COMPOSITE_BLEND,ipScalarRange:[-1e6,1e6],filterMode:Za.OFF,preferSizeOverAccuracy:!1,computeNormalFromOpacity:!1,volumetricScatteringBlending:0,globalIlluminationReach:0,volumeShadowSamplingDistFactor:5,anisotropy:0,localAmbientOcclusion:!1,LAOKernelSize:15,LAOKernelRadius:7};function Tp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Gw,a),Ks.extend(t,e,a),k.setGet(t,e,["sampleDistance","imageSampleDistance","maximumSamplesPerRay","autoAdjustSampleDistances","initialInteractionScale","interactionSampleDistanceFactor","blendMode","filterMode","preferSizeOverAccuracy","computeNormalFromOpacity","volumetricScatteringBlending","globalIlluminationReach","volumeShadowSamplingDistFactor","anisotropy","localAmbientOcclusion","LAOKernelSize","LAOKernelRadius"]),k.setGetArray(t,e,["ipScalarRange"],2),k.event(t,e,"lightingActivated"),Uw(t,e)}var Iw={newInstance:k.newInstance(Tp,"vtkVolumeMapper"),extend:Tp,...Bw};const{InterpolationType:No}=F9,{vtkErrorMacro:wp}=k,Mo=4;function Pw(t,e){e.classHierarchy.push("vtkImageProperty"),t.getMTime=()=>{let a=e.mtime,n;for(let r=0;r<Mo;r++)e.componentData[r].rGBTransferFunction&&(n=e.componentData[r].rGBTransferFunction.getMTime(),a=a>n?a:n),e.componentData[r].piecewiseFunction&&(n=e.componentData[r].piecewiseFunction.getMTime(),a=a>n?a:n);return a},t.setRGBTransferFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=a,i=n;return Number.isInteger(a)||(i=a,r=0),e.componentData[r].rGBTransferFunction!==i?(e.componentData[r].rGBTransferFunction=i,t.modified(),!0):!1},t.getRGBTransferFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[a].rGBTransferFunction},t.setPiecewiseFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=a,i=n;return Number.isInteger(a)||(i=a,r=0),e.componentData[r].piecewiseFunction!==i?(e.componentData[r].piecewiseFunction=i,t.modified(),!0):!1},t.getPiecewiseFunction=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e.componentData[a].piecewiseFunction},t.setScalarOpacity=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=a,i=n;return Number.isInteger(a)||(i=a,r=0),t.setPiecewiseFunction(r,i)},t.getScalarOpacity=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return t.getPiecewiseFunction(a)},t.setComponentWeight=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;if(a<0||a>=Mo)return wp("Invalid index"),!1;const r=Math.min(1,Math.max(0,n));return e.componentData[a].componentWeight!==r?(e.componentData[a].componentWeight=r,t.modified(),!0):!1},t.getComponentWeight=function(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return a<0||a>=Mo?(wp("Invalid index"),0):e.componentData[a].componentWeight},t.setInterpolationTypeToNearest=()=>t.setInterpolationType(No.NEAREST),t.setInterpolationTypeToLinear=()=>t.setInterpolationType(No.LINEAR),t.getInterpolationTypeAsString=()=>k.enumToString(No,e.interpolationType)}const zw={independentComponents:!1,interpolationType:No.LINEAR,colorWindow:255,colorLevel:127.5,ambient:1,diffuse:0,opacity:1,useLookupTableScalarRange:!1,useLabelOutline:!1,labelOutlineThickness:[1],labelOutlineOpacity:1};function _p(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(Object.assign(e,zw,a),k.obj(t,e),!e.componentData){e.componentData=[];for(let n=0;n<Mo;n++)e.componentData.push({rGBTransferFunction:null,piecewiseFunction:null,componentWeight:1})}k.setGet(t,e,["independentComponents","interpolationType","colorWindow","colorLevel","ambient","diffuse","opacity","useLookupTableScalarRange","useLabelOutline","labelOutlineOpacity"]),k.setGetArray(t,e,["labelOutlineThickness"]),Pw(t,e)}var Ep={newInstance:k.newInstance(_p,"vtkImageProperty"),extend:_p};const{vtkDebugMacro:jw}=k;function Ww(t,e){e.classHierarchy.push("vtkImageSlice"),t.getActors=()=>t,t.getImages=()=>t,t.getIsOpaque=()=>{if(e.forceOpaque)return!0;if(e.forceTranslucent)return!1;e.property||t.getProperty();let a=e.property.getOpacity()>=1;return a=a&&(!e.mapper||e.mapper.getIsOpaque()),a},t.hasTranslucentPolygonalGeometry=()=>!1,t.makeProperty=Ep.newInstance,t.getProperty=()=>(e.property===null&&(e.property=t.makeProperty()),e.property),t.getBounds=()=>{if(e.mapper===null)return e.bounds;const a=e.mapper.getBounds();if(!a||a.length!==6)return a;if(a[0]>a[1])return e.mapperBounds=a.concat(),e.bounds=[1,-1,1,-1,1,-1],e.boundsMTime.modified(),a;const n=r=>r[0].map((i,s)=>r.map(u=>u[s]));if(!e.mapperBounds||!n([a,e.mapperBounds]).reduce((r,i)=>r&&i[0]===i[1],!0)||t.getMTime()>e.boundsMTime.getMTime()){jw("Recomputing bounds..."),e.mapperBounds=a.map(i=>i),t.computeMatrix();const r=new Float64Array(16);ze(r,e.matrix),Le.transformBounds(a,r,e.bounds),e.boundsMTime.modified()}return e.bounds},t.getBoundsForSlice=(a,n)=>{const r=e.mapper.getBoundsForSlice(a,n);if(!Le.isValid(r))return r;t.computeMatrix();const i=new Float64Array(16);return ze(i,e.matrix),Le.transformBounds(r,i)},t.getMinXBound=()=>t.getBounds()[0],t.getMaxXBound=()=>t.getBounds()[1],t.getMinYBound=()=>t.getBounds()[2],t.getMaxYBound=()=>t.getBounds()[3],t.getMinZBound=()=>t.getBounds()[4],t.getMaxZBound=()=>t.getBounds()[5],t.getMTime=()=>{let a=e.mtime;if(e.property!==null){const n=e.property.getMTime();a=n>a?n:a}return a},t.getRedrawMTime=()=>{let a=e.mtime;if(e.mapper!==null){let n=e.mapper.getMTime();a=n>a?n:a,e.mapper.getInput()!==null&&(e.mapper.getInputAlgorithm().update(),n=e.mapper.getInput().getMTime(),a=n>a?n:a)}if(e.property!==null){let n=e.property.getMTime();a=n>a?n:a,e.property.getRGBTransferFunction()!==null&&(n=e.property.getRGBTransferFunction().getMTime(),a=n>a?n:a)}return a},t.getSupportsSelection=()=>e.mapper?e.mapper.getSupportsSelection():!1}const $w={mapper:null,property:null,bounds:[...Le.INIT_BOUNDS]};function Dp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$w,a),Ws.extend(t,e,a),e.boundsMTime={},k.obj(e.boundsMTime),k.set(t,e,["property"]),k.setGet(t,e,["mapper"]),k.getArray(t,e,["bounds"],6),Ww(t,e)}var Hw={newInstance:k.newInstance(Dp,"vtkImageSlice"),extend:Dp};function Kw(t,e){e.classHierarchy.push("vtkAbstractImageMapper"),t.getIsOpaque=()=>!0,t.getCurrentImage=()=>null,t.getBoundsForSlice=()=>(k.vtkErrorMacro("vtkAbstractImageMapper.getBoundsForSlice - NOT IMPLEMENTED"),fn())}const Xw={slice:0,customDisplayExtent:[0,0,0,0,0,0],useCustomExtents:!1,backgroundColor:[0,0,0,1]};function qw(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,Xw,a),ff.extend(t,e,a),k.setGet(t,e,["slice","useCustomExtents"]),k.setGetArray(t,e,["customDisplayExtent"],6),k.setGetArray(t,e,["backgroundColor"],4),Kw(t,e)}var Yw={extend:qw};function bp(t,e,a){const n=a.getCurrentImage(),r=n.getExtent(),i=[r[0],r[2],r[4]],{ijkMode:s}=a.getClosestIJKAxis();let u=a.isA("vtkImageArrayMapper")?a.getSubSlice():a.getSlice();s!==a.getSlicingMode()&&(u=a.getSliceAtPosition(u)),i[s]+=u;const c=[0,0,0];n.indexToWorld(i,c),i[s]+=1;const o=[0,0,0];n.indexToWorld(i,o),o[0]-=c[0],o[1]-=c[1],o[2]-=c[2],jt(o,o);const f=Mn.intersectWithLine(t,e,c,o);if(f.intersection){const l=f.x,h=[0,0,0];return n.worldToIndex(l,h),{t:f.t,absoluteIJK:h}}return null}function Jw(t,e,a){const n=bp(t,e,a);if(n){const i=a.getCurrentImage().getExtent(),s=[Math.round(n.absoluteIJK[0]),Math.round(n.absoluteIJK[1]),Math.round(n.absoluteIJK[2])];return s[0]<i[0]||s[0]>i[1]||s[1]<i[2]||s[1]>i[3]||s[2]<i[4]||s[2]>i[5]?null:{t:n.t,ijk:s}}return null}function Zw(t,e,a){const n=bp(t,e,a);if(n){const i=a.getCurrentImage().getExtent(),s=n.absoluteIJK,u=[Math.floor(s[0]),Math.floor(s[1]),Math.floor(s[2])];if(u[0]<i[0]||u[0]>i[1]-1||u[1]<i[2]||u[1]>i[3]-1||u[2]<i[4]||u[2]>(i[5]?i[5]-1:i[5]))return null;const c=[s[0]-u[0],s[1]-u[1],s[2]-u[2]];return{t:n.t,ijk:u,pCoords:c}}return null}const{staticOffsetAPI:Qw,otherStaticMethods:e_}=$i,{SlicingMode:Ve}=x0;function t_(t,e){e.classHierarchy.push("vtkImageMapper"),t.getSliceAtPosition=n=>{const r=t.getCurrentImage();let i;if(n.length===3)i=n;else if(Number.isFinite(n)){const f=r.getBounds();switch(e.slicingMode){case Ve.X:i=[n,(f[3]+f[2])/2,(f[5]+f[4])/2];break;case Ve.Y:i=[(f[1]+f[0])/2,n,(f[5]+f[4])/2];break;case Ve.Z:i=[(f[1]+f[0])/2,(f[3]+f[2])/2,n];break}}const s=[0,0,0];r.worldToIndex(i,s);const u=r.getExtent(),{ijkMode:c}=t.getClosestIJKAxis();let o=0;switch(c){case Ve.I:o=Ht(s[0],u[0],u[1]);break;case Ve.J:o=Ht(s[1],u[2],u[3]);break;case Ve.K:o=Ht(s[2],u[4],u[5]);break;default:return 0}return o},t.setSliceFromCamera=n=>{const r=n.getFocalPoint();switch(e.slicingMode){case Ve.I:case Ve.J:case Ve.K:{const i=t.getSliceAtPosition(r);t.setSlice(i)}break;case Ve.X:t.setSlice(r[0]);break;case Ve.Y:t.setSlice(r[1]);break;case Ve.Z:t.setSlice(r[2]);break}},t.setXSlice=n=>{t.setSlicingMode(Ve.X),t.setSlice(n)},t.setYSlice=n=>{t.setSlicingMode(Ve.Y),t.setSlice(n)},t.setZSlice=n=>{t.setSlicingMode(Ve.Z),t.setSlice(n)},t.setISlice=n=>{t.setSlicingMode(Ve.I),t.setSlice(n)},t.setJSlice=n=>{t.setSlicingMode(Ve.J),t.setSlice(n)},t.setKSlice=n=>{t.setSlicingMode(Ve.K),t.setSlice(n)},t.getSlicingModeNormal=()=>{const n=[0,0,0],r=t.getCurrentImage().getDirection();switch(e.slicingMode){case Ve.X:n[0]=1;break;case Ve.Y:n[1]=1;break;case Ve.Z:n[2]=1;break;case Ve.I:Di(r,[1,0,0],n);break;case Ve.J:Di(r,[0,1,0],n);break;case Ve.K:Di(r,[0,0,1],n);break}return n};function a(){let n;switch(e.slicingMode){case Ve.X:n=0;break;case Ve.Y:n=1;break;case Ve.Z:n=2;break;default:e.closestIJKAxis={ijkMode:e.slicingMode,flip:!1};return}const r=t.getCurrentImage().getDirection(),i=Sl(r);let s=0;for(;s<3&&i[n+3*s]===0;++s);const u=i[n+3*s]<0;e.closestIJKAxis={ijkMode:s,flip:u}}t.setSlicingMode=n=>{e.slicingMode!==n&&(e.slicingMode=n,t.getCurrentImage()&&a(),t.modified())},t.getClosestIJKAxis=()=>((e.closestIJKAxis===void 0||e.closestIJKAxis.ijkMode===Ve.NONE)&&t.getCurrentImage()&&a(),e.closestIJKAxis),t.getBounds=()=>{const n=t.getCurrentImage();if(!n)return fn();if(!e.useCustomExtents)return n.getBounds();const r=e.customDisplayExtent.slice(),{ijkMode:i}=t.getClosestIJKAxis();let s=e.slice;switch(i!==e.slicingMode&&(s=t.getSliceAtPosition(e.slice)),i){case Ve.I:r[0]=s,r[1]=s;break;case Ve.J:r[2]=s,r[3]=s;break;case Ve.K:r[4]=s,r[5]=s;break}return n.extentToBounds(r)},t.getBoundsForSlice=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.slice,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const i=t.getCurrentImage();if(!i)return fn();const s=i.getSpatialExtent(),{ijkMode:u}=t.getClosestIJKAxis();let c=n;switch(u!==e.slicingMode&&(c=t.getSliceAtPosition(n)),u){case Ve.I:s[0]=c-r,s[1]=c+r;break;case Ve.J:s[2]=c-r,s[3]=c+r;break;case Ve.K:s[4]=c-r,s[5]=c+r;break}return i.extentToBounds(s)},t.intersectWithLineForPointPicking=(n,r)=>Jw(n,r,t),t.intersectWithLineForCellPicking=(n,r)=>Zw(n,r,t),t.getCurrentImage=()=>t.getInputData()}const n_={slicingMode:Ve.NONE,closestIJKAxis:{ijkMode:Ve.NONE,flip:!1},renderToRectangle:!1,sliceAtFocalPoint:!1,preferSizeOverAccuracy:!1};function Op(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,n_,a),Yw.extend(t,e,a),k.get(t,e,["slicingMode"]),k.setGet(t,e,["closestIJKAxis","renderToRectangle","sliceAtFocalPoint","preferSizeOverAccuracy"]),$i.implementCoincidentTopologyMethods(t,e),t_(t,e)}var r_={newInstance:k.newInstance(Op,"vtkImageMapper"),extend:Op,...Qw,...e_,...x0};const{vtkErrorMacro:a_}=k;function i_(t,e){let a=0;return t.map((n,r)=>r===a?(a+=n+1,n):n+e)}function Ro(t,e,a,n){t.set(i_(e,a),n)}function o_(t,e){e.classHierarchy.push("vtkAppendPolyData"),t.requestData=(a,n)=>{const r=t.getNumberOfInputPorts();if(!r){a_("No input specified.");return}if(r===1){n[0]=a[0];return}const i=je.newInstance();let s=0,u=0,c=1,o=1,f=0,l=0,h=0,p=0,d=!0,y=!0,m=!0;for(let b=0;b<r;b++){const N=a[b];if(!N)continue;const R=N.getPoints().getNumberOfPoints();s+=R,f+=N.getVerts().getNumberOfValues(),l+=N.getLines().getNumberOfValues(),h+=N.getStrips().getNumberOfValues(),p+=N.getPolys().getNumberOfValues(),R&&(o&&(o=0,u=N.getPoints().getDataType()),c=N.getPoints().getDataType(),u=u>c?u:c);const M=N.getPointData();M?(d=d&&M.getNormals()!==null,y=y&&M.getTCoords()!==null,m=m&&M.getScalars()!==null):(d=!1,y=!1,m=!1)}e.outputPointsPrecision===er.SINGLE?u=Ne.FLOAT:e.outputPointsPrecision===er.DOUBLE&&(u=Ne.DOUBLE);const S=vn.newInstance({dataType:u});S.setNumberOfPoints(s);const v=S.getData(),g=new Uint32Array(f),x=new Uint32Array(l),C=new Uint32Array(h),T=new Uint32Array(p);let w=null,_=null,E=null;const D=a[r-1];if(d){const b=D.getPointData().getNormals();w=pe.newInstance({numberOfComponents:3,numberOfTuples:s,size:3*s,dataType:b.getDataType(),name:b.getName()})}if(y){const b=D.getPointData().getTCoords();_=pe.newInstance({numberOfComponents:2,numberOfTuples:s,size:2*s,dataType:b.getDataType(),name:b.getName()})}if(m){const b=D.getPointData().getScalars();E=pe.newInstance({numberOfComponents:b.getNumberOfComponents(),numberOfTuples:s,size:s*b.getNumberOfComponents(),dataType:b.getDataType(),name:b.getName()})}s=0,f=0,l=0,h=0,p=0;for(let b=0;b<r;b++){const N=a[b];v.set(N.getPoints().getData(),s*3),Ro(g,N.getVerts().getData(),s,f),f+=N.getVerts().getNumberOfValues(),Ro(x,N.getLines().getData(),s,l),l+=N.getLines().getNumberOfValues(),Ro(C,N.getStrips().getData(),s,h),h+=N.getStrips().getNumberOfValues(),Ro(T,N.getPolys().getData(),s,p),p+=N.getPolys().getNumberOfValues();const R=N.getPointData();if(d){const M=R.getNormals();w.getData().set(M.getData(),s*3)}if(y){const M=R.getTCoords();_.getData().set(M.getData(),s*2)}if(m){const M=R.getScalars();E.getData().set(M.getData(),s*E.getNumberOfComponents())}s+=N.getPoints().getNumberOfPoints()}i.setPoints(S),i.getVerts().setData(g),i.getLines().setData(x),i.getStrips().setData(C),i.getPolys().setData(T),w&&i.getPointData().setNormals(w),_&&i.getPointData().setTCoords(_),E&&i.getPointData().setScalars(E),n[0]=i}}const s_={outputPointsPrecision:er.DEFAULT};function Np(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,s_,a),k.setGet(t,e,["outputPointsPrecision"]),k.obj(t,e),k.algo(t,e,1,1),o_(t,e)}var Mp={newInstance:k.newInstance(Np,"vtkAppendPolyData"),extend:Np};function u_(t,e){e.classHierarchy.push("vtkArrowSource");function a(n,r){if(e.deleted)return;const i=rx.newInstance({capping:!0});i.setResolution(e.shaftResolution),i.setRadius(e.shaftRadius),i.setHeight(1-e.tipLength),i.setCenter(0,(1-e.tipLength)*.5,0);const s=i.getOutputData(),u=s.getPoints().getData(),c=s.getPointData().getNormals().getData();_t.buildFromDegree().rotateZ(-90).apply(u).apply(c);const o=ex.newInstance();o.setResolution(e.tipResolution),o.setHeight(e.tipLength),o.setRadius(e.tipRadius);const f=o.getOutputData(),l=f.getPoints().getData();_t.buildFromRadian().translate(1-e.tipLength*.5,0,0).apply(l);const h=Mp.newInstance();h.setInputData(s),h.addInputData(f);const p=h.getOutputData(),d=p.getPoints().getData();_t.buildFromRadian().translate(-.5+e.tipLength*.5,0,0).apply(d),e.invert?(_t.buildFromRadian().rotateFromDirections([1,0,0],e.direction).scale(-1,-1,-1).apply(d),r[0]=p):(_t.buildFromRadian().rotateFromDirections([1,0,0],e.direction).scale(1,1,1).apply(d),r[0]=h.getOutputData())}t.requestData=a}const c_={tipResolution:6,tipRadius:.1,tipLength:.35,shaftResolution:6,shaftRadius:.03,invert:!1,direction:[1,0,0],pointType:"Float64Array"};function Rp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,c_,a),k.obj(t,e),k.setGet(t,e,["tipResolution","tipRadius","tipLength","shaftResolution","shaftRadius","invert"]),k.setGetArray(t,e,["direction"],3),k.algo(t,e,0,1),u_(t,e)}var Q0={newInstance:k.newInstance(Rp,"vtkArrowSource"),extend:Rp};function eu(t){const e=t.getPoints().getBounds(),a=[-(e[0]+e[1])*.5,-(e[2]+e[3])*.5,-(e[4]+e[5])*.5];_t.buildFromDegree().translate(...a).apply(t.getPoints().getData())}function tu(t,e){const a=t.getPoints().getBounds(),n=[0,0,0];n[e]=-a[e*2],_t.buildFromDegree().translate(...n).apply(t.getPoints().getData())}function nu(t,e,a,n){const r=t.getPoints().getData().length,i=new Uint8Array(r);let s=0;for(;s<r;)i[s++]=e,i[s++]=a,i[s++]=n;t.getPointData().setScalars(pe.newInstance({name:"color",numberOfComponents:3,values:i}))}function l_(t,e){e.classHierarchy.push("vtkAxesActor");const a=dn.newInstance();t.setMapper(a),t.update=()=>{const c=Q0.newInstance({direction:[1,0,0],...e.config}).getOutputData();e.config.recenter?eu(c):tu(c,0),nu(c,...e.xAxisColor);const o=Q0.newInstance({direction:[0,1,0],...e.config}).getOutputData();e.config.recenter?eu(o):tu(o,1),nu(o,...e.yAxisColor);const f=Q0.newInstance({direction:[0,0,1],...e.config}).getOutputData();e.config.recenter?eu(f):tu(f,2),nu(f,...e.zAxisColor);const l=Mp.newInstance();l.setInputData(c),l.addInputData(o),l.addInputData(f),a.setInputConnection(l.getOutputPort())},t.update();const n=k.debounce(t.update,0),{setConfig:r,setXAxisColor:i,setYAxisColor:s,setZAxisColor:u}=t;t.setConfig=c=>r(c)?(n(),!0):!1,t.setXAxisColor=c=>i(c)?(n(),!0):!1,t.setYAxisColor=c=>s(c)?(n(),!0):!1,t.setZAxisColor=c=>u(c)?(n(),!0):!1}const f_={config:{recenter:!0,tipResolution:60,tipRadius:.1,tipLength:.2,shaftResolution:60,shaftRadius:.03,invert:!1},xAxisColor:[255,0,0],yAxisColor:[255,255,0],zAxisColor:[0,128,0]};function Lp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,f_,a),pn.extend(t,e,a),k.setGet(t,e,["config"]),k.setGetArray(t,e,["xAxisColor","yAxisColor","zAxisColor"],3,255),l_(t,e)}var h_={newInstance:k.newInstance(Lp,"vtkAxesActor"),extend:Lp};const kp="resetcamera",ru="orientation",p_={MODE_RESET_CAMERA:kp,MODE_ORIENTATION:ru,MODE_SAME:"same"};function g_(t,e){e.classHierarchy.push("vtkCameraSynchronizer");const a=new Float64Array(9),n=new Float64Array(3),r=[];function i(){for(;r.length;)r.pop().unsubscribe();if(!e.srcRenderer||!e.dstRenderer)return;const u=e.srcRenderer.getActiveCamera(),c=e.srcRenderer.getRenderWindow().getInteractor();r.push(u.onModified(()=>{c.isAnimating()||t.update()})),r.push(c.onAnimation(t.update)),r.push(c.onEndAnimation(t.update))}e._srcRendererChanged=i,e._dstRendererChanged=i;function s(u,c,o){return a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==c[0]||a[4]!==c[1]||a[5]!==c[2]||a[6]!==o[0]||a[7]!==o[1]||a[8]!==o[2]?(a[0]=u[0],a[1]=u[1],a[2]=u[2],a[3]=c[0],a[4]=c[1],a[5]=c[2],a[6]=o[0],a[7]=o[1],a[8]=o[2],a):!1}t.update=()=>{if(!e.active||!e.srcRenderer||!e.dstRenderer)return;const u=e.srcRenderer.getActiveCamera(),c=e.dstRenderer.getActiveCamera(),o=u.getReferenceByName("position"),f=u.getReferenceByName("focalPoint"),l=u.getReferenceByName("viewUp"),h=s(o,f,l);h&&(e.mode===ru?(n[0]=h[0]-h[3],n[1]=h[1]-h[4],n[2]=h[2]-h[5],nt(n),c.setPosition(e.focalPoint[0]+e.distance*n[0],e.focalPoint[1]+e.distance*n[1],e.focalPoint[2]+e.distance*n[2]),c.setFocalPoint(e.focalPoint[0],e.focalPoint[1],e.focalPoint[2]),c.setViewUp(h[6],h[7],h[8])):(c.setPosition(h[0],h[1],h[2]),c.setFocalPoint(h[3],h[4],h[5]),c.setViewUp(h[6],h[7],h[8])),e.mode===kp&&e.dstRenderer.resetCamera())},t.delete=Nr(()=>t.setSrcRenderer(null),t.delete),i()}const d_={mode:ru,focalPoint:[0,0,0],distance:6.8,active:!0};function Fp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,d_,a),ot(t,e),lt(t,e,["mode","active","srcRenderer","dstRenderer","distance"]),pi(t,e,["focalPoint"],3,0),g_(t,e)}var au={newInstance:Ke(Fp,"vtkCameraSynchronizer"),extend:Fp,SynchronizationMode:p_};const iu={};class v_{constructor(e,a){this.ctx=e,this.behavior=au.newInstance(this.getProperties(a)),this.behavior.update()}getProperties(e){let{actorBounds:a,srcRenderer:n,dstRenderer:r}=e;const i=3.4*Math.max(a[1]-a[0],a[3]-a[2],a[5]-a[4]),s=[.5*(a[0]+a[1]),.5*(a[2]+a[3]),.5*(a[4]+a[5])],u=au.SynchronizationMode.MODE_ORIENTATION;return{distance:i,focalPoint:s,mode:u,srcRenderer:this.ctx.getInstance(n),dstRenderer:this.ctx.getInstance(r)}}update(e){this.behavior.set(this.getProperties(e)),this.behavior.update()}delete(){this.behavior.delete()}}const Ap={CameraSync:v_};function y_(t,e,a){const n=t.get("synchronizedViewId").synchronizedViewId;if(!e.behaviors||!n)return;iu[n]||(iu[n]={});const r=iu[n];if(e.behaviors.autoOrientation){const u=t.getRenderers();if(!r.autoOrientationAxes&&u.length===2){let c=null,o=null;for(let f=0;f<u.length;f++){const l=u[f];l.getInteractive()?c=l:o=l}c&&o&&(r.autoOrientationAxes=au.newInstance({srcRenderer:c,dstRenderer:o}))}r.autoOrientationAxes&&u.length!==2&&(r.autoOrientationAxes.delete(),delete r.autoOrientationAxes)}const i=Object.keys(e.behaviors),s=Object.keys(r);for(let u=0;u<i.length;u++){const c=i[u];if(r[c])r[c].update(e.behaviors[c]);else{const o=e.behaviors[c];Ap[o.type]?r[c]=new Ap[o.type](a,o):console.log("No mapping for",o)}}for(let u=0;u<s.length;u++){const c=i[u];e.behaviors[c]||(r[c].delete(),delete r[c])}}var m_={applyBehaviors:y_};const En={},Vp=/instance:\${([^}]+)}/,x_=t=>`instance:\${${t}}`,Qa={},ou=[],Lo={},S_={vtkPoints:vn,vtkCellArray:Ln,vtkDataArray:pe};function C_(t,e){return e.map(a=>{const n=Vp.exec(a);return n?t.getInstance(n[1]):a})}function Bp(t){return t.map(e=>Vp.exec(e)).filter(e=>e).map(e=>e[1])}function Up(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.dependencies&&t.dependencies.forEach(a=>{e.push(a.id),Up(a,e)}),e}function T_(t){for(;t.length;){const[e,a]=t.shift();e(...a)}}function w_(t,e,a){return n=>{const r=e.registration?e.registration:"addArray",i=e.location?t.getReferenceByName(e.location):t;let s=null;if(e.location?s=t.getReferenceByName(e.location).getArray(e.name):s=t[`get${r.substring(3)}`](),s)return s.getData()!==n&&a.push([s.setData,[n,e.numberOfComponents]]),s;const u=e.vtkClass?e.vtkClass:"vtkDataArray",c=S_[u].newInstance({...e,values:n});return a.push([i[r],[c]]),c}}function ko(t,e,a,n){if(!e)return Promise.reject(new Error("No instance provided."));const r=En[t];return r&&r.update?r.update(e,a,n):Promise.reject(new Error(`No updater for ${t}`))}function su(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=En[t];return a&&a.build?a.build(e):(console.log("No builder for",t),null)}function __(t,e,a){Lo[t]={key:e,value:a}}function E_(){return Object.keys(En)}function Gp(){Object.keys(En).forEach(t=>{delete En[t]})}function D_(t,e,a){return ko("vtkRenderWindow",t,e,a)}function b_(){Object.keys(Qa).forEach(t=>{delete Qa[t]})}function O_(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];if(e.length===0)return b_();let n=e;return n.length===1&&Array.isArray(n[0])&&(n=n[0]),n.forEach(r=>{delete Qa[r]}),n}function uu(t){if(t[1].length===1)return ou.indexOf(t[1][0])===-1;let e=!1;for(let a=0;a<t[1].length;a++)e=e||ou.indexOf(t[1][a])===-1;return e}function it(t,e,a){a.start(),t.set(e.properties),e.dependencies&&e.dependencies.forEach(r=>{const{id:i,type:s}=r;if(Lo[s]){const{key:c,value:o}=Lo[s];if(!c||r.properties[c]===o){ou.push(x_(i));return}}let u=a.getInstance(i);u||(u=su(s,{managedInstanceId:i}),a.registerInstance(i,u)),ko(s,u,r,a)}),e.calls&&e.calls.filter(uu).forEach(r=>{t[r[0]].apply(null,C_(a,r[1]))});const n=[];if(e.arrays){const r=[],i=Object.values(e.arrays).map(s=>(a.start(),a.getArray(s.hash,s.dataType,a).then(w_(t,s,r)).catch(u=>{console.log("Error fetching array",JSON.stringify(s),u)}).finally(a.end)));a.start(),n.push(Promise.all(i).then(()=>(r.length&&t.modified(),T_(r),!0)).catch(s=>{console.error("Error in array handling for state",JSON.stringify(e),s)}).finally(a.end))}return a.end(),Promise.all(n)}function Ip(t,e,a){Qa[e.id]||it(t,e,a),Qa[e.id]=!0}function N_(t,e,a){it(t,e,a);const n=new Set;e.dependencies&&e.dependencies.forEach(s=>{const u=a.getInstance(s.id);if(u){const c=Up(s);u.set({flattenedDepIds:c},!0),c.forEach(o=>n.add(o))}});const r=new Set;e.calls&&e.calls.filter(uu).filter(s=>s[0]==="removeViewProp").forEach(s=>{Bp(s[1]).forEach(u=>{const c=a.getInstance(u).get("flattenedDepIds").flattenedDepIds;c&&c.forEach(o=>r.add(o)),r.add(u)})}),[...r].filter(s=>!n.has(s)).forEach(s=>a.unregisterInstance(s))}function M_(t,e,a){e.calls&&e.calls.filter(uu).filter(n=>n[0]==="removeRenderer").forEach(n=>{Bp(n[1]).forEach(r=>{a.getInstance(r).getViewProps().forEach(u=>{const c=u.get("flattenedDepIds").flattenedDepIds;c&&c.forEach(o=>a.unregisterInstance(o)),a.unregisterInstance(a.getInstanceId(u))})})}),t.render(),it(t,e,a),m_.applyBehaviors(t,e,a)}function R_(t,e,a){if(a.start(),!e.properties.nodes)t.set(e.properties);else{const n=e.properties.nodes.map(r=>{let[i,s,u,c,o,f]=r;return{x:i,r:s,g:u,b:c,midpoint:o,sharpness:f}});t.set({...e.properties,nodes:n},!0)}a.end()}function L_(t,e,a){if(a.start(),!e.properties.nodes)t.set(e.properties);else{const n=e.properties.nodes.map(r=>{let[i,s,u,c]=r;return{x:i,y:s,midpoint:u,sharpness:c}});t.set({...e.properties,nodes:n},!0),t.sortAndUpdateRange()}a.end()}function Pp(t,e){const a=[],n=t.getNumberOfArrays();for(let r=0;r<n;r++){const s=t.getArray(r).getName();e.has(s)||a.push(s)}for(let r=0;r<a.length;r++)t.removeArray(a[r])}function zp(t){const e=t.name?`_${t.name}`:"";return`${t.hash}_${t.dataType}${e}`}function jp(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return(e,a,n)=>{n.start();const r={...a.properties};a.arrays||(a.arrays={});for(let o=0;o<t.length;o++){const f=t[o];if(a.properties[f]){const l=a.properties[f];l.registration=`set${br(f)}`;const h=zp(l);a.arrays[h]=l,delete r[f]}}const i=a.properties.fields||[];for(let o=0;o<i.length;o++){const f=i[o],l=zp(f);a.arrays[l]=f}delete r.fields;const s={pointData:new Set,cellData:new Set,fieldData:new Set};i.forEach(o=>{let{location:f,name:l}=o;s[f].add(l)}),Pp(e.getPointData(),s.pointData),Pp(e.getCellData(),s.cellData);const u={...a};u.properties=r;const c=it(e,u,n);return n.end(),c}}const k_=jp(["points","polys","verts","lines","strips"]),F_=jp([]);function cu(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:it;if(!su&&!ko){delete En[t];return}En[t]={build:e,update:a}}const Wp={vtkMapper:["vtkOpenGLPolyDataMapper","vtkCompositePolyDataMapper2","vtkDataSetMapper"],vtkProperty:["vtkOpenGLProperty"],vtkRenderer:["vtkOpenGLRenderer"],vtkCamera:["vtkOpenGLCamera"],vtkColorTransferFunction:["vtkPVDiscretizableColorTransferFunction"],vtkActor:["vtkOpenGLActor","vtkPVLODActor"],vtkLight:["vtkOpenGLLight","vtkPVLight"],vtkTexture:["vtkOpenGLTexture"],vtkImageMapper:["vtkOpenGLImageSliceMapper"],vtkVolumeMapper:["vtkFixedPointVolumeRayCastMapper"]},$p={vtkAxesActor:{build:h_.newInstance,update:it},vtkRenderWindow:{build:Y0.newInstance,update:M_},vtkRenderer:{build:yp.newInstance,update:N_},vtkLookupTable:{build:Ar.newInstance,update:it},vtkCamera:{build:J0.newInstance,update:Ip},vtkPolyData:{build:je.newInstance,update:k_},vtkImageData:{build:Ys.newInstance,update:F_},vtkMapper:{build:dn.newInstance,update:it},vtkGlyph3DMapper:{build:Wh.newInstance,update:it},vtkProperty:{build:Qn.newInstance,update:it},vtkActor:{build:pn.newInstance,update:it},vtkLight:{build:pp.newInstance,update:it},vtkColorTransferFunction:{build:j0.newInstance,update:R_},vtkTexture:{build:u0.newInstance,update:it},vtkVolume:{build:Aw.newInstance,update:it},vtkVolumeMapper:{build:Iw.newInstance,update:it},vtkVolumeProperty:{build:Sp.newInstance,update:it},vtkImageSlice:{build:Hw.newInstance,update:it},vtkImageMapper:{build:r_.newInstance,update:it},vtkImageProperty:{build:Ep.newInstance,update:it},vtkPiecewiseFunction:{build:bo.newInstance,update:L_},vtkCubeAxesActor:{build:f0.newInstance,update:it},vtkScalarBarActor:{build:x1.newInstance,update:it}};function Hp(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)&&Gp(),Object.keys($p).forEach(e=>{const a=$p[e];cu(e,a.build,a.update)})}function lu(){Object.keys(Wp).forEach(t=>{Wp[t].forEach(a=>{En[a]=En[t]})})}function A_(){cu("vtkCamera",J0.newInstance),lu()}Hp(),lu(),Lo.vtkPVLight={};var fu={build:su,update:ko,genericUpdater:it,oneTimeGenericUpdater:Ip,setTypeMapping:cu,clearTypeMapping:Gp,getSupportedTypes:E_,clearOneTimeUpdaters:O_,updateRenderWindow:D_,excludeInstance:__,setDefaultMapping:Hp,applyDefaultAliases:lu,alwaysUpdateCamera:A_};const mr={};function Kp(){const t={};let e=null;function a(s){e=s}function n(s,u,c){const o=t[s];return o?(o.mtimes[c.getActiveViewId()]=c.getMTime(),new Promise((f,l)=>{f(o.array)})):e?new Promise((f,l)=>{e(s).then(h=>{let p=h;if(typeof h=="string"&&(p=dr.toArrayBuffer(h)),p instanceof Blob){const d=new FileReader;d.onload=()=>{const y=Hn(u,d.result),m={[c.getActiveViewId()]:c.getMTime()};t[s]={mtimes:m,array:y},f(y)},d.readAsArrayBuffer(p)}else{const d=Hn(u,p),y={[c.getActiveViewId()]:c.getMTime()};t[s]={mtimes:y,array:d},f(d)}},h=>{console.log("Error getting data array:"),console.log(h),l(h)})}):Promise.reject(new Error('No array fetcher found, please use "setArrayFetcher" to provide one'))}function r(){Object.keys(t).forEach(s=>{delete t[s]})}function i(s,u){const c=u.getMTime()-s;Object.keys(t).filter(o=>t[o].mtimes[u.getActiveViewId()]).filter(o=>t[o].mtimes[u.getActiveViewId()]<c).forEach(o=>{delete t[o]})}return{setFetchArrayFunction:a,getArray:n,emptyCachedArrays:r,freeOldArrays:i}}function Xp(){const t={};function e(s){return t[s]}function a(s){let u=null;return Object.keys(t).forEach(c=>{s===t[c]&&(u=c)}),u}function n(s,u){t[s]=u,u.set({remoteId:s},!0,!0)}function r(s){delete t[s]}function i(){Object.keys(t).forEach(s=>{delete t[s]})}return{getInstance:e,getInstanceId:a,registerInstance:n,unregisterInstance:r,emptyCachedInstances:i}}function qp(){let t=0;const e={start(){t+=1,e.invokeProgressEvent(t)},end(){t-=1,e.invokeProgressEvent(t),t===0&&e.invokeProgressDone()},resetProgress(){t=0}},a={};return Or(e,a,"progressEvent"),Or(e,a,"progressDone"),e}function Yp(){const t={};let e="default";function a(s){return t[s||e]||1}function n(s){const u=s||e;t[u]||(t[u]=1),t[u]+=1}function r(s){e=s}function i(){return e}return{getMTime:a,incrementMTime:n,setActiveViewId:r,getActiveViewId:i}}function hu(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"default",e=mr[t];return e||(e={...Kp(),...Xp(),...qp(),...Yp()},mr[t]=e),e}function V_(t,e){mr[t]=e}function B_(t){if(t&&mr[t]&&delete mr[t],!t){const e=Object.keys(mr);for(let a=0;a<e.length;a++)delete mr[e[a]]}}function Jp(t,e){let a=-1,n=100;const r=l=>l.get("managedInstanceId").managedInstanceId,i=()=>la(t,r);function s(){fu.clearOneTimeUpdaters(i())}function u(l){t.set({synchronizedViewId:l},!0,!0)}function c(){return t.get("synchronizedViewId").synchronizedViewId}function o(l){n=l}function f(l){c()||u(l.id);const h=l.mtime||0;return c()===l.id&&a<h?new Promise((p,d)=>{const y=e.onProgressDone(()=>{y.unsubscribe(),t.render(),p(!0)});a=h,e.setActiveViewId(l.id),e.incrementMTime(),fu.updateRenderWindow(t,l,e),e.freeOldArrays(n,e)}):Promise.resolve(!1)}return{synchronize:f,setSynchronizedViewId:u,getSynchronizedViewId:c,updateGarbageCollectorThreshold:o,getManagedInstanceIds:i,clearOneTimeUpdaters:s}}function U_(t,e){e.classHierarchy.push("vtkSynchronizableRenderWindow"),e.synchronizerContext||(e.synchronizerContext=hu(e.synchronizerContextName));const a=Jp(t,e.synchronizerContext);Object.keys(a).forEach(n=>{t[n]?t[n]=Nr(t[n],a[n]):t[n]=a[n]})}const G_={synchronizerContextName:"default",synchronizerContext:null,synchronizedViewId:null};function Zp(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,G_,a),Y0.extend(t,e),Lt(t,e,["synchronizerContext"]),U_(t,e)}const I_=Ke(Zp,"vtkSynchronizableRenderWindow");function P_(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"default";const a=Jp(t,hu(e));return{...a,...t,delete:Nr(t.delete,a.delete)}}var Qp={newInstance:I_,extend:Zp,getSynchronizerContext:hu,setSynchronizerContext:V_,clearSynchronizerContext:B_,decorate:P_,createInstanceMap:Xp,createArrayHandler:Kp,createProgressHandler:qp,createSceneMtimeHandler:Yp,vtkObjectManager:fu};function z_(t,e){e.classHierarchy.push("vtkRenderPass"),t.getOperation=()=>e.currentOperation,t.setCurrentOperation=a=>{e.currentOperation=a,e.currentTraverseOperation=`traverse${k.capitalize(e.currentOperation)}`},t.getTraverseOperation=()=>e.currentTraverseOperation,t.traverse=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;e.deleted||(e._currentParent=n,e.preDelegateOperations.forEach(r=>{t.setCurrentOperation(r),a.traverse(t)}),e.delegates.forEach(r=>{r.traverse(a,t)}),e.postDelegateOperations.forEach(r=>{t.setCurrentOperation(r),a.traverse(t)}))}}const j_={delegates:[],currentOperation:null,preDelegateOperations:[],postDelegateOperations:[],currentParent:null};function eg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,j_,a),k.obj(t,e),k.get(t,e,["currentOperation"]),k.setGet(t,e,["delegates","_currentParent","preDelegateOperations","postDelegateOperations"]),k.moveToProtected(t,e,["currentParent"]),z_(t,e)}var pu={newInstance:k.newInstance(eg,"vtkRenderPass"),extend:eg};const{Representation:W_}=Qn,{vtkErrorMacro:tg}=k;function $_(t){const e=J.substitute(t.Fragment,"//VTK::RenderPassFragmentShader::Impl",`
      float weight = gl_FragData[0].a * pow(max(1.1 - gl_FragCoord.z, 0.0), 2.0);
      gl_FragData[0] = vec4(gl_FragData[0].rgb*weight, gl_FragData[0].a);
      gl_FragData[1].r = weight;
    `,!1);t.Fragment=e.result}const H_=`//VTK::System::Dec

in vec2 tcoord;

uniform sampler2D translucentRTexture;
uniform sampler2D translucentRGBATexture;

// the output of this shader
//VTK::Output::Dec

void main()
{
  vec4 t1Color = texture(translucentRGBATexture, tcoord);
  float t2Color = texture(translucentRTexture, tcoord).r;
  gl_FragData[0] = vec4(t1Color.rgb/max(t2Color,0.01), 1.0 - t1Color.a);
}
`;function K_(t,e){e.classHierarchy.push("vtkOpenGLOrderIndependentTranslucentPass"),t.createVertexBuffer=()=>{const a=new Float32Array([-1,-1,-1,1,-1,-1,-1,1,-1,1,1,-1]),n=new Float32Array([0,0,1,0,0,1,1,1]),r=new Uint16Array([4,0,1,3,2]),i=pe.newInstance({numberOfComponents:3,values:a});i.setName("points");const s=pe.newInstance({numberOfComponents:2,values:n});s.setName("tcoords");const u=pe.newInstance({numberOfComponents:1,values:r});e.tris.getCABO().createVBO(u,"polys",W_.SURFACE,{points:i,tcoords:s,cellOffset:0}),e.VBOBuildTime.modified()},t.createFramebuffer=a=>{const n=a.getSize(),r=a.getContext();e.framebuffer=fr.newInstance(),e.framebuffer.setOpenGLRenderWindow(a),e.framebuffer.create(...n),e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind(),e.translucentRGBATexture=Me.newInstance(),e.translucentRGBATexture.setInternalFormat(r.RGBA16F),e.translucentRGBATexture.setFormat(r.RGBA),e.translucentRGBATexture.setOpenGLDataType(r.HALF_FLOAT),e.translucentRGBATexture.setOpenGLRenderWindow(a),e.translucentRGBATexture.create2DFromRaw(n[0],n[1],4,"Float32Array",null),e.translucentRTexture=Me.newInstance(),e.translucentRTexture.setInternalFormat(r.R16F),e.translucentRTexture.setFormat(r.RED),e.translucentRTexture.setOpenGLDataType(r.HALF_FLOAT),e.translucentRTexture.setOpenGLRenderWindow(a),e.translucentRTexture.create2DFromRaw(n[0],n[1],1,"Float32Array",null),e.translucentZTexture=Me.newInstance(),e.translucentZTexture.setOpenGLRenderWindow(a),e.translucentZTexture.createDepthFromRaw(n[0],n[1],"Float32Array",null),e.framebuffer.setColorBuffer(e.translucentRGBATexture,0),e.framebuffer.setColorBuffer(e.translucentRTexture,1),e.framebuffer.setDepthBuffer(e.translucentZTexture)},t.createCopyShader=a=>{e.copyShader=a.getShaderCache().readyShaderProgramArray(["//VTK::System::Dec","attribute vec4 vertexDC;","attribute vec2 tcoordTC;","varying vec2 tcoord;","void main() { tcoord = tcoordTC; gl_Position = vertexDC; }"].join(`
`),H_,"")},t.createVBO=a=>{const n=a.getContext();e.tris.setOpenGLRenderWindow(a),t.createVertexBuffer();const r=e.copyShader;e.tris.getCABO().bind(),e.copyVAO.addAttributeArray(r,e.tris.getCABO(),"vertexDC",e.tris.getCABO().getVertexOffset(),e.tris.getCABO().getStride(),n.FLOAT,3,n.FALSE)||tg("Error setting vertexDC in copy shader VAO."),e.copyVAO.addAttributeArray(r,e.tris.getCABO(),"tcoordTC",e.tris.getCABO().getTCoordOffset(),e.tris.getCABO().getStride(),n.FLOAT,2,n.FALSE)||tg("Error setting vertexDC in copy shader VAO.")},t.traverse=(a,n,r)=>{if(e.deleted)return;const i=a.getSize(),s=a.getContext();if(e._supported=!1,n.getSelector()||!s||!a.getWebgl2()||!s.getExtension("EXT_color_buffer_half_float")&&!s.getExtension("EXT_color_buffer_float")){t.setCurrentOperation("translucentPass"),n.traverse(t);return}if(e._supported=!0,e.framebuffer===null)t.createFramebuffer(a);else{const u=e.framebuffer.getSize();u===null||u[0]!==i[0]||u[1]!==i[1]?(e.framebuffer.releaseGraphicsResources(),e.translucentRGBATexture.releaseGraphicsResources(a),e.translucentRTexture.releaseGraphicsResources(a),e.translucentZTexture.releaseGraphicsResources(a),t.createFramebuffer(a)):(e.framebuffer.saveCurrentBindingsAndBuffers(),e.framebuffer.bind())}s.drawBuffers([s.COLOR_ATTACHMENT0]),s.clearBufferfv(s.COLOR,0,[0,0,0,0]),s.clearBufferfv(s.DEPTH,0,[1]),s.colorMask(!1,!1,!1,!1),r.getOpaqueActorCount()>0&&(r.setCurrentOperation("opaqueZBufferPass"),n.traverse(r)),s.colorMask(!0,!0,!0,!0),s.drawBuffers([s.COLOR_ATTACHMENT0,s.COLOR_ATTACHMENT1]),s.viewport(0,0,i[0],i[1]),s.scissor(0,0,i[0],i[1]),s.clearBufferfv(s.COLOR,0,[0,0,0,1]),s.clearBufferfv(s.COLOR,1,[0,0,0,0]),s.enable(s.DEPTH_TEST),s.enable(s.BLEND),s.blendFuncSeparate(s.ONE,s.ONE,s.ZERO,s.ONE_MINUS_SRC_ALPHA),t.setCurrentOperation("translucentPass"),n.traverse(t),s.drawBuffers([s.NONE]),e.framebuffer.restorePreviousBindingsAndBuffers(),e.copyShader===null?t.createCopyShader(a):a.getShaderCache().readyShaderProgram(e.copyShader),e.copyVAO||(e.copyVAO=Ma.newInstance(),e.copyVAO.setOpenGLRenderWindow(a)),e.copyVAO.bind(),e.VBOBuildTime.getMTime()<t.getMTime()&&t.createVBO(a),s.blendFuncSeparate(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA),s.depthMask(!1),s.depthFunc(s.ALWAYS),s.viewport(0,0,i[0],i[1]),s.scissor(0,0,i[0],i[1]),e.translucentRGBATexture.activate(),e.copyShader.setUniformi("translucentRGBATexture",e.translucentRGBATexture.getTextureUnit()),e.translucentRTexture.activate(),e.copyShader.setUniformi("translucentRTexture",e.translucentRTexture.getTextureUnit()),s.drawArrays(s.TRIANGLES,0,e.tris.getCABO().getElementCount()),s.depthMask(!0),s.depthFunc(s.LEQUAL),e.translucentRGBATexture.deactivate(),e.translucentRTexture.deactivate()},t.getShaderReplacement=()=>e._supported?$_:null,t.releaseGraphicsResources=a=>{e.framebuffer&&(e.framebuffer.releaseGraphicsResources(a),e.framebuffer=null),e.translucentRGBATexture&&(e.translucentRGBATexture.releaseGraphicsResources(a),e.translucentRGBATexture=null),e.translucentRTexture&&(e.translucentRTexture.releaseGraphicsResources(a),e.translucentRTexture=null),e.translucentZTexture&&(e.translucentZTexture.releaseGraphicsResources(a),e.translucentZTexture=null),e.copyVAO&&(e.copyVAO.releaseGraphicsResources(a),e.copyVAO=null),e.copyShader&&(e.copyShader.releaseGraphicsResources(a),e.copyShader=null),e.tris&&(e.tris.releaseGraphicsResources(a),e.tris=null),t.modified()}}const X_={framebuffer:null,copyShader:null,tris:null};function ng(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,X_,a),pu.extend(t,e,a),e.VBOBuildTime={},k.obj(e.VBOBuildTime,{mtime:0}),e.tris=Gt.newInstance(),k.get(t,e,["framebuffer"]),K_(t,e)}var q_={newInstance:k.newInstance(ng,"vtkOpenGLOrderIndependentTranslucentPass"),extend:ng};function Y_(t,e){e.classHierarchy.push("vtkForwardPass"),t.traverse=function(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(e.deleted)return;e._currentParent=n,t.setCurrentOperation("buildPass"),a.traverse(t);const r=a.getRenderable().getNumberOfLayers(),i=a.getChildren();for(let s=0;s<r;s++)for(let u=0;u<i.length;u++){const c=i[u],o=a.getRenderable().getRenderers()[u];if(o.getDraw()&&o.getLayer()===s){if(e.opaqueActorCount=0,e.translucentActorCount=0,e.volumeCount=0,e.overlayActorCount=0,t.setCurrentOperation("queryPass"),c.traverse(t),(e.opaqueActorCount>0||e.translucentActorCount>0)&&e.volumeCount>0||e.depthRequested){const f=a.getFramebufferSize();e.framebuffer===null&&(e.framebuffer=fr.newInstance()),e.framebuffer.setOpenGLRenderWindow(a),e.framebuffer.saveCurrentBindingsAndBuffers();const l=e.framebuffer.getSize();(l===null||l[0]!==f[0]||l[1]!==f[1])&&(e.framebuffer.create(f[0],f[1]),e.framebuffer.populateFramebuffer()),e.framebuffer.bind(),t.setCurrentOperation("zBufferPass"),c.traverse(t),e.framebuffer.restorePreviousBindingsAndBuffers(),e.depthRequested=!1}t.setCurrentOperation("cameraPass"),c.traverse(t),e.opaqueActorCount>0&&(t.setCurrentOperation("opaquePass"),c.traverse(t)),e.translucentActorCount>0&&(e.translucentPass||(e.translucentPass=q_.newInstance()),e.translucentPass.traverse(a,c,t)),e.volumeCount>0&&(t.setCurrentOperation("volumePass"),c.traverse(t)),e.overlayActorCount>0&&(t.setCurrentOperation("overlayPass"),c.traverse(t))}}},t.getZBufferTexture=()=>e.framebuffer?e.framebuffer.getColorTexture():null,t.requestDepth=()=>{e.depthRequested=!0},t.incrementOpaqueActorCount=()=>e.opaqueActorCount++,t.incrementTranslucentActorCount=()=>e.translucentActorCount++,t.incrementVolumeCount=()=>e.volumeCount++,t.incrementOverlayActorCount=()=>e.overlayActorCount++}const J_={opaqueActorCount:0,translucentActorCount:0,volumeCount:0,overlayActorCount:0,framebuffer:null,depthRequested:!1};function rg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,J_,a),pu.extend(t,e,a),k.get(t,e,["framebuffer","opaqueActorCount","translucentActorCount","volumeCount"]),Y_(t,e)}var Z_={newInstance:k.newInstance(rg,"vtkForwardPass"),extend:rg},gu={},Q_={get exports(){return gu},set exports(t){gu=t}};(function(t,e){(function(a){t.exports=a()})(function(a){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(S,v){var g=S[0],x=S[1],C=S[2],T=S[3];g+=(x&C|~x&T)+v[0]-680876936|0,g=(g<<7|g>>>25)+x|0,T+=(g&x|~g&C)+v[1]-389564586|0,T=(T<<12|T>>>20)+g|0,C+=(T&g|~T&x)+v[2]+606105819|0,C=(C<<17|C>>>15)+T|0,x+=(C&T|~C&g)+v[3]-1044525330|0,x=(x<<22|x>>>10)+C|0,g+=(x&C|~x&T)+v[4]-176418897|0,g=(g<<7|g>>>25)+x|0,T+=(g&x|~g&C)+v[5]+1200080426|0,T=(T<<12|T>>>20)+g|0,C+=(T&g|~T&x)+v[6]-1473231341|0,C=(C<<17|C>>>15)+T|0,x+=(C&T|~C&g)+v[7]-45705983|0,x=(x<<22|x>>>10)+C|0,g+=(x&C|~x&T)+v[8]+1770035416|0,g=(g<<7|g>>>25)+x|0,T+=(g&x|~g&C)+v[9]-1958414417|0,T=(T<<12|T>>>20)+g|0,C+=(T&g|~T&x)+v[10]-42063|0,C=(C<<17|C>>>15)+T|0,x+=(C&T|~C&g)+v[11]-1990404162|0,x=(x<<22|x>>>10)+C|0,g+=(x&C|~x&T)+v[12]+1804603682|0,g=(g<<7|g>>>25)+x|0,T+=(g&x|~g&C)+v[13]-40341101|0,T=(T<<12|T>>>20)+g|0,C+=(T&g|~T&x)+v[14]-1502002290|0,C=(C<<17|C>>>15)+T|0,x+=(C&T|~C&g)+v[15]+1236535329|0,x=(x<<22|x>>>10)+C|0,g+=(x&T|C&~T)+v[1]-165796510|0,g=(g<<5|g>>>27)+x|0,T+=(g&C|x&~C)+v[6]-1069501632|0,T=(T<<9|T>>>23)+g|0,C+=(T&x|g&~x)+v[11]+643717713|0,C=(C<<14|C>>>18)+T|0,x+=(C&g|T&~g)+v[0]-373897302|0,x=(x<<20|x>>>12)+C|0,g+=(x&T|C&~T)+v[5]-701558691|0,g=(g<<5|g>>>27)+x|0,T+=(g&C|x&~C)+v[10]+38016083|0,T=(T<<9|T>>>23)+g|0,C+=(T&x|g&~x)+v[15]-660478335|0,C=(C<<14|C>>>18)+T|0,x+=(C&g|T&~g)+v[4]-405537848|0,x=(x<<20|x>>>12)+C|0,g+=(x&T|C&~T)+v[9]+568446438|0,g=(g<<5|g>>>27)+x|0,T+=(g&C|x&~C)+v[14]-1019803690|0,T=(T<<9|T>>>23)+g|0,C+=(T&x|g&~x)+v[3]-187363961|0,C=(C<<14|C>>>18)+T|0,x+=(C&g|T&~g)+v[8]+1163531501|0,x=(x<<20|x>>>12)+C|0,g+=(x&T|C&~T)+v[13]-1444681467|0,g=(g<<5|g>>>27)+x|0,T+=(g&C|x&~C)+v[2]-51403784|0,T=(T<<9|T>>>23)+g|0,C+=(T&x|g&~x)+v[7]+1735328473|0,C=(C<<14|C>>>18)+T|0,x+=(C&g|T&~g)+v[12]-1926607734|0,x=(x<<20|x>>>12)+C|0,g+=(x^C^T)+v[5]-378558|0,g=(g<<4|g>>>28)+x|0,T+=(g^x^C)+v[8]-2022574463|0,T=(T<<11|T>>>21)+g|0,C+=(T^g^x)+v[11]+1839030562|0,C=(C<<16|C>>>16)+T|0,x+=(C^T^g)+v[14]-35309556|0,x=(x<<23|x>>>9)+C|0,g+=(x^C^T)+v[1]-1530992060|0,g=(g<<4|g>>>28)+x|0,T+=(g^x^C)+v[4]+1272893353|0,T=(T<<11|T>>>21)+g|0,C+=(T^g^x)+v[7]-155497632|0,C=(C<<16|C>>>16)+T|0,x+=(C^T^g)+v[10]-1094730640|0,x=(x<<23|x>>>9)+C|0,g+=(x^C^T)+v[13]+681279174|0,g=(g<<4|g>>>28)+x|0,T+=(g^x^C)+v[0]-358537222|0,T=(T<<11|T>>>21)+g|0,C+=(T^g^x)+v[3]-722521979|0,C=(C<<16|C>>>16)+T|0,x+=(C^T^g)+v[6]+76029189|0,x=(x<<23|x>>>9)+C|0,g+=(x^C^T)+v[9]-640364487|0,g=(g<<4|g>>>28)+x|0,T+=(g^x^C)+v[12]-421815835|0,T=(T<<11|T>>>21)+g|0,C+=(T^g^x)+v[15]+530742520|0,C=(C<<16|C>>>16)+T|0,x+=(C^T^g)+v[2]-995338651|0,x=(x<<23|x>>>9)+C|0,g+=(C^(x|~T))+v[0]-198630844|0,g=(g<<6|g>>>26)+x|0,T+=(x^(g|~C))+v[7]+1126891415|0,T=(T<<10|T>>>22)+g|0,C+=(g^(T|~x))+v[14]-1416354905|0,C=(C<<15|C>>>17)+T|0,x+=(T^(C|~g))+v[5]-57434055|0,x=(x<<21|x>>>11)+C|0,g+=(C^(x|~T))+v[12]+1700485571|0,g=(g<<6|g>>>26)+x|0,T+=(x^(g|~C))+v[3]-1894986606|0,T=(T<<10|T>>>22)+g|0,C+=(g^(T|~x))+v[10]-1051523|0,C=(C<<15|C>>>17)+T|0,x+=(T^(C|~g))+v[1]-2054922799|0,x=(x<<21|x>>>11)+C|0,g+=(C^(x|~T))+v[8]+1873313359|0,g=(g<<6|g>>>26)+x|0,T+=(x^(g|~C))+v[15]-30611744|0,T=(T<<10|T>>>22)+g|0,C+=(g^(T|~x))+v[6]-1560198380|0,C=(C<<15|C>>>17)+T|0,x+=(T^(C|~g))+v[13]+1309151649|0,x=(x<<21|x>>>11)+C|0,g+=(C^(x|~T))+v[4]-145523070|0,g=(g<<6|g>>>26)+x|0,T+=(x^(g|~C))+v[11]-1120210379|0,T=(T<<10|T>>>22)+g|0,C+=(g^(T|~x))+v[2]+718787259|0,C=(C<<15|C>>>17)+T|0,x+=(T^(C|~g))+v[9]-343485551|0,x=(x<<21|x>>>11)+C|0,S[0]=g+S[0]|0,S[1]=x+S[1]|0,S[2]=C+S[2]|0,S[3]=T+S[3]|0}function i(S){var v=[],g;for(g=0;g<64;g+=4)v[g>>2]=S.charCodeAt(g)+(S.charCodeAt(g+1)<<8)+(S.charCodeAt(g+2)<<16)+(S.charCodeAt(g+3)<<24);return v}function s(S){var v=[],g;for(g=0;g<64;g+=4)v[g>>2]=S[g]+(S[g+1]<<8)+(S[g+2]<<16)+(S[g+3]<<24);return v}function u(S){var v=S.length,g=[1732584193,-271733879,-1732584194,271733878],x,C,T,w,_,E;for(x=64;x<=v;x+=64)r(g,i(S.substring(x-64,x)));for(S=S.substring(x-64),C=S.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0;x<C;x+=1)T[x>>2]|=S.charCodeAt(x)<<(x%4<<3);if(T[x>>2]|=128<<(x%4<<3),x>55)for(r(g,T),x=0;x<16;x+=1)T[x]=0;return w=v*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),_=parseInt(w[2],16),E=parseInt(w[1],16)||0,T[14]=_,T[15]=E,r(g,T),g}function c(S){var v=S.length,g=[1732584193,-271733879,-1732584194,271733878],x,C,T,w,_,E;for(x=64;x<=v;x+=64)r(g,s(S.subarray(x-64,x)));for(S=x-64<v?S.subarray(x-64):new Uint8Array(0),C=S.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0;x<C;x+=1)T[x>>2]|=S[x]<<(x%4<<3);if(T[x>>2]|=128<<(x%4<<3),x>55)for(r(g,T),x=0;x<16;x+=1)T[x]=0;return w=v*8,w=w.toString(16).match(/(.*?)(.{0,8})$/),_=parseInt(w[2],16),E=parseInt(w[1],16)||0,T[14]=_,T[15]=E,r(g,T),g}function o(S){var v="",g;for(g=0;g<4;g+=1)v+=n[S>>g*8+4&15]+n[S>>g*8&15];return v}function f(S){var v;for(v=0;v<S.length;v+=1)S[v]=o(S[v]);return S.join("")}f(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function S(v,g){return v=v|0||0,v<0?Math.max(v+g,0):Math.min(v,g)}ArrayBuffer.prototype.slice=function(v,g){var x=this.byteLength,C=S(v,x),T=x,w,_,E,D;return g!==a&&(T=S(g,x)),C>T?new ArrayBuffer(0):(w=T-C,_=new ArrayBuffer(w),E=new Uint8Array(_),D=new Uint8Array(this,C,w),E.set(D),_)}}();function l(S){return/[\u0080-\uFFFF]/.test(S)&&(S=unescape(encodeURIComponent(S))),S}function h(S,v){var g=S.length,x=new ArrayBuffer(g),C=new Uint8Array(x),T;for(T=0;T<g;T+=1)C[T]=S.charCodeAt(T);return v?C:x}function p(S){return String.fromCharCode.apply(null,new Uint8Array(S))}function d(S,v,g){var x=new Uint8Array(S.byteLength+v.byteLength);return x.set(new Uint8Array(S)),x.set(new Uint8Array(v),S.byteLength),g?x:x.buffer}function y(S){var v=[],g=S.length,x;for(x=0;x<g-1;x+=2)v.push(parseInt(S.substr(x,2),16));return String.fromCharCode.apply(String,v)}function m(){this.reset()}return m.prototype.append=function(S){return this.appendBinary(l(S)),this},m.prototype.appendBinary=function(S){this._buff+=S,this._length+=S.length;var v=this._buff.length,g;for(g=64;g<=v;g+=64)r(this._hash,i(this._buff.substring(g-64,g)));return this._buff=this._buff.substring(g-64),this},m.prototype.end=function(S){var v=this._buff,g=v.length,x,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T;for(x=0;x<g;x+=1)C[x>>2]|=v.charCodeAt(x)<<(x%4<<3);return this._finish(C,g),T=f(this._hash),S&&(T=y(T)),this.reset(),T},m.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},m.prototype.setState=function(S){return this._buff=S.buff,this._length=S.length,this._hash=S.hash,this},m.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},m.prototype._finish=function(S,v){var g=v,x,C,T;if(S[g>>2]|=128<<(g%4<<3),g>55)for(r(this._hash,S),g=0;g<16;g+=1)S[g]=0;x=this._length*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),C=parseInt(x[2],16),T=parseInt(x[1],16)||0,S[14]=C,S[15]=T,r(this._hash,S)},m.hash=function(S,v){return m.hashBinary(l(S),v)},m.hashBinary=function(S,v){var g=u(S),x=f(g);return v?y(x):x},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(S){var v=d(this._buff.buffer,S,!0),g=v.length,x;for(this._length+=S.byteLength,x=64;x<=g;x+=64)r(this._hash,s(v.subarray(x-64,x)));return this._buff=x-64<g?new Uint8Array(v.buffer.slice(x-64)):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(S){var v=this._buff,g=v.length,x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C,T;for(C=0;C<g;C+=1)x[C>>2]|=v[C]<<(C%4<<3);return this._finish(x,g),T=f(this._hash),S&&(T=y(T)),this.reset(),T},m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.getState=function(){var S=m.prototype.getState.call(this);return S.buff=p(S.buff),S},m.ArrayBuffer.prototype.setState=function(S){return S.buff=h(S.buff,!0),m.prototype.setState.call(this,S)},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.hash=function(S,v){var g=c(new Uint8Array(S)),x=f(g);return v?y(x):x},m})})(Q_);const eE=gu,tE=["lastShaderProgramBound","context","_openGLRenderWindow"];function nE(t,e){e.classHierarchy.push("vtkShaderCache"),t.replaceShaderValues=(a,n,r)=>{let i=n;r.length>0&&(i=J.substitute(i,"VSOut","GSOut").result);const s=e._openGLRenderWindow.getWebgl2();let u=`
`,c=`#version 100
`;s?c=`#version 300 es
#define attribute in
#define textureCube texture
#define texture2D texture
#define textureCubeLod textureLod
#define texture2DLod textureLod
`:(e.context.getExtension("OES_standard_derivatives"),e.context.getExtension("EXT_frag_depth")&&(u=`#extension GL_EXT_frag_depth : enable
`),e.context.getExtension("EXT_shader_texture_lod")&&(u+=`#extension GL_EXT_shader_texture_lod : enable
#define textureCubeLod textureCubeLodEXT
#define texture2DLod texture2DLodEXT`)),i=J.substitute(i,"//VTK::System::Dec",[`${c}
`,s?"":`#extension GL_OES_standard_derivatives : enable
`,u,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;let o=J.substitute(a,"//VTK::System::Dec",[`${c}
`,"#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","precision highp int;","#else","precision mediump float;","precision mediump int;","#endif"]).result;if(s){o=J.substitute(o,"varying","out").result,i=J.substitute(i,"varying","in").result;let l="",h=0;for(;i.includes(`gl_FragData[${h}]`);)i=J.substitute(i,`gl_FragData\\[${h}\\]`,`fragOutput${h}`).result,l+=`layout(location = ${h}) out vec4 fragOutput${h};
`,h++;i=J.substitute(i,"//VTK::Output::Dec",l).result}const f=J.substitute(r,"//VTK::System::Dec",c).result;return{VSSource:o,FSSource:i,GSSource:f}},t.readyShaderProgramArray=(a,n,r)=>{const i=t.replaceShaderValues(a,n,r),s=t.getShaderProgram(i.VSSource,i.FSSource,i.GSSource);return t.readyShaderProgram(s)},t.readyShaderProgram=a=>!a||!a.getCompiled()&&!a.compileShader()||!t.bindShaderProgram(a)?null:a,t.getShaderProgram=(a,n,r)=>{const i=`${a}${n}${r}`,s=eE.hash(i);if(!(s in e.shaderPrograms)){const u=J.newInstance();return u.setContext(e.context),u.getVertexShader().setSource(a),u.getFragmentShader().setSource(n),r&&u.getGeometryShader().setSource(r),u.setMd5Hash(s),e.shaderPrograms[s]=u,u}return e.shaderPrograms[s]},t.releaseGraphicsResources=a=>{t.releaseCurrentShaderProgram(),Object.keys(e.shaderPrograms).map(n=>e.shaderPrograms[n]).forEach(n=>n.cleanup()),e.shaderPrograms={}},t.releaseCurrentShaderProgram=()=>{e.lastShaderProgramBound&&(e.lastShaderProgramBound.cleanup(),e.lastShaderProgramBound=null)},t.bindShaderProgram=a=>(e.lastShaderProgramBound===a||(e.lastShaderProgramBound&&e.lastShaderProgramBound.release(),a.bind(),e.lastShaderProgramBound=a),1)}const rE={lastShaderProgramBound:null,shaderPrograms:null,context:null};function ag(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,rE,a),e.shaderPrograms={},k.obj(t,e),k.setGet(t,e,tE),k.moveToProtected(t,e,["openGLRenderWindow"]),nE(t,e)}var aE={newInstance:k.newInstance(ag,"vtkShaderCache"),extend:ag};const{vtkErrorMacro:iE}=k;function oE(t,e){e.classHierarchy.push("vtkOpenGLTextureUnitManager"),t.deleteTable=()=>{for(let a=0;a<e.numberOfTextureUnits;++a)e.textureUnits[a]===!0&&iE("some texture units  were not properly released");e.textureUnits=[],e.numberOfTextureUnits=0},t.setContext=a=>{if(e.context!==a){if(e.context!==0&&t.deleteTable(),e.context=a,e.context){e.numberOfTextureUnits=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);for(let n=0;n<e.numberOfTextureUnits;++n)e.textureUnits[n]=!1}t.modified()}},t.allocate=()=>{for(let a=0;a<e.numberOfTextureUnits;a++)if(!t.isAllocated(a))return e.textureUnits[a]=!0,a;return-1},t.allocateUnit=a=>t.isAllocated(a)?-1:(e.textureUnits[a]=!0,a),t.isAllocated=a=>e.textureUnits[a],t.free=a=>{e.textureUnits[a]=!1},t.freeAll=()=>{for(let a=0;a<e.numberOfTextureUnits;++a)e.textureUnits[a]=!1}}const sE={context:null,numberOfTextureUnits:0,textureUnits:0};function ig(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,sE,a),k.obj(t,e),e.textureUnits=[],k.get(t,e,["numberOfTextureUnits"]),k.setGet(t,e,["context"]),oE(t,e)}var uE={newInstance:k.newInstance(ig,"vtkOpenGLTextureUnitManager"),extend:ig};function cE(t,e){e.classHierarchy.push("vtkRenderWindowViewNode"),t.getViewNodeFactory=()=>null,t.getAspectRatio=()=>e.size[0]/e.size[1],t.getAspectRatioForRenderer=a=>{const n=a.getViewportByReference();return e.size[0]*(n[2]-n[0])/((n[3]-n[1])*e.size[1])},t.isInViewport=(a,n,r)=>{const i=r.getViewportByReference(),s=t.getFramebufferSize();return i[0]*s[0]<=a&&i[2]*s[0]>=a&&i[1]*s[1]<=n&&i[3]*s[1]>=n},t.getViewportSize=a=>{const n=a.getViewportByReference(),r=t.getFramebufferSize();return[(n[2]-n[0])*r[0],(n[3]-n[1])*r[1]]},t.getViewportCenter=a=>{const n=t.getViewportSize(a);return[n[0]*.5,n[1]*.5]},t.displayToNormalizedDisplay=(a,n,r)=>{const i=t.getFramebufferSize();return[a/i[0],n/i[1],r]},t.normalizedDisplayToDisplay=(a,n,r)=>{const i=t.getFramebufferSize();return[a*i[0],n*i[1],r]},t.worldToView=(a,n,r,i)=>i.worldToView(a,n,r),t.viewToWorld=(a,n,r,i)=>i.viewToWorld(a,n,r),t.worldToDisplay=(a,n,r,i)=>{const s=i.worldToView(a,n,r),u=t.getViewportSize(i),c=i.viewToProjection(s[0],s[1],s[2],u[0]/u[1]),o=i.projectionToNormalizedDisplay(c[0],c[1],c[2]);return t.normalizedDisplayToDisplay(o[0],o[1],o[2])},t.displayToWorld=(a,n,r,i)=>{const s=t.displayToNormalizedDisplay(a,n,r),u=i.normalizedDisplayToProjection(s[0],s[1],s[2]),c=t.getViewportSize(i),o=i.projectionToView(u[0],u[1],u[2],c[0]/c[1]);return i.viewToWorld(o[0],o[1],o[2])},t.normalizedDisplayToViewport=(a,n,r,i)=>{let s=i.getViewportByReference();s=t.normalizedDisplayToDisplay(s[0],s[1],0);const u=t.normalizedDisplayToDisplay(a,n,r);return[u[0]-s[0]-.5,u[1]-s[1]-.5,r]},t.viewportToNormalizedViewport=(a,n,r,i)=>{const s=t.getViewportSize(i);return s&&s[0]!==0&&s[1]!==0?[a/(s[0]-1),n/(s[1]-1),r]:[a,n,r]},t.normalizedViewportToViewport=(a,n,r,i)=>{const s=t.getViewportSize(i);return[a*(s[0]-1),n*(s[1]-1),r]},t.displayToLocalDisplay=(a,n,r)=>{const i=t.getFramebufferSize();return[a,i[1]-n-1,r]},t.viewportToNormalizedDisplay=(a,n,r,i)=>{let s=i.getViewportByReference();s=t.normalizedDisplayToDisplay(s[0],s[1],0);const u=a+s[0]+.5,c=n+s[1]+.5;return t.displayToNormalizedDisplay(u,c,r)},t.getComputedDevicePixelRatio=()=>e.size[0]/t.getContainerSize()[0],t.getContainerSize=()=>{k.vtkErrorMacro("not implemented")},t.getPixelData=(a,n,r,i)=>{k.vtkErrorMacro("not implemented")},t.createSelector=()=>{k.vtkErrorMacro("not implemented")}}const lE={size:void 0,selector:void 0};function og(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,lE,a),e.size||(e.size=[300,300]),k.getArray(t,e,["size"],2),k.get(t,e,["selector"]),vt.extend(t,e,a),cE(t,e)}var fE={newInstance:k.newInstance(og,"vtkRenderWindowViewNode"),extend:og};const hE="__getUnderlyingContext";function pE(){const t=new Map,e={apply(r,i,s){return t.has(s[0])?t.get(s[0]):r.apply(i,s)}};function a(r){return{apply(i,s,u){return t.set(r,u[0]),i.apply(s,u)}}}const n=Object.create(null);return n.getParameter=(r,i,s,u)=>new Proxy(u.bind(r),e),n.depthMask=(r,i,s,u)=>new Proxy(u.bind(r),a(r.DEPTH_WRITEMASK)),{get(r,i,s){if(i===hE)return()=>r;let u=Reflect.get(r,i,r);u instanceof Function&&(u=u.bind(r));const c=n[i];return c?c(r,i,s,u):u}}}const{vtkDebugMacro:sg,vtkErrorMacro:ug}=k,gE={position:"absolute",top:0,left:0,width:"100%",height:"100%"};function bt(t,e,a){const n=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,e,2,2,0,e,a,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const i=t.checkFramebufferStatus(t.FRAMEBUFFER);return t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),i===t.FRAMEBUFFER_COMPLETE}let Fo=0;const Ao=[];function dE(){Fo++,Ao.forEach(t=>t(Fo))}function vE(){Fo--,Ao.forEach(t=>t(Fo))}function yE(t){Ao.push(t)}function mE(t){return Ao.pop()}function cg(t){t.preventDefault()}function xE(t,e){e.classHierarchy.push("vtkOpenGLRenderWindow");const a=pE();t.getViewNodeFactory=()=>e.myFactory,e.canvas.addEventListener("webglcontextlost",cg,!1),e.canvas.addEventListener("webglcontextrestored",t.restoreContext,!1);const n=[0,0];function r(){e.renderable&&(e.size[0]!==n[0]||e.size[1]!==n[1])&&(n[0]=e.size[0],n[1]=e.size[1],e.canvas.setAttribute("width",e.size[0]),e.canvas.setAttribute("height",e.size[1])),e.viewStream&&e.viewStream.setSize(e.size[0],e.size[1]),e.canvas.style.display=e.useOffScreen?"none":"block",e.el&&(e.el.style.cursor=e.cursorVisibility?e.cursor:"none"),e.containerSize=null}t.onModified(r),t.buildPass=o=>{if(o){if(!e.renderable)return;t.prepareNodes(),t.addMissingNodes(e.renderable.getRenderersByReference()),t.removeUnusedNodes(),t.initialize(),e.children.forEach(f=>{f.setOpenGLRenderWindow(t)})}},t.initialize=()=>{if(!e.initialized){e.context=t.get3DContext(),e.textureUnitManager=uE.newInstance(),e.textureUnitManager.setContext(e.context),e.shaderCache.setContext(e.context);const o=e.context;o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.depthFunc(o.LEQUAL),o.enable(o.BLEND),e.initialized=!0}},t.makeCurrent=()=>{e.context.makeCurrent()},t.setContainer=o=>{e.el&&e.el!==o&&(e.canvas.parentNode!==e.el&&ug("Error: canvas parent node does not match container"),e.el.removeChild(e.canvas),e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)),e.el!==o&&(e.el=o,e.el&&(e.el.appendChild(e.canvas),e.useBackgroundImage&&e.el.appendChild(e.bgImage)),t.modified())},t.getContainer=()=>e.el,t.getContainerSize=()=>{if(!e.containerSize&&e.el){const{width:o,height:f}=e.el.getBoundingClientRect();e.containerSize=[o,f]}return e.containerSize||e.size},t.getFramebufferSize=()=>e.activeFramebuffer?e.activeFramebuffer.getSize():e.size,t.getPixelData=(o,f,l,h)=>{const p=new Uint8Array((l-o+1)*(h-f+1)*4);return e.context.readPixels(o,f,l-o+1,h-f+1,e.context.RGBA,e.context.UNSIGNED_BYTE,p),p},t.get3DContext=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{preserveDrawingBuffer:!1,depth:!0,alpha:!0,powerPreference:"high-performance"},f=null;const l=typeof WebGL2RenderingContext<"u";return e.webgl2=!1,e.defaultToWebgl2&&l&&(f=e.canvas.getContext("webgl2",o),f&&(e.webgl2=!0,sg("using webgl2"))),f||(sg("using webgl1"),f=e.canvas.getContext("webgl",o)||e.canvas.getContext("experimental-webgl",o)),new Proxy(f,a)},t.restoreContext=()=>{const o=pu.newInstance();o.setCurrentOperation("Release"),o.traverse(t,null)},t.activateTexture=o=>{const f=e._textureResourceIds.get(o);if(f!==void 0){e.context.activeTexture(e.context.TEXTURE0+f);return}const l=t.getTextureUnitManager().allocate();if(l<0){ug("Hardware does not support the number of textures defined.");return}e._textureResourceIds.set(o,l),e.context.activeTexture(e.context.TEXTURE0+l)},t.deactivateTexture=o=>{const f=e._textureResourceIds.get(o);f!==void 0&&(t.getTextureUnitManager().free(f),e._textureResourceIds.delete(o))},t.getTextureUnitForTexture=o=>{const f=e._textureResourceIds.get(o);return f!==void 0?f:-1},t.getDefaultTextureByteSize=function(o){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(e.webgl2)switch(o){case Ne.CHAR:case Ne.SIGNED_CHAR:case Ne.UNSIGNED_CHAR:return 1;case f:case l:case Ne.UNSIGNED_SHORT:case Ne.SHORT:case Ne.VOID:return 2;default:return 4}return 1},t.getDefaultTextureInternalFormat=function(o,f){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e.webgl2)switch(o){case Ne.UNSIGNED_CHAR:switch(f){case 1:return e.context.R8;case 2:return e.context.RG8;case 3:return e.context.RGB8;case 4:default:return e.context.RGBA8}case(l&&!h&&Ne.UNSIGNED_SHORT):switch(f){case 1:return l.R16_EXT;case 2:return l.RG16_EXT;case 3:return l.RGB16_EXT;case 4:default:return l.RGBA16_EXT}case(l&&!h&&Ne.SHORT):switch(f){case 1:return l.R16_SNORM_EXT;case 2:return l.RG16_SNORM_EXT;case 3:return l.RGB16_SNORM_EXT;case 4:default:return l.RGBA16_SNORM_EXT}case Ne.FLOAT:default:switch(f){case 1:return e.context.R16F;case 2:return e.context.RG16F;case 3:return e.context.RGB16F;case 4:default:return e.context.RGBA16F}}switch(f){case 1:return e.context.LUMINANCE;case 2:return e.context.LUMINANCE_ALPHA;case 3:return e.context.RGB;case 4:default:return e.context.RGBA}},t.setBackgroundImage=o=>{e.bgImage.src=o.src},t.setUseBackgroundImage=o=>{e.useBackgroundImage=o,e.useBackgroundImage&&!e.el.contains(e.bgImage)?e.el.appendChild(e.bgImage):!e.useBackgroundImage&&e.el.contains(e.bgImage)&&e.el.removeChild(e.bgImage)};function i(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.imageFormat;const f=document.createElement("canvas"),l=f.getContext("2d");f.width=e.canvas.width,f.height=e.canvas.height,l.drawImage(e.canvas,0,0);const h=e.canvas.getBoundingClientRect();e.renderable.getRenderers().forEach(m=>{m.getViewProps().forEach(v=>{if(v.getContainer){const x=v.getContainer().getElementsByTagName("canvas");for(let C=0;C<x.length;C++){const T=x[C],w=T.getBoundingClientRect(),_=w.x-h.x,E=w.y-h.y;l.drawImage(T,_,E)}}})});const y=f.toDataURL(o);f.remove(),t.invokeImageReady(y)}t.captureNextImage=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"image/png",{resetCamera:f=!1,size:l=null,scale:h=1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.deleted)return null;e.imageFormat=o;const p=e.notifyStartCaptureImage;return e.notifyStartCaptureImage=!0,e._screenshot={size:l||h!==1?l||e.size.map(d=>d*h):null},new Promise((d,y)=>{const m=t.onImageReady(S=>{if(e._screenshot.size===null)e.notifyStartCaptureImage=p,m.unsubscribe(),e._screenshot.placeHolder&&(e.size=e._screenshot.originalSize,t.modified(),e._screenshot.cameras&&e._screenshot.cameras.forEach(v=>{let{restoreParamsFn:g,arg:x}=v;return g(x)}),t.traverseAllPasses(),e.el.removeChild(e._screenshot.placeHolder),e._screenshot.placeHolder.remove(),e._screenshot=null),d(S);else{const v=document.createElement("img");if(v.style=gE,v.src=S,e._screenshot.placeHolder=e.el.appendChild(v),e.canvas.style.display="none",e._screenshot.originalSize=e.size,e.size=e._screenshot.size,e._screenshot.size=null,t.modified(),f){const g=f!==!0;e._screenshot.cameras=e.renderable.getRenderers().map(x=>{const C=x.getActiveCamera(),T=C.get("focalPoint","position","parallelScale");return{resetCameraArgs:g?{renderer:x}:void 0,resetCameraFn:g?f:x.resetCamera,restoreParamsFn:C.set,arg:JSON.parse(JSON.stringify(T))}}),e._screenshot.cameras.forEach(x=>{let{resetCameraFn:C,resetCameraArgs:T}=x;return C(T)})}t.traverseAllPasses()}})})};let s;t.getHardwareMaximumLineWidth=()=>{if(s!=null)return s;const o=t.get3DContext(),f=o.getParameter(o.ALIASED_LINE_WIDTH_RANGE);return s=f[1],f[1]},t.getGLInformations=()=>{if(e._glInformation)return e._glInformation;const o=t.get3DContext(),f=o.getExtension("OES_texture_float"),l=o.getExtension("OES_texture_half_float"),h=o.getExtension("WEBGL_debug_renderer_info"),p=o.getExtension("WEBGL_draw_buffers"),d=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),y=[["Max Vertex Attributes","MAX_VERTEX_ATTRIBS",o.getParameter(o.MAX_VERTEX_ATTRIBS)],["Max Varying Vectors","MAX_VARYING_VECTORS",o.getParameter(o.MAX_VARYING_VECTORS)],["Max Vertex Uniform Vectors","MAX_VERTEX_UNIFORM_VECTORS",o.getParameter(o.MAX_VERTEX_UNIFORM_VECTORS)],["Max Fragment Uniform Vectors","MAX_FRAGMENT_UNIFORM_VECTORS",o.getParameter(o.MAX_FRAGMENT_UNIFORM_VECTORS)],["Max Fragment Texture Image Units","MAX_TEXTURE_IMAGE_UNITS",o.getParameter(o.MAX_TEXTURE_IMAGE_UNITS)],["Max Vertex Texture Image Units","MAX_VERTEX_TEXTURE_IMAGE_UNITS",o.getParameter(o.MAX_VERTEX_TEXTURE_IMAGE_UNITS)],["Max Combined Texture Image Units","MAX_COMBINED_TEXTURE_IMAGE_UNITS",o.getParameter(o.MAX_COMBINED_TEXTURE_IMAGE_UNITS)],["Max 2D Texture Size","MAX_TEXTURE_SIZE",o.getParameter(o.MAX_TEXTURE_SIZE)],["Max Cube Texture Size","MAX_CUBE_MAP_TEXTURE_SIZE",o.getParameter(o.MAX_CUBE_MAP_TEXTURE_SIZE)],["Max Texture Anisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT",d&&o.getParameter(d.MAX_TEXTURE_MAX_ANISOTROPY_EXT)],["Point Size Range","ALIASED_POINT_SIZE_RANGE",o.getParameter(o.ALIASED_POINT_SIZE_RANGE).join(" - ")],["Line Width Range","ALIASED_LINE_WIDTH_RANGE",o.getParameter(o.ALIASED_LINE_WIDTH_RANGE).join(" - ")],["Max Viewport Dimensions","MAX_VIEWPORT_DIMS",o.getParameter(o.MAX_VIEWPORT_DIMS).join(" - ")],["Max Renderbuffer Size","MAX_RENDERBUFFER_SIZE",o.getParameter(o.MAX_RENDERBUFFER_SIZE)],["Framebuffer Red Bits","RED_BITS",o.getParameter(o.RED_BITS)],["Framebuffer Green Bits","GREEN_BITS",o.getParameter(o.GREEN_BITS)],["Framebuffer Blue Bits","BLUE_BITS",o.getParameter(o.BLUE_BITS)],["Framebuffer Alpha Bits","ALPHA_BITS",o.getParameter(o.ALPHA_BITS)],["Framebuffer Depth Bits","DEPTH_BITS",o.getParameter(o.DEPTH_BITS)],["Framebuffer Stencil Bits","STENCIL_BITS",o.getParameter(o.STENCIL_BITS)],["Framebuffer Subpixel Bits","SUBPIXEL_BITS",o.getParameter(o.SUBPIXEL_BITS)],["MSAA Samples","SAMPLES",o.getParameter(o.SAMPLES)],["MSAA Sample Buffers","SAMPLE_BUFFERS",o.getParameter(o.SAMPLE_BUFFERS)],["Supported Formats for UByte Render Targets     ","UNSIGNED_BYTE RENDER TARGET FORMATS",[f&&bt(o,o.RGBA,o.UNSIGNED_BYTE)?"RGBA":"",f&&bt(o,o.RGB,o.UNSIGNED_BYTE)?"RGB":"",f&&bt(o,o.LUMINANCE,o.UNSIGNED_BYTE)?"LUMINANCE":"",f&&bt(o,o.ALPHA,o.UNSIGNED_BYTE)?"ALPHA":"",f&&bt(o,o.LUMINANCE_ALPHA,o.UNSIGNED_BYTE)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Half Float Render Targets","HALF FLOAT RENDER TARGET FORMATS",[l&&bt(o,o.RGBA,l.HALF_FLOAT_OES)?"RGBA":"",l&&bt(o,o.RGB,l.HALF_FLOAT_OES)?"RGB":"",l&&bt(o,o.LUMINANCE,l.HALF_FLOAT_OES)?"LUMINANCE":"",l&&bt(o,o.ALPHA,l.HALF_FLOAT_OES)?"ALPHA":"",l&&bt(o,o.LUMINANCE_ALPHA,l.HALF_FLOAT_OES)?"LUMINANCE_ALPHA":""].join(" ")],["Supported Formats for Full Float Render Targets","FLOAT RENDER TARGET FORMATS",[f&&bt(o,o.RGBA,o.FLOAT)?"RGBA":"",f&&bt(o,o.RGB,o.FLOAT)?"RGB":"",f&&bt(o,o.LUMINANCE,o.FLOAT)?"LUMINANCE":"",f&&bt(o,o.ALPHA,o.FLOAT)?"ALPHA":"",f&&bt(o,o.LUMINANCE_ALPHA,o.FLOAT)?"LUMINANCE_ALPHA":""].join(" ")],["Max Multiple Render Targets Buffers","MAX_DRAW_BUFFERS_WEBGL",p?o.getParameter(p.MAX_DRAW_BUFFERS_WEBGL):0],["High Float Precision in Vertex Shader","HIGH_FLOAT VERTEX_SHADER",[o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_FLOAT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Vertex Shader","MEDIUM_FLOAT VERTEX_SHADER",[o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_FLOAT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Vertex Shader","LOW_FLOAT VERTEX_SHADER",[o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_FLOAT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Float Precision in Fragment Shader","HIGH_FLOAT FRAGMENT_SHADER",[o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_FLOAT).rangeMax,"</sup>)"].join("")],["Medium Float Precision in Fragment Shader","MEDIUM_FLOAT FRAGMENT_SHADER",[o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_FLOAT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_FLOAT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_FLOAT).rangeMax,"</sup>)"].join("")],["Low Float Precision in Fragment Shader","LOW_FLOAT FRAGMENT_SHADER",[o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_FLOAT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_FLOAT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_FLOAT).rangeMax,"</sup>)"].join("")],["High Int Precision in Vertex Shader","HIGH_INT VERTEX_SHADER",[o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_INT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_INT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Vertex Shader","MEDIUM_INT VERTEX_SHADER",[o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_INT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Vertex Shader","LOW_INT VERTEX_SHADER",[o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_INT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_INT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.VERTEX_SHADER,o.LOW_INT).rangeMax,"</sup>)"].join("")],["High Int Precision in Fragment Shader","HIGH_INT FRAGMENT_SHADER",[o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_INT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_INT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.HIGH_INT).rangeMax,"</sup>)"].join("")],["Medium Int Precision in Fragment Shader","MEDIUM_INT FRAGMENT_SHADER",[o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_INT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_INT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.MEDIUM_INT).rangeMax,"</sup>)"].join("")],["Low Int Precision in Fragment Shader","LOW_INT FRAGMENT_SHADER",[o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_INT).precision," (-2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_INT).rangeMin,"</sup> - 2<sup>",o.getShaderPrecisionFormat(o.FRAGMENT_SHADER,o.LOW_INT).rangeMax,"</sup>)"].join("")],["Supported Extensions","EXTENSIONS",o.getSupportedExtensions().join("<br/>					    ")],["WebGL Renderer","RENDERER",o.getParameter(o.RENDERER)],["WebGL Vendor","VENDOR",o.getParameter(o.VENDOR)],["WebGL Version","VERSION",o.getParameter(o.VERSION)],["Shading Language Version","SHADING_LANGUAGE_VERSION",o.getParameter(o.SHADING_LANGUAGE_VERSION)],["Unmasked Renderer","UNMASKED_RENDERER",h&&o.getParameter(h.UNMASKED_RENDERER_WEBGL)],["Unmasked Vendor","UNMASKED_VENDOR",h&&o.getParameter(h.UNMASKED_VENDOR_WEBGL)],["WebGL Version","WEBGL_VERSION",e.webgl2?2:1]],m={};for(;y.length;){const[S,v,g]=y.pop();v&&(m[v]={label:S,value:g})}return e._glInformation=m,m},t.traverseAllPasses=()=>{if(e.renderPasses)for(let o=0;o<e.renderPasses.length;++o)e.renderPasses[o].traverse(t,null);e.notifyStartCaptureImage&&i()},t.disableCullFace=()=>{e.cullFaceEnabled&&(e.context.disable(e.context.CULL_FACE),e.cullFaceEnabled=!1)},t.enableCullFace=()=>{e.cullFaceEnabled||(e.context.enable(e.context.CULL_FACE),e.cullFaceEnabled=!0)},t.setViewStream=o=>{if(e.viewStream===o)return!1;if(e.subscription&&(e.subscription.unsubscribe(),e.subscription=null),e.viewStream=o,e.viewStream){const f=e.renderable.getRenderers()[0];f.getBackgroundByReference()[3]=0,t.setUseBackgroundImage(!0),e.subscription=e.viewStream.onImageReady(l=>t.setBackgroundImage(l.image)),e.viewStream.setSize(e.size[0],e.size[1]),e.viewStream.invalidateCache(),e.viewStream.render(),t.modified()}return!0},t.createSelector=()=>{const o=Fa.newInstance();return o.setOpenGLRenderWindow(t),o};function u(){e.canvas.removeEventListener("webglcontextlost",cg),e.canvas.removeEventListener("webglcontextrestored",t.restoreContext)}t.delete=k.chain(u,t.delete,t.setViewStream,vE),t.setActiveFramebuffer=o=>{e.activeFramebuffer=o};const c=t.setSize;t.setSize=(o,f)=>{const l=c(o,f);return l&&t.invokeWindowResizeEvent({width:o,height:f}),l},t.getGraphicsResourceForObject=o=>{if(!o)return null;const f=e._graphicsResources.get(o),l=e._graphicsResourceHash.get(o);return{vtkObj:f,hash:l}},t.setGraphicsResourceForObject=(o,f,l)=>{o&&(e._graphicsResources.set(o,f),e._graphicsResourceHash.set(o,l))},t.getGraphicsMemoryInfo=()=>{let o=0;return e._graphicsResources.forEach((f,l)=>{o+=f.getAllocatedGPUMemoryInBytes()}),o},t.releaseGraphicsResourcesForObject=o=>{var f;return o?((f=e._graphicsResources.get(o))==null||f.releaseGraphicsResources(t),e._graphicsResources.delete(o)&&e._graphicsResourceHash.delete(o)):!1},t.releaseGraphicsResources=()=>{e.shaderCache!==null&&e.shaderCache.releaseGraphicsResources(t),e._graphicsResources.forEach((o,f)=>{o.releaseGraphicsResources(t)}),e._graphicsResources.clear(),e._graphicsResourceHash.clear(),e.textureUnitManager!==null&&e.textureUnitManager.freeAll(),e.renderable.getRenderersByReference().forEach(o=>{const f=t.getViewNodeFor(o);f==null||f.releaseGraphicsResources()})}}const SE={cullFaceEnabled:!1,shaderCache:null,initialized:!1,context:null,canvas:null,cursorVisibility:!0,cursor:"pointer",textureUnitManager:null,textureResourceIds:null,containerSize:null,renderPasses:[],notifyStartCaptureImage:!1,webgl2:!1,defaultToWebgl2:!0,activeFramebuffer:null,imageFormat:"image/png",useOffScreen:!1,useBackgroundImage:!1};function lg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,SE,a),fE.extend(t,e,a),e.canvas=document.createElement("canvas"),e.canvas.style.width="100%",dE(),e.selector||(e.selector=Fa.newInstance(),e.selector.setOpenGLRenderWindow(t)),e.bgImage=new Image,e.bgImage.style.position="absolute",e.bgImage.style.left="0",e.bgImage.style.top="0",e.bgImage.style.width="100%",e.bgImage.style.height="100%",e.bgImage.style.zIndex="-1",e._textureResourceIds=new Map,e._graphicsResources=new Map,e._graphicsResourceHash=new Map,e._glInformation=null,e.myFactory=q2.newInstance(),e.myFactory.registerOverride("vtkRenderWindow",du),e.shaderCache=aE.newInstance(),e.shaderCache.setOpenGLRenderWindow(t),e.renderPasses[0]=Z_.newInstance(),k.event(t,e,"imageReady"),k.get(t,e,["shaderCache","textureUnitManager","webgl2","useBackgroundImage","activeFramebuffer"]),k.setGet(t,e,["initialized","context","canvas","renderPasses","notifyStartCaptureImage","defaultToWebgl2","cursor","useOffScreen"]),k.setGetArray(t,e,["size"],2),k.event(t,e,"windowResizeEvent"),xE(t,e)}const du=k.newInstance(lg,"vtkOpenGLRenderWindow");up("WebGL",du);var fg={newInstance:du,extend:lg,pushMonitorGLContextCount:yE,popMonitorGLContextCount:mE};function CE(t,e){e.classHierarchy.push("vtkCompositeCameraManipulator"),t.computeDisplayCenter=(a,n)=>{const r=a.computeWorldToDisplay(n,e.center[0],e.center[1],e.center[2]);e.displayCenter[0]=r[0],e.displayCenter[1]=r[1]}}const TE={center:[0,0,0],rotationFactor:1,displayCenter:[0,0]};function wE(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,TE,a),k.setGet(t,e,["rotationFactor"]),k.setGetArray(t,e,["displayCenter"],2),k.setGetArray(t,e,["center"],3),CE(t,e)}var Qr={extend:wE};function _E(t,e){e.classHierarchy.push("vtkMouseCameraTrackballRotateManipulator");const a=new Float64Array(3),n=new Float64Array(3),r=new Float64Array(3),i=new Float64Array(16),s=new Float64Array(3),u=new Float64Array(3),c=new Float64Array(3);t.onButtonDown=(o,f,l)=>{e.previousPosition=l},t.onMouseMove=(o,f,l)=>{if(!l)return;const h=f.getActiveCamera(),p=h.getPosition(),d=h.getFocalPoint();Se(i);const{center:y,rotationFactor:m}=e;e.useFocalPointAsCenterOfRotation&&(y[0]=d[0],y[1]=d[1],y[2]=d[2]);const S=e.previousPosition.x-l.x,v=e.previousPosition.y-l.y,g=o.getView().getViewportSize(f),x=h.getViewUp();if(e.useWorldUpVec){const C=new Float64Array(3);Nd(C,e.worldUpVec),_s(C,we(p,e.worldUpVec)/we(e.worldUpVec,e.worldUpVec)),Ca(y,C,C),Ze(i,i,C),mt(i,i,qe(360*S/g[0]*m),e.worldUpVec),C[0]=-C[0],C[1]=-C[1],C[2]=-C[2],Ze(i,i,C),Ze(i,i,y)}else Ze(i,i,y),mt(i,i,qe(360*S/g[0]*m),x);ut(h.getDirectionOfProjection(),x,s),mt(i,i,qe(-360*v/g[1]*m),s),u[0]=-y[0],u[1]=-y[1],u[2]=-y[2],Ze(i,i,u),Te(a,p,i),Te(n,d,i),c[0]=x[0]+p[0],c[1]=x[1]+p[1],c[2]=x[2]+p[2],Te(r,c,i),h.setPosition(a[0],a[1],a[2]),h.setFocalPoint(n[0],n[1],n[2]),h.setViewUp(r[0]-a[0],r[1]-a[1],r[2]-a[2]),h.orthogonalizeViewUp(),f.resetCameraClippingRange(),o.getLightFollowCamera()&&f.updateLightsGeometryToFollowCamera(),e.previousPosition=l}}const EE={useWorldUpVec:!1,worldUpVec:[0,1,0],useFocalPointAsCenterOfRotation:!1};function hg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,EE,a),k.obj(t,e),Jr.extend(t,e,a),Qr.extend(t,e,a),k.setGet(t,e,["useWorldUpVec"]),k.setGetArray(t,e,["worldUpVec"],3),k.setGet(t,e,["useFocalPointAsCenterOfRotation"]),_E(t,e)}var pg={newInstance:k.newInstance(hg,"vtkMouseCameraTrackballRotateManipulator"),extend:hg};function DE(t,e){e.classHierarchy.push("vtkMouseCameraTrackballRollManipulator");const a=new Float64Array(3),n=new Float64Array(3),r=new Float64Array(3),i=new Float64Array(16),s=new Float64Array(3),u=new Float64Array(3),c=new Float64Array(3);t.onButtonDown=(o,f,l)=>{e.previousPosition=l},t.onMouseMove=(o,f,l)=>{if(!l)return;const h=f.getActiveCamera(),p=h.getPosition(),d=h.getFocalPoint(),y=h.getViewUp();a[0]=d[0]-p[0],a[1]=d[1]-p[1],a[2]=d[2]-p[2],t.computeDisplayCenter(o.getInteractorStyle(),f);const m=e.previousPosition.x-e.displayCenter[0],S=l.x-e.displayCenter[0],v=e.previousPosition.y-e.displayCenter[1],g=l.y-e.displayCenter[1];if(S===0&&g===0||m===0&&v===0)return;const x=ma((m*g-v*S)/(Math.sqrt(m*m+v*v)*Math.sqrt(S*S+g*g))),{center:C}=e;Se(i),r[0]=-C[0],r[1]=-C[1],r[2]=-C[2],Ze(i,i,C),mt(i,i,qe(x),a),Ze(i,i,r),Te(s,p,i),Te(u,d,i),n[0]=y[0]+p[0],n[1]=y[1]+p[1],n[2]=y[2]+p[2],Te(c,n,i),h.setPosition(s[0],s[1],s[2]),h.setFocalPoint(u[0],u[1],u[2]),h.setViewUp(c[0]-s[0],c[1]-s[1],c[2]-s[2]),h.orthogonalizeViewUp(),f.resetCameraClippingRange(),o.getLightFollowCamera()&&f.updateLightsGeometryToFollowCamera(),e.previousPosition=l}}const bE={};function gg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,bE,a),k.obj(t,e),Qr.extend(t,e,a),Jr.extend(t,e,a),DE(t,e)}var dg={newInstance:k.newInstance(gg,"vtkMouseCameraTrackballRollManipulator"),extend:gg};function OE(t,e){return t<e?e:t}function vg(t){return t*t}function NE(t,e){e.classHierarchy.push("vtkMouseCameraTrackballMultiRotateManipulator");const a=pg.newInstance(),n=dg.newInstance();let r=null;t.onButtonDown=(i,s,u)=>{const c=i.getView().getViewportSize(s),o=[.5*c[0],.5*c[1]],f=.9*OE(o[0],o[1]),l=vg(o[0]-u.x)+vg(o[1]-u.y);f*f>l?r=a:r=n,r.setButton(t.getButton()),r.setShift(t.getShift()),r.setControl(t.getControl()),r.setCenter(t.getCenter()),r.onButtonDown(i,u)},t.onButtonUp=i=>{r&&r.onButtonUp(i)},t.onMouseMove=(i,s,u)=>{r&&r.onMouseMove(i,s,u)}}const ME={};function yg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,ME,a),k.obj(t,e),Jr.extend(t,e,a),Qr.extend(t,e,a),NE(t,e)}var RE={newInstance:k.newInstance(yg,"vtkMouseCameraTrackballMultiRotateManipulator"),extend:yg};function LE(t,e){e.classHierarchy.push("vtkMouseCameraTrackballPanManipulator"),t.onButtonDown=(a,n,r)=>{e.previousPosition=r},t.onMouseMove=(a,n,r)=>{if(!r)return;const i=r,s=e.previousPosition;e.previousPosition=r;const u=n.getActiveCamera(),c=u.getPosition(),o=u.getFocalPoint();if(u.getParallelProjection()){u.orthogonalizeViewUp();const f=u.getViewUp(),l=u.getViewPlaneNormal(),h=[0,0,0];ut(l,f,h);const p=a.getView().getViewportSize(n)[1];let d=(i.x-s.x)/p,y=(s.y-i.y)/p;const m=u.getParallelScale();d*=m*2,y*=m*2;let S=h[0]*d+f[0]*y;c[0]+=S,o[0]+=S,S=h[1]*d+f[1]*y,c[1]+=S,o[1]+=S,S=h[2]*d+f[2]*y,c[2]+=S,o[2]+=S,u.setPosition(c[0],c[1],c[2]),u.setFocalPoint(o[0],o[1],o[2])}else{const{center:f}=e,l=a.getInteractorStyle(),h=l.computeWorldToDisplay(n,f[0],f[1],f[2])[2],p=l.computeDisplayToWorld(n,i.x,i.y,h),d=l.computeDisplayToWorld(n,s.x,s.y,h),y=[c[0]+(d[0]-p[0]),c[1]+(d[1]-p[1]),c[2]+(d[2]-p[2])],m=[o[0]+(d[0]-p[0]),o[1]+(d[1]-p[1]),o[2]+(d[2]-p[2])];u.setPosition(y[0],y[1],y[2]),u.setFocalPoint(m[0],m[1],m[2])}n.resetCameraClippingRange(),a.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const kE={};function mg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,kE,a),k.obj(t,e),Qr.extend(t,e,a),Jr.extend(t,e,a),LE(t,e)}var FE={newInstance:k.newInstance(mg,"vtkMouseCameraTrackballPanManipulator"),extend:mg};function AE(t,e){e.classHierarchy.push("vtkMouseCameraTrackballZoomManipulator"),t.onButtonDown=(a,n,r)=>{e.previousPosition=r;const i=a.getView().getViewportSize(n),s=n.getActiveCamera(),u=e.flipDirection?-1:1;if(s.getParallelProjection())e.zoomScale=1.5/i[1]*u;else{const c=s.getClippingRange();e.zoomScale=1.5*(c[1]/i[1])*u}},t.onMouseMove=(a,n,r)=>{if(!r)return;const i=e.previousPosition.y-r.y,s=n.getActiveCamera();if(s.getParallelProjection()){const u=i*e.zoomScale;s.setParallelScale((1-u)*s.getParallelScale())}else{const u=s.getPosition(),c=s.getFocalPoint(),o=s.getDirectionOfProjection(),f=i*e.zoomScale;let l=f*o[0];u[0]+=l,c[0]+=l,l=f*o[1],u[1]+=l,c[1]+=l,l=f*o[2],u[2]+=l,c[2]+=l,s.getFreezeFocalPoint()||s.setFocalPoint(c[0],c[1],c[2]),s.setPosition(u[0],u[1],u[2]),n.resetCameraClippingRange()}a.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),e.previousPosition=r},t.onScroll=(a,n,r)=>{if(!r)return;const i=n.getActiveCamera(),s=1-r/10;i.getParallelProjection()?i.setParallelScale(i.getParallelScale()/s):(i.dolly(s),n.resetCameraClippingRange()),a.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera()}}const VE={zoomScale:0,flipDirection:!1};function xg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,VE,a),k.obj(t,e),Jr.extend(t,e,a),Qr.extend(t,e,a),k.setGet(t,e,["flipDirection"]),AE(t,e)}var Sg={newInstance:k.newInstance(xg,"vtkMouseCameraTrackballZoomManipulator"),extend:xg};function BE(t,e){e.classHierarchy.push("vtkMouseCameraTrackballZoomToMouseManipulator");const a=t.onButtonDown;t.onButtonDown=(n,r,i)=>{a(n,r,i),e.zoomPosition=i},t.onMouseMove=(n,r,i)=>{if(!i)return;const u=(e.previousPosition.y-i.y)*e.zoomScale;Zr.dollyToPosition(1-u,e.zoomPosition,r,n),n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera(),e.previousPosition=i},t.onScroll=(n,r,i,s)=>{if(!i||!s)return;const u=1-i*.1;Zr.dollyToPosition(u,s,r,n),n.getLightFollowCamera()&&r.updateLightsGeometryToFollowCamera()}}const UE={zoomPosition:null};function Cg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,UE,a),Sg.extend(t,e,a),BE(t,e)}var GE={newInstance:k.newInstance(Cg,"vtkMouseCameraTrackballZoomToMouseManipulator"),extend:Cg};function IE(t,e){e.classHierarchy.push("vtkCompositeGestureManipulator"),t.startInteraction=()=>{},t.endInteraction=()=>{},t.onStartPinch=(a,n)=>{},t.onStartRotate=(a,n)=>{},t.onStartPan=(a,n)=>{},t.onPinch=(a,n,r)=>{},t.onRotate=(a,n,r)=>{},t.onPan=(a,n,r)=>{},t.onEndPinch=a=>{},t.onEndRotate=a=>{},t.onEndPan=a=>{},t.isPinchEnabled=()=>e.pinchEnabled,t.isPanEnabled=()=>e.panEnabled,t.isRotateEnabled=()=>e.rotateEnabled}const PE={pinchEnabled:!0,panEnabled:!0,rotateEnabled:!0};function zE(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,PE,a),k.set(t,e,["pinchEnabled","panEnabled","rotateEnabled"]),k.setGet(t,e,["interactorStyle"]),IE(t,e)}var jE={extend:zE};function WE(t,e){e.classHierarchy.push("vtkGestureCameraManipulator"),t.onStartPinch=(a,n)=>{e.previousScale=n},t.onStartRotate=(a,n)=>{e.previousRotation=n},t.onStartPan=(a,n)=>{e.previousTranslation=n},t.onPinch=(a,n,r)=>{Zr.dollyByFactor(a,n,r/e.previousScale),e.previousScale=r},t.onPan=(a,n,r)=>{const i=n.getActiveCamera(),s=a.getInteractorStyle();let u=i.getFocalPoint();u=s.computeWorldToDisplay(n,u[0],u[1],u[2]);const c=u[2],o=r,f=e.previousTranslation,l=s.computeDisplayToWorld(n,u[0]+o[0]-f[0],u[1]+o[1]-f[1],c),h=s.computeDisplayToWorld(n,u[0],u[1],c),p=[];p[0]=h[0]-l[0],p[1]=h[1]-l[1],p[2]=h[2]-l[2],u=i.getFocalPoint();const d=i.getPosition();i.setFocalPoint(p[0]+u[0],p[1]+u[1],p[2]+u[2]),i.setPosition(p[0]+d[0],p[1]+d[1],p[2]+d[2]),a.getLightFollowCamera()&&n.updateLightsGeometryToFollowCamera(),i.orthogonalizeViewUp(),e.previousTranslation=r},t.onRotate=(a,n,r)=>{const i=n.getActiveCamera();i.roll(r-e.previousRotation),i.orthogonalizeViewUp(),e.previousRotation=r}}const $E={};function Tg(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.assign(e,$E,a),k.obj(t,e),jE.extend(t,e,a),Qr.extend(t,e,a),WE(t,e)}var HE={newInstance:k.newInstance(Tg,"vtkGestureCameraManipulator"),extend:Tg};const wg=["focalPoint","parallelProjection","parallelScale","position","viewAngle","viewUp"],KE={None:null,Pan:FE,Zoom:Sg,Roll:dg,Rotate:pg,MultiRotate:RE,ZoomToMouse:GE,Select:ip};function _g(t,e,a){t.removeAllMouseManipulators(),e.forEach(n=>{const r=KE[n.action];if(r){const{button:i,shift:s,control:u,alt:c,scrollEnabled:o,dragEnabled:f}=n,l=r.newInstance();l.setButton(i),l.setShift(!!s),l.setControl(!!u),l.setAlt(!!c),o!==void 0&&l.setScrollEnabled(o),f!==void 0&&l.setDragEnabled(f),t.addMouseManipulator(l),l.onBoxSelectChange&&a&&l.onBoxSelectChange(a)}}),t.addGestureManipulator(HE.newInstance())}class XE{constructor(e){this.readyRef=e,this.count=0,this.start=()=>{this.count++,this.readyRef.value&&(this.readyRef.value=!1)},this.stop=()=>{this.count--,this.count===0&&(this.readyRef.value=!0)},this.reset=()=>this.count=0}async wrap(e){this.start();try{await e}finally{setTimeout(this.stop,1)}return e}}class qE{constructor(e,a,n,r,i){this.vueCtx=i,this.pickingModes=a,this.container=null,this.rwId=0,this.mtime=0,this.busy=new XE(i.ready),this.renderer=null,this.activeCamera=null,this.subscriptions=[],this.ctx=Qp.getSynchronizerContext(e),this.ctx.setFetchArrayFunction((c,o=!0)=>(this.render(),this.busy.wrap(n(c,o)))),this.renderWindow=Qp.newInstance({synchronizerContext:this.ctx}),this.openglRenderWindow=fg.newInstance({cursor:"default"}),this.renderWindow.addView(this.openglRenderWindow),this.interactor=Co.newInstance(),this.interactor.setView(this.openglRenderWindow),this.interactor.initialize(),r.forEach(c=>{const o=`on${c}`;this.subscriptions.push(this.interactor[o](f=>this.vueCtx.emit(c,f)))}),this.style=Zr.newInstance(),this.interactor.setInteractorStyle(this.style),this.render=ln(()=>{this.renderer&&this.renderer.resetCameraClippingRange(),this.renderWindow.render()},0),this.selector=Fa.newInstance({captureZValues:!0}),this.selector.setFieldAssociation(Xs.FIELD_ASSOCIATION_POINTS);const s=({x:c,y:o})=>{if(!this.pickingModes.includes("click"))return;const f=this.pick(c,o,c,o);this.vueCtx.emit("click",f[0])};this.debouncedHover=ln(({x:c,y:o})=>{if(!this.pickingModes.includes("hover"))return;const f=this.pick(c,o,c,o);this.lastSelection.length===0&&f.length===0||(this.lastSelection=f,this.vueCtx.emit("hover",f[0]))},10);const u=({selection:c})=>{if(!this.pickingModes.includes("select"))return;const[o,f,l,h]=c,p=this.pick(o,l,f,h);this.vueCtx.emit("select",p)};this.onClick=c=>s(this.getScreenEventPositionFor(c)),this.onMouseMove=c=>this.debouncedHover(this.getScreenEventPositionFor(c)),this.lastSelection=[],this.onBoxSelectChange=u}setContainer(e){this.container=e,this.openglRenderWindow.setContainer(e),this.interactor.bindEvents(e),this.resize(),this.resetCamera()}setSynchronizedViewId(e){const a=this.renderWindow.getRenderersByReference();for(;a.length;)a.pop();this.renderWindow.setSynchronizedViewId(e),this.rwId=e}async updateViewState(e){this.renderWindow.getInteractor().setEnableRender(!1),this.vueCtx.emit("beforeSceneLoaded"),this.mtime=Math.max(this.mtime,e.mtime)+1,this.busy.reset(),this.busy.start(),e.mtime=this.mtime;const a=this.renderWindow.synchronize(e);a&&(this.renderWindow.getRenderersByReference().length&&([this.renderer]=this.renderWindow.getRenderersByReference(),this.activeCamera=this.renderer.getActiveCamera()),e.extra&&e.extra.camera&&this.activeCamera&&this.ctx.registerInstance(e.extra.camera,this.activeCamera)),await a&&(e.extra&&(e.extra.camera&&(this.remoteCamera=this.ctx.getInstance(e.extra.camera),this.remoteCamera&&this.style.setCenterOfRotation(this.remoteCamera.getFocalPoint())),e.extra.centerOfRotation&&this.style.setCenterOfRotation(e.extra.centerOfRotation),e.extra.resetCamera&&this.resetCamera()),this.vueCtx.nextTick(this.render),this.vueCtx.emit("viewStateChange",e),this.busy.stop(),this.vueCtx.emit("afterSceneLoaded"),this.renderWindow.getInteractor().setEnableRender(!0))}resize(){if(this.container){const e=window.devicePixelRatio||1,{width:a,height:n}=this.container.getBoundingClientRect();this.openglRenderWindow.setSize(Math.floor(Math.max(a*e,10)),Math.floor(Math.max(n*e,10))),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resize")}}resetCamera(){this.renderer&&(this.renderer.resetCamera(),this.style.setCenterOfRotation(this.renderer.getActiveCamera().getFocalPoint()),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resetCamera"))}getCamera(){const e=this.style.getCenterOfRotation();return this.activeCamera=this.interactor.getCurrentRenderer().getActiveCamera(),{centerOfRotation:e,...this.activeCamera.get("position","focalPoint","viewUp","parallelProjection","parallelScale","viewAngle")}}setCamera(e){if(this.activeCamera){const a={};wg.forEach(n=>{e[n]&&(a[n]=e[n])}),this.activeCamera.set(a),e.centerOfRotation&&this.style.setCenterOfRotation(e.centerOfRotation),this.vueCtx.nextTick(this.render)}}updateStyle(e,a){_g(this.style,e,a)}captureImage(e,a){return this.renderWindow.captureImages(e,a)[0]}getScreenEventPositionFor(e){if(!this.container)return;const a=this.container.getBoundingClientRect(),[n,r]=this.openglRenderWindow.getSize(),i=n/a.width,s=r/a.height;return{x:i*(e.clientX-a.left),y:s*(a.height-e.clientY+a.top),z:0}}pick(e,a,n,r){if(this.selector.attach(this.openglRenderWindow,this.renderer),!!this.renderer){if(this.selector.setArea(e,a,n,r),this.previousSelectedData=null,this.selector.captureBuffers()){if(this.selections=this.selector.generateSelection(e,a,n,r)||[],e!==n||a!==r){const s=[Array.from(this.openglRenderWindow.displayToWorld(e,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,r,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,r,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,a,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,r,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,r,1,this.renderer))],u=[];return this.selections.forEach(c=>{const{prop:o}=c.getProperties(),{remoteId:f}=o.get("remoteId");f&&u.push(f)}),{frustrum:s,remoteIds:u}}const i=[Array.from(this.openglRenderWindow.displayToWorld(e,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,1,this.renderer))];return this.selections.map(s=>{const{prop:u,compositeID:c,displayPosition:o}=s.getProperties();return{mode:"local",worldPosition:Array.from(this.openglRenderWindow.displayToWorld(o[0],o[1],o[2],this.renderer)),displayPosition:o,compositeID:c,...u.get("remoteId"),ray:i}})}return[]}}beforeDelete(){for(this.render.cancel();this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.interactor.unbindEvents(),this.openglRenderWindow.setContainer(null),this.renderWindow.removeRenderer(this.renderer),this.renderWindow.removeView(this.openglRenderWindow),this.interactor.delete(),this.interactor=null,this.renderer=null,this.renderWindow.delete(),this.renderWindow=null,this.openglRenderWindow.delete(),this.openglRenderWindow=null}}function Eg(t){let e=!1;function a(){e=!0}function n(){e=!1}function r(i){if(e)switch(i.code){case"KeyR":t.resetCamera();break}}return{onEnter:a,onLeave:n,onKeyUp:r}}class YE{constructor(e,a,n,r,i){this.vueCtx=i,this.pickingModes=a,this.renderWindow=Y0.newInstance(),this.renderer=yp.newInstance({background:e}),this.renderWindow.addRenderer(this.renderer),this.activeCamera=this.renderer.getActiveCamera(),this.activeCamera.set(this.camera),this.openglRenderWindow=fg.newInstance({cursor:"default"}),this.renderWindow.addView(this.openglRenderWindow),this.interactor=Co.newInstance(),this.interactor.setView(this.openglRenderWindow),this.interactor.initialize(),this.subscriptions=[],r.forEach(o=>{const f=`on${o}`;this.subscriptions.push(this.interactor[f](l=>this.vueCtx.emit(o,l)))}),this.style=Zr.newInstance(),this.interactor.setInteractorStyle(this.style),this.selector=Fa.newInstance({captureZValues:!0}),this.selector.setFieldAssociation(Xs.FIELD_ASSOCIATION_POINTS),this.selector.attach(this.openglRenderWindow,this.renderer),this.render=ln(()=>{this.renderer.resetCameraClippingRange(),this.renderWindow.render()},1),this.cubeAxes=f0.newInstance({dataBounds:[-1,1,-1,1,-1,1],visibility:!1}),this.cubeAxes.setVisibility(!1),this.cubeAxes.getActors().forEach(({setVisibility:o})=>o(!1)),this.cubeAxes.setCamera(this.activeCamera),this.renderer.addActor(this.cubeAxes);const s=Le.newInstance({bounds:[0,0,0,0,0,0]});this.updateCubeBounds=()=>{s.reset();const{props:o}=this.renderer.get("props");for(let f=0;f<o.length;f++){const l=o[f];l.getVisibility()&&l.getUseBounds()&&l!==this.cubeAxes&&s.addBounds(...l.getBounds())}this.cubeAxes.setDataBounds(s.getBounds())},this.debouncedCubeBounds=ln(this.updateCubeBounds,50),this.subscriptions=[],this.subscriptions.push(this.renderer.onEvent(({type:o,renderer:f})=>{f&&o==="ComputeVisiblePropBoundsEvent"&&this.debouncedCubeBounds()}));const u=({x:o,y:f})=>{if(!this.pickingModes.includes("click"))return;const l=this.pick(o,f,o,f);this.vueCtx.emit("click",l[0])};this.debouncedHover=ln(({x:o,y:f})=>{if(!this.pickingModes.includes("hover"))return;const l=this.pick(o,f,o,f);this.lastSelection.length===0&&l.length===0||(this.lastSelection=l,this.vueCtx.emit("hover",l[0]))},10);const c=({selection:o})=>{if(!this.pickingModes.includes("select"))return;const[f,l,h,p]=o,d=this.pick(f,h,l,p);this.vueCtx.emit("select",d)};this.onClick=o=>u(this.getScreenEventPositionFor(o)),this.onMouseMove=o=>this.debouncedHover(this.getScreenEventPositionFor(o)),this.lastSelection=[],this.onBoxSelectChange=c,this.updateStyle(n)}setContainer(e){this.container=e,this.openglRenderWindow.setContainer(e),this.interactor.bindEvents(e),this.resize(),this.resetCamera(),this.resetCameraTimeout=setTimeout(()=>this.resetCamera(),100)}resize(){if(this.container){const e=window.devicePixelRatio||1,{width:a,height:n}=this.container.getBoundingClientRect();this.openglRenderWindow.setSize(Math.floor(Math.max(a*e,10)),Math.floor(Math.max(n*e,10))),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resize")}}resetCamera(){this.renderer&&(this.renderer.resetCamera(),this.style.setCenterOfRotation(this.renderer.getActiveCamera().getFocalPoint()),this.vueCtx.nextTick(this.render),this.vueCtx.emit("resetCamera"))}getCamera(){const e=this.style.getCenterOfRotation();return this.activeCamera=this.interactor.getCurrentRenderer().getActiveCamera(),{centerOfRotation:e,...this.activeCamera.get("position","focalPoint","viewUp","parallelProjection","parallelScale","viewAngle")}}setCamera(e){if(this.activeCamera){const a={};wg.forEach(n=>{e[n]&&(a[n]=e[n])}),this.activeCamera.set(a),e.centerOfRotation&&this.style.setCenterOfRotation(e.centerOfRotation),this.vueCtx.nextTick(this.render)}}updateStyle(e){_g(this.style,e,this.onBoxSelectChange)}getScreenEventPositionFor(e){if(!this.container)return;const a=this.container.getBoundingClientRect(),[n,r]=this.openglRenderWindow.getSize(),i=n/a.width,s=r/a.height;return{x:i*(e.clientX-a.left),y:s*(a.height-e.clientY+a.top),z:0}}pick(e,a,n,r){if(this.selector.setArea(e,a,n,r),this.previousSelectedData=null,this.selector.captureBuffers()){if(this.selections=this.selector.generateSelection(e,a,n,r)||[],e!==n||a!==r){const s=[Array.from(this.openglRenderWindow.displayToWorld(e,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,r,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,r,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,a,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,r,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(n,r,1,this.renderer))],u=[];return this.selections.forEach(c=>{const{prop:o}=c.getProperties(),{representationId:f}=o.get("representationId");f&&u.push(f)}),{frustrum:s,representationIds:u}}const i=[Array.from(this.openglRenderWindow.displayToWorld(e,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,1,this.renderer))];return this.selections.map(s=>{const{prop:u,compositeID:c,displayPosition:o}=s.getProperties();return{worldPosition:Array.from(this.openglRenderWindow.displayToWorld(o[0],o[1],o[2],this.renderer)),displayPosition:o,compositeID:c,...u.get("representationId"),ray:i}})}return[]}beforeDelete(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.debouncedCubeBounds&&this.debouncedCubeBounds.cancel(),this.debouncedHover&&this.debouncedHover.cancel(),this.render&&this.render.cancel(),clearTimeout(this.resetCameraTimeout),this.interactor.unbindEvents(),this.openglRenderWindow.setContainer(null),this.renderWindow.removeRenderer(this.renderer),this.renderWindow.removeView(this.openglRenderWindow),this.interactor.delete(),this.interactor=null,this.renderer.delete(),this.renderer=null,this.renderWindow.delete(),this.renderWindow=null,this.openglRenderWindow.delete(),this.openglRenderWindow=null}}const vu={props:{camera:{type:Object,default:null},interactorEvents:{type:Array,default:()=>["EndAnimation"]},interactorSettings:{type:Array,default:()=>[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Select",shift:!0},{button:1,action:"Roll",alt:!0,shift:!0}]},wsClient:{type:Object},contextName:{type:String,default:"LocalRenderingContext"},viewState:{type:Object},boxSelection:{type:Boolean,default:!1},pickingModes:{type:Array,default:()=>[]}},emits:["resetCamera","beforeSceneLoaded","afterSceneLoaded","viewStateChange","onReady","resize","onImageCapture","BoxSelection","select","hover","click","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],setup(t,{emit:e}){var _,E,D,b,N,R;const a=se.inject("trame"),n=se.ref(!1),r=se.ref(null);let i=!1;const s=se.computed(()=>t.wsClient||(a==null?void 0:a.client));let u=()=>Promise.resolve(null);const c=(E=(_=s.value)==null?void 0:_.getConnection())==null?void 0:E.getSession();c&&(u=(M,A)=>c.call("viewport.geometry.array.get",[M,A])),(b=(D=s.value.getRemote())==null?void 0:D.SyncView)!=null&&b.getArray&&(u=(R=(N=s.value.getRemote())==null?void 0:N.SyncView)==null?void 0:R.getArray);const o=new qE(t.contextName,t.pickingModes,u,t.interactorEvents,{emit:e,nextTick:se.nextTick,ready:n});o.updateStyle(t.interactorSettings,d);const{onEnter:f,onLeave:l,onKeyUp:h}=Eg(o),p=new ResizeObserver(()=>o.resize());function d({container:M,selection:A}){if(t.pickingModes.includes("select")){o.onBoxSelectChange({selection:A});return}!t.boxSelection||!M||e("BoxSelection",{selection:A,mode:"local",size:o.openglRenderWindow.getSize(),camera:o.getCamera()})}se.watch(n,M=>{e("onReady",M)}),se.watch(()=>t.interactorSettings,()=>o.updateStyle(t.interactorSettings,d)),se.watch(()=>t.pickingModes,()=>{o.pickingModes=t.pickingModes}),se.watch(()=>t.viewState,({id:M})=>{M===i&&(i=!1,o.updateViewState(t.viewState))});let y=null;se.onMounted(()=>{const M=r.value;o.setContainer(M),p.observe(M),document.addEventListener("keyup",h),t.viewState&&(o.rwId=t.viewState.id,o.updateViewState(t.viewState)),y=s.value.getConnection().getSession().subscribe("trame.vtk.delta",([A])=>{A.id===o.rwId&&o.updateViewState(A)})}),se.onBeforeUnmount(()=>{o.beforeDelete(),y&&s.value&&(s.value.getConnection().getSession().unsubscribe(y),y=null),document.removeEventListener("keyup",h),p.disconnect()}),se.provide("view",o);const m=async(M="image/png",A={})=>{const I=await o.captureImage(M,A),U=await(await fetch(I)).blob();return e("onImageCapture",U),U},S=()=>o.resetCamera(),v=()=>o.getCamera(),g=M=>o.setCamera(M),x=M=>{i=M,typeof t.viewState.id=="number"&&(i=Number(i)),o.setSynchronizedViewId(i)},C=()=>o.resize(),{onClick:T,onMouseMove:w}=o;return{vtkContainer:r,onEnter:f,onLeave:l,onClick:T,onMouseMove:w,resetCamera:S,getCamera:v,setCamera:g,setSynchronizedViewId:x,resize:C,captureImage:m}},template:`
        <div
            style="position:relative;width:100%;height:100%;"
            @mouseenter="onEnter"
            @mouseleave="onLeave"
            @click="onClick"
            @mousemove="onMouseMove"
        >
            <div
              ref="vtkContainer"
              style="position:absolute;width:100%;height:100%;overflow:hidden;"
            />
            <slot style="display: none;"></slot>
        </div>
    `},Dg={position:"absolute !important",left:"-20000px"},bg={position:"absolute !important",left:0},Og={VtkAlgorithm:HC,VtkCalculator:YC,VtkCellData:Rh,VtkDataArray:kh,VtkFieldData:ZC,VtkGeometryRepresentation:lT,VtkGlyphRepresentation:gT,VtkMesh:vT,VtkPointData:Hh,VtkPolydata:$h,VtkReader:yT,VtkRemoteLocalView:{components:{VtkRemoteView:sp,VtkSyncView:vu},emits:["resetCamera","beforeSceneLoaded","afterSceneLoaded","viewStateChange","onReady","resize","onLocalImageCapture","onRemoteImageCapture","BoxSelection","click","hover","select","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],props:{mode:{type:String,default:"local"},disableAutoSwitch:{type:Boolean,default:!1},namespace:{type:String,default:""},refPrefix:{type:String,default:"refName"},viewId:{type:String,default:"-1"},wsClient:{type:Object},interactiveRatio:{type:[Number,String]},interactiveQuality:{type:[Number,String]},stillRatio:{type:[Number,String]},stillQuality:{type:[Number,String]},camera:{type:Object,default:null},interactorEvents:{type:Array,default:()=>["EndAnimation"]},interactorSettings:{type:Array,default:()=>[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",shift:!0},{button:1,action:"Zoom",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Roll",alt:!0,shift:!0}]},contextName:{type:String,default:"LocalRenderingContext"},enablePicking:{type:Boolean,default:!1},boxSelection:{type:Boolean,default:!1},viewState:{type:Object},pickingModes:{type:Array,default:()=>[]}},setup(t,{emit:e}){const a=se.inject("trame"),n=se.ref(!1),r=se.ref(null),i=se.ref(null),s=se.computed(()=>t.disableAutoSwitch||n.value),u=se.computed(()=>t.mode==="local"&&s.value),c=se.computed(()=>t.mode==="remote"||!s.value),o=se.computed(()=>u.value?bg:Dg),f=se.computed(()=>c.value?bg:Dg),l=se.computed(()=>t.namespace?`${t.namespace}Camera`:"camera");function h(){return t.mode==="local"&&s.value?r.value.resetCamera():i.value.resetCamera()}function p(){return r.value.getCamera()}function d(x){return r.value.setCamera(x)}async function y(x="image/png",C={}){r.value.captureImage(x,C),i.value.captureImage()}function m(){r.value.resize(),i.value.resize()}se.watch(()=>t.viewId,x=>r.value.setSynchronizedViewId(x));function S(x,C=[],T={}){return a.trigger(x,C,T)}function v(x){n.value=x}const{pickingModes:g}=se.toRefs(t);return{computedLocalRenderingReady:s,onReady:v,localViewRef:r,remoteViewRef:i,trigger:S,getCamera:p,setCamera:d,resize:m,resetCamera:h,cameraKey:l,localStyle:o,remoteStyle:f,emit:e,captureImage:y,pickingModes:g}},template:`
        <div style="position:relative;width:100%;height:100%;z-index:0;">
          <vtk-sync-view
            ref="localViewRef"

            :pickingModes="pickingModes"

            :viewId="viewId"
            :wsClient="wsClient"
            :style="localStyle"

            :camera="camera"
            :interactorEvents="interactorEvents"
            :interactorSettings="interactorSettings"
            :contextName="contextName"
            :boxSelection="boxSelection"

            :viewState="viewState"

            @resetCamera="trigger(cameraKey, [getCamera()])"
            @beforeSceneLoaded="onReady(false)"
            @onReady="onReady($event)"

            @onImageCapture="emit('onLocalImageCapture', $event)"

            @BoxSelection="emit('BoxSelection', $event)"
            @StartAnimation="emit('StartAnimation', $event)"
            @Animation="emit('Animation', $event)"
            @EndAnimation="trigger(cameraKey, [getCamera()]); emit('EndAnimation', $event)"
            @MouseEnter="emit('MouseEnter', $event)"
            @MouseLeave="emit('MouseLeave', $event)"
            @StartMouseMove="emit('StartMouseMove', $event)"
            @MouseMove="emit('MouseMove', $event)"
            @EndMouseMove="emit('EndMouseMove', $event)"
            @LeftButtonPress="emit('LeftButtonPress', $event)"
            @LeftButtonRelease="emit('LeftButtonRelease', $event)"
            @MiddleButtonPress="emit('MiddleButtonPress', $event)"
            @MiddleButtonRelease="emit('MiddleButtonRelease', $event)"
            @RightButtonPress="emit('RightButtonPress', $event)"
            @RightButtonRelease="emit('RightButtonRelease', $event)"
            @KeyPress="emit('KeyPress', $event)"
            @KeyDown="emit('KeyDown', $event)"
            @KeyUp="emit('KeyUp', $event)"
            @StartMouseWheel="emit('StartMouseWheel', $event)"
            @MouseWheel="emit('MouseWheel', $event)"
            @EndMouseWheel="emit('EndMouseWheel', $event)"
            @StartPinch="emit('StartPinch', $event)"
            @Pinch="emit('Pinch', $event)"
            @EndPinch="emit('EndPinch', $event)"
            @StartPan="emit('StartPan', $event)"
            @Pan="emit('Pan', $event)"
            @EndPan="emit('EndPan', $event)"
            @StartRotate="emit('StartRotate', $event)"
            @Rotate="emit('Rotate', $event)"
            @EndRotate="emit('EndRotate', $event)"
            @Button3D="emit('Button3D', $event)"
            @Move3D="emit('Move3D', $event)"
            @StartPointerLock="emit('StartPointerLock', $event)"
            @EndPointerLock="emit('EndPointerLock', $event)"
            @StartInteraction="emit('StartInteraction', $event)"
            @Interaction="emit('Interaction', $event)"
            @EndInteraction="emit('EndInteraction', $event)"

            @click="emit('click', $event)"
            @hover="emit('hover', $event)"
            @select="emit('select', $event)"
          >
            <slot></slot>
          </vtk-sync-view>
          <vtk-remote-view
            ref="remoteViewRef"

            :pickingModes="pickingModes"

            :viewId="viewId"
            :wsClient="wsClient"
            :style="remoteStyle"
            :visible="mode === 'remote' || !computedLocalRenderingReady"

            @onImageCapture="emit('onRemoteImageCapture', $event)"

            @onEndAnimation="trigger(cameraKey)"

            :interactiveRatio="interactiveRatio"
            :interactiveQuality="interactiveQuality"
            :stillRatio="stillRatio"
            :stillQuality="stillQuality"
            :boxSelection="boxSelection"
            :enablePicking="enablePicking"

            @BoxSelection="emit('BoxSelection', $event)"

            @click="emit('click', $event)"
            @hover="emit('hover', $event)"
            @select="emit('select', $event)"
          />
        </div>
  `},VtkRemoteView:sp,VtkSyncView:vu,VtkLocalView:vu,VtkView:{props:{background:{type:Array,default:()=>[.2,.3,.4]},camera:{type:Object,default:null},interactorEvents:{type:Array,default:()=>["EndAnimation"]},interactorSettings:{type:Array,default:()=>[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Select",shift:!0},{button:1,action:"Roll",alt:!0,shift:!0}]},pickingModes:{type:Array,default:()=>[]},showCubeAxes:{type:Boolean,default:!1},cubeAxesStyle:{type:Object,default:()=>({})}},emits:["resize","resetCamera","BoxSelection","StartAnimation","Animation","EndAnimation","PointerEnter","PointerLeave","MouseEnter","MouseLeave","StartMouseMove","MouseMove","EndMouseMove","LeftButtonPress","LeftButtonRelease","MiddleButtonPress","MiddleButtonRelease","RightButtonPress","RightButtonRelease","KeyPress","KeyDown","KeyUp","StartMouseWheel","MouseWheel","EndMouseWheel","StartPinch","Pinch","EndPinch","StartPan","Pan","EndPan","StartRotate","Rotate","EndRotate","Button3D","Move3D","StartPointerLock","EndPointerLock","StartInteraction","Interaction","EndInteraction","AnimationFrameRateUpdate"],setup(t,{emit:e}){const a=se.ref(null),n=new YE(t.background,t.pickingModes,t.interactorSettings,t.interactorEvents,{emit:e,nextTick:se.nextTick}),{onEnter:r,onLeave:i,onKeyUp:s}=Eg(n),u=new ResizeObserver(()=>n.resize());se.onMounted(()=>{const p=a.value;n.setContainer(p),u.observe(p),document.addEventListener("keyup",s)}),se.onBeforeUnmount(()=>{n.beforeDelete(),document.removeEventListener("keyup",s),u.disconnect()}),se.watch(()=>t.interactorSettings,()=>n.updateStyle(t.interactorSettings)),se.watch(()=>t.pickingModes,()=>n.pickingModes=t.pickingModes),se.provide("view",n);const{onClick:c,onMouseMove:o}=n;return{vtkContainer:a,onEnter:r,onLeave:i,onClick:c,onMouseMove:o,resetCamera:()=>n.resetCamera(),getCamera:()=>n.getCamera(),setCamera:p=>n.setCamera(p)}},template:`
        <div
          style="position:relative;width:100%;height:100%;"
          @mouseenter="onEnter"
          @mouseleave="onLeave"
          @click="onClick"
          @mousemove="onMouseMove"
        >
          <div
            ref="vtkContainer"
            style="position:absolute;width:100%;height:100%;overflow:hidden;"
          />
          <slot style="display: none;"></slot>
        </div>
      `}};function JE(){return z0.rgbPresetNames}function Ng(t){return t.split("_").map(e=>`${e.charAt(0).toUpperCase()}${e.slice(1)}`).join(" ")}function Mg(t){return t.map(e=>({text:Ng(e),value:e}))}function ZE(){return Mg(z0.rgbPresetNames)}const ea={vtkColorPresetNames:JE,vtkLabel:Ng,ListToItem:Mg,vtkColorPresetItems:ZE};function QE(t){var e,a;Object.keys(Og).forEach(n=>{t.component(n,Og[n])}),(a=(e=window==null?void 0:window.trame)==null?void 0:e.utils)!=null&&a.vtk&&Object.keys(ea).forEach(n=>{window.trame.utils.vtk[n]=ea[n]})}const eD=ea.vtkColorPresetNames,tD=ea.vtkLabel,nD=ea.ListToItem,rD=ea.vtkColorPresetItems;Pt.ListToItem=nD,Pt.install=QE,Pt.vtkColorPresetItems=rD,Pt.vtkColorPresetNames=eD,Pt.vtkLabel=tD,Object.defineProperty(Pt,Symbol.toStringTag,{value:"Module"})});
